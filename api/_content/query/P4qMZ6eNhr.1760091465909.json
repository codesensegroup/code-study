{"_path":"/sdi-aig/chapter9","_dir":"sdi-aig","_draft":false,"_partial":false,"_locale":"","title":"09 設計網路爬蟲","description":"","pageTitle":"Chapter 9 設計網路爬蟲","contributors":["changemyminds"],"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"什麼是網路爬蟲"},"children":[{"type":"text","value":"什麼是網路爬蟲？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"網路爬蟲，又稱 Spider 或 Robot，是一種自動化程式，用來在網際網路上 下載網頁內容、解析其中的連結，再把新連結加入待抓佇列，如此反覆迴圈地遍歷整個網站或更大的網址空間。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Web Crawler Overview","src":"/code-study/images/sdi-aig/09/figure9-1.jpg"},"children":[]}]},{"type":"element","tag":"h3","props":{"id":"常見四大用途"},"children":[{"type":"text","value":"常見四大用途"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"用途"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"說明"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"代表例子"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"搜尋引擎索引"}]}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"下載網頁並 "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"建立"}]},{"type":"text","value":" 本地索引，供搜尋引擎快速查詢"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Googlebot（Google 搜尋）"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"網路封存"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"(Web Archiving)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"定期擷取網站內容並長期保存，作為數位典藏"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"美國國會圖書館、歐盟網路檔案館"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"網路挖掘"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"(Web Mining)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"大規模收集公開資料，再進行資料探勘以擷取知識"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"金融機構抓取股東會與年度報告"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"網路監控"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"(Web Monitoring)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"監測版權、商標或內容侵權，偵測並通報不當使用"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Digimarc 掃描網路盜版作品"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"第一步驟瞭解問題並確立設計的範圍"},"children":[{"type":"text","value":"第一步驟：瞭解問題並確立設計的範圍"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"網路爬蟲基本的演算法其實很簡單:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"給定一組網址, 然後把網址所對應的網頁全部下載下來"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"從這些網頁中提取所有的網址連結"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"把新的網址添加到所要下載的網址列表中. 重複執行以上這3個步驟."}]}]},{"type":"element","tag":"h3","props":{"id":"問題釐清對話"},"children":[{"type":"text","value":"問題釐清對話"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"應試者"}]},{"type":"text","value":"：爬蟲的主要目的是什麼？是搜尋引擎索引、資料挖掘，還是其他用途？"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"面試官"}]},{"type":"text","value":"：搜尋引擎索引。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"應試者"}]},{"type":"text","value":"：網路爬蟲每個月需要抓取多少網頁？"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"面試官"}]},{"type":"text","value":"：10 億頁。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"應試者"}]},{"type":"text","value":"：包含哪些內容類型？只有 HTML 嗎，還是也要處理 PDF、圖片？"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"面試官"}]},{"type":"text","value":"：只有 HTML。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"應試者"}]},{"type":"text","value":"：是否需要偵測新增或已編輯的網頁？"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"面試官"}]},{"type":"text","value":"：是，需要考慮新增加或已修改的頁面。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"應試者"}]},{"type":"text","value":"：抓取到的 HTML 需要保存多久？"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"面試官"}]},{"type":"text","value":"：保存最多 5 年。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"應試者"}]},{"type":"text","value":"：如果遇到重複內容的頁面要怎麼辦？"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"面試官"}]},{"type":"text","value":"：重複內容應該忽略，不儲存。"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"✔︎ 以上對話用來"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"釐清需求並確認假設"}]},{"type":"text","value":"，避免與面試官對「爬蟲的範圍與目標」產生落差。"}]}]},{"type":"element","tag":"h3","props":{"id":"優秀網路爬蟲的特徵"},"children":[{"type":"text","value":"優秀網路爬蟲的特徵"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"可伸縮性（Scalability）"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"網路規模極大，擁有數十億個網頁。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"系統需支援 "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"分散式與並行化"}]},{"type":"text","value":" 的抓取方式，以提升效率。"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"穩健性（Robustness）"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"網路充滿陷阱：錯誤的 HTML、無回應的伺服器、崩潰或惡意連結等。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"爬蟲必須具備容錯機制來應對這些異常情況。"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"禮貌性（Politeness）"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"不應在短時間內對同一網站發出過多請求。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"應遵守 "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"robots.txt"}]},{"type":"text","value":" 規範並設定抓取延遲，避免造成伺服器負擔。"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"可擴展性（Extensibility）"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"系統設計應保持彈性，只需少量修改即可支援新的內容型態。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"例如：未來若要抓取圖片檔案，不需重新設計整個架構。"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"基本需求與核心功能"},"children":[{"type":"text","value":"基本需求與核心功能"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"網頁抓取"}]},{"type":"text","value":"：\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"依「種子 URL → 下載 → 解析 → 新 URL 入佇列」的迴圈流程遞迴抓取。"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"更新偵測"}]},{"type":"text","value":"：\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"能定期重新抓取已存在的頁面，以納入新增或已編輯的內容。"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"重複內容去除"}]},{"type":"text","value":"：\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"以內容雜湊（content hash）或 URL 去重機制，避免存儲同樣頁面。"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"資料儲存"}]},{"type":"text","value":"：\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"將 HTML "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"存放"}]},{"type":"text","value":" 最長 5 年，支援高吞吐量讀寫。"}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h3","props":{"id":"粗略的估算"},"children":[{"type":"text","value":"粗略的估算"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"項目"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"計算"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"結果"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"平均 QPS"}]}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"10 億頁 ÷ 30 天 ÷ 24 小時 ÷ 3600 秒"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"≈ 400 頁/秒"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"峰值 QPS"}]}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"2 × 平均 QPS（假設尖峰為兩倍）"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"≈ 800 頁/秒"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"月儲存量"}]}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"10 億頁 × 500 KB/頁"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"≈ 500 TB/月"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"五年儲存量"}]}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"500 TB/月 × 12 月 × 5 年"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"≈ 30 PB"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"【補充】實際值會依抓取頻率、壓縮率與去重效率略有差異；估算時應與面試官確認每一步的假設。"}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"第二步驟提出高階設計並取得認可"},"children":[{"type":"text","value":"第二步驟：提出高階設計並取得認可"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"網路爬蟲的高層設計包含多個協同工作的組件，以下詳細說明各組件的功能與職責。"}]},{"type":"element","tag":"h3","props":{"id":"核心組件"},"children":[{"type":"text","value":"核心組件"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Core Components","src":"/code-study/images/sdi-aig/09/figure9-2.jpg"},"children":[]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"種子網址（Seed URLs）"}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"功能：作為爬蟲的起始點"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"選擇策略：\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"單一網站：使用該網站的域名作為種子"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"全網爬取：需要創意性的選擇方法\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"基於地理位置劃分（不同國家的熱門網站）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"基於主題劃分（購物、體育、醫療等）"}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"重點：好的種子URL能讓爬蟲遍歷最多的鏈接"}]}]},{"type":"element","tag":"ol","props":{"start":2},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"網址邊境（URL Frontier）"}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"功能：儲存待下載的URL隊列"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"實作方式：FIFO（先進先出）隊列"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"狀態管理：將爬蟲狀態分為「待下載」和「已下載」"}]}]},{"type":"element","tag":"ol","props":{"start":3},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"HTML 下載器（HTML Downloader）"}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"功能：從網路下載網頁內容"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"資料來源：從網址邊境（URL Frontier）獲取待下載的URL"}]}]},{"type":"element","tag":"ol","props":{"start":4},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"DNS解析器（DNS Resolver）"}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"功能：將URL轉換為IP地址"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"範例："},{"type":"element","tag":"a","props":{"href":"http://www.wikipedia.org","rel":["nofollow"]},"children":[{"type":"text","value":"www.wikipedia.org"}]},{"type":"text","value":" → 198.35.26.96"}]}]},{"type":"element","tag":"ol","props":{"start":5},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"內容解析器（Content Parser）"}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"功能：解析和驗證下載的網頁"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"設計考量：\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"獨立組件設計，避免拖慢爬蟲速度"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"過濾格式錯誤的網頁，節省儲存空間"}]}]}]}]},{"type":"element","tag":"ol","props":{"start":6},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"看過的內容（Content Seen）"}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"功能：檢測重複內容（研究顯示29%的網頁是重複的）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"實作方式：使用哈希值比較，而非逐字比較"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"效益：\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"消除數據冗余"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"縮短處理時間"}]}]}]}]},{"type":"element","tag":"ol","props":{"start":7},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"內容儲存（Content Storage）"}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"儲存策略：\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"磁碟：儲存大部分內容（數據量太大無法全部放入記憶體）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"記憶體：快取熱門內容以降低延遲"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"選擇依據：數據類型、大小、訪問頻率、生命週期"}]}]},{"type":"element","tag":"ol","props":{"start":8},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"網址鏈結提取器（URL/Links Extractor）"}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"功能：從HTML頁面解析並提取鏈接"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"處理：將相對路徑轉換為絕對URL"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"URL Extractor","src":"/code-study/images/sdi-aig/09/figure9-3.jpg"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"範例：\"/wiki/...\" → \""},{"type":"element","tag":"a","props":{"href":"https://en.wikipedia.org/wiki/","rel":["nofollow"]},"children":[{"type":"text","value":"https://en.wikipedia.org/wiki/"}]},{"type":"text","value":"...\""}]},{"type":"element","tag":"ol","props":{"start":9},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"網址篩選器（URL Filter）"}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"功能：過濾不需要的URL"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"過濾條件：\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"特定內容類型"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"文件擴展名"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"錯誤Link"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"黑名單網站"}]}]}]}]},{"type":"element","tag":"ol","props":{"start":10},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"看過的網址（URL Seen）"}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"功能：追蹤已訪問過或已在Frontier中的URL"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"重要性：\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"避免重複添加相同URL"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"防止服務器過載"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"避免無限循環"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"實作技術：布隆過濾器（Bloom Filter）或哈希表"}]},{"type":"element","tag":"ol","props":{"start":11},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"網址儲存系統（URL Storage）"}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"功能：儲存已訪問過的URL記錄"}]}]},{"type":"element","tag":"ol","props":{"start":12},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"網路爬蟲的工作流程"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Web Crawler Workflow","src":"/code-study/images/sdi-aig/09/figure9-4.jpg"},"children":[]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"第 1 步：種子URL初始化, 將種子URL添加到URL Frontier隊列中，作為爬蟲的起始點。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"第 2 步：獲取待處理URL, HTML下載器從URL Frontier獲取URL列表，準備進行下載。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"第 3 步：解析與下載, HTML下載器透過DNS解析器獲取URL對應的IP地址，並開始下載網頁內容。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"第 4 步：內容解析, Content Parser解析HTML頁面，檢查頁面格式是否正確，過濾掉格式錯誤的頁面。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"第 5 步：傳遞已解析內容, 內容經過解析和驗證後，傳遞給「Content Seen?」組件進行去重檢查。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"第 6 步：內容去重檢查「Content Seen?」組件檢查HTML頁面是否已存在於儲存系統中：\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"若已存在：表示相同內容已被處理過（可能來自不同URL），直接丟棄該HTML頁面"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"若不存在：表示是新內容，將內容傳遞給URL提取器繼續處理"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"第 7 步：提取鏈接, URL提取器從HTML頁面中解析並提取所有URL鏈接。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"第 8 步：URL過濾, 將提取的URL傳遞給URL過濾器，過濾掉不需要的鏈接。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"第 9 步：傳遞已過濾URL, URL過濾完成後，傳遞給「URL Seen?」組件。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"第 10 步：URL去重檢查, 「URL Seen?」組件檢查URL是否已在儲存系統中：\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"若已存在：表示該URL已被處理過，無需採取任何行動"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"若不存在：進入下一步"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"第 11 步：加入待處理隊列, 如果URL之前沒有被處理過，將其添加到URL Frontier，等待下一輪處理。"}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"第三步驟深入設計"},"children":[{"type":"text","value":"第三步驟：深入設計"}]},{"type":"element","tag":"h3","props":{"id":"圖遍歷策略dfs-vs-bfs"},"children":[{"type":"text","value":"圖遍歷策略：DFS vs BFS"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"為何選擇BFS而非DFS"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"網路結構：網路可視為有向圖（網頁為節點，超鏈接為邊）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"DFS問題：深度可能過深，容易陷入單一網站"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"BFS優勢：廣度優先，能更均勻地爬取不同網站"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"DFS vs BFS","src":"/code-study/images/sdi-aig/09/figure9-5.jpg"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"標準BFS的兩大問題"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"禮貌性問題：同一網頁的大部分鏈接指向同一主機，可能造成服務器請求氾濫"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"優先級問題：未考慮URL的重要性差異"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"💡 BFS與DFS的差異, 可以參考 "},{"type":"element","tag":"a","props":{"href":"html/bfs_dfs.html","target":"_blank"},"children":[{"type":"text","value":"BFS vs DFS"}]}]},{"type":"element","tag":"h3","props":{"id":"url-frontier-詳細設計"},"children":[{"type":"text","value":"URL Frontier 詳細設計"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"禮貌性機制（Politeness）"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"核心原則："}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"避免短時間內向同一服務器發送過多請求"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"一次只從同一主機下載一個頁面"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"下載任務之間添加延遲"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"實現架構："}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Queue router：確保每個隊列只包含同一主機的URL"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Mapping table：主機名到隊列的映射表"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"FIFO隊列（b1-bn）：每個隊列對應一個主機"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Queue selector：分配工作線程到特定隊列"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Worker threads：依序下載，避免並發請求同一主機"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Politeness Queue Architecture","src":"/code-study/images/sdi-aig/09/figure9-6.jpg"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Mapping Table","src":"/code-study/images/sdi-aig/09/table9-1.jpg"},"children":[]}]},{"type":"element","tag":"ol","props":{"start":2},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"優先級管理（Priority）"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"優先級依據："}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"PageRank分數"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"網站流量"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"更新頻率"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"內容重要性"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"實現組件："}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Prioritizer：計算URL優先級"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"優先級隊列（f1-fn）：不同優先級的隊列"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Queue selector：偏向選擇高優先級隊列"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Priority Queue Architecture","src":"/code-study/images/sdi-aig/09/figure9-7.jpg"},"children":[]}]},{"type":"element","tag":"ol","props":{"start":3},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"完整架構"}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"前端隊列：管理優先級"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"後端隊列：管理禮貌性"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Complete URL Frontier Architecture","src":"/code-study/images/sdi-aig/09/figure9-8.jpg"},"children":[]}]},{"type":"element","tag":"ol","props":{"start":4},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"新鮮度維護（Freshness）"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"優化策略："}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"基於歷史更新頻率調整重爬頻率"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"優先重爬重要頁面"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"動態調整爬取週期"}]}]},{"type":"element","tag":"ol","props":{"start":5},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"儲存優化"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"混合儲存方案："}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"磁盤：儲存大部分URL（數億級別）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"記憶體緩衝：加速入隊/出隊操作"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"定期同步：緩衝區數據定期寫入磁盤"}]}]},{"type":"element","tag":"h3","props":{"id":"html下載器優化"},"children":[{"type":"text","value":"HTML下載器優化"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Robots.txt協議"}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"功能：網站與爬蟲的溝通標準"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"實施：\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"爬取前檢查robots.txt"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"快取結果避免重複下載"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"定期更新快取"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"下面是取自 "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"https://www.amazon.com/robots.txt"}]},{"type":"text","value":" 的robots.txt文件"}]},{"type":"element","tag":"pre","props":{"code":"User-agent: Googlebot\nDisallow: /creatorhub/*\nDisallow: /rss/people/*/reviews\nDisallow: /gp/pdp/rss/*/reviews\nDisallow: /gp/cdp/member-reviews/\nDisallow: /gp/aw/cr/\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"User-agent: Googlebot\nDisallow: /creatorhub/*\nDisallow: /rss/people/*/reviews\nDisallow: /gp/pdp/rss/*/reviews\nDisallow: /gp/cdp/member-reviews/\nDisallow: /gp/aw/cr/\n"}]}]},{"type":"element","tag":"ol","props":{"start":2},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"性能優化技術"}]},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"分布式爬取"}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"URL空間分割"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"多服務器並行處理"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"每個下載器負責特定URL子集"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Distributed Crawling","src":"/code-study/images/sdi-aig/09/figure9-9.jpg"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"DNS優化"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"問題：DNS解析延遲（10-200ms）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"解決方案：\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"維護DNS快取"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"域名到IP的映射表"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"定期更新（cron job）"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"地理位置優化"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"爬蟲服務器地理分布"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"就近爬取降低延遲"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"適用於所有系統組件"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"超時控制"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"設置最大等待時間"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"避免無響應服務器阻塞"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"快速切換到其他任務"}]}]},{"type":"element","tag":"h3","props":{"id":"系統穩健性robustness"},"children":[{"type":"text","value":"系統穩健性（Robustness）"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"關鍵技術"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"一致性哈希：動態負載均衡，支持服務器增減"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"狀態持久化：定期保存爬取狀態，支持故障恢復"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"異常處理：優雅處理錯誤，防止系統崩潰"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"數據校驗：確保數據完整性和正確性"}]}]},{"type":"element","tag":"h3","props":{"id":"可擴展性extensibility"},"children":[{"type":"text","value":"可擴展性（Extensibility）"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"插件化架構"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"模組化設計：支持動態添加新功能"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"範例擴展：\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"PNG下載器模組"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"網路監控模組（版權保護）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"其他文件類型處理器"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Extensible Architecture","src":"/code-study/images/sdi-aig/09/figure9-10.jpg"},"children":[]}]},{"type":"element","tag":"h3","props":{"id":"問題內容檢測與預防"},"children":[{"type":"text","value":"問題內容檢測與預防"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"重複內容"}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"統計：約30%網頁重複"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"解決方案：哈希值或校驗和檢測"}]}]},{"type":"element","tag":"ol","props":{"start":2},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"蜘蛛陷阱（Spider Traps）"}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"定義：導致無限循環的網頁結構"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"預防措施：\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"設置URL最大長度"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"監控單一網站頁面數異常"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"手動識別並排除"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"自定義URL過濾器"}]}]}]}]},{"type":"element","tag":"ol","props":{"start":3},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"垃圾數據"}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"類型：廣告、代碼片段、垃圾URL"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"處理：識別並排除無價值內容"}]}]},{"type":"element","tag":"h3","props":{"id":"關鍵要點總結"},"children":[{"type":"text","value":"關鍵要點總結"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"BFS優於DFS：適合網路爬蟲的廣度遍歷"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"禮貌性至關重要：避免對服務器造成負擔"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"優先級管理：提高爬取效率和質量"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"混合儲存：平衡性能與成本"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"分布式架構：提升系統擴展性"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"多層優化：DNS、地理位置、超時控制"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"容錯設計：確保系統穩定運行"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"插件化擴展：適應未來需求變化"}]}]},{"type":"element","tag":"h2","props":{"id":"第四步驟彙整總結"},"children":[{"type":"text","value":"第四步驟：彙整總結"}]},{"type":"element","tag":"h3","props":{"id":"優秀爬蟲的四大特徵"},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"優秀爬蟲的四大特徵"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"可伸縮性（Scalability）：能夠處理大規模網路爬取"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"禮貌性（Politeness）：尊重網站服務器，避免造成負擔"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"可擴展性（Extensibility）：易於添加新功能和模組"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"穩健性（Robustness）：能夠處理各種異常情況"}]}]},{"type":"element","tag":"h3","props":{"id":"未涵蓋的重要議題"},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"未涵蓋的重要議題"}]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"服務器端渲染（動態渲染）"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"問題：許多網站使用JavaScript、AJAX等腳本即時生成鏈接"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"挑戰：直接下載解析網頁無法獲取動態生成的鏈接"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"解決方案：在解析網頁前進行服務器端渲染"}]}]},{"type":"element","tag":"ol","props":{"start":2},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"過濾不需要的頁面"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"原因：儲存容量和爬取資源有限"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"方法：使用反垃圾信息組件"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"目標：過濾低質量和垃圾頁面"}]}]},{"type":"element","tag":"ol","props":{"start":3},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"數據庫複製和分片"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"目的：提高數據層的：\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"可用性"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"可擴展性"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"可靠性"}]}]}]}]},{"type":"element","tag":"ol","props":{"start":4},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"水平擴展"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"規模：大規模爬取需要數百甚至數千台服務器"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"關鍵：保持服務器無狀態"}]}]},{"type":"element","tag":"ol","props":{"start":5},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"系統核心概念"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"可用性（Availability）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"一致性（Consistency）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"可靠性（Reliability）\n這些是任何大型系統成功的核心要素"}]}]},{"type":"element","tag":"ol","props":{"start":6},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"分析（Analytics）"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"重要性：任何系統的重要組成部分"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"用途：數據是系統微調的關鍵要素"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"內容：收集和分析系統運行數據"}]}]},{"type":"element","tag":"h3","props":{"id":"關鍵要點"},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"關鍵要點"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"建置可擴展的網路爬蟲並非簡單任務，因為："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"網路規模極其龐大"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"存在各種陷阱和挑戰"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"需要考慮多個複雜的技術層面"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"什麼是網路爬蟲","depth":2,"text":"什麼是網路爬蟲？","children":[{"id":"常見四大用途","depth":3,"text":"常見四大用途"}]},{"id":"第一步驟瞭解問題並確立設計的範圍","depth":2,"text":"第一步驟：瞭解問題並確立設計的範圍","children":[{"id":"問題釐清對話","depth":3,"text":"問題釐清對話"},{"id":"優秀網路爬蟲的特徵","depth":3,"text":"優秀網路爬蟲的特徵"},{"id":"基本需求與核心功能","depth":3,"text":"基本需求與核心功能"},{"id":"粗略的估算","depth":3,"text":"粗略的估算"}]},{"id":"第二步驟提出高階設計並取得認可","depth":2,"text":"第二步驟：提出高階設計並取得認可","children":[{"id":"核心組件","depth":3,"text":"核心組件"}]},{"id":"第三步驟深入設計","depth":2,"text":"第三步驟：深入設計","children":[{"id":"圖遍歷策略dfs-vs-bfs","depth":3,"text":"圖遍歷策略：DFS vs BFS"},{"id":"url-frontier-詳細設計","depth":3,"text":"URL Frontier 詳細設計"},{"id":"html下載器優化","depth":3,"text":"HTML下載器優化"},{"id":"系統穩健性robustness","depth":3,"text":"系統穩健性（Robustness）"},{"id":"可擴展性extensibility","depth":3,"text":"可擴展性（Extensibility）"},{"id":"問題內容檢測與預防","depth":3,"text":"問題內容檢測與預防"},{"id":"關鍵要點總結","depth":3,"text":"關鍵要點總結"}]},{"id":"第四步驟彙整總結","depth":2,"text":"第四步驟：彙整總結","children":[{"id":"優秀爬蟲的四大特徵","depth":3,"text":"優秀爬蟲的四大特徵"},{"id":"未涵蓋的重要議題","depth":3,"text":"未涵蓋的重要議題"},{"id":"關鍵要點","depth":3,"text":"關鍵要點"}]}]}},"_type":"markdown","_id":"content:7.sdi-aig:9.chapter9.md","_source":"content","_file":"7.sdi-aig/9.chapter9.md","_extension":"md"}