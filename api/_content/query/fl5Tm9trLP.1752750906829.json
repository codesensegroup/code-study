{"_path":"/web-api/chapter2","_dir":"web-api","_draft":false,"_partial":false,"_locale":"","title":"第2章 EndPoint設計與請求形式","description":"","pageTitle":"第2章 EndPoint設計與請求形式","contributors":["changemyminds","spyua"],"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"_21-設計通過api公開的功能"},"children":[{"type":"text","value":"2.1 設計通過API公開的功能"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"SNS在線服務功能"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用者註冊"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"登入"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"獲取自己的資訊"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"更新自己的資訊"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"取得使用者資訊"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"搜尋使用者"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"添加好友"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"刪除好友"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"取得好友列表"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"搜尋好友"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"發送消息"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"取得好友的訊息"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"編輯訊息"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"刪除訊息"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"好友動態列表"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"特定用的動態列表"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"發表動態訊息"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"編輯動態訊息"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"刪除動態訊息"}]}]},{"type":"element","tag":"h2","props":{"id":"_22-api-endpoint的設計思想"},"children":[{"type":"text","value":"2.2 API EndPoint的設計思想"}]},{"type":"element","tag":"h4","props":{"id":"endpoint的基本設計"},"children":[{"type":"text","value":"EndPoint的基本設計"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"怎麼設計一個優秀的URI，有一個重要的原則"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"容易記憶，URI包含的功能一目了然"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"💡"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"容易記憶的原則如下"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"短小便於輸入的URI"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"人可以讀懂的URI"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"沒有大小寫混用的URI"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"修改方便的URI"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"不會曝露伺服器架構的URI"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"規則統一的URI"}]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"短小便於輸入的URI"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"💀 反例"},{"type":"element","tag":"pre","props":{"code":"http://api.example.com/service/api/search\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes github-dark github-light monokai","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"http://api.example.com/service/api/search\n"}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"💡 正例"},{"type":"element","tag":"pre","props":{"code":"http://api.example.com/search\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes github-dark github-light monokai","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"http://api.example.com/search\n"}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"✅ 結論"},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"將URI使用短小、簡單的方式進行表達，更易於理解和記憶。"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"人可以讀懂的URI"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"💀 反例"},{"type":"element","tag":"pre","props":{"code":"http://api.example.com/sv/u\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes github-dark github-light monokai","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"http://api.example.com/sv/u\n"}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"💡 正例"},{"type":"element","tag":"pre","props":{"code":"http://api.example.com/products/12345\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes github-dark github-light monokai","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"http://api.example.com/products/12345\n"}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"📦 補充"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"API的設計查詢時，該使用"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"search"}]},{"type":"text","value":"還是"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"find"}]},{"type":"text","value":"詞彙?"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"通常使用"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"search"}]},{"type":"text","value":"來表示，"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"search"}]},{"type":"text","value":"表示在某個地方尋找，而"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"find"}]},{"type":"text","value":"則是尋找某個特定物品。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"✅ 結論"},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"盡量少用縮寫，適當的使用完整的英文單字來表示。"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"沒有大小寫混用的URI"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"💀 反例"},{"type":"element","tag":"pre","props":{"code":"http://api.example.com/Users/12345\nhttp://example.com/API/getUserName\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes github-dark github-light monokai","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"http://api.example.com/Users/12345\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"http://example.com/API/getUserName\n"}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"💡 正例"},{"type":"element","tag":"pre","props":{"code":"http://api.example.com/users/12345\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes github-dark github-light monokai","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"http://api.example.com/users/12345\n"}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"📦 補充"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"如果遇到兩種大小寫的URI進行混用時，應該如何進行處理?"},{"type":"element","tag":"pre","props":{"code":"http://example.com/USERS/12345\nhttp://example.com/users/12345\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes github-dark github-light monokai","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"http://example.com/USERS/12345\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"http://example.com/users/12345\n"}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"在普通的Web網站下，如果採用了不論大小寫都會返回相同的結果會出現一種問題，會導致Google等搜尋引    擎會認為有多個頁面返回了相同的結果而導致網站排名進行下降。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"參考下列服務，當遇到大寫字母的URI時，會自動返回404"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"在線服務"}]},{"type":"element","tag":"th","props":{"align":"center"},"children":[{"type":"text","value":"處理混有大寫字母的URL"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Foursqare"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"出錯404"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Github"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"出錯404"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Tumblr"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"出錯404"}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"✅ 結論"},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"盡量不要使用大小寫字母混用會造成API難以理解，一般標準的做法是，統一使用小寫的URI。"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"修改方便的URI"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"修改方便在英語文語意為"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"Hackable"}]},{"type":"text","value":"。修改方便的URI指的是能將某個URI非常容易修改為另外一個URI。    通常應用在獲取某種商品。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"💀 反例"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"按照資料庫的資料表進行結構區分，例如: 1 ~ 300000儲存到alpha資表表內。"},{"type":"element","tag":"pre","props":{"code":"# ID的範圍 1 ~ 300000\nhttp://api.example.com/v1/items/alpha/:id\n\n# ID的範圍 400001 ~ 500000\nhttp://api.example.com/v1/items/beta/:id\n\n# ID的範圍 500001 ~ 700000\nhttp://api.example.com/v1/items/gamma/:id\n\n# ID的範圍 700001 ~\nhttp://api.example.com/v1/items/delta/:id\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes github-dark github-light monokai","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#6A737D;--shiki-default:#6A737D;--shiki-sepia:#88846F"},"children":[{"type":"text","value":"# ID的範圍 1 ~ 300000\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"http://api.example.com/v1/items/alpha/:id\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#6A737D;--shiki-default:#6A737D;--shiki-sepia:#88846F"},"children":[{"type":"text","value":"# ID的範圍 400001 ~ 500000\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"http://api.example.com/v1/items/beta/:id\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#6A737D;--shiki-default:#6A737D;--shiki-sepia:#88846F"},"children":[{"type":"text","value":"# ID的範圍 500001 ~ 700000\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"http://api.example.com/v1/items/gamma/:id\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#6A737D;--shiki-default:#6A737D;--shiki-sepia:#88846F"},"children":[{"type":"text","value":"# ID的範圍 700001 ~\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"http://api.example.com/v1/items/delta/:id\n"}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"💡 正例"},{"type":"element","tag":"pre","props":{"code":"http://api.example.com/v1/items/123456\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes github-dark github-light monokai","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"http://api.example.com/v1/items/123456\n"}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"✅ 結論"},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"盡量讓URI的延展性佳(這邊指的是/items/{id})，可以藉由輸入不同的編號，來修改URI，而不是必須    要去猜測。"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"不會曝露伺服器架構的URI"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"💀 反例"},{"type":"element","tag":"pre","props":{"code":"http://api.example.com/cgi-bin/get_user.php?user=100\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes github-dark github-light monokai","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"http://api.example.com/cgi-bin/get_user.php?user"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"=100\n"}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"💡 正例"},{"type":"element","tag":"pre","props":{"code":"http://api.example.com/user/100\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes github-dark github-light monokai","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"http://api.example.com/user/100\n"}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"✅ 結論"},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"不要將無意義的資訊暴露出來。例如:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"cgi-bin"}]},{"type":"text","value":"，可以猜測你可能是使用CGI的方式運行。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"get_user.php"}]},{"type":"text","value":"，可以猜測你可能是使用php進行撰寫。"}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"規則統一的URI"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"💀 反例"},{"type":"element","tag":"pre","props":{"code":"# 獲取好友資訊\nhttp://api.example.com/friends?id=100\n\n# 發送好友資訊\nhttp://api.example.com/friend/100/message\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes github-dark github-light monokai","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#6A737D;--shiki-default:#6A737D;--shiki-sepia:#88846F"},"children":[{"type":"text","value":"# 獲取好友資訊\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"http://api.example.com/friends?id"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"=100\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#6A737D;--shiki-default:#6A737D;--shiki-sepia:#88846F"},"children":[{"type":"text","value":"# 發送好友資訊\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"http://api.example.com/friend/100/message\n"}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"💡 正例"},{"type":"element","tag":"pre","props":{"code":"# 獲取好友資訊\nhttp://api.example.com/friends/100\n\n# 發送好友資訊\nhttp://api.example.com/friends/100/message\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes github-dark github-light monokai","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#6A737D;--shiki-default:#6A737D;--shiki-sepia:#88846F"},"children":[{"type":"text","value":"# 獲取好友資訊\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"http://api.example.com/friends/100\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#6A737D;--shiki-default:#6A737D;--shiki-sepia:#88846F"},"children":[{"type":"text","value":"# 發送好友資訊\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"http://api.example.com/friends/100/message\n"}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"✅ 結論"},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"統一URI的設計，讓使用者易於理解。"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"_23-http方法和endpoint"},"children":[{"type":"text","value":"2.3 HTTP方法和EndPoint"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"方法名稱"}]},{"type":"element","tag":"th","props":{"align":"center"},"children":[{"type":"text","value":"說明"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"GET"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"獲取資源"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"POST"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"新增資源"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"PUT"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"更新已有資源"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"DELETE"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"刪除資源"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"PATCH"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"更新部分資源"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"HEAD"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"獲取資源的Metadata資訊"}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Metedata為描述資料的資料，舉例：描述HTML5這份文件的資料。 "},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nMetedata不會呈現在畫面上，只會給瀏覽器和搜尋引擎查看。 "},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"a","props":{"href":"https://ithelp.ithome.com.tw/articles/10237545","rel":["nofollow"]},"children":[{"type":"text","value":"https://ithelp.ithome.com.tw/articles/10237545"}]},{"type":"text","value":" "},{"type":"element","tag":"br","props":{},"children":[]}]}]},{"type":"element","tag":"h2","props":{"id":"_24-api端點的設計"},"children":[{"type":"text","value":"2.4 API端點的設計"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"目的"}]},{"type":"element","tag":"th","props":{"align":"center"},"children":[{"type":"text","value":"EndPoint"}]},{"type":"element","tag":"th","props":{"align":"center"},"children":[{"type":"text","value":"方法"}]},{"type":"element","tag":"th","props":{"align":"center"},"children":[{"type":"text","value":"其他相同"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"使用者註冊"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"a","props":{"href":"http://api.example.com/v1/users","rel":["nofollow"]},"children":[{"type":"text","value":"http://api.example.com/v1/users"}]},{"type":"text","value":" "},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"http://api.example.com/v1/auth/sign","rel":["nofollow"]},"children":[{"type":"text","value":"http://api.example.com/v1/auth/sign"}]},{"type":"text","value":" "},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"http://api.example.com/v1/auth/register","rel":["nofollow"]},"children":[{"type":"text","value":"http://api.example.com/v1/auth/register"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"POST"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"其他相同"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"登入"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"a","props":{"href":"http://api.example.com/v1/auth/login","rel":["nofollow"]},"children":[{"type":"text","value":"http://api.example.com/v1/auth/login"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"POST"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"獲取自己的資訊"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"a","props":{"href":"http://api.example.com/v1/users/me","rel":["nofollow"]},"children":[{"type":"text","value":"http://api.example.com/v1/users/me"}]},{"type":"text","value":" "},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"http://api.example.com/v1/auth/me","rel":["nofollow"]},"children":[{"type":"text","value":"http://api.example.com/v1/auth/me"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"GET"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"更新自己的資訊"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"a","props":{"href":"http://api.example.com/v1/users/me","rel":["nofollow"]},"children":[{"type":"text","value":"http://api.example.com/v1/users/me"}]},{"type":"text","value":" "},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"http://api.example.com/v1/auth/me","rel":["nofollow"]},"children":[{"type":"text","value":"http://api.example.com/v1/auth/me"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"PUT"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"取得使用者資訊"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"a","props":{"href":"http://api.example.com/v1/users/:id","rel":["nofollow"]},"children":[{"type":"text","value":"http://api.example.com/v1/users/:id"}]},{"type":"text","value":" "},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"http://api.example.com/v1/users/%7Bid%7D","rel":["nofollow"]},"children":[{"type":"text","value":"http://api.example.com/v1/users/{id}"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"GET"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"搜尋使用者"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"取得使用者列表"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"a","props":{"href":"http://api.example.com/v1/users","rel":["nofollow"]},"children":[{"type":"text","value":"http://api.example.com/v1/users"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"GET"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"取得好友列表"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"a","props":{"href":"http://api.example.com/v1/users/:id/friends","rel":["nofollow"]},"children":[{"type":"text","value":"http://api.example.com/v1/users/:id/friends"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"GET"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"添加好友"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"a","props":{"href":"http://api.example.com/v1/users/:id/friends","rel":["nofollow"]},"children":[{"type":"text","value":"http://api.example.com/v1/users/:id/friends"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"POST"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"刪除好友"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"a","props":{"href":"http://api.example.com/v1/users/:id/friends/:id","rel":["nofollow"]},"children":[{"type":"text","value":"http://api.example.com/v1/users/:id/friends/:id"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"DELETE"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"搜尋好友"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"a","props":{"href":"http://api.example.com/v1/users/:id/friends/:id","rel":["nofollow"]},"children":[{"type":"text","value":"http://api.example.com/v1/users/:id/friends/:id"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"GET"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"發送消息"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"a","props":{"href":"http://api.example.com/v1/friends/:id/message","rel":["nofollow"]},"children":[{"type":"text","value":"http://api.example.com/v1/friends/:id/message"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"POST"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"取得好友的訊息"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"a","props":{"href":"http://api.example.com/v1/friends/:id","rel":["nofollow"]},"children":[{"type":"text","value":"http://api.example.com/v1/friends/:id"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"GET"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"編輯訊息"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"a","props":{"href":"http://api.example.com/v1/friends/:id","rel":["nofollow"]},"children":[{"type":"text","value":"http://api.example.com/v1/friends/:id"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"PUT"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"刪除訊息"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"a","props":{"href":"http://api.example.com/v1/friends/:id","rel":["nofollow"]},"children":[{"type":"text","value":"http://api.example.com/v1/friends/:id"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"DELETE"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"好友動態列表"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"a","props":{"href":"http://api.example.com/v1/users/:id/friends/updates","rel":["nofollow"]},"children":[{"type":"text","value":"http://api.example.com/v1/users/:id/friends/updates"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"GET"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"取得特定使用者的動態訊息"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"a","props":{"href":"http://api.example.com/v1/users/:id/updates","rel":["nofollow"]},"children":[{"type":"text","value":"http://api.example.com/v1/users/:id/updates"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"GET"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"發表動態訊息"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"a","props":{"href":"http://api.example.com/v1/updates","rel":["nofollow"]},"children":[{"type":"text","value":"http://api.example.com/v1/updates"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"POST"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"編輯動態訊息"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"a","props":{"href":"http://api.example.com/v1/updates/:id","rel":["nofollow"]},"children":[{"type":"text","value":"http://api.example.com/v1/updates/:id"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"PUT"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"刪除動態訊息"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"a","props":{"href":"http://api.example.com/v1/updates/:id","rel":["nofollow"]},"children":[{"type":"text","value":"http://api.example.com/v1/updates/:id"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"DELETE"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":":id"}]},{"type":"text","value":"為佔位符號"}]}]},{"type":"element","tag":"h3","props":{"id":"_241-訪問資源的endpoint設計的注意事項"},"children":[{"type":"text","value":"2.4.1 訪問資源的EndPoint設計的注意事項"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用名詞的複數形式"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"URI"}]},{"type":"text","value":"表示資源的集合"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"HTTP"}]},{"type":"text","value":"方法表示一般動詞"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"注意所用的單字"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n例如: "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"search"}]},{"type":"text","value":"和"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"find"}]},{"type":"text","value":"兩者中，該選用哪種比較好?"},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"API一般設計採用"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"search"}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"可以從👇網站查看各種API範例\n"},{"type":"element","tag":"a","props":{"href":"https://www.programmableweb.com/","rel":["nofollow"]},"children":[{"type":"text","value":"ProgrammableWeb"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"不使用空格以及需要編碼的字串"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n當URI裡存在無法直接使用的字串時，則需要使用到百分號編碼（英語：Percent-encoding），又稱：URL編碼（"},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"URL encoding"}]},{"type":"text","value":"）。\n例如： "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"%E3%81%82"}]},{"type":"text","value":"。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"4️. 使用連接符來連接多個單字，基本上連接字串的方式總共有三種寫法。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"S"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"pinal-Case寫法"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"一般稱為脊柱形命名法。"},{"type":"element","tag":"pre","props":{"code":"http://api.example.com/v1/users/12345/profile-image\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"http://api.example.com/v1/users/12345/profile-image\n"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Snake Case"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"寫法"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"一般稱為蛇型命名法。"},{"type":"element","tag":"pre","props":{"code":"http://api.example.com/v1/users/12345/profile_image\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"http://api.example.com/v1/users/12345/profile_image\n"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Camel Case寫法"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"一般稱為駝峰命名法。"},{"type":"element","tag":"pre","props":{"code":"http://api.example.com/v1/users/12345/profileImage\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"http://api.example.com/v1/users/12345/profileImage\n"}]}]}]}]},{"type":"element","tag":"aside","props":{},"children":[{"type":"text","value":"   \n"},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"💡 這三種寫法中，網路上最推薦Spinal-Case的方法，其中一個原因是因為Google推薦使用。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"另外最好在URI中使用多個單字，例如不要使用"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"popular_users"}]},{"type":"text","value":"，而是使用"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"users/popular"}]},{"type":"text","value":"用路徑那樣子來劃分。"}]},{"type":"element","tag":"h2","props":{"id":"_25-搜尋與查詢參數的設計"},"children":[{"type":"text","value":"2.5 搜尋與查詢參數的設計"}]},{"type":"element","tag":"h3","props":{"id":"_251-獲取資料量和獲取位置的查詢參數"},"children":[{"type":"text","value":"2.5.1 獲取資料量和獲取位置的查詢參數"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"當資料量很龐大的時候，例如 👇 使用者資料列表API，如果今天是FB等級的使用者，那可能有好幾億，這樣一次把所有數值吐回來是不可能達成的，因此可以採用分頁(Pagination)來處理。"}]},{"type":"element","tag":"pre","props":{"code":"http://api.example.com/v1/users\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"http://api.example.com/v1/users\n"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"分頁的使用，一般可以透過SQL中"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"limit"}]},{"type":"text","value":"和"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"offset"}]},{"type":"text","value":"數值來產生。"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"各大服務查詢的方式\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"資料量 使用"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"limit"}]},{"type":"text","value":"、"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"count"}]},{"type":"text","value":"、"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"per_page"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"資料位置 使用"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"page"}]},{"type":"text","value":"、"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"offset"}]},{"type":"text","value":"、"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"cursor"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"001","src":"https://military-share-82c.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F2d9a6bfd-d6c2-4c99-b6ed-843469653bad%2FUntitled.png?table=block&id=158287f6-0e24-4ad3-8da3-b761bdff3043&spaceId=7cddc0b4-9d6b-472a-acd3-0cab4ea53d17&width=1590&userId=&cache=v2"},"children":[]}]},{"type":"element","tag":"aside","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一般來說 "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"per_page"}]},{"type":"text","value":" 和"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"page"}]},{"type":"text","value":"會一起出現，而"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"limit"}]},{"type":"text","value":"和"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"offset"}]},{"type":"text","value":"會成對出現。"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"分頁的舉例\n1頁可以容納50條紀錄，當要取第三頁(從101開始)的資料時，該怎麼撰寫呢?"}]}]},{"type":"element","tag":"pre","props":{"code":"per_page=50&page=3\n\nlimit=50&offset=100\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"per_page=50&page=3\n\nlimit=50&offset=100\n"}]}]},{"type":"element","tag":"aside","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"💡 一般"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"page"}]},{"type":"text","value":"從1開始(1-based)計數，而"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"offset"}]},{"type":"text","value":"則從0開始(0-based)計數。"}]}]},{"type":"element","tag":"h3","props":{"id":"_252-使用相對位置存在的問題"},"children":[{"type":"text","value":"2.5.2 使用相對位置存在的問題"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"當使用"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"offset"}]},{"type":"text","value":"或"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"limit"}]},{"type":"text","value":"來取得指定的資料位置時，其實都是要從頭開始數第幾條，每次都要從第1條資料開始計數，因此效能較差。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"從頭開始計數\n"},{"type":"element","tag":"img","props":{"alt":"002","src":"https://military-share-82c.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F4ac448fb-50c5-4c6e-91d5-9ddc8c249e69%2FUntitled.png?table=block&id=74605e3e-b17f-43a3-8d95-74de1f7a68a2&spaceId=7cddc0b4-9d6b-472a-acd3-0cab4ea53d17&width=1120&userId=&cache=v2"},"children":[]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"當資料更新的頻率比較高的時候，會導致當前獲取資料出現一定的偏差。\n"},{"type":"element","tag":"img","props":{"alt":"003","src":"https://military-share-82c.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fd5d28ba3-3a36-418a-87c4-941043ce2cc8%2FUntitled.png?table=block&id=0c282def-8acc-4d50-b940-055399e49605&spaceId=7cddc0b4-9d6b-472a-acd3-0cab4ea53d17&width=1120&userId=&cache=v2"},"children":[]}]}]},{"type":"element","tag":"h3","props":{"id":"_253-使用絕對位置來取得資料"},"children":[{"type":"text","value":"2.5.3 使用絕對位置來取得資料"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"可以透過指\"定某個ID之前\"或\"某個日期之前\"等條件，來解決相對應位置取得資料的問題。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如：Twiiter的API中的"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"max_id"}]},{"type":"text","value":"、YouTube中的"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"publishedBefore"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"h3","props":{"id":"_254-使用參數來過濾"},"children":[{"type":"text","value":"2.5.4 使用參數來過濾"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"以下例子使用Linkedin的People Search API舉例。"}]},{"type":"element","tag":"pre","props":{"code":"http://api.linkedin.com/v1/people-search?first-name=Clair\n\nhttp://api.linkedin.com/v1/people-search?last-name=Clair\n\nhttp://api.linkedin.com/v1/people-search?school-name=Shermer&20High%20School\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"http://api.linkedin.com/v1/people-search?first-name=Clair\n\nhttp://api.linkedin.com/v1/people-search?last-name=Clair\n\nhttp://api.linkedin.com/v1/people-search?school-name=Shermer&20High%20School\n"}]}]},{"type":"element","tag":"h3","props":{"id":"_255-查詢參數和路徑的使用區別"},"children":[{"type":"text","value":"2.5.5 查詢參數和路徑的使用區別"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"到底該把參數附加在查詢參數裡面? 還是放在路徑裡呢? 可以依據下列兩點來解釋"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"是否可以表示唯一資源所需的資訊"}]}]},{"type":"element","tag":"pre","props":{"code":"http://api.example.com/v1/users/10\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"http://api.example.com/v1/users/10\n"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"是否可以省略"}]}]},{"type":"element","tag":"h3","props":{"id":"分頁的額外補充"},"children":[{"type":"text","value":"分頁的額外補充"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"請求\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"perPage"}]},{"type":"text","value":" 每個頁面的大小(每個頁面的項目)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"page"}]},{"type":"text","value":" 目前頁面的編號"}]}]}]}]},{"type":"element","tag":"pre","props":{"code":"http://api.example.com/v1/users?page=3&perPage=50\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"http://api.example.com/v1/users?page=3&perPage=50\n"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"回應\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"currentPage"}]},{"type":"text","value":" 目前頁面的編號"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"pageSize"}]},{"type":"text","value":" 每個頁面的大小(每個頁面的項目)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"totalPages"}]},{"type":"text","value":" 頁面總數量"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"totalItems"}]},{"type":"text","value":"  項目的總數量"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"items"}]},{"type":"text","value":" 目前頁面上的項目"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"關於登錄oauth20-26-210"},"children":[{"type":"text","value":"關於登錄OAuth2.0 (2.6 ~ 2.10)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"OAuth在API設計上是蠻重要的一環，你一定很常遇到在使用某個網頁時，他會想要你Google或是Facebook的資料，此時頁面會導向一個小視窗要你輸入Google或Facebook的帳號密碼，輸入完畢後接著就會導回原本的網頁。接著網頁就可以獲取你Google與FB的相關資訊了。這種B網頁要向你索取第三方網頁的認證工作，就是OAuth會替你處理掉。"}]},{"type":"element","tag":"h3","props":{"id":"_26-陽春認證"},"children":[{"type":"text","value":"2.6. "},{"type":"element","tag":"a","props":{"href":"https://reurl.cc/KrvVoe","rel":["nofollow"]},"children":[{"type":"text","value":"陽春認證"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上述描述的認證工作，最簡易的認證機制如下圖，使用者在客戶端透過基本的帳號與密碼向後端伺服器驗證身份。伺服器會經過一連串的驗證流程，驗證成功後透過如 Session / Cookie 機制，在客戶端保存用戶登入的狀態資訊。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://i.imgur.com/h22L2dC.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"此陽春認證大致會有幾個問題"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"第三方程式必須儲存 Resource Owner 的帳號密碼，通常是明文儲存。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Server 必須支援密碼認證，即使密碼有天生的資訊安全上的弱點。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"第三方程式會得到幾乎完整的權限，可以存取 Protected Resources ，而 Resource Owner 沒辦法限制第三方程式可以拿取 Resource 的時效，以及可以存取的範圍 (subset)。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"任何第三方程式被破解 (compromized)，就會導致使用該密碼的所有資料被破解。"}]}]},{"type":"element","tag":"h3","props":{"id":"_27-oauth的基本認證機制"},"children":[{"type":"text","value":"2.7 OAuth的基本認證機制"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"那麼OAuth在第三方認證這流程上，中間到底發生什麼事情，我們可以看下述圖意流程"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://i.imgur.com/ViUvehH.png"},"children":[]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Step1：User點下允許訪位Facebook個人資訊認證"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Step2：第三方網頁請求認可"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Step3：User輸入帳命並告知Facebook可以把Token轉交給第三方網頁"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Step4：將Token轉交給第三方網頁"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Step5：第三方網頁帶取Token向Facebook調用索取資訊API"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Step6：Facebook Response請求給第三方網頁"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上述OAuth常見的基本流程，使用OAuth方便的是，User無須再次對請求輸入帳號密碼，認證過程中會通過Facebook提供的頁面(一般常見為帳號密碼輸入或是認證許可按鈕如下圖)。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://i.imgur.com/BDIm3EB.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果OAuth訪問成功就可從Facebook獲取access token，通過此token，第三方網頁就可訪問Facebook用戶允許的相關訊息(public profile mail 介紹...)。"}]},{"type":"element","tag":"h3","props":{"id":"_28-oauth-20-的角色定義"},"children":[{"type":"text","value":"2.8 OAuth 2.0 的角色定義"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Resource Owner：可以授權別人去存取 Protected Resource 。如果這個角色是人類的話，則就是指使用者 (end-user)。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Resource Server：存放 Protected Resource 的伺服器，可以根據 Access Token 來接受 Protected Resource 的請求。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Client：代表 Resource Owner 去存取 Protected Resource 的應用程式。 “Client” 一詞並不指任何特定的實作方式（可以在 Server 上面跑、在一般電腦上跑、或是在其他的設備）。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Authorization Server：在認證過 Resource Owner 並且 Resource Owner 許可之後，核發 Access Token 的伺服器。"}]}]},{"type":"element","tag":"h3","props":{"id":"_29-oauth的認證流程形式grant-type"},"children":[{"type":"text","value":"2.9 OAuth的認證流程形式(Grant Type)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上述簡單描述OAuth基本流程，但實際的認證流程會有四種形式，推薦此篇"},{"type":"element","tag":"a","props":{"href":"https://reurl.cc/KrvVoe","rel":["nofollow"]},"children":[{"type":"text","value":"認識 OAuth 2.0：一次了解各角色、各類型流程的差異"}]},{"type":"text","value":"。對於四種形式我覺得此篇作者整理得很淺白易懂。這邊我也會直接擷取他對於四種形式的描述來解說。"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"常見應用"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Authorization Code"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"有透過Server處理"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Implicit"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Clinet端處理"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Resource Owner Password Credentials"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Client Credentials"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"M2M(Machine to Machine)"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"_210-authorization-code"},"children":[{"type":"text","value":"2.10 "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Authorization Code"}]}]},{"type":"element","tag":"h6","props":{"id":"流程示意"},"children":[{"type":"text","value":"流程示意"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"常見類型，通常應用在SSR伺服器渲染的設計上，大部分的邏輯處理程式碼以極機密都會保存在Server。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://i.imgur.com/m2Ednsg.png"},"children":[]}]},{"type":"element","tag":"h6","props":{"id":"詳細流程"},"children":[{"type":"text","value":"詳細流程"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(1) Authorization Request"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"【Client】GET -> 【Authorization Endpoint】"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"第一步是 Client 產生一個 URL 連到 Authorization Endpoint ，要 Resource Owner 打開（點擊）這個 URL ，從而產生「向 Authorization Endpoint 發送 GET request」的操作。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"把參數包在 URI 的 query components 裡面。"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"參數名"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"填什麼/意義"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"response_type"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"code"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"client_id"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"自己的 Client ID"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"state"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"內部狀態"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"redirect_uri"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"申請結果下來之後要轉址去哪裡"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"scope"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"申請的存取範圍"}]}]}]}]},{"type":"element","tag":"pre","props":{"code":"GET /authorize?response_type=code&client_id=s6BhdRkqt3&state=xyz\n    &redirect_uri=https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb HTTP/1.1\nHost: server.example.com\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"GET /authorize?response_type=code&client_id=s6BhdRkqt3&state=xyz\n    &redirect_uri=https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb HTTP/1.1\nHost: server.example.com\n"}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(4) Authorization Response"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"【Authorization Endpoint】 302 Response ->  GET 【Client: Redirection Endpoint】"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Resource Owner 若同意授權，這個「同意授權」的 request 會往 Authorization Endpoint 發送，接著會收到 302 的轉址 response ，裡面帶有「前往 Client 的 Redirection Endpoint 的 URL」的轉址 (Location header)，從而產生「向 Redirection URI 發送 GET Request」的操作。"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"參數名"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"填什麼/意義"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"code"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Authorization Code"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"state"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"原內部狀態"}]}]}]}]},{"type":"element","tag":"pre","props":{"code":"HTTP/1.1 302 Found\nLocation: https://client.example.com/cb?code=SplxlOBeZQQYbYS6WxSbIA\n          &state=xyz\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"HTTP/1.1 302 Found\nLocation: https://client.example.com/cb?code=SplxlOBeZQQYbYS6WxSbIA\n          &state=xyz\n"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"state 如果 (1) 的時候有附上，則 Resopnse 裡面必須有，完全一致的原值。如果原本就沒有，就不需要回傳。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Authorization Code："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"必須是短時效的，建議最長 10 分鐘。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Client 只能使用一次，如果重複使用，Authorization Server 必須拒絕，並且建議撤銷之前透過這個 Grant 核發過的 Tokens"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"要綁定 Code ↔ Client ID ↔ Redirection URI 的關係"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"長度由 Authorization Server 定義，應寫在文件中， Client 不可以瞎猜。"}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(5) Access Token Request"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"【Client】POST -> 【Token Endpoint】"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"參數名"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"填什麼/意義"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"grant_type"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Authorization Code"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"code"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"在 (4) 拿到的 Authorization Code"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"redirect_uri"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"如果 (A) 有提供，則必須提供一模一樣的。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"client_id"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"自己的 Client ID"}]}]}]}]},{"type":"element","tag":"h6","props":{"id":"authorization-server-的處理程序"},"children":[{"type":"text","value":"Authorization Server 的處理程序"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"要求 Client 認證自己（如果是 Confidential Client 或有拿到 Client Credentials）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果 Client 有出示認證資料，就認證它"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"確定 Authorization Code 是發給 Client 的\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Confidential: 用 Client 的認證過程來證明"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Public: 用 Client ID 來證明"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"驗證 Authorization Code 正確"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果 (1) 有給 Redirection URI 的話，確定這次給的 Redirection URI 與 (1) 時的一模一樣。"}]}]},{"type":"element","tag":"pre","props":{"code":"POST /token HTTP/1.1\nHost: server.example.com\nAuthorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW\nContent-Type: application/x-www-form-urlencoded\n\ngrant_type=authorization_code&code=SplxlOBeZQQYbYS6WxSbIA\n&redirect_uri=https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"POST /token HTTP/1.1\nHost: server.example.com\nAuthorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW\nContent-Type: application/x-www-form-urlencoded\n\ngrant_type=authorization_code&code=SplxlOBeZQQYbYS6WxSbIA\n&redirect_uri=https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(5) Access Token Response"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"【Client】 <- 【Token Endpoint】"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"若 Access Token Request 合法且有經過授權，則核發 Access Token，同時可以核發 Refresh Token （非必備）。如果 Client 認證失敗，或 Request 不合法，則依照 "},{"type":"element","tag":"a","props":{"href":"https://datatracker.ietf.org/doc/html/rfc6749","rel":["nofollow"]},"children":[{"type":"text","value":"RFC 6749 Section 5.2"}]},{"type":"text","value":" 的規定回覆錯誤。"}]},{"type":"element","tag":"pre","props":{"code":"HTTP/1.1 200 OK\nContent-Type: application/json;charset=UTF-8\nCache-Control: no-store\nPragma: no-cache\n\n{\n  \"access_token\":\"2YotnFZFEjr1zCsicMWpAA\",\n  \"token_type\":\"example\",\n  \"expires_in\":3600,\n  \"refresh_token\":\"tGzv3JOkF0XG5Qx2TlKWIA\",\n  \"example_parameter\":\"example_value\"\n}\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"HTTP/1.1 200 OK\nContent-Type: application/json;charset=UTF-8\nCache-Control: no-store\nPragma: no-cache\n\n{\n  \"access_token\":\"2YotnFZFEjr1zCsicMWpAA\",\n  \"token_type\":\"example\",\n  \"expires_in\":3600,\n  \"refresh_token\":\"tGzv3JOkF0XG5Qx2TlKWIA\",\n  \"example_parameter\":\"example_value\"\n}\n"}]}]},{"type":"element","tag":"h5","props":{"id":"implicit"},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Implicit"}]}]},{"type":"element","tag":"h6","props":{"id":"流程示意-1"},"children":[{"type":"text","value":"流程示意"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"通常應用在SPA設計，整個應用程式都在前端運行，依需求向後端 API 取得資料。由於整個應用程式都在前端運行，所以會缺少「後端伺服器透過 Authorization Code Grant 交換 Access Token 」的步驟。取而代之的是請 Authorization Server 直接核發 Access Token。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"這邊要注意最終應用程式就能拿著 Access Token 向 Resource Server 取得資料。特別留意：不像 Authorization Code Flow，這邊是由前端獲得與管理 Access Token，並帶著 Access Token 發出請求前往取得資源，因此在安全性上「相對脆弱」。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://i.imgur.com/UMvZKO9.png"},"children":[]}]},{"type":"element","tag":"h6","props":{"id":"詳細流程-1"},"children":[{"type":"text","value":"詳細流程"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(1) Authorization Request"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"【Client】GET ->【Authorization Endpoint】"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"第一步是 Client 產生一個 URL 連到 Authorization Endpoint ，要 Resource Owner 打開（點擊）這個 URL ，從而產生「向 Authorization Endpoint 發送 GET request」的操作。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"把參數包在 URI 的 query component 裡面。"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"參數名"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"填什麼/意義"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"response_type"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"code"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"client_id"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"自己的 Client ID"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"state"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"內部狀態"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"redirect_uri"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"申請結果下來之後要轉址去哪裡"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"scope"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"申請的存取範圍"}]}]}]}]},{"type":"element","tag":"h6","props":{"id":"authorization-server-的處理程序-1"},"children":[{"type":"text","value":"Authorization Server 的處理程序"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因為 Implicit Grant Flow 是直接在 Authorization Endpoint 發 Access Token ，所以資料驗證和授權都在這一步處理。所以這個 Request 進來的時候， Authorization Server 要做這些事："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"驗證所有必須給的參數都有給且合法"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Redirection URI 與預先在 Authorization Server 設定的相符。\n如果沒問題，就詢問 Resource Owner 是否授權，即 (B) 步驟"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(4) Authorization Response"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"【Client】 <- 302【Authorization Endpoint】"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Resource Owner 若同意授權，這個「同意授權」的 request 會往 Authorization Endpoint 發送，接著會收到 302 的轉址 response ，裡面帶有「前往 Client 的 Redirection Endpoint 的 URL」的轉址 (Location header)，從而產生「向 Redirection URI 發送 GET Request」的操作。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"參數要用 URL Encoding 編起來，放在 Fragment Component 裡面。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"若 Access Token Request 合法且有經過授權，則核發 Access Token。如果 Client 認證失敗，或 Request 不合法，則依照 Section 5.2 的規定回覆錯誤。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"特別注意 Implicit Grant Type 禁止 核發 Refresh Token。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"某些 User-Agent 不支援 Fragment Redirection ，這種情況可以使用間接轉址，即是轉到一個頁面，放一個 “Continue” 的按鈕，按下去連到真正的 Redirection URI 。"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"參數名"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"填什麼/意義"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"access_token"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"即 Access Token"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"expires_in"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"建議有\t幾秒過期，如 3600 表示 10 分鐘。若要省略，最好在文件裡註明效期。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"scope"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Access Token 的授權範圍 (scopes)。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"state"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"原內部狀態。"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"其中 scope 如果和 (1) 申請的不同則要附上，如果一樣的話就不必附上。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"其中 state 如果 (1) 的時候有附上，則 Resopnse 裡面必須有，完全一致的原值。如果原本就沒有，就不需要回傳。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Access Token 的長度由 Authorization Server 定義，應寫在文件中， Client 不可以瞎猜。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Client 遇到不認識的參數必須忽略。"}]},{"type":"element","tag":"pre","props":{"code":"HTTP/1.1 302 Found\nLocation: http://example.com/cb#access_token=2YotnFZFEjr1zCsicMWpAA\n          &state=xyz&token_type=example&expires_in=3600\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"HTTP/1.1 302 Found\nLocation: http://example.com/cb#access_token=2YotnFZFEjr1zCsicMWpAA\n          &state=xyz&token_type=example&expires_in=3600\n"}]}]},{"type":"element","tag":"h5","props":{"id":"resource-owner-password-credentials"},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Resource Owner Password Credentials"}]}]},{"type":"element","tag":"h6","props":{"id":"流程示意-2"},"children":[{"type":"text","value":"流程示意"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"由使用者提供帳號與密碼等資訊給應用程式，由應用程式直接向 Authorization Server 交換 Access Token，因此「必須是使用者高度信賴的應用程式」才適合使用，且唯有前兩種皆不可行時，才會考慮使用當前類型的流程。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"體驗上和以往的帳號密碼登入雷同。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://i.imgur.com/N9DUpEB.png"},"children":[]}]},{"type":"element","tag":"h6","props":{"id":"流程細節"},"children":[{"type":"text","value":"流程細節"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(2,3) Authorization Request & Response"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在這個流程裡面， Authorization Grant 就是 Resource Owner 的帳號密碼，所以在 Step (A) 裡面直接向 Resource Onwer 索取，沒有經過網路來取得 Authorization。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Spec 不規定 Client 要怎麼拿到帳號密碼，但是 Client 取得 Access Token 之後，必須把 Resource Owner 的帳號密碼給銷毀掉。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(4) Access Token Request"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"【Client】POST -> 【Token Endpoint】"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"參數名"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"填什麼/意義"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"grant_type"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"password"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"username"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Resource Owner 的帳號"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"password"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Resource Owner 的密碼"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"scope"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"申請的存取範圍"}]}]}]}]},{"type":"element","tag":"h6","props":{"id":"authorization-server-的處理程序-2"},"children":[{"type":"text","value":"Authorization Server 的處理程序"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"這個 Request 進來的時候， Authorization Server 要做這些事："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"要求 Client 認證自己（如果是 Confidential Client 或有拿到 Client Credentials）"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果 Client 有出示認證資料，就認證它"}]},{"type":"element","tag":"h5","props":{"id":"client-credentials"},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Client Credentials"}]}]},{"type":"element","tag":"h6","props":{"id":"流程示意-3"},"children":[{"type":"text","value":"流程示意"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"通常是由應用程式向 Authourization Server 請求取得 Access Token 以獲取「自己」的相關資源，而非使用者的資源。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"這個流程已經跳脫使用者，因此，使用者身份驗證的流程將不再需要。取而代之的，是應用程式必須向 Authorization Server 提供驗證所需的自身資訊。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://i.imgur.com/uPeIjN5.png"},"children":[]}]},{"type":"element","tag":"h6","props":{"id":"流程細節-1"},"children":[{"type":"text","value":"流程細節"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(1) Access Token Request"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"【Client】POST -> 【Token Endpoint】"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"參數名"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"填什麼/意義"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"grant_type"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"password"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"scope"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"申請的存取範圍"}]}]}]}]},{"type":"element","tag":"pre","props":{"code":"POST /token HTTP/1.1\nHost: server.example.com\nAuthorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW\nContent-Type: application/x-www-form-urlencoded\n\ngrant_type=client_credentials\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"POST /token HTTP/1.1\nHost: server.example.com\nAuthorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW\nContent-Type: application/x-www-form-urlencoded\n\ngrant_type=client_credentials\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(2) Access Token Response"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"【Client】POST <- 【Token Endpoint】"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"若 Access Token Request 合法且有經過授權，則核發 Access Token，但是最好不要核發 Refresh Token。如果 Client 認證失敗，或 Request 不合法，則依照的"},{"type":"element","tag":"a","props":{"href":"https://datatracker.ietf.org/doc/html/rfc6749","rel":["nofollow"]},"children":[{"type":"text","value":"RFC6749規定(Section5.2)"}]},{"type":"text","value":"回覆錯誤。"}]},{"type":"element","tag":"pre","props":{"code":"HTTP/1.1 200 OK\nContent-Type: application/json;charset=UTF-8\nCache-Control: no-store\nPragma: no-cache\n\n{\n  \"access_token\":\"2YotnFZFEjr1zCsicMWpAA\",\n  \"token_type\":\"example\",\n  \"expires_in\":3600,\n  \"example_parameter\":\"example_value\"\n}\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"HTTP/1.1 200 OK\nContent-Type: application/json;charset=UTF-8\nCache-Control: no-store\nPragma: no-cache\n\n{\n  \"access_token\":\"2YotnFZFEjr1zCsicMWpAA\",\n  \"token_type\":\"example\",\n  \"expires_in\":3600,\n  \"example_parameter\":\"example_value\"\n}\n"}]}]},{"type":"element","tag":"h4","props":{"id":"簡易整理"},"children":[{"type":"text","value":"簡易整理"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://i.imgur.com/4cIcic1.png"},"children":[]}]},{"type":"element","tag":"h4","props":{"id":"doauth端點範例"},"children":[{"type":"text","value":"d.OAuth端點範例"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上述探討完四種認證流程形式，那實際使用OAuth時，端點的形式該如何設計?下述為常見的幾個有名的網站"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://i.imgur.com/1pHhAR6.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"書中筆者比較建議的方式是像"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"/oauth2/token"}]},{"type":"text","value":"此種方式去設計，因為明確指出使用的是OAuth2.0，並且與RFC 6749給出的範例雷同。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我們稍微看一下實際medium在索取facebook認證資訊時的內容如下圖，基本上也是照這邏輯下去設計"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://i.imgur.com/0LUwjmj.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://datatracker.ietf.org/doc/html/rfc6749","rel":["nofollow"]},"children":[{"type":"text","value":"OAuth2.0"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://blog.yorkxin.org/posts/oauth2-1-introduction.html","rel":["nofollow"]},"children":[{"type":"text","value":"OAuth 2.0 筆記"}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"_21-設計通過api公開的功能","depth":2,"text":"2.1 設計通過API公開的功能"},{"id":"_22-api-endpoint的設計思想","depth":2,"text":"2.2 API EndPoint的設計思想"},{"id":"_23-http方法和endpoint","depth":2,"text":"2.3 HTTP方法和EndPoint"},{"id":"_24-api端點的設計","depth":2,"text":"2.4 API端點的設計","children":[{"id":"_241-訪問資源的endpoint設計的注意事項","depth":3,"text":"2.4.1 訪問資源的EndPoint設計的注意事項"}]},{"id":"_25-搜尋與查詢參數的設計","depth":2,"text":"2.5 搜尋與查詢參數的設計","children":[{"id":"_251-獲取資料量和獲取位置的查詢參數","depth":3,"text":"2.5.1 獲取資料量和獲取位置的查詢參數"},{"id":"_252-使用相對位置存在的問題","depth":3,"text":"2.5.2 使用相對位置存在的問題"},{"id":"_253-使用絕對位置來取得資料","depth":3,"text":"2.5.3 使用絕對位置來取得資料"},{"id":"_254-使用參數來過濾","depth":3,"text":"2.5.4 使用參數來過濾"},{"id":"_255-查詢參數和路徑的使用區別","depth":3,"text":"2.5.5 查詢參數和路徑的使用區別"},{"id":"分頁的額外補充","depth":3,"text":"分頁的額外補充"}]},{"id":"關於登錄oauth20-26-210","depth":2,"text":"關於登錄OAuth2.0 (2.6 ~ 2.10)","children":[{"id":"_26-陽春認證","depth":3,"text":"2.6. 陽春認證"},{"id":"_27-oauth的基本認證機制","depth":3,"text":"2.7 OAuth的基本認證機制"},{"id":"_28-oauth-20-的角色定義","depth":3,"text":"2.8 OAuth 2.0 的角色定義"},{"id":"_29-oauth的認證流程形式grant-type","depth":3,"text":"2.9 OAuth的認證流程形式(Grant Type)"},{"id":"_210-authorization-code","depth":3,"text":"2.10 Authorization Code"}]}]}},"_type":"markdown","_id":"content:3.web-api:chapter2.md","_source":"content","_file":"3.web-api/chapter2.md","_extension":"md"}