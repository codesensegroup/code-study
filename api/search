[{"id":"content:0.index.md","path":"/","dir":"","title":"Home","description":"","keywords":[],"body":"     Kaohusing Code Sense Study Group   æˆ‘å€‘æ˜¯ä¸€ç¾¤å±…ä½åœ¨é«˜é›„çš„æŠ€è¡“ç‹‚ç†±è€…ï¼Œæ¯æœˆèˆ‰è¾¦2è‡³3æ¬¡çš„æŠ€è¡“ç ”è¨æœƒã€‚æˆ‘å€‘çš„æˆå“¡ä¾†è‡ªä¸åŒé ˜åŸŸï¼ŒåŒ…æ‹¬åŠå°é«”ã€ç³»çµ±è¨­è¨ˆã€é›»è…¦è£½é€ ä»¥åŠé‡‘èæ¥­ï¼Œå„æœ‰å…¶ç¨ç‰¹å°ˆé•·ã€‚æˆ‘å€‘ä¸åƒ…å€‹æ€§é–‹æœ—ã€å®¹æ˜“ç›¸è™•ï¼Œå°æ–¼æŠ€è¡“æ›´æœ‰è‘—ç„¡ä»¥è¨€è¡¨çš„ç†±æƒ…èˆ‡åŸ·è‘—ã€‚åœ¨éå»çš„å››å¹´ä¸­ï¼Œæˆ‘å€‘ä¸€èµ·æˆé•·ï¼Œç›¸äº’æ”¯æŒèˆ‡é¼“å‹µã€‚æˆ‘å€‘ä¸è¿½æ±‚åè²ï¼Œè€Œæ˜¯å°‹æ‰¾èˆ‡æˆ‘å€‘æ“æœ‰ç›¸åŒç†±æƒ…çš„å­¸ç¿’è€…ã€‚åœ¨ç¤¾ç¾¤ä¸­æˆ‘å€‘ä¿æŒä½èª¿ï¼Œå³ä¾¿å¦‚æ­¤ï¼Œæˆ‘å€‘çš„å°åœ˜éšŠå·²ç¶“æˆé•·åˆ°14äººã€‚æˆ‘å€‘ä¹‹é–“çš„æ„Ÿæƒ…è¶…ä¹æƒ³åƒçš„æ·±åšï¼Œé™¤äº†åˆ†äº«æŠ€è¡“çŸ¥è­˜ï¼Œæˆ‘å€‘é‚„æœƒä¸€èµ·å‡ºéŠï¼Œäº«å—ç”Ÿæ´»ã€‚å¦‚æœä½ å°æˆ‘å€‘çš„åœ˜éšŠæ„Ÿèˆˆè¶£ï¼Œéå¸¸æ­¡è¿èˆ‡æˆ‘å€‘è¯ç¹«ï¼Œä¸€èµ·æ¢ç´¢æŠ€è¡“çš„ç„¡é™å¯èƒ½ã€‚ä»¥ä¸‹æ˜¯æˆ‘å€‘éå»æ¢è¨é ˜åŸŸæ­·ç¨‹(ç²—é«”ç‚ºæ›¸ç±æˆ–æ˜¯é•·æœŸä¸»é¡Œç ”è¨ã€éç²—é«”ç‚ºä¸€æ¬¡æ€§ä¸»é«”å¼åˆ†äº«æœƒ) :     è»Ÿé«”è¨­è¨ˆèˆ‡ç¨‹å¼ :   Design Pattern , Clean Code,   Refactor , Dependency Injection  å¾Œç«¯é–‹ç™¼ :   Web APIè¨­è¨ˆèˆ‡é–‹ç™¼ ,   è³‡æ–™å¯†é›†å‹æ‡‰ç”¨ç³»çµ±è¨­è¨ˆ , Akkaåˆ†æ•£å¼ç³»çµ±, Redis å¿«å–  ç¨‹å¼æ¶æ§‹ :   DDDé ˜åŸŸé©…å‹•é–‹ç™¼ ,   Clean Architecture  è³‡æ–™åº«ç®¡ç† :   SQLåŸºç¤èˆ‡é€²éšä½¿ç”¨  å·¥å…· :   ReactiveX  ç‰ˆæœ¬æ§åˆ¶ : Git,Gité€²éšç”¨æ³•,Githubä½¿ç”¨æŠ€å·§  DevOpsèˆ‡è‡ªå‹•åŒ– : è‡ªå‹•ç’°å¢ƒéƒ¨å±¬CICD,æŒçºŒäº¤ä»˜2.0  å…¶ä»–æŠ€è¡“èˆ‡è»ŸæŠ€èƒ½åˆ†äº« : Agile Scrumåˆ†äº«,ESP8266æ‡‰ç”¨,OKRè¨­å®šå€‹äººå¹´åº¦ç›®æ¨™,åŠ æ‹¿å¤§æ‰“å·¥åˆ†äº«,Notionä»‹ç´¹"},{"id":"content:1.api:1.components.md","path":"/api/components","dir":"api","title":"Components","description":"Discover every component you can use in your content.","keywords":["<Alert />","<Badge />","<BlockHero />","<ButtonLink />","<Callout />","<Card />","<CardGrid />","<CodeGroup />","<CodeBlock />","<CopyButton />","<Icon />","<List />","<Sandbox />","<Terminal />","<VideoPlayer />"],"body":"  Components  Discover every component you can use in your content.   <Alert />     Check out an   info  alert with   code  and a   link .   Check out a   success  alert with   code  and a   link .   Check out a   warning  alert with   code  and a   link .   Check out a   danger  alert with   code  and a   link .     ::alert{type=\"info\"}\n   Check out an   **info**   alert with   `code`   and a [  link  ](  /  ).\n   ::\n   \n   ::alert{type=\"success\"}\n   Check out a   **success**   alert with   `code`   and a [  link  ](  /  ).\n   ::\n   \n   ::alert{type=\"warning\"}\n   Check out a   **warning**   alert with   `code`   and a [  link  ](  /  ).\n   ::\n   \n   ::alert{type=\"danger\"}\n   Check out a   **danger**   alert with   `code`   and a [  link  ](  /  ).\n   ::\n     <Badge />   <Badge />  support same types as   <Alert /> .     v1.2  Deprecated   Not found!     :badge[  v1.2  ]\n   \n   :badge[  Deprecated  ]{type=\"warning\"}\n   \n   ::badge{type=\"danger\"}\n   Not found!\n   ::\n     <BlockHero />      Document-driven framework   Docus reconciles content creators and developers by offering to both the best tools to create and scale content-based websites.     ::block-hero\n   ---\n   cta:\n     -   Get started\n     -   /get-started\n   secondary:\n     -   Open on GitHub â†’\n     -   https://github.com/nuxtlabs/docus\n   snippet: npx nuxi@latest init docus-app -t nuxtlabs/docus-starter\n   ---\n   #title\n   Document-driven framework\n   \n   #description\n   Docus reconciles content creators and developers by offering to both the best tools to create and scale content-based websites.\n   ::\n     <ButtonLink />    Play on StackBlitz     :button-link[Play on StackBlitz]{icon=\"IconStackBlitz\" href=\"https://stackblitz.com/github/nuxtlabs/docus-starter\" blank}\n     <Callout />   <Callout />  support same types as   <Alert /> .      This is a callout! Click me to open.   This is the content of the callout.    This is a callout! Click me to open.   This is the content of the callout.     ::callout\n   #summary\n   This is a callout! Click me to open.\n   \n   #content\n   This is the content of the callout.\n   ::\n    \n   ::callout{type=\"warning\"}\n   #summary\n   This is a callout! Click me to open.\n   \n   #content\n   This is the content of the callout.\n   ::\n     <Card />      Nuxt Architecture.   Based on   Nuxt 3  and   Nuxt Content .   \nUse Nuxt to build a static site, or a serverless app.      ::card{icon=\"logos:nuxt-icon\"}\n    #title\n    Nuxt Architecture.\n    #description\n    Based on   **Nuxt 3**   and   **Nuxt Content**  . :br\n    Use Nuxt to build a static site, or a serverless app.\n    ::\n     <CardGrid />      What's included?      Nuxt Architecture.   Harness the full power of Nuxt and the Nuxt ecosystem.    Vue Components.   Use built-in components (or your own!) inside your content.    Write Markdown.   Enjoy the ease and simplicity of Markdown and discover MDC syntax.     ::card-grid\n   #title\n   What's included\n   \n   #root\n   :ellipsis\n   \n   #default\n     ::card\n     #title\n     Nuxt Architecture.\n     #description\n     Harness the full power of Nuxt and the Nuxt ecosystem.\n     ::\n     ::card\n     #title\n     Vue Components.\n     #description\n     Use built-in components (or your own!) inside your content.\n     ::\n     ::card\n     #title\n     Write Markdown.\n     #description\n     Enjoy the ease and simplicity of Markdown and discover MDC syntax.\n     ::\n   ::\n     <CodeGroup />  This component uses   slots  to create a tab panel of your code examples or preview.        yarn   add   docus\n     npm   install   docus\n     ::code-group\n     ```bash [Yarn]\n     yarn   add   docus\n     ```\n     ```bash [NPM]\n     npm   install   docus\n     ```\n   ::\n     <CodeBlock />  To be used inside a   <CodeGroup />  component to display a preview of some rendered code.     Hello World!     /* Added as a child of   `<CodeGroup />`   */\n   \n   ::code-block{label=\"Preview\" preview}\n     ::badge\n     Hello World!\n     ::\n   ::\n     <CopyButton />        :copy-button{content=\"hey!\"}\n     <Icon />  Icon component gives you access to all   100,000+  icons from   icones.js.org .          :icon{name=\"logos:nuxt-icon\"}\n   :icon{name=\"logos:vue\"}\n   :icon{name=\"logos:nuxt-icon\"}\n     <List />       Important  Always    Amazing  Congrats    Do you know?  You can also do this    Be careful  Use with precautions    Drinking too much  Driving drunk     ::list{type=\"primary\"}\n   -   **Important**\n   -   Always\n   ::\n   \n   ::list{type=\"success\"}\n   -   Amazing\n   -   Congrats\n   ::\n   \n   ::list{type=\"info\"}\n   -   Do you know?\n   -   You can also do this\n   ::\n   \n   ::list{type=\"warning\"}\n   -   Be careful\n   -   Use with precautions\n   ::\n   \n   ::list{type=\"danger\"}\n   -   Drinking too much\n   -   Driving drunk\n   ::\n    <Sandbox />  Embed CodeSandbox/StackBlitz easily in your documentation with great performances.  Using the   IntersectionObserver  to load when visible in the viewport.        :sandbox{src=\"https://codesandbox.io/embed/nuxt-content-l164h?hidenavigation=1&theme=dark\"}\n     <Terminal />        :terminal{content=\"nuxi build\"}\n     <VideoPlayer />         ::div\n     :video-player{src=\"https://www.youtube.com/watch?v=o9e12WbKrd8\"}\n   ::\n   html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}"},{"id":"content:1.api:2.composables.md","path":"/api/composables","dir":"api","title":"Composables","description":"Discover the Docus composables to use in your custom Vue components and pages.","keywords":["useDocus()","useMenu()","useScrollspy()"],"body":"  Composables  Discover the Docus composables to use in your custom Vue components and pages.   useDocus()    useDocus  ()\n  gives access to docus runtime config, all default values and your custom config from   app.config.ts    config  refers to the merged config of the current page.   main ,   header ,   aside ,   footer  and   titleTemplate  can be set from   _dir.yml  and any   page.md  file.  The configs in   app.config  file will be used as defaults.     <  script   setup  >\n   const   {   config   }   =   useDocus  ()\n   </  script  >\n   \n   <  template  >\n     <  div  >\n       <  h1  >{{ config.title }}</  h1  >\n       <  p  >{{ config.description }}</  p  >\n     </  div  >\n   </  template  >\n    tree  refers to the current navigation tree that is displayed in the   aside  component.     <  script   setup  >\n   const   {   tree   }   =   useDocus  ()\n   </  script  >\n   \n   <  template  >\n     <  DocsAsideTree   :links  =  \"tree\"   />\n   </  template  >\n    useMenu()   useMenu()  gives access to   $menu  plugin controlling mobile navigation globally.     const   {\n     // Is menu visible\n     visible  ,\n     // Close menu function\n     close  ,\n     // Open menu function\n     open  ,\n     // Toggle menu function\n     toggle\n   }   =   useMenu  ()\n    useScrollspy()   useScrollspy()  is used in   docs  layout to make the ToC display the currently visible headings.     const   {\n     // Headings on the page\n     visibleHeadings  ,\n     // Active headings (for the current page)\n     activeHeadings  ,\n     // Update headings (an array of DOM nodes)\n     updateHeadings\n   }   =   useScrollspy  ()\n   html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}"},{"id":"content:1.api:3.layouts.md","path":"/api/layouts","dir":"api","title":"Layouts","description":"Docus provides multiple built-in layouts for displaying your Markdown pages.","keywords":["default","page"],"body":"  Layouts  Docus provides multiple built-in layouts for displaying your Markdown pages.   default  The default layout for every page created in the project. This layout renders multiple section alongside the content:   Aside navigation menu (togglable with   aside: false/true )  Page bottom section (togglable with   bottom: false/true )  Table of content (togglable with   toc: false/true )     ---\n   aside  :   true\n   bottom  :   true\n   toc  :   false\n   ---\n   \n   Your awesome content\n  Current page is live sample of default layout.   page   page  layout is content focused layout. This layout does not render aside menu of table of contents.  This layout accept some configuration from content front-matter.    fluid : By setting   fluid: true  in content front-matter the content will be rendered in full width.   constrainedClass : Using this option you can modify layout container look. Like constraining layout width of changing the background.   padded : Setting   padded: true  in front-matter will add horizontal padding in the layout.     ---\n   title  :   Home\n   layout  :   page\n   fluid  :   true\n   ---\n  Check   Home page  as live sample of page layout  html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}"},{"id":"content:1.member.md","path":"/member","dir":"","title":"Member","description":"","keywords":[],"body":"     Our Memeber          changemyminds   å–œæ­¡å¯«ç¨‹å¼ã€ç†±æ„›è»Ÿé«”å·¥ç¨‹, ä¹Ÿå–œæ­¡å¥èº«ä»¥åŠç¾é£Ÿ        Spyua   å€‹æ€§å¤–å‘ï¼Œå–œæ„›æ²–å’–å•¡ã€å¹³å¸¸æ™‚é–“å–œæ­¡é–±è®€å¤–ï¼Œä¹Ÿå–œæ„›å¯«ä½œã€‚æœ€é–‹å¿ƒçš„äº‹æ˜¯èƒ½èˆ‡å®¶äººåŒæ¨‚ã€‚        jimpop-tw   å¹³å¸¸å–œæ­¡..        frank30941   å–œæ„›ç‘œçˆ        HankLi0130   å¹³å¸¸å–œæ­¡å–å’–å•¡        Simon-Din   å¹³å¸¸å–œæ­¡..       Simon Wu   å¹³å¸¸å–œæ­¡.."},{"id":"content:2.workshop:gitlab-cicd.md","path":"/workshop/gitlab-cicd","dir":"workshop","title":"ä½¿ç”¨GitlabåšCI/CD","description":"","keywords":["å‰è¨€","ç°¡æ˜“é–‹ç™¼æµç¨‹","Runner Serverè¨­å®š","CIæ’°å¯«","CDæ’°å¯«","åƒè€ƒå°ˆæ¡ˆ","Dockerç‰ˆæœ¬(Speakï¼Œå¾ŒçºŒå¾…å¯«)"],"body":"  å‰è¨€  æ­¤ç« ç¯€ä¸å±¬æ–¼æŒçºŒäº¤ä»˜2.0æ›¸ä¸­å…§å®¹ï¼Œé¡å¤–æŒªå‡ºçš„ä¸€å€‹æ•™å­¸ç« ç¯€ã€‚  CI/CDç›®å‰åœ¨å¤§éƒ¨åˆ†æœƒåšé »ç¹æ•´åˆèˆ‡éƒ¨å±¬çš„åœ˜éšŠéƒ½å·²åœ¨ä½¿ç”¨ï¼Œå› æ­¤åœ¨é–‹ç™¼ä¸­åœ¨ç›®å‰çš„è¶¨å‹¢ä¸­æœ‰ä¸€å®šçš„å¿…è¦æ€§ã€‚CIç‚ºæŒçºŒæ•´åˆï¼Œä»–çš„ç”¨æ„æœ¬è³ªåœ¨æ–¼ç•¶æ—¢æœ‰ç¨‹å¼ç¢¼æˆ–ç”¢å“æœ‰ä»»ä½•ç•°å‹•æ™‚ï¼Œå¯ä»¥åœ¨çŸ­æ™‚é–“å…§å®Œæˆæ•´åˆï¼Œä¸¦ç¢ºä¿ç”¨ä½œå¦‚é æœŸã€‚è€ŒCDç‚ºæŒçºŒäº¤ä»˜ï¼Œæ³¨æ„è‹±æ–‡ä¸­çš„Dç‚ºDeliveryè€Œä¸æ˜¯Deploymentã€‚ç”¨æ„åœ¨è®“ä»»ä½•ä¸€å€‹ç•°å‹•å¯ä»¥ä¿æœ‰å“è³ªçš„ç›¡å¿«äº¤çµ¦å®¢æˆ¶ï¼Œä¸¦èƒ½ç‚ºæ­¤å¸¶ä¾†å°æ‡‰çš„åƒ¹å€¼ï¼Œæ­¤ç« ç¯€æœƒæ‰‹æŠŠæ‰‹æ•™å­¸å¦‚ä½•ä½¿ç”¨Gitlabä¾†é”åˆ°CI/CDè‡ªå‹•åŒ–ã€‚ä¸¦é€éCI/CDå°‡.Net Coreå°ˆæ¡ˆéƒ¨å±¬åˆ°éƒ¨å±¬æ©Ÿä¸Šã€‚  \nCI/CDç²¾ç¥åœ¨æ–¼åšåˆ°å¿«é€Ÿæ•´åˆä¸¦ä¿æœ‰é«˜å“è³ªä¸”èƒ½äº¤ä»˜å®¢æˆ¶ä½¿ç”¨ï¼Œé‡é»åœ¨æ–¼ç²¾ç¥å¤§æ–¼è‡ªå‹•åŒ–å·¥å…·ï¼Œå› æ­¤æ¯å€‹å°ˆæ¡ˆèˆ‡ç”¢å“ç‹€æ³åœ˜éšŠä¹Ÿæœƒå…·æœ‰ä¸åŒçš„è¨ˆç•«èˆ‡äº¤ä»˜æµç¨‹ã€‚\n  ç°¡æ˜“é–‹ç™¼æµç¨‹  ä¸ä½¿ç”¨CI/CD  ä¸€èˆ¬ç°¡æ˜“é–‹ç™¼æ•´åˆæµç¨‹ç‚º   Step1. é–‹ç™¼  Step2. å»ºç½®  Step3. æ¸¬è©¦  Step4. éƒ¨å±¬  å¦‚ä¸‹åœ–æ‰€ç¤ºï¼Œåœ¨æ²’æœ‰è‡ªå‹•åŒ–æ•´åˆå¹³å°ä¸‹ï¼ŒåŸºæœ¬ä¸Šæ‰€æœ‰æµç¨‹éƒ½é ˆé€éæ‰‹å‹•å»å®Œæˆã€‚  \n     ä½¿ç”¨CI/CD  å¦‚ä¸‹åœ–æ‰€ç¤ºï¼Œæˆ‘å€‘åªéœ€è¦å¯«å¥½Script Fileï¼Œäº¤ä»˜åˆ°Gitlabï¼Œä¸¦åœ¨Gitlab Serverä¸Šåšå¥½è¨­å®šï¼ŒServerå°±æœƒæ ¹æ“šScriptè…³æœ¬æ‰€å¯«çš„æŒ‡ä»¤(å‘½ä»¤)ï¼Œäº¤ä»˜Runner Serverä½œåŸ·è¡Œã€‚åœ¨ä½¿ç”¨æ­¤è‡ªå‹•åŒ–æ•´åˆæ¶æ§‹ä¸‹ï¼Œæˆ‘å€‘å¯é€éGitlabèˆ‡Runner Serverå®Œæˆä¸Šè¿°çš„æ­¥é©Ÿé–‹ç™¼ã€å»ºç½®ã€æ¸¬è©¦èˆ‡æ•´åˆï¼Œç”šè‡³æ˜¯ç¨‹å¼ç¢¼åˆ†æã€‚  ä¸€èˆ¬CIæœƒåšå»ºç½®æ¸¬è©¦èˆ‡ç¨‹å¼ç¢¼åˆ†æï¼Œè€ŒCDå‰‡æ˜¯åšéƒ¨å±¬ã€æ•´åˆæ¸¬è©¦èˆ‡äº¤ä»˜ã€‚åœ¨ä¸åŒçš„æ‡‰ç”¨å ´åˆä¸‹ï¼Œè¨­ç½®æœƒæ ¹æ“šä¸åŒç’°å¢ƒæ‡‰ç”¨å»ºç«‹å°ˆå±¬CIèˆ‡CD Runneræœå‹™ã€‚ä½†æ­¤ç« ç¯€ä¸æœƒè¬›åˆ°å¤ªè¤‡é›œçš„æƒ…å¢ƒï¼Œæœƒä»¥ç°¡æ˜“çš„é–‹ç™¼ã€å»ºç½®ã€æ¸¬è©¦èˆ‡éƒ¨å±¬å››å€‹æ­¥é©Ÿå¸¶éã€‚  \n     \nä¸€èˆ¬å¯åšè‡ªå‹•åŒ–æ•´åˆçš„Git Serverï¼Œéƒ½æœƒéœ€è¦ä¸€å€‹ä»£ç†ä¼ºæœå™¨(Runner Server)ä¾†å¹«å¿™åŸ·è¡ŒScriptã€‚å› æ­¤æˆ‘å€‘æœƒéœ€è¦ä¸€å°æ©Ÿå™¨åšå°ˆé–€çš„Runner Serverä¾†æœå‹™Git Serverã€‚\n  Runner Serverè¨­å®š  Runner Serveré ˆæ ¹æ“šé–‹ç™¼æ‡‰ç”¨é¸æ“‡ä¸åŒçš„ä½œæ¥­ç’°å¢ƒï¼Œä¾‹å¦‚è‹¥ä½ çš„å°ˆæ¡ˆå·².Net Frameworkç‚ºä¸»ã€‚ä½ æƒ³åšè‡ªå‹•åŒ–æ•´åˆï¼Œä½ çš„Runneræ©Ÿå°å‰‡å°±é ˆé¸ç”¨Windows OSã€‚è‹¥æ—¥å¯åšè·¨å¹³å°çš„.Net Coreï¼Œä½ å‰‡å¯ä»¥é¸æ“‡Linux OSç’°å¢ƒå»æ¶è¨­Runner Serverã€‚  å› Runner Serveræœƒæ ¹æ“šScriptæŒ‡ä»¤åšå»ºç½®èˆ‡æ¸¬è©¦ç”šè‡³æ˜¯éƒ¨å±¬ï¼Œæ‰€ä»¥éœ€å®‰è£å¯åŸ·è¡Œç›¸å°æ‡‰çš„CLIæŒ‡ä»¤åŠSDKã€‚å¦‚ä¸Šè¿°æåˆ°çš„.Net Coreï¼Œè‹¥Runner Serverè¦ç·¨è­¯.Net Coreå°ˆæ¡ˆï¼Œå‰‡å°±éœ€å®‰è£ç›¸å°æ‡‰çš„SDKã€‚è‹¥CDéœ€é€éSSHé€£è‡³éƒ¨å±¬æ©Ÿæ“ä½œï¼Œå‰‡Runner Serverå‰‡éœ€å…·å‚™SSHé€£ç·šèƒ½åŠ›ã€‚ç°¡å–®çš„èªªï¼Œé–‹ç™¼ç’°å¢ƒå¯åšçš„äº‹æƒ…ï¼Œå¤§éƒ¨åˆ†åœ¨Runnerä¸Šä¹Ÿè¦éƒ½å…·æœ‰ç›¸åŒåŠŸèƒ½ã€‚  Gitlab Runneråˆ†é¡  Gitlab Runnerè¨­ç½®æœ‰ä¸‰ç¨®æ¨¡å¼ï¼Œå¦‚ä¸‹   Share Runner : æ‰€æœ‰Groupæˆ–å°ˆæ¡ˆå¯ä½¿ç”¨ï¼Œä¸éœ€è‡ªè¡Œæ¶è¨­Runnerï¼Œå…è²»ç‰ˆæœ¬å…©åƒåˆ†é˜ä½¿ç”¨é™åˆ¶ã€‚  Specific(Project) Runner : ç‰¹å®šéœ€æ±‚ä½¿ç”¨ï¼Œéœ€è‡ªè¡Œæ¶è¨­Runnerã€‚\n   Group Runner : åŒGroupçš„Projectå¯ä½¿ç”¨ï¼Œéœ€è‡ªè¡Œæ¶è¨­Runnerã€‚    å®‰è£Runnerè¨­å®š  ä¸Šè¿°æåˆ°Runnerè¨­ç½®æœ‰ä¸‰ç¨®ï¼Œæ­¤æ–‡ç« æˆ‘å€‘æœƒä»¥Group Runnerè¨­ç½®ç‚ºä¸»ï¼Œè«‹å…ˆè‡³ä»¥ä¸‹è·¯å¾‘  YourGroup â†’ Setting â†’ CI/CD â†’ Runner (é»é¸Expand)  å±•é–‹å¾Œï¼Œè«‹é»é¸New group runner viewçš„Take me thereå°±æœƒé€²å…¥åˆ°Runners è¨­å®šé é¢å¦‚ä¸‹åœ–ï¼Œ    ä½ å¯ä»¥é»é¸å³ä¸Šè§’çš„Register a group runnerï¼Œä¸¦æ ¹æ“šä½ è¦è¨­ç½®çš„å¹³å°ï¼Œåœ¨Show runner installation and registration instructions é¸é …æœ‰è©³ç´°è¨­ç½®æ–¹å¼ï¼Œå¦‚ä¸‹åœ–    Windowsè¨­ç½®[  å®˜ç¶²èªªæ˜ ]   Step1 :   ä¸‹è¼‰Windows Gitlab Runneræª”æ¡ˆ  Step2 : å®‰è£èˆ‡å•Ÿå‹•   # åˆ‡æ›åˆ°ä¸‹è¼‰ç›®éŒ„\ncd D:\\SystemService\\gitlab-runner\n\n# å®‰è£æœå‹™\ngitlab-runner-windows-amd64.exe install\n\n# é€²è¡Œæœå‹™å•Ÿå‹•\ngitlab-runner-windows-amd64.exe start\n  å®‰è£å’Œå•Ÿå‹•æœå‹™æˆåŠŸå¾Œï¼Œå¯ä»¥é€éå·¥å…·ç®¡ç†å“¡æŸ¥çœ‹ç‹€æ…‹   Step3 : è¨»å†Š  è‡³YourGroup â†’ Setting â†’ CI/CD â†’ Runner (é»é¸Expand) â†’ Take me there â†’ Register group runner â†’Show runner installation and registration instructions  é»é¸Windows Tab æ­¤æ™‚å°±æœƒè·‘å‡ºå»ºè­°æŒ‡ä»¤æµç¨‹ï¼Œ    è«‹è¼¸å…¥RegisteræŒ‡ä»¤   ./gitlab-runner.exe register --url https://gitlab.com/ --registration-token your token\n   Step4 : è¨­ç½®Registeråƒæ•¸\n   a. Gitlab URL : è‹¥æ˜¯Group Runnerï¼Œå¯ä»¥è¼¸å…¥Group Gitlabçš„URL(Ex:  https://gitlab.com/groupxxxx )  b. Registration Token : Your Token (Group Token or Specific Project Token)  c. Description : é—œæ–¼æ­¤Runnerçš„æè¿°  d. Tags : å¯«CI.ymlæ™‚ï¼Œå·¥ä½œæœƒæ ¹æ“šTagåç¨±æŒ‡å‘ç¬¦åˆæ­¤åç¨±çš„Runnerï¼Œæ‰€ä»¥é€™åƒæ•¸è¨­å®šå¾ˆé‡è¦ï¼Œä¸€èˆ¬å¯ä»¥æ ¹æ“šä½ çš„ç’°å¢ƒå»å‘½åä¾‹å¦‚Windows-xxxxæˆ–è€…æ˜¯Linux-xxxx  e. Maintenance note : ç¶­è­·èªªæ˜ï¼Œå¯å¡«å¯«ç¶­è­·æ™‚é ˆæ³¨æ„äº‹é …  f. Executor : åŸ·è¡Œå™¨ç¨®é¡ï¼Œè‹¥è¦èµ°è¼ƒä¸€èˆ¬çš„CIå°±æ˜¯é¸shellï¼ŒåŸ·è¡Œå™¨å°±å¯æ ¹æ“šä¸åŒä½œæ¥­ç³»çµ±åšå°æ‡‰çš„CLIåŸ·è¡Œå™¨è¨­å®š(ä¾‹å¦‚Windowsè¨­å®šPowerShellï¼ŒLinuxè¨­å®šbashã€‚  åƒè€ƒ )  Step5 : å®Œæˆ  æ­¤æ™‚æˆ‘å€‘åœ¨é»é¸  YourGroup â†’ Setting â†’ CI/CD â†’ Runner (é»é¸Expand) â†’ Take me there  ä½ å°±å¯ä»¥çœ‹åˆ°è¨»å†Šå¥½çš„Runneré¡¯ç¤ºåœ¨è¨­å®šé é¢ä¸Šäº†    Linuxè¨­ç½®[  å®˜ç¶²èªªæ˜ ]   Step 1 : å®‰è£èˆ‡å•Ÿå‹•  è‡³Gitlabèªªæ˜æ–‡ä»¶ç›´æ¥ç…§æ­¥é©Ÿæ“åˆ€  è‡³YourGroup â†’ Setting â†’ CI/CD â†’ Runner (é»é¸Expand) â†’ Take me there â†’ Register group runner â†’Show runner installation and registration instructions     Step 2 : è¨»å†Š (å¯ç›´æ¥åƒç…§ä¸Šè¿° Windowsè¨­ç½®è¨»å†Š)  Shellè¨­ç½®  ä¸Šè¿°è¨­ç½®å¥½Ruunerå¾Œï¼Œæ¥è‘—éœ€èª¿æ•´Runnerè¨­å®šæª”çš„åŸ·è¡Œå™¨ï¼Œè«‹é–‹å•ŸRunnerè³‡æ–™å¤¾ä¸‹çš„tomlæª”ï¼Œä¸¦ç…§ä¸‹åœ–è¨­ç½®  \n     è©³ç´°å°æ‡‰Shellè¨­å®šå¯è‡³æ­¤æŸ¥è©¢[  é€£çµè«‹é»æˆ‘ ]  å®‰è£ç·¨è­¯ç’°å¢ƒè¨­å®š  å› ç‚ºRunnerç‚ºä»£æ›¿æœ¬æ©Ÿé›»è…¦åšå»ºç½®ã€æ¸¬è©¦èˆ‡éƒ¨å±¬ã€‚æ‰€ä»¥éœ€åœ¨ä¸Šé¢å®‰è£ç›¸å°æ‡‰ç’°å¢ƒï¼Œå°ˆæ¡ˆä¸Šæˆ‘å€‘æœƒä½¿ç”¨dotnet coreç‚ºç¯„ä¾‹ã€‚æ‰€ä»¥é›»è…¦éœ€å®‰è£å°æ‡‰éœ€æœ‰çš„SDKï¼Œè‹¥ä½¿ç”¨Dockerå‰‡éœ€å®‰è£Dockerç’°å¢ƒã€‚    Net Core SDKå®‰è£åƒè€ƒ   Dokcerå®‰è£åƒè€ƒ  å¥½ç”¨è«‹çµ¦è®šï¼Œè¬è¬  CIæ’°å¯«  å»ºç½®èˆ‡æ¸¬è©¦  Hello CI/CD  è«‹åˆ°æ­¤ä¸‹è¼‰Sample Code   https://gitlab.com/test8214/emptyproject  ä¸‹è¼‰ä¸‹ä¾†å¾Œå°‡æ­¤å°ˆæ¡ˆä¸Šåˆ°ä½ çš„Group Projectï¼Œè‹¥ä½ çš„Runnerå·²è¨­å¥½ï¼Œæˆ‘å€‘å¯ä»¥ç›´æ¥å¾Gitlabé é¢é»é¸ Set up CI/Cï¼Œå¦‚ä¸‹åœ–  \n     æ¥è‘—é»é¸Configure pipelineï¼Œæ­¤æ™‚Gitlabæœƒå¹«ä½ ç”Ÿæˆyml Sample Codeï¼Œæ­¤Sample Codeå·²å¹«ä½ å¯«å¥½çš„åŸºæœ¬build, testèˆ‡deploy Stagesã€‚è«‹å°‡æœ€ä¸Šå±¤è¨»è§£åˆªé™¤ï¼Œä¸¦åŠ ä¸Šdefaultå€æ®µï¼Œrunner tag   # defaultè¡¨ç¤ºæ‰€æœ‰jobéƒ½æœƒåƒè€ƒä»¥åŠä½¿ç”¨\ndefault:\n  # ä½¿ç”¨Gitlab Runneræœ‰ç›¸é—œçš„æ¨™ç±¤\n  tags:\n    - Windows(æ ¹æ“šä½ çš„Runner Tagå»å¡«å¯«)\n  æ­¤æ™‚è‹¥Runnerè¨­ç½®ç„¡èª¤ï¼Œå°±å¯ä»¥çœ‹åˆ°Gitlabé–‹å§‹è·‘CI/CDï¼Œå¦‚ä¸‹åœ–  \n     æ ¹æ“šæ­¤è…³æœ¬ï¼Œæˆ‘å€‘å¯ä»¥å¾—çŸ¥CI.ymlçš„åŸºæœ¬èªæ³•ç”±stagesåŠå°æ‡‰çš„job nameä¸­çš„scriptã€‚è‹¥è¦æ–°å¢Jobå‰‡åªéœ€åœ¨stagesæ–°å¢ï¼Œä¾‹å¦‚æˆ‘å€‘åœ¨testç«™é»å¾Œæ–°å¢build-releaseï¼Œè«‹ä¿®æ”¹stageå€å¡Šå¦‚ä¸‹     stages  :            # List of stages for jobs, and their order of execution.\n     -   build\n     -   test\n     -   build-release   # æ–°å¢build-release\n     -   deploy\n  ä¸¦å°‡ä»¥ä¸‹Scriptæ”¾ç½®lint-test-jobä¸‹     lint-test-job  :     # This job also runs in the test stage.\n     stage  :   test      # It can run at the same time as unit-test-job (in parallel).\n     script  :\n       -   echo \"Linting code... This will take about 10 seconds.\"\n       -   sleep 10\n       -   echo \"No lint issues found.\"\n   \n   #æ–°å¢build-release job\n   build-release-job  :\n     stage  :   build-release\n     script  :\n       -   echo \"Build release app package...\"\n       -   echo \"Build complete.\"\n  æ¥è‘—åšcommitï¼Œæˆ‘å€‘å³å¯çœ‹åˆ°Pipelineç”±ä¸‰å€‹ç«™é»è®Šæˆå››å€‹ç«™é»  \n     build èˆ‡ test  build-job  ä¸€èˆ¬åœ¨CI/CD Sampleï¼Œå¾ˆå¸¸æœƒçœ‹åˆ°é€™å€‹ç«™é»ï¼Œç”¨æ„åœ¨æ¸¬è©¦å»ºç½®å°ˆæ¡ˆæ˜¯å¦èƒ½ç·¨è­¯éã€‚åœ¨dotnet coreå°ˆæ¡ˆï¼Œæˆ‘å€‘åœ¨CLIæ¨¡å¼ä¸‹å¯ä»¥ç”¨dotnet buildå»å»ºç½®å°ˆæ¡ˆï¼Œæ­¤æ™‚æˆ‘å€‘å¯ä»¥å˜—è©¦å°‡build-jobç«™é»scriptåŠ å…¥dotnet buildæŒ‡ä»¤(å»ºè­°å…ˆè¨»è§£èª¿build jobä»¥å¤–çš„job Scriptç«™åˆ¥)ï¼Œå¦‚ä¸‹     build-job  :         # This job runs in the build stage, which runs first.\n     stage  :   build\n     script  :\n       -   echo \"Compiling the code...\"\n       -   dotnet build SampleWebAPI\\src\\SampleWebAPI -c debug\n  æ›´æ–°yml fileå¾Œï¼Œæª¢æŸ¥ä¸€ä¸‹Pipelineèƒ½å¦ç·¨è¼¯çš„éã€‚ç·¨è­¯éå¯çœ‹åˆ°è¨Šæ¯å¦‚ä¸‹  \n     unit-test-job  æ¥è‘—æˆ‘å€‘å˜—è©¦åŠ å…¥Test Jobï¼Œè«‹åˆªé™¤lint-test-jobåªä¿ç•™unit-test-jobä¸¦å°‡dotnet teståŠ å…¥scriptï¼Œå¦‚ä¸‹   unit-test-job:   # This job runs in the test stage.\n  stage: test    # It only starts when the job in the build stage completes successfully.\n  script:\n    - echo \"Running unit tests... This will take about 60 seconds.\"\n    - dotnet test SampleWebAPI\\test\\SampleWebAPI.Test\n  æ›´æ–°yml fileå¾Œï¼Œæª¢æŸ¥ä¸€ä¸‹Pipelineèƒ½å¦ç·¨è¼¯çš„éã€‚ç·¨è­¯éå¯çœ‹åˆ°è¨Šæ¯å¦‚ä¸‹  \n     ä½¿ç”¨è®Šæ•¸  ä¸Šè¿°ç·¨è­¯èˆ‡æ¸¬è©¦æœ‰ä½¿ç”¨åˆ°dotnet buildèˆ‡testï¼ŒåŸºæœ¬ä¸Šæˆ‘å€‘å¯ä»¥å°‡æˆ‘å€‘çš„srcèˆ‡testè·¯å¾‘å¯«æˆè®Šæ•¸ï¼Œé€™æ¨£åœ¨ä½¿ç”¨ä¸Šå¯ä»¥é‡è¤‡åˆ©ç”¨æ¸›å°‘é‡è¤‡çš„ç¨‹å¼ç¢¼     variables  :\n     AppFolderPath  :   SampleWebAPI\\\\src\\\\SampleWebAPI\n     TestFolderPath  :   SampleWebAPI\\\\test\\\\SampleWebAPI.Test\n  æ¥è‘—å°‡åŸæœ¬çš„Buildèˆ‡Test Jib Scriptæ›æ‰     build-job  :         # This job runs in the build stage, which runs first.\n     stage  :   build\n     script  :\n       -   echo \"Compiling the code...\"\n       -   dotnet build ${AppFolderPath} -c debug\n   \n   unit-test-job  :     # This job runs in the test stage.\n     stage  :   test      # It only starts when the job in the build stage completes successfully.\n     script  :\n       -   echo \"Running unit tests... This will take about 60 seconds.\"\n       -   dotnet test ${TestFolderPath}\n  \nå› ç‚ºæˆ‘å€‘ä½¿ç”¨dot net coreï¼Œå¦‚æœæˆ‘å€‘æœ‰å¯«æ¸¬è©¦Codeï¼Œæˆ‘å€‘å¯ä»¥ç›´æ¥çœç•¥æ¸¬è©¦å»ºç½®é€™å€‹ç«™é»(build-job)ã€‚åªéœ€è¦åšTestå³å¯(unit-test-job)ã€‚ä¸‹dot net testæ™‚ï¼Œå› ç‚ºè¦è·‘æ¸¬è©¦ï¼Œä»–æœƒé †ä¾¿å»ºç½®Appå°ˆæ¡ˆã€‚\n  CDæ’°å¯«  æ¥è‘—æˆ‘å€‘è¦åšç°¡æ˜“çš„Releaseå»ºç½®èˆ‡éƒ¨å±¬ï¼Œå› ç‚ºWindowsæ¬Šé™è¨­ç½®è¼ƒéº»ç…©ï¼Œé€™éƒ¨åˆ†Demoæˆ‘å€‘ä½¿ç”¨Linux Runnerå»å¯¦ç¾(Windowsç³»çµ±è‹¥è¦å¿«é€Ÿå•Ÿç”¨Linux Runnerï¼Œå¯ä»¥ä½¿ç”¨WSL2)ã€‚è«‹å•Ÿç”¨Linux Runnerä¸¦åœ¨Runnerä¸Šè¨­ç½®å¥½.net coreéœ€è¦ç·¨è­¯çš„SDKå®‰è£ï¼Œå¦å¤–å‰‡æ˜¯SSHå®‰è£ã€‚  Runnerè¨­ç½®å¥½å¾Œï¼Œæˆ‘å€‘å°‡ä¸Šè¿°æåˆ°çš„defaultå€å¡Šä½¿ç”¨åˆ°çš„tagsè¨­å®šï¼Œç”±Windowsæ”¹æˆLinux(åœ¨æ­¤å¯æ ¹æ“šä½ çš„Linuxè¨­ç½®)ã€‚æ¥è‘—å°‡ä¸Šè¿°å¯«å¥½çš„è…³æœ¬å°‡æ–œç·šæ”¹æˆåæ–œç·šï¼Œåƒè€ƒScriptå¦‚ä¸‹     # defaultè¡¨ç¤ºæ‰€æœ‰jobéƒ½æœƒåƒè€ƒä»¥åŠä½¿ç”¨\n   default  :\n     # ä½¿ç”¨Gitlab Runneræœ‰ç›¸é—œçš„æ¨™ç±¤\n     tags  :\n       -   Linux\n   \n   variables  :\n     AppFolderPath  :   SampleWebAPI//src//SampleWebAPI\n     TestFolderPath  :   SampleWebAPI//test//SampleWebAPI.Test\n   \n   stages  :            # List of stages for jobs, and their order of execution\n     -   test\n   \n   unit-test-job  :     # This job runs in the test stage.\n     stage  :   test      # It only starts when the job in the build stage completes successfully.\n     script  :\n       -   echo \"Running unit tests... This will take about 60 seconds.\"\n       -   dotnet test ${TestFolderPath}\n  è‹¥å·²ç¢ºå®šä½ çš„Pipelineç„¡èª¤ï¼Œæ¥è‘—å°±å¯ä»¥å¾€ä¸‹èµ°æ¸¬è©¦Releaseå»ºç½®èˆ‡éƒ¨å±¬  å»ºç½®èˆ‡éƒ¨å±¬  åœ¨å»ºç½®éƒ¨å±¬ä¹‹å‰ï¼Œè«‹å…ˆæº–å‚™å¥½ä½ çš„éƒ¨å±¬Serverï¼Œç›®å‰æ­¤ç« ç¯€ç”¨çš„éƒ¨å±¬Serverç‚ºUbuntu 20.04 Linuxï¼Œä¸¦å·²å®‰è£å¥½   .Net Core 3.1 SDK  SSH  Docker  pm2  unzip  SSHè¨­å®š  ç‚ºäº†ç°¡æ˜“Demoï¼Œé€£ç·šéƒ¨åˆ†æˆ‘å€‘ç›´æ¥ä½¿ç”¨sshèˆ‡éƒ¨å±¬Serveræºé€šï¼Œç‚ºäº†å…ç™»å…¥å¯†ç¢¼ï¼Œæ•…é ˆè¨­ç½®sshç§é‘°èˆ‡å…¬é‘°ã€‚è«‹è‡³ä½ çš„Linux Runnerè³‡æ–™å¤¾åº•ä¸‹æœƒæœ‰ä¸€å€‹.ssh fileã€‚è‹¥ä½ æ˜¯ç…§Gitlabä¸Šçš„æ­¥é©Ÿè¨­ç½®ï¼Œæ²’æ„å¤–ä½ çš„Runnerè·¯å¾‘æœƒåœ¨homeåº•ä¸‹     # åˆ‡æ›sudo\n   sudo -i\n   \n   # åˆ‡æ›åˆ°sshç›®éŒ„ä¸‹\n   cd /home/gitlab-runner/.ssh\n   \n   #ç”¢ç”Ÿé‡‘é‘°åŒ™(æ–¹ä¾¿æ¸¬è©¦å¯å…¨æŒ‰Enter)\n   ssh-keygen\n   \n   #æ›´æ”¹ç§é‘°æ¬Šé™ç‚º600\n   chmod 600 id_rsa\n   \n   # æ¥è‘—å°‡ä½ çš„å…¬é‘°å‚³è‡³ä½ çš„éƒ¨å±¬æ©Ÿä¸Š\n   scp id_dsa.pub user@abc.xxx.xxx.xxx:/root/.ssh/id_dsa.pub\n  æ¥è‘—é€£éå»éƒ¨å±¬æ©Ÿ     # é€£ç·šéƒ¨å±¬æ©Ÿ\n   ssh root@abc.xxx.xxx.xxx\n   \n   # è¼¸å…¥å¯†ç¢¼\n   \n   # è‡³SSH Fileåº•ä¸‹å°‡Keyè¤‡è£½ä¸€åˆ†åˆ°authorized_keysæª”æ¡ˆåº•ä¸‹\n   cat id_rsa.pub > authorized_keys\n   \n   # ç¢ºå®šauthorized_keysæ¬Šé™ç‚º600\n   chmod 600 authorized_keys\n   \n   # ç™»å‡º\n   exit\n   \n   # å†æ¬¡ç™»å…¥ç¢ºå®šæ˜¯å¦å…å¯†ç¢¼\n   ssh root@abc.xxx.xxx.xxx\n  æ¯”è¼ƒç¬¨çš„æ–¹å¼ï¼Œä½ ä¹Ÿå¯ä»¥æ‰‹å‹•è¤‡è£½å°‡ä½ è‡ªå·±Runnerä¸‹çš„ç§é‘°æ‰‹å‹•è¤‡è£½åˆ°éƒ¨å±¬æ©Ÿçš„authorized_keysæª”æ¡ˆ  Project SSH Keyè®Šæ•¸  ç¢ºå®šå¥½Runnerèˆ‡éƒ¨å±¬æ©Ÿä¹‹é–“å·²å¯å…å¯†ç¢¼é€£ç·šå¾Œï¼Œæˆ‘å€‘éœ€è¦åœ¨å°‡Runnerçš„ç§é‘°è¤‡è£½ä¸€ä»½è‡³å°ˆæ¡ˆçš„CI/CDè¨­å®šä¸‹  è«‹è‡³ä½ Group  YourPorject Repo/Settings/CICD ä¸‹  æ­¤æ™‚ä½ æœƒçœ‹åˆ°Variablesï¼Œè«‹æ–°å¢ä¸€SSH_PRIVATE_KEYè®Šæ•¸å¦‚ä¸‹    \né ˆæ³¨æ„!å› ç‚ºæ˜¯Group Runnerï¼Œæ‰€ä»¥ä¸€é–‹å§‹æˆ‘åªå°‡SSH PKè¨­ç½®åœ¨Group Settingçš„CICDè¨­ç½®è®Šæ•¸ä¸‹ã€‚çµæœProjectä¸Štagsè§¸ç™¼Pipelineåœ¨éƒ¨å±¬æ™‚æ‰¾ä¸åˆ°SSH PKã€‚æ‰€ä»¥Project Repoè‹¥è¦ä¸Štagsï¼Œé ˆå°‡SSH PKè¨­ç½®åœ¨Project Repo Settingçš„CICDè®Šæ•¸è¨­å®šä¸‹ã€‚\n  build-release-jobèˆ‡deploy  éƒ¨å±¬æ©Ÿç­‰ç’°å¢ƒè¨­ç½®å¥½å¾Œï¼Œæ¥ä¸‹ä¾†å°±é–‹å§‹å¯«Releaseèˆ‡deployã€‚å…ˆç°¡å–®å¸¶artifactsç‰ˆæœ¬ï¼Œç„¶å¾Œé€£è‡³éƒ¨å±¬ä¸»æ©Ÿå°‡artifactsè¼‰ä¸‹ä¾†å¾Œï¼Œè§£å£“ç¸®ç›´æ¥é€épm2å°‡web apiæœå‹™å•Ÿèµ·ä¾†ã€‚  build-release-job  ç‚ºäº†æ¸›å°‘æ¸¬è©¦æ™‚é–“ã€‚æˆ‘å€‘å¯ä»¥å…ˆå˜—è©¦ä½¿ç”¨dotnet publishæŒ‡ä»¤ï¼Œè‡ªå·±å…ˆè©¦çœ‹çœ‹æœ‰ç„¡å•é¡Œï¼Œç„¡å•é¡Œé€šå¸¸å¯ä»¥ç›´æ¥å°‡æŒ‡ä»¤è¤‡è£½åˆ°scriptä¸Šã€‚  å»ºç½®release stageï¼Œåƒè€ƒscriptå¦‚ä¸‹   default:\n  tags:\n    - Linux\n\nvariables:\n  AppFolderPath: SampleWebAPI//src//SampleWebAPI\n  TestFolderPath: SampleWebAPI//test//SampleWebAPI.Test\n\nstages:          \n  - test\n  # å»ºç½®release stage\n  - release\n\nunit-test-job:  \n  stage: test\n  script:\n    - echo \"Running unit tests... This will take about 60 seconds.\"\n    - dotnet test ${TestFolderPath}\n\n# å»ºç½®release stage\nbuild-release-job:\n  stage: release\n  script:\n    - echo \"Build release...\"\n    - dotnet publish ${AppFolderPath} -c release\n  å»ºç½®artifacts  æ¥è‘—æˆ‘å€‘å¸Œæœ›åœ¨release jobå®Œæˆå¾ŒåŒæ­¥ç”¢ç”Ÿartifactsã€‚åƒè€ƒscriptå¦‚ä¸‹   build-release-job:\n  stage: release\n  script:\n    - echo \"Build release...\"\n    - dotnet publish ${AppFolderPath} -c release\n  artifacts:\n    # on_success always on_failure\n    when: always \n    # 30 mins, 1 weeks...\n    expire_in: 30 mins\n    paths:\n      - ./SampleWebAPI/src/SampleWebAPI/bin/release/netcoreapp3.1\n  æˆ‘å€‘å°‡artifactså¯«è‡³build-release-jobä¸‹ï¼Œé€™é‚Šæœƒæœ‰å¹¾å€‹è¨­å®š   when : upload articactsæ™‚æ©Ÿ (  åƒè€ƒé»æˆ‘ )  expire : articats å­˜æ´»æ™‚é–“ (  åƒè€ƒé»æˆ‘ )  paths: è¦åŒ…è£æª”æ¡ˆçš„è·¯å¾‘  æ­¤æ™‚æˆ‘å€‘åœ¨è·‘ä¸€æ¬¡Pipelineï¼Œå°±å¯ä»¥çœ‹åˆ°build-release-jobä¸‹æœ‰å€‹å¯ä¸‹è¼‰çš„ä»‹é¢(å¦‚ä¸‹åœ–)ï¼Œä»£è¡¨ä½ çš„artifactstç”¢ç”ŸæˆåŠŸã€‚    artifacts urlæ¸¬è©¦(  åƒè€ƒé»æˆ‘ )  æ¥è‘—æˆ‘å€‘å¯ä»¥é€éurlä¸‹è¼‰artifactsï¼ŒSampleå¦‚ä¸‹   https://gitlab.com/test8214/testproject/-/jobs/artifacts/main/download?job=build-release-job  å¯ä¿®æ”¹çš„éƒ¨åˆ†   test8214 : ä½ çš„Group Url  testproject : Project Repository Name  main:è¡¨ç¤ºä¸»ç·š  release-job:è¡¨ç¤ºä½ çš„stage job  \n artifacts Project URLè«‹æ ¹æ“šä½ å¯¦éš›çš„ Project URLè¨­å®šèª¿æ•´ï¼Œèª¤ç›´æ¥ç…§æŠ„\n  æ‰€ä»¥æ­¤urlçš„æ„æ€ç‚ºè¦å¾testprojectä¸‹mainä¸»ç·šæœ€å¾Œä¸€å€‹æˆåŠŸPipelineçš„build-release-jobä¸‹è¼‰artifactsã€‚  å¦å¤–ï¼Œæ¯”è¼ƒå¥½çš„æ–¹æ³•æ˜¯ç”¨CI_JOB_TOKENå»æ‰“Job Artifacts APIæ‹¿å–Artifactsï¼Œåƒè€ƒå¦‚\né€£çµ  https://docs.gitlab.com/ee/api/job_artifacts.html  å› ç‚ºurlæ–¹å¼æ˜¯æ‹¿å–æœ€å¾Œä¸€å€‹Pipelineçš„build-release-jobç”¢ç‰©ï¼Œä»£è¡¨ä»–æœƒæ‹¿å–å‰ä¸€å€‹æˆåŠŸçš„Piplineç”¢ç‰©ä¸æ˜¯ç•¶ä¸‹é‹è¡ŒPipelineçš„build-release-jobç”¢ç‰©ã€‚  å› ç‚ºé€™æ¨£ï¼Œæ‰€ä»¥é€™å€‹Demoå°±ä¸æœƒå°‡build-release-jobä¸Šonly tagsã€‚è®“deployå¯ä»¥æ­£ç¢ºæ‹¿å–ç›®å‰é‹è¡ŒPipelineç·¨è­¯å¥½çš„ç¨‹å¼ç¢¼å¦‚ä¸‹ã€‚    \nè¼ƒå¥½çš„Pepelineè¨­è¨ˆæ˜¯å°‡releaseè¨­ç½®åœ¨tagè§¸ç™¼æ™‚ï¼Œä¹Ÿå°±æ˜¯åšCDæ™‚æ©Ÿé»ã€‚å¾ŒçºŒå†æ‰¾æ™‚é–“ä¿®æ­£artifactsä¸‹è¼‰æ–¹å¼\n  deploy  åœ¨build-release-jobåšå®Œå¾Œï¼Œæ¥è‘—æˆ‘å€‘è¦åšdeploy stageï¼Œä¸€é–‹å§‹æˆ‘å€‘é ˆå»ºç«‹sshé€£ç·šï¼Œè…³æœ¬æŒ‡ä»¤å¦‚ä¸‹   deploy-job:\n  stage: deploy\n  script:\n    - eval $(ssh-agent -s)\n    - echo \"$SSH_PRIVATE_KEY\" | tr -d '\\r' | ssh-add -     \n    - mkdir -p ~/.ssh     \n    - chmod 700 ~/.ssh \n    -> \n      ssh -o StrictHostKeyChecking=no -v user@125.229.14.65 -p 40122\n  é€™éƒ¨åˆ†æœƒç¨å¾®é›£äº†è§£ä¸€é»ï¼Œæ•´é«”ä¾†èªªï¼Œä¸»è¦ç›®çš„åœ¨æ–¼å»ºç«‹ä¸€å€‹å…·æœ‰PKæ¬Šé™çš„é€£ç·šï¼Œè®“Gitlab Runnerå¯ä»¥åœ¨ä¸åŒå·²å…è¨±æ¬Šé™çš„éƒ¨å±¬ä¸»æ©Ÿé€£ç·š(ä¹Ÿè¨±ä¸åªä¸€å°)ã€‚  ç´°ç¯€éƒ¨åˆ†ï¼Œssh-agentæœ‰é»åƒæ˜¯ç®¡ç†ssh keyçš„å·¥å…·ã€‚  ç¬¬ä¸€è¡Œevalé€šå¸¸æ˜¯å°å‡ºä¾†çš„æ„æ€ï¼Œæœ‰é»é¡ä¼¼ echoï¼Œä¸éä»–å¯ä»¥ç›´æ¥æŠŠæŒ‡ä»¤é¡¯ç¤ºå‡ºä¾†ï¼Œæ‰€ä»¥æ­¤è™•ç‚ºé¡¯ç¤ºssh-agentçš„ç‹€æ…‹ã€‚  ç¬¬äºŒè¡Œæ˜¯æŠŠ gitlabçš„ç’°å¢ƒè®Šæ•¸è®€å–å‡ºä¾†ï¼Œä¹‹å¾Œ tr -d  '\\r' ä¸»è¦æ˜¯æŠŠæ›è¡Œçµ¦å–ä»£æ‰ï¼Œwindowså…§å»ºæ˜¯CRLF ç›¸ç•¶æ–¼ /r/nï¼Œè€Œé€™é‚Šçš„ /r å°±æ˜¯Carriage-Returnï¼Œæ‰€è¬‚çš„è¿´è»Šå­—å…ƒã€‚  ç¬¬ä¸‰è¡Œå‰µå»º -/.ssh æ˜¯åœ¨ç›®å‰ä½¿ç”¨è€…ç›®éŒ„åº•ä¸‹å‰µå»º .sshï¼Œç”¨ä¾†è¨˜éŒ„ç­‰ä¸€ä¸‹ä½ çš„sshé€£ç·šè³‡è¨Šï¼Œé€šå¸¸sshé€£ç·šå¾Œï¼Œæœƒè¨˜éŒ„åœ¨ä¸€å€‹å«åš known_hostçš„æª”æ¡ˆã€‚  å¯«å¥½é€£ç·šdeploy-jobå¾Œï¼Œæˆ‘å€‘å¯ä»¥å˜—è©¦è®“ä»–è·‘çœ‹çœ‹èƒ½å¦é€£ç·šéƒ¨å±¬ä¸»æ©ŸæˆåŠŸï¼Œ   default:\n  tags:\n    - Linux\n\nvariables:\n  AppFolderPath: SampleWebAPI//src//SampleWebAPI\n  TestFolderPath: SampleWebAPI//test//SampleWebAPI.Test\n\nstages:          \n  - test\n  - release\n  # éƒ¨å±¬\n  - deploy\n\nunit-test-job:  \n  stage: test\n  script:\n    - echo \"Running unit tests... This will take about 60 seconds.\"\n    - dotnet test ${TestFolderPath}\n\n\nbuild-release-job:\n  stage: release\n  script:\n    - echo \"Build release...\"\n    - dotnet publish ${AppFolderPath} -c release\n  artifacts:\n    # on_success always on_failure\n    when: always \n    # 30 mins, 1 weeks...\n    expire_in: 30 mins\n    paths:\n      - ./SampleWebAPI/src/SampleWebAPI/bin/release/netcoreapp3.1\n# éƒ¨å±¬      \ndeploy-job:\n  stage: deploy\n  script:\n    - eval $(ssh-agent -s)\n    - echo \"$SSH_PRIVATE_KEY\" | tr -d '\\r' | ssh-add -     \n    - mkdir -p ~/.ssh     \n    - chmod 700 ~/.ssh \n    -> \n      ssh -o StrictHostKeyChecking=no -v user@125.229.14.65 -p 40122\n  è‹¥é€£ç·šæˆåŠŸï¼Œdeploy stageå‰‡æœƒé‹è¡Œé€šé(æ‰“å‹¾å‹¾)ï¼Œæ¥è‘—å°±å¯ä»¥é–‹å§‹å¯«é€£è‡³éƒ¨å±¬Serverçš„æŒ‡ä»¤äº†ã€‚é€™é‚Šå¯ä»¥çœ‹åˆ°æœ‰ä¸€å€‹->çš„ç¬¦è™Ÿï¼Œä»£è¡¨æ­¤ç¬¦è™Ÿå€æ®µä¸‹çš„æŒ‡ä»¤æ˜¯åœ¨SSHç›®æ¨™ä¸»æ©Ÿä¸ŠåŸ·è¡Œã€‚  æ¥è‘—é€£éå»å¾Œï¼Œæˆ‘å€‘åŠ å…¥è¦åŸ·è¡Œçš„ScriptæŒ‡ä»¤   # éƒ¨å±¬      \ndeploy-job:\n  stage: deploy\n  script:\n    - eval $(ssh-agent -s)\n    - echo \"$SSH_PRIVATE_KEY\" | tr -d '\\r' | ssh-add -     \n    - mkdir -p ~/.ssh     \n    - chmod 700 ~/.ssh \n    - >\n      ssh -o StrictHostKeyChecking=no -v user@125.229.14.65 -p 40122\n      \"mkdir -p ~/sampleapi &&\n       wget -O ~/sampleapi/release-build.zip https://gitlab.com/test8214/testproject/-/jobs/artifacts/main/download?job=build-release-job &&\n       sudo unzip -o ~/sampleapi/release-build.zip -d ~/sampleapi &&\n       pm2 start 'dotnet ~/sampleapi/SampleWebAPI/src/SampleWebAPI/bin/release/netcoreapp3.1/SampleWebAPI.dll --urls http://0.0.0.0:5000' --name 'code-sense-api-service' &&\n       pm2 delete code-sense-api-service &&\n       pm2 start 'dotnet ~/sampleapi/SampleWebAPI/src/SampleWebAPI/bin/release/netcoreapp3.1/SampleWebAPI.dll --urls http://0.0.0.0:5000' --name 'code-sense-api-service'\n      \"\n  æŒ‡ä»¤å…§å®¹å¤§è‡´æ˜¯é€£è‡³ç›®æ¨™ä¸»æ©Ÿå¾Œï¼Œ   åœ¨userä¸‹å»ºç½®sampleapiè³‡æ–™å¤¾  ä¸‹è¼‰artifacts  è§£å£“é–  ä½¿ç”¨pm2å°‡Service Runèµ·ä¾†  \n artifacts Project URLè«‹æ ¹æ“šä½ å¯¦éš›çš„ Project URLè¨­å®šèª¿æ•´ï¼Œèª¤ç›´æ¥ç…§æŠ„\n    deployå®Œå¾Œæ­¤æ™‚å°±å¯ä»¥é€éAPIï¼Œå¾—åˆ°è³‡æ–™   http://x.x.x.x:ä½ çš„å°å¤–Port/weatherforecast  \ndeployå¯ä»¥çœ‹åˆ°pm2 startå…©æ¬¡ï¼Œå› ç‚ºåœ¨ç¬¬ä¸€æ¬¡åŠ å…¥æ™‚æ²’æœ‰å°æ‡‰service nameå¯ä»¥åˆªé™¤æœƒå‡ºéŒ¯ã€‚ä½¿ç”¨> /dev/null æ¸¬è©¦æ²’ç”¨ã€‚åªèƒ½å…ˆç”¨æ­¤æ³•æš«è§£ã€‚ç« ç¯€ç›®çš„é‚„æ˜¯åœ¨æ–¼å¦‚ä½•å»ºç«‹ä¸€èµ·ä¸€æ¢ç°¡æ˜“çš„CI/CD Pipelineç‚ºæ³¨ã€‚æ­£å¼è¤‡é›œçš„å ´åˆå¯ä»¥åƒè€ƒDockerç‰ˆæœ¬\n  only tags  æ¥è‘—æˆ‘å€‘è¦åœ¨deployä¸Štagsè§¸ç™¼äº‹ä»¶(ä¸Šæ¨™ç±¤)ï¼Œåªéœ€è¦åœ¨åŸæœ¬çš„scriptä¸‹ï¼Œå¤šä¸€å€‹tagså±¬æ€§   # éƒ¨å±¬      \ndeploy-job:\n  stage: deploy\n  script:\n    - eval $(ssh-agent -s)\n    - echo \"$SSH_PRIVATE_KEY\" | tr -d '\\r' | ssh-add -     \n    - mkdir -p ~/.ssh     \n    - chmod 700 ~/.ssh \n    - >\n      ssh -o StrictHostKeyChecking=no -v user@125.229.14.65 -p 40122\n      \"mkdir -p ~/sampleapi &&\n       wget -O ~/sampleapi/release-build.zip https://gitlab.com/test8214/testproject/-/jobs/artifacts/main/download?job=build-release-job &&\n       sudo unzip -o ~/sampleapi/release-build.zip -d ~/sampleapi &&\n       pm2 start 'dotnet ~/sampleapi/SampleWebAPI/src/SampleWebAPI/bin/release/netcoreapp3.1/SampleWebAPI.dll --urls http://0.0.0.0:5000' --name 'code-sense-api-service' &&\n       pm2 delete code-sense-api-service &&\n       pm2 start 'dotnet ~/sampleapi/SampleWebAPI/src/SampleWebAPI/bin/release/netcoreapp3.1/SampleWebAPI.dll --urls http://0.0.0.0:5000' --name 'code-sense-api-service'\n      \"\n  # ä¸Štagsè§¸ç™¼äº‹ä»¶\n  only:\n    - tags\n  ä¸Šå®Œtagså¾Œï¼Œdeployäº‹ä»¶å‰‡åªæœƒåœ¨ä½ ä¸Štagæ™‚è§¸ç™¼ã€‚æ¥è‘—å°±å¯ä»¥åœ¨tagé é¢çœ‹åˆ°æ­¤æ¬¡çš„release tagæ˜¯å¦æœ‰é€šéPipeline Jobã€‚    \nä¸€èˆ¬CDåšrelease buildèˆ‡deployéƒ½æœƒä¸Šonly tagsï¼Œæ­¤ç¯„ä¾‹å› ç‚ºartifactsé‚„ä¸ç¢ºå®šæ˜¯ä¸æ˜¯å·²æ­£ç¢ºæ–¹å¼æ‹¿å–ï¼Œæ‰€ä»¥åªåœ¨deployä¸Šonly tagsã€‚\n  åƒè€ƒå°ˆæ¡ˆ  Repository:  https://gitlab.com/test8214/testproject  Dockerç‰ˆæœ¬(Speakï¼Œå¾ŒçºŒå¾…å¯«)  Repository:  https://gitlab.com/test8214/demoproject  html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}"},{"id":"content:2.workshop:grpc.md","path":"/workshop/grpc","dir":"workshop","title":"gRPCå¿«é€Ÿå…¥é–€","description":"","keywords":["HTTP2å…¥é–€ä»‹ç´¹","Protobuf 3ä»‹ç´¹","gRPC Code generator","gRCP å‘¼å«çš„å››ç¨®é¡å‹","gRPCå·¥å…·","åƒè€ƒ"],"body":"  HTTP2å…¥é–€ä»‹ç´¹  HTTP/2 æ¦‚è¿°  HTTP/2 æ˜¯ HTTP å”è­°çš„ç¬¬äºŒå€‹ç‰ˆæœ¬ï¼Œå®ƒåŸºæ–¼ Google çš„ SPDY å”è­°ï¼Œæ—¨åœ¨æé«˜ç¶²é çš„åŠ è¼‰é€Ÿåº¦å’Œæ€§èƒ½ã€‚ç›¸æ¯”æ–¼ HTTP/1.xï¼ŒHTTP/2 æ”¹é€²äº†ä»¥ä¸‹æ–¹é¢ï¼š   å¤šè·¯å¾‘å‚³è¼¸ (Multiplexing)ï¼šHTTP/2 å…è¨±åŒä¸€å€‹ TCP é€£æ¥ä¸Šé€²è¡Œå¤šå€‹è«‹æ±‚å’ŒéŸ¿æ‡‰ï¼Œå¾è€Œæ¸›å°‘äº† TCP é€£æ¥æ•¸é‡å’Œå»ºç«‹é€£æ¥çš„å»¶é²ã€‚\né¦–éƒ¨å£“ç¸® (Header Compression)ï¼šHTTP/2 ä½¿ç”¨ HPACK ç®—æ³•å°é¦–éƒ¨é€²è¡Œå£“ç¸®ï¼Œå¾è€Œæ¸›å°‘äº†é¦–éƒ¨å¤§å°ï¼Œé™ä½äº†å¸¶å¯¬æ¶ˆè€—ã€‚\næœå‹™ç«¯æ¨é€ (Server Push)ï¼šHTTP/2 å…è¨±æœå‹™å™¨åœ¨éŸ¿æ‡‰ä¸€å€‹è«‹æ±‚æ™‚ä¸»å‹•æ¨é€ç›¸é—œçš„è³‡æºåˆ°å®¢æˆ¶ç«¯ç·©å­˜ä¸­ï¼Œå¾è€Œæé«˜é é¢åŠ è¼‰é€Ÿåº¦ã€‚\n  HTTP/2 åŸç†  HTTP/2 ä½¿ç”¨äºŒé€²åˆ¶æ ¼å¼å‚³è¼¸è³‡æ–™ï¼Œå°‡è³‡æ–™åˆ†ç‚º HEADERS å’Œ DATA å…©éƒ¨åˆ†ã€‚å¤šå€‹è«‹æ±‚å’ŒéŸ¿æ‡‰å¯ä»¥åœ¨åŒä¸€å€‹ TCP é€£æ¥ä¸Šé€²è¡Œï¼Œæ¯å€‹è«‹æ±‚å’ŒéŸ¿æ‡‰éƒ½æœ‰è‡ªå·±çš„ IDã€‚HTTP/2 ä¹Ÿæ”¯æŒå„ªå…ˆç´š (Priority) æ©Ÿåˆ¶ï¼Œå¯ä»¥å°è«‹æ±‚é€²è¡Œæ’åºå’Œåˆ†é…å„ªå…ˆç´šã€‚  HTTP/2 å’Œ HTTP/1.x çš„ä¸åŒä¹‹è™•     HTTP/2  HTTP/1.x    åŸºæ–¼äºŒé€²åˆ¶æ ¼å¼  åŸºæ–¼æ–‡æœ¬æ ¼å¼   å…è¨±å¤šè·¯å¾‘å‚³è¼¸  åªèƒ½ä¸²è¡Œå‚³è¼¸   ä½¿ç”¨é¦–éƒ¨å£“ç¸®  ä¸æ”¯æŒé¦–éƒ¨å£“ç¸®   æ”¯æŒæœå‹™ç«¯æ¨é€  ä¸æ”¯æŒæœå‹™ç«¯æ¨é€   æ”¯æŒå„ªå…ˆç´š  ä¸æ”¯æŒå„ªå…ˆç´š  HTTP/2 çš„å„ªç¼ºé»  å„ªé»   åŠ è¼‰é€Ÿåº¦æ›´å¿«ï¼šå¤šè·¯å¾‘å‚³è¼¸å’Œé¦–éƒ¨å£“ç¸®ç­‰æ©Ÿåˆ¶å¯ä»¥æ¸›å°‘å»¶é²å’Œå¸¶å¯¬æ¶ˆè€—ï¼Œå¾è€Œæé«˜åŠ è¼‰é€Ÿåº¦ã€‚  æ•ˆç‡æ›´é«˜ï¼šå¤šè·¯å¾‘å‚³è¼¸å’Œå„ªå…ˆç´šç­‰æ©Ÿåˆ¶å¯ä»¥æ›´å¥½åœ°åˆ©ç”¨ç¶²çµ¡è³‡æºï¼Œå¾è€Œæé«˜æ•ˆç‡ã€‚  å®‰å…¨æ€§æ›´é«˜ï¼šHTTP/2 å¼·åˆ¶è¦æ±‚ä½¿ç”¨åŠ å¯†ï¼Œå¾è€Œæé«˜äº†å®‰å…¨æ€§ã€‚  ç¼ºé»   éœ€è¦åŠ å¯†ï¼šHTTP/2 å¼·åˆ¶è¦æ±‚ä½¿ç”¨åŠ å¯†ï¼Œé€™å¢åŠ äº†ç¶²ç«™çš„æˆæœ¬å’Œè¤‡é›œåº¦ã€‚  éœ€è¦æ”¯æ´ HTTP/2 çš„æœå‹™å™¨å’Œå®¢æˆ¶ç«¯ï¼šä¸æ˜¯æ‰€æœ‰çš„æœå‹™å™¨å’Œå®¢æˆ¶ç«¯éƒ½æ”¯æ´ HTTP/2ï¼Œéœ€è¦æ›´æ–°åˆ°æ”¯æ´ HTTP/2 çš„ç‰ˆæœ¬ã€‚   Protobuf 3ä»‹ç´¹  Protocol Buffers (protobuf)æ˜¯Googleé–‹ç™¼çš„ä¸€ç¨®è¼•é‡ç´šã€é«˜æ•ˆèƒ½çš„è³‡æ–™åºåˆ—åŒ–æ ¼å¼ï¼Œç”¨æ–¼è·¨å¹³å°è³‡æ–™äº¤æ›å’Œå„²å­˜ã€‚Protocol Bufferså¯ä»¥åœ¨ä¸åŒçš„ç¨‹å¼èªè¨€ä¹‹é–“é€²è¡Œè³‡æ–™äº¤æ›ï¼Œä¸¦ä¸”æ¯”XMLå’ŒJSONç­‰å¸¸è¦‹çš„è³‡æ–™åºåˆ—åŒ–æ ¼å¼æ›´å°ã€æ›´å¿«ã€æ›´æ˜“æ–¼ä½¿ç”¨å’Œç¶­è­·ã€‚  å¸¸è¦‹çš„æ¬„ä½ä»¥åŠä¿®é£¾ç¬¦è™Ÿ  singular  gRPCå…§éƒ¨çš„é è¨­çš„æ¬„ä½é¡å‹ï¼Œæ²’æœ‰æ’°å¯«å…¶ä»–ä¿®é£¾ç¬¦è™Ÿå°±è¡¨ç¤ºé è¨­ä½¿ç”¨  singular ç‚ºæ¬„ä½çš„æœ€å°å–®ä½ã€‚  optional  åƒæ•¸å€¼ç‚ºå¯é¸çš„ï¼Œå¯ä»¥æŠŠå®ƒçœ‹ä½œç‚º  null ï¼Œé€šå¸¸æœƒç”Ÿæˆç¨‹å¼ç¢¼å¾Œï¼Œæœƒæœ‰  HasXXX æ–¹æ³•æˆ–å±¬æ€§ä¾†åˆ¤æ–·æ­¤æ•¸å€¼æ˜¯å¦å­˜åœ¨ã€‚æˆ‘å€‘è—‰ç”±optionalé—œéµå­—ä¾†ç°¡åŒ–å‚³è¼¸å¤§å°ã€‚  repeated  å®£å‘Šä¸€å€‹ç©ºçš„  list  (é  null )ï¼Œé€šå¸¸ç”Ÿæˆç¨‹å¼ç¢¼å¾Œï¼Œæœƒæ ¹æ“šå°æ‡‰çš„èªè¨€é€²è¡Œç”¢ç”Ÿï¼Œä¾‹å¦‚: Goç‚º  slice ï¼ŒC#ç‚º  list ç­‰ç­‰ã€‚   protobuf   message Person {\n  string name = 1;\n  repeated string phone_numbers = 2;\n}\n   java     // å‰µå»ºä¸€å€‹äººçš„ç‰©ä»¶\n   Person   person   =   Person.  newBuilder  ()\n     .  setName  (  \"John\"  )\n     .  addPhoneNumbers  (  \"1234567890\"  )\n     .  addPhoneNumbers  (  \"0987654321\"  )\n     .  build  ();\n   \n   // ç²å–äººçš„é›»è©±è™Ÿç¢¼åˆ—è¡¨\n   List  <  String  > phoneNumbers   =   person.  getPhoneNumbersList  ();\n  map  å®£å‘Šä¸€å€‹ç©ºçš„  map  (é  null )ï¼Œé€šå¸¸ç”Ÿæˆç¨‹å¼ç¢¼å¾Œï¼Œæœƒæ ¹æ“šå°æ‡‰çš„èªè¨€é€²è¡Œç”¢ç”Ÿï¼Œä¾‹å¦‚: Javaç‚º  HashMap ï¼ŒC#ç‚º  Dictionary ç­‰ç­‰ã€‚   protobuf   message Student {\n  string name = 1;\n  map<string, double> grades = 2;\n}\n   java     // å‰µå»ºä¸€å€‹å­¸ç”Ÿçš„ç‰©ä»¶\n   Student   student   =   Student.  newBuilder  ()\n     .  setName  (  \"John\"  )\n     .  putGrades  (  \"Math\"  ,   90.0  )\n     .  putGrades  (  \"Science\"  ,   80.0  )\n     .  build  ();\n   \n   // ç²å–å­¸ç”Ÿçš„æˆç¸¾\n   Map  <  String  ,   Double  > grades   =   student.  getGradesMap  ();\n  enum  èˆ‡æˆ‘å€‘ä¸€èˆ¬ä½¿ç”¨çš„åˆ—èˆ‰å·®ç•°ä¸å¤§ï¼Œä½†å®£å‘Šçš„enumç·¨è™Ÿå¿…é ˆæ˜¯å¾  0 é–‹å§‹ã€‚   protobuf   enum UserRole {\n  ADMIN = 0;\n  EDITOR = 1;\n  VIEWER = 2;\n}\n\nmessage User {\n  string name = 1;\n  repeated UserRole roles = 2;\n}\n   java     // å‰µå»ºä¸€å€‹ User ç‰©ä»¶\n   User   user   =   User.  newBuilder  ()\n       .  setName  (  \"John\"  )\n       .  addRoles  (UserRole.EDITOR)\n       .  addRoles  (UserRole.VIEWER)\n       .  build  ();\n   \n   // ç²å– User ç‰©ä»¶çš„å±¬æ€§å€¼\n   String   name   =   user.  getName  ();\n   List  <  UserRole  > roles   =   user.  getRolesList  ();\n  oneof  è·Ÿ  enum éå¸¸ç›¸ä¼¼ï¼Œä½†ä¸»è¦ç”¨æ–¼äº’æ–¥çš„å±¬æ€§ï¼Œä¸”ä¸èƒ½æ­é…  repeated é—œéµå­—ã€‚   protobuf   message Stock {\n    // Stock-specific data\n}\n\nmessage Currency {\n    // Currency-specific data\n}\n\nmessage ChangeNotification {\n  int32 id = 1;\n  oneof instrument {\n    Stock stock = 2;\n    Currency currency = 3;\n  }\n  oneof actionType {\n    int32 increase = 4;\n    int32 decrease = 5;\n  }\n}\n   java     // å‰µå»ºChangeNotificationç‰©ä»¶ï¼Œä¸¦è¨­ç½®idã€è‚¡ç¥¨å’Œå¢é‡ç­‰è³‡è¨Š\n   ChangeNotification   notification   =   ChangeNotification.  newBuilder  ()\n           .  setId  (  1  )\n           .  setStock  (Stock.  newBuilder  ().  build  ())\n           .  setIncrease  (  100  )\n           .  build  ();\n   \n   // å‰µå»ºCurrencyç‰©ä»¶ï¼Œä¸¦è¨­ç½®idã€è²¨å¹£å’Œæ¸›é‡ç­‰è³‡è¨Š\n   ChangeNotification   currencyNotification   =   ChangeNotification.  newBuilder  ()\n           .  setId  (  2  )\n           .  setCurrency  (Currency.  newBuilder  ().  build  ())\n           .  setDecrease  (  50  )\n           .  build  ();\n  Well known types     å¥—ä»¶åç¨±  ç”¨é€”    google.protobuf.Empty  é¡ä¼¼æ–¼voidæ²’æœ‰å›å‚³å€¼ï¼Œä½†åœ¨ProtoBufä¸­ä»éœ€è¦æ’°å¯«   google.protobuf.Timestamp  é¡ä¼¼æ–¼DateTimeæˆ–DateTimeOffset   google.protobuf.Duration  é¡ä¼¼æ–¼TimeSpan   google.protobuf.Any  é¡ä¼¼æ–¼objectï¼Œéœ€è¦é€é  Is å’Œ  Unpack<> ä¾†é€²è¡Œåˆ¤æ–·ç‰©ä»¶å‹åˆ¥å’Œè½‰å‹  ğŸ’¡ æ›´å¤šå½¢åˆ¥åƒè€ƒğŸ‘‰  åƒè€ƒ  gRPC Code generator  buf  Building a better way to work with Protocol Buffers  install buf     brew   install   bufbuild/buf/buf\n  install go tool     go   install   github.com/grpc-ecosystem/grpc-gateway/v2/protoc-gen-grpc-gateway@latest\n   \n   go   install   github.com/grpc-ecosystem/grpc-gateway/v2/protoc-gen-openapiv2@latest\n   \n   go   install   google.golang.org/protobuf/cmd/protoc-gen-go@latest\n   \n   go   install   google.golang.org/grpc/cmd/protoc-gen-go-grpc@latest\n   \n   go   install   github.com/envoyproxy/protoc-gen-validate@latest\n  Getting start     git   clone   https://github.com/bufbuild/buf-tour\n   cd   buf-tour/start/getting-started-with-buf-cli\n  bufä½¿ç”¨buf.yamlæ–‡ä»¶é…ç½®ï¼Œä½¿ç”¨æ­¤å‘½ä»¤å‰µå»ºæ‚¨è‡ªå·±çš„æ–‡ä»¶ï¼š     cd   proto\n   buf   mod   init\n  é‹è¡Œæ­¤å‘½ä»¤å¾Œï¼Œæ‚¨æœƒåœ¨ç•¶å‰ç›®éŒ„ä¸­çœ‹åˆ°ä¸€å€‹buf.yamlåŒ…å«ä»¥ä¸‹å…§å®¹çš„æ–‡ä»¶ï¼š\nbuf.yaml     version  :   v1\n   breaking  :\n     use  :\n       -   FILE\n   lint  :\n     use  :\n       -   DEFAULT\n  bufé»˜èªæƒ…æ³ä¸‹å‡å®šç•¶å‰ç›®éŒ„ä¸­æœ‰ä¸€å€‹buf.yamlï¼Œæˆ–è€…ä½¿ç”¨é»˜èªå€¼ä»£æ›¿æ–‡ä»¶buf.yaml ã€‚buf.yamlæˆ‘å€‘å»ºè­°å§‹çµ‚åœ¨æ–‡ä»¶å±¤æ¬¡çµæ§‹çš„æ ¹ç›®éŒ„ä¸‹æ”¾ç½®ä¸€å€‹æ–‡ä»¶.protoï¼Œå› ç‚ºé€™æ˜¯.proto è§£æå°å…¥è·¯å¾‘çš„æ–¹å¼ã€‚\nåœ¨æˆ‘å€‘ç¹¼çºŒä¹‹å‰ï¼Œè®“æˆ‘å€‘é©—è­‰ä¸€åˆ‡éƒ½è¨­ç½®æ­£ç¢ºï¼Œç„¶å¾Œæˆ‘å€‘å¯ä»¥æ§‹å»ºæˆ‘å€‘çš„æ¨¡å¡Šã€‚å¦‚æœæ²’æœ‰éŒ¯èª¤ï¼Œæˆ‘å€‘å°±çŸ¥é“æˆ‘å€‘å·²ç¶“æ­£ç¢ºè¨­ç½®äº†ä¸€å€‹ buf æ¨¡å¡Šï¼š     //   ~/.../buf-tour/start/getting-started-with-buf-cli/proto\n   buf   build   \n   echo   $?\n  ç”Ÿæˆä»£ç¢¼  ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç§»å›ç›®éŒ„getting-started-with-buf-cli     cd   ..\n   touch   buf.gen.yaml\n  æ›´æ–°æ‚¨çš„å…§å®¹buf.gen.yamlä»¥åŒ…å« Go å’Œ Connect-Go æ’ä»¶ï¼š     version  :   v1\n   managed  :\n     enabled  :   true\n     go_package_prefix  :\n       default  :   github.com/bufbuild/buf-tour/gen\n   plugins  :\n     -   plugin  :   buf.build/protocolbuffers/go\n       out  :   gen\n       opt  :   paths=source_relative\n     -   plugin  :   buf.build/bufbuild/connect-go\n       out  :   gen\n       opt  :   paths=source_relative\n     buf   generate   proto\n     getting-started-with-buf-cli\n   â”œâ”€â”€   buf.gen.yaml\n   â”œâ”€â”€   gen\n   â”‚     â”œâ”€â”€   google\n   â”‚     â”‚     â””â”€â”€   type\n   â”‚     â”‚         â””â”€â”€   datetime.pb.go\n   â”‚     â””â”€â”€   pet\n   â”‚         â””â”€â”€   v1\n   â”‚             â”œâ”€â”€   pet.pb.go\n   â”‚             â””â”€â”€   petv1connect\n   â”‚                 â””â”€â”€   pet.connect.go\n   â””â”€â”€   proto\n       â”œâ”€â”€   buf.yaml\n       â”œâ”€â”€   google\n       â”‚     â””â”€â”€   type\n       â”‚         â””â”€â”€   datetime.proto\n       â””â”€â”€   pet\n           â””â”€â”€   v1\n               â””â”€â”€   pet.proto\n  protoc  gRCP å‘¼å«çš„å››ç¨®é¡å‹  \n     Unary  é¡ä¼¼å‚³çµ±é¡å‹çš„RESTful APIï¼Œclientç™¼é€requestè€ŒServerå›æ‡‰Responseã€‚  Server Streaming  Clientç™¼é€ä¸€æ¬¡requestï¼Œè€Œserverå¯ä»¥å›å‚³å¤šæ¬¡è³‡æ–™ã€‚  Client Streaming  Clientç™¼é€å¤šæ¬¡è³‡æ–™ï¼Œç›´åˆ°å‘ŠçŸ¥serverè³‡æ–™å‚³å®Œå¾Œï¼Œserveråœ¨çµ¦äºˆResponseã€‚  Bi Dirctional Streaming  å…©é‚Šéƒ½ç”¨ä¸²æµçš„æ–¹å¼å‚³é€è³‡æ–™ã€‚  gRPCå·¥å…·  grpcurl  grpcui  postman  åƒè€ƒ   Google Protocol Buffers  html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}"},{"id":"content:2.workshop:liquibase.md","path":"/workshop/liquibase","dir":"workshop","title":"Liquibaseå¿«é€Ÿå…¥é–€","description":"","keywords":["å‰è¨€","å¸¸ç”¨çš„è³‡æ–™åº«ç‰ˆæœ¬æ›´æ–°æ–¹å¼ï¼Œæœ‰ä¸‹åˆ—å…©ç¨®","Database Version Control Tools","Liquibaseå¿«é€Ÿå…¥é–€","åƒè€ƒ"],"body":"  å‰è¨€  æ­¤ç« ç¯€ä¸»è¦æ˜¯è£œå……CI/CD 2.0çš„11.7ç« ç¯€çš„å…§å®¹ï¼Œé—œæ–¼ç‰ˆæœ¬æ§åˆ¶  å¸¸ç”¨çš„è³‡æ–™åº«ç‰ˆæœ¬æ›´æ–°æ–¹å¼ï¼Œæœ‰ä¸‹åˆ—å…©ç¨®    State-based tools   é€šéæ¯”è¼ƒå…©å€‹è³‡æ–™åº«ä¸­çš„çµæ§‹æ¨¡å‹è€Œç”¢ç”Ÿçš„è…³æœ¬(script)ï¼Œä½¿ç”¨æ­¤è…³æœ¬é€²è¡Œè³‡æ–™åº«å‡ç´šã€‚   Migration-based tools  å‰µå»ºé·ç§»ç”¨çš„è…³æœ¬ï¼Œæ›¿è³‡æ–™åº«å¾ä¸€å€‹ç‰ˆæœ¬é·ç§»åˆ°ä¸‹ä¸€å€‹ç‰ˆæœ¬ã€‚  State-based tools (åŸºæ–¼ç‹€æ…‹çš„ç‰ˆæœ¬æ§åˆ¶)  \n     åœ¨  state based æ¨¡å¼åº•ä¸‹ï¼Œæˆ‘å€‘åƒ…éœ€è¦ç¶­è­·è³‡æ–™åº«çš„ç›®æ¨™ç‹€æ…‹ï¼Œæ¯å€‹  è¡¨(Table) ã€  Stored Procedure ã€  View ã€  Trigger å°‡ä¿å­˜ç‚ºå–®ç¨çš„SQLæ–‡ä»¶ï¼Œé€™äº›SQLæ–‡ä»¶å°±æ˜¯è³‡æ–™åº«çœŸå¯¦çš„æ¨£è²Œã€‚è€Œå‡ç´šè³‡æ–™åº«æ‰€éœ€çš„è…³æœ¬æœƒç”±å·¥å…·è‡ªå‹•ç”Ÿæˆï¼Œå¾è€Œå¤§å¤§æ¸›è¼•ç¶­è­·æˆæœ¬ã€‚   å¯ä»¥æƒ³åƒæˆMySQLä¸­çš„mysqldumpæ‰€å»ºç«‹çš„DDLè¡¨çµæ§‹èªæ³•ã€‚  åœ¨  IaC(Infrastructure-as-Code) é ˜åŸŸä¸­ï¼ŒKubernetesã€HashiCorp Terraformç­‰æµè¡Œè»Ÿé«”çš†æ¡ç”¨é€™ç¨®æ–¹å¼ã€‚    ğŸ’¡ ç›®å‰æœ€æµè¡Œçš„åšæ³•æ˜¯æ¨è–¦æ­¤æ–¹å¼ï¼Œä½†æ­¤æ–¹æ³•æœƒæœ‰ç¼ºé»ï¼Œç”±æ–¼Scriptæ˜¯ç³»çµ±ç”¢ç”Ÿçš„ï¼Œå› æ­¤é‚„æ˜¯å¾—è‡ªè¡Œæ³¨æ„ç´°ç¯€ã€‚\n  Migration-based tools (åŸºæ–¼é·ç§»çš„ç‰ˆæœ¬æ§åˆ¶)  \n     åŸºæ–¼é·ç§»çš„æ–¹æ³•æ˜¯å°‡æ‰€æœ‰çš„é·ç§»è…³æœ¬å„²å­˜åœ¨Repositoryä¸­ã€‚æ¯ä¸€å€‹è…³æœ¬éƒ½åŒ…å«äº†ä¸€ç³»åˆ—çš„DDLèªå¥ï¼Œä¾‹å¦‚: CREATE/ALTER/DROP TABLEã€‚æœ€çµ‚çš„è³‡æ–™åº«ä¸­çš„è³‡æ–™è¡¨çµæ§‹æ˜¯ç”±é€™äº›è…³æœ¬æŒ‰ç…§é †åºçš„åŸ·è¡Œä¾†å®Œæˆçš„ã€‚  ç›¸æ¯”  state based æ¨¡å¼ï¼Œè©²æ¨¡å¼å¢åŠ äº†æˆæœ¬çš„  ç¶­è­· å’Œ  è¤‡é›œæ€§ ï¼Œä½†å®ƒèƒ½è®“æˆ‘å€‘æ›´ç›´æ¥åœ°æ§åˆ¶  é·ç§»éç¨‹ ï¼Œå¾è€Œèƒ½å¤ è™•ç†å¦‚è³‡æ–™åº«é·ç§»é€™æ¨£ä¸Šä¸‹æ–‡ç›¸é—œçš„å ´æ™¯ã€‚  Database Version Control Tools  æœ¬åœ–ç‰‡çš„ä¾†æºè³‡æ–™ï¼Œæ˜¯åƒè€ƒ  ç¶²å€  \n     Liquibaseå¿«é€Ÿå…¥é–€  å®‰è£CLI  Liquibaseç‰ˆæœ¬ï¼Œæˆ‘å€‘å°‡æ¡ç”¨4.15.0ç‰ˆæœ¬é€²è¡Œæ¼”ç¤ºï¼Œè¨˜å¾—å¿…é ˆè¦å®‰è£Java 8ä»¥ä¸Š(å®˜æ–¹å»ºè­°Java 11)ã€‚  Win10   å‰å¾€  å®˜ç¶²è¼‰é» æˆ–  Github Release ä¾ç…§å°æ‡‰æ‰€éœ€çš„ç‰ˆæœ¬é€²è¡Œå®‰è£ï¼Œæˆ‘å€‘ä½¿ç”¨zipæª”é€²è¡Œå®‰è£ \n   \n     \n   ä¸‹è¼‰å¾Œé€²è¡Œè§£å£“ç¸®æ”¾åˆ°æŒ‡å®šçš„è·¯å¾‘åº•ä¸‹ï¼Œå°‡liquibaseæ”¾ç½®åœ¨  D:\\tool\\liquibase-4.15.0 è·¯å¾‘ \n   \n     \n   è¨­å®šç³»çµ±ç’°å¢ƒè®Šæ•¸ï¼Œæ·»åŠ   D:\\tool\\liquibase-4.15.0 è·¯å¾‘  æ¸¬è©¦æŒ‡ä»¤ï¼Œé‡æ–°é–‹å•ŸTerminalï¼Œä¸¦è¼¸å…¥æŒ‡ä»¤liquibase -v \n   \n     \n   Docker     # ä¸‹è¼‰image liquibase 4.15.0\n   docker   pull   liquibase/liquibase:4.15.0\n   \n   # æŸ¥çœ‹liquibaseç‰ˆæœ¬ï¼Œæ¸¬è©¦æ˜¯å¦å®‰è£æˆå·¥\n   docker   run   --rm   liquibase/liquibase:4.15.0   -v\n  åˆå§‹åŒ–liquibase     # åˆå§‹åŒ–å°ˆæ¡ˆ\n   liquibase   init   project\n   \n   # æŸ¥çœ‹åˆå§‹åŒ–å¾Œçš„çµæœ\n   ls\n   ## example-changelog.sql  liquibase.properties\n  å®‰è£Package Manager  Liquibaseæä¾›é è¨­Driveråœ¨  internal\\lib åº•ä¸‹ï¼Œä½†æŸäº›é©åˆçš„è³‡æ–™åº«Driveré‚„æ˜¯æ²’æœ‰æä¾›ï¼Œå› æ­¤æˆ‘å€‘å¯ä»¥ä½¿ç”¨  Liquibase Package Manager ä¾†å¹«åŠ©æˆ‘å€‘å¿«é€Ÿçš„æœå°‹å¥—ä»¶ä¾†å®Œæˆã€‚   æ›´å¤šçš„Liquibase Driverï¼Œåƒè€ƒ  ç¶²å€  å®‰è£   å‰å¾€  Github Release é€²è¡Œä¸‹è¼‰ï¼Œé»é¸å°æ‡‰çš„OSé€²è¡Œä¸‹è¼‰ï¼Œé€™é‚Šæ¡ç”¨Win10é€²è¡Œèˆ‰ä¾‹ã€‚  ä¸‹è¼‰å®Œæˆå¾Œè§£å£“ç¸®ï¼Œè¨­å®šç’°å¢ƒè®Šæ•¸ â†’ ç³»çµ±è®Šæ•¸ â†’ Path â†’ ç·¨è¼¯ç’°å¢ƒè®Šæ•¸ â†’ åŠ ä¸Š  D:\\tool\\lpm-0.1.7-windows  â†’ é‡å•Ÿçµ‚ç«¯æ©Ÿ(Terminal)  å¸¸ç”¨æŒ‡ä»¤     # æŸ¥çœ‹ç›®å‰å¯ä»¥ä½¿ç”¨çš„lib\n   lpm   update\n   \n   # æŸ¥çœ‹å¥—ä»¶ç‰ˆæœ¬\n   lpm   -v\n   \n   # æœå°‹å¥—ä»¶mongodbåç¨±\n   lpm   search   mongodb\n   \n   # å°‡mongodbåŠ å…¥åˆ°å¥—ä»¶ä¸­\n   lpm   add   -g   mongodb\n   lpm   add   -g   liquibase-mongodb\n   \n   # æŸ¥çœ‹ç›®å‰åŠ å…¥çš„å¥—ä»¶\n   lpm   list\n  ğŸ’¡ æŒ‡ä»¤  lpm add çš„åƒæ•¸  -g èªªæ˜     ä½¿ç”¨globalæœƒå°‡å¥—ä»¶å®‰è£åˆ°libè³‡æ–™å¤¾ä¸­ï¼Œæ­¤è³‡æ–™å¤¾ç‚ºliquibaseé è¨­çš„libè³‡æ–™å¤¾  æ²’ä½¿ç”¨globalå‰‡æœƒå®‰è£åˆ°liquibase_libsåº•ä¸‹ï¼Œå¿…é ˆå†é¡å¤–åŸ·è¡Œ  JAVA_OPTS ä¾†è¨­å®šJavaç’°å¢ƒ  åŸ·è¡Œæ–¹å¼  ä¸€èˆ¬liquibaseçš„åŸ·è¡Œæœ‰å…©ç¨®æ–¹å¼ï¼Œåˆ†åˆ¥ç‚º   å®Œå…¨çš„CLIæŒ‡ä»¤ï¼Œä¸éœ€è¦é€é  liquibase.properties è¨­å®š  ä½¿ç”¨CLIæŒ‡ä»¤æ­é…  liquibase.properties è¨­å®šæª”  å¸¸ç”¨å‘½ä»¤     \n   # åˆå§‹åŒ–liquibase\n   liquibase   init   project\n   \n   # ç”¢ç”Ÿchangelogä¸¦æŠŠlogç­‰ç´šdebugå¯«å…¥åˆ°error.log\n   liquibase   --log-level=debug   --logFile=error.log   generateChangeLog\n   \n   # liquibaseæ›´æ–°è³‡æ–™åº«\n   liquibase   update\n   \n   # liquibaseæ›´æ–°è³‡æ–™åº«ï¼Œä¸¦ä¸”æŒ‡å®šæŸå€‹shopping_cart\n   liquibase   --labels=  \"feature/shopping_cart\"   update\n   \n   # liquibaseæ›´æ–°è³‡æ–™åº«ï¼ŒæŒ‡å®šdevç’°å¢ƒä¸Šç‰ˆæœ¬\n   liquibase   --log-level=debug   --contexts=  \"dev\"   update\n   \n   # æ›¿ç›®å‰æœ€å¾Œä¸€ç­†DATABASECHANGELOGï¼Œé€²è¡Œtagä¸Šç‰ˆæœ¬\n   liquibase   tag   version_1.3\n   \n   # å°‡æ‰€æœ‰æŒ‡å®šçš„è³‡æ–™åº«ä¸­çš„æ‰€æœ‰è³‡æ–™è¡¨ä¸Ÿæ£„ (åŒ…å«éliquibaseå‰µå»º)\n   liquibase   drop-all\n   \n   # å¾€å›é€€å›ä¸€å€‹changesetç‰ˆæœ¬\n   liquibase   rollbackCount   1\n   \n   # é€€å›åˆ°version_1.3çš„tagç‰ˆæœ¬\n   liquibase   rollback   version_1.3\n   \n   # æŸ¥çœ‹changesetçš„åˆ—è¡¨\n   liquibase   status   --verbose\n   \n   # é©—è­‰dbchangelog.xmlçš„æ ¼å¼æ˜¯å¦æ­£ç¢º\n   liquibase   validate\n  å¾ç¾æœ‰è³‡æ–™åº«ç”¢ç”ŸChangeLog     # å¾ç¾æœ‰è³‡æ–™åº«ç”¢ç”ŸChangeLog\n   liquibase   --driver=com.microsoft.sqlserver.jdbc.SQLServerDriver   \\\n     --classpath=D:/tool/liquibase-4.15.0/internal/lib/mssql-jdbc.jar   \\\n     --url=jdbc:sqlserver://127.0.0.1:1433  ;database  =  Test_Liquibase_Demo  ;trustServerCertificate  =  true  ;   \\\n     --changeLogFile  =  dbchangelog-test.xml   \\\n     --username  =  test   \\\n     --password  =  12345678   \\\n     generateChangeLog\n   \n   # æŸ¥çœ‹ç”¢ç”Ÿçš„çµæœ\n   ls\n   ##dbchangelog-test.xml\n  Migration-based  å‚³çµ±çš„Migrationæ–¹å¼ï¼Œè—‰ç”±Scriptç‰ˆæœ¬ä¾†é€²è¡Œæ§åˆ¶ã€‚  å‰ç½®ä½œæ¥­  è«‹å…ˆåœ¨SQL Sererä¸­å»ºç«‹  Test_Liquibase_Demo è³‡æ–™åº«ã€‚  æ–°å¢è³‡æ–™   ä¿®æ”¹  liquibase.properties     classpath=D:/tool/liquibase-4.15.0/internal/lib/mssql-jdbc.jar\n   driver=com.microsoft.sqlserver.jdbc.SQLServerDriver\n   url=jdbc:sqlserver://127.0.0.1:1433;database=Test_Liquibase_Demo;trustServerCertificate=true;\n   username=test\n   password=12345678\n   changeLogFile=dbchangelog.xml\n   liquibase.hub.mode=off\n  åˆå§‹åŒ–ChangeLog(ç”¢ç”Ÿdbchangelog.xml)     # åˆå§‹åŒ–ï¼Œå°‡éŒ¯èª¤è¨Šæ¯ï¼Œå¡å…¥åˆ°error.logä¸­\n   liquibase   --log-level=debug   --logFile=error.log   generateChangeLog\n  æ–°å¢  DbChangeLog_V1.0.sql     --liquibase formatted sql\n   --changeset changemyminds:00001 labels:first-time\n   --comment Create Users table\n   CREATE   TABLE   Users   (\n       -- ä½¿ç”¨è€…ç·¨è™Ÿ\n       ID   INTEGER   NOT NULL   IDENTITY   NOT   FOR   REPLICATION,\n       -- ä½¿ç”¨è€…å§“å\n       Username   NVARCHAR   (  50  )   NOT NULL  ,\n       -- ä½¿ç”¨è€…å¯†ç¢¼\n       Password   NVARCHAR   (  50  )   NOT NULL  ,\n       -- ä½¿ç”¨è€…ç‹€æ…‹\n       Status   INTEGER   NOT NULL  ,\n   );\n   --rollback DELETE FROM Users;\n   \n   --changeset changemyminds:00002 labels:first-time\n   --comment Insert default users\n   INSERT INTO\n       Users (Username,   Password  ,   Status  )\n   VALUES\n       (  'Darren'  ,   '11111111'  ,   1  ),\n       (  'spyua'  ,   '11111111'  ,   1  ),\n       (  'Jimpo'  ,   '11111111'  ,   1  ),\n       (  'frank'  ,   '11111111'  ,   1  );\n   --rollback DELETE FROM Users WHERE Username='Darren' OR Username='spyua OR Username='Jimpo OR Username='frank'\n  æ–°å¢  DbChangeLog_V1.1.sql     --liquibase formatted sql\n   --changeset changemyminds:00003 labels:feature/shopping_cart\n   --comment Create table SHOES\n   CREATE   TABLE   SHOES  (\n    [ID] [bigint]   IDENTITY  (  1  ,   1  )   NOT NULL   PRIMARY KEY  ,\n    Brand   VARCHAR  (  50  ),\n    Size   bigint  , \n   );\n   --rollback DROP TABLE SHOES\n   \n   --changeset changemyminds:00004 labels:feature/shopping_cart\n   --comment Insert shoes record\n   INSERT INTO   SHOES(Brand,   Size  )   VALUES  (  'Addias'  ,   100  );\n   INSERT INTO   SHOES(Brand,   Size  )   VALUES  (  'NewBlance'  ,   400  );\n   --rollback DELETE FROM SHOES WHERE Brand='Addias' OR Brand='NewBlance'\n  ä¿®æ”¹  dbchangelog.xml     <?  xml   version  =  \"1.1\"   encoding  =  \"UTF-8\"   standalone  =  \"no\"  ?>\n   <  databaseChangeLog   xmlns  =  \"http://www.liquibase.org/xml/ns/dbchangelog\"   xmlns:ext  =  \"http://www.liquibase.org/xml/ns/dbchangelog-ext\"       xmlns:pro  =  \"http://www.liquibase.org/xml/ns/pro\"   xmlns:xsi  =  \"http://www.w3.org/2001/XMLSchema-instance\"   xsi:schemaLocation  =  \"http://www.    liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/pro     http://www.liquibase.org/xml/ns/pro/liquibase-pro-latest.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/    dbchangelog/dbchangelog-latest.xsd\"  >\n       <  include   file  =  \"DbChangeLog_V1.0.sql\"   />\n       <  include   file  =  \"DbChangeLog_V1.1.sql\"   />\n       <!-- æ–°å¢Tagç‰ˆæœ¬ -->\n       <  changeSet   id  =  \"tag_1.2\"   author  =  \"changemyminds\"  >\n           <  tagDatabase   tag  =  \"version_1.2\"   />\n       </  changeSet  >\n   \n   </  databaseChangeLog  >\n  å¸¸è¦‹æ“ä½œ     # åŸ·è¡Œfirst-timeæ¨™ç±¤ï¼Œé€²è¡Œmigration\n   liquibase   --log-level=debug   --labels=  \"first-time\"   update\n   \n   # åŸ·è¡Œå…¨éƒ¨çš„migration\n   liquibase   --log-level=debug   update\n   \n   # åŸ·è¡Œrollback\n   liquibase   rollbackCount   1\n   \n   # å°‡æ‰€æœ‰æŒ‡å®šçš„è³‡æ–™åº«ä¸­çš„æ‰€æœ‰è³‡æ–™è¡¨ä¸Ÿæ£„ (åŒ…å«éliquibaseå‰µå»º)\n   liquibase   drop-all\n  State-based  æŸäº›æƒ…æ³ä¸‹æˆ‘å€‘æƒ³è¦æ¯”è¼ƒDatabaseçš„ç‰ˆæœ¬ï¼Œä¾‹å¦‚: æ¸¬è©¦æ©Ÿçš„  Schema å’Œæ­£å¼æ©Ÿçš„  Schema ä¸­çš„å·®ç•°ï¼Œç„¶å¾Œè‡ªå‹•ç”¢ç”Ÿæ­£å¼æ©Ÿå¯ä»¥ä½¿ç”¨SQL Scriptä¾†è®“æˆ‘é€²è¡Œæ“ä½œã€‚  æˆ‘å€‘éœ€è¦åˆ©ç”¨  diff ã€  diffChangeLog ã€  updateSQL ã€  futureRollbackSQL ä¾†å®Œæˆã€‚   ä½¿ç”¨  State-based æ–¹å¼ï¼Œç”±æ–¼ç”¢ç”Ÿçš„è…³æœ¬(script)æ˜¯ç”±  Liquibase é€²è¡Œç”¢ç”Ÿçš„ï¼Œå› æ­¤å¯èƒ½æœƒæœ‰å·®ç•°ï¼Œå»ºè­°é‚„æ˜¯è¦æª¢æŸ¥ï¼Œè‹¥æ²’æœ‰å®‰å…¨æ„Ÿçš„è©±ï¼Œå»ºè­°é‚„æ˜¯ä½¿ç”¨  Migration-based æ¯”è¼ƒå¯ä»¥è‡ªå·±æŒæ§ã€‚  å‰ç½®ä½œæ¥­  è«‹å…ˆåœ¨SQL Sererä¸­å»ºç«‹  Test_Liquibase_Demo_Prod è³‡æ–™åº«ã€‚  åŸ·è¡Œæ“ä½œ   æ–°å¢  liquibase.properties     # é€£ç·šçš„é©…å‹•driver\n   classpath=D:/tool/liquibase-4.15.0/internal/lib/mssql-jdbc.jar\n   driver=com.microsoft.sqlserver.jdbc.SQLServerDriver\n   \n   # ç”¢ç”Ÿçš„æª”æ¡ˆ\n   changeLogFile=dbchangelog.xml\n   \n   # é—œé–‰hub\n   liquibase.hub.mode=off\n   \n   # æ­£å¼æ©Ÿè³‡æ–™åº«\n   url=jdbc:sqlserver://127.0.0.1:1433;databaseName=Test_Liquibase_Demo_Prod;trustServerCertificate=true;\n   username=test\n   password=12345678\n     \n   # åƒè€ƒçš„æ¸¬è©¦æ©Ÿè³‡æ–™åº«\n   referenceUrl=jdbc:sqlserver://127.0.0.1:1433;databaseName=Test_Liquibase_Demo;trustServerCertificate=true;\n   referenceUsername=test\n   referencePassword=12345678\n  åŸ·è¡ŒæŒ‡ä»¤     # å°è³‡æ–™åº«é€²è¡Œå…©è€…å·®ç•°çš„æ¯”è¼ƒï¼Œä¸¦å°‡çµæœå¯«å…¥åˆ°æª”æ¡ˆä¸­\n   liquibase   diff   --outputFile=diff_between_DEV_PROD.log\n   \n   # å°è³‡æ–™åº«é€²è¡Œå…©è€…å·®ç•°çš„æ¯”è¼ƒï¼Œä¸¦ä¸”ç”¢ç”Ÿchangelog\n   liquibase   diffChangeLog\n   \n   # å‰µå»ºå·®ç•°çš„SQL\n   liquibase   updateSQL   >   update.sql\n   \n   # ä¹Ÿå¯ä»¥ç”¢ç”Ÿrollbackçš„sql\n   liquibase   futureRollbackSQL   >   rollback.sql\n  æ›´æ–°æ­£å¼æ©Ÿè³‡æ–™åº«     liquibase   update\n  åƒè€ƒ    liquibase   version-control-tools  html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}"},{"id":"content:2.workshop:redis.md","path":"/workshop/redis","dir":"workshop","title":"Rediså¿«é€Ÿå…¥é–€","description":"","keywords":["å‰è¨€","å®‰è£","å¸¸ç”¨çš„è³‡æ–™çµæ§‹","å…¶ä»–å¸¸ç”¨åŠŸèƒ½","å¸¸è¦‹çš„ä¸‰å¤§å•é¡Œ","åƒè€ƒ"],"body":"  å‰è¨€  æ­¤ç« ç¯€ä¸å±¬æ–¼  è³‡æ–™å¯†é›†å‹æ‡‰ç”¨ç³»çµ±è¨­è¨ˆ æ›¸ä¸­å…§å®¹ï¼Œé¡å¤–æŒªå‡ºçš„ä¸€å€‹æ•™å­¸ç« ç¯€ã€‚  é€™é‚Šä¸»è¦æ˜¯è£œå……å¿«å–(Cache) Redis è³‡æ–™åº«çš„ä½¿ç”¨æ–¹å¼ä»¥åŠæ“ä½œã€‚  å®‰è£  ç‰ˆæœ¬è™Ÿé¸æ“‡   å¥‡æ•¸ï¼š 2.7ã€2.9ã€3.1ï¼Œç‚º  ä¸ç©©å®šç‰ˆæœ¬  å¶æ•¸ï¼š 2.6ã€2.8ã€3.0ï¼Œç‚º  ç©©å®šç‰ˆæœ¬  Linux å®‰è£  åŸå§‹ç¢¼å®‰è£     # ä¸‹è¼‰æª”æ¡ˆ\n   curl   -LO   \"https://download.redis.io/releases/redis-6.2.7.tar.gz\"\n   \n   # è§£å£“ç¸®\n   tar   -xvf   redis-6.2.7.tar.gz\n   \n   # ç§»é™¤å®‰è£æª”\n   rm   redis-6.2.7.tar.gz\n   \n   # å‰å¾€è§£å£“ç¸®ç›®éŒ„\n   cd   redis-6.2.7\n   \n   # ç·¨è­¯å°ˆæ¡ˆ (é¡ä¼¼ç·¨è­¯äº†class)\n   make\n   \n   # å°‡binaryæª”å®‰è£åˆ°æŸå€‹ç›®éŒ„åº•ä¸‹\n   make   install   PREFIX=/root/redis-6.2.7/redis\n   \n   # æŸ¥çœ‹makeçš„å®‰è£ç›®éŒ„\n   $   ls   /root/redis-6.2.7/redis/bin/\n   redis-benchmark    redis-check-aof    redis-check-rdb    redis-cli    redis-sentinel    redis-server\n  ğŸ’¡ å¦‚æœåŸ·è¡Œ make æŒ‡ä»¤å ±éŒ¯èª¤ï¼Œå‰‡éœ€è¦åŸ·è¡Œä¸‹åˆ—æŒ‡ä»¤ï¼Œé€²è¡Œå®‰è£   Ubuntun     # è«‹å…ˆç¢ºèªgccæ˜¯å¦å®‰è£\n   gcc   -v\n   \n   # æ›´æ–°aptå¥—ä»¶\n   sudo   apt-get   update\n   \n   # å®‰è£aptå¥—ä»¶\n   sudo   apt   -y   install   gcc   automake   autoconf   libtool   make\n  CentOS     \n   # è«‹å…ˆç¢ºèªgccæ˜¯å¦å®‰è£\n   gcc   -v\n   \n   # æ›´æ–°yumå¥—ä»¶\n   sudo   yum   update\n   \n   # å®‰è£yumå¥—ä»¶\n   sudo   yum   -y   install   gcc   automake   autoconf   libtool   make\n  å®‰è£ç›®éŒ„åº•ä¸‹çš„æª”æ¡ˆä»‹ç´¹     å¯åŸ·è¡Œçš„æª”æ¡ˆ  åŠŸèƒ½ç”¨é€”    redis-server  å•Ÿå‹• redis ä¼ºæœå™¨   redis-cli  redis å®¢æˆ¶ç«¯(client)æ“ä½œ   redis-benchmark  æ€§èƒ½æ¸¬è©¦å·¥å…·ï¼Œå¯ä»¥åœ¨æœ¬æ©Ÿé›»è…¦é‹è¡Œï¼Œçœ‹çœ‹æœ¬æ©Ÿæ•ˆèƒ½å¦‚ä½• (æœå‹™å•Ÿå‹•èµ·ä¾†å¾ŒåŸ·è¡Œ)   redis-check-aof  AOF æŒä¹…åŒ–æ–‡ä»¶æª¢æ¸¬å’Œä¿®å¾©å·¥å…·   redis-check-rdb  RDB æŒä¹…åŒ–æ–‡ä»¶æª¢æ¸¬å’Œä¿®å¾©å·¥å…·   redis-sentinel  å•Ÿå‹•å“¨å…µæ¨¡å¼ (Redis Cluster ä½¿ç”¨)  å…¶ä»–å®‰è£   apt å®‰è£     # lsb: Linux Standard Baseç¸®å¯«ï¼Œç”¨ä¾†é¡¯ç¤ºLSBå’Œç‰¹å®šç‰ˆæœ¬çš„ç›¸é—œè¨Šæ¯\n   # æŸäº›æœ€å°ç’°å¢ƒçš„æƒ…æ³ä¸‹éœ€è¦å®‰è£ï¼Œä¾‹å¦‚åœ¨Docker Containerå…§éƒ¨\n   sudo   apt   install   lsb-release\n   \n   # å°‡repositoryåŠ å…¥åˆ°apt indexä¸­ï¼Œå¾ŒçºŒé€²è¡Œæ›´æ–°å’Œå®‰è£\n   curl   -fsSL   https://packages.redis.io/gpg   |   sudo   gpg   --dearmor   -o   /usr/share/keyrings/redis-archive-keyring.gpg\n   echo   \"deb [signed-by=/usr/share/keyrings/redis-archive-keyring.gpg] https://packages.redis.io/deb $(  lsb_release   -cs  ) main\"   |   sudo   tee   /etc/apt/sources.list.d/redis.list\n   \n   # æ›´æ–°apt-get\n   sudo   apt-get   update\n   \n   # å®‰è£redis\n   sudo   apt-get   install   redis\n   snap å®‰è£     # æŸ¥è©¢redisåç¨±\n   snap   find   redis\n   \n   # æŸ¥çœ‹redisçš„è³‡è¨Š\n   snap   info   redis\n  Windows å¯¦é«”å®‰è£  Redis ä¸»è¦æ”¯æ´åœ¨ Linux ç’°å¢ƒåº•ä¸‹ï¼Œå› æ­¤åœ¨ Windows ç’°å¢ƒåº•ä¸‹æ”¯æ´æ€§å¾ˆå·®ã€‚\nç›®å‰æœ‰å…©å€‹éå®˜æ–¹çš„ä½¿ç”¨è¼‰é»å¯ä»¥åƒè€ƒã€‚    ç¶²å‹ç‰ˆæœ¬ - 5.0.14.1 ï¼Œç›®å‰é‚„æœ‰åœ¨ç¶­è­·   å¾®è»Ÿç‰ˆæœ¬ - 3.0.504 ï¼Œç›®å‰å·²ç¶“ä¸åœ¨ç¶­è­·ã€‚  Docker å®‰è£   Redis Server     docker   run   --name   redis   -d   -p   6379  :6379   redis:6.2.4-alpine\n  Redis CLI     # é€™é‚Šçš„IP 192.168.23.192ï¼Œæ›¿æ›ç‚ºä¸»æ©Ÿçš„IP\n   docker   run   -it   --rm   redis   redis-cli   -h   192.168  .23.192   -p   6379\n  æ›´å¤š Docker ä½¿ç”¨æ–¹å¼åƒè€ƒ  Redis Official  å¸¸ç”¨æ“ä½œå·¥å…·    RedisInsight  redis-cli  å®˜æ–¹æ¨è–¦  RedisInsight ä¸€æ¬¾ Web base çš„å·¥å…·ï¼Œå€‹äººç¿’æ…£ä½¿ç”¨  redis-cli å’Œ  RedisInsight ä¸€èµ·ä½¿ç”¨ã€‚  ç”±æ–¼å¤§å®¶ä¸€èµ·ä½¿ç”¨ RedisInsightï¼Œç‚ºäº†æ–¹ä¾¿æŸ¥çœ‹ client ç«¯æ˜¯èª°ï¼Œé€™é‚Šæˆ‘å€‘è¨­å®š Redis Client çš„ä½¿ç”¨è€…åç¨±     # è¨­å®šclientçš„åç¨±ï¼Œå°‡darrenæ›¿æ›æˆä½ è‡ªå·±çš„åå­\n   CLIENT   SETNAME   darren\n   \n   # æŸ¥çœ‹ç›®å‰æœ‰å“ªäº›é€£ç·šçš„client\n   CLIENT   LIST\n  å¸¸ç”¨çš„è³‡æ–™çµæ§‹  Strings    String æ˜¯  Redis æœ€åŸºæœ¬çš„é¡å‹ï¼Œå¯ä»¥ç†è§£æˆèˆ‡  Memcached ä¸€æ¨¡ä¸€æ¨£çš„é¡å‹ï¼Œä¸€å€‹  Key å°æ‡‰ä¸€å€‹  Value   String é¡å‹æ˜¯äºŒé€²åˆ¶(Binary)å®‰å…¨çš„ã€‚æ„å‘³è‘—  Redis çš„  String å¯ä»¥åŒ…å«è³‡æ–™ã€‚æ¯”å¦‚ jpg åœ–ç‰‡æˆ–è€…åºåˆ—åŒ–çš„ç‰©ä»¶   String é¡å‹æ˜¯  Redis æœ€åŸºæœ¬çš„è³‡æ–™é¡å‹ï¼Œä¸€å€‹ Redis ä¸­ Value æœ€å¤šå¯ä»¥æ˜¯ 512M  åŸå­æ€§\n   æ‰€è¬‚åŸå­æ€§æ“ä½œï¼Œæ˜¯æŒ‡ä¸æœƒè¢«å…¶ä»–åŸ·è¡Œç·’çš„å‘¼å«æ©Ÿåˆ¶æ‰“æ–·çš„æ“ä½œï¼Œé€™ç¨®æ“ä½œä¸€ä½†é–‹å§‹ï¼Œå°±ä¸€ç›´é‹è¡Œåˆ°çµæŸï¼Œä¸­é–“ä¸æœƒæœ‰ä»»ä½•çš„ context switch (åˆ‡æ›åˆ°å¦å¤–ä¸€å€‹åŸ·è¡Œç·’)\n   åœ¨  å–®åŸ·è¡Œç·’ ä¸­ï¼Œèƒ½å¤ åœ¨å–®æ¢æŒ‡ä»¤ä¸­å®Œæˆçš„æ“ä½œéƒ½å¯ä»¥èªç‚ºæ˜¯â€åŸå­æ“ä½œâ€ï¼Œå› ç‚ºä¸­æ–·åªèƒ½ç™¼ç”Ÿæ–¼æŒ‡ä»¤ä¹‹é–“  åœ¨  å¤šåŸ·è¡Œç·’ ä¸­ï¼Œä¸èƒ½è¢«å…¶å®ƒåŸ·è¡Œç·’æ‰“æ–·çš„æ“ä½œï¼Œå°±å«â€åŸå­æ“ä½œâ€  å¸¸ç”¨æŒ‡ä»¤  set / get / append / strlen / setnx     # å¢åŠ key: k1, value: v1\n   >   set k1 v1\n   \n   # æ›´æ–°key: k1, value: v11\n   >   set k1 v11\n   \n   # å–å¾—valueæ•¸å€¼\n   >   get k1\n   \"v11\"\n   \n   # å¾å°¾éƒ¨å¾Œç›¸åŠ ï¼Œå›å‚³ç›®å‰valueæ•´é«”çš„é•·åº¦\n   >   append k1 __\n   (  integer  ) 5\n   \n   # å–å¾—appendå¾Œçš„é•·åº¦\n   >   get k1\n   \"v11__\"\n   \n   # å–å¾—k1ä¸­çš„valueé•·åº¦\n   >   strlen k1\n   (  integer  ) 5\n   \n   # åªæœ‰keyä¸å­˜åœ¨æ™‚ï¼Œæ‰æœƒè¨­ç½®keyçš„å€¼\n   >   setnx k1 k0000\n   (  integer  ) 0\n  incr / decr / incrby / decrby     # å¢åŠ key: k1, value: v1\n   >   set k1 v1\n   \n   # incråªæ”¯æ´integer\n   >   incr k1\n   (  error  ) ERR value is not an integer or out of range\n   \n   # æ›¿ä¸å­˜åœ¨çš„k2é€²è¡Œ\"æ•¸å­—å­—ä¸²\"å€¼åŠ 1\n   >   incr k2\n   (  integer  ) 1\n   \n   # æ›¿å­˜åœ¨çš„k2é€²è¡Œ\"æ•¸å­—å­—ä¸²\"åŠ 1\n   >   incr k2\n   (  integer  ) 2\n   \n   # æ›¿å­˜åœ¨çš„k2é€²è¡Œ\"æ•¸å­—å­—ä¸²\"æ¸›1\n   >   decr k2\n   (  integer  ) 1\n   \n   # æ›¿å­˜åœ¨çš„k2é€²è¡Œ\"æ•¸å­—å­—ä¸²\"æ¸›1\n   >   decr k2\n   (  integer  ) 0\n   \n   # æ›¿å­˜åœ¨çš„k2é€²è¡Œ\"æ•¸å­—å­—ä¸²\"æ¸›1\n   >   decr k2\n   (  integer  ) -1\n   \n   # å–å¾—k2æ•¸å€¼ï¼Œè¨˜å¾—ä»–æ˜¯\"æ•¸å­—å­—ä¸²\"\n   >   get k2\n   \"-1\"\n   \n   # ä¸€æ¬¡åŠ ä¸Š100çš„æ•¸å€¼\n   >   incrby k2 100\n   (  integer  ) 99\n   \n   # ä¸€æ¬¡æ¸›ä¸Š100çš„æ•¸å€¼\n   >   decrby k2 100\n   (  integer  ) -1\n  setex / getset     set   k1   v1\n   \n   # è¨­å®šéæœŸæ™‚é–“\n   expire   k1   1000\n   \n   # æ›´æ–°æ•¸å€¼\n   set   k1   v2\n   \n   # æŸ¥è©¢æ•¸å€¼\n   >   ttl k1\n   (  integer  ) -1\n   \n   # å°‡k1è¨­å®šç‚º100ï¼Œä¸”æ•¸å€¼ç‚ºv2 (é‡æ–°è¨­å®šå‰‡æ™‚é–“é‡æ–°è¨ˆç®—)ï¼Œä¸‹é¢å…©ç¨®æ–¹å¼çš†å¯ä»¥\n   >   setex k1 100 v2\n   >   set k1 v2 EX 100\n   \n   # å‚³å…¥æ–°å¢çš„v3åƒæ•¸ï¼ŒæŠŠèˆŠçš„v2å‚³å› (èˆ‡Javaä¸­çš„HashMapçš„PutåŠŸèƒ½ç›¸åŒ)\n   >   getset k1 v3\n   \"v2\"\n  ä½¿ç”¨å ´æ™¯   å¿«å–(Cache)è³‡æ–™  è¨ˆæ•¸å™¨ã€‚\n   ç”¨ä¾†çµ±è¨ˆæ–‡ç« ç€è¦½æ¬¡æ•¸  æŸäº›å•†å“çš„é»æ“Šæ•¸é‡ç­‰ç­‰  åˆ†æ•£å¼å…±äº« Session  è¨­å®šéæœŸ(Expire)ä¾†å®Œæˆæ™‚æ•ˆæ€§çš„è³‡æ–™\n   æ‰‹æ©Ÿé©—è­‰ç¢¼  ä½¿ç”¨è€…ç™»å…¥ç¢¼  åˆ†æ•£å¼é–  Hash   Redis hash æ˜¯ä¸€å€‹éµå€¼é›†åˆ  Redis hash æ˜¯ä¸€å€‹ string é¡å‹çš„  field å’Œ  value çš„æ˜ å°„è¡¨ï¼Œhash ç‰¹åˆ¥é©åˆç”¨æ–¼  å„²å­˜ç‰©ä»¶  é¡ä¼¼ Java ä¸­çš„  Map<String, Object> ï¼Œ  C# ä¸­çš„  Dictionary<string, object>  å¸¸ç”¨æŒ‡ä»¤  hset / hget / hmset     # è¨­å®šå‡è³‡æ–™\n   >   hset h1 familyName Chang\n   >   hset h1 givenName EnShuo\n   >   hset h1 age 28\n   \n   # å–å¾—hashä¸­çš„æ•¸å€¼\n   >   hget h1 familyName\n   \"Chang\"\n   >   hget h1 givenName\n   \"EnShuo\"\n   >   hget h1 test\n   (  nil  )\n   \n   # ä½¿ç”¨æ‰¹æ¬¡ä¾†é€²è¡Œè¨­å®š\n   >   hmset h2 familyName Chang givenName EnShuo age 28\n   OK\n  hexists / hkeys / hvals / hincrby / hsetnx     # è¨­å®šå‡è³‡æ–™\n   >   hset h1 familyName Chang givenName EnShuo age 28\n   \n   # æŸ¥çœ‹h1ä¸­æ˜¯å¦å­˜åœ¨field\n   >   hexists h1 age\n   (  integer  ) 1\n   >   hexists h1 sex\n   (  integer  ) 0\n   \n   # å–å¾—æ‰€æœ‰çš„h1çš„field\n   >   hkeys h1\n   1  )   \"familyName\"\n   2  )   \"givenName\"\n   3  )   \"age\"\n   \n   # å–å¾—æ‰€æœ‰çš„h1ä¸­çš„value\n   >   hvals h1\n   1  )   \"Chang\"\n   2  )   \"EnShuo\"\n   3  )   \"28\"\n   \n   # æ›¿ageåŠ ä¸Š3\n   >   hincrby h1 age 3\n   (  integer  ) 31\n   \n   # ç•¶ageå­˜åœ¨æ™‚ï¼Œæ“ä½œå¤±æ•—\n   >   hsetnx h1 age 100\n   (  integer  ) 0\n   \n   # ç•¶sexä¸å­˜åœ¨æ™‚ï¼Œå‰‡æ–°å¢\n   >   hsetnx h1 sex man\n   (  integer  ) 1\n  ä½¿ç”¨å ´æ™¯   å„²å­˜ä½¿ç”¨è€…è³‡è¨Šï¼Œä¾‹å¦‚ä½¿ç”¨è€…åç¨±ã€å¯†ç¢¼ã€é›»å­éƒµä»¶åœ°å€ã€æ‰‹æ©Ÿè™Ÿç¢¼ç­‰ã€‚  å„²å­˜å•†å“è³‡è¨Šï¼Œä¾‹å¦‚å•†å“åç¨±ã€åƒ¹æ ¼ã€åº«å­˜æ•¸é‡ã€åœ–ç‰‡ç­‰ã€‚  å„²å­˜æ–‡ç« è³‡è¨Šï¼Œä¾‹å¦‚æ–‡ç« æ¨™é¡Œã€ä½œè€…ã€ç™¼å¸ƒæ™‚é–“ã€å…§å®¹ç­‰ã€‚  å„²å­˜è¨­å®šè³‡è¨Šï¼Œä¾‹å¦‚è³‡æ–™åº«é€£ç·šå­—ä¸²ã€å¿«å–æ™‚é–“ã€è¶…æ™‚æ™‚é–“ç­‰ã€‚  Lists   å–®ä¸€éµå€¼(Key)å¤šå€‹æ•¸å€¼(Value)  æ˜¯ä¸€å€‹å­—ä¸²åˆ—è¡¨ï¼ŒæŒ‰ç…§æ’å…¥é †åºæ’åºã€‚ä½ å¯ä»¥æ·»åŠ ä¸€å€‹å…ƒç´ åˆ°åˆ—è¡¨çš„  é ­éƒ¨(å·¦é‚Š)  æˆ– å°¾éƒ¨(å³é‚Š)  å®ƒçš„åº•å±¤å…¶å¯¦æ˜¯  é›™éˆæ¥ä¸²åˆ— ï¼Œå°å…©ç«¯çš„æ“ä½œæ€§èƒ½å¾ˆé«˜ï¼Œé€šéç´¢å¼•ä¸‹çš„æ“ä½œä¸­é–“çš„ç¯€é»æ•ˆèƒ½æ¯”è¼ƒå·®  å¸¸ç”¨æŒ‡ä»¤  lpush / rpush / lpop / rpop / rpoplpush     # å¾keyå€¼l1å·¦é‚Šæ¨é€å››ç­†è³‡æ–™ï¼Œå› æ­¤é †åºç‚ºv4 v3 v2 v1\n   >   lpush l1 v1 v2 v3 v4\n   (  integer  ) 4\n   \n   # å¾keyå€¼l1å³é‚Šæ¨é€ä¸‰ç­†è³‡æ–™ï¼Œå› æ­¤é †åºç‚ºv4 v3 v2 v1 v5 v6 v7\n   >   rpush l1 v5 v6 v7\n   (  integer  ) 7\n   \n   # å¾å·¦æ–¹å–å¾—æ•¸å€¼\n   >   lpop l1\n   \"v4\"\n   \n   # å¾å³æ–¹å–å¾—æ•¸å€¼\n   >   rpop l1\n   \"v7\"\n   \n   # å¾å·¦æ–¹keyå€¼l2æ¨é€v2ã€v3ï¼Œå› æ­¤é †åºç‚ºv3ã€v2\n   >   lpush l2 v2 v3\n   \n   # å¾å·¦æ–¹keyå€¼l3æ¨é€v1ï¼Œå› æ­¤é †åºç‚ºv1\n   >   lpush l3 v1\n   \n   # å¾l2(key)å³é‚Šå–å€¼ï¼Œå¾l3(key)å·¦é‚Šæ¨å…¥\n   # l2: v3\n   # l3: v2ã€v1\n   >   rpoplpush l2 l3\n   \n   # å¾l3(key)å–å€¼ï¼Œå‰‡å–åˆ°v1\n   >   rpop l3\n   \"v1\"\n  lrange / lindex / llen     # å¾keyå€¼l1å·¦é‚Šæ¨é€å››ç­†è³‡æ–™ï¼Œå› æ­¤é †åºç‚ºv4 v3 v2 v1\n   >   lpush l1 v1 v2 v3 v4\n   (  integer  ) 4\n   \n   # å–å¾—0(ç´¢å¼•)çš„ç¬¬0å€‹ä½ç½®\n   >   lrange l1 0 0\n   1  )   \"v4\"\n   \n   # å–å¾—1(ç´¢å¼•)çš„ç¬¬ä¸€ä½\n   >   lrange l1 1 2\n   1  )   \"v3\"\n   2  )   \"v2\"\n   \n   # ç”¨åè½‰(è² è™Ÿ)çš„æ–¹å¼ç²å–å…¨éƒ¨ï¼Œå¾å·¦åˆ°å³ä¸€æ¬¡å…¨éƒ¨å–å‡º\n   >   lrange l1 0 -1\n   1  )   \"v4\"\n   2  )   \"v3\"\n   3  )   \"v2\"\n   4  )   \"v1\"\n   \n   # æ¸¬è©¦å–å€¼\n   >   lindex l1 0\n   \"v4\"\n   >   lindex l1 -1\n   \"v1\"\n   >   lindex l1 -10\n   (  nil  )\n   \n   # å–å¾—é•·åº¦\n   >   llen l1\n   (  integer  ) 4\n  ä½¿ç”¨å ´æ™¯   å¯¦ç¾ä½‡åˆ—(Queue)ï¼šå¯ä»¥å°‡æ–°åŠ å…¥çš„å…ƒç´ æ’å…¥åˆ°æ¸…å–®çš„æœ«å°¾ï¼Œå°‡æ¸…å–®çš„ç¬¬ä¸€å€‹å…ƒç´ åˆªé™¤å³å¯å¯¦ç¾ä½‡åˆ—çš„å…ˆé€²å…ˆå‡º (FIFO) çš„ç‰¹æ€§ã€‚  å¯¦ç¾å †ç–Š(Stack)ï¼šå¯ä»¥å°‡æ–°åŠ å…¥çš„å…ƒç´ æ’å…¥åˆ°æ¸…å–®çš„æœ«å°¾ï¼Œå°‡æ¸…å–®çš„æœ€å¾Œä¸€å€‹å…ƒç´ åˆªé™¤å³å¯å¯¦ç¾æ£§çš„å¾Œé€²å…ˆå‡º (LIFO) çš„ç‰¹æ€§ã€‚  å„²å­˜æ—¥èªŒè³‡è¨Šï¼šä¾‹å¦‚ç³»çµ±æ—¥èªŒã€æ‡‰ç”¨ç¨‹å¼æ—¥èªŒç­‰ã€‚  å¯¦ç¾è¨Šæ¯ä½‡åˆ—(Message Queue)ï¼šå¯ä»¥å°‡è¨Šæ¯æ’å…¥åˆ°æ¸…å–®çš„æœ«å°¾ï¼Œç„¶å¾Œé€šéæ¶ˆè²»è€…(Consumer)ä¸æ–·å¾æ¸…å–®çš„æœ«å°¾ç²å–è¨Šæ¯ä¾†å¯¦ç¾è¨Šæ¯çš„éåŒæ­¥è™•ç†ã€‚  Sets   Redis Set å°å¤–æä¾›çš„åŠŸèƒ½èˆ‡  list é¡ä¼¼ä¹Ÿæ˜¯ä¸€å€‹åˆ—è¡¨çš„åŠŸèƒ½ï¼Œå®ƒç‰¹æ®Šä¹‹è™•åœ¨æ–¼å¯ä»¥æ’é™¤é‡è¤‡çš„æ•¸å€¼ï¼Œç•¶å¦‚æœè¦å„²å­˜çš„ä¸€å€‹è³‡æ–™åˆ—è¡¨ï¼Œä¸å¸Œæœ›å‡ºç¾é‡è¤‡çš„è³‡æ–™æ™‚ï¼Œset æ˜¯ä¸€å€‹å¾ˆå¥½çš„é¸æ“‡ï¼Œä¸” set æä¾› API èƒ½åˆ¤æ–·æŸå€‹è³‡æ–™æ˜¯å¦å­˜åœ¨æ–¼é›†åˆä¸­ï¼Œè€Œ list æ²’æœ‰é€™ç¨® APIã€‚  Redis çš„ Set æ˜¯ string é¡å‹çš„ç„¡åºé›†åˆã€‚å®ƒåº•å±¤æ˜¯ä¸€å€‹ Hash tableï¼Œå› æ­¤  æ–°å¢ ã€  åˆªé™¤ ã€  æŸ¥è©¢ çš„æ™‚é–“è¤‡é›œåº¦çš†ç‚º  O(1)  å¸¸ç”¨æŒ‡ä»¤  sadd / smembers / sismember     # æœƒè‡ªå‹•å°‡é‡è¤‡çš„æ•¸å€¼é€²è¡Œéæ¿¾\n   >   sadd s1 v1 v1 v1 v2 v3 v4 v5 v5\n   (  integer  ) 5\n   \n   # é¡¯ç¤ºsetçš„s1(key)çš„æ‰€æœ‰æ•¸å€¼\n   >   smembers s1\n   1  )   \"v2\"\n   2  )   \"v1\"\n   3  )   \"v4\"\n   4  )   \"v3\"\n   5  )   \"v5\"\n   \n   # åˆ¤s1(key)ä¸­çš„v1æ˜¯å¦å­˜åœ¨\n   >   sismember s1 v1\n   (  integer  ) 1\n   \n   # åˆ¤s1(key)ä¸­çš„v9æ˜¯å¦å­˜åœ¨\n   >   sismember s1 v9\n   (  integer  ) 0\n  scard / srem / spop / srandmember     # å°‡æ•¸å€¼é€²è¡ŒåŠ å…¥\n   >   sadd s1 v1 v2 v3 v4 v5\n   (  integer  ) 5\n   \n   # å–å¾—s1(key)çš„æ•¸é‡\n   >   scard s1\n   (  integer  ) 5\n   \n   # åˆªé™¤s1(key)ä¸­çš„v4\n   >   srem s1 v4\n   (  integer  ) 1\n   \n   # éš¨æ©Ÿå¾s1(key)ä¸­å–å‡ºï¼Œä¸¦é€²è¡Œåˆªé™¤\n   >   spop s1 2\n   1  )   \"v3\"\n   2  )   \"v2\"\n   \n   # éš¨æ©Ÿå¾s1(key)ä¸­å–å‡ºï¼Œä¸¦ä¸åˆªé™¤\n   >   srandmember s1 2\n   1  )   \"v5\"\n   2  )   \"v1\"\n  sinter / sunion / sdiff     # æ–°å¢å…©å€‹setï¼Œåšç‚ºæ¸¬è©¦\n   >   sadd s1 v1 v2 v3 v4\n   >   sadd s2 v3 v4 v5 v6\n   \n   # å–äº¤é›†\n   >   sinter s1 s2\n   1  )   \"v3\"\n   2  )   \"v4\"\n   \n   # å–è¯é›†\n   >   sunion s1 s2\n   1  )   \"v4\"\n   2  )   \"v6\"\n   3  )   \"v3\"\n   4  )   \"v2\"\n   5  )   \"v1\"\n   6  )   \"v5\"\n   \n   # å–s1çš„å·®é›†\n   >   sdiff s1 s2\n   1  )   \"v1\"\n   2  )   \"v2\"\n   \n   # å–s2çš„å·®é›†\n   >   sdiff s2 s1\n   1  )   \"v5\"\n   2  )   \"v6\"\n  ä½¿ç”¨æƒ…å¢ƒ   å¯¦ç¾æŠ½çåŠŸèƒ½ï¼Œä¾‹å¦‚: åœ¨ä¸€å€‹æŠ½çæ´»å‹•ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ sets å°‡æ‰€æœ‰çš„åƒèˆ‡è€…çš„è¨Šæ¯åŠ å…¥åˆ°é›†åˆä¸­  çµ±è¨ˆç¶²ç«™æ‹œè¨ªéçš„ IPã€‚å°‡æ‹œè¨ªéçš„ä½¿ç”¨è€… IP é€²è¡ŒåŠ å…¥åˆ°é›†åˆä¸­ï¼Œç”±æ–¼ set å¯ä»¥é˜²æ­¢é‡è¤‡è¨Šæ¯ï¼Œå› æ­¤æœ€çµ‚å¯ä»¥é¡¯ç¤ºå”¯ä¸€ã€‚  è¿½è¹¤èŠå¤©å®¤çš„æˆå“¡ï¼Œä¸¦é€šéé›†åˆé‹ç®—ä¾†ç®¡ç†æˆå“¡çš„åˆ—è¡¨ã€‚  Sorted sets   Reids æœ‰åºé›†åˆ zset èˆ‡æ™®é€šçš„ set éå¸¸ç›¸ä¼¼ï¼Œä¹Ÿæ˜¯ä¸€å€‹æ²’æœ‰é‡è¤‡å…ƒç´ çš„å­—ä¸²é›†åˆã€‚ä¸åŒä¹‹è™•åœ¨æ–¼ zset çš„  <value> éƒ½é—œè¯ä¸€å€‹è©•åˆ†(score)ï¼Œé€™å€‹è©•åˆ†(score)è¢«ç”¨ä¾†æŒ‰ç…§å¾ä½åˆ†åˆ°æœ€é«˜åˆ†çš„æ–¹å¼æ’åºã€‚é›†åˆçš„  <value> æ˜¯å”¯ä¸€çš„ï¼Œä½†è©•åˆ†(score)å¯ä»¥æ˜¯é‡è¤‡çš„ã€‚  å› ç‚ºå…ƒç´ æ˜¯æœ‰åºçš„ï¼Œæ‰€ä»¥å¯ä»¥æ ¹æ“šè©•åˆ†(score)æˆ–è€…æ¬¡åº(postion)ä¾†ç²å–ä¸€å€‹ç¯„åœçš„å…ƒç´ ã€‚å­˜å– zset çš„ä¸­é–“å…ƒç´ ä¹Ÿæ˜¯éå¸¸å¿«çš„ï¼Œå› æ­¤ä½ èƒ½å¤  zset åšç‚ºä¸€å€‹æ²’æœ‰é‡è¤‡  <value> çš„æ™ºèƒ½åˆ—è¡¨ã€‚  å¸¸ç”¨æŒ‡ä»¤  zadd / zrange / zrangebyscore / zrevrangebyscore     # å¢åŠ åƒæ•¸\n   >   zadd z1 100 chang 200 chen 150 huang\n   (  integer  ) 3\n   \n   # æŸ¥çœ‹åŸæœ¬è³‡æ–™\n   >   zrange z1 0 -1\n   1  )   \"chang\"\n   2  )   \"huang\"\n   3  )   \"chen\"\n   \n   # æ›¿huangçš„scoreå¢åŠ 51ç‚º150+51 = 201\n   >   zincrby z1 51 huang\n   \"201\"\n   \n   # æŸ¥çœ‹ä¿®æ”¹å¾Œçš„è³‡æ–™\n   >   zrange z1 0 -1 withscores\n   1  )   \"chang\"\n   2  )   \"100\"\n   3  )   \"chen\"\n   4  )   \"150\"\n   5  )   \"huang\"\n   6  )   \"201\"\n   \n   # çµ±è¨ˆz1ä¸­çš„100~200åˆ†æ•¸ä¹‹é–“æœ‰å¹¾å€‹\n   >   zcount z1 100 200\n   (  integer  ) 2\n   \n   # å–å¾—è©²<key>é›†åˆä¸­çš„æ’åï¼Œç”±0é–‹å§‹è¨ˆç®—\n   >   zrank z1 chen\n   (  integer  ) 1\n   \n   # å–ä¸åˆ°æ•¸å€¼æ™‚ï¼Œå‰‡å›å‚³(nil)\n   >   zrank z1 error\n   (  nil  )\n   \n   # åˆªé™¤è©²z1ä¸­çš„chen\n   >   zrem z1 chen\n   (  integer  ) 1\n  ä½¿ç”¨æƒ…å¢ƒ   å¯¦ç¾ä¸€å€‹æ–‡ç« çš„é–±è®€æ’è¡Œæ¦œ  æ ¹æ“šæ™‚é–“æ’åºçš„æ–°èåˆ—è¡¨  ç›´æ’­èŠå¤©å®¤ä¸­çš„é€ç¦®æ’è¡Œæ¦œ  å…¶ä»–å¸¸ç”¨åŠŸèƒ½  Transactions  ä»‹ç´¹   Reids äº‹å‹™æ˜¯ä¸€å€‹å–®ç¨çš„éš”é›¢æ“ä½œï¼Œäº‹å‹™ä¸­çš„æ‰€æœ‰å‘½ä»¤éƒ½æœƒè¢«åºåˆ—åŒ–ã€æŒ‰é †åºåœ°åŸ·è¡Œã€‚äº‹å‹™åœ¨åŸ·è¡Œçš„éç¨‹ä¸­ï¼Œä¸æœƒè¢«å…¶ä»–å®¢æˆ¶ç«¯ç™¼é€ä¾†çš„å‘½ä»¤è«‹æ±‚çµ¦ä¸­æ–·ã€‚  Redis äº‹å‹™çš„ä¸»è¦ä½œç”¨å°±æ˜¯ä¸²è¯å¤šå€‹å‘½ä»¤é˜²æ­¢åˆ¥çš„å‘½ä»¤æ’éšŠ  Multi / Exec / discard   å¾è¼¸å…¥  Multi æŒ‡ä»¤é–‹å§‹ï¼Œè¼¸å…¥çš„å‘½ä»¤éƒ½æœƒä¾æ¬¡é€²å…¥å‘½ä»¤æŸ±åˆ—ä¸­ï¼Œä½†ä¸æœƒåŸ·è¡Œï¼Œç›´åˆ°è¼¸å…¥  Exec å¾Œï¼ŒRedis æœƒå°‡ä¹‹å‰çš„å‘½ä»¤æŸ±åˆ—ä¸­çš„å‘½ä»¤ä¾åºåŸ·è¡Œ  å¦‚æœä¸æƒ³è¦é€™æ¬¡çš„å‘½ä»¤æŸ±åˆ—ï¼Œæˆ‘å€‘å¯ä»¥é€é  discard ä¾†é€²è¡Œæ”¾æ£„ã€‚  ä½¿ç”¨ä¸€å€‹  Client A å’Œ  Client B ä¾†é€²è¡Œæ¨¡æ“¬æ“ä½œ     # Client A é–‹å•Ÿäº‹å‹™\n   >   Multi\n   OK\n   \n   # Client AåŸ·è¡Œæ“ä½œ\n   (  TX  )  >   set k1 v1\n   QUEUED\n   \n   # Client AåŸ·è¡Œæ“ä½œ\n   (  TX  )  >   get k1\n   QUEUED\n   \n   # Client BåŸ·è¡Œæ“ä½œ\n   >   set k1 v100\n   OK\n   \n   # Client AåŸ·è¡Œæ“ä½œï¼Œå¯ä»¥ç™¼ç¾å°‡ä¸€é€£ä¸²çš„å‹•ä½œåŸ·è¡Œæ“ä½œï¼Œä¸å—Client Bå®¢æˆ¶ç«¯çš„æ“ä½œ\n   (  TX  )  >   Exec\n   1  ) OK\n   2  )   \"v1\"\n  å°‡äº‹å‹™é€²è¡Œä¸Ÿæ£„     # é–‹å•Ÿäº‹å‹™\n   >   Multi\n   OK\n   \n   # è¨­å®šk7æ•¸å€¼ï¼Œä¸å°å¿ƒæ‰“éŒ¯\n   (  TX  )  >   set k7\n   (  error  ) ERR wrong number of arguments   for   'set'   command\n   \n   # å°‡æœ¬æ¬¡äº‹å‹™é€²è¡Œä¸Ÿæ£„\n   localhost:6379(TX  )  >   discard\n   OK\n  ä½¿ç”¨ watch / unwatch æŒ‡ä»¤ (æ¨‚è§€é–)    watch   åœ¨åŸ·è¡Œ  multi ä¹‹å‰ï¼Œå…ˆåŸ·è¡Œ  watch <key1> <key2> ï¼Œå¯ä»¥ç›£è¦–ä¸€å€‹æˆ–å¤šå€‹  <key> ï¼Œå¦‚æœäº‹å‹™åŸ·è¡Œä¹‹å‰ï¼Œé€™å€‹(æˆ–é€™äº›)key çš„æ•¸å€¼ï¼Œè¢«å…¶ä»–æŒ‡ä»¤æˆ–ä»–äººæ”¹å‹•éï¼Œé‚£éº¼äº‹å‹™å°‡è¢«æ‰“æ–·ã€‚   unwatch   å–æ¶ˆ  WATCH å‘½ä»¤å°æ‰€æœ‰ key çš„ç›£æ§  å¦‚æœåœ¨åŸ·è¡Œ  WATCH å‘½ä»¤ä¹‹å¾Œï¼Œ  EXEC æˆ–  DISCARD å‘½ä»¤å…ˆè¢«åŸ·è¡Œçš„è©±ï¼Œå°±ä¸éœ€è¦åœ¨åŸ·è¡Œ  UNWATCH äº†  ä½¿ç”¨ Redis ä¸­  Watch çš„åŠŸèƒ½ï¼Œé€™ç¨®æ–¹å¼å°±æ˜¯  check-and-set æ©Ÿåˆ¶     # åˆå§‹åŒ–k1çš„æ•¸å€¼ç‚º1 (Client A)\n   >   set k1 1\n   OK\n   \n   # å•Ÿç”¨ç›£çœ‹key k1åŠŸèƒ½ (Client A)\n   >   WATCH k1\n   OK\n   \n   # é–‹å•Ÿäº‹å‹™äº¤æ˜“ (Client A)\n   >   MULTI\n   OK\n   \n   # æ­¤æ™‚æœ‰äººä¿®æ”¹k1å…§çš„æ•¸å€¼ç‚º4 (Client B)\n   >   set k1 4\n   OK\n   \n   # æ›¿k1çš„valueé€²è¡Œ+1 (Client A)\n   (  TX  )  >   incr k1\n   QUEUED\n   \n   # æ›¿k1çš„valueé€²è¡Œ+1 (Client A)\n   (  TX  )  >   incr k1\n   QUEUED\n   \n   # åŸ·è¡Œäº‹å‹™çµæœï¼Œå¯ä»¥ç™¼ç¾åŸ·è¡Œæ˜¯å¤±æ•—çš„ï¼Œæ²’æœ‰è¿”å›å…©å€‹çµæœ (Client A)\n   (  TX  )  >   exec\n   (  nil  )\n  ä¸‰å¤§ç‰¹æ€§   å–®ç¨çš„éš”é›¢æ“ä½œ\n   äº‹å‹™ä¸­æ‰€æœ‰å‘½ä»¤éƒ½æœƒåºåˆ—åŒ–ã€æŒ‰é †åºåœ°åŸ·è¡Œã€‚äº‹å‹™åœ¨åŸ·è¡Œçš„éç¨‹ä¸­ï¼Œä¸æœƒè¢«å…¶ä»–å®¢æˆ¶ç«¯ç™¼é€ä¾†çš„å‘½ä»¤è«‹æ±‚æ‰“æ–·  æ²’æœ‰éš”é›¢ç´šåˆ¥çš„æ¦‚å¿µ\n   æŸ±åˆ—ä¸­çš„å‘½ä»¤æ²’æœ‰æäº¤ä¹‹å‰éƒ½ä¸æœƒå¯¦éš›çš„è¢«åŸ·è¡Œï¼Œå› ç‚ºäº‹å‹™æäº¤å‰ä»»ä½•æŒ‡ä»¤éƒ½ä¸æœƒè¢«å¯¦éš›åŸ·è¡Œ  ä¸ä¿è­‰åŸå­æ€§\n   Redis åŒä¸€å€‹äº‹å‹™ä¸­ï¼Œå¦‚æœæœ‰ä¸€æ¢å‘½ä»¤åŸ·è¡Œå¤±æ•—äº†ï¼Œå…¶å¾Œé¢çš„å‘½ä»¤ä»ç„¶æœƒè¢«åŸ·è¡Œä¸”æ²’æœ‰å›æ»¾(Rollback)  Pub/sub  ä½¿ç”¨ä¸Šçš„é™åˆ¶   Pub/Sub çš„å…§å®¹ï¼Œæ˜¯ä¸æœƒç”¨ Key çš„æ–¹å¼å»ä¿å­˜çš„ï¼Œæ‰€ä»¥è‡ªç„¶è³‡æ–™ç„¡æ³•æŒä¹…åŒ–ï¼Œæ‰€ä»¥è³‡æ–™æœ‰å¯èƒ½æœƒéºå¤±ã€‚  ç•¶ç™¼é€è€…(Pub)æœ‰ç™¼é€æ¶ˆæ¯æ™‚ä¸”è¨‚é–±è€…(Sub)é€£ç·šä¸­æ–·ï¼Œå‰‡è¨‚é–±è€…å°‡ç„¡æ³•æ¥æ”¶åˆ°æ­¤ç­†è¨Šæ¯  Redis Server æœå‹™åœæ­¢æˆ–ç•¶æ©Ÿï¼Œå‰‡è³‡æ–™æœƒéºå¤±  Redis è¨­å®šåƒæ•¸     # 32mbï¼šç·©è¡å€(buffer)ä¸€æ—¦è¶…é 32MBï¼ŒRedis ç›´æ¥å°‡è¨‚é–±è€…(Sub)æœƒå¼·åˆ¶è¸¢    ä¸‹ç·š\n   # 8mb + 60ï¼šç·©è¡å€è¶…é 8MBï¼Œä¸¦ä¸”æŒçºŒ 60 ç§’ï¼ŒRedis ä¹ŸæœƒæŠŠè¨‚é–±(Sub)æœƒ    è¢«è¸¢ä¸‹ç·šã€‚\n   client-output-buffer-limit   pubsub   32  mb   8  mb   60\n  ä½¿ç”¨ä¸Šçš„é™åˆ¶  ä½¿ç”¨ä¸Šçš„è€ƒé‡   ç”±æ–¼ Pub/Sub çš„å…§å®¹ï¼Œæ˜¯ä¸æœƒé€²è¡Œä¿å­˜çš„ï¼Œæ‰€ä»¥é‡è¦çš„è³‡æ–™ä¸å»ºè­°ä½¿ç”¨æ­¤æ–¹å¼ä¾†å‚³é  ç™¼ä½ˆè€…(Pub)ç™¼å¸ƒæ¶ˆæ¯å¾Œï¼Œä¸¦ä¸æœƒç®¡è¨‚é–±è€…(Sub)æ˜¯å¦æœ‰æ¥æ”¶åˆ°æ¶ˆæ¯ï¼Œä¹Ÿæ²’æœ‰ ACK æ©Ÿåˆ¶ï¼Œæ‰€ä»¥ç„¡æ³•ç¢ºå®šè¨‚é–±è€…(Sub)æ˜¯å¦æœ‰æ¥æ”¶åˆ°è¨Šæ¯ï¼Œå› æ­¤åœ¨å¯é è¨Šæ¯çš„å ´åˆä¸­ä¸å»ºè­°ä½¿ç”¨  è¨‚é–±è€…(Sub)æœƒå ç”¨ä¸€å€‹ Redis Server çš„é€£ç·šï¼Œæ‰€ä»¥è¦æ³¨æ„æ˜¯å¦æœ‰ä½”ç”¨éå¤šçš„é€£ç·š  ç•¶ç™¼ä½ˆè€…(Pub)ç™¼é€â€å¤§é‡â€è¨Šæ¯ï¼Œè‹¥è¨‚é–±è€…(Sub)ä¾†ä¸åŠæ¶ˆåŒ–ï¼Œè³‡æ–™æœƒé˜»å¡åœ¨é€šé“(channel)ä¸­ï¼Œé˜»å¡æ™‚é–“è¶Šé•·ï¼Œè³‡æ–™ä¸Ÿå¤±çš„é¢¨éšªå°±è¶Šé«˜ï¼Œç•¶è¨Šæ¯é‡éå¤§æ™‚ï¼Œæœƒé€ æˆç·©è¡å€(buffer)æº¢å‡ºï¼Œå°±æœƒå°è‡´è³‡æµå¤±  å¸¸ç”¨æŒ‡ä»¤     # æŸ¥çœ‹å…¨éƒ¨çš„channel\n   >   PUBSUB CHANNELS\n   >   PUBSUB CHANNELS   *\n   \n   # æŸ¥çœ‹channelä½¿ç”¨wild card\n   >   PUBSUB CHANNELS sss  *\n   \n   # è¨‚é–±listen:somethingçš„é »é“\n   SUBSCRIBE   listen:something\n   \n   # ç™¼é€è³‡æ–™çµ¦listen:somethingçš„é »é“\n   PUBLISH   listen:something   hello\n   \n   # è§£é™¤è¨‚é–±listen:somethingçš„é »é“\n   UNSUBSCRIBE   listen:something\n   \n   # ä½¿ç”¨MONITORä¾†Debugæ¨¡å¼æŸ¥çœ‹ç›®å‰é€å‡ºç‹€æ…‹\n   MONITOR\n  ä½¿ç”¨æƒ…å¢ƒ   SignalR / WebSocket åœ¨ K8s åº•ä¸‹å¤šå€‹ Pod çš„å»£æ’­æ‡‰ç”¨ï¼Œ  Redis backplane  åœ¨ç¶²é æ‡‰ç”¨ç¨‹åºä¸­å¯¦ç¾çš„å³æ™‚èŠå¤©å®¤ã€‚ä¾‹å¦‚: ç•¶æœ‰ä¸€å€‹ç”¨æˆ¶åœ¨èŠå¤©å®¤ä¸­ç™¼å¸ƒäº†ä¸€æ¢æ¶ˆæ¯æ™‚ï¼Œæ‰€æœ‰è¨‚é–±è©²æ¶ˆæ¯çš„ç”¨æˆ¶éƒ½æœƒæ”¶åˆ°é€šçŸ¥ã€‚  å¸¸è¦‹çš„ä¸‰å¤§å•é¡Œ  Cache Penetration (å¿«å–ç©¿é€)  åœ¨é«˜ä½µç™¼çš„æƒ…æ³ä¸‹ï¼ŒæŸ¥è©¢ä¸€å€‹ä¸å­˜åœ¨çš„æ•¸å€¼æ™‚æœƒç™¼ç”Ÿã€‚ä¾‹å¦‚: id ç‚º   -1  æˆ–  ç‰¹åˆ¥å¤§ä¸å­˜åœ¨çš„è³‡æ–™æ™‚ ï¼Œæœƒé€ æˆ Cache å…§çš„è³‡æ–™æ˜¯æ‰¾ä¸åˆ°çš„ï¼Œæ—¢ç„¶å¾ Cache ä¸­æ‰¾ä¸åˆ°æ•¸å€¼ï¼Œå› æ­¤å¤§é‡çš„ Request çš†æœƒè½åˆ°è³‡æ–™åº«ä¸Šï¼Œé€ æˆè³‡æ–™åº«è² æ“”ã€‚  ğŸ’¡ è«‹æ±‚æœªå‘½ä¸­çš„ Cacheï¼Œç›´æ¥å­˜å–è³‡æ–™åº«ï¼Œé€™å°±æ˜¯å¿«å–ç©¿é€ã€‚  âœ… è§£æ±ºæ–¹å¼   åœ¨ Interface å±¤  å¢åŠ é©—è­‰ ï¼Œæ¯”å¦‚ä½¿ç”¨è€…æ¬Šé™é©—è­‰ã€åƒæ•¸é©—è­‰ï¼Œä¸åˆæ³•çš„åƒæ•¸å°±ç›´æ¥ Returnï¼Œæ¯”å¦‚: id åšåŸºæœ¬çš„é©—è­‰ï¼Œid â‰¤ 0 ç›´æ¥  return ã€‚   å¿«å–NULLæ•¸å€¼ ï¼Œä½†æ˜¯ Cache NULL çš„æ™‚é–“ä¸èƒ½å¤ªé•·ï¼Œå¦å‰‡ NULL è³‡æ–™é•·æ™‚é–“å¾—ä¸åˆ°æ›´æ–°ï¼Œä¹Ÿä¸èƒ½å¤ªçŸ­ï¼Œå¦å‰‡é”ä¸åˆ°é˜²æ­¢ Cache Penetration(å¿«å–ç©¿é€)  å¸ƒéš†éæ¿¾å™¨(Bloom Filter) é¡ä¼¼ Hash table çš„æ¼”ç®—æ³•ï¼Œå°‡æ‰€æœ‰å¯èƒ½çš„æŸ¥è©¢ç”Ÿæˆä¸€å€‹ bitmapï¼Œåœ¨é€²è¡Œè³‡æ–™åº«æŸ¥è©¢ä¹‹å‰æœƒä½¿ç”¨é€™å€‹ bitmap é€²è¡Œéæ¿¾ï¼Œå¦‚æœä¸åœ¨å…¶ä¸­å‰‡ç›´æ¥éæ¿¾ï¼Œå¾è€Œæ¸›è¼•è³‡æ–™åº«å±¤é¢çš„å£“åŠ›ã€‚  Cache Breakdown / Hotspot Invalid (å¿«å–æ“Šç©¿)  åœ¨ Cache ä¸­çš„ä¸€å€‹ Key(æ¯”å¦‚ä¸€å€‹ä¿ƒéŠ·å•†å“)ï¼Œåœ¨æŸå€‹æ™‚é–“é»éæœŸçš„æ™‚å€™ï¼Œæ°å¥½é€™å€‹æ™‚é–“é»å°é€™å€‹ Key æœ‰å¤§é‡çš„é«˜ä½µç™¼è«‹æ±‚ï¼Œé€™äº›è«‹æ±‚ç™¼ç¾ Cache éæœŸäº†ï¼Œå› æ­¤éƒ½å¾è³‡æ–™åº«åŠ è¼‰è³‡æ–™å› Cacheï¼Œå¦‚æœé€™å€‹æ™‚é–“é»æœ‰é«˜ä½µç™¼è«‹æ±‚å‰‡å¯èƒ½æœƒç¬é–“é€ æˆè³‡æ–™åº«å£“å®ã€‚  ğŸ’¡ ç†±é» Keyï¼ŒCache éæœŸï¼Œç›´æ¥æ”»æ“Šè³‡æ–™åº«  âœ… è§£æ±ºæ–¹å¼   è¨­ç½®ç†±è³‡æ–™(Hot data)æ°¸é   ä¸éæœŸ  ä½¿ç”¨åŠ äº’æ–¥é–ï¼Œå° Cache æŸ¥è©¢æ™‚åŠ é–ï¼Œå¦‚æœ Key ä¸å­˜åœ¨å°±åŠ é–ï¼Œç„¶å¾ŒæŸ¥ DB é€²å…¥åˆ° Cache ä¸­ï¼Œç„¶å¾Œè§£é–ï¼Œå…¶ä»–åŸ·è¡Œç·’ç™¼ç¾æœ‰é–å°±å¿…é ˆç­‰å¾…ï¼Œç„¶å¾Œè§£é–å¾Œè¿”å›è³‡æ–™æˆ–åˆ°è³‡æ–™åº«æŸ¥è©¢  Cache Avalanche (å¿«å–é›ªå´©)  å¤§é‡çš„ Cache Key åœ¨åŒä¸€æ™‚é–“å¤±æ•ˆï¼Œå°è‡´å¤§é‡çš„è«‹æ±‚éƒ½è½åœ¨è³‡æ–™åº«ä¸Šï¼Œå¦‚æ´»å‹•ç³»çµ±è£¡é¢åŒæ™‚é€²è¡Œè‘—éå¸¸å¤šçš„æ´»å‹•ï¼Œä½†åœ¨æŸå€‹æ™‚é–“é»æ‰€æœ‰çš„ Cache çš†éæœŸã€‚   è¨­ç½®ç†±è³‡æ–™(Hot data)æ°¸é   ä¸éæœŸ  Cache è³‡æ–™çš„éæœŸæ™‚é–“è¨­ç½®ç‚ºéš¨æ©Ÿï¼Œé˜²æ­¢åŒä¸€æ™‚é–“å¤§é‡è³‡æ–™éæœŸç¾è±¡ç™¼ç”Ÿã€‚  åƒè€ƒ    é—œæ–¼ Redis Persistence - è³‡æ–™æŒä¹…åŒ–   Redis Pub/Sub   ä¸€åˆ†é˜å­¸ç¿’ Redis å¸¸è¦‹çš„ä¸‰å¤§å•é¡Œ  html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}"},{"id":"content:2.workshop:tdd_part1.md","path":"/workshop/tdd_part1","dir":"workshop","title":"TDDæŠ€è¡“åˆ†äº« - Part1 çŒè¼¸","description":"TDDç‚ºè»Ÿé«”é–‹ç™¼ä¸€ç¨®æ‰‹æ³•ï¼Œæ ¸å¿ƒæ€ç¶­åœ¨æ–¼é‡æ¸…åŠŸèƒ½æƒ…å¢ƒå¾Œï¼Œå¾æ¸¬è©¦ç¨‹å¼ç¢¼é–‹å§‹é–‹ç™¼ã€‚èˆ‡ä¸€èˆ¬é–‹ç™¼ç¿’æ…£æœ‰å¾ˆå¤§çš„ä¸åŒã€‚","keywords":["1. ä»¥ç¯„ä¾‹åˆæ­¥é«”æœƒTDDæ¸¬è©¦é©…å‹•é–‹ç™¼","2. ä½¿ç”¨ATDDè¨­è¨ˆå¥½çš„æ•…äº‹è¨­å®š","3. BDDç¥è¼”åŠ©","4. TDD Combo Hit","5. å¤©äººåˆä¸€"],"body":"  TDDç‚ºè»Ÿé«”é–‹ç™¼ä¸€ç¨®æ‰‹æ³•ï¼Œæ ¸å¿ƒæ€ç¶­åœ¨æ–¼é‡æ¸…åŠŸèƒ½æƒ…å¢ƒå¾Œï¼Œå¾æ¸¬è©¦ç¨‹å¼ç¢¼é–‹å§‹é–‹ç™¼ã€‚èˆ‡ä¸€èˆ¬é–‹ç™¼ç¿’æ…£æœ‰å¾ˆå¤§çš„ä¸åŒã€‚  ä¸€é–‹å§‹æœƒç”¨ä¾‹å­æƒ…å¢ƒç›´æ¥å»å¸¶å…¥ç†è§£TDDèˆ‡ä¸€èˆ¬é–‹ç™¼ä¸åŒä¹‹è™•ï¼Œä¾‹å­å¦‚ä¸‹   æƒ…å¢ƒ : ä½œç‚ºéŠ€è¡Œå®¢æˆ¶ï¼Œæˆ‘æƒ³è¦é€éä¸€å€‹å®‰å…¨çš„ç™»å…¥ç³»çµ±ç™»å…¥æˆ‘çš„å¸³æˆ¶ï¼Œä»¥ä¾¿æŸ¥çœ‹æˆ‘çš„é¤˜é¡å’Œé€²è¡Œäº¤æ˜“ã€‚  é‡å°é€™å€‹æƒ…å¢ƒï¼Œéœ€é©—è­‰ç™»å…¥åˆæ³•æ€§ï¼Œæ¢ä»¶å¦‚ä¸‹   é©—è­‰æ­£ç¢ºçš„å¸³è™Ÿå’Œå¯†ç¢¼å¯ä»¥æˆåŠŸç™»å…¥ã€‚  é©—è­‰éŒ¯èª¤çš„å¸³è™Ÿæˆ–å¯†ç¢¼ç„¡æ³•ç™»å…¥ã€‚  é©—è­‰ä¸‰æ¬¡ç™»å…¥å¤±æ•—å¾Œå¸³æˆ¶å°‡è¢«é–å®šã€‚   è¨»: æ­¤ä¾‹åœ¨æ­¤æ–‡ç« æœƒè¢«ä¸åœåœ°æ‹¿ä¾†ä½¿ç”¨  1. ä»¥ç¯„ä¾‹åˆæ­¥é«”æœƒTDDæ¸¬è©¦é©…å‹•é–‹ç™¼  a. ä¸€èˆ¬æƒ…å¢ƒé–‹ç™¼  ä¸€èˆ¬é–‹ç™¼å¤§éƒ½æœƒå¾æœ€åŸºç¤çš„è³‡æ–™åŸºç¤å»ºè¨­é–‹å§‹åšé–‹ç™¼ï¼Œæµç¨‹å¦‚ä¸‹     DBContext : æ’°å¯«DB Entityï¼Œå»ºç½®å®Œå¾ŒåšMigrationç”¢å‡ºDB Table  Repository : è¨­è¨ˆRepository Layerï¼Œå¯¦ä½œè³‡æ–™CRUDï¼Œéš”é›¢DBContext  Service : å¯¦éš›æ’°å¯«ç™»å…¥å¯†ç¢¼é©—è­‰é‚è¼¯èˆ‡æœå‹™æ–¹æ³•(é€šå¸¸æœƒåƒè€ƒè³‡æ–™å±¤å¯¦ä½œ)  API Interface : Controllerå±¤ï¼Œå¯¦éš›æ’°å¯«In Out Boundéƒ¨åˆ†  Test Code : æœ€å¾Œé‡å°Serviceé‚è¼¯éƒ¨åˆ†æ’°å¯«æ¸¬è©¦ç¨‹å¼ç¢¼  æ­¤ç‚ºæ ¹æ“šéœ€æ±‚å¾è³‡æ–™å±¤å»ºç½®åˆ°APIä»‹é¢å±¤çš„ä¸€å€‹é–‹ç™¼æµç¨‹ï¼ŒæœŸé–“é›–ç„¶æœƒæ€è€ƒä½¿ç”¨è€…æƒ…å¢ƒé‚è¼¯ï¼Œä½†é€šå¸¸åˆ°Test Codeéšæ®µæƒ…å¢ƒCaseæ‰æœƒæƒ³å¾—æ¯”è¼ƒé½Šå…¨ã€‚  ä½†å°æ–¼ä¸å¯«æ¸¬è©¦ç¨‹å¼ç¢¼çš„å·¥ç¨‹å¸«å°±æœƒæ‡¶æ–¼å¯«æ¸¬è©¦ç¨‹å¼ç¢¼â€¦æ­¤æ™‚ç¨‹å¼æœƒå› éœ€æ±‚è®Šå‹•æˆ–æ˜¯é™¤éŒ¯ä¿®æ”¹ç¨‹å¼ç¢¼ç™¼ç”Ÿæ”¹Aå£Bæˆ–æ˜¯å°çš„æ±è¥¿æ”¹æˆéŒ¯çš„ï¼Œåœ¨æ²’æ¸¬è©¦é©—è­‰é‚è¼¯ä¿è­·ä¸‹è·‘å°±æœƒå¤§æ¦‚æ©Ÿç‡æœƒå‡ºéŒ¯ã€‚  b. TDDç°¡æ˜“é–‹ç™¼æµç¨‹ç¤ºæ„  TDDå¯¦éš›é–‹ç™¼æµç¨‹å¦‚ä¸‹ï¼Œæœƒé¦–è¦è€ƒæ…®æƒ…å¢ƒå»å¯«æ¸¬è©¦ç¨‹å¼ç¢¼    é—œéµåœ¨æ–¼çš„åœ¨Test Codeåˆ°Serviceé€™æ®µï¼Œé€™æ®µå¯¦éš›ç´°ç¯€æµç¨‹å¦‚ä¸‹    ç´°éƒ¨æµç¨‹æœƒæ˜¯ä¸€å€‹æ¸¬è©¦é©—è­‰èˆ‡æ’°å¯«ç¨‹å¼ç¢¼çš„é‡è¤‡æµç¨‹ï¼Œæˆ‘å€‘ä»¥é©—è­‰æ­£ç¢ºçš„å¸³è™Ÿå’Œå¯†ç¢¼å¯ä»¥æˆåŠŸç™»å…¥é€™å€‹æ¸¬è©¦æƒ…å¢ƒç‚ºä¾‹ã€‚ä¸€é–‹å§‹å…ˆç”¢ç”Ÿæ¸¬è©¦ç¨‹å¼ç¢¼(æ³¨:æ¸¬è©¦ç¨‹å¼ç¢¼éProduct Code)å¦‚ä¸‹ï¼Œæ­¤æ™‚ç›´æ¥è·‘æ¸¬è©¦ä¸€èˆ¬æœƒå‡ºç¾è­¦å‘Šæˆ–æ˜¯å¤±æ•—ï¼ŒIDEæ¸¬è©¦çµæœæœƒç”¢ç”Ÿç´…ç‡ˆï¼Œæ­¤ç´…ç‡ˆç‚ºæ¸¬è©¦çš„èµ·æ‰‹æƒ…å¢ƒã€‚æ¥è‘—æˆ‘å€‘è¦æƒ³è¾¦æ³•è®“ä»–è®Šæˆç¶ ç‡ˆï¼Œé–‹å§‹å¯¦éš›å¯«æ¸¬å¼æµç¨‹     [  TestMethod  ]\n   public   void   LoginWithCorrectUsernameAndPassword_ShouldBeSuccess  ()\n   {\n       \n   }\n  åœ¨æ’°å¯«æ¸¬è©¦ç¨‹å¼ï¼Œéç¨‹ä¸­æˆ‘å€‘ä¸€é–‹å§‹ä¸¦ä¸é—œå¿ƒæ˜¯å¦æœ‰çœŸæ­£çš„Concrete Classï¼Œæœƒç›´æ¥å¯«æ¸¬è©¦é‚è¼¯ï¼Œä¾‹å¦‚ä¸‹è¿°é€™æ®µé©—è­‰å¸³å¯†æ­£ç¢ºæ€§ã€‚å¯«é€™æ®µæ¸¬è©¦æ™‚ï¼Œå¯¦éš›æ²’æœ‰LoginServiceå¯¦é«”Classï¼Œå› ç‚ºæˆ‘å€‘è‘—é‡æ–¼æ¸¬è©¦æƒ…å¢ƒé‚è¼¯èˆ‡æµç¨‹ï¼Œç°¡å–®ä¾†èªªæˆ‘å€‘ä¸€é–‹å§‹é—œå¿ƒçš„æ˜¯æˆ‘å€‘è©²å¦‚ä½•å¯«å®Œæ•´æ€§è¼ƒé«˜çš„æ¸¬è©¦â€æµç¨‹â€ï¼Œæ³¨é‡çš„æ˜¯é‚è¼¯èˆ‡æµç¨‹ï¼Œé€™æœƒèˆ‡ä¸€èˆ¬å…ˆå¯«å¥½å†å»ºç½®Concreate Classçš„æ€ç¶­éå¸¸ä¸åŒã€‚     [  TestMethod  ]\n   public   void   LoginWithCorrectUsernameAndPassword_ShouldBeSuccess  ()\n   {\n       LoginService   loginService   =   new   LoginService  ();\n       bool   result   =   loginService.  Validate  (  \"Spyua\"  ,   \"password123\"  );\n       Assert.  IsFalse  (result);\n   }\n  åœ¨æ²’æœ‰Concreate Classç‹€æ³ä¸‹ï¼ŒIDEæœƒæª¢æ¸¬å‡ºæ²’æœ‰LoginServiceé€™å€‹Concreateè€Œæ¨™è¨»ç´…ç·šï¼Œæ­¤æ™‚é€šå¸¸æœƒé€éIDEç†±éµå¿«é€Ÿç”¢ç”ŸLoginService Classèˆ‡Validateæ–¹æ³•å¦‚ä¸‹ã€‚åœ¨æˆ‘å€‘å®ŒæˆConcreate Classï¼Œå¯ä»¥åˆ»æ„å…ˆä¸å¯«é‚è¼¯ï¼Œè®“ä»–å›å‚³falseè®“æ¸¬è©¦é€šéï¼Œç•¶æˆ‘å€‘å®Œæˆé€™æ®µåœ¨åŸ·è¡Œæ¸¬è©¦æ™‚æ­¤æ™‚IDEå°±æœƒShowç¶ ç‡ˆã€‚     public   class   LoginService\n   {\n       public   bool   Validate  (  string   username  ,   string   password  )\n       {\n           return   false  ;   // åˆ»æ„è¿”å›falseè®“æ¸¬è©¦é€šé\n       }\n   }\n  æ¥è‘—æˆ‘å€‘è¦é–‹å§‹åšé‡æ§‹ï¼Œé‡æ§‹åœ¨å¦ä¸€å€‹å°ç¯€æˆ‘æœƒæè¿°ä»–çš„ç²¾ç¥ï¼Œåœ¨é€™æƒ…å¢ƒé‡æ§‹åœ¨æ–¼å®Œå–„Validateé‚è¼¯éƒ¨åˆ†ï¼Œå› æ­¤æˆ‘å€‘å¿«é€Ÿè£œä¸€ä¸‹ç¤ºæ„é‚è¼¯ï¼Œå†åšä¸€æ¬¡æ¸¬è©¦é©—è­‰æœƒæ˜¯ç¶ ç‡ˆã€‚     public   class   LoginService\n   {\n       public   bool   Validate  (  string   username  ,   string   password  )\n       {\n           if  (username   ==   \"Spyua\"   &&   password   ==   \"password123\"  )\n               return   true  ;\n           return   false  ;\n       }\n   }\n  éäº†ä¸€éé€™å€‹æµç¨‹ï¼Œå¤§è‡´è¦å¸¶å‡ºæ¶µç¾©åœ¨æ–¼TDDç‚ºæ¸¬è©¦æµç¨‹ï¼Œç”±æ¸¬è©¦ä¸é(ç´…ç‡ˆ)åˆ°æ¸¬è©¦é(è½‰ç¶ ç‡ˆ)ï¼ŒæœŸé–“æœƒä¸åœåœ°åšæ¸¬è©¦ï¼Œå¯«Product Codeï¼Œæ¸¬è©¦ï¼Œé‡æ§‹å†æ¬¡æ¸¬è©¦ï¼Œç›´åˆ°ä½ å°‡Product Codeå®Œæˆã€‚æœ€å¾Œï¼Œæœƒå†åšä¸€æ¬¡Reviewçœ‹æ˜¯å¦è¦åšé‡æ§‹(é‡æ–°æ•´ç†ç¨‹å¼ç¢¼)ã€‚  æ­¤æ™‚ä½ æ‡‰è©²æœƒå°ç–‘å•ï¼ŒServiceåƒè€ƒå¯¦ä½œRepositoryæ€éº¼æ²’æœ‰? é€™å¾Œé¢æœƒæ­é…å¦‚ä½•ä½¿ç”¨æ¸¬è©¦Mockå»å¯«é€™æ®µï¼Œä¸¦åšè©³ç´°èªªæ˜ã€‚  2. ä½¿ç”¨ATDDè¨­è¨ˆå¥½çš„æ•…äº‹è¨­å®š  ä¸Šç« ç¯€è¨è«–å®Œå¾Œï¼Œå°æ–¼TDDå¯¦ä½œæµç¨‹æ‡‰è©²æœƒæœ‰ä¸€å®šçš„èªçŸ¥ã€‚ä½†ä½ æœ‰ç™¼ç¾åˆ°ä¸€ä»¶äº‹æƒ…å—? TDDæ˜¯å…¶å¯¦å¾ˆè²¼è¿‘æ–¼é–‹ç™¼è§’è‰²ï¼Œå¯¦éš›ä»–æ˜¯åæ–¼åº•å±¤çš„æ€ç¶­ï¼Œå°æ–¼è¼ƒæ¥è¿‘Userçš„ä¸Šå±¤æƒ…å¢ƒé‚è¼¯æœƒæœ‰ä¸€æ®µå°è½å·®å¤–ï¼Œå¦å¤–å°±æ˜¯å¯¦éš›é–‹ç™¼éç¨‹ï¼Œæˆ‘å€‘é‚„æ˜¯éœ€è¦é–‹ç™¼è€…èƒ½é€å¾¹äº†è§£å¯¦éš›çš„æƒ…å¢ƒå¤–ï¼Œä¸”èƒ½èˆ‡Userèˆ‡PMé”åˆ°å…±è­˜ï¼Œç†æƒ³ä¸Šæ•´é«”çš„æ¸¬è©¦æƒ…å¢ƒèˆ‡æ¢ä¾‹éƒ½å¯è®“ä¸‰æ–¹ç†è§£ã€‚  è€Œé€™æ•´å€‹éç¨‹å°±æ˜¯è¦æ¢è¨å¦‚ä½•å¾User Requirementå®šç¾©å‡ºUser Storyèˆ‡æ¸¬è©¦æ¢ä¾‹éç¨‹ï¼Œæˆ‘å€‘æˆ–ç¨±åšATDDï¼Œè‹±æ–‡ç¸®å¯«ç‚º Acceptance Test-Driven Developmentã€‚  ä»–æœƒæ˜¯TDDæ•´å€‹æµç¨‹ä¸­æœ€é‡è¦çš„ä¸€ç’° ã€‚æ­¸æ ¹ç©¶æŸ¢ï¼Œé‚„æ˜¯è¦é€å¾¹è¨è«–å»ç†è§£ä½¿ç”¨é€™éœ€æ±‚ã€‚å°±åƒå¯«å°èªªä¸€æ¨£ï¼Œæœ‰æ¸…æ¥šçš„æ•…äº‹è¨­å®šèƒŒæ™¯ï¼Œæ‰æœƒæœ‰å¥½çš„æ•…äº‹å…§å®¹ã€‚   ç³»çµ±çš„å­˜åœ¨ç›®çš„ï¼Œæ˜¯ç‚ºäº†æ»¿è¶³ä½¿ç”¨è€…éœ€æ±‚ï¼Œè€Œä¸æ˜¯çµ¦é–‹ç™¼äººå“¡å¯«çˆ½çš„ã€‚ (91)  ATDDæ¢è¨æœƒæœ‰å¹¾å€‹ç’°ç¯€ï¼Œåˆ†åˆ¥ç‚º   å¾User Requirementå®šç¾©å‡º User Story  æ ¹æ“šUser Storyè¨­è¨ˆå‡ºUse case diagramä¸¦æ­é…Use case\ndescription  æ ¹æ“š1,2 åˆ—å‡ºå¯¦éš›åŠŸèƒ½æ¸…å–®  å®šç¾©å‡ºacceptance testing  è€Œé€™å››å€‹ç’°ç¯€ï¼Œæœƒä¸æ–·çš„èˆ‡å¯¦éš›æ’°å¯«æ¸¬è©¦åšå¾ªç’°é©—è­‰èˆ‡ä¿®æ­£  a. User Story Lightning Talk (åƒè€ƒ91)  æˆ‘å€‘å¦‚æœè¦å°‡User Requirementç”¨æœ€ç°¡å–®çš„æ–¹å¼è®“å¤§å®¶éƒ½å¯ä»¥ç­è§£é€™å€‹éœ€æ±‚æ˜¯ä»€éº¼ï¼Œé€šå¸¸æœƒä½¿ç”¨User Storyæè¿°æŠ€å·§ï¼Œå®ƒæ˜¯æ•æ·é–‹ç™¼ä¸­ç”¨ä¾†æè¿°åŠŸèƒ½éœ€æ±‚çš„ä¸€å€‹ç°¡å–®åˆå¯¦ç”¨çš„æ–¹æ³•ã€‚é€éUser Storyï¼Œé–‹ç™¼è€…å¯ä»¥æ›´å®¹æ˜“ç†è§£ä½¿ç”¨è€…çš„éœ€æ±‚å’Œç›®æ¨™ï¼Œä¸¦å°ˆæ³¨æ–¼å‰µé€ æœ‰åƒ¹å€¼çš„è§£æ±ºæ–¹æ¡ˆã€‚é€šå¸¸ï¼ŒUser Storyçš„åˆ¶å®šæ ¼å¼æœƒéµå¾ªä»¥ä¸‹çµæ§‹ï¼š  ä¸­æ–‡ç‰ˆ   ä½œç‚ºï¼ˆæŸå€‹è§’è‰²ï¼‰ï¼Œæˆ‘æƒ³è¦ï¼ˆæŸå€‹åŠŸèƒ½æˆ–å‹•ä½œï¼‰ï¼Œä»¥ä¾¿ï¼ˆé”åˆ°æŸå€‹ç›®çš„æˆ–æ•ˆç›Šï¼‰ã€‚  è‹±æ–‡ç‰ˆ   As a \"role\", I want \"goal/desire\" so that \"benefit\"     æŸå€‹è§’è‰² ï¼šä½¿ç”¨è©²åŠŸèƒ½çš„äººï¼Œå¯ä»¥æ˜¯ç‰¹å®šçš„ä½¿ç”¨è€…ã€ç³»çµ±ç®¡ç†å“¡ã€å®¢æˆ¶ç­‰ã€‚   æŸå€‹åŠŸèƒ½æˆ–å‹•ä½œ ï¼šé€™éƒ¨åˆ†æè¿°æƒ³è¦é–‹ç™¼çš„å…·é«”åŠŸèƒ½æˆ–ç³»çµ±æ‡‰è©²åŸ·è¡Œçš„å‹•ä½œã€‚   é”åˆ°æŸå€‹ç›®çš„æˆ–æ•ˆç›Š ï¼šé€™éƒ¨åˆ†è§£é‡‹äº†ç‚ºä»€éº¼é€™å€‹åŠŸèƒ½æ˜¯æœ‰åƒ¹å€¼çš„ï¼Œä¹Ÿå°±æ˜¯èªªï¼Œå®ƒå¯ä»¥é”åˆ°ä»€éº¼ç‰¹å®šçš„æ•ˆç›Šæˆ–ç›®çš„ã€‚  ä»¥æˆ‘å€‘ä¸Šè¿°çš„ç™»å…¥ç³»çµ±æƒ…å¢ƒï¼Œæˆ‘å€‘æœƒé€™æ¨£å®šç¾©     ä½œç‚º ä¸€å€‹éŠ€è¡Œå®¢æˆ¶ï¼Œ\n   æˆ‘å¸Œæœ› èƒ½å¤ é€éä¸€å€‹å®‰å…¨çš„ç™»å…¥ç³»çµ±ç™»å…¥æˆ‘çš„å¸³æˆ¶ï¼Œ\n   ä»¥ä¾¿ æŸ¥çœ‹æˆ‘çš„é¤˜é¡å’Œé€²è¡Œäº¤æ˜“ï¼Œ\n   ä¸¦ä¸”æˆ‘æœŸæœ›ï¼š\n   \n   å¦‚æœ æˆ‘è¼¸å…¥çš„å¸³è™Ÿå’Œå¯†ç¢¼æ˜¯æ­£ç¢ºçš„ï¼Œé‚£éº¼ æˆ‘æ‡‰è©²å¯ä»¥æˆåŠŸç™»å…¥ã€‚\n   å¦‚æœ æˆ‘è¼¸å…¥çš„å¸³è™Ÿæˆ–å¯†ç¢¼æ˜¯éŒ¯èª¤çš„ï¼Œé‚£éº¼ æˆ‘ä¸æ‡‰è©²èƒ½å¤ ç™»å…¥ã€‚\n   å¦‚æœ æˆ‘é€£çºŒä¸‰æ¬¡ç™»å…¥å¤±æ•—ï¼Œé‚£éº¼ æˆ‘çš„å¸³æˆ¶æ‡‰è©²è¢«é–å®šï¼Œä»¥ä¿è­·æˆ‘çš„å®‰å…¨ã€‚\n  \n    å°ç·´ç¿’  æƒ…å¢ƒæè¿°  ä½œç‚ºéŠ€è¡Œå®¢æˆ¶ï¼Œæˆ‘æƒ³è¦å¾æˆ‘çš„ä¸€å€‹å¸³æˆ¶è½‰å¸³åˆ°å¦ä¸€å€‹å¸³æˆ¶ï¼Œä»¥ä¾¿ç®¡ç†æˆ‘çš„è²¡å‹™ã€‚  Acceptance Test Case:   é©—è­‰è¶³å¤ é¤˜é¡çš„è½‰å¸³æ˜¯æˆåŠŸçš„ã€‚  é©—è­‰é¤˜é¡ä¸è¶³çš„è½‰å¸³æ‡‰è©²å¤±æ•—ã€‚  é©—è­‰æˆåŠŸçš„è½‰å¸³æ‡‰è©²åœ¨å…©å€‹å¸³æˆ¶é–“æ­£ç¢ºç§»å‹•é‡‘é¡ã€‚  User Story     ä½œç‚º ä¸€å€‹éŠ€è¡Œå®¢æˆ¶ï¼Œ\n   æˆ‘å¸Œæœ› èƒ½å¤ å¾æˆ‘çš„ä¸€å€‹å¸³æˆ¶è½‰å¸³åˆ°å¦ä¸€å€‹å¸³æˆ¶ï¼Œ\n   ä»¥ä¾¿ ç®¡ç†æˆ‘çš„è²¡å‹™ï¼Œ\n   åŒæ™‚ç¢ºä¿ï¼š\n   \n   å¦‚æœ æˆ‘çš„å¸³æˆ¶æœ‰è¶³å¤ çš„é¤˜é¡ï¼Œé‚£éº¼ è½‰å¸³æ‡‰è©²æˆåŠŸã€‚\n   å¦‚æœ æˆ‘çš„å¸³æˆ¶é¤˜é¡ä¸è¶³ï¼Œé‚£éº¼ è½‰å¸³æ‡‰è©²å¤±æ•—ã€‚\n   å¦‚æœ è½‰å¸³æˆåŠŸï¼Œé‚£éº¼ å…©å€‹å¸³æˆ¶é–“çš„é‡‘é¡æ‡‰è©²æ­£ç¢ºç§»å‹•ã€‚\n  I. User Story è¨è«–  ä¸Šè¿°æ˜¯ç›´æ¥å®šç¾©å‡ºUser Storyçš„æƒ…å¢ƒçµæœï¼Œä¸€èˆ¬æˆ‘å€‘æœƒä½¿ç”¨æ•æ·é–‹ç™¼è¨è«–User Storyï¼Œåœ¨æ•æ·é–‹ç™¼ä¸­ï¼ŒUser Storyçš„å®šç¾©å’Œè¨è«–æ˜¯ä¸€å€‹æŒçºŒçš„éç¨‹ï¼Œæ¶‰åŠå¤šå€‹éšæ®µå’Œåƒèˆ‡è€…(POã€PGâ€¦)ã€‚  \n    ç´°éƒ¨å¯¦éš›è¨è«–åšæ³•ç°¡æ˜“æè¿°    æ’°å¯«User Story ï¼šåœ¨ä¾¿æ¢ç´™æˆ–æ•¸å­—åŒ–çš„çœ‹æ¿ä¸Šå¯«ä¸‹User Storyçš„åŸºæœ¬æè¿°ï¼ŒåŒ…æ‹¬è§’è‰²ã€åŠŸèƒ½å’Œæ•ˆç›Šã€‚   å®šç¾©Acceptance Criteria ï¼šæ¸¬è©¦äººå“¡å’Œé–‹ç™¼äººå“¡å…±åŒåƒèˆ‡çš„ä¸€å€‹é‡è¦ç’°ç¯€ã€‚Acceptance Criteriaï¼ˆæˆ–Acceptance Test Caseï¼‰æ˜ç¢ºç•Œå®šäº†User Storyå®Œæˆçš„æ¢ä»¶ã€‚é€™äº›æ¢ä»¶å¯ä»¥åœ¨åŒä¸€å¼µä¾¿æ¢ç´™çš„ä¸‹æ–¹å¯«å‡ºï¼Œä¹Ÿå¯ä»¥å–®ç¨è¨˜éŒ„è²¼åœ¨åŒä¸€å€‹å€å¡Šã€‚   User Storyè¨è«–æœƒè­° ï¼šé–‹ç™¼åœ˜éšŠã€ç”¢å“æ“æœ‰è€…ã€æ¸¬è©¦äººå“¡å’Œå…¶ä»–åˆ©ç›Šç›¸é—œè€…æ‰€æœ‰äººå°‡å…±åŒè¨è«–User Storyçš„ç´°ç¯€ï¼ŒåŒ…æ‹¬Acceptance Criteriaã€‚é€™å€‹éç¨‹æœ‰åŠ©æ–¼ç¢ºä¿æ¯å€‹äººéƒ½ç†è§£éœ€æ±‚ä¸¦åŒæ„æ¸¬è©¦æ¨™æº–ã€‚   ä¼°ç®—å’Œæ’ç¨‹ ï¼šåœ˜éšŠå¯èƒ½é‚„æœƒç‚ºUser Storyé€²è¡Œå¤§å°ä¼°ç®—å’Œæ’ç¨‹ã€‚ä½¿ç”¨åƒæ˜¯é»æ•¸è²»å¼æ•¸åˆ—é€™æ¨£çš„ä¼°ç®—æ–¹æ³•ï¼Œä¸¦å°‡User Storyåˆ†é…åˆ°ç‰¹å®šçš„é–‹ç™¼è¿­ä»£æˆ–å†²åˆºä¸­ã€‚   æŒçºŒæºé€šå’Œæ¾„æ¸… ï¼šéš¨è‘—é–‹ç™¼çš„é€²å±•ï¼Œå¯èƒ½é‚„éœ€è¦é€²ä¸€æ­¥çš„è¨è«–å’Œæ¾„æ¸…ã€‚æ¶‰åŠæ›´å¤šçš„æœƒè­°æˆ–éæ­£å¼çš„äº¤æµã€‚  ç´°éƒ¨è¨è«–ç´°ç¯€æ­¸é¡å¤§åŸå‰‡ä¸ŠFollow 3CåŸå‰‡ï¼Œä¹Ÿå°±æ˜¯Cardã€Conversationèˆ‡Confirmation  \n    3CåŸå‰‡    Cardï¼ˆå¡ç‰‡ï¼‰ ï¼š\n-   ç›®çš„ ï¼šå¡ç‰‡ä½œç‚ºä¸€å€‹æè¿°æºé€šåª’ä»‹ï¼Œç”¨æ–¼ç´€éŒ„User Storyçš„æ ¸å¿ƒæ¦‚å¿µã€‚\n-   å…§å®¹ ï¼šé€šå¸¸åŒ…æ‹¬è§’è‰²ã€åŠŸèƒ½å’Œæ•ˆç›Šã€‚ä¾‹å¦‚ï¼Œâ€œä½œç‚ºéŠ€è¡Œå®¢æˆ¶ï¼Œæˆ‘å¸Œæœ›èƒ½å¤ é€éä¸€å€‹å®‰å…¨çš„ç™»å…¥ç³»çµ±ç™»å…¥æˆ‘çš„å¸³æˆ¶ï¼Œä»¥ä¾¿æŸ¥çœ‹æˆ‘çš„é¤˜é¡å’Œé€²è¡Œäº¤æ˜“ã€‚â€\n-   ç‰¹é» ï¼šå¡ç‰‡æ‡‰è©²ç°¡çŸ­æ˜äº†ï¼Œå°±åƒLighting Talkï¼ŒçŸ­æ™‚é–“æä¾›è¶³å¤ çš„ä¿¡æ¯ä¾†å¼•ç™¼æ›´æ·±å…¥çš„è¨è«–ã€‚   Conversationï¼ˆå°è©±ï¼‰ ï¼š\n-   ç›®çš„ ï¼šé€éåœ˜éšŠä¹‹é–“çš„å°è©±ä¾†æ·±å…¥ç†è§£User Storyçš„ç´°ç¯€ï¼Œä¸¦è§£æ±ºä»»ä½•æ­§ç¾©å’Œä¸æ¸…æ¥šçš„åœ°æ–¹ã€‚\n-   å…§å®¹ ï¼šåŒ…æ‹¬è¨è«–Acceptance Criteriaã€æŠ€è¡“ç´°ç¯€ã€ä¾è³´é—œä¿‚ç­‰ã€‚\n-   ç‰¹é» ï¼šå°è©±å¯ä»¥åœ¨æ­£å¼çš„è¨ˆç•«æœƒè­°ä¸­é€²è¡Œï¼Œä¹Ÿå¯ä»¥æ˜¯éš¨æ™‚ç™¼ç”Ÿçš„éæ­£å¼è¨è«–ã€‚   Confirmationï¼ˆç¢ºèªï¼‰ ï¼š\n-   ç›®çš„ ï¼šé€šéæ˜ç¢ºçš„Acceptance Criteriaç¢ºå®šUser Storyçš„å®Œæˆæ¢ä»¶ï¼Œç¢ºä¿æ‰€æœ‰åˆ©ç›Šç›¸é—œè€…å°éœ€æ±‚å’ŒæœŸæœ›æœ‰å…±åŒç†è§£ã€‚\n-   å…§å®¹ ï¼šæ˜ç¢ºå®šç¾©ä½•æ™‚User Storyè¢«èªç‚ºæ˜¯â€œå®Œæˆâ€çš„ï¼Œä¾‹å¦‚ï¼Œæ­£ç¢ºçš„å¸³è™Ÿå’Œå¯†ç¢¼å¯ä»¥æˆåŠŸç™»å…¥ç­‰ã€‚\n-   ç‰¹é» ï¼šé€™éƒ¨åˆ†é€šå¸¸æ¶‰åŠæ¸¬è©¦äººå“¡ã€é–‹ç™¼äººå“¡å’Œç”¢å“æ“æœ‰è€…çš„å¯†åˆ‡åˆä½œï¼Œä»¥ç¢ºä¿æ‰€æœ‰äººå°æ¥å—æ¨™æº–æœ‰å…±åŒç†è§£ã€‚  é€™ä¸‰å€‹å…ƒç´ å…±åŒæ§‹æˆäº†å®Œæ•´çš„User Storyï¼Œæ”¯æ´æ•æ·é–‹ç™¼éç¨‹ä¸­çš„å”ä½œå’Œæºé€šã€‚å¡ç‰‡æ˜¯å¼•ç™¼å°è©±çš„èµ·é»ï¼Œå°è©±æ˜¯æ·±å…¥ç†è§£éœ€æ±‚çš„éç¨‹ï¼Œç¢ºèªå‰‡æ˜¯ç¢ºä¿æ‰€æœ‰äººå°å®Œæˆæ¨™æº–é”æˆå…±è­˜çš„éç¨‹ã€‚  II. User Case Digram  åœ¨è¨è«–éç¨‹ä¸­ï¼Œæˆ‘å€‘æœƒä½¿ç”¨Digramä¾†è¼”åŠ©è¨è«–ï¼Œå¯ä»¥æ˜ç¢ºçœ‹å‡ºç³»çµ±é‚Šç•Œã€è§’è‰²é—œä¿‚èˆ‡æ¡ˆä¾‹ï¼Œä¸€èˆ¬æœƒFollow 5Wæº–å‰‡(Whoã€Whereã€Whatã€Whenèˆ‡Why)ã€‚å¦‚æˆ‘å€‘æ­¤ç« ç¯€æåˆ°çš„ç™»å…¥ç³»çµ±æƒ…å¢ƒä¾‹å­ï¼Œå®ƒçš„User Case Digramå¯èƒ½æœƒé•·çš„å¦‚ä¸‹    åœ–ä¸­çš„preèˆ‡postç‚ºpre-conditionï¼ˆå‰ç½®æ¢ä»¶ï¼‰å’Œpost-conditionï¼ˆå¾Œç½®æ¢ä»¶ï¼‰çš„è§’è‰²ã€‚    Pre-conditionï¼ˆå‰ç½®æ¢ä»¶ï¼‰ ï¼š   æè¿°äº†å¿…é ˆå…ˆæ»¿è¶³çš„æ¢ä»¶ï¼Œç”¨ä¾‹æ‰èƒ½å¤ è¢«åŸ·è¡Œã€‚  ä¾‹å¦‚ï¼Œå®¢æˆ¶å¿…é ˆè¼¸å…¥æ­£ç¢ºçš„å¸³è™Ÿå’Œå¯†ç¢¼ã€‚   Post-conditionï¼ˆå¾Œç½®æ¢ä»¶ï¼‰ ï¼š   æè¿°äº†ç”¨ä¾‹åŸ·è¡ŒæˆåŠŸå¾Œç³»çµ±çš„ç‹€æ…‹ã€‚  ä¾‹å¦‚ï¼Œå®¢æˆ¶å¯ä»¥æˆåŠŸç™»å…¥ï¼Œä¸¦èƒ½å¤ è¨ªå•å…¶å¸³æˆ¶ä»¥æŸ¥çœ‹é¤˜é¡å’Œé€²è¡Œäº¤æ˜“  III. Acceptance testing  Acceptance testingç‚ºæ¥æ”¶æ¸¬è©¦æè¿°ï¼Œå®ƒä¸€æ¨£æ˜¯åœ¨è¨è«–éç¨‹ä¸­æœƒå»å®šç¾©å‡ºçš„é©—æ”¶æ¨™æº–æè¿°ã€‚ç”¨ä¾†èªªæ˜æŸä¸€å€‹user storyï¼Œç³»çµ±åœ¨ç‰¹å®šæƒ…æ³ä¸‹æ‡‰è©²å®Œæˆä»€éº¼æ¨£åŠŸèƒ½ï¼Œä»¥åŠé‡å°æŸä¸€äº›è¼¸å…¥ï¼Œæ‡‰è©²å…·å‚™æ€æ¨£çš„è¼¸å‡ºçµæœã€‚å¾å¾ä½¿ç”¨è€…çš„è§’åº¦ä¾†æª¢è¦–ï¼Œç³»çµ±æ˜¯å¦èƒ½æ­£å¸¸é‹ä½œï¼ˆæ˜¯å¦ç¬¦åˆä½¿ç”¨è€…çš„æœŸæœ›)ã€‚é€šå¸¸ä»¥è‡ªç„¶èªè¨€æ’°å¯«ã€‚  æè¿°å…§å®¹ç›¡é‡æŠŠæ¡å¹¾å€‹æº–å‰‡ (91)   ä½¿ç”¨è€…ç‚ºowner(PO)ä¾†ä¸»å°æ’°å¯« : ä½¿ç”¨è€…ç‚ºæœ€å¾Œçš„é©—æ”¶äººå“¡ï¼Œæ‰€ä»¥ä½¿ç”¨è€…æœ€æœ‰è³‡æ ¼ã€ä¹Ÿæœ€æ‡‰è©²ä¾†æ’°å¯«é©—æ”¶æ¸¬è©¦ã€‚è®“ä½¿ç”¨è€…ä¾†ä¸»å°ï¼Œè€Œç”±æœ‰ç¶“é©—çš„æ¸¬è©¦äººå“¡èˆ‡é–‹ç™¼äººå“¡è¼”åŠ©æ’°å¯«æ¸¬è©¦æ¡ˆ  é‡é»åœ¨Whatï¼Œè€Œä¸æ˜¯How : é©—æ”¶æ¸¬è©¦æ¡ˆä¾‹çš„é‡é»åœ¨æ–¼è©²æœ‰ä»€éº¼æ¨£çš„åŠŸèƒ½ï¼Œç”¨ä»€éº¼æ¨£çš„æ–¹å¼ï¼Œèƒ½ä»£è¡¨æ»¿è¶³é€™å€‹user storyã€‚å¦‚ä½•åšåˆ°ç´°ç¯€å°±ä¸ç”¨éæ–¼æè¿°ã€‚  ç°¡æ½”ã€æº–ç¢ºã€é¿å…ç„¡ç•°è­°çš„æè¿° : ä¾‹å¦‚æˆ‘å€‘æåˆ°çš„ç™»å…¥ä¾‹å­ï¼Œä»¥ATDDæ¥å—æ¸¬è©¦æè¿°å°±æœƒå¦‚ä¸‹   é©—è­‰æ­£ç¢ºçš„å¸³è™Ÿå’Œå¯†ç¢¼å¯ä»¥æˆåŠŸç™»å…¥ã€‚  é©—è­‰éŒ¯èª¤çš„å¸³è™Ÿæˆ–å¯†ç¢¼ç„¡æ³•ç™»å…¥ã€‚  é©—è­‰ä¸‰æ¬¡ç™»å…¥å¤±æ•—å¾Œå¸³æˆ¶å°‡è¢«é–å®šã€‚  å¯«éæ¸¬è©¦ç¶“é©—çš„é–‹ç™¼è€…æ‡‰è©²æœƒæ„è­˜åˆ°ï¼Œé€™æ¸¬è©¦æè¿°å…¶å¯¦é‚„éœ€è¦è½‰è­¯æˆæ¸¬è©¦3Aæ’°å¯«æè¿°ï¼Œé€™å°±æ˜¯æˆ‘å€‘ä¸‹ç« ç¯€æœƒæåˆ°BDDç« ç¯€ï¼Œå›æåˆ°é—œæ–¼DSL(Domain Specific Lanaguage)èªè¨€æè¿°ï¼ŒDSLå°±æœƒè¼ƒè²¼è¿‘å¯¦éš›çš„æ¸¬è©¦æ’°å¯«æƒ…å¢ƒã€‚  3. BDDç¥è¼”åŠ©  é€™ç« ç¯€ç”¨æ„åœ¨æ–¼è¦å¸¶å‡ºä½¿ç”¨DSLèªæ³•æè¿°æ¸¬è©¦æ¢ä¾‹ä¸¦ä½¿ç”¨Net Specflow Toolå”åŠ©æˆ‘å€‘ç”¢ç”Ÿæ¸¬è©¦ç¨‹å¼ç¢¼ï¼Œä¾†è¼”åŠ©æˆ‘å€‘TDDæ•´å€‹é–‹ç™¼éç¨‹ã€‚BDDè‹±æ–‡å…¨åç‚ºBehavior-driven developmentï¼Œç”±ä½¿ç”¨è€…è¡Œç‚ºæƒ…å¢ƒè¨è«–ä¾†åšé–‹ç™¼èµ·å§‹é»ï¼Œéç¨‹TDDé€™ç« ç¯€ä¸åŠ ä»¥è©³è¿°ï¼Œæˆ‘å€‘è¦æ¢è¨çš„æ˜¯DSL(Domain Specific Lanaguage)èªè¨€æè¿°ã€‚  a. Gherkin 3A  DSL(Domain Specific Lanaguage)èªè¨€æè¿°ç‚ºäº†è§£æ±ºç‰¹å®šé ˜åŸŸçš„å•é¡Œè€Œè¨­è¨ˆçš„ï¼Œä¾‹å¦‚æˆ‘å€‘å¸¸çœ‹åˆ°çš„SQLèˆ‡HTMLå‰‡å°±æ˜¯é‡å°è³‡æ–™åº«é ˜åŸŸèˆ‡ç¶²é é ˜åŸŸè€Œè¨­è¨ˆçš„èªæ³•ã€‚  ç›¸å°æ–¼BDDé–‹ç™¼ï¼Œä¹Ÿæœ‰é‡å°æ­¤é ˜åŸŸè€Œè¨­è¨ˆçš„èªè¨€å«   Gherkin ï¼Œä½¿ç”¨ \"Given-When-Then\" çš„çµæ§‹å»æè¿°è»Ÿä»¶åŠŸèƒ½çš„æœŸæœ›è¡Œç‚ºã€‚ä¾‹å¦‚æˆ‘å€‘æåˆ°çš„å®‰å…¨ç™»å…¥ä¾‹å­ï¼Œä»¥Gherkinæè¿°å°±æœƒå¦‚ä¸‹   Feature: å®‰å…¨ç™»å…¥\n\nScenario: æ­£ç¢ºçš„å¸³è™Ÿå’Œå¯†ç¢¼\n  Given ä¸€å€‹æœ‰æ•ˆçš„å¸³è™Ÿå’Œå¯†ç¢¼\n  When ç”¨æˆ¶å˜—è©¦ç™»å…¥\n  Then ç™»å…¥æ‡‰æˆåŠŸ\n\nScenario: éŒ¯èª¤çš„å¸³è™Ÿæˆ–å¯†ç¢¼\n  Given ä¸€å€‹ç„¡æ•ˆçš„å¸³è™Ÿæˆ–å¯†ç¢¼\n  When ç”¨æˆ¶å˜—è©¦ç™»å…¥\n  Then ç™»å…¥æ‡‰å¤±æ•—\n\nScenario: ä¸‰æ¬¡ç™»å…¥å¤±æ•—\n  Given ç”¨æˆ¶å·²ç¶“å˜—è©¦ç™»å…¥å…©æ¬¡ä¸¦å¤±æ•—\n  When ç”¨æˆ¶å†æ¬¡å˜—è©¦ç™»å…¥ä¸¦å¤±æ•—\n  Then å¸³æˆ¶æ‡‰è¢«é–å®š\n  ç›¸å°æ–¼æˆ‘å€‘ä¸Šè¿°æåˆ°çš„Acceptance testing æè¿°ï¼Œæœƒæ›´æ¥è¿‘æ–¼Testçš„3Aæ¶æ§‹ï¼Œ3Aå³æ˜¯Arrangeã€Actèˆ‡Assertã€‚åœ¨å¯«æ¸¬è©¦æ®µï¼Œä¸€å€‹æ¸¬è©¦æœƒæœ‰é€™ä¸‰å€‹æµç¨‹éšæ®µã€‚å¦‚æœæˆ‘å€‘è½‰æˆ3Aæè¿°å‰‡æœƒå¦‚ä¸‹   Scenario: æ­£ç¢ºçš„å¸³è™Ÿå’Œå¯†ç¢¼    Arrangeï¼ˆå®‰æ’ï¼‰ ï¼šè¨­ç½®æ¸¬è©¦çš„åˆå§‹æ¢ä»¶ã€‚   Given ä¸€å€‹æœ‰æ•ˆçš„å¸³è™Ÿå’Œå¯†ç¢¼ ã€‚   Actï¼ˆåŸ·è¡Œï¼‰ ï¼šåŸ·è¡Œè¦æ¸¬è©¦çš„è¡Œç‚ºã€‚   When ç”¨æˆ¶å˜—è©¦ç™»å…¥ ã€‚   Assertï¼ˆæ–·è¨€ï¼‰ ï¼šé©—è­‰ç³»çµ±çš„å¯¦éš›è¡Œç‚ºæ˜¯å¦ç¬¦åˆé æœŸã€‚   Then ç™»å…¥æ‡‰æˆåŠŸ ã€‚   Scenario: éŒ¯èª¤çš„å¸³è™Ÿæˆ–å¯†ç¢¼    Arrangeï¼ˆå®‰æ’ï¼‰ ï¼š   Given ä¸€å€‹ç„¡æ•ˆçš„å¸³è™Ÿæˆ–å¯†ç¢¼ ã€‚   Actï¼ˆåŸ·è¡Œï¼‰ ï¼š   When ç”¨æˆ¶å˜—è©¦ç™»å…¥ ã€‚   Assertï¼ˆæ–·è¨€ï¼‰ ï¼š   Then ç™»å…¥æ‡‰å¤±æ•— ã€‚   Scenario: ä¸‰æ¬¡ç™»å…¥å¤±æ•—    Arrangeï¼ˆå®‰æ’ï¼‰ ï¼š   Given ç”¨æˆ¶å·²ç¶“å˜—è©¦ç™»å…¥å…©æ¬¡ä¸¦å¤±æ•— ã€‚   Actï¼ˆåŸ·è¡Œï¼‰ ï¼š   When ç”¨æˆ¶å†æ¬¡å˜—è©¦ç™»å…¥ä¸¦å¤±æ•— ã€‚   Assertï¼ˆæ–·è¨€ï¼‰ ï¼š   Then å¸³æˆ¶æ‡‰è¢«é–å®š ã€‚  å¯¦éš›çš„æ¸¬è©¦ç¨‹å¼ç¢¼æœƒå¦‚ä¸‹(éSpecflowç”¢ç”Ÿ)     using   NUnit  .  Framework  ;\n   \n   [  TestFixture  ]\n   public   class   LoginTests\n   {\n       private   LoginService   _loginService  ;\n   \n       [  SetUp  ]\n       public   void   Setup  ()\n       {\n           _loginService   =   new   LoginService  ();   // Arrange: åˆå§‹åŒ–æ¸¬è©¦ç’°å¢ƒ\n       }\n   \n       [  Test  ]\n       public   void   LoginWithValidCredentials_ShouldSucceed  ()\n       {\n           // Arrange: è¨­ç½®æ¸¬è©¦çš„åˆå§‹æ¢ä»¶\n           _loginService.  SetCredentials  (  \"validUsername\"  ,   \"validPassword\"  );\n   \n           // Act: åŸ·è¡Œè¦æ¸¬è©¦çš„è¡Œç‚º\n           bool   result   =   _loginService.  AttemptLogin  ();\n   \n           // Assert: é©—è­‰ç³»çµ±çš„å¯¦éš›è¡Œç‚ºæ˜¯å¦ç¬¦åˆé æœŸ\n           Assert.  IsTrue  (result);\n       }\n   \n       [  Test  ]\n       public   void   LoginWithInvalidCredentials_ShouldFail  ()\n       {\n           // Arrange\n           _loginService.  SetCredentials  (  \"invalidUsername\"  ,   \"invalidPassword\"  );\n   \n           // Act\n           bool   result   =   _loginService.  AttemptLogin  ();\n   \n           // Assert\n           Assert.  IsFalse  (result);\n       }\n   \n       [  Test  ]\n       public   void   LoginWithThreeFailedAttempts_ShouldLockAccount  ()\n       {\n           // Arrange\n           _loginService.  SetCredentials  (  \"invalidUsername\"  ,   \"invalidPassword\"  );\n   \n           // Act\n           _loginService.  AttemptLogin  ();\n           _loginService.  AttemptLogin  ();\n           _loginService.  AttemptLogin  ();\n   \n           // Assert\n           Assert.  IsTrue  (_loginService.  IsAccountLocked  ());\n       }\n   }\n  b. Specflow Tool (  å®˜æ–¹æ–‡ä»¶ )  I. å®‰è£  Step1 : è‡³VS IDEå»¶ä¼¸æ¨¡çµ„å®‰è£ SpecFlow    Step2 :  æ–°å¢Nunitå°ˆæ¡ˆ  Step3 : Nunitå°ˆæ¡ˆå®‰è£ SpecFlow.NUnit    II. æ’°å¯«Featureæª”æ¡ˆä¸¦æ’°å¯«å…§å®¹  å…ˆåœ¨Nunitå°ˆæ¡ˆæ–°å¢feature fileï¼Œå¦‚æœå»¶ä¼¸å¥—ä»¶æœ‰è£ï¼Œæ‡‰è©²å¯ä»¥åœ¨æ–°å¢é¸é …çœ‹åˆ°Specflowé …ç›®    æ–°å¢å®Œå¾Œï¼Œæ¥è‘—æˆ‘å€‘æ ¹æ“š3.aæåˆ°çš„Gherkin æè¿°ç¯„ä¾‹å¡«åˆ°feature fileå…§   Feature: å®‰å…¨ç™»å…¥\n\nScenario: æ­£ç¢ºçš„å¸³è™Ÿå’Œå¯†ç¢¼\n    Given ä¸€å€‹æœ‰æ•ˆçš„å¸³è™Ÿå’Œå¯†ç¢¼\n    When ç”¨æˆ¶å˜—è©¦ç™»å…¥\n    Then ç™»å…¥æ‡‰æˆåŠŸ\n\nScenario: éŒ¯èª¤çš„å¸³è™Ÿæˆ–å¯†ç¢¼\n    Given ä¸€å€‹ç„¡æ•ˆçš„å¸³è™Ÿæˆ–å¯†ç¢¼\n    When ç”¨æˆ¶å˜—è©¦ç™»å…¥\n    Then ç™»å…¥æ‡‰å¤±æ•—\n\nScenario: äºŒæ¬¡ç™»å…¥å¤±æ•—\n    Given ç”¨æˆ¶å·²ç¶“å˜—è©¦ç™»å…¥å…©æ¬¡ä¸¦å¤±æ•—\n    When ç”¨æˆ¶å†æ¬¡å˜—è©¦ç™»å…¥ä¸¦å¤±æ•—\n    Then å¸³æˆ¶æ‡‰è¢«é–å®š\n  III. ç”¢ç”Ÿæ¸¬è©¦Code  æ’°å¯«å®Œfeatureæª”æ¡ˆå¾Œï¼Œåœ¨featureå…§æ–‡é‚„æ²’ç”¢ç”Ÿå°æ‡‰çš„æ¸¬è©¦Codeï¼Œä»–æœƒæ˜¯ä¸€å€‹ç´«è‰²HLçš„ç‹€æ…‹ï¼Œå¦‚ä¸‹åœ–    æ­¤æ™‚æˆ‘å€‘é‡å°æª”æ¡ˆå…§æ–‡é»é¸å³éµ(ä»»ä½•ä¸€è™•éƒ½å¯)ï¼Œé»é¸Define Step    ä»–æœƒç”¢ç”Ÿä¸€å€‹é¸æ“‡è¡¨å¦‚ä¸‹ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯å…¨é¸    ä½ å°±æœƒçœ‹åˆ°æ¸¬è©¦ç¨‹å¼ç¢¼è¢«ç”¢ç”Ÿï¼Œè€Œä¸”æ˜¯æ•´å€‹å°æ‡‰ä½ çš„feature file (Testing Item Boardé»ä¸‹å»æœƒæŒ‡åˆ°feature fileä¸æ˜¯Test  cs file)    IV. (é‡è¦)ä¿®æ”¹feature  é€™å°ç¯€ç¨å¾®ç´€éŒ„ä¸€ä¸‹ï¼Œå¦‚æœæˆ‘å€‘è¦æ”¹éœ€æ±‚ï¼Œå‹¢å¿…æœƒå‹•åˆ°feature fileï¼Œæ­¤æ™‚æœƒéœ€è¦åŒæ­¥æ›´æ–°æ‰€ç”¢ç”Ÿçš„Testing Codeã€‚ç†æƒ³ä¸ŠåŸºæœ¬ä¸Šæ›´å‹•æ˜¯è¦æ•´å€‹é€£å‹•ï¼Œä½†å¯¦éš›ä¸Šé€™å·¥å…·ç›®å‰ç‰ˆæœ¬ä½¿ç”¨èµ·ä¾†æ²’é€™éº¼ç›´è¦ºã€‚  é€™é‚Šçµ¦å€‹ä¸Šè¿°caseå¦‚ä¸‹   Scenario: äºŒæ¬¡ç™»å…¥å¤±æ•—\n    Given ç”¨æˆ¶å·²ç¶“å˜—è©¦ç™»å…¥å…©æ¬¡ä¸¦å¤±æ•—\n    When ç”¨æˆ¶å†æ¬¡å˜—è©¦ç™»å…¥ä¸¦å¤±æ•—\n    Then å¸³æˆ¶æ‡‰è¢«é–å®š\n  åŸæœ¬æ˜¯2æ¬¡ç™»å…¥å¤±æ•—ï¼Œå¦‚æœæˆ‘å€‘æƒ³æ”¹æè¿°è®Šæˆ3æ¬¡ç™»å…¥ï¼Œ  æ­¤æ™‚ä¸èƒ½ç›´æ¥æ”¹æ–‡å­—æè¿°éƒ¨åˆ† ï¼Œä½ å¿…é ˆå°GivenæŒ‰å³éµï¼Œé»é¸Rename Stepsï¼Œè·³å‡ºä¸‹é¢è¦–çª—ä¿®æ”¹ï¼Œæ‰èƒ½åŒæ­¥æ”¹é“æ‰€ç”¢ç”Ÿçš„Testing Codeï¼Œ  ä½†åƒ…æ­¢æ–¼Attributeæè¿°éƒ¨åˆ†ï¼ŒTesting Function Nameè¦è‡ªå·±é‡æ–°å‘½å    å¦å¤–å¦‚æœé»æ“Šå¾Œæ²’åæ‡‰ï¼Œåªéœ€è¦å°è§£æ±ºæ–¹æ¡ˆæŒ‰å³éµä¸¦åšé‡æ–°ç·¨è¼¯å³å¯   Specflowè®“POã€Userèˆ‡PGå°ˆæ³¨åœ¨feature fileçš„ç•°å‹•ï¼Œä¸”ä¸‰æ–¹éƒ½çœ‹å¾—æ‡‚å¯¦éš›çš„æ¸¬è©¦é …ç›®ï¼Œç›¸å°æ–¼ä¸€èˆ¬3Açš„æ¸¬è©¦Codeæ’°å¯«å¯è®€æ€§æœƒåœ¨æ›´æ¥è¿‘è‡ªç„¶èªè¨€  4. TDD Combo Hit  è¨è«–å®ŒSpecflowéƒ¨åˆ†ï¼Œæˆ‘å€‘è©¦è‘—å®Œæˆæ•´å€‹æ¸¬è©¦ï¼Œè«‹å…ˆå»ºç½®ä½ çš„Product Projectï¼Œçµæ§‹å¦‚ä¸‹    a. Run TDD (  Sample Code )  ç¹¼ä¸Šè¿°ç”±Specflowç”¢ç”Ÿçš„Scenarioï¼Œé‡å°æ­£ç¢ºçš„å¸³è™Ÿå’Œå¯†ç¢¼æƒ…å¢ƒåƒè€ƒå®Œå–„æ¸¬è©¦Codeå¦‚ä¸‹ (PS : æ¸¬è©¦å°ˆæ¡ˆéœ€å®‰è£FluentAssertions) ï¼Œ     public   class   å®‰å…¨ç™»å…¥StepDefinitions\n   {\n       private   LoginService   _loginService  ;   // å‡è¨­æœ‰ä¸€å€‹ç™»å…¥æœå‹™\n       private   string   _username  ;\n       private   string   _password  ;\n       private   bool   _loginResult  ;\n   \n       public   å®‰å…¨ç™»å…¥StepDefinitions  ()\n       {\n           _loginService   =   new   LoginService  ();   // åˆå§‹åŒ–ç™»å…¥æœå‹™\n           _username   =   string  .Empty;\n           _password   =   string  .Empty;\n           _loginResult   =   false  ;\n       }\n   \n       [  Given  (  @\"ä¸€å€‹æœ‰æ•ˆçš„å¸³è™Ÿå’Œå¯†ç¢¼\"  )]\n       public   void   Givenä¸€å€‹æœ‰æ•ˆçš„å¸³è™Ÿå’Œå¯†ç¢¼  ()\n       {\n           _username   =   \"validUser\"  ;\n           _password   =   \"validPassword\"  ;\n       }\n   \n       [  When  (  @\"ç”¨æˆ¶å˜—è©¦ç™»å…¥\"  )]\n       public   void   Whenç”¨æˆ¶å˜—è©¦ç™»å…¥  ()\n       {\n           _loginResult   =   _loginService.  Login  (_username, _password);\n       }\n   \n       [  Then  (  @\"ç™»å…¥æ‡‰æˆåŠŸ\"  )]\n       public   void   Thenç™»å…¥æ‡‰æˆåŠŸ  ()\n       {\n           _loginResult.  Should  ().  BeTrue  ();\n       }\n   }\n  åœ¨ä¸€é–‹å§‹æˆ‘å€‘ä¸¦æ²’æœ‰LoginServiceé€™å€‹ç‰©ä»¶ï¼Œå› æ­¤IDEæœƒåç´…ï¼Œæ­¤æ™‚ç›´æ¥ä½¿ç”¨IDEçš„Quick Actionï¼Œé»é¸ç”¢ç”Ÿæ–°çš„é¡å‹    å°ˆæ¡ˆé»é¸Production WebApi Projectï¼Œä¸¦é¸æ“‡å»ºç«‹æª”æ¡ˆï¼ŒæŒ‡å®šåˆ°Serviceè³‡æ–™å¤¾ä¸‹    æ¥è‘—å°Loginç´…è‰²HLéƒ¨åˆ†ï¼Œä¸€æ¨£ä½¿ç”¨IDEçš„Quick Actionå¿«é€Ÿç”¢ç”ŸMethod    æ­¤æ™‚åŸ·è¡Œæ¸¬æ˜¯æœƒæ˜¯ç´…ç‡ˆï¼ŒéŒ¯èª¤æœƒé¡¯ç¤ºThe method or operation is not implementedï¼Œæˆ‘å€‘ä¸‹æ‰‹å»æ”¹é€™æ®µLogin Codeå¦‚ä¸‹ï¼Œé€ è‘—é‚è¼¯å¯«ï¼ŒLoginæµç¨‹åœ¨æ–¼é‡å°usernameæ’ˆå–ç”¨æˆ¶è³‡è¨Šå¾Œï¼ŒåšPasswordæ¯”å°ï¼Œéç¨‹ä¸­é€éQuick Actionå»ç”¢ç”ŸIUserRepoitory ä»‹é¢ä»¥åŠUser Entityç‰©ä»¶ã€‚  \n    Code     public   class   LoginService\n   {\n       private   IUserRepoitory   _userRepoitory  ;\n   \n       public   LoginService  (  IUserRepoitory   userRepoitory  )\n       {\n           _userRepoitory   =   userRepoitory;\n       }\n   \n       public   bool   Login  (  string   username  ,   string   password  )\n       {\n           User   user   =   _userRepoitory.  GetUser  (username);\n           \n           if  (user   ==   null   ||   !  user.Password.  Equals  (password) )\n           {\n               return   false  ;\n           }\n   \n           return   true  ;\n       }\n   }\n   \n   public   class   User\n   {\n       public   string   Password   {   get  ;    set  ; }\n       public   string   UserName   {   get  ;    set  ; }\n   }\n  Productionå¯«å¥½å¾Œï¼Œæ¥è‘—æˆ‘å€‘è¦ä¸‹æ‰‹ä¿®æ”¹ç¨‹å¼ç¢¼ï¼Œè¦é‡å°IUserRepoitory åšStubæ›¿èº«ç‰©ä»¶ï¼Œæ­¤æ™‚æˆ‘å€‘éœ€è¦å®‰è£NSubstituteï¼ŒStubæ›¿èº«ç‰©ä»¶è¨­ç½®å¦‚ä¸‹     private   IUserRepoitory   _userRepoitory  ;   // å‡è¨­æœ‰ä¸€å€‹ä½¿ç”¨è€…è³‡æ–™åº«\n   private   LoginService   _loginService  ; \n   private   string   _username  ;\n   private   string   _password  ;\n   private   bool   _loginResult  ;\n   \n   public   å®‰å…¨ç™»å…¥StepDefinitions  ()\n   {\n       _userRepoitory   =   Substitute.  For  <  IUserRepoitory  >();   //æ›¿èº«è¨­ç½®\n       _loginService   =   new   LoginService  (_userRepoitory); \n       _username   =   string  .Empty;\n       _password   =   string  .Empty;\n       _loginResult   =   false  ;\n   }\n  Stubæ›¿èº«ç‰©ä»¶çš„å­˜åœ¨åœ¨æ–¼æ¨¡æ“¬åŸç‰©ä»¶çš„å›å‚³å€¼ï¼Œåœ¨æˆ‘å€‘é€™å€‹Caseï¼Œæˆ‘å€‘éœ€è¦é€éæ›¿èº«ç‰©ä»¶æ¨¡æ“¬è³‡æ–™åº«çš„å›å‚³ï¼Œä»¥æ­£ç¢ºçš„å¸³è™Ÿå’Œå¯†ç¢¼é€™å€‹æƒ…å¢ƒï¼Œæˆ‘å€‘å‡è¨­å›å‚³Passwordç‚ºæˆ‘å€‘Givenæ‰€è¨­ç½®çš„Passwordå¦‚ä¸‹     [  When  (  @\"ç”¨æˆ¶å˜—è©¦ç™»å…¥\"  )]\n   public   void   Whenç”¨æˆ¶å˜—è©¦ç™»å…¥  ()\n   {\n           // æ›¿èº«ç‰©ä»¶å‡è¨­å›å‚³æ­£ç¢ºçš„Userè¨Šæ¯\n       _userRepoitory.  GetUser  (_username).  Returns  (  new   User   { UserName   =   _username, Password   =   _password });\n       _loginResult   =   _loginService.  Login  (_username, _password);\n   }\n  ç„¶å¾Œæˆ‘å€‘åŸ·è¡Œæ¸¬è©¦å°±æœƒé€²å…¥ç¶ ç‡ˆç‹€æ…‹äº†~~~  åœ¨ç¶ ç‡ˆç‹€æ…‹å¾Œï¼Œæˆ‘å€‘å†å›åˆ°åŸæœ¬çš„LoginServiceç¨‹å¼ç¢¼ï¼Œçœ‹ä¸€ä¸‹æœ‰æ²’æœ‰å“ªéƒ¨åˆ†éœ€è¦åšRefactorçš„ï¼Œå¦‚æœä»¥å¯è®€æ€§ä¾†èªªï¼Œå…¶å¯¦æˆ‘å€‘å¯ä»¥æŠŠifçš„åˆ¤æ–·å…§å®¹ä½¿ç”¨ Extract Methodæç…‰å‡ºä¸€å€‹Invalid Methodï¼Œä¸€æ¨£æˆ‘å€‘å¿«é€Ÿä½¿ç”¨IDEçš„Qucik Actionå¿«é€Ÿåšé‡æ§‹ï¼Œé‡æ§‹å¾Œå¦‚ä¸‹ï¼Œæ­¤æ™‚æœƒçœ‹åˆ°Login Method Invalidé‚£æ®µçš„å¯è®€æ€§ç›¸å°æ–¼ä¹‹å‰å°±é«˜äº†è¨±å¤š     public   bool   Login  (  string   username  ,   string   password  )\n   {\n       User   user   =   _userRepoitory.  GetUser  (username);\n   \n       if   (  InvalidPassword  (password, user))\n       {\n           return   false  ;\n       }\n   \n       return   true  ;\n   }\n   \n   private   static   bool   InvalidPassword  (  string   password  ,   User   user  )\n   {\n       return   user   ==   null   ||   !  user.Password.  Equals  (password);\n   }\n  b. æ¢è¨æ¸¬è©¦èˆ‡é‡æ§‹  TDDéç¨‹ä¸­ï¼Œå°æ–¼å¦‚ä½•å¯«æ¸¬è©¦èˆ‡å¦‚ä½•é‡æ§‹éœ€è¦æœ‰ä¸€å®šçš„å¯¦ä½œèªçŸ¥ï¼Œé€™é‚Šç¨å¾®æ¦‚ç•¥æä¸€ä¸‹éç¨‹ä¸­è¼ƒå¸¸ä½¿ç”¨åˆ°çš„æŠ€å·§  I. é—œæ–¼å–®å…ƒæ¸¬è©¦  TDDä¸­çš„TestæŒ‡çš„å°±æ˜¯å–®å…ƒæ¸¬è©¦(Unit Test)ï¼Œå–®å…ƒæ¸¬è©¦é‡é»åœ¨æ–¼å¯«Product Codeé‚è¼¯æ®µçš„é©—è­‰ç¨‹å¼ç¢¼ã€‚å¦‚æˆ‘å€‘æåˆ°ç™»å…¥å¯†ç¢¼é©—è­‰çš„ä¾‹å­ï¼Œå¯†ç¢¼é©—è­‰å°±æ˜¯ä¸€å€‹åˆ¤æ–·ï¼Œåªè¦ç¨‹å¼ç¢¼æœ‰é—œä¿‚åˆ°ä¸€äº›é‚è¼¯åˆ¤æ–·èˆ‡é‹ç®—åˆ¤æ–·ã€‚åŸºæœ¬ä¸Šåœ¨é–‹ç™¼éƒ½éœ€è¦å¯«å–®å…ƒæ¸¬è©¦å»ä¿è­·æˆ‘å€‘çš„Product Codeã€‚å°±ç®—ä½ ä¸æ˜¯ä»¥TDDæµç¨‹å»åšé–‹ç™¼ï¼Œç›´æ¥å¾Product Codeé–‹ç™¼ï¼Œä¸€æ¨£è¦è£œæ¸¬è©¦ç¨‹å¼ç¢¼ï¼Œé€™æ¨£æ‰æ˜¯å«å®Œå–„çš„é–‹ç™¼è€ƒæ…®ã€‚é€šå¸¸æœƒæœ‰å¹¾å€‹æ³¨æ„è¦é»   å¦‚ä½•å¯«æ¸¬è©¦  æœ€åŸºç¤å°±æ˜¯å¦‚ä½•ä½¿ç”¨æ¸¬è©¦æ¡†æ¶ï¼ŒNetå¤§å¤šä½¿ç”¨Nunitï¼ŒJavaç‚ºJUnitã€‚è©²å¦‚ä½•ä½¿ç”¨æ­¤æ¸¬è©¦æ¡†æ¶å»å¯«æ¸¬è©¦ç‚ºTDDæœ€åŸºæœ¬è¦æ±‚ï¼Œå¦‚ä½•å¯«é€™éƒ¨åˆ†å¯ä»¥åƒè€ƒ  Nunit èˆ‡  JUnit çš„æ•™å­¸åƒè€ƒã€‚é—œéµæ¦‚å¿µæœ‰   å¦‚ä½•ç”¢ç”Ÿæ¸¬è©¦å°ˆæ¡ˆ  å¦‚ä½•æ’°å¯«æ¸¬è©¦ç¨‹å¼ç¢¼  æœ‰å“ªäº›å¸¸ç”¨æ¸¬è©¦å·¥å…·å¥—ä»¶è¼”åŠ©  å¦‚ä½•åµæ¸¬æ¸¬è©¦è¦†è“‹ç‡    æ¸¬è©¦ç¨‹å¼ç¢¼æ˜¯å¦å®¹æ˜“é–±è®€ï¼Œè¶Šè²¼è¿‘è‡ªç„¶èªè¨€è¶Šå¥½  ä¾‹å¦‚æˆ‘å€‘æœ‰ä¸€å€‹æ¸¬è©¦æƒ…å¢ƒç‚ºä¸€å€‹è³¼ç‰©è»Šè³¼ç‰©å¾Œçµç®—é‡‘é¡éœ€æ­£ç¢ºï¼Œæˆ‘å€‘å…ˆä¾†çœ‹ä¸€æ®µæ¸¬è©¦ç¨‹å¼å¦‚ä¸‹ï¼Œé€™æ®µç¨‹å¼ç¢¼åŸºæœ¬ä¸Šåªæœ‰å·¥ç¨‹å¸«çœ‹å¾—æ‡‚ï¼Œé›¢ç°¡æ˜“çš„è‡ªç„¶èªè¨€é‚„æœ‰ä¸€æ®µè·é›¢     [  TestMethod  ]\n   public   void   test_total_should_be_the_sum_of_all_subtotals_plus_shpping_fee  ()\n   {\n       #  region   Given\n       //the cart has 5 Erasers\n       ShoppingCart   cart   =   new   ShoppingCart  ();\n       cart.  AddShoppingItem  (  new   BaseShoppingModel  ()\n       {\n           Name   =   \"Erasers\"  ,\n           UnitPrice   =   10  ,\n           Qty   =   5  ,\n           MaxPurchaseQty   =   10  ,\n       });\n   \n       #  endregion\n   \n       #  region   When\n       //the customer adds 10 pencils to the cart\n       cart.  AddShoppingItem  (  new   BaseShoppingModel  () \n       { \n           Name  =  \"Pencil\"  ,\n           UnitPrice   =   20  ,\n           Qty   =   10  ,\n           MaxPurchaseQty   =   10  ,\n       });\n       #  endregion\n   \n       #  region   Then            \n       int   shoppingFee   =   cart.  GetTotalShoppingFee  ();\n       Assert.  AreEqual  (shoppingFee,   310  );\n       #  endregion\n   \n   }\n  æˆ‘å€‘çœ‹ä¸€ä¸‹å¦ä¸€æ®µæ¸¬è©¦ç¨‹å¼ç¢¼å¦‚ä¸‹ï¼Œé€™æ®µç¨‹å¼ç¢¼é©—è­‰æƒ…å¢ƒèˆ‡ä¸Šè¿°ä¸€æ¨£ï¼Œç•¶ç›¸å°èµ·ä¾†ä»–å°±éå¸¸æ·ºé¡¯æ˜“æ‡‚ï¼Œå¾ˆæ˜ç¢ºçœ‹å‡ºGivenå°±æ˜¯åœ¨åšæ§‹ç‰©æƒ…å¢ƒï¼ŒWhenç‚ºå°‡ç‰©å“æ”¾ç½®è³¼ç‰©è»Šï¼ŒThenå‰‡æ˜¯åšçµç®—åˆ¤æ–·ã€‚  æ‰€ä»¥ä¸åªæ§‹ç‰©Methodå‘½åé ˆçœ‹å‡ºæ¸¬è©¦Caseå¤–ï¼Œæ•´å€‹æ¸¬è©¦å…§å®¹æµç¨‹ç›¡é‡èƒ½æ¥è¿‘è‡ªç„¶èªè¨€ä¸€ç›®äº†ç„¶æœ€å¥½     [  SetUp  ]\n   public   void   Setup  ()\n   {\n       Cart   =   new   Cart  ();\n       Erasier   =   new   CardItem  (  name  :   \"Erasiers\"  ,   unitPrice  :   10  ,   maxPurchaseQty  :   10  );\n       Pencial   =   new   CardItem  (  name  :   \"Pencial\"  ,   unitPrice  :   20  ,   maxPurchaseQty  :   10  );\n       BluePen   =   new   CardItem  (  name  :   \"BluePen\"  ,   unitPrice  :   30  ,   maxPurchaseQty  :   10  );\n       Ruler   =   new   CardItem  (  name  :   \"Ruler\"  ,   unitPrice  :   30  ,   maxPurchaseQty  :   10  );\n       Notebook   =   new   CardItem  (  name  :   \"Notebook\"  ,   unitPrice  :   50  ,   maxPurchaseQty  :   5  );\n       PencilSharpener   =   new   CardItem  (  name  :   \"PencilSharpener\"  ,   unitPrice  :   50  ,   maxPurchaseQty  :   5  );\n   }\n   \n   [  Test  ]\n   public   void   Test_total_should_be_the_sum_of_all_subtotals_plus_shipping_fee  ()\n   {\n       // Given \n       Erasier.  Order  (  5  );\n       Pencial.  Order  (  5  );\n   \n       // When\n       Add_To_Cart  (Erasier, Pencial);\n   \n       // Then\n       Cart.TotalPrice.  Should  ().  Be  (  150  );\n   }\n   æ ¹æ“šæƒ…å¢ƒå–„ç”¨æ¸¬è©¦å‡ç‰©ä»¶  åœ¨æˆ‘å€‘å¯«å–®å…ƒæ¸¬è©¦éç¨‹ä¸­ï¼Œæ¸¬è©¦çš„Methodå¦‚æœæœ‰åƒè€ƒåˆ°ä¸€äº›å…¶ä»–ç‰©ä»¶ï¼Œä»–ä¸¦ä¸ä¸€å®šæœƒèˆ‡è¦æ¸¬è©¦çš„é‚è¼¯å€æ®µæœ‰é—œä¿‚ï¼Œåˆæˆ–æ˜¯éœ€è¦æ¨¡æ“¬å¯¦éš›è³‡æ–™åŸºç¤å»ºè¨­å±¤æ’ˆå–è³‡æ–™çš„å‹•ä½œï¼Œä½†åˆä¸ç›´æ¥èˆ‡DBé€£ç·šï¼Œæ­¤æ™‚æˆ‘å€‘å°±æœƒéœ€è¦è£½ä½œå‡ç‰©ä»¶æ³¨å…¥åˆ°æˆ‘å€‘è¦æ¸¬è©¦çš„ç‰©ä»¶ã€‚  é€™äº›å‡ç‰©ä»¶é¡åˆ¥åˆ†ç‚ºDummy ã€Stubã€Spyã€Mockã€Fakeï¼Œå¦‚è¦äº†è§£å¯åƒè€ƒTeddyæ–‡ç« (  é»æˆ‘ )ã€‚  II. é—œæ–¼é‡æ§‹  åœ¨TDDéç¨‹ï¼Œæˆ‘å€‘ç”±ç´…è½‰ç¶ ç‡ˆå¾Œï¼Œæ¥è‘—å°±æœƒé€²å…¥é‡æ§‹éšæ®µã€‚é‡æ§‹ç›®çš„åœ¨æ–¼    æé«˜å¯è®€æ€§ï¼š  è®“ç¨‹å¼ç¢¼æ›´å®¹æ˜“è¢«äººç†è§£ã€‚   æ¶ˆé™¤é‡è¤‡ï¼š  ç§»é™¤é‡è¤‡çš„ä»£ç¢¼ï¼Œä½¿å¾—æœªä¾†çš„ä¿®æ”¹æ›´å®¹æ˜“ã€‚   æé«˜å¯ç¶­è­·æ€§ï¼š  ä½¿ç¨‹å¼æ›´å®¹æ˜“ä¿®æ”¹å’Œæ“´å±•ã€‚   æ”¹å–„è¨­è¨ˆï¼š  ä½¿ç¨‹å¼çµæ§‹æ›´åˆç†ï¼Œæ›´ç¬¦åˆè¨­è¨ˆåŸå‰‡ã€‚  è€Œé‡æ§‹ç™¼ç”Ÿæƒ…å¢ƒé€šå¸¸æœƒåœ¨é™¤éŒ¯ã€å£å‘³é“ç”¢ç”Ÿèˆ‡æ¸¬è©¦æ™‚æœƒå»åšé€™ä»¶äº‹æƒ…ï¼Œè€ŒTDDå°±æ˜¯è¦å¯«æ¸¬è©¦ï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šä¸€å®šæœƒé‡åˆ°é‡æ§‹é€™å€‹ç’°ç¯€ã€‚åœ¨TDDæˆ‘å€‘æœƒå¸¸ç”¨çš„é‡æ§‹æŠ€å·§æœ‰    æå–æ–¹æ³•ï¼ˆExtract Methodï¼‰ï¼š  å¦‚æœä¸€å€‹æ–¹æ³•å¤ªé•·æˆ–å¤ªè¤‡é›œï¼Œä½ å¯ä»¥å°‡éƒ¨åˆ†ä»£ç¢¼æå–åˆ°æ–°çš„æ–¹æ³•ä¸­ï¼Œä½¿ä¸»æ–¹æ³•æ›´å®¹æ˜“ç†è§£ã€‚   åˆä½µé‡è¤‡çš„ä»£ç¢¼ï¼ˆRemove Duplicated Codeï¼‰ï¼š  æ‰¾åˆ°ä¸¦æ¶ˆé™¤é‡è¤‡çš„ä»£ç¢¼ï¼Œé€šå¸¸å¯ä»¥æå–åˆ°å…±ç”¨çš„æ–¹æ³•æˆ–é¡ä¸­ã€‚   é‡æ–°å‘½åï¼ˆRenameï¼‰ï¼š  é€šéæ›´æ”¹è®Šé‡ã€æ–¹æ³•æˆ–é¡çš„åç¨±ä½¿ä¹‹æ›´å…·æè¿°æ€§ï¼Œä»¥æé«˜ä»£ç¢¼çš„å¯è®€æ€§ã€‚   ç§»å‹•ç‰¹æ€§ï¼ˆMove Featureï¼‰ï¼š  é‡æ–°å®‰æ’æ–¹æ³•æˆ–å±¬æ€§çš„ä½ç½®ï¼Œä½¿å…¶èˆ‡ç›¸é—œçš„åŠŸèƒ½æ›´æ¥è¿‘ï¼Œä¾‹å¦‚å°‡æ–¹æ³•å¾ä¸€å€‹é¡ç§»å‹•åˆ°å¦ä¸€å€‹æ›´ç›¸é—œçš„é¡ä¸­ã€‚  åˆ©å¦‚æˆ‘å€‘Run TDDå°ç¯€å°±æœ‰ä½¿ç”¨Extract Methodå°‡ifå€æ®µçš„ç¨‹å¼ç¢¼æèµ·å‡ºä¸€å€‹Invaildçš„æ–¹æ³•ã€‚åŸºæœ¬ä¸Šé‡æ§‹ä¹Ÿæ˜¯ä¸€é–€å¾ˆæ·±çš„å­¸å•ï¼Œæœ‰èˆˆè¶£å¯ä»¥å»çœ‹é€™é‡æ§‹å°è—æ›¸(é€£çµé»æˆ‘)ã€‚ä½†é‡æ§‹çš„ä¸Šæ‰‹å¾ˆåƒå¯¦éš›ä½¿ç”¨ç¶“é©—èˆ‡æƒ…å¢ƒæ¼”ç·´ï¼Œç´”çœ‹ç†è«–æœƒå¾ˆé›£æ¶ˆåŒ–ã€‚å¦å¤–é‡å°TDDé‡æ§‹æœ‰ä¸€å€‹é‡æ§‹ä¹å¼æ€è€ƒè„ˆçµ¡ï¼Œå¯åƒè€ƒæ­¤ç¯‡(é»æˆ‘)ã€‚æ­¤ä¹å¼æœƒå¸¶å‡ºæ•´å€‹é‡æ§‹é‡è¦çš„ç’°ç¯€è„ˆçµ¡ï¼ŒåŒ…å«å¦‚ä½•åšå¥½éš”é›¢ç›¸ä¾é€™ä»¶äº‹æƒ…ã€‚  III. é‡æ§‹æ€¥é€Ÿé–‹ç™¼  TDDè¦é€²å…¥å¿ƒæµç‹€æ…‹ï¼Œæˆ‘å€‘éœ€è¦é…åˆç†±éµçš„ä½¿ç”¨ã€‚å¿ƒæµçš„æ„æ€æ˜¯é€²å…¥å…¨å°ˆæ³¨æ€è€ƒé–‹ç™¼ï¼Œéç¨‹å…¨ç¨‹é€ééµç›¤ä¾†ç”¢ç”Ÿç¨‹å¼ç¢¼ï¼Œç†±éµé”æˆè¦æ±‚åŒ…æ‹¬   å¦‚ä½•å¿«é€Ÿæ‰¾åˆ°è¦ä¿®æ”¹çš„ç¨‹å¼ç¢¼å€æ®µ (å°èˆªæœç´¢)  å¦‚ä½•å¿«é€Ÿç”Ÿæˆç‰©ä»¶æª”æ¡ˆåˆ°æŒ‡å®šè·¯å¾‘  å¦‚ä½•å¿«é€Ÿé‡æ§‹ (ç¨‹å¼ç¢¼é‡æ§‹)  é€™äº›éƒ½éœ€è¦é…åˆå·¥å…·èˆ‡ç†±éµè¨­ç½®çš„æ­é…ï¼Œä¾‹å¦‚JetBrainsçš„Resharperï¼Œæˆ–æ˜¯Riderèˆ‡IntelJ IDEï¼Œéƒ½æœ‰è¨±å¤šå°èˆªæœç´¢èˆ‡é‡æ§‹çš„å¿«é€Ÿè¨­ç½®ï¼Œèƒ½æé«˜é–‹ç™¼äººå“¡çš„ç”Ÿç”¢åŠ›ï¼Œè®“é–‹ç™¼äººå“¡åœ¨é–‹ç™¼éç¨‹ä¸­ä¸æœƒå› ç‚ºéœ€æ€è€ƒè¦é»é¸ç•«é¢å“ªå€‹å·¥å…·å€å¡Šè€Œç”¢ç”Ÿæ€è€ƒæ–·é»ã€‚é€™ä¹Ÿæœƒæ˜¯TDDé–‹ç™¼è¦é»ç’°ç¯€ä¹‹ä¸€(ä½†å„ªå…ˆæ¬Šä¸æœƒæ˜¯æœ€å‰é¢)ã€‚Part2 å‰‡æœƒç‚ºé€™ä¸€å¡Šåšä¸€å€‹è©³ç´°çš„è¨­ç½®è§£èªªèˆ‡æƒ…å¢ƒæ¼”ç·´ã€‚  c. é—œæ–¼å·¥å…·  é€™å€‹ç« ç¯€ç¨å¾®åšå€‹å·¥å…·æ•´ç†   C#  Nunit : æ¸¬è©¦æ¡†æ¶  NSubstitute : æ›¿èº«ç‰©ä»¶å·¥å…·  FluentAssertions : ç·¨å¯«æ›´å…·å¯è®€æ€§å’Œæ›´å¯Œè¡¨é”åŠ›çš„å–®å…ƒæ¸¬è©¦æ–·è¨€  Specflow :    Gherkin ç·¨å¯«èˆ‡æ¸¬è©¦ç¨‹å¼ç¢¼ç”¢ç”Ÿå·¥å…·  Resharper : é–‹ç™¼åŠ©æ‰‹å·¥å…·ï¼Œæä¾›é–‹ç™¼äººå“¡æ›´å¿«é€Ÿçš„ç·¨è¼¯åŠŸèƒ½  Java  JUnit : æ¸¬è©¦æ¡†æ¶  Mockito : æ›¿èº«ç‰©ä»¶å·¥å…·  AssertJ : ç·¨å¯«æ›´å…·å¯è®€æ€§å’Œæ›´å¯Œè¡¨é”åŠ›çš„å–®å…ƒæ¸¬è©¦æ–·è¨€  Cucumber  :    Gherkin ç·¨å¯«èˆ‡æ¸¬è©¦ç¨‹å¼ç¢¼ç”¢ç”Ÿå·¥å…·  IntelJ : Javaé–‹ç™¼IDEï¼Œæœ¬èº«ä¹Ÿæä¾›é–‹ç™¼äººå“¡æ›´å¿«é€Ÿçš„ç·¨è¼¯åŠŸèƒ½  5. å¤©äººåˆä¸€  a. æŠ€èƒ½æ¨¹  åŸºæœ¬ä¸ŠTDDç‚ºä¸€å€‹é–‹ç™¼æµç¨‹ï¼Œè€Œéç¨‹ä¸­çš„æ€ç¶­èˆ‡æŠ€è¡“åŒ…å«é¢å¾ˆå»£ï¼Œå°æ–¼ä¸€é–‹å§‹è»Ÿé«”æ–°æ‰‹å¾ˆé›£å…¥å¿ƒã€‚  ç¡¬æŠ€è¡“å±¤é¢åŒ…å«   å¦‚ä½•æ’°å¯«æ¸¬è©¦åŠå¦‚ä½•æ’°å¯«å¥½çš„æ¸¬è©¦  å¥½çš„è»ŸåŠŸåŸºç¤ï¼ŒOOèˆ‡  SOLID åŸºæœ¬ï¼Œéœ€æœ‰Clean CodeåŸºç¤ä¸”æœ‰ä¸€å®šçš„Patternæ‡‰ç”¨ç¶“é©—ï¼Œæ›´é€²éšåˆ°æ¶æ§‹å±¤é¢çš„è¨­è¨ˆ  é‡æ§‹ï¼Œé€™æœƒå»ºç½®åœ¨å¥½çš„è»ŸåŠŸåŸºç¤ï¼Œä¸”å°DIæ¦‚å¿µèˆ‡ä»‹é¢éš”é›¢ç›¸ä¾éƒ½è¦æœ‰ä¸€å®šçš„æ¦‚å¿µ  ç†±éµGen Code & Refactorä½¿ç”¨ï¼Œæ•ˆç›Šåº¦é€™æœƒå»ºç½®åœ¨å‰ä¸‰é»åŸºç¤ä¸Šï¼Œæ­¤é»æ‰å¯ç™¼æ®å‡ºæœ€å¤§æ•ˆæœ  è»ŸæŠ€è¡“å±¤é¢é ˆå°V-Modelæœ‰ä¸€å®šçš„èªçŸ¥ï¼Œæ­¤ç‚ºè»Ÿé«”é–‹ç™¼æµç¨‹æ¨¡å‹ï¼Œå¼·èª¿éç¨‹ä¸­çš„æ¸¬è©¦æ´»å‹•ã€‚æ­¤ç« ç¯€æ²’æï¼Œå› ç‚ºåŒ…å«ç¯„åœä¹Ÿå¾ˆå¤§ã€‚ä¹‹ä¸­åŒ…å«éœ€æ±‚åˆ†æã€ç³»çµ±è¨­è¨ˆã€æ¶æ§‹è¨­è¨ˆå’Œå–®å…ƒè¨­è¨ˆã€‚é€™äº›éšæ®µæ˜¯æŒ‰é †åºé€²è¡Œçš„ï¼Œæ¯å€‹éšæ®µçš„è¼¸å‡ºæˆç‚ºä¸‹ä¸€å€‹éšæ®µçš„è¼¸å…¥ã€‚ç„¶å¾Œå°æ‡‰åˆ°å–®å…ƒæ¸¬è©¦ã€é›†æˆæ¸¬è©¦ã€ç³»çµ±æ¸¬è©¦å’Œé©—æ”¶æ¸¬è©¦ã€‚æ¯å€‹ç’°ç¯€éƒ½æœ‰å…¶ä¸€å®šçš„å°ˆæ¥­åº¦ï¼Œéœ€æœ‰ä¸€å®šçš„äº†è§£ï¼Œæ‰æœƒè®“æ•´å€‹è¨è«–è¨­è¨ˆéç¨‹é€²å…¥ç‹€æ³ã€‚  TDDé›–ç„¶æ˜¯ä¸€å€‹æµç¨‹å½¢å¼çš„é–‹ç™¼ï¼Œæœ‰é»åƒæ˜¯ä¸€å¥—å¯¦éš›å¯ä»¥æ‰“å‡ºæœ‰å‚·å®³åŠ›çš„æŠ€èƒ½ï¼Œä½†é€™æŠ€èƒ½çš„å¼·åº¦å¯ä»¥æ‰“å‡ºå¤šé«˜çš„å‚·å®³ï¼Œè·Ÿè§’è‰²æœ¬èº«ç´ è³ªåŠè¢«å‹•æŠ€(è»Ÿç¡¬å¯¦åŠ›)èƒ½æœ‰ä¸€å®šçš„ç›¸ä¾æ€§ï¼Œå†æ­é…è£å‚™()(å·¥å…·ä½¿ç”¨)çš„åŠ æˆæ‰“å‡ºæ›´é«˜çš„å‚·å®³ã€‚æ‰€ä»¥ä»–ç‰½æ‰¯çš„ç’°ç¯€æœƒè »å¤šï¼Œä½¿ç”¨æ¨¡ä»¿ä¸é›£ï¼Œè¦èæœƒè²«é€šæ•´å€‹é–‹æ‚Ÿç†è§£éœ€è¦æœ‰ä¸€å®šçš„åŸºç¤ã€‚  b. TDDã€BDDèˆ‡DDD  é™¤äº†TDDï¼Œé‚„æœ‰å…¶ä»–é–‹ç™¼æŠ€å·§å«BDDèˆ‡DDDï¼ŒBDDæˆ‘å€‘ç« ç¯€æœ‰æåˆ°ï¼Œå¤§è‡´å¯ä»¥æ„Ÿå—åˆ°Acceptance testingèˆ‡**Gherkinçš„æ„Ÿå—åº¦å·®ç•°ã€‚åŸºæœ¬ä¸Šä¸å¤ªå¯èƒ½ç”¨ç´”TDDé–‹ç™¼ï¼Œå› ç‚ºTDDåªæ˜¯é–‹ç™¼ä¸­å¯¦ä½œçš„ä¸€å€‹ç’°ç¯€ï¼Œä»–æ¯”è¼ƒåå‘åº•å±¤é–‹ç™¼æ€ç¶­ï¼Œæœƒè¼ƒé è¿‘é–‹ç™¼è€…ã€‚æ‰€ä»¥æˆ‘å€‘éœ€è¦ç†è§£è¼ƒé«˜å±¤çš„ä½¿ç”¨æƒ…å¢ƒï¼Œé€™æ¨£æ‰å¯ä»¥è®“åº•å±¤è¼ƒè²¼è¿‘æ–¼å¯¦éš›çš„ä½¿ç”¨è€…æƒ…å¢ƒã€‚æ­¤æ™‚æˆ‘å€‘å°±å¯ä»¥ä»¥BDDè¡Œç‚ºé©…å‹•é–‹ç™¼çš„æ¢è¨å»è¼”åŠ©ã€‚ä½†å¦‚æœæ›´è¤‡é›œçš„æƒ…å¢ƒä¸”æœ‰è¤‡é›œçš„Contextäº’å‹•ï¼Œæ­¤æ™‚é€šå¸¸æœƒä»¥æœå‹™æ¶æ§‹è§’åº¦å»é–‹ç™¼ç³»çµ±ï¼ŒDomainç‰©ä»¶è¦è¨­è¨ˆå¾—å¥½ï¼Œæ‰èƒ½åœ¨è¤‡é›œçš„Contextäº’å‹•æœ‰ä¸€å®šçš„è§£å¶ï¼Œåœ¨é€™ç‹€æ³æˆ‘å€‘å°±æœƒä»¥DDDè§’åº¦å»é–‹ç™¼ï¼Œé…åˆé ˜åŸŸå°ˆå®¶è®“Domain Modelèƒ½å®šç¾©æ›´æ˜ç¢ºã€‚**å¤§è‡´ç†è§£ä¹‹é–“çš„è„ˆçµ¡ç›¸ä¾æ€§å¾Œï¼Œæœƒæœ‰ç¨®èæœƒè²«é€šçš„æ„Ÿè¦ºï¼Œé‡å°æƒ…å¢ƒå»åšåˆ‡æ›è¨­è¨ˆä½¿ç”¨æœƒæ›´å¾—å¿ƒæ‡‰æ‰‹ã€‚  é †ä¾¿ä¸€æDDDèˆ‡æ•´æ½”æ¶æ§‹æœ‰å¾ˆé«˜çš„ç›¸ä¾æ€§ï¼Œè¦è¨­è¨ˆå¾—å¥½å°æ–¼åœ“å½¢çš„æ•´æ½”æ¶æ§‹è¦æœ‰ä¸€å®šçš„èªçŸ¥ã€‚  html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}"},{"id":"content:3.web-api:chapter2.md","path":"/web-api/chapter2","dir":"web-api","title":"ç¬¬2ç«  EndPointè¨­è¨ˆèˆ‡è«‹æ±‚å½¢å¼","description":"","keywords":["2.1 è¨­è¨ˆé€šéAPIå…¬é–‹çš„åŠŸèƒ½","2.2 API EndPointçš„è¨­è¨ˆæ€æƒ³","2.3 HTTPæ–¹æ³•å’ŒEndPoint","2.4 APIç«¯é»çš„è¨­è¨ˆ","2.5 æœå°‹èˆ‡æŸ¥è©¢åƒæ•¸çš„è¨­è¨ˆ","é—œæ–¼ç™»éŒ„OAuth2.0 (2.6 ~ 2.10)"],"body":"  2.1 è¨­è¨ˆé€šéAPIå…¬é–‹çš„åŠŸèƒ½  SNSåœ¨ç·šæœå‹™åŠŸèƒ½   ä½¿ç”¨è€…è¨»å†Š  ç™»å…¥  ç²å–è‡ªå·±çš„è³‡è¨Š  æ›´æ–°è‡ªå·±çš„è³‡è¨Š  å–å¾—ä½¿ç”¨è€…è³‡è¨Š  æœå°‹ä½¿ç”¨è€…  æ·»åŠ å¥½å‹  åˆªé™¤å¥½å‹  å–å¾—å¥½å‹åˆ—è¡¨  æœå°‹å¥½å‹  ç™¼é€æ¶ˆæ¯  å–å¾—å¥½å‹çš„è¨Šæ¯  ç·¨è¼¯è¨Šæ¯  åˆªé™¤è¨Šæ¯  å¥½å‹å‹•æ…‹åˆ—è¡¨  ç‰¹å®šç”¨çš„å‹•æ…‹åˆ—è¡¨  ç™¼è¡¨å‹•æ…‹è¨Šæ¯  ç·¨è¼¯å‹•æ…‹è¨Šæ¯  åˆªé™¤å‹•æ…‹è¨Šæ¯  2.2 API EndPointçš„è¨­è¨ˆæ€æƒ³  EndPointçš„åŸºæœ¬è¨­è¨ˆ  æ€éº¼è¨­è¨ˆä¸€å€‹å„ªç§€çš„URIï¼Œæœ‰ä¸€å€‹é‡è¦çš„åŸå‰‡   å®¹æ˜“è¨˜æ†¶ï¼ŒURIåŒ…å«çš„åŠŸèƒ½ä¸€ç›®äº†ç„¶  ğŸ’¡  å®¹æ˜“è¨˜æ†¶çš„åŸå‰‡å¦‚ä¸‹   çŸ­å°ä¾¿æ–¼è¼¸å…¥çš„URI  äººå¯ä»¥è®€æ‡‚çš„URI  æ²’æœ‰å¤§å°å¯«æ··ç”¨çš„URI  ä¿®æ”¹æ–¹ä¾¿çš„URI  ä¸æœƒæ›éœ²ä¼ºæœå™¨æ¶æ§‹çš„URI  è¦å‰‡çµ±ä¸€çš„URI   çŸ­å°ä¾¿æ–¼è¼¸å…¥çš„URI  ğŸ’€ åä¾‹     http://api.example.com/service/api/search\n  ğŸ’¡ æ­£ä¾‹     http://api.example.com/search\n  âœ… çµè«–   å°‡URIä½¿ç”¨çŸ­å°ã€ç°¡å–®çš„æ–¹å¼é€²è¡Œè¡¨é”ï¼Œæ›´æ˜“æ–¼ç†è§£å’Œè¨˜æ†¶ã€‚  äººå¯ä»¥è®€æ‡‚çš„URI  ğŸ’€ åä¾‹     http://api.example.com/sv/u\n  ğŸ’¡ æ­£ä¾‹     http://api.example.com/products/12345\n  ğŸ“¦ è£œå……  APIçš„è¨­è¨ˆæŸ¥è©¢æ™‚ï¼Œè©²ä½¿ç”¨  search é‚„æ˜¯  find è©å½™?  é€šå¸¸ä½¿ç”¨  search ä¾†è¡¨ç¤ºï¼Œ  search è¡¨ç¤ºåœ¨æŸå€‹åœ°æ–¹å°‹æ‰¾ï¼Œè€Œ  find å‰‡æ˜¯å°‹æ‰¾æŸå€‹ç‰¹å®šç‰©å“ã€‚  âœ… çµè«–   ç›¡é‡å°‘ç”¨ç¸®å¯«ï¼Œé©ç•¶çš„ä½¿ç”¨å®Œæ•´çš„è‹±æ–‡å–®å­—ä¾†è¡¨ç¤ºã€‚  æ²’æœ‰å¤§å°å¯«æ··ç”¨çš„URI  ğŸ’€ åä¾‹     http://api.example.com/Users/12345\n   http://example.com/API/getUserName\n  ğŸ’¡ æ­£ä¾‹     http://api.example.com/users/12345\n  ğŸ“¦ è£œå……  å¦‚æœé‡åˆ°å…©ç¨®å¤§å°å¯«çš„URIé€²è¡Œæ··ç”¨æ™‚ï¼Œæ‡‰è©²å¦‚ä½•é€²è¡Œè™•ç†?     http://example.com/USERS/12345\n   http://example.com/users/12345\n  åœ¨æ™®é€šçš„Webç¶²ç«™ä¸‹ï¼Œå¦‚æœæ¡ç”¨äº†ä¸è«–å¤§å°å¯«éƒ½æœƒè¿”å›ç›¸åŒçš„çµæœæœƒå‡ºç¾ä¸€ç¨®å•é¡Œï¼Œæœƒå°è‡´Googleç­‰æœå°‹å¼•    æ“æœƒèªç‚ºæœ‰å¤šå€‹é é¢è¿”å›äº†ç›¸åŒçš„çµæœè€Œå°è‡´ç¶²ç«™æ’åé€²è¡Œä¸‹é™ã€‚  åƒè€ƒä¸‹åˆ—æœå‹™ï¼Œç•¶é‡åˆ°å¤§å¯«å­—æ¯çš„URIæ™‚ï¼Œæœƒè‡ªå‹•è¿”å›404     åœ¨ç·šæœå‹™  è™•ç†æ··æœ‰å¤§å¯«å­—æ¯çš„URL    Foursqare  å‡ºéŒ¯404   Github  å‡ºéŒ¯404   Tumblr  å‡ºéŒ¯404  âœ… çµè«–   ç›¡é‡ä¸è¦ä½¿ç”¨å¤§å°å¯«å­—æ¯æ··ç”¨æœƒé€ æˆAPIé›£ä»¥ç†è§£ï¼Œä¸€èˆ¬æ¨™æº–çš„åšæ³•æ˜¯ï¼Œçµ±ä¸€ä½¿ç”¨å°å¯«çš„URIã€‚  ä¿®æ”¹æ–¹ä¾¿çš„URI  ä¿®æ”¹æ–¹ä¾¿åœ¨è‹±èªæ–‡èªæ„ç‚º  Hackable ã€‚ä¿®æ”¹æ–¹ä¾¿çš„URIæŒ‡çš„æ˜¯èƒ½å°‡æŸå€‹URIéå¸¸å®¹æ˜“ä¿®æ”¹ç‚ºå¦å¤–ä¸€å€‹URIã€‚    é€šå¸¸æ‡‰ç”¨åœ¨ç²å–æŸç¨®å•†å“ã€‚  ğŸ’€ åä¾‹  æŒ‰ç…§è³‡æ–™åº«çš„è³‡æ–™è¡¨é€²è¡Œçµæ§‹å€åˆ†ï¼Œä¾‹å¦‚: 1 ~ 300000å„²å­˜åˆ°alphaè³‡è¡¨è¡¨å…§ã€‚     # IDçš„ç¯„åœ 1 ~ 300000\n   http://api.example.com/v1/items/alpha/:id\n   \n   # IDçš„ç¯„åœ 400001 ~ 500000\n   http://api.example.com/v1/items/beta/:id\n   \n   # IDçš„ç¯„åœ 500001 ~ 700000\n   http://api.example.com/v1/items/gamma/:id\n   \n   # IDçš„ç¯„åœ 700001 ~\n   http://api.example.com/v1/items/delta/:id\n  ğŸ’¡ æ­£ä¾‹     http://api.example.com/v1/items/123456\n  âœ… çµè«–   ç›¡é‡è®“URIçš„å»¶å±•æ€§ä½³(é€™é‚ŠæŒ‡çš„æ˜¯/items/{id})ï¼Œå¯ä»¥è—‰ç”±è¼¸å…¥ä¸åŒçš„ç·¨è™Ÿï¼Œä¾†ä¿®æ”¹URIï¼Œè€Œä¸æ˜¯å¿…é ˆ    è¦å»çŒœæ¸¬ã€‚  ä¸æœƒæ›éœ²ä¼ºæœå™¨æ¶æ§‹çš„URI  ğŸ’€ åä¾‹     http://api.example.com/cgi-bin/get_user.php?user  =100\n  ğŸ’¡ æ­£ä¾‹     http://api.example.com/user/100\n  âœ… çµè«–   ä¸è¦å°‡ç„¡æ„ç¾©çš„è³‡è¨Šæš´éœ²å‡ºä¾†ã€‚ä¾‹å¦‚:    cgi-bin ï¼Œå¯ä»¥çŒœæ¸¬ä½ å¯èƒ½æ˜¯ä½¿ç”¨CGIçš„æ–¹å¼é‹è¡Œã€‚   get_user.php ï¼Œå¯ä»¥çŒœæ¸¬ä½ å¯èƒ½æ˜¯ä½¿ç”¨phpé€²è¡Œæ’°å¯«ã€‚  è¦å‰‡çµ±ä¸€çš„URI  ğŸ’€ åä¾‹     # ç²å–å¥½å‹è³‡è¨Š\n   http://api.example.com/friends?id  =100\n   \n   # ç™¼é€å¥½å‹è³‡è¨Š\n   http://api.example.com/friend/100/message\n  ğŸ’¡ æ­£ä¾‹     # ç²å–å¥½å‹è³‡è¨Š\n   http://api.example.com/friends/100\n   \n   # ç™¼é€å¥½å‹è³‡è¨Š\n   http://api.example.com/friends/100/message\n  âœ… çµè«–   çµ±ä¸€URIçš„è¨­è¨ˆï¼Œè®“ä½¿ç”¨è€…æ˜“æ–¼ç†è§£ã€‚  2.3 HTTPæ–¹æ³•å’ŒEndPoint     æ–¹æ³•åç¨±  èªªæ˜    GET  ç²å–è³‡æº   POST  æ–°å¢è³‡æº   PUT  æ›´æ–°å·²æœ‰è³‡æº   DELETE  åˆªé™¤è³‡æº   PATCH  æ›´æ–°éƒ¨åˆ†è³‡æº   HEAD  ç²å–è³‡æºçš„Metadataè³‡è¨Š   Metedataç‚ºæè¿°è³‡æ–™çš„è³‡æ–™ï¼Œèˆ‰ä¾‹ï¼šæè¿°HTML5é€™ä»½æ–‡ä»¶çš„è³‡æ–™ã€‚   \nMetedataä¸æœƒå‘ˆç¾åœ¨ç•«é¢ä¸Šï¼Œåªæœƒçµ¦ç€è¦½å™¨å’Œæœå°‹å¼•æ“æŸ¥çœ‹ã€‚    https://ithelp.ithome.com.tw/articles/10237545     2.4 APIç«¯é»çš„è¨­è¨ˆ     ç›®çš„  EndPoint  æ–¹æ³•  å…¶ä»–ç›¸åŒ    ä½¿ç”¨è€…è¨»å†Š   http://api.example.com/v1/users       http://api.example.com/v1/auth/sign       http://api.example.com/v1/auth/register  POST  å…¶ä»–ç›¸åŒ   ç™»å…¥   http://api.example.com/v1/auth/login  POST    ç²å–è‡ªå·±çš„è³‡è¨Š   http://api.example.com/v1/users/me       http://api.example.com/v1/auth/me  GET    æ›´æ–°è‡ªå·±çš„è³‡è¨Š   http://api.example.com/v1/users/me       http://api.example.com/v1/auth/me  PUT    å–å¾—ä½¿ç”¨è€…è³‡è¨Š   http://api.example.com/v1/users/:id       http://api.example.com/v1/users/{id}  GET  æœå°‹ä½¿ç”¨è€…   å–å¾—ä½¿ç”¨è€…åˆ—è¡¨   http://api.example.com/v1/users  GET    å–å¾—å¥½å‹åˆ—è¡¨   http://api.example.com/v1/users/:id/friends  GET    æ·»åŠ å¥½å‹   http://api.example.com/v1/users/:id/friends  POST    åˆªé™¤å¥½å‹   http://api.example.com/v1/users/:id/friends/:id  DELETE    æœå°‹å¥½å‹   http://api.example.com/v1/users/:id/friends/:id  GET    ç™¼é€æ¶ˆæ¯   http://api.example.com/v1/friends/:id/message  POST    å–å¾—å¥½å‹çš„è¨Šæ¯   http://api.example.com/v1/friends/:id  GET    ç·¨è¼¯è¨Šæ¯   http://api.example.com/v1/friends/:id  PUT    åˆªé™¤è¨Šæ¯   http://api.example.com/v1/friends/:id  DELETE    å¥½å‹å‹•æ…‹åˆ—è¡¨   http://api.example.com/v1/users/:id/friends/updates  GET    å–å¾—ç‰¹å®šä½¿ç”¨è€…çš„å‹•æ…‹è¨Šæ¯   http://api.example.com/v1/users/:id/updates  GET    ç™¼è¡¨å‹•æ…‹è¨Šæ¯   http://api.example.com/v1/updates  POST    ç·¨è¼¯å‹•æ…‹è¨Šæ¯   http://api.example.com/v1/updates/:id  PUT    åˆªé™¤å‹•æ…‹è¨Šæ¯   http://api.example.com/v1/updates/:id  DELETE     :id ç‚ºä½”ä½ç¬¦è™Ÿ  2.4.1 è¨ªå•è³‡æºçš„EndPointè¨­è¨ˆçš„æ³¨æ„äº‹é …   ä½¿ç”¨åè©çš„è¤‡æ•¸å½¢å¼    URI è¡¨ç¤ºè³‡æºçš„é›†åˆ   HTTP æ–¹æ³•è¡¨ç¤ºä¸€èˆ¬å‹•è©  æ³¨æ„æ‰€ç”¨çš„å–®å­—  \nä¾‹å¦‚:   search å’Œ  find å…©è€…ä¸­ï¼Œè©²é¸ç”¨å“ªç¨®æ¯”è¼ƒå¥½?   APIä¸€èˆ¬è¨­è¨ˆæ¡ç”¨  search  å¯ä»¥å¾ğŸ‘‡ç¶²ç«™æŸ¥çœ‹å„ç¨®APIç¯„ä¾‹\n  ProgrammableWeb  ä¸ä½¿ç”¨ç©ºæ ¼ä»¥åŠéœ€è¦ç·¨ç¢¼çš„å­—ä¸²  \nç•¶URIè£¡å­˜åœ¨ç„¡æ³•ç›´æ¥ä½¿ç”¨çš„å­—ä¸²æ™‚ï¼Œå‰‡éœ€è¦ä½¿ç”¨åˆ°ç™¾åˆ†è™Ÿç·¨ç¢¼ï¼ˆè‹±èªï¼šPercent-encodingï¼‰ï¼Œåˆç¨±ï¼šURLç·¨ç¢¼ï¼ˆ  URL encoding ï¼‰ã€‚\nä¾‹å¦‚ï¼š   %E3%81%82 ã€‚  4ï¸. ä½¿ç”¨é€£æ¥ç¬¦ä¾†é€£æ¥å¤šå€‹å–®å­—ï¼ŒåŸºæœ¬ä¸Šé€£æ¥å­—ä¸²çš„æ–¹å¼ç¸½å…±æœ‰ä¸‰ç¨®å¯«æ³•ã€‚   S  pinal-Caseå¯«æ³•  ä¸€èˆ¬ç¨±ç‚ºè„ŠæŸ±å½¢å‘½åæ³•ã€‚   http://api.example.com/v1/users/12345/profile-image\n  Snake Case  å¯«æ³•  ä¸€èˆ¬ç¨±ç‚ºè›‡å‹å‘½åæ³•ã€‚   http://api.example.com/v1/users/12345/profile_image\n  Camel Caseå¯«æ³•  ä¸€èˆ¬ç¨±ç‚ºé§å³°å‘½åæ³•ã€‚   http://api.example.com/v1/users/12345/profileImage\n     \n  ğŸ’¡ é€™ä¸‰ç¨®å¯«æ³•ä¸­ï¼Œç¶²è·¯ä¸Šæœ€æ¨è–¦Spinal-Caseçš„æ–¹æ³•ï¼Œå…¶ä¸­ä¸€å€‹åŸå› æ˜¯å› ç‚ºGoogleæ¨è–¦ä½¿ç”¨ã€‚  å¦å¤–æœ€å¥½åœ¨URIä¸­ä½¿ç”¨å¤šå€‹å–®å­—ï¼Œä¾‹å¦‚ä¸è¦ä½¿ç”¨  popular_users ï¼Œè€Œæ˜¯ä½¿ç”¨  users/popular ç”¨è·¯å¾‘é‚£æ¨£å­ä¾†åŠƒåˆ†ã€‚  2.5 æœå°‹èˆ‡æŸ¥è©¢åƒæ•¸çš„è¨­è¨ˆ  2.5.1 ç²å–è³‡æ–™é‡å’Œç²å–ä½ç½®çš„æŸ¥è©¢åƒæ•¸  ç•¶è³‡æ–™é‡å¾ˆé¾å¤§çš„æ™‚å€™ï¼Œä¾‹å¦‚ ğŸ‘‡ ä½¿ç”¨è€…è³‡æ–™åˆ—è¡¨APIï¼Œå¦‚æœä»Šå¤©æ˜¯FBç­‰ç´šçš„ä½¿ç”¨è€…ï¼Œé‚£å¯èƒ½æœ‰å¥½å¹¾å„„ï¼Œé€™æ¨£ä¸€æ¬¡æŠŠæ‰€æœ‰æ•¸å€¼åå›ä¾†æ˜¯ä¸å¯èƒ½é”æˆçš„ï¼Œå› æ­¤å¯ä»¥æ¡ç”¨åˆ†é (Pagination)ä¾†è™•ç†ã€‚   http://api.example.com/v1/users\n   åˆ†é çš„ä½¿ç”¨ï¼Œä¸€èˆ¬å¯ä»¥é€éSQLä¸­  limit å’Œ  offset æ•¸å€¼ä¾†ç”¢ç”Ÿã€‚   å„å¤§æœå‹™æŸ¥è©¢çš„æ–¹å¼\n   è³‡æ–™é‡ ä½¿ç”¨  limit ã€  count ã€  per_page  è³‡æ–™ä½ç½® ä½¿ç”¨  page ã€  offset ã€  cursor     ä¸€èˆ¬ä¾†èªª   per_page  å’Œ  page æœƒä¸€èµ·å‡ºç¾ï¼Œè€Œ  limit å’Œ  offset æœƒæˆå°å‡ºç¾ã€‚   åˆ†é çš„èˆ‰ä¾‹\n1é å¯ä»¥å®¹ç´50æ¢ç´€éŒ„ï¼Œç•¶è¦å–ç¬¬ä¸‰é (å¾101é–‹å§‹)çš„è³‡æ–™æ™‚ï¼Œè©²æ€éº¼æ’°å¯«å‘¢?   per_page=50&page=3\n\nlimit=50&offset=100\n   ğŸ’¡ ä¸€èˆ¬  page å¾1é–‹å§‹(1-based)è¨ˆæ•¸ï¼Œè€Œ  offset å‰‡å¾0é–‹å§‹(0-based)è¨ˆæ•¸ã€‚  2.5.2 ä½¿ç”¨ç›¸å°ä½ç½®å­˜åœ¨çš„å•é¡Œ  ç•¶ä½¿ç”¨  offset æˆ–  limit ä¾†å–å¾—æŒ‡å®šçš„è³‡æ–™ä½ç½®æ™‚ï¼Œå…¶å¯¦éƒ½æ˜¯è¦å¾é ­é–‹å§‹æ•¸ç¬¬å¹¾æ¢ï¼Œæ¯æ¬¡éƒ½è¦å¾ç¬¬1æ¢è³‡æ–™é–‹å§‹è¨ˆæ•¸ï¼Œå› æ­¤æ•ˆèƒ½è¼ƒå·®ã€‚   å¾é ­é–‹å§‹è¨ˆæ•¸\n   ç•¶è³‡æ–™æ›´æ–°çš„é »ç‡æ¯”è¼ƒé«˜çš„æ™‚å€™ï¼Œæœƒå°è‡´ç•¶å‰ç²å–è³‡æ–™å‡ºç¾ä¸€å®šçš„åå·®ã€‚\n   2.5.3 ä½¿ç”¨çµ•å°ä½ç½®ä¾†å–å¾—è³‡æ–™  å¯ä»¥é€éæŒ‡\"å®šæŸå€‹IDä¹‹å‰\"æˆ–\"æŸå€‹æ—¥æœŸä¹‹å‰\"ç­‰æ¢ä»¶ï¼Œä¾†è§£æ±ºç›¸å°æ‡‰ä½ç½®å–å¾—è³‡æ–™çš„å•é¡Œã€‚  ä¾‹å¦‚ï¼šTwiiterçš„APIä¸­çš„  max_id ã€YouTubeä¸­çš„  publishedBefore ã€‚  2.5.4 ä½¿ç”¨åƒæ•¸ä¾†éæ¿¾  ä»¥ä¸‹ä¾‹å­ä½¿ç”¨Linkedinçš„People Search APIèˆ‰ä¾‹ã€‚   http://api.linkedin.com/v1/people-search?first-name=Clair\n\nhttp://api.linkedin.com/v1/people-search?last-name=Clair\n\nhttp://api.linkedin.com/v1/people-search?school-name=Shermer&20High%20School\n  2.5.5 æŸ¥è©¢åƒæ•¸å’Œè·¯å¾‘çš„ä½¿ç”¨å€åˆ¥  åˆ°åº•è©²æŠŠåƒæ•¸é™„åŠ åœ¨æŸ¥è©¢åƒæ•¸è£¡é¢? é‚„æ˜¯æ”¾åœ¨è·¯å¾‘è£¡å‘¢? å¯ä»¥ä¾æ“šä¸‹åˆ—å…©é»ä¾†è§£é‡‹   æ˜¯å¦å¯ä»¥è¡¨ç¤ºå”¯ä¸€è³‡æºæ‰€éœ€çš„è³‡è¨Š   http://api.example.com/v1/users/10\n   æ˜¯å¦å¯ä»¥çœç•¥  åˆ†é çš„é¡å¤–è£œå……   è«‹æ±‚\n    perPage  æ¯å€‹é é¢çš„å¤§å°(æ¯å€‹é é¢çš„é …ç›®)   page  ç›®å‰é é¢çš„ç·¨è™Ÿ   http://api.example.com/v1/users?page=3&perPage=50\n   å›æ‡‰\n    currentPage  ç›®å‰é é¢çš„ç·¨è™Ÿ   pageSize  æ¯å€‹é é¢çš„å¤§å°(æ¯å€‹é é¢çš„é …ç›®)   totalPages  é é¢ç¸½æ•¸é‡   totalItems   é …ç›®çš„ç¸½æ•¸é‡   items  ç›®å‰é é¢ä¸Šçš„é …ç›®  é—œæ–¼ç™»éŒ„OAuth2.0 (2.6 ~ 2.10)  OAuthåœ¨APIè¨­è¨ˆä¸Šæ˜¯è »é‡è¦çš„ä¸€ç’°ï¼Œä½ ä¸€å®šå¾ˆå¸¸é‡åˆ°åœ¨ä½¿ç”¨æŸå€‹ç¶²é æ™‚ï¼Œä»–æœƒæƒ³è¦ä½ Googleæˆ–æ˜¯Facebookçš„è³‡æ–™ï¼Œæ­¤æ™‚é é¢æœƒå°å‘ä¸€å€‹å°è¦–çª—è¦ä½ è¼¸å…¥Googleæˆ–Facebookçš„å¸³è™Ÿå¯†ç¢¼ï¼Œè¼¸å…¥å®Œç•¢å¾Œæ¥è‘—å°±æœƒå°å›åŸæœ¬çš„ç¶²é ã€‚æ¥è‘—ç¶²é å°±å¯ä»¥ç²å–ä½ Googleèˆ‡FBçš„ç›¸é—œè³‡è¨Šäº†ã€‚é€™ç¨®Bç¶²é è¦å‘ä½ ç´¢å–ç¬¬ä¸‰æ–¹ç¶²é çš„èªè­‰å·¥ä½œï¼Œå°±æ˜¯OAuthæœƒæ›¿ä½ è™•ç†æ‰ã€‚  2.6.   é™½æ˜¥èªè­‰  ä¸Šè¿°æè¿°çš„èªè­‰å·¥ä½œï¼Œæœ€ç°¡æ˜“çš„èªè­‰æ©Ÿåˆ¶å¦‚ä¸‹åœ–ï¼Œä½¿ç”¨è€…åœ¨å®¢æˆ¶ç«¯é€éåŸºæœ¬çš„å¸³è™Ÿèˆ‡å¯†ç¢¼å‘å¾Œç«¯ä¼ºæœå™¨é©—è­‰èº«ä»½ã€‚ä¼ºæœå™¨æœƒç¶“éä¸€é€£ä¸²çš„é©—è­‰æµç¨‹ï¼Œé©—è­‰æˆåŠŸå¾Œé€éå¦‚ Session / Cookie æ©Ÿåˆ¶ï¼Œåœ¨å®¢æˆ¶ç«¯ä¿å­˜ç”¨æˆ¶ç™»å…¥çš„ç‹€æ…‹è³‡è¨Šã€‚    æ­¤é™½æ˜¥èªè­‰å¤§è‡´æœƒæœ‰å¹¾å€‹å•é¡Œ   ç¬¬ä¸‰æ–¹ç¨‹å¼å¿…é ˆå„²å­˜ Resource Owner çš„å¸³è™Ÿå¯†ç¢¼ï¼Œé€šå¸¸æ˜¯æ˜æ–‡å„²å­˜ã€‚  Server å¿…é ˆæ”¯æ´å¯†ç¢¼èªè­‰ï¼Œå³ä½¿å¯†ç¢¼æœ‰å¤©ç”Ÿçš„è³‡è¨Šå®‰å…¨ä¸Šçš„å¼±é»ã€‚  ç¬¬ä¸‰æ–¹ç¨‹å¼æœƒå¾—åˆ°å¹¾ä¹å®Œæ•´çš„æ¬Šé™ï¼Œå¯ä»¥å­˜å– Protected Resources ï¼Œè€Œ Resource Owner æ²’è¾¦æ³•é™åˆ¶ç¬¬ä¸‰æ–¹ç¨‹å¼å¯ä»¥æ‹¿å– Resource çš„æ™‚æ•ˆï¼Œä»¥åŠå¯ä»¥å­˜å–çš„ç¯„åœ (subset)ã€‚  ä»»ä½•ç¬¬ä¸‰æ–¹ç¨‹å¼è¢«ç ´è§£ (compromized)ï¼Œå°±æœƒå°è‡´ä½¿ç”¨è©²å¯†ç¢¼çš„æ‰€æœ‰è³‡æ–™è¢«ç ´è§£ã€‚  2.7 OAuthçš„åŸºæœ¬èªè­‰æ©Ÿåˆ¶  é‚£éº¼OAuthåœ¨ç¬¬ä¸‰æ–¹èªè­‰é€™æµç¨‹ä¸Šï¼Œä¸­é–“åˆ°åº•ç™¼ç”Ÿä»€éº¼äº‹æƒ…ï¼Œæˆ‘å€‘å¯ä»¥çœ‹ä¸‹è¿°åœ–æ„æµç¨‹     Step1ï¼šUseré»ä¸‹å…è¨±è¨ªä½Facebookå€‹äººè³‡è¨Šèªè­‰  Step2ï¼šç¬¬ä¸‰æ–¹ç¶²é è«‹æ±‚èªå¯  Step3ï¼šUserè¼¸å…¥å¸³å‘½ä¸¦å‘ŠçŸ¥Facebookå¯ä»¥æŠŠTokenè½‰äº¤çµ¦ç¬¬ä¸‰æ–¹ç¶²é   Step4ï¼šå°‡Tokenè½‰äº¤çµ¦ç¬¬ä¸‰æ–¹ç¶²é   Step5ï¼šç¬¬ä¸‰æ–¹ç¶²é å¸¶å–Tokenå‘Facebookèª¿ç”¨ç´¢å–è³‡è¨ŠAPI  Step6ï¼šFacebook Responseè«‹æ±‚çµ¦ç¬¬ä¸‰æ–¹ç¶²é   ä¸Šè¿°OAuthå¸¸è¦‹çš„åŸºæœ¬æµç¨‹ï¼Œä½¿ç”¨OAuthæ–¹ä¾¿çš„æ˜¯ï¼ŒUserç„¡é ˆå†æ¬¡å°è«‹æ±‚è¼¸å…¥å¸³è™Ÿå¯†ç¢¼ï¼Œèªè­‰éç¨‹ä¸­æœƒé€šéFacebookæä¾›çš„é é¢(ä¸€èˆ¬å¸¸è¦‹ç‚ºå¸³è™Ÿå¯†ç¢¼è¼¸å…¥æˆ–æ˜¯èªè­‰è¨±å¯æŒ‰éˆ•å¦‚ä¸‹åœ–)ã€‚    å¦‚æœOAuthè¨ªå•æˆåŠŸå°±å¯å¾Facebookç²å–access tokenï¼Œé€šéæ­¤tokenï¼Œç¬¬ä¸‰æ–¹ç¶²é å°±å¯è¨ªå•Facebookç”¨æˆ¶å…è¨±çš„ç›¸é—œè¨Šæ¯(public profile mail ä»‹ç´¹...)ã€‚  2.8 OAuth 2.0 çš„è§’è‰²å®šç¾©   Resource Ownerï¼šå¯ä»¥æˆæ¬Šåˆ¥äººå»å­˜å– Protected Resource ã€‚å¦‚æœé€™å€‹è§’è‰²æ˜¯äººé¡çš„è©±ï¼Œå‰‡å°±æ˜¯æŒ‡ä½¿ç”¨è€… (end-user)ã€‚  Resource Serverï¼šå­˜æ”¾ Protected Resource çš„ä¼ºæœå™¨ï¼Œå¯ä»¥æ ¹æ“š Access Token ä¾†æ¥å— Protected Resource çš„è«‹æ±‚ã€‚  Clientï¼šä»£è¡¨ Resource Owner å»å­˜å– Protected Resource çš„æ‡‰ç”¨ç¨‹å¼ã€‚ â€œClientâ€ ä¸€è©ä¸¦ä¸æŒ‡ä»»ä½•ç‰¹å®šçš„å¯¦ä½œæ–¹å¼ï¼ˆå¯ä»¥åœ¨ Server ä¸Šé¢è·‘ã€åœ¨ä¸€èˆ¬é›»è…¦ä¸Šè·‘ã€æˆ–æ˜¯åœ¨å…¶ä»–çš„è¨­å‚™ï¼‰ã€‚  Authorization Serverï¼šåœ¨èªè­‰é Resource Owner ä¸¦ä¸” Resource Owner è¨±å¯ä¹‹å¾Œï¼Œæ ¸ç™¼ Access Token çš„ä¼ºæœå™¨ã€‚  2.9 OAuthçš„èªè­‰æµç¨‹å½¢å¼(Grant Type)  ä¸Šè¿°ç°¡å–®æè¿°OAuthåŸºæœ¬æµç¨‹ï¼Œä½†å¯¦éš›çš„èªè­‰æµç¨‹æœƒæœ‰å››ç¨®å½¢å¼ï¼Œæ¨è–¦æ­¤ç¯‡  èªè­˜ OAuth 2.0ï¼šä¸€æ¬¡äº†è§£å„è§’è‰²ã€å„é¡å‹æµç¨‹çš„å·®ç•° ã€‚å°æ–¼å››ç¨®å½¢å¼æˆ‘è¦ºå¾—æ­¤ç¯‡ä½œè€…æ•´ç†å¾—å¾ˆæ·ºç™½æ˜“æ‡‚ã€‚é€™é‚Šæˆ‘ä¹Ÿæœƒç›´æ¥æ“·å–ä»–å°æ–¼å››ç¨®å½¢å¼çš„æè¿°ä¾†è§£èªªã€‚     Type  å¸¸è¦‹æ‡‰ç”¨    Authorization Code  æœ‰é€éServerè™•ç†   Implicit  Clinetç«¯è™•ç†   Resource Owner Password Credentials    Client Credentials  M2M(Machine to Machine)  2.10   Authorization Code  æµç¨‹ç¤ºæ„  å¸¸è¦‹é¡å‹ï¼Œé€šå¸¸æ‡‰ç”¨åœ¨SSRä¼ºæœå™¨æ¸²æŸ“çš„è¨­è¨ˆä¸Šï¼Œå¤§éƒ¨åˆ†çš„é‚è¼¯è™•ç†ç¨‹å¼ç¢¼ä»¥æ¥µæ©Ÿå¯†éƒ½æœƒä¿å­˜åœ¨Serverã€‚    è©³ç´°æµç¨‹  (1) Authorization Request  ã€Clientã€‘GET -> ã€Authorization Endpointã€‘  ç¬¬ä¸€æ­¥æ˜¯ Client ç”¢ç”Ÿä¸€å€‹ URL é€£åˆ° Authorization Endpoint ï¼Œè¦ Resource Owner æ‰“é–‹ï¼ˆé»æ“Šï¼‰é€™å€‹ URL ï¼Œå¾è€Œç”¢ç”Ÿã€Œå‘ Authorization Endpoint ç™¼é€ GET requestã€çš„æ“ä½œã€‚  æŠŠåƒæ•¸åŒ…åœ¨ URI çš„ query components è£¡é¢ã€‚     åƒæ•¸å  å¡«ä»€éº¼/æ„ç¾©    response_type  code   client_id  è‡ªå·±çš„ Client ID   state  å…§éƒ¨ç‹€æ…‹   redirect_uri  ç”³è«‹çµæœä¸‹ä¾†ä¹‹å¾Œè¦è½‰å€å»å“ªè£¡   scope  ç”³è«‹çš„å­˜å–ç¯„åœ   GET /authorize?response_type=code&client_id=s6BhdRkqt3&state=xyz\n    &redirect_uri=https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb HTTP/1.1\nHost: server.example.com\n   (4) Authorization Response  ã€Authorization Endpointã€‘ 302 Response ->  GET ã€Client: Redirection Endpointã€‘  Resource Owner è‹¥åŒæ„æˆæ¬Šï¼Œé€™å€‹ã€ŒåŒæ„æˆæ¬Šã€çš„ request æœƒå¾€ Authorization Endpoint ç™¼é€ï¼Œæ¥è‘—æœƒæ”¶åˆ° 302 çš„è½‰å€ response ï¼Œè£¡é¢å¸¶æœ‰ã€Œå‰å¾€ Client çš„ Redirection Endpoint çš„ URLã€çš„è½‰å€ (Location header)ï¼Œå¾è€Œç”¢ç”Ÿã€Œå‘ Redirection URI ç™¼é€ GET Requestã€çš„æ“ä½œã€‚     åƒæ•¸å  å¡«ä»€éº¼/æ„ç¾©    code  Authorization Code   state  åŸå…§éƒ¨ç‹€æ…‹   HTTP/1.1 302 Found\nLocation: https://client.example.com/cb?code=SplxlOBeZQQYbYS6WxSbIA\n          &state=xyz\n   state å¦‚æœ (1) çš„æ™‚å€™æœ‰é™„ä¸Šï¼Œå‰‡ Resopnse è£¡é¢å¿…é ˆæœ‰ï¼Œå®Œå…¨ä¸€è‡´çš„åŸå€¼ã€‚å¦‚æœåŸæœ¬å°±æ²’æœ‰ï¼Œå°±ä¸éœ€è¦å›å‚³ã€‚  Authorization Codeï¼š   å¿…é ˆæ˜¯çŸ­æ™‚æ•ˆçš„ï¼Œå»ºè­°æœ€é•· 10 åˆ†é˜ã€‚  Client åªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œå¦‚æœé‡è¤‡ä½¿ç”¨ï¼ŒAuthorization Server å¿…é ˆæ‹’çµ•ï¼Œä¸¦ä¸”å»ºè­°æ’¤éŠ·ä¹‹å‰é€éé€™å€‹ Grant æ ¸ç™¼éçš„ Tokens  è¦ç¶å®š Code â†” Client ID â†” Redirection URI çš„é—œä¿‚  é•·åº¦ç”± Authorization Server å®šç¾©ï¼Œæ‡‰å¯«åœ¨æ–‡ä»¶ä¸­ï¼Œ Client ä¸å¯ä»¥ççŒœã€‚   (5) Access Token Request  ã€Clientã€‘POST -> ã€Token Endpointã€‘     åƒæ•¸å  å¡«ä»€éº¼/æ„ç¾©    grant_type  Authorization Code   code  åœ¨ (4) æ‹¿åˆ°çš„ Authorization Code   redirect_uri  å¦‚æœ (A) æœ‰æä¾›ï¼Œå‰‡å¿…é ˆæä¾›ä¸€æ¨¡ä¸€æ¨£çš„ã€‚   client_id  è‡ªå·±çš„ Client ID  Authorization Server çš„è™•ç†ç¨‹åº   è¦æ±‚ Client èªè­‰è‡ªå·±ï¼ˆå¦‚æœæ˜¯ Confidential Client æˆ–æœ‰æ‹¿åˆ° Client Credentialsï¼‰  å¦‚æœ Client æœ‰å‡ºç¤ºèªè­‰è³‡æ–™ï¼Œå°±èªè­‰å®ƒ  ç¢ºå®š Authorization Code æ˜¯ç™¼çµ¦ Client çš„\n   Confidential: ç”¨ Client çš„èªè­‰éç¨‹ä¾†è­‰æ˜  Public: ç”¨ Client ID ä¾†è­‰æ˜  é©—è­‰ Authorization Code æ­£ç¢º  å¦‚æœ (1) æœ‰çµ¦ Redirection URI çš„è©±ï¼Œç¢ºå®šé€™æ¬¡çµ¦çš„ Redirection URI èˆ‡ (1) æ™‚çš„ä¸€æ¨¡ä¸€æ¨£ã€‚   POST /token HTTP/1.1\nHost: server.example.com\nAuthorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW\nContent-Type: application/x-www-form-urlencoded\n\ngrant_type=authorization_code&code=SplxlOBeZQQYbYS6WxSbIA\n&redirect_uri=https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb\n  (5) Access Token Response  ã€Clientã€‘ <- ã€Token Endpointã€‘  è‹¥ Access Token Request åˆæ³•ä¸”æœ‰ç¶“éæˆæ¬Šï¼Œå‰‡æ ¸ç™¼ Access Tokenï¼ŒåŒæ™‚å¯ä»¥æ ¸ç™¼ Refresh Token ï¼ˆéå¿…å‚™ï¼‰ã€‚å¦‚æœ Client èªè­‰å¤±æ•—ï¼Œæˆ– Request ä¸åˆæ³•ï¼Œå‰‡ä¾ç…§   RFC 6749 Section 5.2  çš„è¦å®šå›è¦†éŒ¯èª¤ã€‚   HTTP/1.1 200 OK\nContent-Type: application/json;charset=UTF-8\nCache-Control: no-store\nPragma: no-cache\n\n{\n  \"access_token\":\"2YotnFZFEjr1zCsicMWpAA\",\n  \"token_type\":\"example\",\n  \"expires_in\":3600,\n  \"refresh_token\":\"tGzv3JOkF0XG5Qx2TlKWIA\",\n  \"example_parameter\":\"example_value\"\n}\n   Implicit  æµç¨‹ç¤ºæ„  é€šå¸¸æ‡‰ç”¨åœ¨SPAè¨­è¨ˆï¼Œæ•´å€‹æ‡‰ç”¨ç¨‹å¼éƒ½åœ¨å‰ç«¯é‹è¡Œï¼Œä¾éœ€æ±‚å‘å¾Œç«¯ API å–å¾—è³‡æ–™ã€‚ç”±æ–¼æ•´å€‹æ‡‰ç”¨ç¨‹å¼éƒ½åœ¨å‰ç«¯é‹è¡Œï¼Œæ‰€ä»¥æœƒç¼ºå°‘ã€Œå¾Œç«¯ä¼ºæœå™¨é€é Authorization Code Grant äº¤æ› Access Token ã€çš„æ­¥é©Ÿã€‚å–è€Œä»£ä¹‹çš„æ˜¯è«‹ Authorization Server ç›´æ¥æ ¸ç™¼ Access Tokenã€‚  é€™é‚Šè¦æ³¨æ„æœ€çµ‚æ‡‰ç”¨ç¨‹å¼å°±èƒ½æ‹¿è‘— Access Token å‘ Resource Server å–å¾—è³‡æ–™ã€‚ç‰¹åˆ¥ç•™æ„ï¼šä¸åƒ Authorization Code Flowï¼Œé€™é‚Šæ˜¯ç”±å‰ç«¯ç²å¾—èˆ‡ç®¡ç† Access Tokenï¼Œä¸¦å¸¶è‘— Access Token ç™¼å‡ºè«‹æ±‚å‰å¾€å–å¾—è³‡æºï¼Œå› æ­¤åœ¨å®‰å…¨æ€§ä¸Šã€Œç›¸å°è„†å¼±ã€ã€‚    è©³ç´°æµç¨‹  (1) Authorization Request  ã€Clientã€‘GET ->ã€Authorization Endpointã€‘  ç¬¬ä¸€æ­¥æ˜¯ Client ç”¢ç”Ÿä¸€å€‹ URL é€£åˆ° Authorization Endpoint ï¼Œè¦ Resource Owner æ‰“é–‹ï¼ˆé»æ“Šï¼‰é€™å€‹ URL ï¼Œå¾è€Œç”¢ç”Ÿã€Œå‘ Authorization Endpoint ç™¼é€ GET requestã€çš„æ“ä½œã€‚  æŠŠåƒæ•¸åŒ…åœ¨ URI çš„ query component è£¡é¢ã€‚     åƒæ•¸å  å¡«ä»€éº¼/æ„ç¾©    response_type  code   client_id  è‡ªå·±çš„ Client ID   state  å…§éƒ¨ç‹€æ…‹   redirect_uri  ç”³è«‹çµæœä¸‹ä¾†ä¹‹å¾Œè¦è½‰å€å»å“ªè£¡   scope  ç”³è«‹çš„å­˜å–ç¯„åœ  Authorization Server çš„è™•ç†ç¨‹åº  å› ç‚º Implicit Grant Flow æ˜¯ç›´æ¥åœ¨ Authorization Endpoint ç™¼ Access Token ï¼Œæ‰€ä»¥è³‡æ–™é©—è­‰å’Œæˆæ¬Šéƒ½åœ¨é€™ä¸€æ­¥è™•ç†ã€‚æ‰€ä»¥é€™å€‹ Request é€²ä¾†çš„æ™‚å€™ï¼Œ Authorization Server è¦åšé€™äº›äº‹ï¼š  é©—è­‰æ‰€æœ‰å¿…é ˆçµ¦çš„åƒæ•¸éƒ½æœ‰çµ¦ä¸”åˆæ³•  Redirection URI èˆ‡é å…ˆåœ¨ Authorization Server è¨­å®šçš„ç›¸ç¬¦ã€‚\nå¦‚æœæ²’å•é¡Œï¼Œå°±è©¢å• Resource Owner æ˜¯å¦æˆæ¬Šï¼Œå³ (B) æ­¥é©Ÿ  (4) Authorization Response  ã€Clientã€‘ <- 302ã€Authorization Endpointã€‘  Resource Owner è‹¥åŒæ„æˆæ¬Šï¼Œé€™å€‹ã€ŒåŒæ„æˆæ¬Šã€çš„ request æœƒå¾€ Authorization Endpoint ç™¼é€ï¼Œæ¥è‘—æœƒæ”¶åˆ° 302 çš„è½‰å€ response ï¼Œè£¡é¢å¸¶æœ‰ã€Œå‰å¾€ Client çš„ Redirection Endpoint çš„ URLã€çš„è½‰å€ (Location header)ï¼Œå¾è€Œç”¢ç”Ÿã€Œå‘ Redirection URI ç™¼é€ GET Requestã€çš„æ“ä½œã€‚  åƒæ•¸è¦ç”¨ URL Encoding ç·¨èµ·ä¾†ï¼Œæ”¾åœ¨ Fragment Component è£¡é¢ã€‚  è‹¥ Access Token Request åˆæ³•ä¸”æœ‰ç¶“éæˆæ¬Šï¼Œå‰‡æ ¸ç™¼ Access Tokenã€‚å¦‚æœ Client èªè­‰å¤±æ•—ï¼Œæˆ– Request ä¸åˆæ³•ï¼Œå‰‡ä¾ç…§ Section 5.2 çš„è¦å®šå›è¦†éŒ¯èª¤ã€‚  ç‰¹åˆ¥æ³¨æ„ Implicit Grant Type ç¦æ­¢ æ ¸ç™¼ Refresh Tokenã€‚  æŸäº› User-Agent ä¸æ”¯æ´ Fragment Redirection ï¼Œé€™ç¨®æƒ…æ³å¯ä»¥ä½¿ç”¨é–“æ¥è½‰å€ï¼Œå³æ˜¯è½‰åˆ°ä¸€å€‹é é¢ï¼Œæ”¾ä¸€å€‹ â€œContinueâ€ çš„æŒ‰éˆ•ï¼ŒæŒ‰ä¸‹å»é€£åˆ°çœŸæ­£çš„ Redirection URI ã€‚     åƒæ•¸å  å¡«ä»€éº¼/æ„ç¾©    access_token  å³ Access Token   expires_in  å»ºè­°æœ‰\tå¹¾ç§’éæœŸï¼Œå¦‚ 3600 è¡¨ç¤º 10 åˆ†é˜ã€‚è‹¥è¦çœç•¥ï¼Œæœ€å¥½åœ¨æ–‡ä»¶è£¡è¨»æ˜æ•ˆæœŸã€‚   scope  Access Token çš„æˆæ¬Šç¯„åœ (scopes)ã€‚   state  åŸå…§éƒ¨ç‹€æ…‹ã€‚  å…¶ä¸­ scope å¦‚æœå’Œ (1) ç”³è«‹çš„ä¸åŒå‰‡è¦é™„ä¸Šï¼Œå¦‚æœä¸€æ¨£çš„è©±å°±ä¸å¿…é™„ä¸Šã€‚  å…¶ä¸­ state å¦‚æœ (1) çš„æ™‚å€™æœ‰é™„ä¸Šï¼Œå‰‡ Resopnse è£¡é¢å¿…é ˆæœ‰ï¼Œå®Œå…¨ä¸€è‡´çš„åŸå€¼ã€‚å¦‚æœåŸæœ¬å°±æ²’æœ‰ï¼Œå°±ä¸éœ€è¦å›å‚³ã€‚  Access Token çš„é•·åº¦ç”± Authorization Server å®šç¾©ï¼Œæ‡‰å¯«åœ¨æ–‡ä»¶ä¸­ï¼Œ Client ä¸å¯ä»¥ççŒœã€‚  Client é‡åˆ°ä¸èªè­˜çš„åƒæ•¸å¿…é ˆå¿½ç•¥ã€‚   HTTP/1.1 302 Found\nLocation: http://example.com/cb#access_token=2YotnFZFEjr1zCsicMWpAA\n          &state=xyz&token_type=example&expires_in=3600\n   Resource Owner Password Credentials  æµç¨‹ç¤ºæ„  ç”±ä½¿ç”¨è€…æä¾›å¸³è™Ÿèˆ‡å¯†ç¢¼ç­‰è³‡è¨Šçµ¦æ‡‰ç”¨ç¨‹å¼ï¼Œç”±æ‡‰ç”¨ç¨‹å¼ç›´æ¥å‘ Authorization Server äº¤æ› Access Tokenï¼Œå› æ­¤ã€Œå¿…é ˆæ˜¯ä½¿ç”¨è€…é«˜åº¦ä¿¡è³´çš„æ‡‰ç”¨ç¨‹å¼ã€æ‰é©åˆä½¿ç”¨ï¼Œä¸”å”¯æœ‰å‰å…©ç¨®çš†ä¸å¯è¡Œæ™‚ï¼Œæ‰æœƒè€ƒæ…®ä½¿ç”¨ç•¶å‰é¡å‹çš„æµç¨‹ã€‚  é«”é©—ä¸Šå’Œä»¥å¾€çš„å¸³è™Ÿå¯†ç¢¼ç™»å…¥é›·åŒã€‚    æµç¨‹ç´°ç¯€  (2,3) Authorization Request & Response  åœ¨é€™å€‹æµç¨‹è£¡é¢ï¼Œ Authorization Grant å°±æ˜¯ Resource Owner çš„å¸³è™Ÿå¯†ç¢¼ï¼Œæ‰€ä»¥åœ¨ Step (A) è£¡é¢ç›´æ¥å‘ Resource Onwer ç´¢å–ï¼Œæ²’æœ‰ç¶“éç¶²è·¯ä¾†å–å¾— Authorizationã€‚  Spec ä¸è¦å®š Client è¦æ€éº¼æ‹¿åˆ°å¸³è™Ÿå¯†ç¢¼ï¼Œä½†æ˜¯ Client å–å¾— Access Token ä¹‹å¾Œï¼Œå¿…é ˆæŠŠ Resource Owner çš„å¸³è™Ÿå¯†ç¢¼çµ¦éŠ·æ¯€æ‰ã€‚  (4) Access Token Request  ã€Clientã€‘POST -> ã€Token Endpointã€‘     åƒæ•¸å  å¡«ä»€éº¼/æ„ç¾©    grant_type  password   username  Resource Owner çš„å¸³è™Ÿ   password  Resource Owner çš„å¯†ç¢¼   scope  ç”³è«‹çš„å­˜å–ç¯„åœ  Authorization Server çš„è™•ç†ç¨‹åº  é€™å€‹ Request é€²ä¾†çš„æ™‚å€™ï¼Œ Authorization Server è¦åšé€™äº›äº‹ï¼š  è¦æ±‚ Client èªè­‰è‡ªå·±ï¼ˆå¦‚æœæ˜¯ Confidential Client æˆ–æœ‰æ‹¿åˆ° Client Credentialsï¼‰  å¦‚æœ Client æœ‰å‡ºç¤ºèªè­‰è³‡æ–™ï¼Œå°±èªè­‰å®ƒ   Client Credentials  æµç¨‹ç¤ºæ„  é€šå¸¸æ˜¯ç”±æ‡‰ç”¨ç¨‹å¼å‘ Authourization Server è«‹æ±‚å–å¾— Access Token ä»¥ç²å–ã€Œè‡ªå·±ã€çš„ç›¸é—œè³‡æºï¼Œè€Œéä½¿ç”¨è€…çš„è³‡æºã€‚  é€™å€‹æµç¨‹å·²ç¶“è·³è„«ä½¿ç”¨è€…ï¼Œå› æ­¤ï¼Œä½¿ç”¨è€…èº«ä»½é©—è­‰çš„æµç¨‹å°‡ä¸å†éœ€è¦ã€‚å–è€Œä»£ä¹‹çš„ï¼Œæ˜¯æ‡‰ç”¨ç¨‹å¼å¿…é ˆå‘ Authorization Server æä¾›é©—è­‰æ‰€éœ€çš„è‡ªèº«è³‡è¨Šã€‚    æµç¨‹ç´°ç¯€  (1) Access Token Request  ã€Clientã€‘POST -> ã€Token Endpointã€‘     åƒæ•¸å  å¡«ä»€éº¼/æ„ç¾©    grant_type  password   scope  ç”³è«‹çš„å­˜å–ç¯„åœ   POST /token HTTP/1.1\nHost: server.example.com\nAuthorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW\nContent-Type: application/x-www-form-urlencoded\n\ngrant_type=client_credentials\n  (2) Access Token Response  ã€Clientã€‘POST <- ã€Token Endpointã€‘  è‹¥ Access Token Request åˆæ³•ä¸”æœ‰ç¶“éæˆæ¬Šï¼Œå‰‡æ ¸ç™¼ Access Tokenï¼Œä½†æ˜¯æœ€å¥½ä¸è¦æ ¸ç™¼ Refresh Tokenã€‚å¦‚æœ Client èªè­‰å¤±æ•—ï¼Œæˆ– Request ä¸åˆæ³•ï¼Œå‰‡ä¾ç…§çš„  RFC6749è¦å®š(Section5.2) å›è¦†éŒ¯èª¤ã€‚   HTTP/1.1 200 OK\nContent-Type: application/json;charset=UTF-8\nCache-Control: no-store\nPragma: no-cache\n\n{\n  \"access_token\":\"2YotnFZFEjr1zCsicMWpAA\",\n  \"token_type\":\"example\",\n  \"expires_in\":3600,\n  \"example_parameter\":\"example_value\"\n}\n  ç°¡æ˜“æ•´ç†    d.OAuthç«¯é»ç¯„ä¾‹  ä¸Šè¿°æ¢è¨å®Œå››ç¨®èªè­‰æµç¨‹å½¢å¼ï¼Œé‚£å¯¦éš›ä½¿ç”¨OAuthæ™‚ï¼Œç«¯é»çš„å½¢å¼è©²å¦‚ä½•è¨­è¨ˆ?ä¸‹è¿°ç‚ºå¸¸è¦‹çš„å¹¾å€‹æœ‰åçš„ç¶²ç«™    æ›¸ä¸­ç­†è€…æ¯”è¼ƒå»ºè­°çš„æ–¹å¼æ˜¯åƒ  /oauth2/token æ­¤ç¨®æ–¹å¼å»è¨­è¨ˆï¼Œå› ç‚ºæ˜ç¢ºæŒ‡å‡ºä½¿ç”¨çš„æ˜¯OAuth2.0ï¼Œä¸¦ä¸”èˆ‡RFC 6749çµ¦å‡ºçš„ç¯„ä¾‹é›·åŒã€‚  æˆ‘å€‘ç¨å¾®çœ‹ä¸€ä¸‹å¯¦éš›mediumåœ¨ç´¢å–facebookèªè­‰è³‡è¨Šæ™‚çš„å…§å®¹å¦‚ä¸‹åœ–ï¼ŒåŸºæœ¬ä¸Šä¹Ÿæ˜¯ç…§é€™é‚è¼¯ä¸‹å»è¨­è¨ˆ     OAuth2.0   OAuth 2.0 ç­†è¨˜  html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}"},{"id":"content:3.web-api:chapter5.md","path":"/web-api/chapter5","dir":"web-api","title":"ç¬¬5ç«  é–‹ç™¼æ–¹ä¾¿æ›´æ”¹è¨­è¨ˆçš„API","description":"","keywords":["5.1 æ–¹ä¾¿æ›´æ”¹è¨­è¨ˆçš„é‡è¦æ€§","5.2 é€éç‰ˆæœ¬è¨Šæ¯ä¾†ç®¡ç†API","5.3 ç‰ˆæœ¬è®Šæ›´çš„æ–¹é‡","5.4 çµ‚æ­¢æä¾›API","5.5 ç·¨æ’å±¤(ä¸­é–“å±¤)","5.6å°çµ"],"body":"  5.1 æ–¹ä¾¿æ›´æ”¹è¨­è¨ˆçš„é‡è¦æ€§   APIå¿…é ˆä¿æŒå…¬é–‹æä¾›ä¸²æ¥çš„ç‹€æ…‹ï¼Œä½†æ˜¯æˆ‘å€‘æœƒéœ€è¦æ·»åŠ æ–°åŠŸèƒ½ã€å»¢æ£„æŸäº›åŠŸèƒ½  å¦‚æœåªæ˜¯ä¿®æ”¹APIå…§éƒ¨é‚è¼¯ï¼Œå°å¤–çš„æ•¸æ“šæ ¼å¼ä¸è®Šï¼Œå‰‡ä¸éœ€è¦æ›´æ–°APIè¨­è¨ˆè¦ç¯„  5.1.1 å…¬é–‹ç™¼ä½ˆçš„API   LSUD(Large set of unknown developers)\n   ex.FBé€™é¡çš„å…¬é–‹API  å½±éŸ¿ä¸ç‰¹å®šé–‹ç™¼è€…ï¼Œç¯„åœæœªçŸ¥  APIæ”¹ç‰ˆçš„å½±éŸ¿ç¨‹åº¦å¤§  ç„¡æ³•ä¿è­‰ç”¨æˆ¶ç«¯å¯ä»¥æ­é…APIæ”¹ç‰ˆè€Œé‡æ–°ä¸²æ¥ï¼Œæ­¤æ™‚å¼·åˆ¶è®Šæ›´APIæœƒå°è‡´çµ‚ç«¯ç”¨æˆ¶ã€ä¸²æ¥æ‡‰ç”¨ï¼Œè¦ºå¾—é€™å€‹æœå‹™ä¸å¯é   5.1.2 é¢å‘ç§»å‹•æ‡‰ç”¨çš„API   SSKD(Small set of known develop)\n   åªæœ‰å½±éŸ¿ç‰¹å®šé–‹ç™¼è€…ï¼Œç¯„åœå¯æ§  APIçš„æ”¹ç‰ˆå½±éŸ¿ç¨‹åº¦å°  æ³¨æ„ä¸æ›´æ–°æ‡‰ç”¨ç¨‹å¼çš„åˆæ°‘  5.1.3 Webæœå‹™ä¸­ä½¿ç”¨çš„API   æ³¨æ„å¿«å–çš„å½±éŸ¿  5.2 é€éç‰ˆæœ¬è¨Šæ¯ä¾†ç®¡ç†API   æ›´æ–°APIæœ‰æœƒä¸ç­‰ç¨‹åº¦çš„å½±éŸ¿ï¼Œé€éæŸäº›æ©Ÿåˆ¶è®“ä¸æ›´æ–°ç”¨æˆ¶å¯ä»¥ç¹¼çºŒä½¿ç”¨èˆŠçš„æœå‹™ï¼Œæ›´æ–°å¾Œçš„ç”¨æˆ¶ä½¿ç”¨æ–°çš„æœå‹™    å¯¦ç¾çš„æ–¹å¼   ä¸åŒçš„URI\n   èˆŠçš„ï¼š  http://api.example.com/user/123  æ–°çš„ï¼š  http://newapi.example.com/user/123  è­°é¡Œï¼šnewçš„å‘½åä¸å¥½ï¼Œå¦‚æœä¹‹å¾Œåˆè¦æ”¹ç‰ˆï¼Œnewnewapi?  5.2.1 åœ¨URIä¸­åµŒå…¥ç‰ˆæœ¬ç·¨è™Ÿ    http://api.example.com/v2/user/123  æœ€å¸¸è¦‹çš„æ–¹å¼ï¼ŒèˆŠç‰ˆæœ¬çš„apiçŸ­æ™‚é–“èƒ½å¯ç¹¼çºŒä½¿ç”¨    5.2.2 å¦‚ä½•æ·»åŠ ç‰ˆæœ¬ç·¨è™Ÿ   ç·¨è™Ÿè¦å‰‡ï¼šä¸»ç‰ˆæœ¬ç·¨è™Ÿã€æ¬¡ç‰ˆæœ¬ç·¨è™Ÿã€è£œä¸ç‰ˆæœ¬ç·¨è™Ÿã€‚ex.1.0.1  å¦‚æœåªæ˜¯ä¿®æ­£BUGï¼Œå‰‡å¢åŠ è£œä¸ç‰ˆæœ¬ç·¨è™Ÿex.1.0.2  å¦‚æœåŠŸèƒ½æ–°ã€åˆªï¼Œä¸”å‘ä¸‹å…¼å®¹ï¼Œå‰‡å¢åŠ æ¬¡ç‰ˆæœ¬ç·¨è™Ÿex.1.1.1  å¦‚æœæœ¬æ¬¡ä¿®æ”¹ç„¡æ³•å‘ä¸‹å…¼å®¹ï¼Œå‰‡å¢åŠ ä¸»ç‰ˆæœ¬ç·¨è™Ÿex.2.0.1  ä»¥  http://api.example.com/v1/user/123ä¾†èªªï¼Œåªä½¿ç”¨ä¸€å€‹ç‰ˆæœ¬ç·¨è™Ÿï¼Œä»£è¡¨ç‚ºä¸»ç‰ˆæœ¬ç·¨è™Ÿï¼Œå› æ­¤ç•¶ä¸»ç‰ˆæœ¬ç·¨è™Ÿå¢åŠ æ™‚ï¼ŒAPIæ‰é€²è¡Œç‰ˆæœ¬å‡ç´š  åŒæ™‚ç¶­è­·å¤šç‰ˆæœ¬çš„APIæˆæœ¬ç›¸ç•¶é«˜ï¼Œä¹Ÿå®¹æ˜“è®“ç”¨æˆ¶æ··æ·†è©²ç”¨å“ªä¸€å€‹ï¼Œå› æ­¤å°æ›´å‹•æœƒç›¡é‡ä¸å»å‡ç´šapiç‰ˆæœ¬ï¼Œè€Œæ˜¯ç›¡å¯èƒ½åœ°å‘ä¸‹ç›¸å®¹  åªæœ‰ç™¼ç”Ÿå¯ä»¥æ”¾æ£„ä¸‹å‘ç›¸å®¹çš„é‡å¤§æ›´æ–°æ™‚æ‰å»å‡ç´šapiç‰ˆæœ¬ï¼Œå› æ­¤å¤§éƒ¨åˆ†çš„apiçš„ç¶²å€ç‰ˆæœ¬ç·¨è™Ÿåªæœ‰ä¸»ç‰ˆæœ¬ç·¨è™Ÿex./v1  5.2.3 åœ¨æŸ¥è©¢å­—ä¸²åŠ å…¥ç‰ˆæœ¬è¨Šæ¯    http://api.example.com/user/123?v=1.5  å·®ç•°ï¼šä½¿ç”¨åƒæ•¸çš„æ–¹å¼ä»£è¡¨æ˜¯å¯ä»¥çœç•¥ï¼Œå¦‚æœæ²’æœ‰å¡«ï¼Œä¼ºæœå™¨æœƒç›´æ¥ä½¿ç”¨é»˜èªçš„ç‰ˆæœ¬(é€šå¸¸æ˜¯æœ€æ–°ç‰ˆæœ¬)  è©²é¸æ“‡åŠ åœ¨ç¶²å€è·¯å¾‘é‚„æ˜¯åƒæ•¸ï¼Ÿ\n   å»ºè­°åŠ åœ¨ç¶²å€è·¯å¾‘ï¼Œå› ç‚ºåƒæ•¸çš„æ–¹å¼å¦‚æœçœç•¥çš„è©±ï¼Œç”¨æˆ¶å…¶å¯¦ä¸çŸ¥é“å‘¼å«åˆ°çš„æ˜¯å“ªå€‹ç‰ˆæœ¬  5.2.4 é€éåª’é«”é¡å‹ä¾†æŒ‡å®šç‰ˆæœ¬è¨Šæ¯   åœ¨headeråŠ å…¥Accept:application/api.example.v2+json  å¥½è™•ï¼šURLå¯ä»¥ä½œç‚ºç´”ç²¹çš„è³‡æºä½¿ç”¨  5.2.5 è©²æ¡ç”¨ä»€éº¼æ–¹æ³•   æœ€å¸¸ç”¨çš„æ˜¯åœ¨URLçš„è·¯å¾‘ä¸­åµŒå…¥ç‰ˆæœ¬è¨Šæ¯  5.3 ç‰ˆæœ¬è®Šæ›´çš„æ–¹é‡   ç›¡å¯èƒ½å‘ä¸‹ç›¸å®¹  ex.åŸæœ¬ä½¿ç”¨gender(Int)1=ç”·ç”Ÿ2=å¥³ç”Ÿï¼Œå¦‚æœæƒ³è¦æ”¹ç‚ºgender(String)ç”·ç”Ÿã€å¥³ç”Ÿçš„æ–¹å¼ç´€éŒ„ï¼Œå‰‡å»ºè­°å¤šä¸€å€‹åƒæ•¸genderStr(String)ï¼Œä¸¦æŠŠgenderæ¨™ç¤ºç‚ºå»¢æ£„  ä»€éº¼æ™‚å€™è©²å‡ç´šç‰ˆæœ¬\n   æ¬Šé™ã€é©—è­‰æ©Ÿåˆ¶èª¿æ•´ï¼Œex.v1æ²’æœ‰èº«ä»½é©—è­‰æ©Ÿåˆ¶ï¼Œv2æœ‰èº«ä»½é©—è­‰æ©Ÿåˆ¶ï¼Œå‰‡å¯ä»¥å»¢æ£„v1å‡ç´šåˆ°v2  å› ç‚ºé€™é¡çš„èª¿æ•´æœƒå‹•åˆ°çš„åœ°æ–¹å¤ªå¤šï¼Œé›£é”æˆå‘ä¸‹ç›¸å®¹ï¼Œå› æ­¤è©²å‡ç´šç‰ˆæœ¬  5.4 çµ‚æ­¢æä¾›API   å…¬å‘Šè®“ç”¨æˆ¶çŸ¥é“è©²å‡ç´šï¼ŒèˆŠAPIä»€éº¼æ™‚å€™çµæŸæœå‹™ï¼Œç”¨æˆ¶å¯ä»¥è¦åŠƒç³»çµ±å‡ç´šçš„æ™‚ç¨‹  Blackout Testï¼šæš«æ™‚ä¸€æ®µæ™‚é–“ä¸æä¾›æœå‹™ï¼Œé€¼è¿«ç”¨æˆ¶ææ—©å‡ç´š  5.4.2 æ­£å¼åœæ­¢èˆŠAPI   å›å‚³http status 410ï¼ŒåŒæ™‚çµ¦äºˆéŒ¯èª¤è¨Šæ¯  æ‡‰ç”¨æœå‹™å¿…é ˆé‡å°410çš„éŒ¯èª¤æç¤ºç”¨æˆ¶è©²å‡ç´šç³»çµ±  5.4.3 åœ¨ä½¿ç”¨æ¢æ¬¾ä¸­å¯«æ˜æ”¯æ´æœŸé™   åœ¨Xå€‹æœˆå¾Œï¼Œä¸å†æ”¯æ´èˆŠç‰ˆapiï¼Œä½†ä¸æ˜¯ç›´æ¥é—œé–‰æœå‹™  æ–°çš„APIå‡ºä¾†çš„æ™‚å€™ï¼ŒåŒæ™‚å®£å¸ƒè‡³å°‘æ”¯æ´Xæœˆ  5.5 ç·¨æ’å±¤(ä¸­é–“å±¤)   ex.fb graph apiï¼Œæºé ­ç«¯çš„APIå¯ä»¥è² è²¬å«å°ç¯„åœï¼Œå°±åƒæ˜¯å–®ä¸€å€‹ç©æœ¨ï¼Œæ¸›å°‘é–‹ç™¼çš„è¤‡é›œæ€§  çµ‚ç«¯é€éä¸­é–“å±¤å»çµ„è£å¤šå€‹ç©æœ¨ä¾†é”æˆé é¢çš„éœ€æ±‚  çµ‚ç«¯å¯ä»¥å—åˆ°APIæ”¹ç‰ˆçš„å½±éŸ¿è¼ƒå°ï¼Œæºé ­ç«¯å¯ä»¥æ¸›å°‘APIè®Šæ›´çš„é˜»ç¤™    5.6å°çµ   æœ€å¤§é™åº¦æ¸›å°‘APIç‰ˆæœ¬æ›´æ–°çš„é »ç‡ï¼Œæ³¨æ„å‘ä¸‹å…¼å®¹  åœ¨URIä¸­åµŒå…¥APIç‰ˆæœ¬çš„ä¸»ç‰ˆæœ¬ç·¨è™Ÿ  åœæ­¢æä¾›APIæœå‹™æ™‚ä¸èƒ½ç«‹å³ä¸­æ­¢ï¼Œè‡³å°‘éœ€è¦ç¹¼çºŒå…¬é–‹å…­å€‹æœˆ"},{"id":"content:3.web-api:chapter6.md","path":"/web-api/chapter6","dir":"web-api","title":"ç¬¬6ç«  é–‹ç™¼ç‰¢å›ºçš„WebAPI","description":"","keywords":["6.5 åŒå®‰å…¨ç›¸é—œçš„ HTTP Header","6.6 æ‡‰å°å¤§è¦æ¨¡è¨ªå•çš„å°ç­–"],"body":"  6.5 åŒå®‰å…¨ç›¸é—œçš„ HTTP Header     ç•¶ä½¿ç”¨è€…é€šéç€è¦½å™¨ç™¼é€requeståˆ°ä¼ºæœå™¨ä¸Šï¼Œä¼ºæœå™¨æœƒå›æ‡‰responseçµ¦ç€è¦½å™¨ï¼Œæ­¤æ™‚å°±æœƒå¸¶ä¸Šä¸€äº›headerï¼Œå…¶ä¸­æœ‰äº›headerå¯ä»¥ä¿è­‰ç¶²ç«™å®‰å…¨ã€‚    6.5.1 X-Content-Type-Options   é€£çµ    IEç³»åˆ—ï¼š   IE8 â” ï¼šç„¡æ•ˆ(è‡ªå¸¶Content Sniffing)  IE8 âœšï¼šå¯ç”¨    é¿å…ClientåŸ·è¡Œä¸æ­£å¸¸çš„ Content-Type é¡å‹æª”æ¡ˆã€‚  è©²æ¨™é ­  å‘Šè¨´ç€è¦½å™¨ä¸è¦çŒœæ¸¬æ‰€æä¾›å…§å®¹çš„MIME ï¼ˆå¤šç”¨é€”Internetéƒµä»¶æ“´å±•åï¼‰é¡å‹ï¼Œè€Œæ˜¯ä¿¡ä»»\" Content-Type\"æ¨™é ­ã€‚å¦‚æœæ²’æœ‰è¨­å®šï¼š  X-Content-Type-Options æ¨™é ­ï¼Œå‰‡æŸäº›è¼ƒèˆŠçš„ç€è¦½å™¨å¯èƒ½æœƒéŒ¯èª¤åœ°å°‡æ–‡ä»¶æª¢æ¸¬ç‚º Script æˆ– CSS Styleï¼Œå¾è€Œå¯èƒ½å°è‡´XSSæ”»æ“Šã€‚     æ¨è–¦è¨­å®šï¼š   X-Content-Type-Optionsï¼šnosniff \n\né˜»æ­¢ç€è¦½å™¨æ¢çŸ¥æª”æ¡ˆçš„ mime type ( disable Content sniffing )ï¼Œä¸€èˆ¬æƒ…æ³ä¸‹ç€è¦½å™¨æœƒå»æ¢çŸ¥è³‡æºçš„ Content-Type ï¼Œä»¥åˆ¤åˆ¥è³‡æºé¡å‹ã€‚\n\nä¾‹å¦‚ï¼šimage/pngã€text/cssï¼Œè€Œæœ‰äº›è³‡æºçš„ Content-Type æœ‰å¯èƒ½æ˜¯éŒ¯èª¤æˆ–ç¼ºå°‘çš„ï¼Œæ­¤æ™‚å°±æœƒé€²è¡Œ Content sniffingçŒœæ¸¬è§£æå…§å®¹ï¼Œå°‡ X-Content-Type-Options è¨­æˆ nosniffï¼Œå¯é˜»æ­¢é€™ç¨®è¡Œç‚ºã€‚\n\næ²’æœ‰è¨­æˆ nosniff çš„é¢¨éšªç‚ºæ”»æ“Šè€…å¯èƒ½ä½¿ç”¨éŒ¯èª¤çš„ header éš±è—æ”»æ“Šçš„ script ï¼Œä¾‹å¦‚ <script src=â€https://example.com/attacker.txt\" ></script>ï¼Œattacker.txt å¯¦éš›æ˜¯ js æª”ï¼Œè¡¨é¢çš„ header æ˜¯ text/plain ï¼Œå¯¦éš›ä¸Šç€è¦½å™¨æœƒè§£æ scrip tçš„content type ï¼Œä¸¦ä¸”åŸ·è¡Œ scriptã€‚\n       ä»€éº¼æ˜¯ content sniffingï¼š  ä¸€èˆ¬ä¾†èªªç€è¦½å™¨æœƒé€é Content-Type ä¾†åˆ¤æ–·è«‹æ±‚åˆ°çš„è³‡æºæ˜¯ä»€éº¼é¡å‹ï¼Œåƒé€éÂ   <script src=\"script.js\"> Â æ‹¿åˆ°çš„ Content-Type ä¸€èˆ¬éƒ½æ˜¯Â   text/javascript ï¼Œå› æ­¤ç€è¦½å™¨çœ‹åˆ°ä¹‹å¾Œå°±æœƒæ‹¿ä¾†åŸ·è¡Œã€‚ä½†æœ‰äº›ç¶²ç«™ï¼ˆå°¤å…¶æ˜¯åå¹¾äºŒåå¹´å‰çš„èˆŠç¶²ç«™ï¼‰åœ¨é–‹ç™¼æ™‚ä¸¦æ²’æœ‰æŠŠ Content-Type è¨­å¥½ï¼Œå°è‡´æŸäº› JS æª”çš„ Content-Type æ˜¯Â   text/plain ï¼Œä¹Ÿå°±æ˜¯ç´”æ–‡å­—æª”ã€‚ç‚ºäº†è®“é€™äº›ç¶²ç«™å¯ä»¥é †åˆ©é‹ä½œï¼Œ  ç€è¦½å™¨é™¤äº†åƒè€ƒ Content-Type ä¹‹å¤–ï¼Œä¹Ÿæœƒåš content sniffing å¾æª”æ¡ˆå…§å®¹åˆ†ææ˜¯ä»€éº¼é¡å‹ ï¼Œå¦‚æœåˆ†æå‡ºæ˜¯ JS é‚£å°±æœƒæ‹¿å»åŸ·è¡Œï¼Œé€™æ¨£èˆŠç¶²ç«™æ‰ä¸æœƒå£æ‰ã€‚    sniffing é€™å€‹å‹•ä½œçœ‹ä¼¼è²¼å¿ƒï¼Œå»ä¹Ÿæ˜¯ä¸€å€‹å¼±é»ï¼š  è­¬å¦‚èªªæœ‰äº›ç¶²ç«™å…è¨±ä½¿ç”¨è€…ä¸Šå‚³æª”æ¡ˆï¼Œé‚£**  æ”»æ“Šè€…å°±å¯ä»¥æƒ¡æ„ä¸Šå‚³ä¸€äº›æœ‰ JS ç‰¹å¾µçš„ JPG æª”ï¼ˆé€™äº›åœ–ç‰‡æœƒè¢«ç€è¦½å™¨åˆ¤æ–·æˆè…³æœ¬ï¼‰**ã€‚ æ¥è‘—æƒ³è¾¦æ³•è®“é€™å¼µåœ–ç‰‡è¢«è¼‰å…¥åˆ°å‰ç«¯ä¾†ï¼Œå°è‡´è£¡é¢çš„æƒ¡æ„è…³æœ¬è¢«åŸ·è¡Œï¼Œ  é€ æˆ XSS æ”»æ“Šã€‚       6.5.2 X-XSS-Protection   é€£çµ    IEç³»åˆ—ï¼š   IE8 â” ï¼šç„¡æ•ˆ  IE8 âœšï¼šå¯ç”¨(å¯åœç”¨)\n   ç€è¦½å™¨æª¢æ¸¬åˆ° XSS Script æ”»æ“Šï¼Œå³åœæ­¢åŸ·è¡Œé é¢è¼‰å…¥ã€‚  å¯æ­é…è¨­ç½® Content-Security-Policy ä¾†ç¦ç”¨ Corss Javascriptã€‚  ç¾ä»£å¤šæ•¸ç€è¦½å™¨ä¸å¤ªéœ€è¦é€™é …ä¿è­·ï¼Œä½†å°æ–¼ä¸æ”¯æ´ CSP çš„èˆŠç‰ˆç€è¦½å™¨çš„ç”¨æˆ¶æä¾›ä¿è­·ã€‚   X-XSS-Protection: 0\n    ç¦æ­¢XSSè¿‡æ»¤ã€‚\n\nX-XSS-Protection: 1 \n    å•Ÿç”¨XSSéæ¿¾ï¼ˆé€šå¸¸ç€è¦½å™¨æ˜¯é è¨­çš„ï¼‰ã€‚å¦‚æœæª¢æ¸¬åˆ°è·¨ç«™è…³æœ¬æ”»æ“Šï¼Œç€è¦½å™¨å°‡æ¸…é™¤é é¢ï¼ˆåˆªé™¤ä¸å®‰å…¨çš„éƒ¨åˆ†ï¼‰ã€‚\n\nX-XSS-Protection: 1; mode=block\n    å•Ÿç”¨XSSéæ¿¾ã€‚å¦‚æœæª¢æ¸¬åˆ°æ”»æ“Šï¼Œç€è¦½å™¨å°‡ä¸æœƒæ¸…é™¤é é¢ï¼Œè€Œæ˜¯é˜»æ­¢é é¢è¼‰å…¥ã€‚\n\nX-XSS-Protection: 1; report=<reporting-uri> \n    å•Ÿç”¨XSSéæ¿¾ã€‚å¦‚æœæª¢æ¸¬åˆ°è·¨ç«™è…³æœ¬æ”»æ“Šï¼Œç€è¦½å™¨å°‡æ¸…é™¤é é¢ä¸¦ä½¿ç”¨CSP report-uriæŒ‡ä»¤çš„åŠŸèƒ½ç™¼é€é•è¦å ±å‘Šã€‚\n     æ¨è–¦è¨­å®šï¼š   X-XSS-Protection: 1; mode=block\nå•Ÿç”¨XSSéæ¿¾ã€‚å¦‚æœæª¢æ¸¬åˆ°æ”»æ“Šï¼Œç€è¦½å™¨å°‡ä¸æœƒæ¸…é™¤é é¢ï¼Œè€Œæ˜¯é˜»æ­¢é é¢è¼‰å…¥ã€‚\n     6.5.3 X-Frame-Options   é€£çµ    IEç³»åˆ—ï¼š   IE8 â” ï¼šç„¡  IE8 âœšï¼šé€™å€‹ HTTP response header åœ¨ 2009 å¹´æ™‚é¦–å…ˆç”± IE8 å¯¦ä½œï¼Œæ¥è‘—å…¶ä»–ç€è¦½å™¨æ‰è·Ÿä¸Šï¼Œåœ¨ 2013 å¹´æ™‚æ‰è®Šæˆäº†å®Œæ•´çš„Â   RFC7034 ã€‚   å…è¨±æˆ–ç¦æ­¢ç¶²é è¼‰å…¥Â   <frame> Â èˆ‡Â   <iframe> ã€‚   å‰¯ä½œç”¨æ˜¯å…¶ä»–æ­£å¸¸çš„ç¶²ç«™ï¼Œä¹Ÿç„¡æ³•åœ¨ frame ä¸­é¡¯ç¤ºè¢«ç¦ç”¨ frame çš„ç¶²é ã€‚    X-Frame-Options Â æœ€å‰é¢çš„Â   X Â èªªæ˜äº†å®ƒæ¯”è¼ƒåƒæ˜¯ä¸€å€‹éæ¸¡æ™‚æœŸçš„æ±è¥¿ï¼Œåœ¨æœªä¾†æ–°çš„ç€è¦½å™¨ç•¶ä¸­ï¼Œå®ƒçš„åŠŸèƒ½æœƒè¢« CSPï¼ˆContent Security Policyï¼‰çµ¦å–ä»£ï¼Œä¸¦ä¸”æŠŠä¸Šé¢æåˆ°çš„å•é¡Œè§£æ±ºã€‚   X-Frame-Options: DENY\n    æ‹’çµ•ä»»ä½•ç¶²é æŠŠé€™å€‹ç¶²é åµŒå…¥ï¼ŒåŒ…å« <iframe>, <frame>, <object>, <applet>, <embed> é€™äº› tag éƒ½ä¸è¡Œã€‚\n\nX-Frame-Options: SAMEORIGIN\n    åªæœ‰ same origin çš„ç¶²é å¯ä»¥ã€‚\n\nX-Frame-Options: ALLOW-FROM https://example.com/\n    åªå…è¨±ç‰¹å®šçš„ origin åµŒå…¥ï¼Œé™¤æ­¤ä¹‹å¤–å…¶ä»–çš„éƒ½ä¸è¡Œï¼ˆåªèƒ½æ”¾ä¸€å€‹å€¼ä¸èƒ½æ”¾åˆ—è¡¨ï¼Œæ‰€ä»¥å¦‚æœè¦å¤šå€‹ originï¼Œè¦åƒ CORS header é‚£æ¨£åœ¨ server å‹•æ…‹èª¿æ•´è¼¸å‡ºï¼‰ã€‚\n\nWebAPIï¼šå¯ä»¥æ¸›è¼•åœ¨é€šéFrameè®€å–è³‡æ–™å°è‡´çš„æŸäº›æ¼æ´è€Œè¢«æƒ¡æ„ä½¿ç”¨ã€‚(æ‡‰è©²ä¹Ÿä¸æœƒåœ¨Framå…§è®€å–è³‡æ–™ï¼Œæœ‰åŠ æœ‰ä¿åº‡ã€‚)\n     æ¨è–¦è¨­å®šï¼š   X-Frame-Options: SAMEORIGIN\n    åªæœ‰ same origin çš„ç¶²é å¯ä»¥ã€‚\n   ğŸ’¡    è£œå……ï¼šClickjacking é»æ“ŠåŠ«æŒæ”»æ“Š  é»æ“ŠåŠ«æŒï¼ˆClickjackingï¼‰æŠ€è¡“åˆç¨±ç‚º    ç•Œé¢å½è£æ”»æ“Šï¼ˆUI redress attackï¼‰ \næ˜¯ä¸€ç¨®å°‡æƒ¡æ„ç¨‹å¼éš±è—åœ¨çœ‹ä¼¼æ­£å¸¸çš„ç¶²é ä¸­ï¼Œä¸¦èª˜ä½¿ä½¿ç”¨è€…åœ¨ä¸çŸ¥æƒ…æƒ…æ³ä¸‹é»æ“Šçš„æ‰‹æ®µã€‚    æ”»æ“ŠåŸç†   ä½¿ç”¨è€…è¢«èª˜ä½¿é»æ“Šç¨®ä¸‹æƒ¡æ„ç¨‹å¼çš„é€£çµæ™‚ï¼Œ  è©²é€£çµä¸Šå…¶å¯¦è¦†è“‹äº†ä¸€å€‹éš±è—çš„Â   <iframe> ï¼Œ  é»æ“Šè©²é€£çµæ™‚ï¼Œå¯¦éš›ä¸Šæ˜¯é»é¸äº†éš±è—çš„Â   <iframe> ï¼Œ  å¦‚æœÂ   <iframe> Â å…§å®¹æ˜¯å€‹ facebook çš„ã€Œè®šã€æŒ‰éˆ•ï¼Œ  ç”¨æˆ¶é»åˆ°é€£çµæ™‚ï¼Œå¯¦éš›ä¸Šæ˜¯æ“ä½œçš„æ˜¯ facebook çš„ä»‹é¢ã€‚å¦‚ Twitterã€Facebook å’Œ Paypal ç­‰ç¶²ç«™ä¸Šï¼Œéƒ½æ›¾ç¶“ç™¼ç”Ÿéæ­¤ç¨®æ”»æ“Šã€‚    æœƒå½è£é€£çµä½¿å—å®³è€…é»æ“Šæƒ¡æ„é€£çµ   CSS z-index å±¬æ€§ ï¼šåœ¨ CSS ç•¶ä¸­ z-index çš„æ•¸å­—è¶Šå¤§ï¼Œè¡¨ç¤ºè¶Šä¸Šå±¤ï¼Œå—å®³è€…æ’å…¥Â   <iframe> Â æˆ–å…¶ä»– HTML çš„æ™‚å€™ï¼Œå¯ä»¥èª¿æ•´æ¨™ç±¤çš„ã€Œé€æ˜åº¦ã€ã€ã€Œz-indexã€ï¼Œå¯ä»¥è¨­å®šç‚ºé€æ˜ä¸”æœ€ä¸Šå±¤ï¼Œä½¿å—å®³è€…å¯ä»¥é»æ“Šã€‚       ä¸è­˜å»¬å±±çœŸé¢ç›®ï¼šClickjacking é»æ“ŠåŠ«æŒæ”»æ“Š (cymetrics.io)   Day17ã€Webã€‘ç¶²è·¯æ”»æ“Šï¼šé»æ“ŠåŠ«æŒ Clickjacking - iT é‚¦å¹«å¿™::ä¸€èµ·å¹«å¿™è§£æ±ºé›£é¡Œï¼Œæ‹¯æ•‘ IT äººçš„ä¸€å¤© (ithome.com.tw)     6.5.4 Content-Security-Policy   é€£çµ     å…§å®¹å®‰å…¨ç­–ç•¥ ï¼ˆ  CSP ï¼‰ æ˜¯ä¸€å€‹é¡å¤–çš„å®‰å…¨å±¤ï¼Œç”¨æ–¼æª¢æ¸¬ä¸¦å‰Šå¼±æŸäº›ç‰¹å®šé¡å‹çš„æ”»æ“Šï¼ŒåŒ…æ‹¬è·¨ç«™è…³æœ¬ ï¼ˆ  XSS Â ï¼‰ å’Œæ•¸æ“šæ³¨å…¥æ”»æ“Šç­‰ã€‚ \nç„¡è«–æ˜¯æ•¸æ“šç›œå–ã€ç¶²ç«™å…§å®¹æ±¡æŸ“é‚„æ˜¯æ•£ç™¼æƒ¡æ„è»Ÿé«”ï¼Œé€™äº›æ”»æ“Šéƒ½æ˜¯ä¸»è¦çš„æ‰‹æ®µã€‚  \nğŸ“Œ CSP å»ºè­°åœ¨ server ç«¯åŠ  ï¼Œé›–ç„¶å‰ç«¯å¯ä»¥åˆ©ç”¨Â `meta http-equiv`\nçµ¦ç€è¦½å™¨ä¸€äº›é¡å¤–è³‡è¨Šï¼Œ ä½†æ‰€æœ‰æ–‡ä»¶é‚„æ˜¯ prefer åœ¨ Server é‚£é‚ŠåŠ  HTTP header\n     æ¨è–¦è¨­å®šï¼š   Content-Security-Policy: default-src larry.com\n  é™åˆ¶ç€è¦½å™¨åªèƒ½å¾ larry.com é€™å€‹ç¶²åŸŸè¼‰å…¥åœ–ç‰‡ã€CSSã€å­—é«”ç­‰ç­‰å„ç¨®è³‡æº\n\nWebAPIï¼šContent-Secuity-Policy: default-src 'none'\n  å‘ŠçŸ¥ç€è¦½å™¨ä¸è¦è®€å–å…¶ä»–è³‡æº**\n    \nğŸ’¡ è£œå……ï¼š\n   ç°¡å–®å¼„æ‡‚åŒæºæ”¿ç­– (Same Origin Policy) èˆ‡è·¨ç¶²åŸŸ (CORS)   Content Security Policy (CSP) â€” å¹«ä½ ç¶²ç«™åˆ—ç™½åå–®å§   Day11-è¨˜å¾—è¦æˆ´å®‰å…¨å¸½ï¼ˆä¸€ï¼‰     6.5.5 Strict-Transport-Security   é€£çµ     å…¨åæ˜¯ HTTP Strict Transport Securityã€‚  å¼·åˆ¶ç€è¦½å™¨åªèƒ½ä½¿ç”¨å®‰å…¨çš„ HTTPS å”å®šè·Ÿç¶²ç«™é€²è¡Œé€£ç·šï¼Œè€Œä¸èƒ½ä½¿ç”¨ HTTPã€‚  è­¬å¦‚èªªå¾ˆå¤šç¶²ç«™å…¶å¯¦ç”¨ HTTP è·Ÿ HTTPS éƒ½é€£å¾—ä¸Šï¼Œä½†è€ƒé‡åˆ°å®‰å…¨æ€§ï¼Œç•¶ç„¶æ˜¯å¸Œæœ›ä½¿ç”¨è€…éƒ½èµ° HTTPSã€‚é€™æ™‚åªè¦åœ¨ header è£¡åŠ ä¸ŠÂ   Strict-Transport-Security: max-age=31536000; includeSubDomains ï¼Œé‚£åœ¨å¾€å¾Œçš„ 31536000 ç§’å…§ï¼ˆå…¶å¯¦å°±æ˜¯ä¸€å¹´å•¦XDï¼‰ï¼Œåªè¦ä½¿ç”¨è€…çš„ç€è¦½å™¨çœ‹åˆ°é€™å€‹ç¶²åŸŸæˆ–ä»–çš„å­ç¶²åŸŸï¼Œå°±æœƒå…¨éƒ¨æ”¹æˆç”¨ HTTPS é€²è¡Œé€£ç·šï¼ŒçœŸçš„æ˜¯å¾ˆæ–¹ä¾¿å‘¢ã€‚    \nğŸ“Œ åªæœ‰åœ¨ HTTPS æœ‰æ•ˆ\n     6.5.6 Public-Key-Pins   é€£çµ    å·²æ£„ç”¨     ä¸å†å»ºè­°ä½¿ç”¨æ­¤åŠŸèƒ½ã€‚é›–ç„¶æŸäº›ç€è¦½å™¨å¯èƒ½ä»ç„¶æ”¯æ´å®ƒï¼Œä½†å®ƒå¯èƒ½å·²ç¶“å¾ç›¸é—œçš„Webæ¨™æº–ä¸­åˆªé™¤ï¼Œå¯èƒ½æ­£åœ¨è¢«åˆªé™¤ï¼Œæˆ–è€…å¯èƒ½åªæ˜¯ç‚ºäº†ç›¸å®¹ç›®çš„è€Œä¿ç•™ã€‚é¿å…ä½¿ç”¨å®ƒï¼Œä¸¦ç›¡å¯èƒ½æ›´æ–°ç¾æœ‰ä»£ç¢¼;è«‹åƒé–±æ­¤é é¢åº•éƒ¨çš„[ç›¸å®¹æ€§è¡¨](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Public-Key-Pins#browser_compatibility)ï¼Œä»¥æŒ‡å°æ‚¨çš„æ±ºå®šã€‚è«‹æ³¨æ„ï¼Œæ­¤åŠŸèƒ½å¯èƒ½éš¨æ™‚åœæ­¢å·¥ä½œã€‚   ç”¨æ–¼å°‡ç‰¹å®šåŠ å¯†å…¬  é‘° èˆ‡æŸå€‹ Web ä¼ºæœå™¨ç›¸é—œè¯ï¼Œä»¥é™ä½ä½¿ç”¨å½é€ è­‰æ›¸é€²è¡ŒÂ   MITM Â æ”»æ“Šçš„é¢¨éšªã€‚ä½†æ˜¯ï¼Œå®ƒå·²å¾ç¾ä»£ç€è¦½å™¨ä¸­åˆªé™¤ï¼Œä¸å†æ”¯æ´ã€‚     æ¨è–¦è¨­å®šï¼š  \nğŸ“Œ Certificate Transparency\n  \nğŸ“Œ Expect-CT\n     6.5.7 Set-Cookie   é€£çµ      å¾å¾Œç«¯è¨­ç½® ï¼šä½¿ç”¨å¾Œç«¯èªè¨€è¨­ç½® cookieï¼Œé€šé response çš„ Set-Cookie headerï¼Œç€è¦½å™¨æœƒæ ¹æ“š Set-Cookie å„²å­˜ cookie    å¾å‰ç«¯ javascript è¨­ç½® ï¼šå¦‚ï¼šdocument.cookie = â€œname=John;â€ã€‚   cookieåŸç†   é€£çµ  \nğŸ“Œ Cookieï¼ˆä¹Ÿå«HTTP cookieï¼Œweb cookieï¼‰æ˜¯ä¿å­˜åœ¨ç€è¦½å™¨ä¸­çš„ä¸€å°å¡Šæ•¸æ“šï¼ˆä¸è¶…é4Kï¼‰ã€‚ HTTPå”å®šæ˜¯ç„¡ç‹€æ…‹çš„ï¼Œå› æ­¤cookieæœ€åˆè¢«è¨­è¨ˆä¾†å¹«åŠ©ç¶²ç«™ä¿å­˜ä¸€äº›ç‹€æ…‹è³‡è¨Šï¼Œæˆ–è€…ä½¿ç”¨è€…çš„ä¸€äº›æ“ä½œæ­·å²ã€‚ æ¯”å¦‚åŸºæ–¼cookieå¯¦ç¾çš„å‰ç«¯è³¼ç‰©è»Šï¼ˆç¾åœ¨é€šå¸¸æœƒç”¨local storageä¾†æ›¿ä»£cookieï¼‰ï¼Œæˆ–è€…çµåˆsessionä¾†å¯¦ç¾ä½¿ç”¨è€…ç™»éŒ„ç‹€æ…‹ï¼Œäº¦æˆ–è€…æ˜¯ä¿ç•™ä½¿ç”¨è€…åœ¨ç¶²ç«™ä¸Šå¡«å¯«çš„è¡¨å–®è³‡è¨Šæ–¹ä¾¿ä¸‹æ¬¡è¼¸å…¥ã€‚\n    åŒæºç­–ç•¥  cookieå¸¸å¸¸è¢«ç”¨æ–¼å­˜å„²ä½¿ç”¨è€…çš„ç§æœ‰è³‡è¨Šï¼Œæ‰€ä»¥ç‚ºäº†ä¿è­‰éš±ç§å®‰å…¨ï¼Œé˜²æ­¢cookieè³‡è¨Šè¢«ç›œå–ï¼Œç€è¦½å™¨æ–½è¡Œäº†åŒæºæ”¿ç­–ã€‚ åªæœ‰ç•¶å„å€‹ç¶²è·¯è¨ªå•æ»¿è¶³åŒæºç­–ç•¥æ™‚ï¼Œæ‰å…è¨±å…±ç”¨cookieè³‡è¨Šã€‚ æ‰€è¬‚çš„ã€ŒåŒæºã€æŒ‡çš„æ˜¯ï¼š   å”å®šç›¸åŒ  åŠŸèƒ½è®Šæ•¸åç¨±ç›¸åŒ  åŸ ç›¸åŒ   http:// www.test.com :80/xxxxxx\n------- ------------ ---\n    |         |       |\n   å”è­°      åŸŸå     ç«¯å£**\n  åªæœ‰ç•¶é€™ä¸‰è€…ç›¸åŒæ™‚ï¼Œç€è¦½å™¨æ‰èªç‚ºæ˜¯ç¬¦åˆåŒæºç­–ç•¥çš„ã€‚ è€ŒåŸºæ–¼cookieçš„ç¶²è·¯æ”»æ“Šå‰‡æ˜¯é€šéç¹éå„ç¨®è¾¦æ³•ç¹éåŒæºç­–ç•¥ä¾†å¯¦æ–½æ”»æ“Šï¼Œæ¯”å¦‚XSSã€CSRFæ”»æ“Šã€‚   cookieå¸¶ä¾†çš„å®‰å…¨å•é¡Œ    ç¶²è·¯ç«Šè½ï¼ˆä¸­é–“äººæ”»æ“Šï¼‰      DNSç·©å­˜ä¸­æ¯’      æ–·çºŒå™¨ - cookieç›œç”¨      æ–·çºŒå™¨ - ä»£ç†è«‹æ±‚     Cookie flagï¼š\n    Expiresï¼šè¨­å®šä¸€å€‹æ—¥æœŸï¼Œåˆ°æ—¥æœŸæ™‚å°±æœƒè‡ªå‹•å¤±æ•ˆã€‚\n    Max-Ageï¼šè¨­å®šç§’æ•¸ï¼Œç§’æ•¸éå¾Œè‡ªå‹•å¤±æ•ˆï¼Œæ¯”Expireså„ªå…ˆåº¦é«˜ã€‚\n    Domainï¼šè¨­å®šä½œç”¨ç¶²åŸŸï¼Œè¨­å®šä¹‹å¾ŒæœƒåŒ…å«å­ç¶²åŸŸï¼Œè‹¥ç„¡è¨­å®šå‰‡é»˜èªç•¶å‰ç¶²åŸŸï¼Œä¸åŒ…å«å­ç¶²åŸŸã€‚\n    Pathï¼šè¨­å®šä½œç”¨è·¯å¾‘ï¼Œè¨­å®š/adminå°‡åŒ¹é…/admin/users,/admin/rolesç­‰è·¯å¾‘ã€‚\n    Secureï¼šåªèƒ½ä½¿ç”¨httpså‚³åˆ°ä¼ºæœå™¨ã€‚\n    HttpOnlyï¼šåªèƒ½ç¶“ç”±ä¼ºæœå™¨å­˜å–cookieï¼Œä¸èƒ½ç¶“ç”±document.cookieã€‚\n    SameSiteï¼šLax: default å€¼ï¼Œåœ¨ä¸åŒç¶²åŸŸæ™‚ä¸æœƒç™¼é€ï¼Œä½†åœ¨å…¶ä»–ç¶²åŸŸå°å‘åŸæœ¬ç¶²åŸŸæ™‚æœƒç™¼é€ã€‚\n    Strict: åªèƒ½åœ¨åŒç¶²åŸŸä¸‹å‚³é€ã€‚\n    None: å¯ä»¥è·¨åŸŸç™¼é€ï¼Œä½†å¿…é ˆæœ‰Secure flagã€‚\n     æ¨è–¦è¨­å®šï¼š   Cookie flagï¼š\n    **Expiresï¼šè¨­å®šä¸€å€‹æ—¥æœŸï¼Œåˆ°æ—¥æœŸæ™‚å°±æœƒè‡ªå‹•å¤±æ•ˆã€‚\n    Max-Ageï¼šè¨­å®šç§’æ•¸ï¼Œç§’æ•¸éå¾Œè‡ªå‹•å¤±æ•ˆï¼Œæ¯”Expireså„ªå…ˆåº¦é«˜ã€‚\n    Domainï¼šè¨­å®šä½œç”¨ç¶²åŸŸï¼Œè¨­å®šä¹‹å¾ŒæœƒåŒ…å«å­ç¶²åŸŸï¼Œè‹¥ç„¡è¨­å®šå‰‡é»˜èªç•¶å‰ç¶²åŸŸï¼Œä¸åŒ…å«å­ç¶²åŸŸã€‚\n    Pathï¼šè¨­å®šä½œç”¨è·¯å¾‘ï¼Œè¨­å®š/adminå°‡åŒ¹é…/admin/users,/admin/rolesç­‰è·¯å¾‘ã€‚\n    Secureï¼šåªèƒ½ä½¿ç”¨httpså‚³åˆ°ä¼ºæœå™¨ã€‚\n    HttpOnlyï¼šåªèƒ½ç¶“ç”±ä¼ºæœå™¨å­˜å–cookieï¼Œä¸èƒ½ç¶“ç”±document.cookieã€‚\n    SameSiteï¼šLax: default å€¼ï¼Œåœ¨ä¸åŒç¶²åŸŸæ™‚ä¸æœƒç™¼é€ï¼Œä½†åœ¨å…¶ä»–ç¶²åŸŸå°å‘åŸæœ¬ç¶²åŸŸæ™‚æœƒç™¼é€ã€‚**\n    Strict: åªèƒ½åœ¨åŒç¶²åŸŸä¸‹å‚³é€ã€‚\n    None: å¯ä»¥è·¨åŸŸç™¼é€ï¼Œä½†å¿…é ˆæœ‰Secure flagã€‚\n  \nğŸ’¡è£œå……ï¼š\n   è³‡å®‰è­°é¡Œ â€” Cookie å®‰å…¨. å‰è¨€ | by LSZ | ç¨‹å¼æ„›å¥½è€… | Medium   Cookie çš„å®‰å…¨éš±æ‚£ - iT é‚¦å¹«å¿™::ä¸€èµ·å¹«å¿™è§£æ±ºé›£é¡Œï¼Œæ‹¯æ•‘ IT äººçš„ä¸€å¤© (ithome.com.tw)         è³‡å®‰è­°é¡Œ â€” Http Security Header. ç•¶ä½¿ç”¨è€…é€šéç€è¦½å™¨ç™¼é€requeståˆ°ä¼ºæœå™¨ä¸Šï¼Œä¼ºæœå™¨æœƒå›æ‡‰responseçµ¦ç€â€¦ | by LSZ | ç¨‹å¼æ„›å¥½è€… | Medium   å‰ç«¯å–®å…µåŸºæœ¬æ•™ç·´ - X-Frame-Optionsã€CSP frame-ancestors ç¶²ç«™å…§åµŒé™åˆ¶å¯¦æ¸¬-é»‘æš—åŸ·è¡Œç·’ (darkthread.net)     6.6 æ‡‰å°å¤§è¦æ¨¡è¨ªå•çš„å°ç­–      ä¸åƒ…æ˜¯Web APIæœå‹™ï¼Œä»»ä½•åœ¨ç¶²è·¯ä¸Šå…¬é–‹çš„æœå‹™éƒ½æœƒæ™‚ä¸æ™‚åœ°é‡åˆ°ä¾†è‡ªå¤–éƒ¨çš„å¤§è¦æ¨¡è¨ªå•ã€‚ç•¶ä¼ºæœå™¨é‡åˆ°å¤§è¦æ¨¡è¨ªå•æ™‚ï¼Œç‚ºäº†è™•ç†é€™äº›è¨ªå•æœƒè€—ç›¡è³‡æºï¼Œé€²è€Œç„¡æ³•æä¾›æœå‹™ã€‚é€™æ™‚ä¸åƒ…æ˜¯é€™äº›å¤§è¦æ¨¡è¨ªå•ï¼Œä»»ä½•äººéƒ½ç„¡æ³•å’Œä¼ºæœå™¨ç«¯å»ºç«‹é€£ç·šã€‚  \nâš ï¸ **DDOSï¼š**\n   ddos æ”»æ“Šå®šç¾©ï¼Œé˜²è­·ç­–ç•¥èˆ‡ä¸‰æ‰‹æ³•| Cloudflare | Cloudflare     Famous DDoS Attacks | Cloudflare     ã€Security çš„è€ç”Ÿå¸¸è«‡ã€‘åˆæ˜¯ä½ å—ï¼ŸDDoS ?! - (discover-thefutureofwork-tw.cloud)       6.6.1 é™åˆ¶ä½¿ç”¨è€…çš„è¨ªå• *      ç”¨ä»€éº¼æ¨£çš„æ©Ÿåˆ¶ä¾†è­˜åˆ¥ä½¿ç”¨è€…   å¦‚ä½•ç¢ºå®šé™é€Ÿçš„æ•¸å€¼   ä»¥ä»€éº¼å–®ä½ä¾†è¨­ç½®é™é€Ÿçš„æ•¸å€¼   åœ¨ä»€éº¼æ™‚å€™é‡ç½®é™é€Ÿçš„æ•¸å€¼       Twitter\n       å°æœç´¢æ¨æ–‡çš„æ“ä½œ  (search  /  tweet)ï¼šæ¯   15   åˆ†é˜   180   æ¬¡\n     å°ç›´æ¥å–å¾—æ¶ˆæ¯çš„æ“ä½œ  (direct_message)ï¼šæ¯   15   åˆ†é˜   15   æ¬¡\n   \n   Zendesk\n       åŸºæœ¬   1   åˆ†é˜å…§   200   æ¬¡\n     ä¸åŒç«¯é»ï¼Œæœ‰äº›åªå…è¨±   10   åˆ†é˜   15   æ¬¡   (æ›´æ–° ticket) , æˆ–æ›´å°‘\n     6.6.2 é™é€Ÿçš„å–®ä½      ä¸Šé™å€¼è¦æ ¹æ“šæ‰€è¨­æƒ³çš„APIä½¿ç”¨æƒ…å¢ƒé€²è¡Œèª¿æ•´   è¦äº†è§£ä½ æ‰€æä¾›çš„APIæœƒåœ¨æ€æ¨£çš„æƒ…æ³è¢«ç”¨æˆ¶ä½¿ç”¨ï¼Œä¸¦ä»¥æ­¤ç‚ºä¾æ“šä¾†æ±ºå®šå¦‚ä½•è¨­ç½®è¨ªå•é™åˆ¶é€Ÿã€‚  \nâŒ å°è³‡æ–™åº«é »ç¹æ›´æ–°çš„æŸ¥è©¢é¡ API ï¼š ç”¨æˆ¶éœ€è¦é »ç¹åœ°è¨ªå•APIï¼Œå–å¾—æœ€æ–°è³‡æ–™ã€‚å¦‚æœè¨­å®š 1 å°æ™‚åªå…è¨±è¨ªå• 10 æ¬¡é€™æ¨£åš´æ ¼çš„é™åˆ¶ã€‚é‚£éº¼å³ä½¿ä½¿ç”¨APIï¼Œä¹Ÿç„¡æ³•çµ¦æ‡‰ç”¨æˆ–æœå‹™å¸¶ä¾†æ›´é«˜çš„é™„åŠ åƒ¹å€¼ï¼ŒAPIç”¨æˆ¶æ•¸ä¹Ÿé›£ä»¥å¢åŠ ã€‚\n  \nğŸ“Œ Etsy æœå‹™å¼•å…¥\"progressive rate limit\"(ç´¯é€²é™é€Ÿ)çš„é™é€Ÿæ–¹å¼ï¼Œç”¨æˆ¶è¨ªå•ä¸Šé™ 24 å°æ™‚ 1 è¬æ¬¡\n  è¨ˆç®—ï¼š\n24 å°æ™‚ æ‹†æˆ 12 å€‹å–®å…ƒï¼Œæ¯å€‹å–®å…ƒ 2 å°æ™‚ï¼Œä»¥éå» 12 å€‹å–®å…ƒç´¯è¨ˆè¨ªå•æ¬¡æ•¸åšç‚ºè¨ªå•ä¸Šé™ã€‚\nå³ä½¿ç”¨æˆ¶è¶…éä¸Šé™ï¼Œåªéœ€è¦å†ç­‰å¾… 2 å°æ™‚ï¼Œç¬¬ä¸€å€‹å–®å…ƒçš„è¨ªå•æ¬¡æ•¸å°±æœƒé‡ç½®ï¼Œç”¨æˆ¶å°±å¯ä»¥å†è¨ªå•ã€‚     6.6.3 æ‡‰å°è¶…å‡ºä¸Šé™å€¼çš„æƒ…æ³     å¯ä»¥è¿”å›HTTPå”è­°ä¸­å‚™å¥½çš„â€œ429 Too Many Requestâ€ç‹€æ…‹ç¢¼ã€‚   ç•¶ç”¨æˆ¶è¶…å‡ºè¨ªå•ä¸Šé™å€¼æ™‚ï¼Œæœå‹™ç«¯è©²å¦‚ä½•è¿”å›éŸ¿æ‡‰è¨Šæ¯å‘¢ï¼Ÿé€™ç¨®æƒ…æ³ä¸‹å¯ä»¥è¿”å›HTTPå”è­°ä¸­å‚™å¥½çš„â€œ429 Too Many Requestâ€ç‹€æ…‹ç¢¼ã€‚429ç‹€æ…‹ç¢¼åœ¨2012å¹´4æœˆé‡‹å‡ºçš„RFC 6585ä¸­å®šç¾©ï¼Œç•¶ç‰¹å®šä½¿ç”¨è€…åœ¨ä¸€å®šæ™‚é–“å…§ç™¼èµ·çš„è«‹æ±‚æ¬¡æ•¸éå¤šæ™‚ï¼Œä¼ºæœå™¨ç«¯å¯ä»¥è¿”å›è©²ç‹€æ…‹ç¢¼éŒ¶ç¤ºå‡ºéŒ¯ã€‚RFC æ–‡ä»¶ä¸­å°è©²ç‹€æ…‹ç¢¼æè¿°å¦‚ä¸‹ï¼š         6.6.4 å‘ç”¨æˆ¶å‘ŠçŸ¥è¨ªå•é™é€Ÿçš„ä¿¡æ¯     ç”¨æˆ¶æœƒä¸€ç›´è¨ªå• API   ç”¨æˆ¶å¦‚æœçŸ¥é“é™é€Ÿä¿¡æ¯ï¼Œå°±å¯èƒ½æœƒé‡å°æ€§çš„ç·¨å¯«å‡ºè‡ªå‹•èª¿æ•´è¨ªå•é‡çš„å®¢æˆ¶ç«¯ç¨‹åºã€‚           https://api.github.com/rate_limit               Web API çš„è¨­è¨ˆèˆ‡é–‹ç™¼ | ä¸ƒæœˆåäº”ä¹æœˆåˆä¸ƒ (luisedware.github.io)   html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}"},{"id":"content:4.cicd-2.0:5.chapter5.md","path":"/cicd-2.0/chapter5","dir":"cicd-2.0","title":"05 æŒçºŒäº¤ä»˜çš„è»Ÿé«”ç³»çµ±æ¶æ§‹","description":"","keywords":["å‰è¨€","5.1 â€å¤§ç³»çµ±å°åšâ€åŸå‰‡","5.2 å¸¸è¦‹æ¶æ§‹æ¨¡å¼","5.3 æ¶æ§‹æ”¹é€ å¯¦æ–½æ¨¡å¼","5.4 å°çµ"],"body":"  å‰è¨€  åœ¨ 2000 å¹´ï¼Œè‘—åçš„é›»å•†ç¶²ç«™ AWS ä»ç„¶æ˜¯ä½¿ç”¨å‚³çµ±çš„å·¨çŸ³æ‡‰ç”¨é–‹ç™¼ï¼Œè€Œä¸æ˜¯ä»Šå¤©å¤§å®¶çœ‹åˆ°çš„å¾®æœå‹™æ¶æ§‹ã€‚å·¨çŸ³æ‡‰ç”¨æ¯æ¬¡éƒ¨ç½²çš„æ™‚ï¼Œéƒ½éœ€è¦å°‡æ•´å€‹ç¶²ç«™ä½œç‚ºä¸€æ•´é«”ä¸¦é€²è¡Œçµ±ä¸€éƒ¨ç½²ã€‚åœ¨å¤§å‹ä¿ƒéŠ·æ´»å‹•æ™‚ï¼Œç¶²ç«™çš„ç©©å®šæ€§é‡åˆ°äº†åš´å³»æŒ‘æˆ°ï¼Œå„˜ç®¡åœ˜éšŠä¹‹å‰åšäº†é ä¼°æ“´å……ï¼Œä½†åœ¨æ´»å‹•æµé‡æœŸé–“å¾€å¾€è¶…å‡ºäº†åœ˜éšŠçš„é ä¼°ã€‚ç”Ÿç”¢äº‹ä»¶é€ æˆçš„å•é¡Œï¼Œé »é »ç™¼ç”Ÿï¼Œç¶“å¸¸ä¿®å¾©ä¸€è™•å•é¡Œå»å¼•ç™¼å¦å¤–ä¸€è™•å•é¡Œã€‚  å…¬å¸ç®¡ç†å±¤å…§éƒ¨é–‹å§‹æŸ¥çœ‹åŸå› ï¼Œæœ€ä¸»è¦çš„åŸå› æ˜¯å› ç‚ºç³»çµ±è€¦åˆåº¦å¤ªé«˜ä¸”è¤‡é›œã€‚ä½†ç”±æ–¼æ™‚é–“æ¯”è¼ƒç·Šè¿«ï¼Œå·¥ç¨‹å¸«å¿™æ–¼é–‹ç™¼è‡ªå·±æ‰‹ä¸Šçš„åŠŸèƒ½ï¼Œæ²’æœ‰æ™‚é–“é€²è¡Œæºé€šã€‚  å¾Œä¾†å°‡å·¨çŸ³æ¶æ§‹æ”¹ç‚ºæœå‹™å°å‘æ¶æ§‹   (Service-Oriented Architecture, SOA)ï¼Œä¸¦æå‡ºä»¥ä¸‹è¦æ±‚   æ‰€æœ‰åœ˜éšŠéƒ½è¦ä»¥æœå‹™ä»‹é¢çš„æ–¹å¼ï¼Œæä¾›è³‡æ–™å’Œå„ç¨®åŠŸèƒ½  åœ˜éšŠä¹‹é–“å¿…é ˆé€šéä»‹é¢ä¾†é€šè¨Š  ä¸å…è¨±å…¶ä»–å½¢å¼çš„äº’ç›¸æ“ä½œã€ä¸å…è¨±ç›´æ¥å­˜å–å…¶ä»–åœ˜éšŠçš„è³‡æ–™åº«ã€ä¸å…è¨±å…±äº«è¨˜æ†¶é«”ã€ä¸å…è¨±ä»»ä½•å½¢å¼çš„å¾Œé–€ã€‚å”¯ä¸€è¨±å¯çš„é€šè¨Šæ–¹å¼ï¼Œå°±æ˜¯é€šéç¶²è·¯ä¾†å‘¼å«æœå‹™ã€‚  å…·é«”çš„å¯¦ç¾æŠ€è¡“ä¸åšè¦å®šï¼ŒHTTPã€Corbaã€Pub/Sub æ–¹å¼ï¼Œè‡ªå®šç¾©å”å®šå³å¯ã€‚  æ‰€æœ‰çš„æœå‹™ä»‹é¢ï¼Œå¿…é ˆå¾ä¸€é–‹å§‹å°±æ˜¯å…¬é–‹çš„è¨­è¨ˆä»‹é¢ã€‚ç°¡è€Œè¨€ä¹‹ï¼Œåœ¨è¨­è¨ˆä»‹é¢çš„æ™‚å€™ï¼Œå°±é è¨­é€™å€‹ä»‹é¢å¯ä»¥è®“å¤–éƒ¨äººå“¡ä½¿ç”¨ï¼Œæ²’æœ‰è¨åƒ¹é‚„åƒ¹çš„é¤˜åœ°ã€‚  å¦‚æœä¸éµå¾ªä¸Šé¢çš„è¦å®šï¼Œå°±æœƒè¢«è§£åƒ±ã€‚   AWS åœ¨ 2011 å¹´ï¼Œå…¶ç”Ÿç”¢ç’°å¢ƒçš„éƒ¨ç½²é »ç‡å·²ç¶“éå¸¸é«˜ã€‚å·¥ä½œæ—¥çš„éƒ¨ç½²é »ç‡é«˜é”å¹³å‡æ¯ 11.6 ç§’ä¸€æ¬¡ï¼Œä¸€å°æ™‚å…§æœ€é«˜éƒ¨ç½²æ¬¡æ•¸ 1079 æ¬¡ã€‚  5.1 â€å¤§ç³»çµ±å°åšâ€åŸå‰‡  5.1.1 æŒçºŒäº¤ä»˜æ¶æ§‹è¦æ±‚  ç‚ºäº†æå‡äº¤ä»˜é€Ÿåº¦ï¼Œç²å¾—æŒçºŒäº¤ä»˜èƒ½åŠ›ï¼Œç³»çµ±æ¶æ§‹åœ¨è¨­è¨ˆæ™‚ï¼Œæ‡‰è€ƒé‡ä¸‹åˆ—å› ç´ ã€‚   ç‚ºæ¸¬è©¦è€Œè¨­è¨ˆ (design for test)ã€‚æ¯æ¬¡æ’°å¯«å¥½ç¨‹å¼ç¢¼ä¹‹å¾Œï¼Œéƒ½éœ€è¦èŠ±å¤§é‡çš„æ™‚é–“å’Œç²¾åŠ›ä¾†é€²è¡Œæ¸¬è©¦ï¼Œé€™æ¨£é©—è­‰èŠ±å¤ªå¤šæ™‚é–“ï¼Œå°±æ²’æœ‰è¾¦æ³•å¿«é€Ÿç™¼ä½ˆã€‚  ç‚ºéƒ¨ç½²è€Œè¨­è¨ˆ (design for deployment)ã€‚é–‹ç™¼å®Œæˆæ–°åŠŸèƒ½å¾Œï¼Œç•¶éƒ¨ç½²ç™¼ä½ˆæ™‚ï¼Œéœ€è¦èŠ±è²»å¾ˆé•·æ™‚é–“æº–å‚™ï¼Œç”šè‡³è¦åœæ©Ÿæ‰èƒ½éƒ¨ç½²ï¼Œå°±æ²’æœ‰è¾¦æ³•å¿«é€Ÿç™¼ä½ˆã€‚  ç‚ºç›£æ§è€Œè¨­è¨ˆ (design for monitor)ã€‚ç•¶åŠŸèƒ½ä¸Šç·šå¾Œï¼Œç„¡æ³•å³æ™‚ç›£æ§ï¼Œå¾—ç­‰åˆ°å‡ºå•é¡Œæ™‚ï¼Œä½¿ç”¨è€…å›é¥‹å¾Œæ‰çŸ¥é“å•é¡Œï¼Œé€™æ¨£æŒçºŒäº¤ä»˜çš„å„ªå‹¢å°±å¤§å¹…é™ä½äº†ã€‚  ç‚ºæ“´å±•è€Œè¨­è¨ˆ (design for scale)ã€‚æœ‰å…©é»ï¼Œä¸€æ˜¯æ”¯æŒåœ˜éšŠæˆå“¡çš„è¦æ¨¡æ“´å±•; äºŒæ˜¯æ”¯æŒç³»çµ±è‡ªèº«çš„æ“´å±•  ç‚ºå¤±æ•—è€Œè¨­è¨ˆ(design for failure)ã€‚å¿«é€Ÿéƒ¨ç½²ä¸€å®šæœƒé‡åˆ°å•é¡Œçš„ã€‚ä¸€ä½†éƒ¨ç½²æˆ–ç™¼ä½ˆå¤±æ•—ï¼Œè©²å¦‚ä½•å„ªé›…ä¸”å¿«é€Ÿåœ°è™•ç†ã€‚  5.1.2 ç³»çµ±æ‹†åˆ†åŸå‰‡  å¤§ç³»çµ±å°åšçš„æ–¹æ³•ç”±ä¾†å·²ä¹…ï¼Œåœ¨ 1971 å¹´æ™‚ï¼ŒDavid Parnas ç™¼è¡¨äº†ä¸€ç¯‡è«–æ–‡\"On the Criteria To Be Used in Decomposing Systems into Modulesâ€(å°‡ç³»çµ±åˆ†è§£ç‚ºæ¨¡çµ„çš„æ¨™æº–)ã€‚å¤§ç³»çµ±æ‡‰è©²ç”±å¾ˆå¤šçµ„ä»¶(component)æˆ–æœå‹™(service)çµ„æˆã€‚é€šå¸¸æœƒä»¥ jar/war/dll/gem ç­‰å½¢å¼å‡ºç¾ï¼Œå…¶é¡†ç²’åº¦è¦æ¯”ä¸€å€‹é¡(class)å¤§ï¼Œä½†è¦æ¯”æ•´å€‹ç³»çµ±å°å¾ˆå¤šã€‚  åƒè€ƒ  é€£çµ   çµ„ä»¶é€šå¸¸åœ¨ç·¨è­¯å»ºç½®æˆ–éƒ¨ç½²æ™‚è¢«é›†åˆåœ¨ä¸€èµ·ï¼Œè€Œæœå‹™ç”±å¤šå€‹çµ„ä»¶çµ„æˆï¼Œä¸”èƒ½å¤ ç¨ç«‹é‹è¡Œï¼Œä¸¦åœ¨é‹è¡Œæ™‚èˆ‡æ•´å€‹ç³»çµ±é€²è¡Œé€šè¨Šï¼Œæˆç‚ºæ•´å€‹ç³»çµ±çš„ä¸€éƒ¨ä»½ã€‚  ç›®å‰è»Ÿé«”çš„ç™¼å±•è¶¨å‹¢ï¼Œä»¥æŒçºŒäº¤ä»˜çš„è¦æ±‚å°ç³»çµ±é€²è¡Œæ‹†åˆ†ï¼Œæœ‰ä»¥ä¸‹åŸå‰‡   åšç‚ºç³»çµ±çš„ä¸€éƒ¨åˆ†ï¼Œæ¯å€‹çµ„ä»¶æˆ–æœå‹™æœ‰ä»–è‡ªå·±çš„æ¥­å‹™è·è²¬ï¼Œå¯ä»¥è¢«ç¨ç«‹ä¿®æ”¹ï¼Œç”šè‡³å¯ä»¥è¢«å¦å¤–ä¸€ç¨®æ–¹æ¡ˆæ‰€æ›¿ä»£ã€‚  â€œé«˜å…§èšï¼Œä½è€¦åˆâ€ï¼Œä½¿æ•´å€‹ç³»çµ±æ¯”è¼ƒæ˜“æ–¼ç¶­è­·ï¼Œæ¯å€‹çµ„ä»¶æˆ–æœå‹™åœ°åŠŸèƒ½ç›¡é‡å–®ä¸€åŒ–ï¼Œä¸è¦å¤ªè¤‡é›œã€‚  æ•´å€‹ç³»çµ±å®¹æ˜“å»ºç½®å’Œæ¸¬è©¦ã€‚å°‡ç³»çµ±æ‹†åˆ†å¾Œï¼Œé€™äº›çµ„ä»¶ä»ç„¶éœ€è¦çµ„åˆåœ¨ä¸€èµ·ï¼Œç‚ºä½¿ç”¨è€…æä¾›æœå‹™ã€‚  ä½¿åœ˜éšŠä¹‹é–“çš„æºé€šåˆä½œæ›´åŠ é †æš¢ã€‚  ç”±æ–¼å°‡ç³»çµ±é€²è¡Œæ‹†åˆ†ï¼Œå› æ­¤ç”¢ç”Ÿäº†æ–°å•é¡Œã€‚ä¾‹å¦‚: å¤šå€‹æœå‹™çµ„æˆçš„ç³»çµ±ä¾†èªªï¼Œä¸€å€‹è«‹æ±‚å¯èƒ½ç¶“éå¤šæ¬¡ä¸åŒæœå‹™ä¹‹é–“çš„ç›¸äº’å‘¼å«æ‰å®Œæˆã€‚é€™æ¨£å‘¼å«éˆéé•·ï¼Œç•¶æœ‰ä¸Šç™¾å€‹ä¸Šåƒå€‹æœå‹™æ™‚ï¼Œæ²’æœ‰æœå‹™ç™¼ç¾æ©Ÿåˆ¶æ˜¯å¾ˆé›£æƒ³åƒçš„ï¼Œç•¶ä½ å‘¼å«å…¶ä»–äººçš„æœå‹™ï¼Œä¸¦è¦æŸ¥æ‰¾å•é¡Œæ™‚ï¼Œå°±æœƒç™¼ç¾ Debug é›£åº¦éå¸¸é«˜ã€‚  å› æ­¤ç³»çµ±æ‹†åˆ†å¾Œï¼Œæˆ‘å€‘éœ€è¦å»ºç«‹å°æ‡‰çš„æ–¹æ³•   å»ºç½®  æ¸¬è©¦  éƒ¨ç½²  ç›£æ§æ©Ÿåˆ¶  5.2 å¸¸è¦‹æ¶æ§‹æ¨¡å¼  é€™é‚Šè¨è«–ä¸‰ç¨®æ¶æ§‹æ¨¡å¼   å¾®æ ¸æ¶æ§‹ï¼šå‘ä½¿ç”¨è€…åˆ†ç™¼çš„ Client ç«¯è»Ÿé«”  å¾®æœå‹™æ¶æ§‹ï¼šç”¨æ–¼ä¼æ¥­è‡ªèº«å¯æ§çš„å¾Œå° Server ç«¯è»Ÿé«”  å·¨çŸ³æ‡‰ç”¨ï¼šå¸¸è¦‹æ–¼å‰µæ¥­å…¬å¸çš„ç”¢å“é …ç›®ã€‚  5.2.1 å¾®æ ¸æ¶æ§‹  å¾®æ ¸æ¶æ§‹(microkernel architecture)ï¼Œåˆç¨±ç‚ºå¥—ä»¶æ¶æ§‹(plugin architecture)ï¼Œåªè»Ÿé«”æ ¸å¿ƒæ¡†æ¶ç›¸å°è¼ƒå°ï¼Œè€Œä¸»è¦æ¥­å‹™åŠŸèƒ½å’Œé‚è¼¯éƒ½é€šéå¥—ä»¶å¯¦ç¾ã€‚   æ ¸å¿ƒ(core)æ¶æ§‹ï¼šé€šå¸¸åªåŒ…å«ç³»çµ±é‹è¡Œçš„åŸºç¤åŠŸèƒ½ï¼Œä¾‹å¦‚: åŸºç¤çš„é€šè¨Šæ¨¡çµ„ã€åŸºæœ¬æ¸²æŸ“åŠŸèƒ½å’Œä»‹é¢æ•´é«”æ¡†æ¶ã€‚  å¥—ä»¶ï¼šå¥—ä»¶ä¹‹é–“æ˜¯äº’ç›¸ç¨ç«‹çš„ï¼Œå¥—ä»¶ä¹‹é–“çš„é€šè¨Šåªèƒ½é€šéæ ¸å¿ƒæ¡†æ¶é€²è¡Œï¼Œé¿å…å‡ºç¾äº’ç›¸ä¾è³´çš„å•é¡Œã€‚  \n    \n      æ’ä»¶ï¼šå¤–æ›ç¨‹å¼æˆ–æ“´å……å¥—ä»¶ï¼Œé€šå¸¸è·Ÿ UI æœ‰é—œä¿‚ï¼Œä¾‹å¦‚: Chrome å¸¸ç”¨çš„ Chrome Extension åŠŸèƒ½ã€‚  é€™é‚Šèˆ‰å¹¾å€‹ä¾‹å­   å‰ç«¯ç›¸é—œ   å°‡æ ¸å¿ƒæ¶æ§‹çœ‹ä½œç‚º Chrome ç€è¦½å™¨ï¼Œè€Œå¥—ä»¶çœ‹ä½œç‚º Chrome Extension å·¥å…·ã€‚  å°‡æ ¸å¿ƒæ¶æ§‹çœ‹ä½œç‚º VSCodeï¼Œè€Œå¥—ä»¶çœ‹ä½œç‚º VSCode Plug-inã€‚  å¾Œç«¯ç›¸é—œ   API Getwayï¼ŒAPI Management kongï¼Œé–‹ç®±å³ç”¨çš„ Gateway  é©…å‹•ç›¸é—œ   å°è¡¨æ©Ÿé©…å‹•ç¨‹å¼  USB é©…å‹•ç¨‹å¼  âœ… å„ªé»   è‰¯å¥½çš„åŠŸèƒ½å»¶ä¼¸æ€§(extensibility)ï¼šéœ€è¦ä»€éº¼åŠŸèƒ½ï¼Œé–‹ç™¼ä¸€å€‹æ“´å……å¥—ä»¶å³å¯ã€‚  æ˜“ç™¼ä½ˆï¼šå¥—ä»¶å¯ä»¥ç¨ç«‹åœ°åŠ è¼‰å’Œå¸è¼‰ï¼Œä½¿ä»–æ¯”è¼ƒå®¹æ˜“ç™¼ä½ˆã€‚  æ˜“æ¸¬è©¦ï¼šåŠŸèƒ½ä¹‹é–“æ˜¯éš”é›¢çš„ï¼Œäº’ç›¸ä¸å¹²æ“¾ï¼Œå› æ­¤å¯ä»¥ç¨ç«‹é€²è¡Œæ¸¬è©¦ã€‚  å¯è¨‚è£½æ€§é«˜ï¼šé©æ‡‰ä¸åŒé–‹ç™¼çš„éœ€æ±‚ã€‚  å¯ä»¥é€æ¼¸å¼åœ°é–‹ç™¼ï¼šé€æ­¥å¢åŠ åŠŸèƒ½ã€‚  âŒ ç¼ºé»   æ“´å±•æ€§(scalability)å·®ï¼Œcore é€šå¸¸æ˜¯ä¸€å€‹ç¨ç«‹å–®å…ƒï¼Œä¸å®¹æ˜“åšæˆåˆ†å¸ƒå¼ï¼Œä½†ç‚º Client ç«¯è»Ÿé«”ä¾†èªªï¼Œé€™ä¸æ˜¯ä¸€å€‹åš´é‡çš„å•é¡Œã€‚  é–‹ç™¼é›£åº¦ç›¸å°è¼ƒé«˜ï¼Œå› ç‚ºè¨­è¨ˆ Plug-in èˆ‡ Core çš„é€šè¨Šï¼Œä»¥åŠå…§éƒ¨çš„ Plug-in ç™»è¨˜æ©Ÿåˆ¶ã€‚  é«˜åº¦ä¾è³´æ¡†æ¶ï¼Œç•¶æ¡†æ¶çš„ä»‹é¢å‡ç´šæ™‚ï¼Œæœ‰å¯èƒ½å½±éŸ¿æ‰€æœ‰ Plug-inï¼Œå°è‡´å¤§é‡çš„æ”¹é€ å·¥ä½œã€‚  5.2.2 å¾®æœå‹™æ¶æ§‹  å¾®æœå‹™æ¶æ§‹(Microservice Architecture)æ˜¯æœå‹™å°å‘æ¶æ§‹(service-oriented architecture)ï¼Œç¸®å¯« SOA å‡ç´šã€‚  æ¯ä¸€å€‹æœå‹™å°±æ˜¯ä¸€å€‹ç¨ç«‹çš„éƒ¨ç½²å–®å…ƒ(separately deployed unit)ã€‚é€™äº›å–®å…ƒéƒ½æ˜¯åˆ†ä½ˆå¼çš„äº’ç›¸è§£å¶ï¼Œé€šéé€šè¨Šå”å®š(RESTã€SOAP)ä¾†é€šè¨Šã€‚  \n    \n     å¾®æœå‹™æ¶æ§‹åˆ†ç¨®ä¸‰ç¨®æ¨¡å¼   RESTful API æ¨¡å¼ï¼šæœå‹™é€šé API æä¾›ï¼Œé›²æœå‹™(Cloud Service)å°±å±¬æ–¼é€™ä¸€é¡å‹ã€‚  RESTful æ‡‰ç”¨æ¨¡å¼ï¼šæœå‹™é€šéå‚³çµ±ç¶²è·¯å”è­°æˆ–æ‡‰ç”¨å”è­°æä¾›ï¼ŒèƒŒå¾Œé€šå¸¸æ˜¯ä¸€å€‹å¤šåŠŸèƒ½çš„æ‡‰ç”¨ç¨‹å¼ï¼Œå¸¸è¦‹æ–¼ä¼æ¥­å…§éƒ¨  é›†ä¸­æ¶ˆæ¯æ¨¡å¼ï¼šæ¡ç”¨è¨Šæ¯ä»£ç†(Message Broker)ï¼Œå¯ä»¥å¯¦ç¾æ¶ˆæ¯æŸ±åˆ—ã€è² è¼‰å‡è¡¡ã€çµ±ä¸€æ—¥èªŒå’Œç•°å¸¸è™•ç†ã€‚å»ºè­°å°‡ Message Broker åšæˆç¾¤é›†(Cluser)ï¼Œä¾†å¢åŠ ç©©å®šåº¦å’Œå¯é æ€§ã€‚  âœ… å„ªé»   æ“´å±•æ€§å¥½ï¼Œå„å€‹æœå‹™ä¹‹é–“ä½è€¦åˆ  æ˜“éƒ¨ç½²ï¼Œæ¯å€‹æœå‹™éƒ½æ˜¯å¯éƒ¨ç½²å–®å…ƒ  æ˜“é–‹ç™¼ï¼Œæ¯å€‹çµ„ä»¶éƒ½å¯ä»¥é€²è¡Œå–®ç¨é–‹ç™¼ï¼Œå–®ç¨éƒ¨ç½²ï¼Œä¸é–“æ–·åœ°å‡ç´š  æ˜“æ–¼å–®ç¨æ¸¬è©¦ï¼Œå¦‚æœä¿®æ”¹æŒ‡æ¶‰åŠå–®ä¸€æœå‹™ï¼Œåªéœ€è¦æ¸¬è©¦è©²æœå‹™å³å¯  âŒ ç¼ºé»   ç”±æ–¼å¼·èª¿äº’ç›¸ç¨ç«‹å’Œä½è€¦åˆï¼Œæœå‹™å¯èƒ½è¢«æ‹†åˆ†å¾ˆç´°ã€‚å°è‡´ç³»çµ±ä¾è³´å¤§é‡çš„æœå‹™ï¼Œè®Šçš„å‡Œäº‚å’Œç¬¨é‡ï¼Œç¶²è·¯é€šè¨Šæ¶ˆè€—ä¹Ÿæœƒè®Šå¾ˆå¤§  ä¸€æ¬¡å¤–éƒ¨è«‹æ±‚(Request)æœƒæ¶‰åŠåˆ°å¤šå€‹å…§éƒ¨æœå‹™ä¹‹é–“çš„é€šè¨Šï¼Œä½¿å¾—å•é¡Œçš„é™¤éŒ¯èˆ‡è¨ºæ–·æ¯”è¼ƒå›°é›£ï¼Œéœ€è¦æ›´å¼·å¤§çš„å·¥å…·æ”¯æŒã€‚  ç‚ºåŸå­æ€§ (Atomicity)æ“ä½œå¸¶ä¾†å›°é›£ï¼Œä¾‹å¦‚ï¼šéœ€è¦äº‹å‹™äº¤æ˜“æ“ä½œçš„å ´æ™¯ã€‚   ACID ç‚ºè³‡æ–™åº«æ“ä½œå¯«å…¥æˆ–æ›´æ–°çš„éç¨‹  \nAï¼šåŸå­æ€§ (Atomicity)  \nCï¼šä¸€è‡´æ€§ (Consistency)  \nIï¼šäº‹å‹™éš”é›¢ (Isolation)  \nDï¼šæŒä¹…æ€§ (Durability)  æœƒé‡åˆ°å¸¸è¦‹çš„äº‹å‹™äº¤æ˜“å•é¡Œ ğŸ‘‰  åƒè€ƒ  è·¨æœå‹™çš„çµ„åˆæ¥­å‹™å ´æ™¯æ¯”è¼ƒé›£æ¸¬è©¦ï¼Œéœ€è¦åŒæ™‚éƒ¨ç½²å’Œå•Ÿå‹•å¤šå€‹å¾®æœå‹™  å…¬å…±é¡åˆ¥åº«çš„å‡ç´šå’Œç®¡ç†æ¯”è¼ƒå›°é›£ã€‚åœ¨ä½¿ç”¨ä¸€äº›å…¬å…±çš„å·¥å…·æ€§è³ªçš„é¡åˆ¥åº«æ™‚ï¼Œéœ€è¦åœ¨å»ºç½®æ¯å€‹å¾®æœå‹™æ™‚ï¼Œéƒ½å°‡å…¶æ‰“åŒ…åˆ°éƒ¨ç½²åŒ…ä¸­ã€‚  æ­£æ˜¯é€™äº›ç¼ºé»ï¼Œå› æ­¤ä½¿ç”¨å¾®æœå‹™æ¶æ§‹æ¨¡å¼ä¸‹ï¼Œéœ€è¦ç¢ºä¿æ¯ä¸€å€‹æœå‹™èƒ½å¤ ç¨ç«‹éƒ¨ç½²ä¹‹å¤–ï¼Œé‚„è¦ç¢ºä¿æœå‹™å‡ç´šä¹‹å¾Œä¸æœƒå½±éŸ¿åˆ°ä¸‹æ¸¸æœå‹™ã€‚  5.2.3 å·¨çŸ³æ‡‰ç”¨  å·¨çŸ³æ‡‰ç”¨(monolithic application)ï¼Œä¹Ÿç¨±ç‚ºå·¨çŸ³æ¶æ§‹ï¼Œåªå–®ä¸€çµæ§‹çµ„æˆçš„è»Ÿé«”æ‡‰ç”¨ï¼Œä¹Ÿæœ‰å¦ä¸€å€‹ç¨±å‘¼ç‚ºå–®é«”å¼æ‡‰ç”¨ã€‚å…¶ç”¨æˆ¶çš„ä»‹é¢å’Œè³‡æ–™å­˜å–ç¨‹å¼ç¢¼éƒ½ç¶å®šåœ¨åŒä¸€å€‹èªè¨€å¹³å°çš„åŒä¸€å€‹æ‡‰ç”¨ç¨‹å¼ä¸Šã€‚   å·¨çŸ³æ¶æ§‹é€šå¸¸æ˜¯ä¸€å€‹å®Œæ•´çš„åŒ…ï¼Œä¾‹å¦‚: ä¸€å€‹ Jarã€Exe æˆ–ä¸€å€‹å®Œæ•´çš„ç›®éŒ„çµæ§‹ï¼Œåªè¦æœ‰é€™å€‹åŒ…ï¼Œå‰‡æ‰€æœ‰åŠŸèƒ½çš†æœ‰äº†ã€‚  \n     \n  âœ… å„ªé»   åˆ©æ–¼é–‹ç™¼å’Œé™¤éŒ¯ï¼šç•¶å‰æ‰€æœ‰å·¥å…·å’Œ IDE éƒ½å¾ˆå¥½åœ°æ”¯æ´å·¨çŸ³æ‡‰ç”¨ç¨‹å¼é–‹ç™¼ã€‚ç³»çµ±æ¶æ§‹ç°¡å–®ï¼ŒDebug æ–¹ä¾¿ã€‚  éƒ¨ç½²æ“ä½œæœ¬èº«æ¯”è¼ƒç°¡å–®ï¼šä¾‹å¦‚ï¼Œåªéœ€è¦é‹è¡Œéƒ¨ç½²æ™‚å…§çš„ WAR æˆ– Exe æª”æ¡ˆç­‰ç­‰ã€‚  å¾ˆå®¹æ˜“æ“´å±•ï¼šåªè¦åœ¨è² è¼‰å‡è¡¡å™¨(nginxã€IIS)å¾Œé¢æ”¾ç½®å¤šå€‹æ‡‰ç”¨çš„å‰¯æœ¬ï¼Œå°±å¯ä»¥æ“´å±•æ‡‰ç”¨ç¨‹å¼ã€‚  âŒ ç¼ºé»   å°æ•´é«”æ‡‰ç”¨ç¨‹å¼ä¸å¤ªç†Ÿæ‚‰çš„äººä¾†èªªï¼Œå®¹æ˜“ç”¢ç”Ÿæ··æ·†çš„ç¨‹å¼ç¢¼ï¼Œæ±™æŸ“æ•´å€‹æ‡‰ç”¨ï¼Œçµ¦è€èˆŠç¨‹å¼ç¢¼çš„å­¸ç¿’å’Œç†è§£å¸¶ä¾†å›°é›£ã€‚  å¾ˆé›£èˆ‡æ–°æŠ€è¡“å…±å­˜ã€‚  åªèƒ½å°‡æ•´å€‹æ‡‰ç”¨ä½œç‚ºä¸€å€‹æ•´é«”é€²è¡Œæ“´å±•ã€‚  æŒçºŒéƒ¨ç½²éå¸¸å›°é›£ï¼Œæ›´æ–°ä¸€å€‹çµ„ä»¶ï¼Œå¿…é ˆé‡æ–°éƒ¨ç½²æ•´å€‹æ‡‰ç”¨ç¨‹å¼ã€‚  å¾®æœå‹™å ´æ™¯ç›¸é—œ  (a) åœ–æœ‰å…©å€‹åç‚º A æœå‹™ï¼Œåˆ†åˆ¥ç‚ºæ–°å’ŒèˆŠç‰ˆæœ¬ï¼Œé€™æ¨£çš„æ–¹å¼æœƒè®“ä¸»æ§æœå‹™ï¼Œç„¡æ³•èªè­˜åˆ°åº•è©²ä½¿ç”¨å“ªä¸€å€‹æœå‹™é€²è¡Œé‹ä½œã€‚  (b) åœ–æœ‰å…©å€‹å¯¦é«”çš„æ¸¬è©¦ç’°å¢ƒï¼ŒA æ¸¬è©¦ç’°å¢ƒç”¨ä¾†æ¸¬è©¦æ–°çš„ A æœå‹™ï¼ŒB æ¸¬è©¦ç’°å¢ƒç”¨ä¾†æ¸¬è©¦èˆŠçš„ B æœå‹™ã€‚é€™æ¨£çš„æ¸¬è©¦æ–¹å¼ï¼Œç•¶å¦‚æœå¤šäººéƒ½éœ€è¦æ¸¬è©¦æœå‹™æ™‚ï¼Œæœƒéœ€è¦å¤§é‡çš„æ¸¬è©¦ç’°å¢ƒæ‰èƒ½å¤ é€²è¡Œæ¸¬è©¦ã€‚   ä¸‹æ–¹æ˜¯æ²’æœ‰è€ƒæ…®é™¤éŒ¯ç’°å¢ƒçš„å¾®æœå‹™æ¡†æ¶\n   \nğŸ’¡ è§£æ±ºä¸Šè¿°å•é¡Œçš„æ–¹å¼ï¼Œå¯ä»¥é€éè·¯ç”±çš„æ©Ÿåˆ¶ï¼Œè®“é–‹ç™¼äººå“¡å¯ä»¥å–®ç¨éƒ¨ç½²å’Œä¿®æ”¹è‡ªå·±çš„å¾®æœå‹™ä¾†é€²è¡Œæ¸¬è©¦ã€‚\n   ä¸‹æ–¹æ˜¯é€šéè·¯ç”±æ©Ÿåˆ¶å»ºç«‹å…±äº«çš„å¾®æœå‹™æ¸¬è©¦ç’°å¢ƒ\n   5.3 æ¶æ§‹æ”¹é€ å¯¦æ–½æ¨¡å¼  å°éƒ¨ç½²é »ç‡è¼ƒä½çš„è€èˆŠç³»çµ±ä¾†èªªï¼Œå¾ˆå°‘æœƒä»”ç´°è€ƒæ…®åˆ°æ˜“æ¸¬è©¦ã€æ˜“éƒ¨ç½²å’Œæ˜“æ“´å±•é€™ä¸‰å€‹å› ç´ ã€‚å› æ­¤æˆ‘å€‘ç¸½æœƒé‡åˆ°æ¶æ§‹æ”¹é€ çš„éœ€æ±‚ã€‚é€šå¸¸æ”¹é€ æœ‰ä¸‰ç¨®æ¨¡å¼ï¼š   æ‹†é·è€…æ¨¡å¼  çµæ®ºè€…æ¨¡å¼  ä¿®ç¹•è€…æ¨¡å¼  5.3.1 æ‹†é·è€…æ¨¡å¼  æ‹†é·è€…æ¨¡å¼å°±æ˜¯æ ¹æ“šç•¶å‰çš„æ¥­å‹™éœ€æ±‚ï¼Œå°è»Ÿé«”æ¶æ§‹é‡æ–°è¨­è¨ˆï¼Œä¸¦çµ„ç¹”å–®ç¨çš„åœ˜éšŠï¼Œé‡æ–°ç™¼ä½ˆä¸€å€‹å…¨æ–°çš„ç‰ˆæœ¬ï¼Œä¸€æ¬¡æ€§çš„æ›¿ä»£åŸæœ‰çš„è€èˆŠç³»çµ±ã€‚    âœ… å„ªé»   èˆ‡èˆŠç‰ˆæœ¬å®Œå…¨æ²’æœ‰ç“œè‘›ï¼Œæ²’æœ‰æ­·å²åŒ…è¢±  âŒ ç¼ºé»   æ¥­å‹™éœ€æ±‚éºæ¼ã€‚åœ¨è»Ÿé«”çš„æ­·å²ç‰ˆæœ¬ä¸­ï¼Œæœ‰å¾ˆå¤šä¸ç‚ºäººç†ŸçŸ¥çš„åŠŸèƒ½é‚„åœ¨ä½¿ç”¨ã€‚  å¸‚å ´ç’°å¢ƒè®ŠåŒ–ã€‚ç”±æ–¼æ–°ç‰ˆæœ¬æ¶æ§‹èŠ±è²»æ™‚é–“è¼ƒé•·ï¼Œç„¡æ³•é¦¬ä¸Šä¿®æ”¹å®Œæˆï¼Œå› æ­¤ç•¶å¸‚å ´ç™¼ç”Ÿè®ŠåŒ–æ™‚ï¼Œå°±æœƒéŒ¯å¤±å¸‚å ´æ©Ÿæœƒã€‚  äººåŠ›è³‡æºæ¶ˆè€—å¤§ã€‚å¿…é ˆåˆ†å‡ºäººåŠ›ï¼Œä¸€é‚Šç¶­è­·èˆŠç‰ˆæœ¬çš„åŠŸèƒ½æˆ–ç·Šæ€¥éœ€æ±‚ï¼Œä¸€é‚Šè¦å®‰æ’å……åˆ†äººåŠ›é€²è¡Œæ”¹é€ ã€‚  é–‰é–€é€ è»Šã€‚æ–°ç‰ˆæœ¬ä¸Šç·šå¾Œï¼Œç„¡æ³•æ»¿è¶³æ¥­å‹™éœ€æ±‚ã€‚  ä¸‹é¢èˆ‰å¯¦éš›æ¡ˆä¾‹  âœ… æˆåŠŸæ¡ˆä¾‹  HP æƒ æ™®å°è¡¨æ©Ÿçš„éŸŒé«”æ¶æ§‹æ”¹é€ å°±æ˜¯ä¸€å€‹æˆåŠŸçš„æ¡ˆä¾‹ã€‚åœ¨ 2008 å¹´çš„æ™‚å€™ï¼ŒHP æƒ æ™®åœ˜éšŠå·²ç¶“ç­‹ç–²åŠ›ç›¡ï¼Œæ•´å€‹åœ˜éšŠåªæœ‰ 5%åœ¨é–‹ç™¼æ–°ç‰¹æ€§ï¼Œå…¶é¤˜äººæ•¸çš†åœ¨é€²è¡Œç¶­è­·ã€‚ç¶“éä¸‰å¹´çš„åŠªåŠ›ï¼ŒHP æƒ æ™®åœ˜éšŠå°‡æ•´å€‹éŸŒé«”æ¶æ§‹æ”¹ç‚º  å¾®æ ¸æ¶æ§‹æ¨¡å¼ ï¼Œåœ¨æ¯å°å°è¡¨æ©Ÿä¸Šéƒ½æœ‰ä¸€å€‹æœ€å°çš„éŸŒé«”åˆå§‹åŒ–ç‰ˆæœ¬ã€‚ç•¶å°è¡¨æ©Ÿé€£ä¸Šç¶²å¾Œï¼Œå°±æœƒæ ¹æ“šéŸŒé«”çš„ç‰ˆæœ¬ï¼Œå¾ç¶²è·¯ä¸Šä¸‹è¼‰æœ€æ–°çš„åŠŸèƒ½æ¨¡çµ„ï¼Œä¸¦è‡ªå‹•å®‰è£ã€‚  âŒ å¤±æ•—æ¡ˆä¾‹  ç¶²æ™¯é€šè¨Šå…¬å¸ï¼Œä¸»è¦æ˜¯åœ¨åšç€è¦½å™¨ä»¥ Netscape Navigator è€Œèåã€‚ç”±æ–¼å…¶è€èˆŠçš„è»Ÿé«”æ¶æ§‹ï¼Œè®“ä½¿ç”¨è€…é«”é©—è¶Šä¾†è¶Šå·®ï¼Œå·²ç¶“å¾ˆé›£å°æŠ—ä¸»æµçš„ç€è¦½å™¨ç™¼å±•ï¼Œæ–¼æ˜¯å…¬å¸é«˜å±¤æ±ºå®šä½¿ç”¨  æ‹†é·è€…æ¨¡å¼ å°è»Ÿé«”é€²è¡Œæ”¹é€ ã€‚åœ¨æ”¹é€ æœŸé–“ï¼Œå¾®è»Ÿæ†‘è—‰è‘— IE ç€è¦½å™¨å’Œ Windows çš„æˆåŠŸï¼Œç›´æ¥èºå‡ç‚ºç€è¦½å™¨å¸‚å ´ç¬¬ä¸€åï¼Œè€Œç¶²æ™¯é€šè¨Šå…¬å¸å¾Œä¾†å‰‡ä¸€è¹¶ä¸æŒ¯ã€‚   ç¶²æ™¯é€šè¨Šå…¬å¸ï¼šç¶²æ™¯é€šè¨Šï¼ŒèˆŠç¨±ç¶²æ™¯é€šè¨Šå…¬å¸ï¼Œé€šå¸¸ç°¡ç¨±ç‚ºç¶²æ™¯ï¼Œæ˜¯ä¸€å®¶å·²å€’é–‰çš„ç¾åœ‹é›»è…¦æœå‹™å…¬å¸ï¼Œä»¥å…¶é–‹ç™¼çš„åŒåç¶²é ç€è¦½å™¨è€Œèåã€‚ç•¶é‚„æ˜¯ä¸€å®¶ç¨ç«‹å…¬å¸æ™‚ï¼Œå…¶ç¸½éƒ¨è¨­åœ¨åŠ åˆ©ç¦å°¼äºå·çš„å±±æ™¯åŸã€‚  5.3.2 çµæ®ºè€…æ¨¡å¼  çµæ®ºè€…æ¨¡å¼æ˜¯åªä¿ç•™åŸä¾†çš„è€èˆŠç³»çµ±ä¸è®Šï¼Œç•¶éœ€è¦é–‹ç™¼æ–°çš„åŠŸèƒ½æ™‚ï¼Œé‡æ–°é–‹ç™¼ä¸€å€‹æœå‹™ï¼Œä¾†å¯¦ç¾æ–°çš„åŠŸèƒ½ã€‚é€šéä¸æ–·çš„å»ºç½®æ–°çš„æœå‹™ï¼Œé€æ­¥è®“è€èˆŠçš„ç³»çµ±å¤±æ•ˆï¼Œæœ€çµ‚å–ä»£å®ƒã€‚     âœ… å„ªé»   ä¸æœƒéºæ¼åŸæœ‰éœ€æ±‚  å¯ä»¥ç©©å®šåœ°æä¾›åƒ¹å€¼ï¼Œé »ç¹åœ°äº¤ä»˜ç‰ˆæœ¬ï¼Œå¯ä»¥æ›´å¥½çš„ç›£æ§å…¶æ”¹é€ ç™¼å±•  é¿å…  é–‰é–€é€ è»Š çš„å•é¡Œ  âŒ ç¼ºé»   æ¶æ§‹æ”¹é€ çš„æ™‚é–“æœƒå¤§å¹…åœ°è®Šé•·  ç”¢ç”Ÿä¸€å®šçš„è·Œä»£æˆæœ¬  5.3.3 ä¿®ç¹•è€…æ¨¡å¼  ä¿®ç¹•è€…æ¨¡å¼æ˜¯æŒ‡å°‡è€èˆŠç³»çµ±çš„éƒ¨åˆ†åŠŸèƒ½èˆ‡å…¶é¤˜éƒ¨åˆ†éš”é›¢ï¼Œä»¥æ–°çš„æ¶æ§‹é€²è¡Œå–®ç¨æ”¹å–„ã€‚åœ¨æ”¹å–„çš„åŒæ™‚ï¼Œéœ€è¦ä¿è­‰èˆ‡å…¶ä»–éƒ¨åˆ†èƒ½å”åŒå·¥ä½œã€‚    âœ… å„ªé»   ç³»çµ±å¤–éƒ¨ç„¡æ„ŸçŸ¥  ä¸æœƒéºæ¼åŸæœ‰éœ€æ±‚  å¯ä»¥éš¨æ™‚åœä¸‹æ”¹é€ å·¥ä½œï¼ŒéŸ¿æ‡‰é«˜å„ªå…ˆæ¬Šçš„æ¥­å‹™éœ€æ±‚  é¿å…  é–‰é–€é€ è»Š çš„å•é¡Œ  âŒ ç¼ºé»   æ¶æ§‹æ”¹é€ çš„æ™‚é–“æœƒå¤§å¹…åœ°è®Šé•·  æœƒæœ‰æ›´å¤šé¡å¤–çš„æ¶æ§‹æ”¹é€ æˆæœ¬  å·¨çŸ³æ‡‰ç”¨è½‰è®Šç‚ºå¾®æœå‹™çš„æ”¹é€ \n   5.3.4 è³‡æ–™åº«çš„æ‹†åˆ†æ–¹æ³•  é—œè¯å¼è³‡æ–™åº«å¾ˆå¯èƒ½æ˜¯å·¨çŸ³æ‡‰ç”¨ä¸­æœ€å¤§çš„è€¦åˆé»ã€‚å°æ–¼æœ‰ç‹€æ…‹çš„æœå‹™æ”¹é€ ï¼Œæˆ‘å€‘éœ€è¦éå¸¸å°å¿ƒåœ°è™•ç†è³‡æ–™åº«è³‡æ–™ã€‚åšè³‡æ–™åº«æ‹†åˆ†æ™‚ï¼Œæ‡‰è©²éµå¾ªä»¥ä¸‹æ­¥é©Ÿï¼š   è©³ç´°ç­è§£è³‡æ–™åº«çµæ§‹ï¼ŒåŒ…æ‹¬å¤–ä¾†éµã€å…±äº«çš„å¯è®Šè³‡æ–™ä»¥åŠäº‹å‹™æ€§çš„é‚Šç•Œç­‰ç­‰ã€‚å¦‚(a)åœ–  å…ˆæ‹†åˆ†è³‡æ–™åº«ï¼Œå¯ä»¥åƒè€ƒ 12.3.2 ç¯€ä¸­ä»‹ç´¹çš„è³‡æ–™åº«é·ç§»ã€‚å¦‚ (b)åœ–  ç•¶å¯«å…¥å…©é‚Šçš„è³‡æ–™åº«éƒ½ç„¡èª¤æ™‚ï¼Œæ‰¾åˆ°ç¨‹å¼æ¶æ§‹ä¸­çš„ç´°ç¸«ï¼Œå¦‚ (c)åœ–  å°‡æ‹†åˆ†çš„ç¨‹å¼æ¨¡çµ„å’Œè³‡æ–™åº«çµ„åˆåœ¨ä¸€èµ·ï¼Œå½¢æˆå¾®æœå‹™ã€‚å¦‚ (d)åœ–    ğŸ’¡ æ‡‰è©²åœç¹æ¥­å‹™ç›®æ¨™é€²è¡Œæ¶æ§‹æ”¹é€   \nå°å·¨çŸ³æ‡‰ç”¨é€²è¡Œæ‹†åˆ†æ™‚ï¼Œå¯ä»¥å…ˆæ‹†åˆ†é¡†ç²’åº¦ç›¸å°è¼ƒå¤§çš„æœå‹™ã€‚ç•¶æ‹†åˆ†å®Œæˆå¾Œï¼Œå¦‚æœé”åˆ°æ‹†åˆ†çš„ç›®æ¨™ï¼Œé‚£éº¼å°±å¯ä»¥åœä¸‹ä¾†ï¼Œä¸æ‡‰è©²ç‚ºäº†æ¶æ§‹è€Œæ¶æ§‹ï¼Œç‚ºäº†æŠ€è¡“è€ŒæŠ€è¡“ã€‚ç•¶æ‹†æˆå¾®æœå‹™æ¶æ§‹æ™‚ï¼Œä½ å¿…é ˆè€ƒæ…®è¦å»ºç«‹ç›¸æ‡‰çš„åŸºç¤è¨­æ–½ï¼Œä¾‹å¦‚ï¼šæœå‹™ç®¡ç†ã€æœå‹™ç›£æ§ã€è‡ªå‹•åŒ–æ¸¬è©¦èˆ‡è‡ªå‹•åŒ–éƒ¨ç½²ã€‚  5.4 å°çµ  æœ¬ç« ç¯€ä¸»è¦è¨è«–â€  æŒçºŒäº¤ä»˜ 2.0 èƒ½åŠ› â€å°è»Ÿé«”ç³»çµ±æ¶æ§‹çš„è¦æ±‚ï¼Œåœ¨è»Ÿé«”é–‹ç™¼æ™‚å°±è€ƒæ…®äº†ä¸‹åˆ—é …ç›® ğŸ‘‡ï¼Œä¸¦ä¸” ï¿½ï¿½ è«–ç³»çµ±æ¶æ§‹çš„æ‹†åˆ†åŸå‰‡   å¯æ¸¬è©¦æ€§  æ˜“éƒ¨ç½²æ€§  æ˜“ç›£æ§æ€§  æ˜“æ“´å±•æ€§  å¯èƒ½çš„å¤±æ•—è™•ç†  å¸¸è¦‹çš„ä¸‰ç¨®è»Ÿé«”æ¶æ§‹æ¨¡å¼åœ¨ä¸åŒå ´æ™¯çš„åˆ†æå’Œæ¯”è¼ƒï¼š   å¾®æ ¸æ¶æ§‹æ¨¡å¼ï¼Œé€šå¸¸æ˜¯æ‡‰æ–¼ Client ç«¯è»Ÿé«”  å¾®æœå‹™æ¶æ§‹ï¼Œé€šå¸¸é©ç”¨æ–¼å¤§å‹å¾Œå° Server ç«¯ç³»çµ±  å·¨çŸ³æ‡‰ç”¨æ¶æ§‹ï¼Œé€šå¸¸é©ç”¨æ–¼å‰µæ¥­å…¬å¸æˆ–ä¸­å°å‹å°ˆæ¡ˆ  è¨è«–äº†ä¸‰ç¨®ç³»çµ±æ¶æ§‹æ”¹é€ çš„æ–¹å¼   æ‹†é·è€…æ¨¡å¼ï¼Œä¸€æ¬¡æ€§çš„é‡å¯«æ‰€æœ‰ç¨‹å¼ç¢¼ã€‚  çµæ®ºè€…æ¨¡å¼ï¼Œå°±æ˜¯ä¸æ”¹è®Šæˆ–å°‘æ”¹è®ŠåŸæœ‰è€èˆŠç³»çµ±ï¼Œé€šéå¢åŠ çš„æ–°æœå‹™ä¾†ä¸æ–·æ›¿ä»£è€èˆŠçš„åŠŸèƒ½ã€‚  ä¿®ç¹•è€…æ¨¡å¼ï¼Œå°±æ˜¯é€šéè·Œä»£çš„æ–¹å¼ï¼Œå°‡åŸæœ¬è€èˆŠç³»çµ±é€æ­¥é€²è¡Œæ”¹é€ ï¼ŒåŒæ™‚é–‹ç™¼æ–°çš„åŠŸèƒ½ã€‚  ä¹Ÿä»‹ç´¹äº†è§£æ±ºçµæ®ºè€…æ¨¡å¼å’Œä¿®ç¹•è€…æ¨¡å¼ä¸­ï¼Œå¯èƒ½æœƒé‡åˆ°è³‡æ–™åº«ä¸­çš„è³‡æ–™è¡¨å’Œè³‡æ–™çš„æ‹†åˆ†ä»¥åŠæ‹†é·å•é¡Œã€‚   ç‚ºäº†æŒçºŒäº¤ä»˜ï¼Œä¸¦ä¸”é™ä½æ¶æ§‹æ”¹é€ çš„é¢¨éšªï¼Œåœ˜éšŠéœ€è¦æ ¹æ“šæƒ…æ³ï¼Œä¾†æ¡ç”¨çµæ®ºè€…æ¨¡å¼æˆ–ä¿®ç¹•è€…æ¨¡å¼å°éºç•™ç³»çµ±çš„æ¶æ§‹é€²è¡Œæ”¹é€ ã€‚"},{"id":"content:4.cicd-2.0:7.chapter7.md","path":"/cicd-2.0/chapter7","dir":"cicd-2.0","title":"07 éƒ¨ç½²æµæ°´ç·šåŸå‰‡èˆ‡å·¥å…·è¨­è¨ˆ","description":"","keywords":["å‰è¨€","7.1 ç°¡å–®çš„éƒ¨ç½²æµæ°´ç·š","7.2 Pipeline çš„è¨­è¨ˆèˆ‡ä½¿ç”¨","7.3 Pipeline å¹³å°çš„çµ„æˆ","7.4 åŸºç¤æ”¯æ’æœå‹™é›²ç«¯åŒ–","7.5 ä¼æ¥­æˆå“åº«çš„ç®¡ç†","7.6 å¤šç¨®å¤šæ¨£çš„éƒ¨ç½²æµæ°´ç·š","7.7 ç‚ºé–‹ç™¼è€…å»ºç½®è‡ªåŠ©å¼å·¥å…·"],"body":"  å‰è¨€  Deployment Pipeline ç‚º CI çš„æ ¸å¿ƒï¼Œèƒ½å®Œæ•´å‘ˆç¾è»Ÿé«”äº¤ä»˜çš„æ•´å€‹éç¨‹ã€‚å¾ç¨‹å¼ç¢¼å®Œæˆå¾Œçš„æäº¤ã€å»ºç½®ã€éƒ¨ç½²èˆ‡æ¸¬è©¦åˆ°æ­£å¼çš„ç™¼å¸ƒï¼Œé™¤äº†å¯ä»¥æ¸…æ¥šçŸ¥é“æ•´å€‹æ­·ç¨‹å¤–ï¼Œä¹Ÿå¯å³æ™‚å¾—çŸ¥æäº¤é€²åº¦ã€‚  é‚£æˆ‘å€‘è©²å¦‚ä½•æ ¹æ“šåœ˜éšŠèˆ‡ä¸åŒç”¢å“å»è¨­è¨ˆæ•´å€‹ Pipeline?æ­¤ç« çš„é‡é»å°±åœ¨è«‡é€™ä»¶äº‹æƒ…ã€‚  \néƒ¨ç½²Pipelineå—åˆ°è»Ÿé«”æ¶æ§‹ã€Git FlowåŠåœ˜éšŠèˆ‡ç”¢å“ä¸åŒè€Œæœ‰æ‰€ä¸åŒè¨­è¨ˆæ¦‚å¿µã€‚\n  7.1 ç°¡å–®çš„éƒ¨ç½²æµæ°´ç·š  æ­¤ç¯€ä»¥å¯¦éš›ä¾‹å­ä¾†ç°¡æ˜“ OverView åœ¨ Pipeline è¨­è¨ˆä¸Šæœƒæœ‰é‚£äº›ç’°ç¯€èˆ‡å¯¦éš›æƒ…å¢ƒã€‚æ›¸ä¸­ä¾‹å­ä»¥  Curise ç‚ºç¯„ä¾‹ï¼Œä»–å°±åƒä»Šæ—¥æˆ‘å€‘å¾ˆå¸¸è½åˆ° Jenkisï¼Œæ˜¯ä¸€å€‹ä»¥ Java Base é–‹ç™¼çš„æŒçºŒæ•´åˆå·¥å…·ã€‚å…¶ç¨‹å¼ç¢¼é«˜é” 5 è¬è¡Œï¼Œè€Œè‡ªå‹•åŒ–å–®å…ƒæ¸¬è©¦åŠæ•´åˆæ¸¬è©¦ Case å°±å¤šé” 2350 å€‹ï¼Œç«¯å°ç«¯æ¸¬è©¦ç‚º 140 å€‹ï¼Œåœ¨æ¶æ§‹ä¹Ÿç®—è »é¾å¤§çš„è»Ÿé«”ç³»çµ±ã€‚  ä½†ä»–åœ¨ 2010 å¹´å°±åœæ­¢ç¶­è­·äº†ï¼Œæœ‰èˆˆè¶£äº†è§£å¯ä»¥åˆ°ä»–çš„  å®˜æ–¹ç¶²ç«™ ã€‚Curise åœ¨ 2010 å¹´åœæ­¢ç¶­è­·å¾Œæ›´åç‚º GoCDï¼Œä¸¦èµ° Open Source é–‹ç™¼ã€‚ä¸¦å°‡ Source Code æ”¾ç½®  Github ã€‚  7.1.1 GoCD ç°¡å–®çš„ç”¢å“ç ”ç™¼æµç¨‹  GoCD ç®—å…¸å‹çš„æŒçºŒæ•´åˆä»£ç†ä¼ºæœå™¨æ¶æ§‹ï¼Œå…¶æ¶æ§‹å¦‚ä¸‹ï¼ŒGoCD Server æä¾›ä½¿ç”¨è€… UI åŠ Pipeline è…³æœ¬æ§åˆ¶åŠæŒ‡æ´¾å·¥ä½œï¼Œè®“ Agent å»åŸ·è¡Œ Pipeline éç¨‹ä¸­éœ€è¦åŸ·è¡Œçš„ Command(æ­¤è™•ç°¡å–®å¸¶é)ã€‚å¦å¤–ä¸€æï¼Œä»–ä½¿ç”¨çš„ç‰ˆæ§å·¥å…·ç‚º Mercurial ä¸æ˜¯ä¸€èˆ¬ä¸»æµçš„ Gitã€‚    ç¶­è­·æ­¤ç”¢å“çš„åœ˜éšŠäººæ•¸ç´„ç‚º 12 äººï¼Œç”¢å“çš„äº¤ä»˜å…¶ä¸­èˆ‡è¿­å¸¶é€±æœŸç‚ºä¸€å‘¨ã€‚åœ¨é€™éº¼å¿«é€Ÿçš„è¿­å¸¶é€±æœŸï¼Œåœ˜éšŠä¹Ÿä½¿ç”¨ CICDï¼Œåœ¨æ¯å€‹è¿­å¸¶çµæŸå¾Œï¼Œç”¨æ–°ç‰ˆæœ¬æ›¿æ›æ‰ç›®å‰åœ˜éšŠåœ¨ä½¿ç”¨çš„èˆŠç‰ˆæœ¬ï¼Œä¸¦åœ¨æ¯å…©å€‹è¿­å¸¶å¾Œå°‡è©¦ç”¨ç‰ˆæœ¬éƒ¨ç½²åˆ°å…¬å¸å…§éƒ¨çš„å…¬ç”¨ä¼ºæœå™¨ï¼Œè‹¥å…¬å¸å…§éƒ¨è©¦ç”¨ç‰ˆæœ¬ä½¿ç”¨åˆ°ä¸€å€‹å“è³ªæª¢æ¸¬æ¨™æº–ï¼Œä¸€å‘¨å¾Œå†å°‡ç‰ˆæœ¬äº¤çµ¦ä¼æ¥­è©¦ç”¨ã€‚å…¶é€±æœŸå¦‚ä¸‹åœ–æ‰€ç¤ºï¼Œ   ç™½æ­£æ–¹å½¢:å–®å‘¨ Blood ç‰ˆæœ¬(åœ˜éšŠ)  ç°æ­£æ–¹å½¢:é›™å‘¨ Alpha ç‰ˆæœ¬(å…¬å¸)  ç™½åœˆ:é›™å‘¨ Beta ç‰ˆæœ¬(å¤–éƒ¨ä¼æ¥­)  å¤§åœ“åœˆ:å…¨çƒç™¼å¸ƒ  \n     \n  7.1.2 åˆå§‹ Pipeline è¨­è¨ˆ  GoCD çš„ Pipeline è¨­è¨ˆæ˜¯ Base on å…­æ­¥æäº¤æ³•ç†è«–ï¼Œå…­æ­¥å¦‚ä¸‹   ç¬¬ä¸€æ­¥: Clone æˆåŠŸç‰ˆæœ¬è‡³æœ¬åœ°ç«¯  ç¬¬äºŒæ­¥: ä¿®æ”¹ç¨‹å¼ç¢¼  ç¬¬ä¸‰æ­¥: æœ¬åœ°ç«¯ Build && Test  ç¬¬å››æ­¥: Pull Merge å…¶ä»–äººç¨‹å¼ç¢¼å†è·‘ä¸€æ¬¡ Build && Test  ç¬¬äº”æ­¥: æäº¤  ç¬¬å…­æ­¥: é€² Pipeline  \n     \n  æ„Ÿè¦ºå…­éƒ¨æäº¤æ³•æ˜¯é‡å°æ–°çš„å°ç¢¼è¾²åˆ¶å®šçš„å£è¨£ï¼Œé¿å…å°ç¢¼è¾² Clone éŒ¯èª¤çš„ç¨‹å¼ç¢¼æˆ–æ˜¯æ²’æœ‰åšå¥½ Build Test å°±æäº¤ç¨‹å¼ç¢¼ï¼Œæœƒ Focus åœ¨å€‹äººå»ºç½®éƒ¨åˆ†ã€‚  æˆ‘å€‘ä¾†çœ‹ GoCD çš„ Pipeline è¨­è¨ˆå¦‚ä¸‹åœ–ï¼Œæ•´å€‹æäº¤æ•´åˆèˆ‡éƒ¨ç½²åˆ†ç‚ºå…«å€‹ Stage ç«™åˆ¥ï¼Œæœ‰æ‰‹å‡ºç¾çš„ Icon ä»£è¡¨äººç‚ºå»ä»‹å…¥  \n     \n  åŸºæœ¬ä¸Šæ¯å€‹ç«™åˆ¥éƒ½åªæœ‰ä¸€é¡ä»»å‹™é¡å‹ï¼Œ   1.æäº¤å»ºç½®:Build èˆ‡ å–®å…ƒé›†æˆæ¸¬è©¦  2.æ¬¡ç´šå»ºç½®:End To End æ¸¬è©¦(Windows && Linux)  3.å°‡æ‰“åŒ…å¥½çš„æª”æ¡ˆéƒ¨ç½²åˆ° UAT ç’°å¢ƒ  4.æ¸¬è©¦äººå“¡é©—è­‰å®Œå¾Œ Tag é©—æ”¶é€šéï¼Œä¸¦å° Pipeline é»æ“Šç¹¼çºŒ  5.åšè‡ªå‹•åŒ–æ€§èƒ½æ¸¬è©¦(æ­¤è™•æ²’èªªæ˜åšä»€éº¼æ€§èƒ½æ¸¬è©¦)  6.å°‡ Alpha ç‰ˆæœ¬éƒ¨ç½²åˆ°å…¬å¸å…§éƒ¨ä¼ºæœå™¨çµ¦åœ˜éšŠè©¦ç”¨  7.è©¦ç”¨ OK å¾Œç™¼å¸ƒ Beta ç‰ˆæœ¬çµ¦å¤–éƒ¨ä¼æ¥­è©¦ç”¨  8.å¤–éƒ¨ä¼æ¥­è©¦ç”¨è©¦ç”¨å®Œæˆå¾Œæ­£å¼ç™¼å¸ƒ  \nUATï¼Œ(User Acceptance Test),ä½¿ç”¨è€…æ¥å—åº¦æ¸¬è©¦ å³é©—æ”¶æ¸¬è©¦ï¼Œä¸»è¦æ˜¯ç”¨ä¾†ä½œç‚ºå®¢æˆ¶é«”é©—çš„ç’°å¢ƒã€‚\n  åŸºæœ¬ä¸Šé€™ Pipeline è¨­è¨ˆå¤§éƒ¨åˆ†å°ˆæ¡ˆæƒ…å¢ƒå¯èƒ½éƒ½æœƒç¶“éé€™äº›æ­¥é©Ÿï¼Œåªæ˜¯ä¹Ÿè¨±å¾Œé¢éƒ¨ç½²èˆ‡æ¸¬è©¦é †åºä¸ä¸€å®šæœƒå®Œå…¨ç›¸åŒã€‚ä¾‹å¦‚æœ‰äº›ä¼æ¥­æœƒè¦ºå¾— UAT æ¸¬è©¦å®Œå¾Œå…¶å¯¦å°±å¯ä»¥ä¸Š Productionï¼Œä½† GoCD ç‚ºäº†åš´è¬¹åœ¨éƒ¨ç½²æ¸¬è©¦ä¸Šåˆå¤šäº†å¥½å¹¾å€‹ç«™åˆ¥ï¼Œç¢ºä¿ Product èƒ½å®Œå…¨é‹è¡Œé †åˆ©ã€‚  å¦å¤–å€¼å¾—ä¸€æçš„ï¼Œåœ¨é€™å€‹è¨­è¨ˆä¸­ï¼ŒGoCD åœ¨å–®å…ƒé›†æˆæ¸¬è©¦çš„æ™‚é–“éå¸¸é•·ï¼Œæœ‰äº”å€‹é›†æˆæ¸¬è©¦ï¼ŒåŸºæœ¬ä¸Šæ¯å€‹é›†æˆæ¸¬è©¦è¦èŠ± 15minï¼Œè€Œç¬¬äºŒç«™åˆ¥çš„æ¬¡ç´šå»ºç½®ç«¯å°ç«¯æ¸¬è©¦ä¹Ÿå¤šé” 140 å€‹æ¸¬è©¦é …ç›®ï¼Œéœ€è¦æœ€é•·æ™‚é–“ç‚º 30min....  7.1.3 Pipeline ç‹€æ…‹è§£æ  ç®¡ç·šé‹å‹å¯¦éš›ç‹€æ³å¦‚ä¸‹ï¼Œå¯çœ‹åˆ°åœ¨å»ºç½®ç·¨è™Ÿ 12 ç‰ˆæœ¬ï¼Œåœ¨ UAT éƒ¨ç½²å°±åœäº†ä¸‹ä¾†ã€‚ä¹Ÿè¨±é€™å»ºç½®ç‰ˆæœ¬ä¸¦æ²’æœ‰æ–°åŠŸèƒ½ï¼Œæ‰€ä»¥å¯ä»¥åœ¨é€™éšæ®µå°±åœæ­¢ã€‚è€Œå»ºç½®ç·¨è™Ÿ 13 åœ¨æ¬¡ç´šå»ºç½®è·³éï¼Œæœ‰å¯èƒ½å› ç‚º 12 é‚„æ²’å®Œæˆã€‚è‡³æ–¼æ­¤è™•æ˜¯æ‰‹å‹•æŒ‰åœæ­¢é‚„æ˜¯è‡ªå‹•åœæ­¢å°±ä¸å¤ªæ¸…æ¥šã€‚  ä¸éæ­¤ç¯€è¦è¡¨é”çš„æ˜¯ï¼Œå†å¤š Job ç®¡ç·šé‹è¡Œä¸Šï¼Œæœƒæ ¹æ“šä¸åŒç‹€æ³ç®¡ç·šéçš„ Stage ç‹€æ³ä¹Ÿæœƒä¸å¤ªä¸€æ¨£ã€‚  \n     \n  7.2 Pipeline çš„è¨­è¨ˆèˆ‡ä½¿ç”¨  åœ¨ä»‹ç´¹å®Œ GoCD Pipeline çš„å¯¦éš›ä½¿ç”¨ç‹€æ³ï¼Œå¤§é«”ä¸Šæ‡‰è©²æœƒæ›‰å¾—åŸºæœ¬ Pipeline æœƒæœ‰ä»€éº¼å·¥ä½œéœ€è¦é‹è¡Œã€‚é‚£æˆ‘å€‘è©²å¦‚ä½•é€éè¨­è¨ˆå»å„ªé›…çš„ä½¿ç”¨ Pipeline å‘¢?  7.2.1 Pipeline çš„è¨­è¨ˆåŸå‰‡  æ›¸ä¸­æåˆ°æœ‰ 5 å€‹è§€å¿µå»è¨­è¨ˆ Pipeline    ä¸€æ¬¡å»ºç½®ï¼Œå¤šæ¬¡ä½¿ç”¨ ã€‚Pipeline ä¸Šçš„ä»»å‹™è¦ç”¢ç”Ÿéƒ¨ç½²ä½¿ç”¨çš„æª”æ¡ˆï¼Œç›¡é‡åœ¨å‰é¢çš„ç«™åˆ¥å°±ä¸€æ¬¡å»ºç½®å®Œæˆï¼Œä¸¦å¯ç›´æ¥è®“å¾Œé¢çš„ç«™åˆ¥åšä½¿ç”¨ã€‚ç›¡é‡ä¸è¦åœ¨å¾Œé¢åœ¨åˆ¥å†åšé‡è¤‡æ€§å»ºç½®ã€‚å¦å¤–å¦‚æœå¾ŒçºŒçš„ç«™å±¬å¦‚æœè¦ä½¿ç”¨æ­¤ç·¨åˆ¶æª”æ¡ˆï¼Œä¹Ÿå¿…é ˆæ­¤éƒ¨ç½²æª”æ¡ˆä¾†æºæ˜¯èˆ‡ä¸Šæµç«™åˆ¥æ˜¯åŒä¸€ä»½ã€‚   èˆ‡æ¥­å‹™é‚è¼¯æ¾è€¦åˆ ã€‚ç°¡å–®ä¾†èªªåœ¨å°±æ˜¯ä¸è¦ç‚ºäº†æ–¹ä¾¿ï¼Œå°‡ä¸€äº›éƒ¨ç½²æ‰€éœ€ä½¿ç”¨çš„è…³æœ¬æˆ–è³‡æ–™æ”¾åœ¨ Pipeline Server ä¸Šï¼Œç›¡é‡èˆ‡ Pipeline Server ä¸è¦æœ‰ç·¨è­¯è€¦åˆçš„è¨­è¨ˆã€‚ç›¸åï¼Œè‹¥æœ‰ç›¸ä¾æª”æ¡ˆæˆ–è…³æœ¬ï¼Œæˆ‘å€‘å¿…é ˆå­˜æ”¾åœ¨å­˜å–åº«ä¸­ï¼Œç…§æ¨£å°±å¯ä»¥è¼•é¬†å°é€™äº›è…³æœ¬è¨­è¨ˆåšä¿®æ­£ã€‚ç°¡å–®ä¾†èªªï¼Œå°æ–¼ Pipelineï¼Œä»–å°±åƒæ˜¯èª¿åº¦ã€åŸ·è¡Œèˆ‡ç´€éŒ„è€…ï¼Œä»–åªéœ€è¦çŸ¥é“æ•´å€‹èª¿åº¦æµç¨‹ï¼Œä¸éœ€è¦çŸ¥é“å¦‚ä½•å»ºç½®èˆ‡éƒ¨ç½²è»Ÿä»¶éœ€è¦è‡ªå·±æä¾›å“ªäº›æ±è¥¿ã€‚   ä¸¦è¡ŒåŒ–åŸå‰‡ ã€‚å¦‚æœæœ‰äº”å€‹è‡ªå‹•åŒ–æ¸¬è©¦ä»»å‹™ï¼Œæˆ‘å€‘ä¹Ÿå¯ä»¥è¨­è¨ˆä¸¦è¡Œ Pipeline åŒæ­¥è·‘é€™äº”å€‹æ¸¬è©¦ä»»å‹™ï¼Œä¸¦å³æ™‚æä¾›çµæœè¨Šæ¯ï¼Œå¾è€Œä¿®æ­£å•é¡Œã€‚è‹¥ä½¿ç”¨ä½µè¡Œï¼Œæ•´é«”ç­‰å¾…å›æ‡‰çš„æ™‚é–“å°±èƒ½å¤§å¹…æ”¶çŸ­ã€‚å°±åƒå‰é¢æåˆ° GoCD æœ‰äº”å€‹æ¸¬è©¦é›†æˆï¼Œè‹¥ä½¿ç”¨ä¸¦è¡ŒåŒ–åŸå‰‡å°±èƒ½å¤§å¹…ç¸®çŸ­æ¸¬è©¦æ™‚é–“ã€‚   å¿«é€Ÿå›æ‡‰çµæœ ã€‚å¦‚æœè³‡æºè¼ƒè²§ä¹(ä¾‹å¦‚ Runner è¦æ ¼ç‰¹çˆ›)ï¼Œåœ¨ Stage çš„è¨­è¨ˆï¼Œæˆ‘å€‘å¯ä»¥å°‡ä¾äº›é‹è¡Œè¼ƒå¿«çš„è‡ªå‹•åŒ–é©—è­‰å„ªå…ˆåšåŸ·è¡Œï¼Œè¼ƒæ…¢èˆ‡æ¶ˆè€—è³‡æºè¼ƒå¤šçš„æ”¾åœ¨å¾Œé¢åŸ·è¡Œã€‚æ„Ÿè¦ºé€™é‚Šå¾—æ„æ€ èŠ±è¼ƒé•·æ™‚é–“çš„æ¸¬è©¦ï¼Œå°±æ”¾åœ¨è¶Šæ¥è¿‘æ­£å¼ä¸Šç·šå‰åšï¼Œä¾†ç¸®çŸ­å‰é¢é–‹ç™¼æ¸¬è©¦æ™‚é–“ã€‚   é‡è¦çš„å›æ‡‰çµæœå„ªå…ˆ ã€‚å‘¼æ‡‰ç¬¬å››é»ï¼Œé›–ç„¶ç‚ºäº†é”åˆ°å¿«é€Ÿå›æ‡‰çµæœå°‡ä¸€äº›è¼ƒå¿«çš„æ¸¬è©¦æ”¾åœ¨å‰é¢åšï¼Œä½†ä¾ç„¶è¦ä»¥é‡è¦å„ªå…ˆæ¬Šé«˜çš„ç‚ºä¸»ã€‚  7.2.2 åœ˜éšŠç´€å¾‹  1.ç«‹å³æš«åœåŸå‰‡  Pipeline ä¸€å‡ºå•é¡Œï¼Œåœ˜éšŠéœ€è¦æœ‰äººç«‹å³å»è™•ç†ï¼Œè€Œä¸æ˜¯æ”¾ä»»ä»–ä¸ç®¡ã€‚å†å•é¡Œä¿®å¾©å‰ï¼Œç¦æ­¢ä»»ä½•äººæäº¤æ–°çš„ç¨‹å¼ç¢¼ã€‚  2.å®‰å…¨å¯©æ ¸åŸå‰‡  æ‰€æœ‰ä»£ç¢¼èˆ‡è»Ÿä»¶åŒ…éƒ½éœ€è¦æœ‰å·éæ¿æ§åŠå¯©æ ¸å®Œç•¢æ‰å¯ä½¿ç”¨ã€‚  7.3 Pipeline å¹³å°çš„çµ„æˆ  é€™ç« ç¯€ä¸»è¦è¿°èªª Pipeline çš„ä¸»è¦çµ„æˆå€å¡Š  7.3.1 å·¥å…·éˆæ•´é«”æ¶æ§‹  æ›¸ä¸­æå‡ºçš„åœ–æœ‰é»é›£å»äº†è§£ï¼Œåœ¨é€™æˆ‘æ‹¿ä¸€å¼µä»¥ Github çµåˆ Jenkis çš„æ¶æ§‹åœ–å»è¼”ä½è§£èªª(Jenkis é‚£å¼µåœ–å…ˆä¸ç®¡æ¶æ§‹ Solution æ˜¯å¦ç‚ºæœ€å¥½)ã€‚    Pipeline æ•´é«”æ¶æ§‹ä¸»è¦åˆ†æˆã€å”¯ä¸€ä¿¡å—æº(ç¨‹å¼ç¢¼èˆ‡æ‰“åŒ…ç‰©å­˜å–åº«)ã€èª¿åº¦åŠå±•ç¤º(èª¿åº¦å™¨)ä»¥åŠåŸºç¤æ”¯æ’æœå‹™(æ¸¬è©¦ã€éƒ¨ç½²ç­‰å¯¦éš›åŸ·è¡Œç’°å¢ƒ..)  1.å”¯ä¸€ä¿¡å—æº  åœ¨ Pipeline éç¨‹ä¸­ï¼Œåœ˜éšŠè§’è‰²è‹¥å°ä»»ä½•è¨Šæ¯ç”¢ç”Ÿè³ªç–‘æ™‚ï¼Œè¦åšè¿½æº¯éƒ½æ‡‰è©²è¦èƒ½è¿½å›åˆ°å­˜å–åº«è£¡çš„ç”¢å‡ºç‰©(è¦éƒ¨ç½²æª”æ¡ˆ)ï¼Œè€Œåœ¨å­˜å–åº«ä¸­çš„æ‰“åŒ…æª”æ¡ˆéƒ½å¯ä»¥æ‰¾åˆ°å°æ‡‰ç¨‹å¼ç¢¼åŠä»–ç›¸ä¾çš„é¡åˆ¥åº«æª”æ¡ˆï¼Œæˆ–æ˜¯èƒ½æ‰¾åˆ°ä¸‹è¼‰çš„ URL Sourceã€‚  2.èª¿åº¦åŠå±•ç¤º(Pipeline)  èƒ½æ¥å—ä¸åŒçš„æœå‹™åŸºç¤å¹³å°ï¼Œä¸”å…·æœ‰èª¿åº¦ä¸åŒä»»å‹™ï¼Œå®Œæˆæ•´å€‹äº¤ä»˜æµç¨‹çš„åŠŸèƒ½ã€‚ä¸¦æ­¤èƒ½å±•ç¤ºæ•´å€‹éç¨‹çš„æ­·å²è¨Šæ¯ã€‚  3.åŸºç¤æ”¯æ’æœå‹™  ä¸€é–“è¼ƒå¤§çš„å…¬å¸å…·æœ‰ç›¸å°æ‡‰çš„å»ºç½®ã€æ¸¬è©¦åŠéƒ¨ç½²çš„æœå‹™ã€‚è¦æ¨¡è¼ƒä¸å¤§çš„é€šå¸¸å‰å…©å€‹é€šå¸¸å°±ç›´æ¥åœ¨ä¸€å€‹ Runner Execute ç›´æ¥åšæ‰ã€‚é‚£å¦‚æœæ˜¯å‰è€…ï¼Œåœ¨ Pipeline è¨­è¨ˆä¸Šå°±è¦è€ƒæ…®å¦‚ä½•å»èˆ‡é€™äº›åŸºç¤æ”¯æ’æœå‹™å»é€£é€šèˆ‡å”ä½œï¼Œè®“æ•´é«” Pipeline éç¨‹ä¸­é”åˆ°æœ€å¤§çš„æ•ˆç›Šæ€§ã€‚  7.3.2 å¹³å°æ‡‰å…·æœ‰çš„åŸºæœ¬èƒ½åŠ›  Pipeline äº‹åœ˜éšŠå¤šè§’è‰²çš„çµ±ç±Œå”ä½œç³»çµ±ï¼Œå› æ­¤é—œæ³¨çš„æ˜¯è»Ÿé«”åœ¨ Pipeline çš„æµå‹•æ•ˆç‡ï¼ŒåŒ…å«éƒ¨ç½²èˆ‡ä¸Šç·šï¼Œéç¨‹èƒ½ç²¾æº–å±•ç¾å€‹ç’°ç¯€çš„ç‹€æ…‹èˆ‡è¨Šæ¯ï¼Œä¸¦èƒ½åœ¨ä¸å¢åŠ åœ˜éšŠè² æ“”æƒ…æ³ä¸‹è‡ªå‹•æ”¶é›†å„ç’°ç¯€ç”¢ç”Ÿçš„æ•¸æ“šã€‚ä¾‹å¦‚ï¼Œè¡¡é‡æŸä¸€åŠŸèƒ½çš„é–‹ç™¼é€±æœŸã€‚  æ­¤ç« ç¯€æåˆ°é‡é»å°±ä¸‹è¿°å…©é»ï¼Œ   1.è¿½æº¯èƒ½åŠ›  2.é‡æ–°å»ºç½®èƒ½åŠ›  é‡å° 1 ä¸å¤šèªªï¼Œç°¡å–®ä¾†èªªå°±æ˜¯å°æ–¼äº‹ä»¶èƒ½æŸ¥è©¢ä»–æ‰€æœ‰çš„æ­·ç¨‹ã€‚å°æ–¼ 2ï¼Œåªè¦å­˜å–åº«ç¨‹å¼ç¢¼ä¾èˆŠå­˜åœ¨ï¼Œå°±ç®—é‡åˆ°ç‰ˆæœ¬å‡ºå•é¡Œï¼Œä¾èˆŠèƒ½å†æ¬¡ä¿®æ”¹é‡æ–°åšè‡ªå‹•éƒ¨ç½²ã€‚åˆæˆ–æ˜¯è‡ªå‹•åŒ–å¤±æ•—å› ç‚ºå°æ‡‰æœå‹™ç’°å¢ƒå‡ºå•é¡Œï¼Œåœ¨å°æ‡‰ç’°å¢ƒ Recovery å¾Œï¼Œèƒ½å†æ¬¡é‡æ–°é‹è¡Œæ¸¬è©¦ã€‚  7.3.3 å·¥å…·éˆå»ºè¨­ç­–ç•¥  ä¸Šè¿° 7.3.1 åœ–ä¸­æåˆ°çš„å¹³å°æ¶æ§‹ï¼Œå¯çœ‹å‡ºä»–æ˜¯ç”±ä¸åŒçš„å·¥å…·èˆ‡å­ç³»çµ±çµ„æˆã€‚å› æ­¤æˆ‘å€‘å¯ä»¥æ ¹æ“šå…¬å¸çš„ç¿’æ…£èˆ‡ç­–ç•¥å»å®¢è£½è¨­è¨ˆã€‚ä¾‹å¦‚ GoCD åœ˜éšŠå› ç‚ºåœ¨è‡ªå‹•åŒ–æ¸¬è©¦é‡è¼ƒé¾å¤§ï¼Œå› æ­¤å°±è‡ªè¡Œé–‹ç™¼ä¸€å€‹è‡ªå‹•åŒ–æ¸¬è©¦åˆ†çµ„æ’å»ºï¼Œç”±æ­¤æ’ä»¶è‡ªå‹•å°‡æ‰€æœ‰æ¸¬è©¦åˆ†é…åˆ°ä¸åŒä»»å‹™å“©ï¼Œä¸¦å°‡é€™äº›ä»»å‹™åˆ†é…åˆ°å¤šå€‹æ¸¬è©¦ç’°å¢ƒä¸­åŸ·è¡Œã€‚ä½†å°æ›´å¤§å‹çš„å…¬å¸ï¼Œå…¶ç’°å¢ƒæœƒæ›´åŠ è¤‡é›œï¼Œå…¶å„ç”¢å“çµ„ä»¶ä¹‹é–“çš„é—œè¯é—œä¿‚ä¹Ÿæœƒæ›´åŠ é¾å¤§è¤‡é›œã€‚ç‚ºäº†ç™¼æ®æŒçºŒäº¤ä»˜çš„å¨åŠ›ï¼Œä¸Šè¿°æåˆ°çš„å„é¡æ”¯æ’æœå‹™é›²ç«¯åŒ–ä¹Ÿæˆç‚ºå¿…è¦é¸é …ã€‚ä¾‹å¦‚ AWSã€Facebook èˆ‡ Google éƒ½å…·æœ‰è‡ªå·±çš„ DevOps å¹³å°å·¥å…·éˆï¼Œç”šè‡³å°‡å…¶ä¸­ä¸€éƒ¨åˆ†å·¥å…·é–‹æ”¾çµ¦ Open Sourceã€‚  é‚£æ­¤æœå‹™ç³»çµ±é–“å€‹è©³ç´°çš„é—œä¿‚æ˜¯ä»€éº¼? 7.4 ç« ç¯€æœƒè¿°èªªé€™ä»¶äº‹æƒ…ã€‚  7.4 åŸºç¤æ”¯æ’æœå‹™é›²ç«¯åŒ–  å¤§å¤šå¤§å…¬å¸æœå‹™ç«¯ç¨‹åºéƒ¨ç½²é »ç‡éƒ½éå¸¸å¿«ï¼Œå¹¾ä¹éƒ½åˆè‡ªå·±çš„é›²åŒ–æ”¯æ’æœå‹™ï¼Œå¦‚ä¸‹è¡¨    7.4.1 åŸºç¤æ”¯æ’æœå‹™å”ééç¨‹  æ­¤ç« ç¯€ç‚ºç¨å¾®å¤§è‡´è¬›è§£æ•´å€‹ç®¡ç·šèˆ‡åŸºç¤å»ºç½®æœå‹™äº’å‹•çš„éç¨‹ï¼Œå¤§åˆ†é¡ä¸Šåˆ†ä¸‰å€‹æ­¥é©Ÿä¾†çœ‹ï¼Œ    ç¬¬ 0 æ­¥:ç’°å¢ƒæº–å‚™(yml è¨­å®š)  é€™éƒ¨ç™½è©±ä¸€é»å°±æ˜¯æ•´é«”éƒ¨ç½²æœ‰å“ªäº›è¨­å®šåŠæœ‰å“ªäº›åŸºç¤æœå‹™å»ºè¨­ï¼Œé‡å° Stage ä»»å‹™å°æ‡‰ç›¸é—œè¨­å®šæŒ‡æ´¾ç›¸å°æ‡‰åŸºç¤å»ºè¨­æœå‹™æº–å‚™ã€‚  ç¬¬ 1 æ­¥:æäº¤å»ºç½®(å»ºç½®ï¼Œæ¸¬è©¦)  å°‡ Source Code äº¤è‡³ç›¸å°æ‡‰æœå‹™åšå¥ç½®èˆ‡æ¸¬è©¦ï¼Œå»ºç½®ç®¡ç†æœå‹™æœƒå°‡ä»£ç¢¼å¾ç¨‹å¼å­˜å–åº«ä¸­æå‡ºï¼Œç„¶å¾Œåœ¨å»ºç½®ç’°å¢ƒå»ºç½®æ‰“åŒ…å¾Œï¼Œæ”¾å…¥æˆå“åº«ã€‚  æ¥è‘—éƒ¨ç½²ç®¡ç†æœå‹™æ ¹æ“š Pipeline å®šç¾©å°‡ç·¨è­¯å¥½çš„æˆå“ï¼Œæ”¾åˆ°æ¸¬è©¦ç’°å¢ƒæ¸¬è©¦ã€‚å¦‚æœæ¸¬è©¦éœ€è¦ä¸€äº›æ¯”è¼ƒç‰¹åˆ¥çš„è¨­å®šï¼Œå‰‡åŒæ™‚å¾éƒ¨ç½²é…ç½®è®€å–ç›¸é—œé…ç½®ï¼ŒæˆåŠŸå¾Œå°±é–‹å§‹åŸ·è¡Œ Pipeline çš„æ¸¬è©¦ä»»å‹™ã€‚  ç¬¬ 2 æ­¥:æ¬¡ç´šå»ºç½®(éƒ¨ç½²ï¼Œæ¸¬è©¦)  ç•¶æ¸¬è©¦å®Œæˆå¾Œï¼Œéƒ¨ç½²ç®¡ç†æœå‹™æœƒå†å¾æˆå“åº«ä¸­æ‹¿å»æˆå“ï¼Œä¸¦å¾éƒ¨ç½²é…ç½®è®€å– UAT ç›¸é—œéƒ¨ç½²è¨Šæ¯ï¼Œå°‡å…©è€…çµåˆï¼Œéƒ¨ç½²åˆ° UAT ç’°å¢ƒé€²è¡Œç«¯å°ç«¯æ¸¬è©¦ã€‚  ç¬¬ 3 æ­¥:éƒ¨ç½²ç”Ÿç”¢ç’°å¢ƒ  ç•¶æ¬¡ç´šå»ºç½® UAT æ¸¬è©¦å®Œæˆå¾Œï¼Œéƒ¨ç½²ç®¡ç†æœå‹™æœƒå†æ¬¡å¾æˆå“åº«å–å‡ºæˆå“ï¼Œä¸¦è®€å–é…ç½®è¨Šæ¯ï¼Œéƒ¨ç½²åˆ°æ­£å¼ç’°å¢ƒã€‚  7.4.2 å»ºç½®ç®¡ç†æœå‹™  æ§‹æˆåˆ†ä¸‰å€‹å€å¡Š   ä»»å‹™ç®¡ç†  èª¿åº¦  åŸ·è¡Œå™¨    æ¯å€‹å€å¡Šæœå‹™éƒ½æœ‰æŸ±åˆ—ç·©è¡ï¼Œä»»å‹™ç®¡ç†å°‡ä»»å‹™äº¤çµ¦èª¿åº¦å™¨å¾Œï¼Œèª¿åº¦å™¨æœƒæ ¹æ“šä¸€å®šçš„èª¿åº¦ç®—æ³•é¸æ“‡å»ºç½®ä»»å‹™å°‡å…¶ç™¼é€ç›¸å°æ‡‰çš„åŸ·è¡Œå™¨ç·¨è­¯ã€‚ä¾‹å¦‚ c#ä»£ç¢¼è‹¥ç‚º Net Framework å‰‡æŒ‡æ´¾åˆ° Windows ç’°å¢ƒä¸‹ç·¨è­¯ï¼ŒC++å‰‡æŒ‡æ´¾åˆ° Linux ä¸‹ç’°å¢ƒç·¨è­¯ã€‚è€Œé›†ç¾¤ç®¡ç†å™¨å‰‡æ˜¯ç®¡ç†é€™äº›åŸ·è¡Œå™¨çš„å»ºç«‹èˆ‡ç‹€æ…‹ç®¡ç†(ç¹å¿™ã€ç©ºé–’ã€å¤±å»é€£ç·š..)ã€‚  åŸ·è¡Œå™¨ç‚ºå»ºç½®ä»»å‹™çš„ä»£ç†ï¼Œé›†ç¾¤ä¸­å¯ä»¥æœ‰å¤šå€‹åŸ·è¡Œå™¨ï¼Œæ¯å€‹åŸ·è¡Œå™¨æœƒæ ¹æ“šæ”¶åˆ°è¨Šæ¯å°æ‡‰çš„å­˜å–åº« URI æª¢å‡ºä»£ç¢¼ä¸¦æ ¹æ“šè¦æ±‚ç·¨åˆ¶å»ºç½®ä»»å‹™ã€‚å»ºç½®å®Œæˆå¾Œæœƒå°‡æŒ‡å®šç”¢ç‰©(éƒ¨ç½²éœ€ç”¨æª”æ¡ˆ)æ”¾åˆ°æˆå“åº«ä¸­ã€‚ä¸¦å‘ Pipeline å›å ±åŸ·è¡Œçµæœã€‚  å¦å¤–å¯ä»¥çœ‹åˆ°åœ–ä¸­å·¦é‚Š Request è¼¸å…¥é»æœ‰å€‹äººé ­ï¼Œä»£è¡¨é€™æ¶æ§‹ä¹Ÿå…è¨±å·¥ç¨‹å¸«åœ¨æœ¬åœ°ç·¨å¯«æœŸé–“å°±å¯ä»¥ç›´æ¥ä½¿ç”¨æ­¤æœå‹™ã€‚  7.4.3 è‡ªå‹•åŒ–ç®¡ç†æœå‹™  æ§‹æˆåˆ†ä¸‰(å››)å€‹å€å¡Š   ä»»å‹™ç®¡ç†  èª¿åº¦  åŸ·è¡Œå™¨  æ¸¬è©¦å¥åº·ç®¡ç†    é‡å°ä»»å‹™ç®¡ç†ã€èª¿åº¦èˆ‡é›†ç¾¤ç®¡ç†çŒ¶å¦‚ 7.4.2 æ‰€èªªï¼Œå¤§è‡´ä¸Šæ˜¯ä¸€æ¨£çš„æ„æ€ï¼Œåªæ˜¯ç·¨åˆ¶ä»»å‹™è®Šæˆæ¸¬è©¦ä»»å‹™ã€‚å€¼å¾—ä¸€æçš„æ˜¯æ¸¬è©¦å¥åº·ç®¡ç†ã€‚ç•¶æ¸¬è©¦åœ¨ä¸åŒç¯€é»æˆ–è³‡æºæ¢ä»¶ä¸‹ï¼Œå› ç‚ºå¤±æ•—é‡è¤‡åŸ·è¡Œå¤ªå¤šæ¬¡(æ›¸ä¸­å¯« 1000 æ¬¡)ã€‚  æ­¤æ™‚æ¸¬è©¦å¥åº·ç®¡ç†å™¨å°±æœƒå°‡ä¸ç©©å®šçš„ Case æ‹‰åˆ°ä¸ç©©å®šæ± ä¸¦é€šçŸ¥åœ˜éšŠåšè™•ç†ã€‚é€™é‚Šå¥åº·ç®¡ç†å™¨è‹±æ–‡å°æ‡‰ä¸€æ™‚æŸ¥ä¸å¤ªåˆ°....æ‰€ä»¥å¦‚ä½•å¯¦ä½œä¹Ÿä¸å¤ªæ¸…æ¥šã€‚  7.4.4 è»Ÿä»¶éƒ¨ç½²ç®¡ç†æœå‹™  é›–ç„¶åœ¨ Pipeline éç¨‹ä¸­çš„æ¸¬è©¦éƒ½æ²’å•é¡Œï¼Œä½†ä¹Ÿæœ‰å¯èƒ½åˆ°äº†å¯¦éš›æ­£å¼ç’°å¢ƒæœƒå‡ºéŒ¯ã€‚åŸå› åœ¨æ–¼æ¸¬è©¦ç’°å¢ƒèˆ‡æ­£å¼ç’°å¢ƒé‚„æ˜¯æœƒæœ‰ä¸€å®šçš„å·®ç•°æ€§ã€‚  æ›¸ä¸­èˆ‰éå…§å¾ˆå¤šå¤§å‹ä¼æ¥­çš„ç”Ÿç”¢ç’°å¢ƒç”¨çš„ J2EE æ‡‰ç”¨æœå‹™å™¨éƒ½æ˜¯å•†æ¥­è»Ÿä»¶ï¼Œä½†å› ç‚ºéæ–¼ç¬¨é‡ï¼Œæ‰€ä»¥ç”¨èªæ³•æª¢æŸ¥å°±ä¸åš´æ ¼çš„ Tomcatã€‚æ­¤æ™‚å¦‚æœéƒ¨ç½²åˆ°ä¼æ¥­çš„æ­£å¼ç”Ÿç”¢ç’°å¢ƒï¼Œå°±æœƒç”¢ç”Ÿæœ‰äº›é é¢å› ç‚º Html æ¨™ç±¤ä¸åŒ¹é…è€Œç™¼ç”ŸéŒ¯èª¤ã€‚  å¥½ï¼Œä¸Šè¿°è¬›ä¸€è¬›ä¸æ˜¯ä¸‹åœ–é‡é»..ä¸‹åœ–è¦è¡¨é”çš„æ˜¯ï¼Œå› ç‚ºç‚ºäº†å”èª¿é‹ç¶­éƒ¨é–€èˆ‡ç”¢å“éƒ¨é–€çš„åˆä½œã€‚ä¹‹é–“çš„æ¥å£å»ºè­°æœ‰å€‹æ­£å¼ç”¢å“åº«åŠä¸Šç·šå–®ã€‚æ­¤æ™‚é‹ç¶­éƒ¨é–€å°±å¯ä»¥æ ¹æ“šä¸Šç·šå–®ï¼Œå¾æ­£å¼ç”¢å“åº«æ‹‰å–ç›¸å°æ‡‰çš„ç”¢å“è‡³æ­£å¼(ç”Ÿç”¢)ç’°å¢ƒæ­¥æ•¸ã€‚    7.4.5 åŸºç¤ç’°å¢ƒç®¡ç†æœå‹™  ç‚ºå»ºç½®ã€æ¸¬è©¦ã€éƒ¨ç½²ç®¡ç†æä¾›ç’°å¢ƒæº–å‚™èˆ‡ç›£æ§æœå‹™ã€‚èƒ½æ¥å—é€™ä¸‰ç¨®ç’°å¢ƒçš„è«‹æ±‚ç‚ºæœŸæº–å‚™ç›¸å°æ‡‰çš„ç’°å¢ƒã€‚éš¨è‘— Docker æŠ€è¡“æˆç†Ÿï¼Œé…ç½®åŸºç¤ç’°å¢ƒæ…¢æ…¢ä»¥ Docker Image å½¢å¼ï¼Œéœ€è¦æ™‚ç›´æ¥å•Ÿå‹•ï¼Œä¸¦æä¾›æœå‹™ã€‚    7.5 ä¼æ¥­æˆå“åº«çš„ç®¡ç†  ä¼æ¥­æˆå“åº«æ˜¯éƒ¨ç½²æµæ°´ç·šå·¥å…·éˆä¸­ä¼æ¥­çš„å—ä¿¡æºä¹‹ä¸€ï¼Œä¹Ÿæ˜¯ä¼æ¥­ä¿¡æ¯ç®¡ç†ä¸­çš„ä¸€å€‹é‡è¦ç¯€   \né»ã€‚åªæœ‰é€šéå®‰å…¨é©—è­‰çš„è»Ÿé«”åŒ…æ‰æœƒè¢«ç´å…¥æˆå“åº«ï¼Œä¸¦ä¸”å®‰å…¨é©—è­‰éƒ¨é–€ä¹Ÿæ‡‰å®šæœŸå°å­˜å„²çš„   \nå°å­˜å„²çš„å…§å®¹ä½œå®‰å…¨æƒæåŠæ¸…ç†ã€‚  7.5.1 æˆå“åº«çš„åˆ†é¡     è‡¨æ™‚è»Ÿé«”åŒ…åº«(A)   \nç”¨æ–¼å­˜å„²åœ˜éšŠé–‹ç™¼ä¸¦é€šéæµæ°´éƒ¨å±¬ç·šç”Ÿæˆç¨‹å¼ç¢¼çš„æ‰€æœ‰è»Ÿé«”åŒ…ã€‚  æ­£å¼è»Ÿé«”åŒ…åº«(B)   \nç”¨æ–¼å­˜å„²é€šéæµæ°´ç·šéƒ¨ç½²ä¸”ç¶“éå®‰å…¨é©—è­‰ï¼Œè¢«ç¢ºèªèƒ½å¤ ç™¼å¸ƒåˆ°ç”Ÿç”¢ç’°å¢ƒæˆ–ä½¿ç”¨è€…çš„è»Ÿé«”åŒ…ã€‚  å¤–éƒ¨è»Ÿé«”åŒ…åº«(C)   \næŒ‡è©²è»Ÿé«”åŒ…çš„ç¨‹å¼ç¢¼ä¸¦éç”±åœ˜éšŠç®¡ç†æˆ–ç¶­è­·ï¼Œä½†åœ¨é–‹ç™¼ä¸­æ‰€ä½¿ç”¨åˆ°çš„å…¶ä»–è»Ÿé«”åŒ…ã€‚é€™äº›è»Ÿ   \né«”åŒ…é€šéäº’è¯ç¶²æˆ–æ˜¯ç¬¬ä¸‰æ–¹å–å¾—ï¼Œäº¦å°‡å…¶å­˜å„²åœ¨æˆå“åº«ä¸­ã€‚   \nå¤–éƒ¨è»Ÿé«”åŒ…ä¸€èˆ¬å­˜å„²çš„å½¢å¼å¯èƒ½åŒ…å« 3 ç¨®ï¼š   \n(1) ä»¥äºŒé€²åˆ¶çš„æ–¹å¼ä¿å­˜ã€‚   \n(2) ä»¥ç¨‹å¼ç¢¼å‰¯æœ¬çš„æ–¹å¼ä¿å­˜ã€‚   \n(3) ä»¥å¤–éƒ¨é€£çµåœ°å€çš„æ–¹å¼ä¿å­˜ã€‚    è‡¨æ™‚é¡åƒåº«(D)ã€æ­£å¼é¡åƒåº«(E)ã€å¤–éƒ¨é¡åƒåº«(F)   \nåŸºæœ¬ä¸ŠåŒè»Ÿé«”åŒ…åº«ï¼Œåªæ˜¯ä»¥é¡åƒçš„æ–¹å¼ä½œå­˜å„²ã€‚  7.5.2 æˆå“åº«çš„ç®¡ç†åŸå‰‡  æˆå“åº«ä¸­ï¼Œæ¯å€‹æˆå“éƒ½æ‡‰è©²æœ‰æ¨™ç¤ºï¼Œä¸¦ä¸”é€£åŒå…¶ä¾†æºã€çµ„æˆçš„éƒ¨ä»¶ä»¥åŠç”¨é€”ç­‰ï¼Œä¸€èµ·ä¿   \nå­˜ç‚ºè©²æˆå“çš„ä¿¡æ¯ã€‚æ‰€æœ‰æˆå“éƒ½è¦èƒ½å¤ è¿½æº¯è‡³æºé ­ï¼Œ åŒ…æ‹¬è‡¨æ™‚æˆå“åº«ä¸­çš„æˆå“ã€‚  7.6 å¤šç¨®å¤šæ¨£çš„éƒ¨ç½²æµæ°´ç·š  7.6.1 å¤šçµ„ä»¶çš„éƒ¨ç½²æµæ°´ç·š  è‹¥ä¸€å€‹è»Ÿé«”ç”¢å“ç”±å¤šå€‹çµ„ä»¶å»ºç½®è€Œæˆï¼Œæ¯å€‹çµ„ä»¶éƒ½æœ‰ç¨è‡ªçš„ç¨‹å¼ç¢¼å€‰åº«ï¼Œä¸¦ä¸”æ¯å€‹çµ„ä»¶   \nç”±ä¸€å€‹å–®ç¨çš„åœ˜éšŠè² è²¬é–‹ç™¼èˆ‡ç¶­è­·ï¼Œæ•´å€‹ç”¢å“çš„éƒ¨ç½²æµæ°´ç·šçš„è¨­è¨ˆé€šå¸¸èˆ‡ä¸‹åœ–ç›¸ä¼¼ã€‚    æ¯å€‹çµ„ä»¶çš„éƒ¨ç½²æµæ°´ç·šæˆåŠŸä»¥å¾Œï¼Œéƒ½èƒ½è§¸ç™¼ä¸‹æ¸¸çš„ç”¢å“é›†æˆéƒ¨ç½²æµæ°´ç·šã€‚è€Œé€™å€‹é›†æˆéƒ¨   \nç½²æµæ°´ç·šçš„æ‰“åŒ…éšæ®µï¼Œæœƒè‡ªå‹•å¾è»Ÿé«”åŒ…åº«ä¸­ç²å–æ¯å€‹çµ„ä»¶æœ€è¿‘æˆåŠŸçš„è»Ÿé«”åŒ…ï¼Œç„¶å¾Œå°å…¶   \né€²è¡Œç”¢å“æ‰“åŒ…ï¼Œå†è§¸ç™¼é›†æˆéƒ¨ç½²æµæ°´ç·šçš„å¾ŒçºŒéšæ®µã€‚  7.6.2 å€‹äººéƒ¨ç½²æµæ°´ç·š  æ¯åå·¥ç¨‹å¸«å‰µå»ºäº†è‡ªå·±å°ˆå±¬çš„éƒ¨ç½²æµæ°´ç·šï¼Œç”¨æ–¼å€‹äººåœ¨æœªæ¨é€ç¨‹å¼ç¢¼åˆ°åœ˜éšŠå€‰åº«ä¹‹å‰çš„   \nä½¿ç”¨ã€‚å€‹äººçš„éƒ¨ç½²æµæ°´ç·šä¸¦ä¸æœƒéƒ¨ç½²åˆ°åœ˜éšŠå…±åŒæ“æœ‰çš„ç’°å¢ƒä¸­ï¼Œè€Œæ˜¯åƒ…è¦†è“‹å€‹äººé–‹ç™¼ç’°   \nç¯€ã€‚    å·¥ç¨‹å¸«é€šééƒ¨ç½²æµæ°´ç·šçš„æ¨¡æ¿åŠŸèƒ½ï¼Œè¤‡è£½ä¸€ä»½åœ˜éšŠéƒ¨ç½²çš„å‰¯æœ¬ã€‚ä¸¦åƒ…ä¿ç•™å…©å€‹éšæ®µ(æ   \näº¤å»ºç½®ã€æ¬¡ç´šå»ºç½®)çš„å…§å®¹ã€‚ä»¤å·¥ç¨‹å¸«èƒ½å¤ ç›£è½è‡ªå·±ç¨‹å¼ç¢¼å€‰åº«çš„è®ŠåŒ–ï¼Œä¸¦ä¸”è‡ªå‹•åŒ–å»   \nè§¸ç™¼ã€‚ç•¶é–‹ç™¼äººå“¡æäº¤ç¨‹å¼ç¢¼åˆ°å€‹äººå€‰åº«æ™‚ï¼Œéƒ½æœƒè‡ªå‹•è§¸ç™¼å€‹äººå°ˆå±¬çš„éƒ¨ç½²æµæ°´ç·šã€‚  é€™æ¨£åšçš„å¥½è™•æœ‰ 3 å€‹ï¼š   å€‹äººéƒ¨ç½²æµæ°´ç·šèˆ‡åœ˜éšŠçš„éƒ¨ç½²æµæ°´ç·šå…±äº«å»ºç½®åŠæ¸¬è©¦ç’°å¢ƒã€‚  ä¿è­‰æ¯å€‹å·¥ç¨‹å¸«éƒ½èƒ½åˆ©ç”¨åˆ°ç›¸åŒçš„æ¸¬è©¦è³‡æºï¼ŒåŠ å¿«å€‹äººæª¢é©—çš„é€Ÿåº¦ã€‚  å€‹äººéƒ¨ç½²æµæ°´ç·šçš„æ¸¬è©¦ç”¨ä¾‹èˆ‡åœ˜éšŠçš„éƒ¨ç½²æµæ°´ç·šçš„é©—è­‰é›†åˆç›¸åŒï¼Œå› ç‚ºæ˜¯ç›¸åŒçš„å»ºç½®è³‡æºï¼Œè‹¥æ˜¯ç™¼ç”Ÿå»ºç½®å¤±æ•—ï¼Œå‰‡å¯ä»¥å®¹æ˜“çš„å®šä½åˆ°å•é¡Œé»ã€‚  7.6.3 éƒ¨ç½²æµæ°´ç·šçš„ä¸æ–·æ¼”é€²  æˆªæ­¢åˆ° 2018 å¹´ 4 æœˆï¼ŒGoCD çš„ç¤¾å€ç‰ˆæœ¬æ¯æœˆæœƒç™¼å¸ƒä¸€æ¬¡æ­£å¼ç‰ˆï¼Œè€Œå…¶åœ˜éšŠçš„è¤‡é›œçš„éƒ¨ç½²æµ   \næ°´ç·šè¨­è¨ˆä¹Ÿå·²æ¼”è®Šå¦‚ä¸‹åœ–æ‰€ç¤ºï¼š    æ§‹ç½® Linux åŒ…é€™å€‹éƒ¨ç½²æµæ°´ç·šä¸­ï¼ŒåŒ…å«å…©å€‹éšæ®µã€‚ç¬¬ä¸€å€‹éšæ®µæ˜¯ build-no_serverã€‚å¤š   \nå€‹ä»»å‹™ä¸¦è¡ŒåŸ·è¡Œï¼Œæ§‹ç½®çµ„æˆ Server æ‰€éœ€çš„å¤šå€‹ Jar åŒ…ï¼Œä¹Ÿä¸¦è¡ŒåŸ·è¡Œ Java æ¸¬è©¦ç”¨ä¾‹å’Œ   \nJavaScript å–®å…ƒæ¸¬è©¦ç”¨ä¾‹ã€‚é€™é«”ç¾äº†éƒ¨ç½²æµæ°´ç·šç›¡é‡ä¸¦è¡ŒåŒ–åŸå‰‡ã€‚ç¬¬äºŒå€‹éšæ®µæ˜¯   \nbuild-serverï¼Œä½¿ç”¨ç¶“ç¬¬ä¸€å€‹éšæ®µå·±åˆæ­¥é©—è­‰é€šéçš„å¤šå€‹ Jar åŒ…çµ„è£æˆ Sever åŒ…ã€‚  Linux é©—æ”¶æ¸¬è©¦é€™å€‹éƒ¨ç½²æµæ°´ç·šä¸­ï¼Œä¹ŸåŒ…å«å…©å€‹éšæ®µã€‚ç¬¬ä¸€å€‹éšæ®µæ˜¯é‹è¡Œé«˜å„ªå…ˆç´šçš„åŠŸ   \nèƒ½æ¸¬è©¦ï¼Œç¬¬äºŒå€‹éšæ®µæ˜¯å°æ’ä»¶éƒ¨åˆ†çš„è‡ªå‹•åŒ–åŠŸèƒ½æ¸¬è©¦ï¼Œé€™é«”ç¾äº†éƒ¨ç½²æµæ°´ç·šçš„å¿«é€Ÿåé¥‹   \nå„ªå…ˆåŸå‰‡ã€‚  è€Œåœ¨å¾ŒçºŒçš„å„é¡æ¸¬è©¦(å¦‚é©—æ”¶æ¸¬è©¦ã€å›æ­¸æ¸¬è©¦æˆ–è€…åŠŸèƒ½æ¸¬è©¦)ä¸­ï¼Œè¢«æ¸¬è©¦çš„äºŒé€²åˆ¶åŒ…å‡ä¾†   \nè‡ªå‰é¢å„éƒ¨ç½²æµæ°´ç·šçš„ç”¢å‡ºç‰©ï¼Œè€Œä¸”ç¢ºä¿å…¶ä½¿ç”¨åŒä¸€ç¨‹å¼ç¢¼ç‰ˆæœ¬ã€‚  7.7 ç‚ºé–‹ç™¼è€…å»ºç½®è‡ªåŠ©å¼å·¥å…·  å„ªç§€çš„äº’è¯ç¶²å…¬å¸æ¡ç”¨äº†ä¸€ç¨®å·¥å…·å¹³å°çš„è¨­è¨ˆç†å¿µï¼Œå³ç‚ºé–‹ç™¼å·¥ç¨‹å¸«è¨­è¨ˆä»–å€‘èªç‚ºå¥½ç”¨   \nçš„å·¥å…·ã€‚é€™ç¨®æ–¹å¼è¦æ±‚å‰µå»ºå¼·å¤§çš„å·¥å…·å¹³å°ï¼Œèƒ½å¤ å¾ˆå¥½åœ°æ”¯æŒé–‹ç™¼å·¥ç¨‹å¸«åšç”¢å“æœå‹™ã€‚  ä¾‹å¦‚ Facebookï¼Œé–‹ç™¼äººå“¡å¯ä»¥é€šéä»–å€‘å…§éƒ¨å¹³å°çœ‹åˆ°è‡ªå·±çš„ç¨‹å¼ç¢¼å·²ç¶“ç™¼ä½ˆåˆ°å“ªå€‹éš   \næ®µï¼Œæœ‰å¤šå°‘ç”¨æˆ¶åœ¨ä½¿ç”¨ã€‚é–‹ç™¼å·¥ç¨‹å¸«åœ¨ä¸éœ€è¦ä»»ä½•äººå¹«åŠ©çš„æƒ…æ³ä¸‹ï¼Œå°±èƒ½å¤ äº†è§£ä»–çš„ç¨‹   \nå¼ç¢¼å·²ç¶“ç™¼ä½ˆåˆ°å“ªå€‹éšæ®µäº†ã€‚    ä¾‹å¦‚é›»å•†å…¬å¸ Etsyï¼Œé–‹ç™¼å·¥ç¨‹å¸«å¯ä»¥æŸ¥çœ‹åˆ°è‡ªä¸Šæ¬¡ç”Ÿç”¢éƒ¨ç½²ä»¥å¾Œï¼Œæ¯æ¬¡çš„ç¨‹å¼ç¢¼è®Šæ›´   \næ•¸é‡ï¼Œä¸¦ä¸”éå¸¸æ–¹ä¾¿åœ°æŸ¥æ‰¾ç¨‹å¼ç¢¼å·®ç•°ã€‚  "},{"id":"content:4.cicd-2.0:8.chapter8.md","path":"/cicd-2.0/chapter8","dir":"cicd-2.0","title":"08 åˆ©æ–¼é›†æˆçš„åˆ†æ”¯ç­–ç•¥","description":"","keywords":["å‰è¨€","8.1 ç‰ˆæœ¬æ§åˆ¶ç³»çµ±çš„ä½¿ç”¨ç›®çš„","8.2 å¸¸è¦‹åˆ†æ”¯é–‹ç™¼æ¨¡å¼","åˆ†æ”¯ç­–ç•¥","8.3 åˆ†æ”¯æ¨¡å¼çš„æ¼”åŒ–","8.4 åˆ†æ”¯ç­–ç•¥","8.5 å°çµ","Additional Reference:"],"body":"  å‰è¨€  æˆ‘å€‘å·²ç¶“è¨è«–éå¦‚ä½•å°‡éœ€æ±‚æ‹†åˆ†æˆå¤šå€‹å¯äº¤ä»˜ã€å¯é©—æ”¶çš„ç”¨æˆ¶æ•…äº‹ï¼Œä»¥åŠå¦‚ä½•å°‡å®ƒå€‘å®‰æ’åˆ°æˆ‘å€‘äº¤ä»˜è¿­ä»£çš„éç¨‹ä¸­ã€‚æ¥ä¸‹ä¾†ï¼Œæœ¬ç« å°‡ä»‹ç´¹ç ”ç™¼åœ˜éšŠé€šéåŸå§‹ç¢¼å€‰åº«ï¼Œé«˜æ•ˆçµ„ç¹”åœ˜éšŠå¤šäººå¹¶ç™¼å”ä½œçš„æ–¹æ³•ï¼Œå³ä»£ç¢¼åˆ†æ”¯ç­–ç•¥ã€‚åˆ†æ”¯ç­–ç•¥çš„é¸æ“‡å°æŒçºŒäº¤ä»˜çš„æˆæœ¬èˆ‡æ•ˆæœæœ‰å¾ˆå¤§çš„å½±æ™Œã€‚  8.1 ç‰ˆæœ¬æ§åˆ¶ç³»çµ±çš„ä½¿ç”¨ç›®çš„  ç‰ˆæœ¬æ§åˆ¶ç³»çµ±(Version Control Systemï¼‰ä¸»è¦ç”¨æ–¼å­˜å„²åŠè¿½è¹¤ç›®å‰ï¼ˆæ–‡ä»¶å¤¾ï¼‰å’Œæ–‡ä»¶çš„ä¿®è¨‚æ­·å²ï¼ˆé€™é‡Œçš„ä¿®è¨‚æ“ä½œåŒ…æ‹¬ 3 é¡ï¼šæ–°å¢ã€ä¿®æ”¹å’Œåˆªé™¤ï¼‰ï¼Œå¾è€Œè®“ä½ èƒ½å¤ å›æº¯é‚£äº›è¢«ç´å…¥å…¶ç®¡ç†ç¯„åœä¹‹å…§çš„ä»»æ„å°è±¡çš„ä»»æ„ä¸€æ¬¡ä¿®è¨‚ã€‚å…¶æœ€æœ¬è³ªçš„ä½œç”¨æ˜¯å›ç­”\"4 å€‹ w\"ï¼Œå³åœ¨ä»€éº¼æ™‚é–“(When)ã€ä¿®æ”¹äº†ä»€éº¼å…§å®¹ï¼ˆWhat),æ˜¯èª°ä¿®æ”¹çš„ï¼ˆWho)ä»¥åŠç‚ºä»€éº¼è¦ä¿®æ”¹ï¼ˆWhy),ã€‚å…¶ä¸­æœ€å¾Œä¸€å€‹\"W\"æ˜¯é€šéç”¨æˆ¶æäº¤ä»£ç¢¼è®Šæ›´æ™‚æ›¸å¯«æäº¤æ³¨é‡‹(Commentsï¼‰çš„æ–¹å¼æä¾›çš„ã€‚ç¾åœ¨ï¼Œç‰ˆæœ¬æ§åˆ¶ç³»çµ±å·²ç¶“æˆç‚ºåœ˜éšŠåˆä½œå…±åŒäº¤ä»˜è»Ÿé«”éç¨‹ä¸­æ‰€ç”¨åˆ°çš„é‡è¦å”ä½œç®¡ç†æ©Ÿåˆ¶ï¼Œæ˜¯è»Ÿé«”å…¬å¸çš„åŸºç¤è¨­æ–½ã€‚å…¶ç›®æ¨™æ˜¯æ”¯æŒè»Ÿé«”é…ç½®ç®¡ç†æ´»å‹•ï¼Œè¿½ç¶œå’Œç´€éŒ„å¤šå€‹ç‰ˆæœ¬çš„å¹¶ç™¼å’Œç¶­è­·æ´»å‹•ã€‚æ ¹æ“šç‰ˆæœ¬æ§åˆ¶ç³»çµ±çš„é‹ä½œæ–¹å¼ï¼Œç›®å‰å¸‚é¢ä¸Šçš„ä¸»æµç‰ˆæœ¬ç®¡ç†ç³»çµ±è¢«åŠƒåˆ†ç‚ºé›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»çµ±å’Œåˆ†ä½ˆå¼ç‰ˆæœ¬æ§åˆ¶ç³»çµ±å…©ç¨®é¡å‹ã€‚  8.1.1 é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»çµ±  é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»çµ±çš„å‡ºç¾ï¼Œè§£æ±ºäº†å¤šäººå¦‚ä½•é€²è¡Œå”åŒä¿®æ”¹ä»£ç¢¼çš„å•é¡Œã€‚é€™é¡ç‰ˆæœ¬æ§åˆ¶ç³»çµ±ï¼Œéƒ½æœ‰ä¸€å€‹å–®ä¸€çš„é›†ä¸­ç®¡ç†çš„ç‰ˆæœ¬æ§åˆ¶ç®¡ç†æœå‹™å™¨ï¼Œä¿å­˜æ‰€æœ‰æ–‡ä»¶çš„æ­·å²ä¿®è¨‚ç‰ˆæœ¬ç´€éŒ„ã€‚åœ˜éšŠæˆå“¡ä¹‹åŒçš„ä»£ç¢¼äº¤æ›å¿…é ˆé€šéå®¢æˆ¶ç«¯é€£æ¥åˆ°é€™å°æœå‹™å™¨ï¼Œç²å–è‡ªå·±éœ€è¦çš„æ–‡ä»¶ã€‚æ¯ä»¤äººå¦‚æœæƒ³ç²å¾—å…¶ä»–äººæœ€æ–°æäº¤çš„ä¿®è¨‚ç´€éŒ„ï¼Œå°±å¿…é ˆå¾é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»çµ±ä¸­ç²å¾—ã€‚æ­¤æ™‚ï¼Œå®¢æˆ¶ç«¯å¹¶æ²’æœ‰æ•´å€‹é›†ä¸­å¼å€‰åº«ä¿å­˜çš„æ‰€æœ‰å…§å®¹ï¼Œè€Œæ˜¯æ ¹æ“šç”¨æˆ¶çš„æŒ‡å®šå‘½ä»¤ï¼Œä¸€æ¬¡åƒ…èƒ½ç²å–å€‰åº«ä¸­çš„æŸä¸€æ¬¡ä»£ç¢¼æ–‡ä»¶å¿«ç…§ã€‚é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»çµ±ç¤ºæ„åœ–å¦‚åœ– 8-1 æ‰€ç¤ºã€‚ç•¶å·¥ç¨‹å¸«ä¿®æ”¹äº†éƒ¨åˆ†ä»£ç¢¼ï¼Œä½†å°šæœªå®Œæˆå…¨éƒ¨å·¥ä½œæ™‚ï¼Œå¦‚æœå¸Œæœ›å°‡é€™å€‹ä¸­é–“æˆæœä¿å­˜æˆè‡¨æ™‚ç‰ˆæœ¬ï¼Œåšå€‹å‚™ä»½æ™‚ï¼Œå‰‡ä»–é€šå¸¸åªæœ‰å…©ç¨®é¸æ“‡ï¼šä¸€æ˜¯è¤‡è£½ä¸€ä»½åˆ°å¦ä¸€å€‹æœ¬åœ°ç›®éŒ„ä¸­ï¼›äºŒæ˜¯ç›´æ¥æäº¤åˆ°ä¸­å¤®å€‰åº«ã€‚è€Œç›´æ¥æäº¤æœªç¶“éè³ªé‡æª¢é©—çš„åŠæˆå“åˆ°ä¸­å¤®å€‰åº«ï¼Œå¯èƒ½æœƒå½±éŸ¿åŸæœ‰çš„åŠŸèƒ½ï¼Œå¦¨ç¤™åœ˜éšŠå…¶ä»–äººå·¥ä½œã€‚é€™ç¨®é¡å‹ç‰ˆæœ¬æ§åˆ¶ç³»çµ±çš„å…¸å‹ä»£è¡¨æ˜¯ Subversion,ç°¡ç¨±ç‚º SVNã€‚    é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»çµ±æœ‰å…©é»åŠ£å‹¢ã€‚é¦–å…ˆï¼Œåœ¨ç¶²è·¯ç’°å¢ƒä¸ä½³çš„æƒ…æ³ä¸‹ï¼ŒåŒæ­¥å¤§é‡æ–‡ä»¶æ™‚æœƒç¶“å¸¸å¤±æ•—ã€‚2007 å¹´åº•ï¼ŒGoCD åœ˜éšŠä½¿ç”¨ Subversion ä½œç‚ºç‰ˆæœ¬ç®¡ç†å·¥å…·ã€‚è»Ÿé«”ç”¢å“ç ”ç™¼åœ˜éšŠä¸»è¦åœ¨åŒ—äº¬å·¥ä½œï¼ŒéŠ·å”®äººå“¡åœ¨ç¾åœ‹ï¼Œå”®å¾Œæ”¯æŒäººå“¡åœ¨å°åº¦æ–‘åŠ ç¾…çˆ¾ï¼Œæºä»£ç¢¼å€‰åº«æ‰€ç”¨çš„ Subversion æœå„å™¨éƒ¨ç½²åœ¨ç¾åœ‹èŠåŠ å“¥ã€‚æœ‰ä¸€æ¬¡ï¼Œé–‹ç™¼äººå“¡å¾åŒ—äº¬åˆ°æ–‘åŠ ç¾…çˆ¾å‡ºå·®ï¼Œæ‰¾äº†ä¸€å°æ–°è¨ˆç®—æ©Ÿï¼Œæƒ³åœ¨ç•¶åœ°å…¬å¸è¾¦å…¬å®¤ä¿®æ”¹å¹¶æäº¤ä»£ç¢¼ï¼Œä½†æ‰‹ä¸Šæ²’æœ‰æºä»£ç¢¼ã€‚æ–¼æ˜¯ï¼Œæ‰“ç®—å°‡æºä»£ç¢¼åº«å¾ç‰ˆæœ¬æ§åˆ¶åº«æª¢å‡ºåˆ°é€™å°æ–°è¨ˆç®—æ©Ÿä¸Šã€‚ç„¶è€Œæºä»£ç¢¼åº«ç¨å¤§ï¼Œå°åº¦è¾¦å…¬å®¤çš„ç¶²è·¯ä¸ç©©å®šï¼Œå‰å¾ŒèŠ±äº†æ•¸å€‹å°æ™‚ï¼Œä¹Ÿæ²’èƒ½å°‡ä»£ç¢¼å¾ä¸­å¤®æœå‹™å™¨æ‹‰å–åˆ°é€™å°è¨ˆç®—æ©Ÿä¸Šã€‚  å…¶æ¬¡ï¼Œé›†ä¸­å¼ç‰ˆæœ¬æœå‹™å™¨å…·æœ‰å–®é»æ•…éšœé¢¨éšªã€‚å‡å¦‚ Subversion æœå‹™å™¨æª”æ©Ÿä¸€å°æ™‚ï¼Œé‚£éº¼åœ¨é€™ä¸€å°æ™‚å…§ï¼Œèª°éƒ½ç„¡æ³•æäº¤æ›´æ–°ï¼Œä¹Ÿç„¡æ³•å¾æœå‹™å™¨ç²å–æ–‡ä»¶ã€‚æœ€å£çš„æƒ…æ³æ˜¯ï¼Œå¦‚æœæœå‹™å™¨çš„ç¡¬ç¢Ÿç™¼ç”Ÿæ•…éšœï¼Œå¹¶ä¸”æ²’æœ‰åšéå‚™ä»½æˆ–è€…å‚™ä»½ä¸åŠæ™‚ï¼Œå‰‡æœƒæœ‰ä¸Ÿå¤±å¤§é‡æ•¸æ“šçš„é¢¨éšªã€‚é‚£æ¬¡äº‹ä»¶ä»¥å¾Œï¼ŒGoCD åœ˜éšŠå°‡æºä»£ç¢¼å€‰åº«å¾ Subversion é·ç§»åˆ°äº† Mercurialï¼Œå®ƒæ˜¯ä¸€æ¬¾åˆ†ä½ˆå¼ç‰ˆæœ¬æ§åˆ¶ç³»çµ±ï¼Œç°¡ä½ ç‚º Hg, Facebook ä¹Ÿåœ¨ä½¿ç”¨å®ƒã€‚  8.1.2 åˆ†ä½ˆå¼ç‰ˆæœ¬æ§åˆ¶ç³»çµ±  åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»çµ±èˆ‡é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»çµ±çš„å€åˆ¥åœ¨æ–¼å¤šå€‹æœå‹™å™¨å…±å­˜ï¼Œæ¯å€‹äººçš„ç¯€é»éƒ½æ˜¯ä¸€å€‹ä»£ç¢¼å€‰åº«ï¼Œæ‰€æœ‰çš„ç¯€é»éƒ½æ˜¯å¹³ç­‰çš„ã€‚åœ¨åœ˜éšŠå”ä½œéç¨‹ä¸­ï¼Œé€šå¸¸æœƒæŒ‡å®šæŸå€‹ç¯€é»ä½œç‚ºåœ˜éšŠçš„ä¸­å¤®æœå‹™å™¨ï¼Œå¦‚åœ– 8-2 æ‰€ç¤ºã€‚    åˆ†å¸ƒå¼æ§åˆ¶ç³»çµ±çš„ç‰¹é»æ˜¯ï¼šæäº¤ï¼ˆcommit)æ“ä½œéƒ½æ˜¯åœ¨æœ¬åœ°é€²è¡Œè€Œç„¡é ˆç¶“éæœå‹™å™¨ï¼Œå› æ­¤æäº¤é€Ÿåº¦ä¹Ÿæ›´å¿«ã€‚åªæœ‰ç•¶éœ€è¦å‘å…¶ä»–äººæˆ–é ç«¯æœå‹™å™¨åšæ–‡ä»¶æäº¤æˆ–åŒæ­¥æ™‚ï¼Œæ‰é€šéç¶²è·¯å°‡å…¶æ¨é€åˆ°é ç«¯å€‰åº«æˆ–å¾é ç«¯å€‰åº«æ‹‰å–ã€‚å› æ­¤ï¼Œå³ä½¿åœ¨æ²’æœ‰ç¶²è·¯ç’°å¢ƒçš„æƒ…æ³ä¸‹ï¼Œä½ ä¹Ÿå¯ä»¥éå¸¸æ„‰å¿«åœ°é »ç¹æäº¤æ›´æ–°ã€‚ç•¶æœ‰äº†ç¶²è·¯ç’°å¢ƒçš„æ™‚å€™ï¼Œå†æ¨é€åˆ°é ç«¯çš„åœ˜éšŠä»£ç¢¼å€‰åº«ã€‚ç›®å‰ä¸»æµçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»çµ±æ˜¯ Gitã€‚  å‰é¢æåˆ° GoCD åœ˜éšŠå·¥ç¨‹å¸«åœ¨å°åº¦é‡åˆ°çš„æƒ…æ³ï¼Œå¦‚æœä½¿ç”¨åˆ†å¸ƒå¼ç‰ˆæœ¬ç®¡ç†å€‰åº«ï¼Œå³ä½¿ç¶²è·¯ä¸ç©©å®šï¼Œä¹Ÿå¯ä»¥æ¯”è¼ƒæ–¹ä¾¿åœ°å®Œæˆä»£ç¢¼æ‹‰å–æ“ä½œï¼Œå¦‚åœ– 8-3 æ‰€ç¤ºã€‚  (1) Bob é€šéæ–‘åŠ ç¾…çˆ¾è¾¦å…¬ç¶²è·¯å…‹éš†ï¼ˆclolleï¼‰ä¸€ä»½ Sara çš„ä»£ç¢¼å€‰åº«ï¼ˆsara ä¹Ÿåœ¨æ–‘åŠ å¤š\nç¾…çˆ¾è¾¦å…¬å®¤ï¼‰ã€‚\n(2) Bob å¾èŠåŠ å“¥çš„ä¸­å¤®å€‰åº«ä¸­æ‹‰å–ï¼ˆpullï¼‰èˆ‡æœ¬åœ°å€‰åº«æœ‰å·®ç•°çš„ä»£ç¢¼ã€‚\n(3) Bob ä¿®æ”¹ä»£ç¢¼æ–‡ä»¶ï¼Œäº•æäº¤ï¼ˆcommitï¼‰åˆ°æœ¬åœ°å€‰åº«ï¼Œç”¢ç”Ÿä¸€å€‹æ–°çš„æ–‡ä»¶ç‰ˆæœ¬ã€‚\n(4) Bob å°‡é€™å€‹æ–°çš„ç‰ˆæœ¬æ¨é€ï¼ˆpushï¼‰è‡³ä¸­å¤®å€‰åº«ã€‚\n(5) Sara å³å¯å¾ä¸­å¤®å€‰åº«æ‹‰å–ï¼ˆpullï¼‰æ‰€æœ‰çš„å·®ç•°ä»£ç¢¼ã€‚    8.1.3 ç‰ˆæœ¬æ§åˆ¶ç³»çµ±ä¸­çš„åŸºæœ¬æ¦‚å¿µ  ç‰ˆæœ¬æ§åˆ¶ç³»çµ±è¦è§£æ±ºçš„æ ¸å¿ƒå•é¡Œæ˜¯å¤šäººå”ä½œéç¨‹ä¸­çš„æ–‡ä»¶ç‰ˆæœ¬ç®¡ç†å•é¡Œã€‚ç›®å‰æ‰€æœ‰çš„ç‰ˆæœ¬æ§åˆ¶ç³»çµ±ä¸­éƒ½æœ‰å¹¾å€‹ç›¸ä¼¼çš„æ¦‚å¿µï¼Œç”¨æ–¼å”èª¿å¤šäººå”ä½œã€‚åœ¨å…·é«”è¨è«–å¤šäººå”ä½œæ¨¡å¼ä¹‹å‰ï¼Œå› çˆ²æœ‰å¤šç¨®ç‰ˆæœ¬æ§åˆ¶ç³»çµ±ï¼Œæ‰€ä»¥æœ‰å¿…è¦å°é€™äº›æ¦‚å¿µé€²è¡Œçµ±ä¸€å®šç¾©ï¼Œä»¥æ–¹ä¾¿å¾ŒçºŒçš„è¨è«–ã€‚   ä»£ç¢¼å€‰åº«ï¼ˆcodebaseï¼‰æ˜¯æŒ‡ä¸€å€‹åŒ…å«ä¸€çµ„æ–‡ä»¶æ‰€æœ‰æ­·å²ä¿®æ”¹ä¿¡æ¯ã€çš„é‚„è¼¯å–®ä½ï¼Œé€šå¸¸ç”¨æ–¼ä¿å­˜æœ‰é—œä¸€å€‹è»Ÿé«”ç”¢å“æˆ–æŸä¸€çµ„ä»¶çš„æ‰€æœ‰æ–‡ä»¶ä¿¡æ¯ç´€éŒ„ã€‚  åˆ†æ”¯ï¼ˆbranchï¼‰æ˜¯æŒ‡å°é¸å®šçš„ä»£ç¢¼åŸºç·šå‰µå»ºä¸€å€‹å‰¯æœ¬ã€‚äººå€‘å¯ä»¥å°é€™å€‹å‰¯æœ¬ä¸­çš„æ–‡ä»¶é€²è¡Œæ“ä½œï¼Œè€Œé€™äº›æ“ä½œèˆ‡åŸæœ‰ä»£ç¢¼åŸºç·šçš„æ–‡ä»¶æ“ä½œæ˜¯äº’ä¸å½±éŸ¿çš„ã€‚  ä¸»å¹¹ï¼ˆtrunk/masterï¼‰æ˜¯ä¸€ä»¤å…·æœ‰ç‰¹æ®Šæ„ç¾©çš„åˆ†æ”¯ï¼ˆbranch)ï¼Œé€šå¸¸åœ¨å‰µå»ºä»£ç¢¼å€‰åº«æ™‚å³ç”±ç‰ˆæœ¬æ§åˆ¶ç³»çµ±é»˜èªå‰µå»ºï¼Œæ¯å€‹ä»£ç¢¼å€‰åº«æœ‰ä¸”åƒ…æœ‰ä¸€å€‹é€™æ¨£çš„åˆ†æ”¯ã€‚å…¶ç‰¹æ®Šæ„æ–‡åœ¨æ–¼å…¶æ–¼è»Ÿé«”çš„é–‹ç™¼æ´»å‹•å’Œç™¼å¸ƒæ–¹å¼ç·Šå¯†é—œè¯ï¼Œä¾‹å¦‚ï¼Œåœ¨ SVN ä¸­ä»¥\" trunk \"å‘½åçš„åˆ†æ”¯å’Œ Git ä¸­ä»¥\" master \"å‘½åçš„åˆ†æ”¯éƒ½æ˜¯ä¸»å¹¹åˆ†æ”¯ï¼Œæˆ‘å€‘å°‡åœ¨åˆ†æ”¯æ¨¡å¼é€²ä¸€æ­¥è¨è«–å®ƒå€‘çš„ç‰¹æ®Šæ„ç¾©ã€‚  ç‰ˆæœ¬è™Ÿï¼ˆrevisionï¼‰å°æ‡‰åœ¨æŸå€‹åˆ†æ”¯ï¼ˆ branch ï¼‰ä¸Šçš„ä¸€æ¬¡æäº¤æ“ä½œï¼Œæ˜¯ç³»çµ±ç”¢ç”Ÿçš„ä¸€å€‹ç·¨è™Ÿã€‚é€šéé€™å€‹ç·¨è™Ÿï¼Œä½ å¯ä»¥ç²å–è©²æ¬¡æäº¤æ“ä½œæ™‚çš„æ‰€æœ‰æ–‡ä»¶é¡åƒã€‚åœ¨ SVN ä¸­ï¼Œå®ƒå«ä½œ revisionï¼Œæ˜¯ä¸€ä»¤é€£çºŒè®ŠåŒ–çš„æ­£æ•´æ•¸ã€‚è€Œåœ¨ Git ä¸­ï¼Œå®ƒæ˜¯ä¸€ä»¤ 40 ä½çš„æ•£åˆ—å€¼ï¼Œé¡ä¼¼æ–¼\"734713bco47d87bÂ·Â·â€¦65ae793478c50d3\"é€™æ¨£ä¸€æ®µå­—æ¯èˆ‡æ•¸å­—çš„çµ„åˆã€‚ç‚ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œ Git å¯ä»¥ä½¿ç”¨è©²æ•£åˆ—å€¼çš„å‰å¹¾å€‹å­—ç¬¦ä¾†è¦–åˆ¥æŸæ¬¡æäº¤ï¼Œåªè¦ä½ æä¾›çš„é‚£éƒ¨åˆ† SHA-1 ä¸çŸ­æ–¼ 4 å€‹å­—ç¬¦ï¼Œå¹¶ä¸”æ²’æœ‰æ­§æ–‡å³å¯ã€‚  æ¨™ç±¤ï¼ˆtagï¼‰æ˜¯æŸå€‹åˆ†æ”¯ä¸ŠæŸå€‹å…·ä¼‘ç‰ˆæœ¬è™Ÿçš„ä¸€å€‹åˆ¥åï¼Œä»¥æ–¹ä¾¿è¨˜æ†¶èˆ‡æŸ¥æ‰¾ã€‚ä½ å¯ä»¥é€šéç‰ˆæœ¬æ§åˆ¶å·¥å…·è‡ªèº«æä¾›çš„å‘½ä»¤ä¾†å‰µå»ºé€™å€‹åˆ¥åã€‚  é ­ï¼ˆheadï¼‰æ˜¯æŒ‡æŸå€‹åˆ†æ”¯ä¸Šçš„æœ€æ–°ä¸€æ¬¡æäº¤å°æ‡‰çš„ç‰ˆæœ¬è™Ÿã€‚  åˆä½µï¼ˆmergeï¼‰æ˜¯æŒ‡å°‡ä¸€ä»¤åˆ†æ”¯ä¸Šçš„æ‰€æœ‰å…§å®¹èˆ‡æŸå€‹ç›®æ¨™åˆ†æ”¯ä¸Šçš„æ‰€æœ‰å…§å®¹é€²è¡Œåˆå¹¶ï¼Œå¹¶åœ¨è©²ç›®æ¨™åˆ†æ”¯ä¸Šå‰µå»ºä¸€å€‹æ–°ç‰ˆæœ¬è™Ÿã€‚  ä»²çªï¼ˆconflictï¼‰æ˜¯æŒ‡åœ¨åˆä½µæ“ä½œæ™‚ï¼Œå…©å€‹åˆ†æ”¯ä¸Šçš„åŒä¸€å€‹æ–‡ä»¶åœ¨ç›¸åŒä½ç½®ä¸Šå‡ºç¾ä¸ä¸€è‡´çš„å…§å®¹ã€‚é€šå¸¸éœ€è¦äººå·¥ä»‹äººï¼Œç¢ºèªå¦‚ä½•ä¿®æ”¹å¾Œï¼Œæ–¹å¯åˆä½µç›®æ¨™åˆ†æ”¯ã€‚  ä¾æ“šä¸Šé¢çš„å®šç¾©ï¼Œé€šéä¸‹é¢çš„å­—ä¸²è¨˜æ†¶æ–¹å¼å¯ä»¥å”¯ä¸€ç¢ºå®šæŸå€‹ä»£ç¢¼é¡åƒï¼š\n{ä»£ç¢¼å€‰åº«åï½:ï½›åˆ†æ”¯åï½:ï½›ç‰ˆæœ¬è™Ÿï½æˆ–è€…ï½›ä»£ç¢¼å«åº«åï½:ï½›åˆ†æ”¯åï½:ï½›æ¨™ç±¤ï½  8.2 å¸¸è¦‹åˆ†æ”¯é–‹ç™¼æ¨¡å¼  ç›®å‰åŸºæ–¼ç‰ˆæœ¬æ§åˆ¶ç³»çµ±çš„é–‹ç™¼æ¨¡å‹ï¼Œæ ¹æ“šæ–°åŠŸèƒ½é–‹ç™¼ä»¥åŠç‰ˆæœ¬ç™¼å¸ƒæ‰€ç”¨çš„åˆ†æ”¯é€²è¡Œåˆ†æï¼Œä¸»è¦æœ‰ 3 ç¨®ï¼Œå®ƒå€‘åˆ†åˆ¥æ˜¯ï¼š\n(1ï¼‰ä¸»å¹¹é–‹ç™¼ï¼Œä¸»å¹¹ç™¼å¸ƒï¼ˆTrunk-based Development&Release);\n(2ï¼‰ä¸»å¹¹é–‹ç™¼ï¼Œåˆ†æ”¯ç™¼å¸ƒï¼ˆTrunk-based Development&Branch-based Release);\n(3ï¼‰åˆ†æ”¯é–‹ç™¼ï¼Œä¸»å¹¹ç™¼å¸ƒï¼ˆBranch-based Development&Trunk-based Release)ã€‚\nä¸‹é¢æˆ‘å€‘åˆ†åˆ¥ä»‹ç´¹ä¸€ä¸‹å®ƒå€‘å„è‡ªçš„ç‰¹é»ã€‚  8.2.1 ä¸»å¹¹é–‹ç™¼ï¼Œä¸»å¹¹å‹å¸ƒ  é¡§åæ€ç¾©ï¼Œ\"ä¸»å¹¹é–‹ç™¼ï¼Œä¸»å¹¹ç™¼å¸ƒ\"æ˜¯æŒ‡å·¥ç¨‹å¸«å‘ä¸»å¹¹ä¸Šæäº¤ä»£ç¢¼ï¼ˆæˆ–è€…æ¯å€‹åˆ†æ”¯çš„ç”Ÿå‘½å‘¨æœŸå¾ˆçŸ­ï¼Œå¦‚æ•¸å°æ™‚ï¼Œæˆ–å°‘æ–¼ 1 å¤©ï¼‰ï¼Œå¹¶ç”¨ä¸»å¹¹ä»£ç¢¼é€²è¡Œè»Ÿé«”äº¤ä»˜ï¼ˆå¦‚åœ– 8-4 æ‰€ç¤ºï¼‰ã€‚ä¹Ÿå°±æ˜¯èªªï¼Œæ‰€æœ‰æ–°åŠŸèƒ½çš„é–‹ç™¼ï¼Œä»£ç¢¼å‡æäº¤åˆ°ä¸»å¹¹ï¼ˆtrunkï¼‰ä¸Šï¼›ä½†éœ€è¦ç™¼å¸ƒæ–°åŠŸèƒ½æ™‚ï¼Œç›´æ¥å°‡ä¸»å¹¹ä¸Šçš„ä»£ç¢¼éƒ¨ç½²åˆ°ç”Ÿç”¢ç’°å¢ƒä¸Šã€‚    æ ¹æ“šäº¤ä»˜é »ç‡ä¸åŒï¼Œå¯ä»¥åˆ†ç‚ºä½é »äº¤ä»˜å’Œé«˜é »äº¤ä»˜å…©é¡ã€‚ä½é »äº¤ä»˜æ¨¡å‹å¸¸è¦‹æ–¼ä¸€äº›å‘¨æœŸæ¯”è¼ƒé•·çš„å¤§å‹è»Ÿé«”é–‹ç™¼é …ç›®ï¼Œä¹Ÿæ˜¯ä¸€ç¨®æœ€å¤è€çš„è»Ÿé«”é–‹ç™¼æ¨¡å¼ï¼Œç•¶æ™‚çš„ IT è¡Œæ¥­æ˜¯ä»¥æ•¸å¹´æˆ–æ•¸æœˆç‚ºä¸€å€‹äº¤ä»˜å‘¨æœŸã€‚\nåœ¨ä½é »å·¥ä½œæ¨¡å¼ä¸‹ï¼Œå…¶ä¸»å¹¹ä»£ç¢¼ç¸½æ˜¯é•·æ™‚é–“è™•æ–¼ä¸å¯ç”¨ç‹€æ…‹ï¼Œåªæœ‰åœ¨é …ç›®å…§æ‰€æœ‰åŠŸèƒ½çš„ä»£ç¢¼é–‹ç™¼å®Œæˆå¾Œï¼Œæ‰é–‹å§‹é€²è¡Œè»Ÿé«”è¯èª¿å’Œé›†æˆæ¸¬è©¦å·¥ä½œã€‚\nåœ¨é–‹ç™¼æœŸé–“ï¼Œç‰ˆæœ¬æ§åˆ¶ç³»çµ±çš„ä½œç”¨åƒ…åƒ…æ˜¯ç¢ºä¿ä»£ç¢¼ä¸ä¸Ÿå¤±ï¼Œæ˜¯ç´”ç²¹çš„ä»£ç¢¼å‚™ä»½å€‰åº«ã€‚é«˜é »äº¤ä»˜å­é¡å‹æ˜¯æŒ‡ä»£ç¢¼åº«ä¸­çš„ä»£ç¢¼ç™¼å¸ƒé »ç‡è¼ƒé«˜ï¼Œé€šå¸¸æ¯å¤©éƒ½æœƒç™¼å¸ƒä¸€æ¬¡ï¼Œç”šè‡³å¤šæ¬¡ã€‚\né«˜é »äº¤ä»˜å­é¡å‹å¸¸è¦‹æ–¼å…·æœ‰æ¯”è¼ƒå®Œå‚™çš„äº¤ä»˜åŸºç¤è¨­æ–½ï¼ˆè‡ªå‹•åŒ–é…ç½®æ§‹å»ºã€è‡ªå‹•åŒ–æ¸¬è©¦ã€è‡ªå‹•åŒ–é‹ç¶­ã€è‡ªå‹•åŒ–ç›£æ§èˆ‡å ±è­¦ç­‰ï¼‰çš„äº’è¯ç¶²ç”¢å“åœ˜éšŠï¼Œé€šå¸¸ä¹Ÿæœ‰å¿«é€Ÿç¼ºé™·ä¿®å¾©èƒ½åŠ›ï¼Œå°¤å…¶é©ç”¨æ–¼å¾Œå°æœå„ç«¯ç”¢å“å½¢æ…‹ï¼ˆå¦‚ Web ç¶²ç«™æˆ– SaaS è»Ÿé«”çš„å¾Œå°æœå„ï¼‰ã€‚\né€™ç¨®æ¨¡å¼çš„å„ªé»åœ¨æ–¼åˆ†æ”¯æ–¹å¼ç°¡å–®ï¼Œå› æ­¤åˆ†æ”¯ç®¡ç†å·¥ä½œé‡è¼ƒå°‘ï¼ˆå¦‚ä»£ç¢¼åˆå¹¶æˆæœ¬ï¼‰,ä½†ä¹Ÿå­˜åœ¨å¼±é»ã€‚ä¾‹å¦‚ï¼Œé‡å°ä½é »äº¤ä»˜æ¨¡å¼ï¼Œå…¶é …ç›®å¾ŒæœŸçš„ç¼ºé™·ä¿®å¾©éšæ®µï¼Œå¹¶ä¸æ˜¯åœ˜éšŠæ‰€æœ‰äººéƒ½éœ€è¦åšç¼ºé™·ä¿®å¾©ï¼Œæœƒæœ‰ä¸€å®šçš„è³‡æºæµªè²»ã€‚é‡å°é€™ç¨®æƒ…æ³ï¼Œå¾ˆå¤šåœ˜éšŠæœƒé‡†ç”¨å¾ŒçºŒä»‹ç´¹çš„\"ä¸»å¹¹é–‹ç™¼ï¼Œåˆ†æ”¯ç™¼å¸ƒ\"æ¨¡å¼ï¼Œä¸‹é¢æœƒè©³ç´°ä»‹ç´¹ã€‚\né‡å°é«˜é »äº¤ä»˜æ¨¡å¼ï¼Œç”±æ–¼å¤šäººå‘ä¸»å¹¹ä¸Šé »ç¹æäº¤ä»£ç¢¼ï¼Œå…¶ä»£ç¢¼è®Šå‹•éå¸¸å¿«ã€‚å‡å¦‚æŸå€‹é–‹ç™¼äººå“¡æ‹‰å‡ºä¸€å€‹ç§æœ‰é–‹ç™¼åˆ†æ”¯ï¼Œå¹¶åœ¨è©²é–‹ç™¼åˆ†æ”¯ä¸Šé€²è¡Œé–‹ç™¼ï¼Œé–‹ç™¼å®Œæˆå¾Œå†åˆå¹¶å›ä¸»å¹¹ã€‚æ­¤æ™‚ï¼Œä»–åªæœ‰å…©ç¨®å·¥ä½œæ–¹å¼ã€‚ä¸€æ˜¯æ¯å¤©å¾ä¸»å¹¹ä¸Šæ›´æ–°ä»£ç¢¼åˆ°ä»–è‡ªå·±çš„åˆ†æ”¯ä¸Šã€‚æ­¤æ™‚è©²é–‹ç™¼äººå“¡å¾ˆå¯èƒ½æ¯å¤©éœ€è¦ä¸€å…©å€‹å°æ™‚å°‡ä¸»å¹¹ä¸Šçš„ä»£ç¢¼èˆ‡è‡ªå·±åˆ†æ”¯ä¸Šçš„ä»£ç¢¼é€²è¡Œåˆå¹¶ã€‚äºŒæ˜¯ä¸åšæ¯æ—¥æ›´æ–°ï¼Œè€Œæ˜¯ä¸€æ®µæ™‚é–“å¾Œï¼ˆä¾‹å¦‚åœ¨åˆ†æ”¯ä¸Šé–‹ç™¼å®ŒæˆåŠŸèƒ½ï¼‰ä¹‹å¾Œï¼Œå†å‘ä¸»å¹¹åˆå¹¶ã€‚æ­¤æ™‚ï¼Œå¾ˆå¯èƒ½ç”±æ–¼ä¸»å¹¹ä¸Šçš„ä»£ç¢¼è®ŠåŒ–å¤ªå¤§ï¼Œå°è‡´è‡ªå·±é€™å€‹åˆ†æ”¯ä¸Šçš„ä»£ç¢¼å·²ç¶“ç„¡æ³•å†åˆå¹¶å›å»äº†ã€‚  ç„¡æ³•å®Œæˆçš„\"åˆå¹¶ä»»å‹™\":  2011 å¹´ï¼Œç™¾å§“ç¶²ï¼ˆä¸€ä»Šç”Ÿæ´»åˆ†é¡ç¶²ç«™ï¼‰çš„ç ”å‹åœ˜éšŠåªæœ‰ 12 åå·¥ç¨‹å¸«ã€‚ä»–å€‘ä½¿ç”¨é«˜é »äº¤ä»˜æ¨¡å¼ï¼Œæ¯å¤©æ—©ä¸Š 7 é»åšä¸€æ¬¡ç”Ÿç”¢ç’°å¢ƒç™¼å¸ƒã€‚ç‚ºäº†å°æŸå€‹é‡è¦æ¨¡å¡Šè¿¸è¡Œé‡å¤§é‡æ§‹ï¼Œå…¶æŠ€æœ¨è² è²¬äººæ›¾ç¶“å‰µå»ºäº†ä¸€å€‹å°ˆæœ‰åˆ†æ”¯ã€‚ç„¶è€Œï¼Œä¸€å‘¨ä»¥å¾Œï¼Œä»–ä¸å¾—ä¸å®£å¸ƒæ”¾æ£„è©²åˆ†æ”¯çš„æ‰€æœ‰ä»£ç¢¼ï¼Œå› ç‚ºå…¶ä»–å·¥ç¨‹å¸«åœ¨ä¸»å¹¹ä¸Šå·±ç¶“åšäº†å¤ªå¤šçš„æ”¹å‹•ï¼Œå°ˆæœ‰åˆ†æ”¯å·²ç¶“ç„¡æ³•åˆå¹¶å›ä¸»å¹¹ã€‚  \"æœªé–‹ç™¼å®Œæˆçš„åŠŸèƒ½ä»£ç¢¼ä¸èƒ½å¸¶å…¥å°‡è¦ç™¼å¸ƒçš„ç‰ˆæœ¬è£¡\"æ›¾è¢«èªç‚ºæ˜¯ä¸€å’Œæœ€ä½³è»Ÿé«”è³ªé‡ç®¡ç†å¯¦è¸ã€‚ç„¶è€Œï¼Œåœ¨é€™ç¨®é«˜é »äº¤ä»˜æ¨¡å¼ä¸‹ï¼Œå¾ˆé›£å†éµå®ˆé€™ä¸€å¯¦è¸ã€‚ç›¸åï¼Œåº•è©²å…è¨±æäº¤æœªå®ŒæˆåŠŸèƒ½çš„ä»£ç¢¼ï¼Œå‰ææ˜¯ä¸å½±éŸ¿ç”¨æˆ¶çš„æ­£å¸¸ä½¿ç”¨å’Œç™¼å¸ƒã€‚ç‚ºäº†ä½¿æœªé–‹ç™¼å®Œæˆçš„åŠŸèƒ½ä¸å½±éŸ¿ç™¼å¸ƒè³ªé‡ï¼Œå¯ä»¥ä½¿ç”¨ä¸€äº›ç‰¹æ®ŠæŠ€è¡“ç®¡ç†æ‰‹æ®µï¼ˆå¦‚é–‹ç™¼æŠ€è¡“æˆ–æŠ½è±¡åˆ†æ”¯æ–¹æ³•ç­‰ï¼‰ä¾†è™•ç†é€™é¡å•é¡Œï¼Œè‡ªç„¶ï¼Œé€™äº›æ‰‹æ®µä¹Ÿæœƒåºç”Ÿä¸€å®šçš„ç®¡ç†é–‹éŠ·ã€‚è©³ç´°æ–¹æ³•åƒè¦‹ç¬¬ 12 ç« ã€‚èˆ‡æ­¤åŒæ™‚ï¼Œé«˜é »äº¤ä»˜æ¨¡å¼ä¹Ÿè¦æ±‚è³ªé‡ä¿å¾æ´»å‹•èƒ½å¤ åšåˆ°æ—¢å¿«é€Ÿåˆå…¨é¢ã€‚  8.2.2 ä¸»å¹¹é–‹ç™¼ï¼Œåˆ†æ”¯ç™¼å¸ƒ    é€™ç¨®é–‹ç™¼æ¨¡å¼æ˜¯æŒ‡(åœ– 8-5)ï¼š   é–‹ç™¼äººå“¡å°‡å¯«å¥½çš„ä»£ç¢¼æäº¤åˆ°ä¸»å¹¹ï¼›  ç•¶æ–°ç‰ˆæœ¬çš„åŠŸèƒ½å…¨éƒ¨é–‹ç™¼å®Œæˆæˆ–è€…å·²ç¶“æ¥è¿‘ç‰ˆæœ¬ç™¼ä½ˆæ™‚é–“é»çš„æ™‚å€™ï¼Œå¾ä¸»å¹¹ä¸Šæ‹‰å‡ºä¸€å€‹æ–°çš„åˆ†æ”¯ï¼›  åœ¨é€™å€‹æ–°çš„åˆ†æ”¯ä¸Šé€²è¡Œé›†æˆæ¸¬è©¦ï¼Œä¸¦ä¿®å¾©ç¼ºé™·ï¼Œé€²è¡Œç‰ˆæœ¬è³ªé‡æ‰“ç£¨ã€‚ç•¶è³ªé‡é”æ¨™å¾Œï¼Œå†å°å¤–ç™¼å¸ƒè©²ç‰ˆæœ¬ã€‚  å…¶ç‰¹é»å¦‚ä¸‹ï¼š   ä¸»å¹¹ä»£ç¢¼æäº¤æ´»å‹•é »ç¹ï¼Œå°ä¿éšœä¸»å¹¹ä»£ç¢¼è³ªé‡æœ‰è¼ƒå¤§çš„æŒ‘æˆ°ï¼›  åˆ†æ”¯åªä¿®å¾©ç¼ºé™·ï¼Œä¸å¢åŠ æ–°åŠŸèƒ½ï¼›  æ–°ç‰ˆæœ¬ç™¼å¸ƒå¾Œï¼Œå¦‚æœç™¼ç¾åš´é‡ç¼ºé™·ï¼Œè€Œä¸”å¿…é ˆç«‹å³ä¿®å¾©çš„è©±ï¼Œåªè¦åœ¨è©²ç‰ˆæœ¬æ‰€å±¬çš„åˆ†æ”¯ä¸Šä¿®å¾©å¾Œï¼Œå†æ¬¡ç™¼å¸ƒè£œä¸ç‰ˆæœ¬ï¼Œç„¶å¾Œå°‡åˆ†æ”¯ä¸Šçš„ä¿®æ”¹åˆä½µå›ä¸»å¹¹å³å¯ã€‚ä¹Ÿå¯ä»¥åœ¨ä¸»å¹¹ä¸Šä¿®å¾©ç¼ºé™·ï¼Œç„¶å¾Œå°‡é‡å°è©²ç¼ºé™·çš„ä¿®å¾©ä»£ç¢¼æŒ‘å‡ºä¾†ï¼ˆ cherry-pick ï¼‰åˆäº•åˆ°è©²ç¼ºé™·æ‰€åœ¨çš„åˆ†æ”¯ä¸Šã€‚Facebook çš„ç§»å‹•ç«¯ç”¢å“é–‹ç™¼æµç¨‹å°±ä½¿ç”¨å¾Œé¢é€™ç¨®æ–¹å¼ã€‚  é€šå¸¸ï¼Œç™¼å¸ƒåˆ†æ”¯çš„ç”Ÿå‘½é€±æœŸä¸æ‡‰è©²æŒçºŒæ™‚Â·é–“éé•·ï¼Œä¸€æ®µæ™‚é–“å¾Œæ‡‰åŸ çµ‚æ­¢è©²åˆ†æ”¯ä¸Šçš„ä»»ä½•æ“ä½œæ´»å‹•ï¼Œä¾‹å¦‚ï¼Œåœ– 8-6 ä¸­ Vl.01 ç™¼ä½ˆé»ä¹‹å¾Œï¼Œ Vl.0 åˆ†æ”¯æ‡‰è©²çµæŸã€‚\nåœ¨\"ä¸»å¹¹é–‹ç™¼ã€åˆ†æ”¯ç™¼å¸ƒ\"æ¨¡å¼ä¸‹ï¼Œå¾æ‹‰å‡ºç™¼å¸ƒåˆ†æ”¯é–‹å§‹ï¼Œåˆ°åˆ†æ”¯ä»£ç¢¼é”åˆ°å¯äº¤ä»˜ç‹€æ…‹çš„æ™‚é–“é€±æœŸå¯ä»¥ä½œç‚ºè©•ä¼°ä¸»å¹¹ä»£ç¢¼è³ªé‡çš„æŒ‡ç¤ºå™¨ï¼Œæˆ‘å€‘ç¨±ä¹‹ç‚º\"è³ªé‡æ‰“ç£¨é€±æœŸï¼ˆ Branch Stabilization Time ï¼‰\"ã€‚æ‰“ç£¨é€±æœŸè¶ŠçŸ­ï¼Œèªªæ˜ä¸»å¹¹ä»£ç¢¼è³ªé‡è¶Šå¥½ã€‚ç•¶è³ªé‡æ‰“ç£¨é€±æœŸæ¥µçŸ­æ™‚ï¼Œå°±å¯ä»¥è½‰æ›åˆ°é«˜é »çš„\"ä¸»å¹¹é–‹ç™¼ï¼Œä¸»ä¹¾é«®å¸ƒ\"æ¨¡å¼ã€‚ç•¶ç„¶ï¼Œåšåˆ°é€™ä¸€é»ä¸¦ä¸å®¹æ˜“ï¼Œéœ€è¦çµåˆæœ¬æ›¸å…¶ä»–éƒ¨åˆ†æ‰€æè¿°çš„åŸå‰‡ã€æ–¹æ³•èˆ‡å¯¦è¸ï¼Œæ–¹èƒ½æ¸¸åˆƒæœ‰é¤˜ã€‚  è©²æ¨¡å¼çš„å„ªå‹¢åœ¨æ–¼ï¼š   èˆ‡å°‡è¦ç™¼å¸ƒçš„æ–°åŠŸèƒ½ç„¡é—œçš„äººå“¡å¯ä»¥æŒçºŒå·¥ä½œåœ¨é–‹ç™¼ä¸»å¹¹ä¸Šï¼Œä¸å—ç‰ˆæœ¬ç™¼å¸ƒçš„å½±éŸ¿ï¼›  æ–°ç™¼å¸ƒçš„ç‰ˆæœ¬å‡ºç¾ç¼ºé™·å¾Œï¼Œå¯ä»¥ç›´æ¥åœ¨å…¶è‡ªå·±çš„ç‰ˆæœ¬ç™¼å¸ƒåˆ†æ”¯ä¸Šé€²è¡Œä¿®å¾©ï¼Œç°¡å–®ä¾¿æ·ã€‚å³ä½¿ç•¶å‰é–‹ç™¼ä¸»å¹¹ä¸Šçš„ä»£ç¢¼å·²ç¶“ç™¼ç”Ÿäº†è¼ƒå¤§çš„è®ŠåŒ–ï¼Œè©²åˆ†æ”¯ä¹Ÿä¸æœƒå—åˆ°å½±éŸ¿ã€‚  å…¶ä¸è¶³åœ¨æ–¼ï¼š   ä¸»å¹¹ä¸Šçš„ä»£ç¢¼é€šå¸¸åªèƒ½é‡å°ä¸‹ä¸€å€‹æ–°ç™¼å¸ƒç‰ˆæœ¬çš„åŠŸèƒ½é–‹ç™¼ã€‚åªè¦æ–°ç™¼å¸ƒç‰ˆæœ¬çš„ä»»ä½•åŠŸèƒ½åœ¨ä¸»å¹¹ä¸Šé‚„æ²’æœ‰é–‹ç™¼å®Œæˆï¼Œå°±ä¸èƒ½å‰µå»ºç‰ˆæœ¬ç™¼å¸ƒåˆ†æ”¯ï¼Œå¦å‰‡å¾ˆæœ‰å¯èƒ½å½±éŸ¿ä¸‹ä¸€å€‹ç™¼å¸ƒçš„é–‹ç™¼è¨ˆåŠƒï¼Œé–‹æºé …ç›®åœ¨ç™¼ä½ˆæ™‚é–“é»ä»¥åŠç‰¹æ€§åŠŸèƒ½æ–¹é¢çš„å£“åŠ›å°ä¸€äº›ï¼Œå› æ­¤å¸¸å¸¸æ¡ç”¨é€™ç¨®åˆ†æ”¯æ–¹å¼ï¼›  ä½¿ç”¨é€™ç¨®é–‹ç™¼æ¨¡å¼ï¼Œå°ç™¼å¸ƒåˆ†æ”¯çš„æ•¸é‡ä¸åŠ ç´„æŸï¼Œä¸¦ä¸”åˆ†æ”¯é€±æœŸè¼ƒé•·ï¼Œå¾ˆå®¹æ˜“å‡ºç¾\"åˆ†æ”¯åœ°ç„\"å‚¾å‘ï¼Œé€™ç¨®å‚¾å‘å¸¸è¦‹æ–¼\"ç³»åˆ—åŒ–ç”¢å“ç°‡ï¼‹å€‹æ€§åŒ–å®šåˆ¶\"çš„é …ç›®ï¼Œä¾‹å¦‚æŸç¡¬ä»¶è¨­å‚™çš„è»Ÿä»¶ç”¢å“ç ”ç™¼çš„åˆ†æ”¯æ¨¡å¼ï¼Œå¦‚åœ– 8-6 æ‰€ç¤ºã€‚    è©²ç¡¬ä»¶è¨­å‚™æœ€åˆåªæœ‰ä¸€ç¨®é¡å‹ï¼Œå…¶é¡åˆ¥å®šç¾©ç‚º A ï¼Œå‹è™Ÿæ˜¯ x ï¼Œå°æ‡‰è»Ÿä»¶çš„ç™¼å¸ƒç‰ˆæœ¬ç‚º Ax1.0 ç™¼å¸ƒä»¥å¾Œï¼Œå®¢æˆ¶æå‡ºäº†åŒé¡åˆ¥ä¸åŒå‹è™Ÿçš„ç·Šæ€¥éœ€æ±‚ï¼Œå…¬å¸ç‚ºäº†èƒ½å¤ å¿«é€ŸéŸ¿æ‡‰å®¢æˆ¶éœ€æ±‚ï¼Œå¾ Ax l.0 çš„ç”¢å“åˆ†æ”¯ä¸Šåˆæ‹‰å‡ºä¸€å€‹ç”¢å“åˆ†æ”¯ï¼Œåç‚º Ay åˆ†æ”¯ï¼Œå…¶ç™¼å¸ƒç‰ˆæœ¬ç‚º Ay2.0 ã€‚ç„¶å¾Œåˆåœ¨ Ay çš„åŸºç¤ä¸Šé–‹ç™¼äº†ä¸€å€‹å¢å¼·ç‰ˆ Azï¼Œå°æ‡‰çš„åˆ†æ”¯åŠæ™‚é–“é»å¦‚åœ– 8-6 æ‰€ç¤ºã€‚éš¨å¾Œåœ¨ Axl.0  ä¸Šç™¼ç¾äº†ä¸€å€‹åš´é‡ç¼ºé™·ï¼Œéœ€è¦å¢ç™¼ A1.01 è£œä¸ç‰ˆæœ¬ã€‚è©²ç¼ºé™·åœ¨ Ay åˆ†æ”¯å’Œ Az åˆ†æ”¯ä¸Šä¹ŸåŒæ™‚å­˜åœ¨ã€‚å› æ­¤å°±è¦å°‡ä¿®å¾©ç¼ºé™·çš„ä»£ç¢¼ç§»æ¤åˆ°ä¸»å¹¹åŠ Ay å’Œ Az å…©å€‹åˆ†æ”¯ã€‚\nè©²å…¬å¸ä»¥é€™ç¨®ç®¡ç†æ¨¡å¼æ”¯æŒäº†æ›´å¤šé¡åˆ¥å’Œå‹è™Ÿçš„ç”¢å“ã€‚å¦‚åœ– 8-6 ä¸­ï¼Œå…¬å¸é–‹ç™¼äº†ç¡¬ä»¶ç”¢å“ Bï¼Œè€Œå…¶è»Ÿä»¶ç‰ˆæœ¬æ˜¯å¾ä¸»å¹¹åˆ†æ”¯ä¸Šæ‹‰å‡ºï¼Œä¸¦å…ˆå¾Œç™¼å¸ƒäº† B1.0 å’Œ B1.01ã€‚å®¢æˆ¶éœ€è¦åœ¨ B é¡å‹ä¸Šä¹Ÿå…·æœ‰ Ay2 å’Œ Az3 ä¸Šçš„éƒ¨åˆ†æ–°åŠŸèƒ½ç‰¹æ€§ï¼Œæ–¼æ˜¯ï¼Œå…¬å¸æ±ºå®šå¾ Ay2.01 å’Œ Az3.0 çš„åˆ†æ”¯ä¸Šç§»æ¤è©²æ–°åŠŸèƒ½çš„ä»£ç¢¼åˆ° B åˆ†æ”¯ä¸Šã€‚  éš¨è‘—ç¡¬ä»¶é¡ åˆ¥å’Œå‹ è™Ÿçš„ä¸æ–·è¡ç”Ÿï¼Œç ”ç™¼åœ˜ éšŠæ•ˆç‡è¶Šä¾†è¶Šå·®ã€‚å¦‚åœ– 8-6 ä¸­çš„è™›ç·šè™•æ‰€ç¤ºï¼Œåœ˜éšŠçµ‚å°‡ç–²æ–¼åœ¨åˆ†æ”¯é–“ç§»æ¤ä»£ç¢¼å’Œæ¸¬è©¦ã€‚é€™èˆ‡ã€Šå¤§è¦æ¨¡æ•æ·é–‹ç™¼å¯¦è¸ï¼šHP LaserJet ç”¢å“ç·šæ•æ·è½‰å‹çš„æˆåŠŸç¶“é©—ã€‹ä¸€æ›¸ä¸­æè¿°çš„ HP æ¿€å…‰æ‰“å°æ©Ÿå›ºä»¶åœ˜éšŠåœ¨ 2008 å¹´çš„ç‹€æ…‹ç›¸ä¼¼ã€‚è©²åœ˜éšŠåƒ…æœ‰ 5% çš„è³‡æºç”¨æ–¼æ–°åŠŸèƒ½çš„é–‹ç™¼ï¼Œè€Œå„åˆ†æ”¯é–“ç§»æ¤ä»£ç¢¼æœƒä½”ç”¨åœ˜éšŠ 25%çš„æ™‚é–“ï¼Œå¦‚åœ– 8-7 æ‰€ç¤ºã€‚  8.2.3 åˆ†æ”¯é–‹ç™¼ï¼Œä¸»å¹¹ç™¼å¸ƒ     é€™ç¨®æ¨¡å¼æ˜¯æŒ‡(åœ– 8-8 ) ï¼š   åœ˜éšŠå¾ä¸»å¹¹ä¸Šæ‹‰å‡ºåˆ†æ”¯ï¼Œä¸¦åœ¨åˆ†æ”¯ä¸Šé–‹ç™¼è»Ÿä»¶æ–°åŠŸèƒ½æˆ–ä¿®å¾©ç¼ºé™·ï¼›  ç•¶æŸå€‹åˆ†æ”¯ï¼ˆæˆ–å¤šå€‹åˆ†æ”¯ï¼‰ä¸Šçš„åŠŸèƒ½é–‹ç™¼å®Œæˆå¾Œè¦å°å¤–ç™¼å¸ƒç‰ˆæœ¬æ™‚ï¼Œæ‰åˆå…¥ä¸»å¹¹ï¼›  é€šå¸¸åœ¨ä¸»å¹¹ä¸Šé€²è¡Œç¼ºé™·ä¿®å¾©ï¼Œè³ªé‡é”æ¨™å¾Œï¼Œå†å°‡ä¸»å¹¹ä¸Šçš„ä»£ç¢¼æ‰“åŒ…ç™¼å¸ƒã€‚  é€™ç¨®æ¨¡å¼çš„å„ªå‹¢åœ¨æ–¼ ï¼š   åœ¨åˆ†æ”¯åˆäº•ä¹‹å‰ï¼Œæ¯å€‹åˆ†æ”¯ä¹‹é–“çš„é–‹ç™¼æ´»å‹•äº’ç›¸ä¸å—å½±éŸ¿ï¼›  åœ˜éšŠå¯ä»¥è‡ªç”±é¸æ“‡ç™¼å¸ƒ i å“ªå€‹åˆ†æ”¯ä¸Šçš„ç‰¹æ€§ï¼›  å¦‚æœæ–°ç‰ˆæœ¬å‡ºç¾ç¼ºé™·ï¼Œå¯ä»¥ç›´æ¥åœ¨ä¸»å¹¹ä¸Šé€²è¡Œä¿®å¾©æˆ–è€…ä½¿ç”¨ hotfix åˆ†æ”¯ä¿®å¾©ï¼Œç°¡å–®ä¾¿æ·ï¼Œç„¡é ˆè€ƒæ…®å…¶ä»–åˆ†æ”¯ã€‚  å®ƒçš„å„ªå‹¢ä¹Ÿæœƒå°è‡´ä¸è‰¯å¾Œæœï¼Œå³ç‚ºäº†åˆ†æ”¯ä¹‹é–“ç›¡é‡å°‘å—å½±éŸ¿ï¼Œé–‹ç™¼äººå“¡é€šå¸¸æœƒæ¸›å°‘å‘\nä¸»å¹¹åˆä½µä»£ç¢¼çš„é »ç‡ï¼Œå¾è€Œæ¨é²äº†ç™¼ç¾å„åˆ†æ”¯ä¸­ä»£ç¢¼è¡çªçš„æ™‚é–“ï¼Œä¸åˆ©æ–¼åŠæ™‚é€²è¡Œä»£ç¢¼é‡\næ§‹ï¼Œå¦‚åœ– 8-9 æ‰€ç¤ºã€‚  è©²ä¸»å¹¹ä¸Šçš„ä»£ç¢¼ä¸­åŸæœ‰ä¸€å€‹æ–¹æ³•ç°½åç‚º handleY(int bï¼‰ã€‚ Alice å’Œ Bob å„è‡ªé ˜å–ä¸€å€‹æ–°åŠŸèƒ½çš„é–‹ç™¼ä»»å‹™ï¼Œä¸¦å‰µå»ºäº†å°æ‡‰çš„ä¸€å€‹åˆ†æ”¯ A å’Œ B ï¼Œè€Œä¸”ï¼Œåœ¨æ–°åŠŸèƒ½é–‹ç™¼å®Œæˆä¹‹å‰ï¼Œå…©äººéƒ½æ²’æœ‰å‘ä¸»å¹¹åˆä½µä»£ç¢¼ã€‚ç‚ºäº†å®Œæˆè‡ªå·±çš„æ–°åŠŸèƒ½ï¼Œ Alice å° handleY æ–¹æ€¯é€²è¡Œäº†ä¿®æ”¹ï¼Œå°‡å…¶ç°½åè®Šæ›´ç‚º handleY(int  ï¼Œ boolean cï¼‰ã€‚åŒæ™‚ï¼Œ Bob åœ¨è‡ªå·±çš„åˆ†æ”¯ä¸Šä¹Ÿä¿®æ”¹äº† handleY(int b) çš„å…§éƒ¨å¯¦ç¾ã€‚ä¸»å¹¹ä¸Šç™¼ç”Ÿäº†å…©æ¬¡ hotfix ï¼Œå…©äººéƒ½å°‡ä¸»å¹¹çš„ä¿®æ”¹åˆå…¥äº†è‡ªå·±çš„åˆ†æ”¯ä¸Šã€‚åœ¨é€™ä¹‹å¾Œ ï¼Œ Bob åˆå¾ handleY(int bï¼‰ ä¸­æŠ½å–äº†ä¸€å€‹æ–¹å‘Šï¼Œ ç°½åç‚º findX(int   aï¼‰ã€‚æ­¤æ™‚ Alice é–‹ç™¼å®Œæˆäº†è‡ªå·±çš„æ–°åŠŸèƒ½ï¼Œå°‡ä»£ç¢¼ï¼ˆå¾ al åˆ° a4 ï¼‰ åˆå…¥ä¸»å¹¹ã€‚ç•¶ Bob æ‰“ç®—æäº¤ ä»£ç¢¼åˆ°ä¸»å¹¹æ™‚ï¼Œä»–éœ€è¦å°‡ Alice çš„ 4 æ¬¡ä»£ç¢¼è®Šæ›´èˆ‡è‡ªå·±çš„ 5 æ¬¡è®Šæ›´åˆä½µåœ¨ä¸€èµ·ã€‚ç”±æ–¼ Alice ä¿®æ”¹è¼ƒå¤§ï¼Œé€™å€‹åˆä½µå¾ˆå¯èƒ½æˆäº†éå¸¸å¤§çš„åŒ…è¢±ã€‚Bob ç™¼ç¾ï¼ŒAlice ä¸ä½†ä¿®æ”¹äº†å¾ˆå¤šæ–‡ä»¶ï¼Œè€Œä¸”å°æ–¹æˆ° handleYï¼ˆï¼‰é€²è¡Œäº†è¼ƒå¤§çš„é‡æ§‹ã€‚ç„¶è€Œï¼Œé€™äº›é‚„åªæ˜¯æ–‡æœ¬ä¸Šçš„è¡çªï¼Œæ¯”è¼ƒå®¹æ˜“ç™¼ç¾å’Œä¿®æ­£ã€‚é¢¨éšªæ›´å¤§çš„å‰‡æ˜¯èªç¾©ä¸Šçš„è¡çªï¼Œå³ç¨‹åºé‹è¡Œæ™‚çš„é‚è¼¯è¡çªã€‚é€™é¡æƒ…æ³çš„ç™¼ç”Ÿæœƒä»¤åœ˜éšŠæˆå“¡é€²è¡Œä»£ç¢¼é‡æ§‹çš„æ„é¡˜å¤§å¤§ä¸‹é™ï¼Œå¾è€Œä»¤ä»£ç¢¼çš„å¯ç¶­è­·æ€§è¶Šä¾†è¶Šç³Ÿç³•ã€‚    ä¸é »ç¹çš„é›†æˆå°è‡´çš„å·¨å‹ä»£ç¢¼åˆä½µ  å¦‚æœåˆ†æ”¯éå¤šï¼Œé‚£éº¼è¡ç”Ÿå‡ºä¾†çš„å•é¡Œæ˜¯ï¼šç•¶æŸå€‹åˆ†æ”¯çš„ç”Ÿå‘½é€±æœŸï¼ˆå³å¾ä¸»å¹¹æ‹‰å‡ºåˆ†æ”¯é‚£ä¸€æ™‚åˆ»è‡³å°‡å…¶å†æ¬¡åˆå…¥ä¸»å¹¹é€™æ®µæ™‚é–“é€±æœŸï¼‰éé•·ï¼Œä»£ç¢¼åˆä½µåŠé©—æ”¶æˆæœ¬æœƒå¿«é€Ÿå¢åŠ ã€‚æˆæœ¬å¢åŠ çš„æ•¸é‡èˆ‡å…¶ç”Ÿå‘½é€±æœŸä¸­åˆå…¥ä¸»å¹¹çš„åˆ†æ”¯æ•¸é‡æˆæ­£æ¯”ã€‚  è‹¥æƒ³æˆåŠŸä½¿ç”¨é€™ç¨®æ¨¡å¼ï¼Œå…¶é—œéµé»åœ¨æ–¼ï¼š   è®“ä¸»å¹¹ç›¡å¯èƒ½ä¸€ç›´ä¿æŒåœ¨å¯ç™¼å¸ƒç‹€æ…‹ï¼›  æ¯å€‹åˆ†æ”¯çš„ç”Ÿå‘½é€±æœŸæ‡‰è©²ç›¡å¯èƒ½çŸ­ï¼š  ä¸»å¹¹ä»£ç¢¼å„˜æ—©èˆ‡åˆ†æ”¯åŒæ­¥ï¼›  ä¸€åˆ‡ä»¥ä¸»å¹¹ä»£ç¢¼ç‚ºæº–ï¼Œç›¡å¯èƒ½ä¸è¦åœ¨å„ç‰¹æ€§åˆ†æ”¯ä¹‹é–“åˆä½µä»£ç¢¼ã€‚  å¦å¤–ï¼Œæ ¹æ“šåˆ†æ”¯çš„å­˜åœ¨å‘¨æœŸå’Œç›®çš„ï¼Œ\"åˆ†æ”¯é–‹ç™¼ï¼Œä¸»ä¹¾é«®å¸ƒ\"æ¨¡å¼é‚„å¯ä»¥é€²ä¸€æ­¥åˆ†ç‚ºå…©ç¨®å­é¡å‹ï¼Œå®ƒå€‘åˆ†åˆ¥æ˜¯ç‰¹æ€§åˆ†æ”¯æ¨¡å¼å’Œåœ˜éšŠåˆ†æ”¯æ¨¡å¼ã€‚   ç‰¹æ€§åˆ†æ”¯æ¨¡å¼åœ¨é–‹ç™¼éç¨‹ä¸­ï¼Œå…è¨±å¤šå€‹é–‹ç™¼åˆ†æ”¯åŒæ™‚å­˜åœ¨ï¼Œä¸”æ¯å€‹åˆ†æ”¯å°æ‡‰ä¸€å€‹åŠŸèƒ½ç‰¹æ€§çš„é–‹ç™¼å·¥ä½œã€‚ç•¶è©²ç‰¹æ€§é–‹ç™¼å®Œæˆå¾Œï¼Œç«‹å³åˆå…¥ä¸»å¹¹ï¼Œå…¶ä»–å°šæœªåˆå…¥ä¸»å¹¹çš„ç‰¹æ€§åˆ†æ”¯éœ€è¦å¾ä¸»å¹¹æ‹‰å–ä¸»å¹¹ä»£ç¢¼ï¼Œèˆ‡è‡ªå·±åˆ†æ”¯ä¸Šçš„ä»£ç¢¼é€²è¡Œåˆä½µå¾Œï¼Œæ‰èƒ½å†åˆå›ä¸»å¹¹ã€‚é€™ç¨®æ¨¡å¼ç‚ºç‰¹æ€§åˆ†æ”¯æ¨¡å¼ï¼Œå¦‚åœ– 8-1O æ‰€ç¤ºã€‚    è©²æ¨¡å¼çš„ç›®çš„æ˜¯ï¼š  è®“åœ˜éšŠæ›´å®¹æ˜“åœ¨\"ç‰¹æ€§\"é€™å€‹å±¤æ¬¡ä¸Šä¸¦è¡Œå·¥ä½œï¼ŒåŒæ™‚ä¿æŒä¸»å¹¹çš„ç©©å®šå¯ç™¼å¸ƒç‹€æ…‹ã€‚å…¶å„ªå‹¢åœ¨æ–¼æ¯æ¬¡ç™¼å¸ƒçš„å…§å®¹èª¿æ•´èµ·ä¾†æ¯”è¼ƒå®¹æ˜“ã€‚å‡å¦‚æŸå€‹æ–°åŠŸèƒ½æˆ–è€…ç¼ºé™·åœ¨ç‰ˆæœ¬ç™¼ä½ˆæ™‚é–“é»ä¹‹å‰ç„¡æ¡‚å®Œæˆï¼Œå‰‡ä¸å¿…åˆå…¥ä¸»å¹¹ä¸­ï¼Œä¹Ÿä¸æœƒå½±éŸ¿å…¶ä»–åŠŸèƒ½çš„ç™¼ä½ˆæ™‚é–“é»ã€‚  ä½†é€™ç¨®æ¨¡å¼ä¹Ÿæœ‰ä¸è¶³ï¼šå¦‚æœç‰¹æ€§åˆ†æ”¯éå¤šï¼Œæœƒå¸¶ä¾†æ¯”è¼ƒå¤šçš„åˆä½µæˆæœ¬ã€‚ä¾‹å¦‚ï¼Œæ¯ç•¶æŸå€‹ç‰¹æ€§åˆ†æ”¯é–‹ç™¼å®Œæˆæ‰“ç®—åˆå…¥ä¸»ä¹¾æ™‚ï¼Œéƒ½éœ€è¦èˆ‡ä¸»å¹¹çš„ä»£ç¢¼åˆäº•ï¼Œä¸¦é€²è¡Œè³ªé‡é©—è­‰ã€‚ä¸€æ—¦ä¸»å¹¹ä»£ç¢¼çš„è³ªé‡é©—è­‰é€šéï¼Œå…¶ä»–åˆ†æ”¯æ­¤æ™‚éƒ½æ‡‰è©²å¾ä¸»å¹¹ä¸Šæ‹‰å–æœ€è¿‘çš„é€šéè³ªé‡é©—è­‰çš„æ–°ä»£ç¢¼ã€‚å¦å‰‡ï¼Œå¦‚æœåœ¨ç‰¹æ€§é–‹ç™¼å®Œæˆå¾Œå†èˆ‡ä¸»å¹¹åˆäº•ï¼Œé‚£éº¼é€™ç¨®ä¸€æ¬¡æ€§åˆä½µæœƒå¸¶ä¾†è¼ƒå¤§çš„å·¥ä½œé‡å’Œè³ªé‡é©—è­‰å·¥ä½œã€‚å¦‚åœ– 8-10 æ‰€ç¤ºï¼Œç‰¹æ€§ 2 åˆ†æ”¯éœ€è¦åˆä½µç‰¹æ€§ 1ã€3 å’Œ 4 çš„ä»£ç¢¼ã€‚  å‡å¦‚æœ‰å¤šå€‹ç‰¹æ€§åŒæ™‚é–‹ç™¼å®Œæˆï¼Œæ€éº¼è¾¦ï¼Ÿä¸‹é¢æ˜¯å…©ç¨®æ¥µç«¯çš„åšæ³•ã€‚   æ‰€æœ‰å·²å®Œæˆçš„ç‰¹æ€§åˆ†æ”¯ä¸€åŒå‘ä¸»å¹¹åˆäº•ï¼Œç„¶å¾Œå†å…±åŒè¨­æ€¯è®“ä¸»å¹¹ä»£ç¢¼é”åˆ°å¯äº¤ä»˜ç‹€æ…‹ã€‚é€™ç¨®æ–¹å¼é€šå¸¸æœƒè¢«ç‰¹æ€§åœ˜éšŠæ’æ–¥ã€‚å› ç‚ºå…±åŒåˆä½µå¾Œï¼Œå¤šæ–¹ä»£ç¢¼äº¤ç¹”åœ¨ä¸€èµ·ï¼Œå‡ºç¾çš„ç¼ºé™·å¯èƒ½å¾ˆé›£å¿«é€Ÿå®šä½å’Œå¿«é€Ÿä¿®å¾©ã€‚  æ‰€æœ‰å·²å®Œæˆçš„ç‰¹æ€§åˆ†æ”¯æ’æˆéšŠåˆ—ï¼Œä»¥é †åºæ–¹å¼åˆå…¥ä¸»å¹¹ã€‚æ¯å€‹ç‰¹æ€§åˆ†æ”¯å‘ä¸»å¹¹åˆäººä»£ç¢¼å¾Œï¼Œå¿…é ˆä½¿ä¸»å¹¹ä¸Šçš„ä»£ç¢¼é”åˆ°å¯äº¤ä»˜ç‹€æ…‹å¾Œï¼Œä¸‹ä¸€å€‹ç‰¹æ€§åˆ†æ”¯æ‰å¯ä»¥åˆå…¥ã€‚é€™ç¨®æ–¹å¼é€šå¸¸æ˜¯ç‰¹æ€§åˆ†æ”¯çš„å¸¸è¦‹åšæ°ˆï¼Œä¹Ÿæ˜¯ç‰¹æ€§åˆ†æ”¯çš„å„ªå‹¢æ‰€åœ¨ã€‚ä½†æ‰€å¸¶ä¾†çš„å•é¡Œæ˜¯ï¼Œå¤šå€‹ç‰¹æ€§åˆ†æ”¯æŒ‰æ’éšŠé †åºé€²è¡Œåˆäº•ï¼Œæœƒå°è‡´æ’åœ¨éšŠå°¾çš„ç‰¹æ€§åˆ†æ”¯ç­‰å¾…è¼ƒé•·çš„æ™‚é–“ ã€‚  å¦‚æœæƒ³è®“ç‰¹æ€§åˆ†æ”¯æ–¹å¼æ›´å¥½åœ°å·¥ä½œï¼Œéœ€è¦åšå¥½ä¸‹é¢çš„ç®¡ç†ã€‚   æ¯å€‹ç‰¹æ€§åˆ†æ”¯çš„ç”Ÿå‘½é€±æœŸéƒ½æ‡‰è©²å¾ˆçŸ­ï¼Œåˆ†æ”¯ä¸Šçš„é–‹ç™¼å’Œæ¸¬è©¦å·¥ä½œç›¡é‡åœ¨ 3 å¤©å…§å®Œæˆã€‚é€™è¦æ±‚ç›¡å¯èƒ½å°‡\"ç‰¹æ€§\"æ‹†åˆ†æˆå°éœ€æ±‚ã€‚é—œæ–¼éœ€æ±‚æ‹†åˆ†çš„æ–¹æ€¯ï¼Œåƒè¦‹ç¬¬ 6 ç« ã€‚  é–‹ç™¼äººå“¡æ¯å¤©å¾ä¸»å¹¹ä¸Šæ‹‰å–æœ€æ–°çš„å¯äº¤ä»˜ä»£ç¢¼ï¼Œèˆ‡è‡ªå·±çš„åˆ†æ”¯åˆäº•ã€‚  ä¸è¦å¾å…¶ä»–ç‰¹æ€§åˆ†æ”¯ä¸Šæ‹‰å–ä»£ç¢¼ã€‚    2.åœ˜éšŠåˆ†æ”¯æ¨¡å¼  åœ˜éšŠåˆ†æ”¯å¯ä»¥çœ‹ä½œæ˜¯ç‰¹æ€§åˆ†æ”¯çš„ä¸€ç¨®ç‰¹æ®Šæƒ…æ³ã€‚ä¹Ÿå°±æ˜¯èªªï¼Œä¸€çµ„äººä¸€èµ·åœ¨åŒä¸€å€‹åˆ†æ”¯ä¸Šé€²è¡Œé–‹ç™¼å·¥ä½œï¼Œè€Œä¸”è©²åˆ†æ”¯ä¸Šé€šå¸¸åŒ…æ‹¬ä¸€çµ„ç›¸è¿‘åŠç›¸é—œçš„ç‰¹æ€§é›†åˆçš„é–‹ç™¼ã€‚ç”±æ–¼æ˜¯ä¸€çµ„ç‰¹æ€§é›†åˆçš„é–‹ç™¼ï¼Œå› æ­¤å…¶åˆ†æ”¯å­˜çºŒæ™‚é–“æ¯”ç‰¹æ€§åˆ†æ”¯çš„å­˜çºŒæ™‚é–“é•·ã€‚  é€™ç¨®åˆ†æ”¯æ¨¡å¼é€šå¸¸å‡ºç¾æ–¼è¦æ¨¡è¼ƒå¤§çš„åœ˜éšŠï¼ˆ 40 äººä»¥ä¸Šï¼‰å…±åŒé–‹ç™¼åŒä¸€æ¬¾ç”¢å“ï¼Œåœ˜éšŠè¢«åˆ†æˆå¤šå€‹çµ„ï¼Œæ¯çµ„é–‹ç™¼ä¸åŒçš„ç³»çµ±çµ„ä»¶ã€‚åªæœ‰ç•¶ä¸€ç³»åˆ—åŠŸèƒ½ç‰¹æ€§é–‹ç™¼å®Œæˆå¾Œï¼Œæ‰å°å¤–ç™¼å¸ƒæ–°çš„è»Ÿä»¶ç‰ˆæœ¬ï¼Œå¾ˆå®¹æ˜“æˆç‚ºå…¸å‹çš„ç€‘å¸ƒé–‹ç™¼æµç¨‹ï¼Œå¦‚åœ– 8-12 æ‰€ç¤ºã€‚    åœ˜éšŠåˆ†æ”¯æ¨¡å¼åœ¨é€šä¿¡å…¬å¸çš„ç”¢å“ç ”ç™¼æˆ–å¤§å‹å®¢æˆ¶ç«¯è»Ÿä»¶ç”¢å“ç ”ç™¼ä¸­æ¯”è¼ƒå¸¸è¦‹ï¼Œä¾‹å¦‚ç¬¬ 14 ç« çš„æ¡ˆä¾‹ä¸­ï¼Œåœ˜éšŠç ”ç™¼ç®¡ç†æ¨¡å¼æ”¹é€²ä¹‹å‰ï¼Œå°±ä½¿ç”¨é€™ç¨®é–‹ç™¼æ¨¡å¼ã€‚æˆåŠŸæ‡‰ç”¨é€™ç¨®æ¨¡å¼çš„é—œéµåœ¨æ–¼ï¼š   æ¯å€‹åœ˜éšŠå„˜æ—©å‘ä¸»å¹¹åˆå…¥é«˜è³ªé‡çš„ä»£ç¢¼ï¼Œå³ä½¿ä¸é¦¬ä¸Šç™¼å¸ƒï¼š  å‘ä¸»å¹¹åˆå…¥ä»£ç¢¼å¾Œï¼Œç›¡å¿«ä½¿å…¶é”åˆ°å¯äº¤ä»˜ç‹€æ…‹ï¼š  å…¶ä»–åœ˜éšŠå„˜æ—©å¾ä¸»å¹¹æ‹‰å–å¯äº¤ä»˜ç‹€æ…‹çš„ä»£ç¢¼ï¼Œèˆ‡è‡ªå·±åˆ†æ”¯ä¸Šçš„ä»£ç¢¼åˆäº•ã€‚  åˆ†æ”¯ç­–ç•¥  8.3 åˆ†æ”¯æ¨¡å¼çš„æ¼”åŒ–  8.3.1 ä¸‰é§•é¦¬è»Šåˆ†æ”¯æ¨¡å¼  Chrome ç€è¦½å™¨æ–¼ 2010 å¹´ä½¿ç”¨æ­¤åˆ†æ”¯æ¨¡å¼    é–‹ç™¼ Branch æ“æœ‰è¶³å¤ å¤šçš„æ–°åŠŸèƒ½ (æˆ–è€…æº–å‚™ Release æ™‚), å°‡è©² Branch ä½¿ç”¨   Cherry Pick  æ’¿åˆ° Pre-Release åˆ†æ”¯ä¸Š  Pre-Release   BugFix  Document  Deployment  Feature  Pre-Release é”åˆ° Alpha ç­‰ç´šå¾Œ â†’ ç™¼å¸ƒ Alpha ç‰ˆæœ¬ (çµ¦äºˆæ¥µå°‘éƒ¨åˆ†ä½¿ç”¨è€…å…ˆè¡Œé«”é©—) â†’ Beta ç‰ˆæœ¬ (çµ¦äºˆå˜—é®®ç”¨æˆ¶é€²è¡Œé«”é©—) â†’ æ”¶é›†å­˜åœ¨çš„è³ªé‡èˆ‡ Bug å•é¡Œèˆ‡ä¿®æ­£ â†’ Beta ç‰ˆæœ¬ç©©å®š â†’ åˆä½µè‡³ Release åˆ†æ”¯ â†’ RC ç‰ˆæœ¬ â†’ RC ç‰ˆæœ¬ç©©å®š â†’ æ­£å¼ç‰ˆæœ¬  8.3.2 GitFlow    Master  (Main) åˆ†æ”¯æ˜¯æ­£å¼ç‰ˆæœ¬çš„ç™¼å¸ƒåˆ†æ”¯   Release  åˆ†æ”¯ç”¨æ–¼å“è³ªæ‰“ç£¨çš„é ç™¼å¸ƒåˆ†æ”¯ï¼Œå¦‚æœ Release çš„å“è³ªé”æ¨™ï¼Œå°‡ Release åˆä½µè‡³ Main åˆ†æ”¯èˆ‡ Development åˆ†æ”¯   Development  åˆ†æ”¯ç‚º Feature æ–°åŠŸèƒ½æ•´åˆçš„åˆ†æ”¯   Feature  åˆ†æ”¯æ˜¯ç‚ºäº†æ–°çš„åŠŸèƒ½ï¼Œé–‹ç™¼äººå“¡å¾ Development åˆ†æ”¯ä¸Š Checkout å‡ºä¾†çš„åˆ†æ”¯ã€‚ç•¶ Feature é–‹ç™¼å®Œå¾Œï¼Œåˆå…¥ Development åˆ†æ”¯ã€‚    Gitflow ç‚ºç‰¹æ€§åˆ†æ”¯æ¨¡å¼èˆ‡ä¸‰é§•é¦¬è»Šåˆ†æ”¯æ¨¡å¼çš„çµ„åˆ   å„ªé»: åˆ†æ”¯å®šç¾©æ˜ç¢º  ç¼ºé»: åˆ†æ”¯è¼ƒå¤šï¼Œå…·æœ‰ç‰¹æ€§åˆ†æ”¯çš„ä¸è¶³  8.3.3 GitHubFlow   åç¨±ä¾†è‡ª GitHub åœ˜éšŠçš„å·¥ä½œå¯¦ç¾  å°æ–¼é–‹ç™¼è€…çš„é–‹ç™¼ç´€å¾‹æ¯”è¼ƒåš´æ ¼ï¼Œå°æ–¼å“è³ªä¿è­‰çš„è¦æ±‚ä¹Ÿè¼ƒé«˜ã€‚  Flow   å¾ Master (Main) å»ºç«‹ä¸€å€‹æ–°åˆ†æ”¯, ä»¥ç‰¹æ€§ (Feature) æˆ– ç¼ºé™· (Bug) çš„ç·¨è™Ÿ (Issue Number) å‘½åè©²åˆ†æ”¯ã€‚  åœ¨é€™å€‹æ–°åˆ†æ”¯ä¸Šæ’°å¯«ä¸¦æäº¤ç¨‹å¼ç¢¼ã€‚  åŠŸèƒ½é–‹ç™¼å®Œæˆå¾Œï¼Œä¸¦è‡ªè¡Œæ¸¬è©¦é€šéï¼Œå»ºç«‹ Pull Request (ç°¡ç¨± PR)  å…¶ä»–é–‹ç™¼äººå“¡å°é€™å€‹ PR é€²è¡Œå¯©æŸ¥ (Code Review)ï¼Œç¢ºä¿ç¨‹å¼ç¢¼å“è³ªæ²’å•é¡Œå¾Œï¼Œåˆä½µå› Master (Main)    å¦‚æœ Feature åˆ†æ”¯å­˜åœ¨æ™‚é–“å¾ˆçŸ­ï¼Œå‰‡æ­¤æ¨¡å¼å¯è¢«èªç‚ºæ˜¯é«˜é »ç‡çš„   ä¸»ç·šé–‹ç™¼ï¼Œä¸»ç·šç™¼å¸ƒ  çš„æ¨¡å¼ã€‚   8.4 åˆ†æ”¯ç­–ç•¥  ä¼æ¥­å¯ä»¥ä¾ç…§ä»¥ä¸‹é¡å‹èˆ‡æ¢ä»¶ï¼Œä¾†ç¢ºå®šé©åˆåœ˜éšŠçš„åˆ†æ”¯æ–¹å¼   é–‹ç™¼æˆ–ç¶­è­·çš„è»Ÿé«”ç”¢å“é¡å‹  ç™¼å¸ƒçš„é »ç‡  åœ˜éšŠæˆå“¡èƒ½åŠ›  åŸºç¤æ¶æ§‹çš„ç­‰ç´š\n   è‡ªå‹•åŒ–æ¸¬è©¦  ç¨‹å¼é‹è¡Œç’°å¢ƒçš„ç®¡ç†  åœ˜éšŠç´€å¾‹æ€§  8.4.1 ç‰ˆæœ¬ç™¼å¸ƒæ¨¡å¼  ç‰ˆæœ¬ç™¼å¸ƒçš„åŸºæœ¬æ¨¡å¼æœ‰ä¸‰ç¨®:   å°ˆæ¡ˆåˆ¶ç™¼å¸ƒæ¨¡å¼ ( Project Release Mode )  ç™¼å¸ƒç«è»Šæ¨¡å¼ ( Release Train Mode )  åŸéš›å¿«ç·šæ¨¡å¼ ( Intercity Express Mode)    å°ˆæ¡ˆåˆ¶ç™¼å¸ƒæ¨¡å¼  åœ¨è»Ÿé«”ç ”ç™¼è¦ç•«ä¸­ï¼Œå…ˆç¢ºèªå¥½æŸä¸€ç‰ˆæœ¬éœ€è¦çš„åŠŸèƒ½ç‰¹æ€§æ•¸é‡ï¼Œåªæœ‰ç•¶è©²æ¬¡ç‰ˆæœ¬æ‰€éœ€çš„åŠŸèƒ½å…¨éƒ¨é–‹ç™¼å®Œæˆä¸¦é”åˆ°ç›¸å°æ‡‰çš„å“è³ªæ¨™æº–å¾Œï¼Œæ‰èƒ½ç™¼å¸ƒè©²ç‰ˆæœ¬ã€‚  ç™¼å¸ƒç‰ˆæœ¬çš„æ™‚é–“é–“éš”ä¸¦æ²’æœ‰å¼·åˆ¶çš„è¦å®šï¼Œè€Œæ˜¯æ ¹æ“šæ–°ç‰ˆæœ¬è¦æ±‚çš„åŠŸèƒ½é›†åˆé–‹ç™¼å®Œæˆä¸¦é”åˆ°ç™¼å¸ƒæ¨™æº–å¾Œï¼Œå°æ‰€éœ€çš„æ™‚å€™é€²è¡Œè©•ä¼°å¾Œæ±ºå®šã€‚  æ­¤æ¨¡å¼ç‚ºæœ€å¤è€çš„ç™¼å¸ƒæ¨¡å¼ï¼Œé‡å°ä¸€å€‹ç‰¹å®šç‰ˆæœ¬ï¼Œç¢ºå®šäº†ç‰ˆæœ¬çš„åŠŸèƒ½æ•¸é‡èˆ‡å“è³ªæ¨™æº–å¾Œï¼Œå†ä¼°è¨ˆç‰ˆæœ¬äº¤ä»˜çš„é€±æœŸï¼Œç­‰æ–¼å…ˆå›ºå®šäº†åŠŸèƒ½æ•¸é‡èˆ‡å“è³ªè¦æ±‚ï¼Œå› æ­¤åœ˜éšŠå¯èƒ½äº¤ä»˜çš„æ™‚é–“é»ä¹Ÿå°±ç›¸å°å›ºå®šã€‚  Pros:   å¯ä»¥ç¢ºåˆ‡çŸ¥é“æ¯å€‹ç‰ˆæœ¬åŒ…æ‹¬å“ªäº›å…·é«”åŠŸèƒ½ï¼Œæœ‰åˆ©æ–¼å•†æ¥­å¥—è£è»Ÿé«”çš„éŠ·å”®æ¨¡å¼ (è³£ç‰ˆæœ¬å’Œæˆæ¬Šï¼Œæ”¶å–ç¶­è­·è²»ç”¨ï¼Œç•¶æœ‰å¿ƒåŠŸèƒ½ç‰ˆæœ¬ç™¼è¡Œå¾Œï¼Œå†å‘å®¢æˆ¶æ”¶å–æ–°ç‰ˆæœ¬çš„å‡ç´šè²»ç”¨ã€‚  ç¬¦åˆäººå€‘çš„å®‰å…¨ç”Ÿç”¢ç¿’æ…£ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½æŠŠæœªå®Œæˆçš„åŠŸèƒ½å¸¶åˆ°å³å°‡ç™¼å¸ƒçš„ç‰ˆæœ¬ä¸­ã€‚  Cons:   å°ˆæ¡ˆäº¤ä»˜å‘¨æœŸè¼ƒé•·ï¼Œåƒèˆ‡äººå“¡çœ¾å¤š  å¦‚æœé–‹ç™¼é€±æœŸå› ç‚ºæŸäº›åŸå› å°è‡´éœ€æ±‚è®Šæ›´ (å¦‚å¢åŠ éœ€æ±‚ã€ä¿®æ”¹åŸæœ¬éœ€æ±‚å¯¦ä½œæ–¹å¼æˆ–æ›´æ›éœ€æ±‚) æ™‚ï¼Œéœ€è¦é‡æ–°è©•ä¼°å°ˆæ¡ˆçš„äº¤ä»˜æ™‚é–“ï¼Œæœƒé€£å‹•å½±éŸ¿é‚£äº›åŸæœ¬èƒ½å¤ å¦‚æœŸäº¤ä»˜çš„éœ€æ±‚ã€‚  éœ€è¦ç­‰å¾…æ‰€æœ‰éœ€æ±‚å…¨éƒ¨å¯¦ç¾å®Œæˆå¾Œæ‰èƒ½ä¸€èµ·ç™¼å¸ƒ    ç™¼å¸ƒç«è»Šæ¨¡å¼  å¸¸è¦‹æ–¼å¤§å‹å¥—è£è»Ÿé«”ã€‚å¤§å‹å‚³çµ±è»Ÿé«”ç”¢æ¥­é€šå¸¸æœ‰è¨±å¤šç”¢å“ç·šï¼Œå„ç”¢å“ç·šä¹‹é–“å­˜åœ¨éå¸¸è¤‡é›œçš„ç›¸äº’ä¾è³´é—œä¿‚ã€‚ç‚ºäº†èƒ½å¤ è®“å„å€‹ç”¢å“ç·šå”åŒç™¼å¸ƒã€‚é€™äº›ä¼æ¥­æœƒç‚ºæ¯æ¢ç”¢å“ç·šéƒ½åˆ¶å®šå¥½æ¯å€‹ç‰ˆæœ¬çš„ç™¼å¸ƒé€±æœŸï¼Œä¹Ÿå°±æ˜¯æ¯å€‹ç‰ˆæœ¬éƒ½åƒç«è»Šä¸€æ¨£ï¼Œäº‹å…ˆè¨ˆç•«å¥½ä»€éº¼æ™‚å€™ç™¼è»Šã€‚  \nğŸ’¡ è»Šæ˜¯æŒ‰ç…§æ™‚é–“ç™¼çš„ï¼Œèƒ½è¶•ä¸Šç«è»Šçš„å°±ä¸€èµ·èµ°ï¼Œè¶•ä¸ä¸Šè»Šçš„ï¼Œå°±ç­‰ä¸‹ä¸€ç­è»Šã€‚\n    ç‚ºäº†èƒ½å¤ æº–æ™‚ç™¼å¸ƒï¼Œè¦æ±‚æ‰€æœ‰åƒèˆ‡åˆ°è©²ç‰ˆæœ¬çš„é–‹ç™¼åœ˜éšŠå¿…é ˆå°é½Šè©²ç‰ˆæœ¬çš„æ¯å€‹é–‹ç™¼éšæ®µã€‚é€™ç¨®åš´æ ¼çš„æ™‚é–“ä¸€è‡´æ€§è¦æ±‚æ˜¯å› ç‚ºå¦‚æœè©²ç”¢å“ç·šçš„æ™‚é–“è®Šæ›´æœƒå¼•èµ·å…¶ä»–ç”¢å“ç·šçš„æ™‚é–“è®Šæ›´ï¼Œè€Œé€™äº›æ›´æ”¹ä¹Ÿå¯èƒ½æœƒå½±éŸ¿åˆ°å…±äº«çš„é›†æˆæ¸¬è©¦ç’°å¢ƒçš„åˆ†é…ã€‚  å¤§å¤šæ•¸çš„æƒ…æ³ä¸‹ï¼Œç”±æ–¼è¨ˆç•«å’Œå„ç”¢å“é›†æˆèˆ‡ä¾è³´é—œä¿‚ï¼Œå› æ­¤ç™¼å¸ƒç«è»Šé€šå¸¸ä»¥ä¸€å­£ç‚ºå–®ä½ï¼Œä½†ä¸æœƒè¶…é 10 å€‹æœˆã€‚( *Note: æœ¬æ›¸ä½œè€…ä»¥å¤§å‹ä¼æ¥­ä¾†åšèˆ‰ä¾‹ï¼Œä½† Release Train Mode ä¸ä¸€å®šä¾ç…§æ­¤é€±æœŸç‚ºè¦ç¯„ã€‚)  ç•¶ç™¼å¸ƒç«è»Šæ™‚é–“è¡¨æ™‚ï¼Œç™¼å¸ƒç®¡ç†åœ˜éšŠé€šå¸¸èˆ‡è² è²¬å€‹ç”¢å“é–‹ç™¼çš„åœ˜éšŠé€²è¡Œæå‰æºé€šï¼Œè¨è«–è¦ç™¼å¸ƒé‚£äº›å…§å®¹ï¼Œæœ‰æ™‚ç”šè‡³éœ€è¦å¹¾å€‹æœˆçš„æ™‚é–“ï¼Œå°‡å…¶çµè«–ç™¼å¸ƒåœ¨ä¼æ¥­ç‰ˆæœ¬è¡¨ä¸­ã€‚    åœ– 8-17 ç‚º LiberOffice çš„ç™¼å¸ƒç«è»Šæ™‚é–“è¡¨ã€‚æå‰åˆ¶å®šå‡ºæ™‚é–“ï¼Œç›®çš„å°±æ˜¯è®“å„ç¨®æ¥­å‹™èˆ‡æŠ€è¡“éƒ¨é–€æœ‰è¶³å¤ å¤šçš„æ™‚é–“é€²è¡Œè¨ˆç•«ï¼Œä»¥ä¾¿è©•ä¼°å‡ºå„ç¨®ä¾è³´èˆ‡å½±éŸ¿ã€‚  åˆ¶å®šç™¼å¸ƒè¨ˆç•«æ˜¯ä¸€å€‹ ËŠ éå¸¸æ­£å¼èˆ‡çµæ§‹åŒ–çš„éç¨‹ï¼Œéœ€è¦æœ‰å„ç¨®æ ¼å¼åŒ–æ•¸æ“šä»¥ç¢ºä¿åƒåŠ çš„åœ˜éšŠèƒ½å¤ å°æ­£å¼ç™¼å¸ƒçš„å¯è¡Œæ€§åšå‡ºåˆ¤æ–·ã€‚æ•¸æ“šåŒ…å«ç™¼å¸ƒçš„è©³ç´°è³‡è¨Š( ç›¸å°æ¨™ç±¤ã€åç¨±ã€éƒ¨å±¬æ—¥æœŸã€é¢¨éšªç´šåˆ¥ã€ç™¼å¸ƒé¡å‹-ä¼æ¥­,è¨ˆç•«æˆ–æŠ•è³‡çµ„åˆ)ã€æ•´å€‹ç”Ÿå‘½é€±æœŸçš„å„å€‹éšæ®µåŠé å®šæ—¥æœŸ(å¦‚åœ– 8-18 )ã€æ¯å€‹éšæ®µè¦å®Œæˆçš„æ´»å‹•èˆ‡ä»»å‹™ã€é‡Œç¨‹ç¢‘æ™‚é–“ã€å“è³ªè¦æ±‚ã€ä»¥åŠç®¡ç†ç™¼å¸ƒç«è»Šçš„ä¸»è¦è² è²¬äººã€‚    Pros:   å°æ–¼ä¼æ¥­ä¾†èªªï¼Œå¯ä»¥é€šéä¸¦è¡Œå¤šå°è»Šçš„æ–¹å¼ï¼Œå°‡çªç™¼éœ€æ±‚æ’å…¥ä¸€å°ç™¼å¸ƒç«è»Š  ç”¨æˆ¶å¯ä»¥æå‰é«”é©—æœ€æ–°ç‰ˆç”¢å“æä¾›çš„æ–°ç‰¹æ€§ï¼Œè€Œä¸å¿…å½±éŸ¿åŸæœ¬ç”Ÿç”¢ç·šä¸Šçš„èˆŠç‰ˆæœ¬ã€‚é«”é©—ä¹‹å¾Œåœ¨æ±ºå®šè¦ä¸è¦æ‡‰ç”¨æ–¼è‡ªå·±çš„ç”Ÿç”¢ç’°å¢ƒä¸­  å³ä¾¿å·²ç¶“æ±ºå®šå°‡é€™å€‹æ–°ç‰ˆæœ¬ç”¨æ–¼è‡ªå·±çš„ç”Ÿç”¢ç’°å¢ƒä¸­ï¼Œä¹Ÿå¯ä»¥ç­‰åˆ°æ–°ç‰ˆæœ¬æˆç†Ÿç©©å®šä¹‹å¾Œå†é€™éº¼åš  Cons:  å¦‚æœåƒèˆ‡åœ˜éšŠçš„äººæ•¸è¶Šå¤šï¼ŒæºåŒå”èª¿çš„æˆæœ¬æœƒè¶Šé«˜   3 åŸéš›å¿«ç·šæ¨¡å¼  åŸéš›å¿«ç·šæ¨¡å¼æ˜¯æŒ‡åœ¨ç™¼å¸ƒæ¨¡å¼ä¸‰è¦ç´ ä¸­ï¼Œå›ºå®š   æ™‚é–“  èˆ‡   å“è³ª  å…©å€‹ç¶­åº¦ï¼Œä¸”æ™‚é–“å‘¨æœŸè¼ƒçŸ­(ä¸€å‘¨ï¼Œä¸€å¤©ï¼Œç”šè‡³æ›´å°‘)ï¼Œé‡å°é‚£äº›åœ¨ 0 ç™¼å¸ƒæ™‚é–“é»å·²é”åˆ°å°æ‡‰å“è³ªæ¨™æº–çš„ç‰¹æ€§é€²è¡Œä¸€æ¬¡ç™¼å¸ƒã€‚  è·Ÿç«è»Šç™¼å¸ƒçš„å€åˆ¥åœ¨æ–¼å…©é»:   ç™¼å¸ƒå‘¨æœŸè¼ƒçŸ­ï¼Œé€šå¸¸æ˜¯å…©å‘¨ä»¥å…§  è² è²¬åŠŸèƒ½é–‹ç™¼çš„åœ˜éšŠå¯ä»¥è‡ªå·±é¸æ“‡æ­ä¹˜å“ªå°åŸéš›å¿«ç·šï¼Œè€Œä¸å¿…åœ¨å¾ˆä¹…ä¹‹å‰å°±å…ˆç¢ºå®šæŠŠæ™‚é–“ç¢ºå®šä¸‹ä¾†ã€‚  é€™ç¨®æ¨¡å¼å¸¸è¦‹æ–¼æä¾›ç¶²éš›ç¶²è·¯æœå‹™æˆ– SaaS æœå‹™çš„è»Ÿé«”å…¬å¸ã€‚å¥½è™•åœ¨æ–¼æ¸›å°‘äº†åœ˜éšŠä¹‹é–“æºé€šå”èª¿æˆæœ¬ã€‚å› ç‚ºæ¯å€‹äººéƒ½çŸ¥é“æ¯æ¬¡ç™¼å¸ƒçš„å…·é«”æ™‚é–“é»ï¼Œæ‰€æœ‰å·¥ä½œä»»å‹™éƒ½å¯ä»¥æŒ‰ç…§é€™å€‹æ™‚é–“é»æå‰é€²è¡Œå”èª¿ã€‚è€Œä¸”å³ä½¿åŠŸèƒ½æ²’æœ‰åŠæ™‚è¶•ä¸Šæœ€è¿‘ä¸€æ¬¡çš„ç‰ˆæœ¬ç™¼å¸ƒï¼Œåœ˜éšŠä¹Ÿèƒ½çŸ¥é“é€™å€‹åŠŸèƒ½æ˜¯å¦å¯ä»¥åœ¨ä¸‹ä¸€æ¬¡ç™¼å¸ƒçš„æ™‚é–“é€²è¡Œç™¼å¸ƒã€‚Facebook çš„ Web ç¶²ç«™æ–¼ 2013 å¹´éƒ¨å±¬æ¨é€é »ç‡ä»¥é”åˆ°æ¯å¤©ç™¼å¸ƒå…©æ¬¡ï¼Œæ¯å‘¨ä¸€æ¬¡å¤§ç‰ˆæœ¬ã€‚å¦‚åœ– 8-19 æ‰€ç¤ºã€‚    æ¯å€‹å‘¨æ—¥å¾ä¸»å¹¹ä¸Šæ‹‰ä¸€å€‹ç™¼å¸ƒåˆ†æ”¯ï¼Œè‡ªå‹•åŒ–æ¸¬è©¦é©—è­‰é€šéå¾Œï¼Œåœ¨å…¬å¸å…§éƒ¨äººå“¡é–‹æ”¾(åœ¨å…¬å¸å…§è¨ªå•ï¼Œé‡å®šå‘åˆ° latest.facebook.com)ã€‚é‹è¡Œéç¨‹ä¸­å¦‚æœå‡ºç¾å•é¡Œï¼Œå¯ä»¥åœ¨ä¸»å¹¹ä¸Šä¿®å¾©ï¼Œç„¶å¾Œåˆ†æ’¿åˆ° (CherryPick) ç™¼å¸ƒåˆ†æ”¯ä¸Šã€‚ç™¼å¸ƒåˆ†æ”¯ä¸Šä»£ç¢¼æ¯å¤©å…©æ¬¡æ›´æ–°åˆ° latest.facebook.comï¼Œä¾›å…¬å¸å“¡å·¥å…§éƒ¨é–‹ç™¼ä½¿ç”¨ã€‚å¦‚æœç‰ˆæœ¬ç©©å®šï¼Œå°±å°å¤–ç™¼å¸ƒï¼ŒåŒæ¨£æ˜¯æ¯å¤©å…©æ¬¡ã€‚  è‡ª 2017 å¹´é–‹å§‹ Facebook çš„ç™¼å¸ƒç­–ç•¥å·²ç¶“å¾ä¸€å¤©å…©æ¬¡çš„\"ä¸»å¹¹é–‹ç™¼ï¼Œåˆ†æ”¯ç™¼å¸ƒ\" æ”¹è®Šç‚ºå¹³å‡æ¯å¤©ç™¼å¸ƒ 9~10 æ¬¡çš„ \"ä¸»å¹¹é–‹ç™¼ï¼Œä¸»å¹¹ç™¼å¸ƒ\"æ¨¡å¼ã€‚  åŸéš›å¿«ç·šæ¨¡å¼çš„å„ªé»æœ‰å…©å€‹:   æ¯å€‹äººéƒ½éå¸¸æ¸…æ¥šå„å€‹æ™‚é–“é»  æ›´åŠ èšç„¦ç”Ÿç”¢å“è³ª  ç¼ºé»:   ç™¼å¸ƒé »ç‡è¼ƒé«˜ï¼Œå› æ­¤æœªå®ŒæˆåŠŸèƒ½çš„ä»£ç¢¼ä¹Ÿæœƒä¸€åŒç™¼å¸ƒå‡ºå»  å°æ–¼ç¨‹å¼ç¢¼è¦æ±‚å“è³ªè¼ƒé«˜ï¼Œéœ€è¦å¼·å¤§çš„å“è³ªåŸºç¤è¨­æ–½ä¿è­‰ã€‚  ä½¿ç”¨åŸéš›å¿«ç·šæ¨¡å¼ï¼Œé–“éš”å¤šé•·æ™‚é–“ç™¼å‡ºä¸€è¶Ÿåˆé©? åœ¨ä¸å½±éŸ¿ç”¨æˆ¶é«”é©—ï¼Œä¸å¢åŠ æˆæœ¬ä¸”åˆè¦çš„å‰æä¸‹ï¼Œè®“ç™¼å¸ƒé€±æœŸç›¡å¯èƒ½ç¸®çŸ­åˆ°ä»¤ä½ æ„Ÿåˆ°æœ‰äº›ç·Šå¼µçš„ç¯€å¥ï¼Œä¾‹å¦‚:æ¯å€‹æœˆç™¼å¸ƒä¸€æ¬¡ç‰ˆæœ¬ï¼Œç¾åœ¨å¯ä»¥æŠŠå…©å‘¨ç•¶ä½œä¸€å€‹ç›®æ¨™ã€‚  8.4.2 åˆ†æ”¯ç­–ç•¥èˆ‡ç™¼å¸ƒå‘¨æœŸçš„é—œä¿‚   åˆ†æ”¯ç­–ç•¥èˆ‡ç‰ˆæœ¬ç™¼å¸ƒå‘¨æœŸæœ‰ä¸€å®šçš„ç›¸é—œæ€§    åˆ†æ”¯ç­–ç•¥èˆ‡ç‰ˆæœ¬ç™¼å¸ƒå‘¨æœŸä¹‹é—´æœ‰ä¸€å®šçš„ç›¸é—œæ€§ï¼Œå¦‚åœ– 8-20 æ‰€ç¤º   è»Ÿé«”é–‹ç™¼é€±æœŸæ¥µé•·çš„â€œå°ˆæ¡ˆåˆ¶â€åœ˜éšŠå’Œè»Ÿé«”ç™¼å¸ƒé »ç‡çš„æ¥µé«˜ â€œåŸéš›å¿«ç·šæ¨¡å¼â€åœ˜éšŠæœƒä½¿ç”¨   ä¸»å¹¹é–‹ç™¼ï¼Œä¸»å¹¹ç™¼å¸ƒ  çš„åˆ†æ”¯ç­–ç•¥  æ¬¡ä¹‹çš„åœ˜éšŠæœƒä½¿ç”¨   ä¸»å¹¹é–‹ç™¼ï¼Œåˆ†æ”¯ç™¼å¸ƒ  çš„ç­–ç•¥  æœ€å¾Œçš„å€é–“ä½¿ç”¨   åˆ†æ”¯é–‹ç™¼ï¼Œä¸»å¹¹ç™¼å¸ƒ  çš„åˆ†æ”¯ç­–ç•¥  é€™ä¹‹é–“ä¸æ˜¯çµ•å°çš„ï¼Œå…¶ä¸­æœƒæœ‰å¾ˆå¤§çš„é‡ç–Šéƒ¨åˆ†ï¼Œé€šå¸¸æœƒå—åˆ°åœ˜éšŠæˆå“¡äººæ•¸ï¼Œç”¢å“æ¶æ§‹èˆ‡å“è³ªä¿éšœåŸºç¤è¨­æ–½ç­‰å½±éŸ¿  8.5 å°çµ  æ¯å€‹åˆ†æ”¯ç­–ç•¥éƒ½æœ‰å…¶å„ªé»èˆ‡æŒ‘æˆ°ã€‚å®ƒå°æ–¼ç™¼å¸ƒé »ç‡ä»¥åŠæ¯æ¬¡ç™¼å¸ƒçš„æ•ˆç‡ä¹Ÿæœ‰è¼ƒå¤§çš„å½±éŸ¿ã€‚  ç›®å‰çš„ç™¼å±•è¶¨å‹¢ç‚º: è»Ÿé«”çš„ç™¼å¸ƒçš„é »ç‡è¶Šä¾†è¶Šé«˜ï¼Œç™¼å¸ƒé€±æœŸè¶Šä¾†è¶ŠçŸ­ï¼ŒçŸ½è°·é ‚ç´šçš„ç¶²è·¯å…¬å¸å¤§å¤šæ¡ç”¨ \"ä¸»å¹¹é–‹ç™¼\" æˆ–è€…é«˜é »çš„   GitHub Flow  åˆ†æ”¯æ¨¡å¼ã€‚  ä¸€å€‹ä¼æ¥­åˆ°åº•é¸æ“‡å“ªç¨®åˆ†æ”¯ç­–ç•¥ï¼Œéœ€è¦ä¾æ“šåœ˜éšŠçš„å…·é«”æƒ…æ³ä¾†æ±ºå®šã€‚å¦‚æœç›¸å°æ‡‰çš„åŸºç¤è¨­æ–½ä¸è¶³ ( å¦‚è»Ÿé«”æ¶æ§‹ã€äººå“¡èƒ½åŠ›ã€å’Œå·¥å…·å¹³å°æˆç†Ÿåº¦)ï¼Œç›²ç›®åœ°æé«˜ç™¼å¸ƒé »ç‡ï¼Œç¸®çŸ­ç™¼å¸ƒé€±æœŸæœƒé€ æˆä¸å¿…è¦çš„æå¤±ã€‚   æŒçºŒäº¤ä»˜ 2.0  æå€¡æŒçºŒæ¥µç››çš„åˆ†æ”¯ç­–ç•¥ï¼Œé¸æ“‡åˆ†æ”¯æ¨¡å¼çš„åŸå‰‡æœ‰ä»¥ä¸‹å¹¾é …:   åˆ†æ”¯è¶Šå°‘è¶Šå¥½ï¼Œæœ€å¥½åªæœ‰ä¸€æ¢ä¸»å¹¹  åˆ†æ”¯ç”Ÿå­˜é€±æœŸè¶ŠçŸ­è¶Šå¥½ï¼Œæœ€å¥½åœ¨ 3 å¤©ä»¥å…§  åœ¨æ¥­å‹™å…è¨±çš„æ¢ä»¶ï¼Œç™¼å¸ƒé€±æœŸè¶ŠçŸ­è¶Šå¥½ã€‚  ä¼æ¥­ç®¡ç†è€…æ‡‰è©²éµå¾ª   æŒçºŒäº¤ä»˜ 2.0  çš„æ€æƒ³ã€ç†å¿µèˆ‡åŸå‰‡ã€‚åˆ¶å®šåˆç†çš„æ”¹å–„ç›®æ¨™ï¼Œä¿ƒé€²å…¬å¸ IT äº¤ä»˜èƒ½åŠ›ä¸æ–·æå‡ï¼Œæ‰èƒ½å¤ è·Ÿä¸Šæ™‚ä»£çš„ç™¼å±•ã€‚  Additional Reference:   Git å¸¸ç”¨çš„åˆ†æ”¯ç®¡ç†æ¨¡å‹   DevOps æŠ€æœ¯ï¼šä¸»å¹²å¼€å‘   ä»€ä¹ˆæ˜¯ Release Train?"},{"id":"content:4.cicd-2.0:9.chapter9.md","path":"/cicd-2.0/chapter9","dir":"cicd-2.0","title":"09 æŒçºŒæ•´åˆ","description":"","keywords":["9.1 èµ·æºèˆ‡å®šç¾©","9.2 å…­æ­¥æäº¤æ³•","9.3 é€Ÿåº¦èˆ‡å“è³ªæ¬Šè¡¡","9.4 åœ¨åœ˜éšŠä¸­å¯¦æ–½æŒçºŒæ•´åˆå¯¦ä½œ","9.5 å¸¸è¦‹åŸ·è¡Œå•é¡Œ","9.6 å°çµ"],"body":"  9.1 èµ·æºèˆ‡å®šç¾©   Chrysler Comprehensive Compensation System(C3)ï¼Œæ˜¯ä¸€å€‹ç”¨æˆ¶æ•¸é” 87000 åçš„ç¶œåˆäººäº‹èˆ‡å·¥è³‡ç³»çµ±  1994 å¹´é–‹å§‹é–‹ç™¼ï¼Œé è¨ˆ 1999 å¹´ä¸Šç·šï¼Œ1996 å¹´ Kent Beck è¢«é‚€è«‹ä¾†æŒ½æ•‘é€™å€‹é …ç›®ï¼Œä¸¦æ¡ç”¨æ–°çš„é–‹ç™¼æ–¹å¼(æ¥µé™ç·¨ç¨‹æ–¹æ³•)\n   é‡åˆ°çš„å•é¡Œï¼šè¦æŠŠç³»çµ±çš„ä¸åŒéƒ¨åˆ†æ•´åˆèµ·ä¾†ï¼Œä¸¦ä¸”è®“ç³»çµ±é‹ä½œï¼Œå¸¸å¸¸éœ€è¦ 1~2 é€±çš„æ™‚é–“  æ¥µé™ç·¨ç¨‹ï¼šæé«˜æ•´åˆé »ç‡ï¼Œæ¯æ¬¡åˆä½µçš„æ±è¥¿è¼ƒå°‘ï¼Œæ¸›å°‘æ•´åˆéœ€è¦çš„æ™‚é–“ï¼Œæ•´åˆéç¨‹ä¸­çš„å•é¡Œè¼ƒå¥½æ’è§£(Debug)  æ–¹å¼ï¼šé–‹ç™¼äººå“¡æ’°å¯« shell è…³æœ¬ï¼Œé€™å€‹è…³æœ¬å®šæœŸå»è¨ªå•å„²å­˜åº«ï¼Œåªè¦ç™¼ç¾æœ‰æ–°çš„ç¨‹å¼ç¢¼è¢«æäº¤ï¼Œå°±å°‡ç¨‹å¼ç¢¼è‡ªå‹•æ‹‰å–åˆ°å»ºæ§‹ä¸»æ©Ÿé€²è¡Œç·¨è­¯  ä½†æ˜¯æœ€å¾Œä¸Šç·šçš„ç‰ˆæœ¬åƒ…èƒ½æ”¯æ’ 10000 äººä½¿ç”¨ï¼Œ2000 å¹´ç³»çµ±è¢«æ¨æ£„  9.1.1 åŸå§‹å®šç¾©   æ¯æ—¥æ§‹å»º(daily build)ã€æ¯æ™šæ§‹å»º(nightly build)\n   æ¯å¤©å®šæ™‚è‡ªå‹•åŸ·è¡Œä¸€æ¬¡è»Ÿé«”æ§‹å»ºå·¥ä½œï¼Œå°‡ç‰ˆæœ¬æ§åˆ¶ç³»çµ±æœ€æ–°ç‰ˆæœ¬çš„ç¨‹å¼ç¢¼åœ¨å»ºæ§‹ç’°å¢ƒ(æ²’æœ‰å®‰è£é›†æˆé–‹ç™¼ç’°å¢ƒçš„ä¹¾æ·¨æ©Ÿå™¨)ä¸‹é€²è¡Œç·¨è­¯ã€éˆçµã€æ‰“åŒ…çš„éç¨‹  æœ‰åŠ©æ–¼ç¢ºä¿é–‹ç™¼äººå“¡æ˜ç¢ºäº†è§£å‰ä¸€å¤©ç·¨å¯«çš„ç¨‹å¼åœ¨æ•´åˆçš„éç¨‹ä¸­æ˜¯å¦ç™¼ç”Ÿå•é¡Œï¼Œå¹«åŠ©é–‹ç™¼åœ˜éšŠç¢ºå®šæ–°çš„ç¨‹å¼ç¢¼è®Šæ›´æ˜¯å¦ç ´å£åŸæœ‰åŠŸèƒ½  ã€ŒæŒçºŒé›†æˆæ˜¯ä¸€ç¨®è»Ÿé«”é–‹ç™¼å¯¦è¸ï¼Œåœ˜éšŠæˆå“¡é »ç¹åœ°å°‡ä»–å€‘çš„å·¥ä½œæˆæœé›†æˆå†ä¸€èµ·(é€šå¸¸æ¯äººæ¯å¤©è‡³å°‘æäº¤ä¸€æ¬¡ï¼Œé€™æ¨£æ¯å¤©å°±æœƒæœ‰å¤šæ¬¡é›†æˆ)ï¼›æ¯æ¬¡æäº¤å¾Œï¼Œè‡ªå‹•è§¸ç™¼ä¸€æ¬¡åŒ…å«è‡ªå‹•åŒ–é©—è­‰çš„æ§‹å»ºä»»å‹™ï¼Œä»¥ä¾¿èƒ½å„˜æ—©ç™¼ç¾é›†æˆå•é¡Œã€ â€”â€” Martin Fowler(2006)  9.1.2 ä¸€æ¬¡é›†æˆéç¨‹   é–‹ç™¼äººå“¡æäº¤ç¨‹å¼ç¢¼åˆ°å„²å­˜åº«  å»ºæ§‹ä¸»æ©Ÿå®šæœŸè¼ªè©¢ç¨‹å¼ç¢¼å„²å­˜åº«  æœ‰æ–°çš„ç¨‹å¼ç¢¼ï¼Œä¸‹è¼‰åˆ°å»ºç½®ç’°å¢ƒ  æ ¹æ“šå»ºç½®è…³æœ¬ï¼ŒåŸ·è¡Œå»ºç½®  å»ºç½®å®Œæˆå¾Œä¸Šå‚³çµæœ    9.2 å…­æ­¥æäº¤æ³•   é–‹ç™¼äººå“¡ check out æœ€æ–°å»ºç½®æˆåŠŸçš„ç¨‹å¼ç¢¼  ä¿®æ”¹ç¨‹å¼ç¢¼å¯¦ä½œéœ€æ±‚  ç¬¬ä¸€æ¬¡å€‹äººå»ºç½®(Build)ï¼šå»ºç½®è‡ªå·±é–‹ç™¼çš„æ±è¥¿(ç¢ºä¿è‡ªå·±é–‹ç™¼çš„æ±è¥¿æ²’å•é¡Œ)  ç¬¬äºŒæ¬¡å€‹äººå»ºç½®ï¼šå¾ä¸»å¹¹ä¸­ä¸‹è¼‰æœ€æ–°å»ºç½®æˆåŠŸçš„ç¨‹å¼ç¢¼(å¦‚æœé€™æ®µæœŸé–“æœ‰å…¶ä»–äººæ›´æ–°)ï¼Œä¸¦ä¸”é€²è¡Œå»ºç½®(è‡ªå·±é–‹ç™¼çš„æ±è¥¿ï¼‹é€™æ®µæœŸé–“å…¶ä»–äººçš„æ±è¥¿)\n   ç¢ºä¿è¦ä¸Šå»ä¸»ç·šçš„ç¨‹å¼ç¢¼æ˜¯æ²’å•é¡Œçš„  æäº¤ç¨‹å¼ç¢¼  ç¬¬ä¸‰æ¬¡å»ºç½®ï¼šå¦‚æœç¨‹å¼ç¢¼é€šéè‡ªå‹•åŒ–æ¸¬è©¦ã€éœæ…‹ç¨‹å¼ç¢¼æª¢æ¸¬ï¼Œå‰‡å°‡è©²ç¨‹å¼ç¢¼ä¸¦å›ä¸»ç·šï¼Œå¦‚æœå¤±æ•—å‰‡é€²è¡Œä¿®å¾©    9.2.1 å››å€‹é—œéµé»   å…­æ­¥æäº¤æ³•ä¸­çš„ä¸‰æ¬¡é©—è­‰æœ‰ä»€éº¼ä½œç”¨   ä¸‰æ¬¡é©—è­‰çš„è…³æœ¬å¿…é ˆä¸€æ¨£  ç¬¬ä¸€æ¬¡é©—è­‰ï¼šç¢ºèªé–‹ç™¼è€…æ’°å¯«çš„å…§å®¹æ˜¯å¦æ­£ç¢ºï¼Œå…§å®¹ç‚ºè‡ªå·±  ç¬¬äºŒæ¬¡é©—è­‰ï¼šç¢ºèªèˆ‡æœ€æ–°ç‰ˆåˆä½µå¾Œç³»çµ±æ˜¯å¦æ­£å¸¸ï¼Œå…§å®¹ç‚ºè‡ªå·±ï¼‹ä»–äºº  ç¬¬ä¸‰æ¬¡é©—è­‰ï¼šåœ¨ä¹¾æ·¨å—æ§çš„ç’°å¢ƒä¸­åŸ·è¡Œèˆ‡ç¬¬äºŒæ¬¡é©—è­‰ä¸€æ¨£çš„è…³æœ¬ï¼Œç¢ºä¿é–‹ç™¼äººå“¡æäº¤å®Œæ•´ä¸”ç„¡ç¨‹å¼å“è³ªå•é¡Œï¼Œå…§å®¹ç‚ºå„²å­˜åº«æœ€æ–°ç‰ˆæœ¬\n   å¦‚æœç¬¬äºŒæ¬¡é©—è­‰æœ‰éï¼Œç¬¬ä¸‰æ¬¡é©—è­‰æ²’éï¼Œä»£è¡¨ 1.è‡ªå·±é€™æ¬¡ç¨‹å¼ç¢¼æäº¤ä¸å®Œæ•´ 2.è‡ªå·±çš„å»ºç½®ç’°å¢ƒè·Ÿåœ˜éšŠæœ‰å·® 3.åœ˜éšŠæˆå“¡æœ‰æäº¤æ–°ä»£ç¢¼ï¼Œä½†æ˜¯è‡ªå·±æ²’ç™¼ç¾  å€‹äººé©—è­‰(ç¬¬ä¸€æ¬¡é©—è­‰ã€ç¬¬äºŒæ¬¡é©—è­‰)ä¸€å®šè¦åšå…©æ¬¡å—ï¼Ÿ   ç¬¬äºŒæ¬¡é©—è­‰ç›®æ¨™æ˜¯é©—è­‰è‡ªå·±æ”¹çš„ç¨‹å¼ç¢¼è·Ÿå…¶ä»–äººæäº¤çš„ç¨‹å¼ç¢¼åˆä½µå†ä¸€èµ·ï¼Œä¹Ÿç¬¦åˆé æœŸ  å¦‚æœç¬¬ä¸€æ¬¡æœ‰éï¼Œç¬¬äºŒæ¬¡æ²’éï¼Œä»£è¡¨å…¶ä»–äººæäº¤çš„å…§å®¹å½±éŸ¿åˆ°é€™æ¬¡çš„é–‹ç™¼å…§å®¹  ä¿¡å¿ƒçˆ†æ£šçš„å·¥ç¨‹å¸«å¯ä»¥è·³éå€‹äººç¬¬ä¸€æ¬¡é©—è­‰ï¼Œç›´æ¥åšç¬¬äºŒæ¬¡é©—è­‰å³å¯  å¦‚ä½•ç¢ºä¿åœ¨æäº¤å‰åŸ·è¡Œå€‹äººå»ºç½®   åœ¨ä»£ç¢¼åˆä½µåˆ°ä¸»ç·šæ™‚ï¼Œå¼·åˆ¶é€²è¡Œç¬¬äºŒæ¬¡å€‹äººé©—è­‰  æ¯æ¬¡å»ºç½®æ‡‰è©²åŒ…å«å“ªäº›å“è³ªæª¢é©—å…§å®¹   å–®å…ƒæ¸¬è©¦ã€ç¨‹å¼ç¢¼éœæ…‹æƒæ(ç™½ç®±)ã€ç¨‹å¼ç¢¼è¦ç¯„æª¢æŸ¥(code style)  å»ºç½®é©—è­‰æ¸¬è©¦(build verification test)   å»ºç½®çµæŸç”¢ç”Ÿçš„äºŒé€²åˆ¶å…§å®¹æ˜¯å¦åŒ…å«æ­£ç¢ºçš„å…§å®¹ ex.é…ç½®æ–‡ä»¶çš„å®Œæ•´æ€§  é€™å€‹å»ºç½®çµæœæ˜¯å¦èƒ½å¤ æ­£å¸¸å®‰è£ä¸¦ä¸”å•Ÿå‹•é‹è¡Œ  é‹è¡Œå¾Œæœ€åŸºæœ¬çš„åŠŸèƒ½æ˜¯å¦å¯ä»¥ä½¿ç”¨ ex.ç™»å…¥  é‡å°æ¥æ‰‹èˆŠæ¡ˆ(å¤§é‡éºç•™ä»£ç¢¼çš„å„²å­˜åº«)ï¼Œä½¿ç”¨ç¨‹å¼ç¢¼éœæ…‹æƒæå¯èƒ½æœƒå‡ºç¾ä¸€å †éŒ¯èª¤ï¼Œè©²æ€éº¼è™•ç†ï¼Ÿä»¥ä¸‹æä¾›å…©ç¨®è§£æ³•   æ¸›å°‘è¦ç¯„ï¼Œé—œæ³¨é‡é»ï¼šæå–æœ€é‡è¦çš„ç¨‹å¼ç¢¼è¦ç¯„ï¼Œæ—©æœŸåªé—œæ³¨åš´é‡é¡å‹çš„å•é¡Œï¼Œä»¥å¾Œåœ¨é€æ­¥å¢åŠ ç¨‹å¼ç¢¼è¦ç¯„  åŸ·è¡Œã€Œç«¥å­è»ç‡Ÿåœ°ã€åŸå‰‡ï¼šéºç•™ä»£ç¢¼å¤šï¼Œä¸”ç³»çµ±å·²ç¶“ä¸Šç·šä¸€æ®µæ™‚é–“ï¼Œä¸”æœ€è¿‘ä¸æœƒå‹•åˆ°é‚£é‚Šçš„ç¨‹å¼ç¢¼ï¼Œå‰‡æš«æ™‚ä¸å»ä¿®(ç•¶ä½œæ²’çœ‹åˆ°)ï¼Œæœ‰å‹•åˆ°é‚£éƒ¨ä»½çš„ç¨‹å¼ç¢¼ï¼Œå‰‡è€ƒæ…®é€²è¡Œä¿®å¾©ï¼Œåšåˆ°æ¯æ¬¡æäº¤æ™‚ï¼Œæ²’æœ‰æ–°å¢å•é¡Œï¼Œæœ€å¥½å•é¡Œå¯ä»¥é€æ­¥æ¸›å°‘   ğŸ’¡ ç«¥å­è»ç‡Ÿåœ°åŸå‰‡ï¼šé›¢é–‹ç‡Ÿåœ°å‰ï¼Œç¢ºä¿ç‡Ÿåœ°å’Œä½ ä½¿ç”¨ä¹‹å‰ä¸€æ¨£ä¹¾æ·¨ï¼Œèƒ½åœ¨ä¹¾æ·¨ä¸€é»å°±æ›´å¥½äº†  9.2.2 åŒæ­¥ç•°æ­¥æ¨¡å¼   ä¸»è¦çš„å·®ç•°æ˜¯åœ¨ç¨‹å¼ç¢¼æäº¤åˆ°ä¸»ç·šæ™‚(å…­æ­¥æäº¤æ³•çš„ç¬¬äº”æ­¥)ï¼Œå¾ŒçºŒé–‹ç™¼äººå“¡çš„è¡Œç‚ºå·®ç•°  åŒæ­¥ï¼šé–‹ç™¼äººå“¡éœ€è¦ç­‰åˆ°å»ºç½®å®Œæˆå¾Œï¼Œç¢ºä¿é€šéæ‰é€²è¡Œä¸‹ä¸€å€‹é–‹ç™¼ä»»å‹™  ç•°æ­¥ï¼šæäº¤å¾Œå°±å¯ä»¥é–‹å§‹ä¸‹ä¸€å€‹é–‹ç™¼ä»»å‹™  Kent Beck ä¸å»ºè­°æ¡ç”¨ç•°æ­¥ï¼Œå› ç‚ºå¯èƒ½å­˜åœ¨æµªè²»ï¼Œex.ç•¶é–‹ç™¼äººå“¡å·²ç¶“åœ¨åšä¸‹ä¸€å€‹ä»»å‹™æ™‚ï¼Œè¢«é€šçŸ¥ä¸Šä¸€å€‹é©—è­‰æ²’éï¼Œéœ€è¦èª¿æ•´ï¼Œé–‹ç™¼äººå“¡éœ€è¦å›æƒ³ç•¶åˆåšäº†ä»€éº¼  9.2.3 è‡ªæŸ¥è¡¨   å¯ä»¥å¾ä»¥ä¸‹å…­å€‹é¢å‘ä¾†æª¢æŸ¥æ˜¯å¦è‡ªå·±å·²ç¶“ç¬¦åˆæŒçºŒæ•´åˆçš„æœ€ä½³ç‹€æ…‹  ä¸»ç·šé–‹ç™¼ï¼Œé »ç¹æäº¤ï¼šé–‹ç™¼åˆ†ä¹‹ç”Ÿå‘½é€±æœŸä¸è¶…éä¸‰å¤©  æ¯æ¬¡æäº¤éƒ½æ˜¯ä¸€å€‹å®Œæ•´çš„ä»»å‹™  è®“æäº¤çš„å»ºç½®éƒ½å¯ä»¥åœ¨ 10 åˆ†é˜å…§å®Œæˆï¼šå°¤å…¶ä½¿ç”¨åŒæ­¥æ¨¡å¼(åƒè€ƒ 9.2.2)  æäº¤å»ºç½®å¤±æ•—å¾Œæ‡‰ç¦æ­¢åœ˜éšŠæˆå“¡æäº¤æ–°çš„ç¨‹å¼ç¢¼ï¼Œä¹Ÿä¸å…è¨±å…¶ä»–äºº check out è©²ç¨‹å¼ç¢¼\n   ç•¶åœ˜éšŠæˆå“¡æäº¤ä»£ç¢¼å¼•èµ·å»ºç½®å¤±æ•—ï¼Œèªªæ˜ç³»çµ±æ•´é«”å“è³ªå¯èƒ½å­˜åœ¨å•é¡Œï¼Œå› æ­¤æ•´å€‹åœ˜éšŠä¸æ‡‰è©²ç¹¼çºŒæäº¤æ–°çš„ç¨‹å¼ç¢¼ï¼Œè€Œæ˜¯é›†ä¸­ç«åŠ›è§£æ±ºé€™å€‹å•é¡Œ  ç«‹å³åœ¨ååˆ†é˜å…§ä¿®å¾©å·²å¤±æ•—çš„æäº¤å»ºç½®ï¼Œå¦å‰‡è©²ä¸»ç·šåˆ†æ”¯é€€å›ä¸Šä¸€å€‹æäº¤é»\n   å› ç‚ºå•é¡Œè¢«ä¿®å¾©ä¹‹å‰ï¼Œé€™å€‹åˆ†æ”¯ä¸Šçš„å…§å®¹ç„¡æ³•ä¸Šåˆ° releaseï¼Œå°è‡´å…¶ä»–äººå°±ç®—æäº¤å…§å®¹ï¼Œé€™å€‹åˆ†æ”¯çš„å…§å®¹é‚„æ˜¯ä¸èƒ½ç”¨  ç‚ºäº†è®“å…¶ä»–äººçš„å…§å®¹å¯ä»¥æŒçºŒæäº¤ï¼Œå‡ºå•é¡Œçš„åŸé–‹ç™¼æœ‰è¶³å¤ çš„æ™‚é–“é€²è¡Œæ€è€ƒèˆ‡ä¿®å¾©ï¼Œæ¨æ£„é€™å€‹æœ‰å•é¡Œçš„æäº¤  è‡ªå‹•åŒ–å»ºç½®é©—è­‰é€šéå¾Œï¼Œå°è»Ÿé«”å“è³ªæœ‰è¼ƒå¤§çš„ä¿¡å¿ƒ\n   åä¾‹æƒ…å¢ƒï¼šåœ˜éšŠä¸¦ä¸è¦ºå¾—ä½¿ç”¨æŒçºŒæ•´åˆæœ‰ä»€éº¼ç”¨è™•ï¼Œå› ç‚ºä»–å€‘æœ‰å¾ˆå¤šè‡ªå‹•åŒ–æ¸¬è©¦æ¡ˆä¾‹ï¼Œä½†æ˜¯éš¨è‘—ç³»çµ±åŠŸèƒ½å¢åŠ ï¼Œæ–°å¢çš„æ¸¬è©¦æ¡ˆä¾‹å»å¾ˆå°‘ï¼Œè€Œä¸”ç¾æœ‰çš„æ¸¬è©¦æ¡ˆä¾‹æ¸¬è©¦å¤±æ•—å¾Œï¼Œå¦‚æœè©²å•é¡Œå¤ªé›£ä¿®å¾©ï¼Œå°±åˆªé™¤é€™å€‹æ¸¬è©¦æ¡ˆä¾‹(è§£æ±ºæå‡ºå•é¡Œçš„äººï¼Œå°±æ˜¯è§£æ±ºå•é¡Œ ğŸ˜€)  9.3 é€Ÿåº¦èˆ‡å“è³ªæ¬Šè¡¡  9.3.1 åˆ†ç´šå»ºç½®   éš¨è‘—ç³»çµ±åŠŸèƒ½æ“´å±•ï¼Œè‡ªå‹•åŒ–æ¸¬è©¦çš„æ•¸é‡æœƒè¶Šä¾†è¶Šå¤šï¼Œè¶…æœæˆ‘å€‘å¯ä»¥å¿å—çš„å»ºç½®æ™‚é–“(10 åˆ†é˜)  å¯ä»¥å°‡è‡ªå‹•åŒ–æ¸¬è©¦æ‹†æˆå…©å€‹éƒ¨åˆ†ï¼Œå°‡é‹è¡Œé€Ÿåº¦è¼ƒå¿«ï¼Œé‡é»é©—è­‰é …ç›®æ”¾å…¥æäº¤å»ºç½®è£¡é¢ï¼Œé‹è¡Œè¼ƒæ…¢ã€ä¸å¸¸é©—è­‰å¤±æ•—çš„æ¸¬è©¦æ¡ˆä¾‹ï¼Œæ”¾åœ¨æ¬¡ç´šå»ºç½®é©—è­‰çš„å…§å®¹  æ¬¡ç´šæ§‹å»ºå¤±æ•—ï¼Œæ‡‰è©²ç«‹å³ç™¼å‡ºé€šçŸ¥ï¼Œä¸¦ä¸”ç«‹å³ä¿®å¾©ï¼Œåœ¨ä¿®å¾©ä¹‹å‰ä¸å¾—æäº¤æ–°ç¨‹å¼ç¢¼  9.3.2 å¤šäººåŒæ™‚æäº¤çš„å»ºç½®   å¦‚æœç›®å‰æ¬¡ç´šå»ºç½®(æ¯æ¬¡å¯èƒ½éœ€è¦åŸ·è¡Œ 30 åˆ†é˜ä»¥ä¸Š)é€²è¡Œä¸­ï¼Œæ–°æäº¤çš„ç¨‹å¼ç¢¼å°±ä¸åŸ·è¡Œæ¬¡ç´šå»ºç½®ï¼Œåªåšä¸»è¦æ§‹å»º  ç›´åˆ°æ¬¡ç´šå»ºç½®å®Œæˆå¾Œï¼Œæ–°æäº¤çš„ç¨‹å¼ç¢¼(åˆä½µåˆ°å„²å­˜åº«)ï¼Œæ‰æœƒè§¸ç™¼ä¸‹ä¸€æ¬¡çš„æ¬¡ç´šå»ºç½®ï¼Œä¸­é–“çš„æ¬¡ç´šå»ºç½®å…¨éƒ¨è¢«çœç•¥\n   1.ç¯€çœå»ºç½®è³‡æº 2.åŒæ™‚é€²è¡Œå¦‚æœå‰è€…å£äº†ï¼Œå¾Œè€…åŸ·è¡Œçš„å…§å®¹å…¨æ²’æ„ç¾©    9.3.3 é›²ç«¯å»ºç½®çš„å¨åŠ›   ç·¨è­¯éç¨‹ä¸»è¦åˆ†ç‚ºé ç·¨è­¯ã€ç·¨è­¯ã€éˆçµ  å¯ä»¥é€éé›²ç«¯å¢é›†çš„æ¦‚å¿µåŒæ­¥åŸ·è¡Œï¼Œæ¸›å°‘æ•´é«”å»ºç½®æ™‚é–“çš„ç‚ºã€Œç·¨è­¯ã€ï¼Œå„æ©Ÿå™¨å®Œæˆç·¨è­¯å¾Œï¼Œå†äº¤ç”±ä¸€å°ä¸»æ©Ÿåšæ•´åˆçš„éˆçµ    9.4 åœ¨åœ˜éšŠä¸­å¯¦æ–½æŒçºŒæ•´åˆå¯¦ä½œ  9.4.1 å¯¦ä½œäº”æ­¥æ³•   å»ºç½®è…³æœ¬åŒ–ï¼Œæ­å»ºæŒçºŒæ•´åˆæ¡†æ¶\n   é¸æ“‡ä¸€æ¬¾æŒçºŒæ•´åˆå·¥ä½œï¼Œç›®å‰æ¯”è¼ƒå¤¯çš„æ˜¯ Jenkins  åœ¨è©²æŒçºŒæ•´åˆå·¥å…·ä¸Šå»ºç«‹ä¸€å€‹å»ºç½®ä»»å‹™ï¼Œå¯ä»¥å¾ä½ çš„å„²å­˜åº«æ‹‰å–ç¨‹å¼ç¢¼  å¯«ä¸€å€‹è…³æœ¬æ–‡ä»¶ï¼Œå¯ä»¥è‡ªå‹•å®Œæˆç³»çµ±çš„ç·¨è­¯ã€å»ºç½®ã€æ‰“åŒ…  ä¿®æ”¹æŒçºŒæ•´åˆå·¥ä½œä¸Šçš„ä»»å‹™(ç¬¬äºŒæ­¥)ï¼Œè®“ä»–å¯ä»¥èª¿ç”¨ç¬¬ä¸‰æ­¥çš„è…³æœ¬  å‘å„²å­˜åº«æäº¤ä¸€æ¬¡ç¨‹å¼ç¢¼ï¼Œé©—è­‰æŒçºŒæ•´åˆå·¥ä½œå¯ä»¥ç™¼ç¾æ–°ä»£ç¢¼ä¸¦æ‹‰å–æ­£ç¢ºçš„ç¨‹å¼ç¢¼ç‰ˆæœ¬ï¼Œé‹è¡ŒæŒ‡å®šçš„è…³æœ¬  æ·»åŠ å·²æœ‰çš„è‡ªå‹•åŒ–é©—è­‰é›†åˆ\n   å¢åŠ è‡ªå‹•åŒ–æ¸¬è©¦æ¡ˆä¾‹  åŠ å…¥ç¨‹å¼ç¢¼è¦ç¯„æƒæ\n   SonarQubeã€Android Liteã€CCCCã€cppcheckã€Clangã€Pclint  é¸æ“‡åˆ©æ–¼æŒçºŒæ•´åˆçš„åˆ†æ”¯ç­–ç•¥\n   å¦‚æœåˆ†æ”¯éå¤šï¼Œå‰‡ä¸åˆ©æ–¼åœ˜éšŠæŒçºŒæ•´åˆçš„æ•ˆæœ  å»ºç«‹å…­æ­¥æäº¤æ³•  æŒçºŒå„ªåŒ–\n   åˆæœŸæ•´å€‹æ©Ÿåˆ¶é‹ä½œæ­£å¸¸ï¼Œä½†éš¨è‘—ç³»çµ±åŠŸèƒ½å¢åŠ ï¼Œæ•´å€‹éç¨‹å‡ºç¾äº†å•é¡Œ  ex.æ¸¬è©¦æ¡ˆä¾‹æœ¬èº«çš„ç¨‹å¼ç¢¼å“è³ªä¸è‰¯ï¼Œå°è‡´éš¨æ©Ÿçš„æ¸¬è©¦å¤±æ•—  å„ªåŒ–ç·¨è­¯æ‰“åŒ…çš„æ™‚é–“  èª¿æ•´ç¨‹å¼ç¢¼åˆ†æ”¯ç­–ç•¥  è‡ªå‹•åŒ–æ¸¬è©¦æ¡ˆä¾‹çš„åˆ†ç´š(ex.å“ªäº›æ‡‰è©²æ”¾åœ¨æ¬¡ç´šæ§‹å»º)  å„ªåŒ–ç¨‹å¼ç¢¼è¦ç¯„æƒæ(ex.èª¿æ•´è¦å‰‡)  ç”Ÿæˆæ•¸æ“šå ±å‘Šï¼Œæ–¹ä¾¿åœ˜éšŠäº†è§£ç›®å‰çš„ç¨‹å¼ç¢¼å“è³ªç‹€æ…‹  å·¥ç¨‹å¸«æ”¹è®Šç¿’æ…£ï¼Œä¸¦æå‡æŠ€èƒ½\n   è¦æ±‚å·¥ç¨‹å¸«ä¸»å‹•ææ—©æ•´åˆï¼Œéæ¨é²æ•´åˆ(ä¸è¦ä¸€å¤§åŒ…æ‰æ PRï¼Œä¸€å€‹ PR ä¸è¦åŒ…å«å¤šå€‹ä»»å‹™)  å­¸ç¿’æŒçºŒæ•´åˆçš„å·¥å…·å¦‚ä½•ä½¿ç”¨    9.4.2 åˆ†æ”¯ç­–ç•¥èˆ‡éƒ¨ç½²æµæ°´ç·š   ä¸»ç·šé–‹ç™¼ï¼Œä¸»ç·šç™¼å¸ƒï¼šé–‹ç™¼åœ˜éšŠåªè¦æ¶è¨­ä¸€å€‹æŒçºŒæ•´åˆæœå‹™ï¼Œé—œæ³¨ä¸»ç·šçš„ç¨‹å¼ç¢¼è®Šæ›´å³å¯  ä¸»ç·šé–‹ç™¼ï¼Œåˆ†æ”¯ç™¼å¸ƒï¼šç•¶æ–°å¢åˆ†æ”¯æ™‚ï¼Œéœ€è¦åŠ å¢é€™å€‹åˆ†æ”¯çš„éƒ¨ç½²æµæ°´ç·š  åˆ†æ”¯é–‹ç™¼ï¼Œä¸»ç·šç™¼å¸ƒï¼š(åªæœ‰ä¸€å€‹å„²å­˜åº«ï¼Œä½†æ˜¯æœ‰å¤šå€‹ç³»çµ±)æ¯å€‹åˆ†æ”¯éƒ½éœ€è¦æœ‰éƒ¨ç½²æµæ°´ç·šï¼Œç•¶æœ‰äººä½µå…¥ä¸»ç·šè§¸ç™¼ä¸»ç·šéƒ¨ç½²æµæ°´ç·šï¼Œç•¶åˆ†æ”¯ä¸éœ€è¦æ™‚ï¼ŒåŒæ™‚å¯ä»¥ç æ‰å…¶éƒ¨ç½²æµæ°´ç·š  å¤šå»ºç½®é›†æˆï¼šç³»çµ±ä¾†è‡ªæ–¼å¤šå€‹å„²å­˜åº«ï¼Œå€‹åˆ¥å»ºç½®å®Œè§¸ç™¼ç”¢å“éƒ¨ç½²æµæ°´ç·š        9.5 å¸¸è¦‹åŸ·è¡Œå•é¡Œ   åœ˜éšŠåŸæœ‰å·¥ä½œç¿’æ…£ï¼Œä¾‹å¦‚\n   é–‹ç™¼äººå“¡åœ¨è‡ªå·±çš„é–‹ç™¼ä»»å‹™å®Œæˆä¹‹å‰ä¸å¸Œæœ›èˆ‡åˆ¥äººçš„ç¨‹å¼ç¢¼é€²è¡Œæ•´åˆ  æ¸¬è©¦äººå“¡å¸Œæœ›åœ¨æ•´æ‰¹çš„é–‹ç™¼å®Œæˆå¾Œå†é€²è¡Œé›†ä¸­æ¸¬è©¦  å°æ–¼ç¨‹å¼ç¢¼éœæ…‹æƒæå•é¡Œè¦–è€Œä¸è¦‹ï¼Œ1.åœ˜éšŠå°æ–¼æƒæè¦ç¯„æ²’æœ‰å¤§å®¶éƒ½èªåŒ 2.å•é¡Œå¤ªå¤šæ²’æ™‚é–“ä¿®  è‡ªå‹•åŒ–æ¸¬è©¦æ¡ˆä¾‹ä¸å¤ ï¼Œå°è‡´æ¡ç”¨äººå·¥æ¸¬è©¦ï¼Œå¿…é ˆé–‹ç™¼å®Œæ‰æœ‰è¾¦æ³•æ•´æ‰¹æ¸¬è©¦ï¼Œç„¡æ³•åœ¨æ¯æ¬¡æäº¤æ™‚å°±é€²è¡Œæ¸¬è©¦  æŠ€è¡“ç ”ç™¼ç®¡ç†ç¼ºä¹å°è‡´ï¼Œä¾‹å¦‚\n   é–‹ç™¼ã€æ¸¬è©¦å’Œç¶­é‹ç’°å¢ƒæ²’æœ‰åˆ†é›¢æˆ–åˆ†é›¢ä¸å¾¹åº•ï¼Œå¤šäººå…±ç”¨æ¸¬è©¦ç’°å¢ƒ  å„é¡æ¸¬è©¦ç’°å¢ƒçš„æº–å‚™å·¥ä½œå¾ˆè¤‡é›œ  9.6 å°çµ   ä¸»ç·šé–‹ç™¼ï¼Œé«˜é »æäº¤ä»£ç¢¼  æ¯æ¬¡æäº¤éƒ½æ˜¯å®Œæ•´æœ‰æ„ç¾©çš„ä»»å‹™  æäº¤å»ºç½®éšæ®µåœ¨ååˆ†é˜å…§å®Œæˆ  æäº¤å»ºç½®å¤±æ•—å¾Œï¼Œç«‹å³ä¿®å¾©ï¼Œå…¶ä»–äººä¸å¾—åœ¨ä¿®å¾©å‰æäº¤ä»£ç¢¼  æ‡‰è©²åœ¨ååˆ†é˜å…§ä¿®å¾©å¤±æ•—ï¼Œå¦å‰‡æ”¾æ£„é€™æ¬¡çš„æäº¤  è‡ªå‹•åŒ–å»ºç½®æˆåŠŸå¾Œï¼Œåœ˜éšŠå°æ–¼ç³»çµ±å“è³ªæ¯”è¼ƒæœ‰ä¿¡å¿ƒ"},{"id":"content:4.cicd-2.0:10.chapter10.md","path":"/cicd-2.0/chapter10","dir":"cicd-2.0","title":"10 è‡ªå‹•åŒ–æ¸¬è©¦ç­–ç•¥èˆ‡æ–¹æ³•","description":"","keywords":["å‰è¨€","10.1 è‡ªå‹•åŒ–æ¸¬è©¦çš„è‡ªèº«å®šä½","10.2 çªç ´å‚³çµ±è‡ªå‹•åŒ–æ¸¬è©¦çš„å›°å¢ƒ","10.3 è‡ªå‹•åŒ–æ¸¬è©¦çš„å¯¦æ–½ç­–ç•¥","10.4 ç”¨æˆ¶é©—æ”¶è‡ªå‹•åŒ–æ¸¬è©¦è¦é»","10.5 å…¶ä»–è³ªé‡æª¢æŸ¥æ–¹æ³•","10.6 å°çµ"],"body":"  å‰è¨€  æƒ³ç™¼æ®æŒçºŒæ•´åˆçš„çœŸæ­£ä½œç”¨ï¼Œä¸€å€‹è‡³é—œé‡è¦çš„éƒ¨åˆ†å°±æ˜¯è‡ªå‹•åŒ–æ¸¬è©¦ç­–ç•¥ã€‚  æœ¬ç« ä¸»è¦è¨è«–è»Ÿé«”é€²å…¥ç”Ÿç”¢ç’°å¢ƒä¹‹å‰çš„   ã€Œè‡ªå‹•åŒ–æ¸¬è©¦ç®¡ç†ã€  ï¼ŒåŒ…å«ï¼š   è‡ªå‹•åŒ–æ¸¬è©¦çš„å®šä½ï¼š\n   åŒ…å«å“ªäº›æ¸¬è©¦ï¼Œæ€éº¼åˆ†é¡ï¼Ÿ  å“ªäº›å¯ä»¥è¢«è‡ªå‹•åŒ–ï¼Ÿ  æœ¬ç« ç¯€ä¸»è¦æ¢è¨å“ªäº›æ¸¬è©¦ï¼Ÿ  å‚³çµ±è‡ªå‹•åŒ–æ¸¬è©¦çš„å›°å¢ƒï¼š\n   éå»å¸¸è¦‹çš„ä¸€ç¨®è‡ªå‹•åŒ–æ¸¬è©¦ç­–ç•¥æ¨¡å¼ï¼Œå®ƒå“ªäº›å•é¡Œï¼Ÿ  ä½œç‚ºè‰¯å¥½è‡ªå‹•åŒ–æ¸¬è©¦çš„ä¸€å€‹åä¾‹  å¦‚ä½•å¯¦è¸è‰¯å¥½çš„è‡ªå‹•åŒ–æ¸¬è©¦\n   è‡ªå‹•åŒ–æ¸¬è©¦çš„åˆ†å±¤  æ¸¬è©¦æ¡ˆä¾‹çš„ç®¡ç†ã€å¾ä½•é–‹å§‹åšè‡ªå‹•åŒ–æ¸¬è©¦â€¦  10.1 è‡ªå‹•åŒ–æ¸¬è©¦çš„è‡ªèº«å®šä½  æ¸¬è©¦é ˜åŸŸçš„4é¡æ´»å‹•   ã€Œå•é¡ŒèªçŸ¥ã€ï¼šå°æ¥­å‹™å•é¡Œæœ¬èº«çš„ç†è§£èˆ‡èªè­˜ (äº†è§£æ¸¬è©¦çš„ç›®æ¨™æ˜¯ä»€éº¼)  ã€Œåˆ†æã€ï¼šåˆ†æã€è¨­è¨ˆæ¸¬è©¦æµç¨‹æˆ–å¯¦ä½œæ¸¬è©¦ç¨‹å¼ç¢¼ (ä»¥æœ€ä½çš„æ¸¬è©¦æˆæœ¬ï¼Œé”åˆ°é©—è­‰çš„ç›®æ¨™)  ã€ŒåŸ·è¡Œã€ï¼šåŸ·è¡Œæ¸¬è©¦ï¼Œå¾—åˆ°æ¸¬è©¦çµæœæ•¸æ“š  ã€Œæ±ºç­–ã€ï¼šæ ¹æ“šæ¸¬è©¦çµæœé€²è¡Œä¸‹ä¸€æ­¥è¡Œå‹•åˆ¤æ–·   å…¶ä¸­çš„ã€ŒåŸ·è¡Œã€å­˜åœ¨å¤§é‡é‡è¤‡æ€§å‹å‹•ï¼Œè‡ªå‹•åŒ–æ¸¬è©¦èƒ½å¤ é™ä½æ­¤æˆæœ¬  å›æ­¸æ¸¬è©¦ï¼šé‡è¤‡åŸ·è¡Œä»¥å‰çš„å…¨éƒ¨æˆ–éƒ¨åˆ†ç›¸åŒçš„æ¸¬è©¦å·¥ä½œ\n   ç¢ºä¿éå»é–‹ç™¼çš„åŠŸèƒ½æœå‹™éƒ½æœ‰æ­£å¸¸é‹ä½œ  ç”¢å“ç”Ÿå‘½é€±æœŸè¶Šé•·ï¼Œå›æ­¸æ¸¬è©¦æ¡ˆä¾‹åº«å°±è¶Šå¤§ï¼Œå›æ­¸æ¸¬è©¦çš„å·¥ä½œè² æ“”è¶Šé‡  Brian Marick æ¸¬è©¦4è±¡é™  \næœ‰å¾ˆå¤šä¸åŒçš„æ¸¬è©¦ï¼Œå¦‚ä½•åˆ†é¡ï¼Ÿå“ªäº›æ¸¬è©¦å¯ä»¥è¢«è‡ªå‹•åŒ–ï¼Ÿ\n     å››å€‹é¢å‘\n   é¢å‘æ¥­å‹™å°ˆå®¶ï¼šèƒ½èˆ‡æ¥­å‹™å°ˆå®¶ç„¡éšœç¤™æºé€š (ex: PMã€ä½¿ç”¨è€…)  é¢å‘æŠ€è¡“äººå“¡ï¼šæ˜“èˆ‡æŠ€è¡“äººå“¡é”æˆå…±è­˜ (ex: é–‹ç™¼å·¥ç¨‹å¸«)  æ”¯æŒç·¨ç¨‹ï¼šç›®æ¨™æ˜¯ç‚ºäº†å¹«åŠ©ç ”ç™¼åœ˜éšŠæª¢æŸ¥åŠŸèƒ½éœ€æ±‚æ˜¯å¦é–‹ç™¼å®Œæˆ (ex: åŠŸèƒ½æ€§å’ŒUIæ˜¯å¦ä¸€è‡´)  è©•åˆ¤é …ç›®ï¼šç›®æ¨™æ˜¯ç‚ºäº†æ‰¾å‡ºç”¢å“æ˜¯å¦æœ‰ç¼ºé™ (ex: ç”¢å“æ˜¯å¦æ»¿è¶³å®¢æˆ¶çš„å¯¦éš›éœ€æ±‚)  å››å€‹è±¡é™\n   ç¬¬ä¸€è±¡é™ï¼š(æ‰‹å‹•) ç”¨æˆ¶æ¼”ç¤ºdemoã€å¯ç”¨æ€§æ¸¬è©¦ã€æ¢ç´¢æ€§æ¸¬è©¦  ç¬¬äºŒè±¡é™ï¼š  (è‡ªå‹•åŒ–)  åŠŸèƒ½é©—æ”¶æ¸¬è©¦ => ä»¥ç”¨æˆ¶çš„è§’åº¦  ç¬¬ä¸‰è±¡é™ï¼š  (è‡ªå‹•åŒ–)  ç³»çµ±é›†æˆæ¸¬è©¦ã€çµ„ä»¶æ¸¬è©¦ã€å–®å…ƒæ¸¬è©¦ => ç³»çµ±è§’åº¦ï¼ŒæŠ€è¡“å¯¦ç¾çš„é©—è­‰  ç¬¬å››è±¡é™ï¼š(è‡ªå‹•åŒ–/æ‰‹å‹•) éåŠŸèƒ½é©—æ”¶æ¸¬è©¦(æ€§èƒ½æ¸¬è©¦ã€å®¹é‡æ¸¬è©¦ã€å¯é æ€§æ¸¬è©¦â€¦)  æœ¬ç« ä¸»è¦è¨è«–ç¬¬äºŒã€ç¬¬ä¸‰è±¡é™çš„è‡ªå‹•åŒ–æ¸¬è©¦  10.1.1 è‡ªå‹•åŒ–æ¸¬è©¦çš„å„ªå‹¢  \nç›¸è¼ƒæ–¼æ‰‹å‹•æ¸¬è©¦ï¼Œè‡ªå‹•åŒ–æ¸¬è©¦æœ‰å“ªäº›å„ªå‹¢  \n(æ©Ÿæ¢°è‡ªå‹•åŒ– v.s. äººçš„æ‰‹å‹•åŸ·è¡Œ)\n  ã€Œæ¸›å°‘å¤±èª¤ç‡ï¼Œæé«˜æº–ç¢ºæ€§ã€:   æ©Ÿæ¢°ä¸å—æƒ…ç·’ã€ç¶“é©—çš„å½±éŸ¿ï¼Œæ¯æ¬¡åŸ·è¡Œéƒ½é‡è¦†ç›¸åŒçš„å‹•ä½œä¸¦ç´€éŒ„è©³ç´°çš„çµæœ  ã€Œç¯€çœæ™‚é–“å’ŒåŸ·è¡Œæˆæœ¬ã€   åœ¨é•·ç”Ÿå‘½é€±æœŸã€ç™¼ä½ˆé »ç‡é«˜çš„ç”¢å“ä¸­ï¼Œæ™‚é–“æˆæœ¬çš„ç¯€çœç›¸ç•¶æ˜é¡¯  ã€Œæå‡æ¸¬è©¦è¦†è“‹åº¦ã€:   è‡ªå‹•åŒ–æ¸¬è©¦å¯ä»¥å¢åŠ æ¸¬è©¦çš„æ·±åº¦å’Œç¯„åœï¼Œä»¥æé«˜è»Ÿä»¶è³ªé‡  ex: å…§å­˜ä½¿ç”¨ã€å…§éƒ¨ç¨‹åºç‹€æ…‹â€¦  ã€Œåšæ‰‹å‹•ç„¡æ³•å®Œæˆçš„æ¸¬è©¦ã€:   æ‰‹å‹•æ¸¬è©¦é›£åšåˆ°å¦‚æ‘¸æ“¬æˆåƒä¸Šè¬å€‹è™›æ“¬ç”¨æˆ¶åŒæ™‚é–“èˆ‡è»Ÿé«”é€²è¡Œäº’å‹• (mock)  ã€Œç‚ºé–‹ç™¼äººå“¡æé«˜è³ªé‡åé¥‹é€Ÿåº¦ã€:   è®“é–‹ç™¼äººå“¡å¯ä»¥æ–¹ä¾¿çš„åŸ·è¡Œï¼Œå¿«é€Ÿç™¼ç¾å•é¡Œ  ã€Œæé«˜åœ˜éšŠå£«æ°£ã€:   è®“åœ˜éšŠå¯ä»¥å°‡æ™‚é–“èŠ±åœ¨æ›´å…·æŒ‘æˆ°æ€§å’Œæ›´æœ‰åƒ¹å€¼çš„æ´»å‹•ä¸­  ex: æ¢ç´¢æ€§æ¸¬è©¦  10.1.2 è‡ªå‹•åŒ–æ¸¬è©¦æ‰€éœ€çš„æŠ•å…¥  \näº‹ç‰©éƒ½å…·æœ‰å…©é¢æ€§ï¼Œè‡ªå‹•åŒ–æ¸¬è©¦å¸¶ä¾†æ”¶ç›Šçš„åŒæ™‚ï¼Œä¹Ÿæœƒç”¢ç”Ÿæˆæœ¬\n     æˆæœ¬  èªªæ˜    å·¥å…·æŠ•å…¥æˆæœ¬  æ¸¬è©¦å·¥å…·ã€æ¸¬è©¦æ¡†æ¶çš„ç ”ç©¶èˆ‡åŸ¹è¨“   æ¸¬è©¦æ¡ˆä¾‹ç¶­è­·æˆæœ¬  åŠŸèƒ½èª¿æ•´çš„åŒæ™‚ï¼Œéœ€ç¶­è­·ç›¸å°æ‡‰çš„æ¸¬è©¦æ¡ˆä¾‹   å°ˆæ¥­æŠ€èƒ½äººå“¡çš„æˆæœ¬  æ¸¬è©¦ç·¨ç¨‹ã€è¨­è¨ˆè¦åŠƒçš„ç¶“é©—ã€åŸ¹è¨“   è¨­å‚™è³‡æºçš„æŠ•å…¥  è‡ªå‹•åŒ–æ¸¬è©¦ç„¡æ³•å®Œå…¨æ›¿ä»£æ‰‹å‹•æ¸¬è©¦  ä¿ç•™æ‰‹å‹•æ¸¬è©¦æ‰€éœ€çš„æ¸¬è©¦ç’°å¢ƒï¼Œä¹Ÿè¦ç‚ºè‡ªå‹•åŒ–æ¸¬è©¦çš„åŸ·è¡Œæº–å‚™ç›¸æ‡‰çš„æ¸¬è©¦ç’°å¢ƒ  æ‰‹å‹•æ¸¬è©¦èˆ‡è‡ªå‹•åŒ–æ¸¬è©¦çš„ä¸åŒ  \nè‡ªå‹•åŒ–æ¸¬è©¦æœ‰å¾ˆå¤šå„ªå‹¢ï¼Œä½†æ‰‹å‹•æ¸¬è©¦ä¾èˆŠä¸å¯å®Œå…¨è¢«å–ä»£\n  \nç‚ºä»€éº¼ï¼Ÿå…©è€…çš„æœ¬è³ªä¸Šæœ‰å“ªäº›ä¸åŒï¼Ÿ\n   è‡ªå‹•åŒ–æ¸¬è©¦   ç„¡ä¸»è§€æ„è­˜ï¼Œå®ƒåªåšè…³æœ¬è¦æ±‚å®ƒåšçš„äº‹  æ¯”è¼ƒæ²’æœ‰ç„¡ä¸»å‹•è§€å¯Ÿã€ä¸»å‹•èªçŸ¥å’Œåˆ†æçš„èƒ½åŠ›ï¼Œæ²’æœ‰å‰µé€ åŠ›  æ“…é•·å›ç­”ï¼šç³»çµ±æ˜¯å¦ç…§æˆ‘å€‘ã€Œé å…ˆè¨­è¨ˆã€çš„æ–¹å¼æ­£ç¢ºé‹è¡Œï¼Ÿ  ex: ç”¨æˆ¶åŠŸèƒ½é©—æ”¶æ¸¬è©¦  æ‰‹å‹•æ¸¬è©¦   æœ‰äººç‚ºä¸»è§€æ„è­˜çš„ä»‹å…¥  å…·ä¸»å‹•è§€å¯Ÿã€å­¸ç¿’ã€åˆ†æã€å‰µé€ åŠ›  æ“…é•·å›ç­”ï¼šæˆ‘å€‘æ˜¯å¦æ­£åœ¨é–‹ç™¼ä¸€å€‹æ­£ç¢ºçš„ï¼Œæ»¿è¶³ç”¨æˆ¶æœŸæœ›çš„è»Ÿé«”ç³»çµ±ï¼Ÿ  ex: æ¢ç´¢æ€§æ¸¬è©¦  è‡ªå‹•åŒ–æ¸¬è©¦èˆ‡æ‰‹å‹•æ¸¬è©¦çš„æˆæœ¬æ”¶ç›Šå°æ¯”ç¤ºæ„åœ–    10.2 çªç ´å‚³çµ±è‡ªå‹•åŒ–æ¸¬è©¦çš„å›°å¢ƒ   è‡ªå‹•åŒ–æ¸¬è©¦å¸¸ä½œç‚ºææ¸¬å‰çš„æª¢é©—æ¨™æº– (æäº¤çµ¦æ‰‹å‹•æ¸¬è©¦ä¹‹å‰ï¼Œå…ˆé‹è¡Œè‡ªå‹•åŒ–æ¸¬è©¦æ¡ˆä¾‹)  å‚³çµ±è‡ªå‹•åŒ–æ¸¬è©¦çš„å‰µå»ºæµç¨‹     æ¸¬è©¦åˆ†æè€… => åˆ†ææ¸¬è©¦æ¡ˆä¾‹ï¼Œä¸¦æ–‡æª”åŒ–(æ’°å¯«æ¸¬è©¦æµç¨‹çš„æ–‡æª”)  æ¸¬è©¦åŸ·è¡Œè€… => ç…§æ¸¬è©¦æµç¨‹æ–‡ä»¶åŸ·è¡Œæ‰‹å‹•æ¸¬è©¦ï¼Œç™¼ç¾BUGå‘é–‹ç™¼äººå“¡å ±å‘Š  é–‹ç™¼äººå“¡   => ä¿®å¾©bug  æ¸¬è©¦åŸ·è¡Œè€… => å†æ¬¡åŸ·è¡Œæ¸¬è©¦ï¼Œç›´è‡³é©—è­‰é€šé  æ¸¬è©¦åˆ†æè€… => å¾æ¸¬è©¦æ¡ˆä¾‹æ–‡æª”ä¸­é¸å‡ºä¸€äº›é‡è¦ä¸”è®Šå‹•å¯èƒ½æ€§è¼ƒå°çš„æ¸¬è©¦æ¡ˆä¾‹  è‡ªå‹•åŒ–æ¸¬è©¦é–‹ç™¼è€… => å°æŒ‘é¸å‡ºä¾†çš„æ¸¬è©¦æ¡ˆä¾‹ç·¨å¯«è‡ªå‹•åŒ–è…³æœ¬ï¼Œä¸¦æ­¸å…¥è‡ªå‹•åŒ–å›æ­¸æ¸¬è©¦åº«  10.2.1 å‚³çµ±è‡ªå‹•åŒ–æ¸¬è©¦çš„ç‰¹é»  1. æ¸¬è©¦æ¡ˆä¾‹åŸ·è¡Œæˆæœ¬éé«˜   è™•ç†æµç¨‹è¼ƒé•·ã€è¦æº–å‚™çš„æ¸¬è©¦æ¡ˆä¾‹è¼ƒå¤šï¼Œéœ€èŠ±è²»è¼ƒå¤šæ™‚é–“ã€ç²¾åŠ›  å¤šç‚ºé»‘ç›’è‡ªå‹•åŒ–æ¸¬è©¦æ¡ˆä¾‹ï¼Œæ‘¸æ“¬çœŸå¯¦ç”¨æˆ¶çš„ä»‹é¢æ“ä½œä¾†é©…å‹•çš„ç³»çµ±é›†æˆæ¸¬è©¦  2. è‡ªå‹•åŒ–æ¸¬è©¦åŸ·è¡Œé »ç‡ä½   é€šå¸¸æ˜¯åœ¨è»Ÿä»¶é–‹ç™¼å®Œå¾Œ(ææ¸¬éšæ®µ)ã€æˆ–ç³»çµ±å›æ­¸æ¸¬è©¦(é‡è¦†ä»¥å‰å…¨éƒ¨æˆ–éƒ¨ä»½çš„æ¸¬è©¦å·¥ä½œ)ç”¨  3. è³ªé‡åé¥‹æ»¯å¾Œ   å¤§éƒ¨ä»½çš„æ¸¬è©¦æ¡ˆä¾‹æ˜¯å›æ­¸æ¸¬è©¦æ¡ˆä¾‹ï¼Œç„¡æ³•å°ç•¶å‰æ­£åœ¨é–‹ç™¼çš„æ–°åŠŸèƒ½é€²è¡Œæ¸¬è©¦  ç‚ºäº†èƒ½å®‰å…¨åŸ·è¡Œï¼Œç¶“å¸¸æœƒé€šé sleep æŒ‡ä»¤è®“æµç¨‹æš«åœï¼Œå†ç¹¼çºŒä¸‹ä¸€æµç¨‹ï¼Œå› æ­¤å¾ˆè€—æ™‚  4. æ¸¬è©¦ç’°å¢ƒæº–å‚™æˆæœ¬é«˜   å®Œå–„çš„æ¸¬è©¦æ•¸æ“šé›†  æ•´å¥—çš„é‹è¡Œç’°å¢ƒ  æ¸¬è©¦ç’°å¢ƒçš„æ­å»ºæ‰‹å‹•æ“ä½œè¼ƒå¤šï¼Œç”šè‡³éœ€è¦å¤šäººçš„åƒèˆ‡  5. æ¸¬è©¦çµæœå¯æ€§åº¦ä½   å—æ©Ÿæ¢°ç¡¬é«”é…ç½®ã€ç¶²è·¯ç‹€æ³ã€æ¡ˆä¾‹è™•ç†æ™‚é–“é•·åº¦ç­‰å½±éŸ¿ï¼Œå¯èƒ½æœƒç”¢ç”Ÿéš¨æ©Ÿå¤±æ•—  è‹¥ç•Œé¢éœ€æ±‚çš„æ”¹å‹•æ²’æœ‰å³æ™‚é€šçŸ¥æ¸¬è©¦åœ˜éšŠå°æ¸¬è©¦é€²è¡Œä¿®æ”¹ï¼Œä¹Ÿæœƒé€ æˆæ¸¬è©¦å¤±æ•—  é€™äº›å¤±æ•—éƒ½æœƒé€ æˆåœ˜éšŠå¯èƒ½æœƒæ›´å‚¾å‘æ–¼å¿½ç•¥é€™äº›è‡ªå‹•åŒ–æ¸¬è©¦æ¡ˆä¾‹çš„å­˜åœ¨  6. äººå“¡ä¾è³´æ€§å¼·   ç·¨å¯«è‡ªå‹•åŒ–æ¸¬è©¦æ¡ˆä¾‹å¾ˆå¤§ç¨‹åº¦ä¾è³´å°‘æ•¸æ¸¬è©¦é–‹ç™¼å°ˆè·äººå“¡  é©åˆå‚³çµ±è‡ªå‹•åŒ–æ¸¬è©¦çš„åœ˜éšŠ   é©åˆç”¨äºç™¼ä½ˆç‰ˆæœ¬é€±æœŸè¼ƒé•·ï¼Œä½¿ç”¨å‚³çµ±ç€‘å¸ƒé–‹ç™¼æ–¹æ³•çš„åœ˜éšŠ  ç¾ä»£è»Ÿä»¶ç‰ˆæœ¬è¿­ä»£é€Ÿåº¦è¶Šä¾†è¶Šå¿«ï¼Œé€™ç¨®è‡ªå‹•åŒ–æ¸¬è©¦æ¡ˆä¾‹çš„æŠ•è³‡å›å ±ç‡è¶Šä¾†è¶Šä½  åè©è§£é‡‹ï¼š   é»‘ç®±æ¸¬è©¦(ex: åŠŸèƒ½é©—æ”¶æ¸¬è©¦)\n   æŠŠæ¸¬è©¦è»Ÿä»¶ç•¶æˆé»‘ç®±ï¼Œä¸åœ¨ä¹å…§éƒ¨çš„å¯¦ä½œï¼Œåªåœ¨ä¹è¼¸å…¥è¼¸å‡ºçµæœæ˜¯å¦æ­£ç¢º  æ ¹æ“šç”¨æˆ¶èªªæ˜æ›¸ã€éœ€æ±‚æ–‡æª”ï¼Œå»é€²è¡Œæ“ä½œã€è¼¸å…¥æ¸¬è©¦  å„ªé»ï¼šç«™åœ¨ç”¨æˆ¶çš„ç«‹å ´é€²è¡Œæ¸¬è©¦  ç¼ºé»ï¼šç„¡æ³•å°ç¨‹åºå…§éƒ¨ç‰¹å®šçš„å…§å®¹é€²è¡Œæ¸¬è©¦  ç™½ç®±æ¸¬è©¦(ex: å–®å…ƒæ¸¬è©¦)\n   æŠŠè»Ÿé«”ç•¶æˆé€æ˜çš„ç›’å­ï¼Œåœ¨ä¹ç¨‹å¼å…§éƒ¨çš„é‹è¡Œé‚è¼¯ï¼Œå°å…¶çµæ§‹é€²è¡Œæ¸¬è©¦  å„ªé»ï¼šå°ç¨‹å¼å…§éƒ¨çš„å•é¡Œé€²è¡Œè¦†è“‹(ç›¡é‡ä½œåˆ°èƒ½å¤ è¦†è“‹åˆ°æ¯ä¸€è¡ŒåŸç¢¼ä¸­)  ç¼ºé»ï¼šç„¡æ³•æª¢é©—ç¨‹å¼å¤–éƒ¨çš„ç‰¹å¾µï¼Œä¹Ÿç„¡æ³•ç«™åœ¨ç”¨æˆ¶çš„è§’åº¦é€²è¡Œæ¸¬è©¦  10.2.2 è‡ªå‹•åŒ–æ¸¬è©¦çš„åˆ†å±¤   æœ¬ç« èšç„¦çš„æ¸¬è©¦é¡å‹ç‚º\n   ã€Œç”¨æˆ¶é©—æ”¶æ¸¬è©¦ã€(ç”¨æˆ¶è§’åº¦) ç¬¬äºŒè±¡é™  ã€Œç³»çµ±é›†æˆæ¸¬è©¦ã€(ç³»çµ±è§’åº¦) ç¬¬ä¸‰è±¡é™  å‚³çµ±è‡ªå‹•åŒ–æ¸¬è©¦æ–¹å¼ç”¢ç”Ÿçš„æ¸¬è©¦æ¡ˆä¾‹é¡å‹é€šå¸¸åä¸Šå±¤æ¸¬è©¦\n   å½¢æˆæ¸¬è©¦æ²ç­’å†°æ·‡æ·‹ (é ­é‡è…³è¼•) => ä¸åˆ©æ–¼æŒçºŒæ•´åˆ\n   è¢«æ¸¬ç¯„åœè¼ƒå¤§ï¼šåŸ·è¡Œæ™‚é–“æˆæœ¬ã€æº–å‚™æˆæœ¬éƒ½å¾ˆé«˜  æ¸¬è©¦æ²ç­’å†°æ·‡æ·‹    ã€Œå¿«ã€æ·ã€æ™‚ã€ä¿¡ã€  \nè‰¯å¥½çš„è‡ªå‹•åŒ–æ¸¬è©¦å¯¦è¸ï¼Œæ‡‰è©²è¦ã€Œå¿«ã€æ·ã€æ™‚ã€ä¿¡ã€\n     é …ç›®  èªªæ˜    å¿«é€Ÿ  æ¸¬è©¦æ¡ˆä¾‹çš„åŸ·è¡Œé€Ÿåº¦è¦å¿«  (æŒçºŒæ•´åˆçš„è¦æ±‚æ˜¯ï¼Œæœ€å¥½åœ¨ååˆ†é˜ä»¥å…§ï¼Œä¸è¦è¶…é15åˆ†é˜)   ä¾¿æ·  æ¯åå·¥ç¨‹å¸«éƒ½å¯æ–¹ä¾¿åŸ·è¡Œæ¸¬è©¦ï¼Œä¸æœƒå½±éŸ¿åˆ°ä»–äºº   åŠæ™‚  ä¸€ä½†åŠŸèƒ½ç™¼ç”Ÿè®ŠåŒ–ï¼Œå°±èƒ½é¦¬ä¸Šå‘ŠçŸ¥æœ¬æ¬¡ä»£ç¢¼è®Šæ›´å°è»Ÿé«”è³ªé‡çš„å½±éŸ¿   (è‹¥æ²’æœ‰ä¸€ç›´é–‹ç™¼æ–°æ¸¬è©¦æ¡ˆä¾‹å°æ–°åŠŸèƒ½å³æ™‚é©—è­‰ï¼Œæœƒå°è‡³åé¥‹é€Ÿåº¦çš„é™ä½)   å¯ä¿¡  ä¸å­˜åœ¨éš¨æ©Ÿå¤±æ•—çš„ç¾è±¡ã€‚  æŒçºŒæ•´åˆå¯¦è¸è¦æ±‚ä¸€ä½†è‡ªå‹•åŒ–æ¸¬è©¦æ¡ˆä¾‹å¤±æ•—ï¼Œå¿…é ˆç«‹å³ä¿®å¾©  éš¨æ©Ÿå¤±æ•—æœƒå¤§å¤§å¢åŠ å·¥ç¨‹å¸«çš„ç„¡æ•ˆæŠ•å…¥ï¼Œä¸¦é™ä½å·¥ç¨‹å¸«å°æŒçºŒæ•´åˆçš„ä¿¡å¿ƒ  \né€éå‚³çµ±è‡ªå‹•åŒ–æ¸¬è©¦çš„æ–¹å¼ï¼Œèƒ½é”åˆ°å¿«ã€æ·ã€æ™‚ã€ä¿¡å—ï¼Ÿ(å›°é›£)  \nå¿« => é™ä½æ™‚é–“æˆæœ¬  \nä¿¡ => æé«˜ç©©å®šæ€§\n   é–‹ç™¼ä¸Šå±¤æ¸¬è©¦æ¡ˆä¾‹æˆæœ¬è¼ƒé«˜ï¼Œç©©å®šæ€§å·®\n   è¢«æ¸¬å°è±¡ç¯„åœè¼ƒå¤§ï¼Œæ¸¬è³‡æº–å‚™å·¥ä½œé‡å¤§ï¼ŒåŸ·è¡Œæ™‚é–“ä¹…  æœ‰å¤–éƒ¨ä¾è³´ï¼Œä¸ç©©å®šæ€§ä¹Ÿé«˜  é™ä½æˆæœ¬ï¼š\n   æ¸›å°‘ä¸Šå±¤æ¸¬è©¦æ¡ˆä¾‹æ•¸é‡  å¢åŠ ä¸‹å±¤æ¸¬è©¦æ¡ˆä¾‹æ•¸é‡  å½¢æˆç©©å®šçš„æ­£ä¸‰è§’å½¢    10.2.3 ä¸åŒé¡å‹çš„æ¸¬è©¦é‡‘å­—å¡”  \nè»Ÿé«”æ¶æ§‹ç™¼å±•çš„è¶¨å‹¢æœã€Œæœå‹™åŒ–ã€å’Œã€Œå¾®æœå‹™åŒ–ã€ç™¼å±•   \næ€èµ·å¤§è¦æ¨¡åˆ†æ•£å¼æ‡‰ç”¨æœå‹™æµªæ½®\n   æœå‹™åŒ–ï¼šè»Ÿé«”æœå‹™ç”±ã€Œå–®é«”æ‡‰ç”¨æ¶æ§‹ã€æ‹†åˆ†æˆã€Œæœå‹™å°å‘çš„æ¶æ§‹(SOA)ã€\n   æœå‹™ä¹‹é–“é€éRPCç­‰æ–¹å¼é€²è¡Œæºé€š(RPCï¼šRemote Procedure Call, é ç«¯éç¨‹å‘¼å«)  å¾®æœå‹™åŒ–ï¼šæœå‹™å°å‘æ¶æ§‹ => å¾®æœå‹™æ¶æ§‹/å¾®æ ¸æ¶æ§‹\n   å¾Œå°æœå‹™åŒ–æ¨¡çµ„è¢«æ‹†åˆ†æˆå¾ˆå¤šçš„å¾®æœå‹™ (å¾®æœå‹™æ¶æ§‹)  å®¢æˆ¶ç«¯è»Ÿé«”å‘å…ƒä»¶åŒ–æˆ–å¾®æ ¸æ¶æ§‹ç™¼å±•   (å¾®æ ¸æ¶æ§‹)    1. å¾®æ ¸æ¶æ§‹çš„æ¸¬è©¦é‡‘å­—å¡”     ç«¯åˆ°ç«¯è‡ªå‹•åŒ–æ¸¬è©¦\n    ã€Œæ‘¸æ“¬ä»‹é¢æ“ä½œã€  ä¾†é©…å‹•çš„è‡ªå‹•åŒ–æ¸¬è©¦  APIè‡ªå‹•åŒ–æ¸¬è©¦\n   UIå±¤ä¹‹ä¸‹ï¼Œ   ã€Œé€éAPIä»‹é¢ã€  ä¾†é©…å‹•ä¸‹å±¤æ¥­å‹™é‚è¼¯çš„è‡ªå‹•åŒ–æ¸¬è©¦  å…ƒä»¶æˆ–å¤–æ›é–“æœå‹™çš„ä»‹é¢è‡ªå‹•åŒ–æ¸¬è©¦\n    ã€Œå…©å€‹æˆ–å…©å€‹ä»¥ä¸Šå…ƒä»¶(å¤–æ›)é–“ã€  çš„åŠŸèƒ½æ­£ç¢ºæ€§  å…ƒä»¶æ¸¬è©¦\n   å°   ã€Œå–®å€‹å…ƒä»¶æˆ–æ¡†æ¶ã€  æœ¬èº«é€²è¡Œå“è³ªé©—è­‰  è‡ªå‹•åŒ–å–®å…ƒæ¸¬è©¦\n   æœ€ç´°ç²’åº¦çš„è‡ªå‹•åŒ–æ¸¬è©¦  2. å¾®æœå‹™æ¶æ§‹çš„æ¸¬è©¦é‡‘å­—å¡”     å–®å…ƒæ¸¬è©¦ï¼š   æ¸¬è©¦ç›®æ¨™ï¼šé©—è­‰   ã€Œæ¥­å‹™é‚è¼¯å–®å…ƒã€  çš„æ­£ç¢ºæ€§ï¼Œä¸åœ¨ä¹ä¸Šå±¤ç¨‹å¼è¦å¯¦ä½œä»€éº¼åŠŸèƒ½  ä»€éº¼æ˜¯å–®å…ƒï¼Ÿ\n   è»Ÿé«”ä¸­æœ€å°å¯æ¸¬æ¥­å‹™é‚è¼¯å–®å…ƒ (ä¸€å€‹å‡½å¼ã€ä¸€å€‹Class)  å°å¤–éƒ¨ä¾è³´(å¦‚æª”æ¡ˆç³»çµ±ã€ç¶²è·¯ç­‰)æ¯”è¼ƒå°‘  æ¸¬è©¦é‹è¡Œæ™‚ä¸éœ€ç³»çµ±è™•æ–¼åŸ·è¡Œç‹€æ…‹  æ¸¬è©¦é‹è¡Œé€Ÿåº¦å¿«  æ¥­å‹™å…ƒä»¶æˆ–æœå‹™æ¸¬è©¦   æ¸¬è©¦ç›®æ¨™ï¼šé©—è­‰   ã€Œå–®å€‹å…ƒä»¶æˆ–æœå‹™ã€  çš„è¡Œç‚ºæ˜¯å¦ç¬¦åˆè¨­è¨ˆé æœŸ  ä»€éº¼æ˜¯å…ƒä»¶ï¼Ÿ\n   ç”±å¤šå€‹æœ€å°æ¥­å‹™é‚è¼¯å–®å…ƒçµ„æˆ  å¯èƒ½èˆ‡æœ¬ç³»çµ±ã€Œå…§éƒ¨ã€çš„å…¶å®ƒå…ƒä»¶äº’å‹•ï¼Œä¹Ÿå¯èƒ½è² è²¬èˆ‡ã€Œå¤–éƒ¨ã€æ•´åˆé»é€²è¡Œäº’å‹•  ex: GoCD ä¸­çš„é¡åˆ¥ MaterialServiceï¼Œå°±æ˜¯è² è²¬èˆ‡Gitæˆ–Subversionæ‰“äº¤é“çš„ä¸€å€‹å…ƒä»¶  æ¸¬è©¦é€šå¸¸ä¸éœ€è¦ç³»çµ±è™•æ–¼åŸ·è¡Œç‹€æ…‹ï¼Œä½†å¯èƒ½æ¶‰åŠå¤–éƒ¨ä¾è³´(æª”æ¡ˆç³»çµ±ã€ç¶²è·¯ã€è³‡æ–™åº«ç­‰)  åŸ·è¡Œé€²åº¦å¯èƒ½æ¯”å–®å…ƒæ¸¬è©¦ç¨æ…¢  å¥‘ç´„æ¸¬è©¦ï¼Œåˆç¨±æ¶ˆè²»è€…é©…å‹•çš„å¥‘ç´„æ¸¬è©¦(consumer driven contracts test)   æ¸¬è©¦ç›®æ¨™ï¼š  ã€Œå…©å€‹æœå‹™ä¹‹é–“ã€  çš„å¥‘ç´„\n   æ¸¬è©¦æ¶ˆè²»è€…ä»‹é¢èˆ‡æœå‹™è€…ä»‹é¢ä¹‹é–“çš„æ­£ç¢ºæ€§  é©—è­‰æœå‹™è€…æä¾›çš„è³‡æ–™æ˜¯å¦ç‚ºæ¶ˆè²»è€…æ‰€éœ€è¦çš„  å¥‘ç´„ï¼šæŒ‡è»Ÿé«”ç³»çµ±ä¸­å„å€‹æœå‹™é–“äº’å‹•çš„è³‡æ–™æ¨™æº–æ ¼å¼    æ¥­å‹™å·¥ä½œæµæ¸¬è©¦   æ¸¬è©¦ç›®æ¨™ï¼šé©—è­‰   ã€Œå¤šå€‹è¢«æ¸¬æœå‹™ã€  ä¹‹é–“æ˜¯å¦å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œé”æˆæŸä¸€æ¥­å‹™è«‹æ±‚  å•Ÿå‹•åŸ·è¡Œå…©å€‹ä»¥ä¸Šçš„å¾®æœå‹™ï¼Œé€²è¡Œæ¥­å‹™æµç¨‹ä¸Šçš„æ¸¬è©¦  ç«¯åˆ°ç«¯æ¸¬è©¦   å°   ã€Œæ•´å€‹è»Ÿé«”æœå‹™ã€  çš„æµç¨‹é€²è¡Œæ¸¬è©¦\n   æ¨¡æ“¬ç”¨æˆ¶åœ¨å¯è¦–åŒ–ä»‹é¢ä¸ŠåŸ·è¡Œå„ç¨®æ“ä½œ  è‹¥è»Ÿé«”æœå‹™å°å¤–æä¾›éå¯è¦–ä»‹é¢çš„æœå‹™(å¦‚APIå‘¼å«)ï¼Œé€™é¡æ¸¬è©¦ä¹Ÿæ­¸å±¬ç«¯åˆ°ç«¯æ¸¬è©¦  å¾ç”¨æˆ¶çš„è§’åº¦é©—è­‰æ•´å€‹åŠŸèƒ½çš„æº–ç¢ºæ€§å’Œå¯ç”¨æ€§  ä¸é—œæ³¨æŸä¸€ç´°å°åŠŸèƒ½çš„å¯¦ä½œ  10.3 è‡ªå‹•åŒ–æ¸¬è©¦çš„å¯¦æ–½ç­–ç•¥   è€ƒæ…®è‡ªå‹•åŒ–æ¸¬è©¦æ¡ˆä¾‹çš„æˆæœ¬ï¼Œç‚ºäº†æ›´å¥½çš„æŠ•è³‡å ±é…¬ç‡ï¼Œéœ€è¦æ›´è°æ˜åœ°å•Ÿå‹•è‡ªå‹•åŒ–æ¸¬è©¦å¯¦è¸  10.3.1 å¢åŠ è‡ªå‹•åŒ–æ¸¬è©¦æ¡ˆä¾‹çš„è‘—æ‰‹é»  1. é‡å°ä»£ç¢¼ç†±å€è£œå……è‡ªå‹•åŒ–æ¸¬è©¦æ¡ˆä¾‹   ç¨‹å¼ç¢¼ç†±å€\n    ç¨‹å¼ç¢¼è®Šå‹•é »ç‡ç›¸å°è¼ƒé«˜  çš„æª”æ¡ˆæˆ–å‡½æ•¸   ç¶“å¸¸å‡ºå•é¡Œ  çš„åŠŸèƒ½å…ƒä»¶  è‹¥éç¨‹å¼ç¢¼ç†±å€ï¼Œèªªæ˜åŸ·è¡Œç©©å®šï¼Œç·¨å¯«è‡ªå‹•åŒ–æ¸¬è©¦çš„æŠ•å ±ç‡è¼ƒä½  2. è·Ÿéš¨æ–°åŠŸèƒ½é–‹ç™¼çš„é€²åº¦   çµ¦ç›®å‰çš„åŠŸèƒ½é–‹ç™¼æä¾›å³æ™‚çš„å“è³ªå›é¥‹  è‹¥åªæ˜¯åœ¨è£œå……åŸæœ‰åŠŸèƒ½çš„è‡ªå‹•åŒ–æ¸¬è©¦æ¡ˆä¾‹ï¼Œç„¡æ³•å³æ™‚ç™¼æ®ä¿è­·ç¶²çš„ä½œç”¨  å¤šæ•¸è‡ªå‹•åŒ–æ¸¬è©¦æ¡ˆä¾‹ç”±é–‹ç™¼å·¥ç¨‹å¸«è‡ªè¡Œè² è²¬ç·¨å¯«\n   è‹¥åŒä¸€åŠŸèƒ½ç”±ä¸€äººé–‹ç™¼ï¼Œä¸€äººç·¨å¯«æ¸¬è©¦ï¼Œå°±æœƒç”¢ç”Ÿæºé€šæˆæœ¬\n   (å‚³çµ±è‡ªå‹•åŒ–æ¸¬è©¦çš„ç¼ºé»)  3. å¾æ¸¬è©¦é‡‘å­—å¡”çš„ä¸­é–“å±¤å‘ä¸Šä¸‹å…©ç«¯æ“´å±•   ä¸Šå±¤é–‹ç™¼æˆæœ¬é«˜ï¼Œä¸‹å±¤å–®å…ƒæ¸¬è©¦è¦†è“‹ç‡å°ï¼Œä¸­é–“æŠ•å ±ç‡æœ€å¥½  ex: æ¡ç”¨å¾®æœå‹™æ¶æ§‹çš„æœå‹™ç«¯è»Ÿé«” => å¾å¥‘ç´„å±¤é–‹å§‹è‘—æ‰‹  ex: æ‰‹æ©Ÿç«¯APP(å¾®æ ¸æ¶æ§‹) => å¾å…ƒä»¶ç´šæˆ–APIç´šçš„æ¸¬è©¦é–‹å§‹å…¥æ‰‹  4. è‡ªå‹•åŒ–æ¸¬è©¦æ¡ˆä¾‹çš„è³ªé‡æ¯”æ•¸é‡é‡è¦   åœ¨èƒ½é”åˆ°ã€Œé©—è­‰å“è³ªç›®çš„ã€çš„å‰æä¸‹ï¼Œè‡ªå‹•åŒ–æ¸¬è©¦çš„æ¡ˆä¾‹è¶Šå°‘è¶Šå¥½ (é™ä½æˆæœ¬)   ã€Œåœ¨å¯¦ä½œæˆæœ¬æœ€ä½çš„æ¸¬è©¦å±¤ç´šä¸Šï¼Œé€²è¡Œç›¸æ‡‰æ¥­å‹™é‚è¼¯çš„æ¸¬è©¦ã€   ä¸è¦åœ¨ä¸åŒå±¤ç´šçš„æ¸¬è©¦(å¦‚å–®å…ƒæ¸¬è©¦å±¤å’Œå…ƒä»¶æ¸¬è©¦å±¤)ä¸­ï¼Œé‡å°ç›¸åŒçš„é‚è¼¯ç·¨å¯«æ¸¬è©¦æ¡ˆä¾‹  æ•¸é‡å¤ å°±å¥½ï¼Œçµ•ä¸å¯«ä¸å¿…è¦çš„æ¸¬è©¦ç¨‹å¼ç¢¼  10.3.2 æé«˜è‡ªå‹•åŒ–æ¸¬è©¦çš„åŸ·è¡Œæ¬¡æ•¸   æ¸¬è©¦åŸ·è¡Œæ¬¡æ•¸è¶Šå¤š => æˆæœ¬è¶Šä½ã€ç²ç›Šè¶Šé«˜  å¦‚ä½•æé«˜åŸ·è¡Œæ¬¡æ•¸ï¼Ÿ  1. å…±äº«è‡ªå‹•åŒ–æ¸¬è©¦æ¡ˆä¾‹ (æ¸¬è©¦å¯ä»¥è¢«åè¦†åˆ©ç”¨ï¼Œç”šè‡³è‡ªå‹•åŒ–)   åä¾‹ï¼š\n   æ¸¬è©¦åªä¿å­˜åœ¨è‡ªå·±çš„é›»è…¦ä¸­  æ¸¬è©¦åªèƒ½åœ¨è‡ªå·±çš„ç’°å¢ƒä¸­åŸ·è¡Œ  æ¸¬è©¦æ¡ˆä¾‹ç„¡æ³•é‡å°ä¸åŒç’°å¢ƒ(å¦‚æ¸¬è©¦ç’°å¢ƒã€é ç”Ÿç”¢ç’°å¢ƒ)é€²è¡Œé©é…  æ­£ä¾‹ï¼š\n   å°‡è‡ªå‹•åŒ–æ¸¬è©¦æ¡ˆä¾‹æ”¾åˆ°åœ˜éšŠçš„ç¨‹å¼ç¢¼å€‰åº«ä¸­  æ•´åˆåˆ°æŒçºŒéƒ¨ç½²æµæ°´ç·šä¸­è‡ªå‹•åŸ·è¡Œ  2. é–‹ç™¼äººå“¡æ˜¯è‡ªå‹•åŒ–æ¸¬è©¦çš„ç¬¬ä¸€ç”¨æˆ¶   æ¯å€‹é–‹ç™¼äººå“¡ï¼Œéš¨æ™‚éƒ½èƒ½éå¸¸æ–¹ä¾¿åœ°åŸ·è¡Œè‡ªå‹•åŒ–æ¸¬è©¦æ¡ˆä¾‹\n   å°‡è‡ªå‹•åŒ–æ¸¬è©¦ä½œç‚ºé–‹ç™¼äººå“¡æ—¥å¸¸é–‹ç™¼ä¸­çš„ä¸€å¼µå“è³ªä¿è­·ç¶²  è€Œéæ¸¬è©¦äººå“¡ç”¨ä¾†é©—æ”¶é–‹ç™¼äººå“¡å·¥ä½œæˆæœçš„å·¥å…·  10.3.3 è‰¯å¥½è‡ªå‹•åŒ–æ¸¬è©¦çš„ç‰¹å¾µ  1. æ¡ˆä¾‹ä¹‹é–“å¿…é ˆç›¸äº’ç¨ç«‹   æ¡ˆä¾‹é–“è‹¥å­˜åœ¨é †åºä¾è³´\n   å°±åªèƒ½ç·šæ€§åŸ·è¡Œ  åŸ·è¡Œæ™‚é–“æ‹‰é•·ï¼Œå›é¥‹æ•ˆç‡é™ä½  æœå°‹å¤±æ•—åŸå› é›£åº¦æé«˜  2. æ¸¬è©¦æ¡ˆä¾‹çš„é‹è¡Œçµæœå¿…é ˆç©©å®š   ä¸ç©©å®šçš„æ¸¬è©¦æ¡ˆä¾‹åªæœƒæä¾›éŒ¯èª¤çš„å“è³ªè¨Šè™Ÿï¼Œæµªè²»åœ˜éšŠçš„æ™‚é–“  3. æ¸¬è©¦æ¡ˆä¾‹çš„é‹è¡Œé€Ÿåº¦å¿…é ˆå¿«   å°‡ä¸€å€‹æ¸¬è©¦æ¡ˆä¾‹åˆ†è§£æˆå¤šå€‹ç¨ç«‹çš„æ¸¬è©¦æ¡ˆä¾‹ï¼Œæ¯å€‹æ¡ˆä¾‹åƒ…æ¸¬åŸæ¸¬è©¦æ¡ˆä¾‹çš„ä¸€éƒ¨ä»½\n   => å¹³è¡ŒåŸ·è¡Œ  ã€Œç­‰å¾…ã€æ”¹ç‚ºã€Œè¼ªè©¢ã€ï¼Œä»¥å¾ˆå°çš„æ™‚é–“é–“éš”ä¸æ–·æŸ¥è©¢æ˜¯å¦åˆ°é”ä¸‹ä¸€æ­¥åŸ·è¡Œçš„ç‹€æ…‹\n   => polling å–ä»£ sleep  4. æ¸¬è©¦ç’°å¢ƒæ‡‰è©²çµ±ä¸€ (æœ€å¤§åŒ–æ¸¬è©¦æ¡ˆä¾‹å…±äº«çš„ç²ç›Š)   åä¾‹ï¼šæ¸¬è©¦åªèƒ½åœ¨æŸæ¸¬è©¦ç’°å¢ƒä¸ŠåŸ·è¡Œï¼Œç”šè‡³åªèƒ½åœ¨æŸé–‹ç™¼äººå“¡çš„é–‹ç™¼æ©Ÿå™¨ä¸ŠåŸ·è¡Œ  æƒ³è¾¦æ³•è®“å¤§å®¶çš„æ¸¬è©¦ç’°å¢ƒçµ±ä¸€æˆ–æ˜¯è®“æ¸¬è©¦èƒ½é©é…ä¸åŒçš„ç’°å¢ƒ  10.3.4 å…±äº«è‡ªå‹•åŒ–æ¸¬è©¦çš„ç¶­è­·è·è²¬   è‡ªå‹•åŒ–æ¸¬è©¦ä¹Ÿæ˜¯è»Ÿé«”ç¨‹å¼ç¢¼ï¼Œæ‡‰èŠ±è²»æ™‚é–“å¿ƒåŠ›ä½¿å…¶æ˜“æ–¼ç¶­è­·ï¼Œé¿å…ç¨‹å¼ç¢¼è…çˆ›  è‡ªå‹•åŒ–æ¸¬è©¦æ‡‰ç›¡å¯èƒ½èˆ‡ç”Ÿç”¢ç¨‹å¼ç¢¼åŒæ­¥è®ŠåŒ–\n   æ²’æœ‰åŒæ­¥è®ŠåŒ–ï¼ŒåŸ·è¡Œå°±æœƒå¤±æ•—  ç•¶åŸ·è¡Œè‡ªå‹•åŒ–æ¸¬è©¦å¤±æ•—å¾Œï¼Œå°±æ‡‰è©²é¦¬ä¸Šé€²è¡Œä¿®æ”¹  (å¯èƒ½æ˜¯åŠŸèƒ½å‡ºéŒ¯ï¼Œä¹Ÿå¯èƒ½æ˜¯æ¸¬è©¦éœ€è¦ä¿®æ”¹)  ã€Œç ´çª—æ•ˆæ‡‰ã€ï¼š\n   çŠ¯ç½ªå­¸ç†è«–ï¼š\n   ç’°å¢ƒä¸­çš„ä¸è‰¯ç¾è±¡å¦‚æœè¢«æ”¾ä»»å­˜åœ¨ï¼Œæœƒèª˜ä½¿äººå€‘ä»¿æ•ˆï¼Œç”šè‡³è®Šæœ¬åŠ å²  ä¸€å€‹å»¢æ£„çš„æˆ¿å­å‡ºç¾äº†ä¸€å€‹ç ´çª—æ²’äººç†ï¼Œä¹…äº†å°±æœƒè¶Šå¤šï¼Œç”šè‡³å‡ºç¾å¡—é´‰  è¶Šä¾†è¶Šå¤šæ¸¬è©¦å¤±æ•—å»æ²’æœ‰å—åˆ°é—œæ³¨ï¼Œä¹…äº†å°±å°è‡ªå‹•åŒ–æ¸¬è©¦çš„çµæœè¦–è€Œä¸è¦‹  10.3.5 ç¨‹å¼ç¢¼æ¸¬è©¦è¦†è“‹ç‡   æœ‰äººèªç‚ºå®ƒæ˜¯éå¸¸æœ‰ç”¨çš„æŒ‡æ¨™\n   æ‡‰è©²è¦æ±‚é”åˆ°ä¸€å®šæ¯”ä¾‹çš„æ¸¬è©¦è¦†è“‹åº¦  æœ‰äººèªç‚ºå®ƒæ˜¯æœ‰ç”¨çš„å·¥å…·ï¼Œä½†å®ƒ\n   åªèƒ½å‘Šè¨´ä½ ã€Œå“ªäº›ç¨‹å¼ç¢¼ç¼ºä¹æ¸¬è©¦æ¡ˆä¾‹è¦†è“‹ã€  å»ç„¡æ³•è­‰æ˜ã€Œè¢«è¦†è“‹çš„ç¨‹å¼ç¢¼å°±ä¸€å®šæ˜¯çœŸæ­£ç¶“éè‰¯å¥½é©—è­‰çš„ç¨‹å¼ç¢¼ã€  æä¾›ä¸€ç¨®éŒ¯èª¤çš„å®‰å…¨æ„Ÿ  Googleå…¬å¸ä¸¦æ²’æœ‰è¦å®šæ¸¬è©¦è¦†è“‹ç‡çš„çµ±ä¸€æ¨™æº–ï¼Œåªæœ‰ä¸€å€‹å»ºè­°æ€§æ¨™æº–ï¼š\n   å–®å…ƒæ¸¬è©¦è¦†è“‹ç‡é”åˆ°85%  Facebookæ–¼2004å¹´å‰›ä¸Šç·šæ™‚ä¹Ÿæ²’å¯«è‡ªå‹•åŒ–æ¸¬è©¦\n   æ¥­å‹™ç™¼å±•å¿«é€Ÿã€å·¥ç¨‹å¸«æ•¸é‡å¤§å¹…å¢åŠ   äº¤ä»˜å“è³ªè®Šå·®ã€é–‹ç™¼äººå“¡å¸¸å¸¸è™•æ–¼æ•‘ç«ç‹€æ…‹  2008å¹´å§‹ï¼ŒFacebookæ­£å¼å¼•å…¥è‡ªå‹•åŒ–æ¸¬è©¦å¯¦è¸  Facebook ä¹Ÿç„¡çµ±ä¸€è¦å®šè¦å¯«å¤šå°‘è‡ªå‹•åŒ–æ¸¬è©¦  Facebook å…¬å¸ä¸­ï¼Œè‡ªå‹•åŒ–æ¸¬è©¦æ¡ˆä¾‹çš„å¤§å¤šæ•¸ç”±é–‹ç™¼å·¥ç¨‹å¸«è‡ªå·±è² è²¬      10.4 ç”¨æˆ¶é©—æ”¶è‡ªå‹•åŒ–æ¸¬è©¦è¦é»   ç”¨æˆ¶é©—æ”¶è‡ªå‹•åŒ–æ¸¬è©¦è™•æ–¼è‡ªå‹•åŒ–æ¸¬è©¦é‡‘å­—å¡”çš„æœ€é«˜å±¤ï¼Œæˆæœ¬æœ€é«˜  é–‹ç™¼æ›´å¤šç”¨æˆ¶é©—æ”¶æ¸¬è©¦å‰ï¼Œå¿…é ˆç²¾å¿ƒæº–å‚™ï¼Œä»¥ä¾¿ä»¥è¼ƒä½çš„æˆæœ¬æŒçºŒç¶­è­·æ¯”è¼ƒå¥åº·çš„æ¸¬è©¦æ¡ˆä¾‹é›†  10.4.1 å…ˆæ­å»ºåˆ†å±¤æ¡†æ¶   å…ˆé¸æ“‡é©åˆå°ˆæ¡ˆçš„æ¸¬è©¦æ¡†æ¶ï¼Œåšä¸€å®šçš„èª¿æ•´  ç”¢ç”Ÿè…³æœ¬ç¨‹å¼å¾Œï¼Œé€²è¡Œæ¸¬è©¦è…³æœ¬ç¨‹å¼çš„åˆ†å±¤é‡æ§‹  1. æ¸¬è©¦æ¡ˆä¾‹çš„æè¿°å±¤   test case æè¿°  2. æ¸¬è©¦æ¡ˆä¾‹çš„å¯¦ç¾å±¤   å¯¦ä½œ test case  3. æ¸¬è©¦æ¡ˆä¾‹çš„æ¥å£å±¤(ä»‹é¢å±¤)   æŠŠ test case ä¸­ å¯ä»¥é‡ç”¨çš„æ±è¥¿æå–å‡ºä¾†  10.4.2 æ¸¬è©¦æ¡ˆä¾‹æ‡‰ä¿æŒä½ä½(æ¡ˆä¾‹æ•¸æ‡‰ä¿æŒå°‘é‡ï¼Œä½æˆæœ¬)   æ¸¬è©¦æ¡ˆä¾‹æ•¸é‡ä¸æ‡‰å¤ªå¤š  focusåœ¨é©—è­‰è»Ÿé«”æœå‹™çš„æ ¸å¿ƒå·¥ä½œæµç¨‹  å¯¦ä½œç´°ç¯€å¯äº¤ç”±ä¸‹å±¤çš„è‡ªå‹•åŒ–æ¸¬è©¦æ¡ˆä¾‹ä¾†è¦†è“‹  ex: é©—è­‰ç³»çµ±ç™»å…¥è¡Œç‚ºæ™‚\n   é©—è­‰ç›®æ¨™ä¸»è¦åœ¨é©—è­‰æ•´å€‹ç™»éŒ„æµç¨‹æ˜¯å¦å¾—åˆ°æ­£ç¢ºåŸ·è¡Œ  è€Œä¸æ˜¯é©—è­‰è¼¸å…¥è³‡è¨Šæ˜¯å¦éæ³•  å¾Œè€…å¯é€éæ›´ä½å±¤æ¬¡çš„è‡ªå‹•åŒ–æ¸¬è©¦æ¡ˆä¾‹ä¾†è¦†è“‹  10.4.3 ç‚ºè‡ªå‹•åŒ–æ¸¬è©¦æ¡ˆä¾‹é ç•™API   å°‘ç”¨æ¨¡æ“¬åœ–å½¢ä»‹é¢æ“ä½œçš„ç¨‹å¼ç¢¼\n   ä»‹é¢æ“ä½œåæ‡‰æ…¢  å¯èƒ½æœƒæœ‰ä¸å®¹æ˜“å®šä½ï¼Œæˆ–åŸ·è¡Œä¸ç©©å®šçš„æƒ…æ³  ç›¡é‡å‘¼å«ä½æ–¼ä»‹é¢ä¸‹å±¤çš„APIä¾†é©…å‹•æ¥­å‹™æµç¨‹çš„åŸ·è¡Œ  10.4.5 æ¸¬è©¦æ•¸æ“šçš„æº–å‚™   é€šéä¸€äº›è¦å‰‡ï¼Œç·¨å¯«ç¨‹åºè‡ªå‹•ç”Ÿæˆæ•¸æ“š(ç•¶è¦å‰‡è¤‡é›œæ™‚ï¼Œè¼ƒé›£ç·¨å¯«ç¨‹åº)  é€šééŒ„åˆ¶æ‰‹å·¥æ¸¬è©¦æ™‚ç”¢ç”Ÿçš„æ•¸æ“š  å°‡ç”Ÿç”¢ç’°å¢ƒçš„éæ•æ„Ÿæ•¸æ“šå…‹éš†ä¸€ä»½ï¼Œæˆ–æˆªå–ä¸€å€‹ç‰‡æ®µ  é€²è¡Œç”Ÿç”¢ç’°å¢ƒæ•¸æ“šçš„è‡ªå‹•åŒ–éŒ„åˆ¶ï¼Œä¸¦ä¿å­˜å‚™ä»½  10.5 å…¶ä»–è³ªé‡æª¢æŸ¥æ–¹æ³•  10.5.1 å·®ç•°æ‰¹æ³¨æ¸¬è©¦æ–¹æ³•   ä¸€ç¨®åŠè‡ªå‹•æ¸¬è©¦æ–¹æ³•\n   ç•¶åšé å®šç¾©çš„æ•¸æ“šé›†è¼¸å…¥ç³»çµ±åï¼Œæ”¶é›†é‹è¡Œåçš„è¼¸å‡ºçµæœï¼Œå°å…¶ä¸­éœ€è¦é©—è­‰çš„æ•¸æ“šé€²è¡Œæå–ï¼Œä¸¦å°‡æå–çµæœæ”¾å…¥æ–‡æœ¬æª”ä¸­ï¼Œé€šéå°æ¯”å‰å¾Œå…©æ¬¡æ¸¬è©¦çš„çµæœï¼Œç”¨äººå·¥æ‰¹æ³¨çš„æ–¹å¼é€²è¡ŒåŠè‡ªå‹•æ¸¬è©¦ã€‚ éœ€è¦ç‰¹åˆ¥æ³¨æ„å‹•æ…‹ä¿¡æ¯(æ—¥æœŸæ™‚é–“)çš„è™•ç†ï¼Œå¸¸è¦‹çš„å·¥å…·åŒ…æ‹¬TextTestå’ŒApprovalTestsç­‰ã€‚    10.5.2 ä»£ç¢¼è¦ç¯„æª¢æŸ¥èˆ‡ä»£ç¢¼å‹•éœæ…‹æª¢æ¸¬    ä»£ç¢¼é¢¨æ ¼è¦ç¯„æª¢æŸ¥ï¼š  æ˜¯æŒ‡é€šéå·¥å…· ï¼Œä¾æ“šåœ˜éšŠå®šç¾©çš„ä¸€äº›ä»£ç¢¼ç·¨å¯«è¦ç¯„ï¼Œé‡å°æºä»£ç¢¼é€²è¡Œæª¢æŸ¥ï¼Œå¦‚ç™¼ç¾ç ´å£è¦ç¯„çš„ä»£ç¢¼ï¼Œå°±åŠ ä»¥æŒ‡æ­£ã€‚   å·¥å…·å¸¸ç”¨çš„æœ‰ Checkstyleã€PMDã€SonarQube ç­‰ã€‚  å¢å¼·ä»£ç¢¼çš„å¯è®€æ€§å’Œæ˜“ç¶­è­·æ€§ã€‚  Google å·¥ç¨‹å¸«åœ¨åšä»£ç¢¼è©•å¯©æ™‚ï¼Œå°ä»£ç¢¼å¯è®€æ€§è¦æ±‚å°±éå¸¸åš´æ ¼ã€‚   ä»£ç¢¼å‹•éœæ…‹æª¢æ¸¬ï¼š  é€šéä¸€äº›å·¥å…·å°ç”¢å“åŸå§‹ç¨‹å¼ç¢¼é€²è¡Œè‡ªå‹•åŒ–æƒæï¼Œç™¼ç¾ä»£ç¢¼ä¸­å­˜åœ¨çš„å•é¡Œæˆ–æ½›åœ¨é¢¨éšªã€‚    éœæ…‹æƒæï¼š  å¯«å¥½æºä»£ç¢¼å¾Œï¼Œç„¡é ˆç¶“éç·¨è­¯å™¨ç·¨è­¯ï¼Œè€Œç›´æ¥ä½¿ç”¨ä¸€äº›æƒæå·¥å…·å°é€²è¡Œæƒæï¼Œæ‰¾å‡ºä»£ç¢¼ä¸­å­˜åœ¨çš„ä¸€äº›èªç¾©ç¼ºé™·ã€å®‰å…¨æ¼æ´çš„è§£æ±ºæ–¹æ¡ˆã€‚   å¸¸ç”¨çš„å·¥å…·åŒ…æ‹¬ï¼šlintï¼ŒCoverityï¼ŒColcWorkç­‰ã€‚   å‹•æ…‹åˆ†æï¼š  é€šéåœ¨çœŸå¯¦æˆ–è™›æ“¬è™•ç†æ©Ÿå™¨ä¸ŠåŸ·è¡Œç›®æ¨™ç¨‹åºé€²è¡Œåˆ†æï¼Œæ¯”å¦‚ï¼Œåœ¨å¯èƒ½çš„æ¼æ´è™•æ’å…¥å°ˆé–€ç·¨è£½çš„æ•…éšœç™¼ç”Ÿå‡½æ•¸ï¼Œè¿«ä½¿ç›®æ¨™è»Ÿé«”ç”¢ç”Ÿç•°å¸¸ï¼Œç„¶å¾Œé€šéç›£æ§ç¨‹å¼ä¾†æª¢æŸ¥æ˜¯å¦ç™¼ç”Ÿäº†é‚Šç•Œæº¢å‡ºæˆ–è€…å…¶ä»–ç•°å¸¸ç¾è±¡ã€‚   å¸¸ç”¨å·¥å…·åŒ…æ‹¬ï¼šValgrindï¼ŒPurifyç­‰ã€‚  \n  ç•¶ä»£ç¢¼åº«çš„è¦æ¨¡è¼ƒå¤§æ™‚ï¼Œé€™ç¨®è³ªé‡æƒæå·¥ä½œå¯èƒ½æœƒèŠ±è²»è¼ƒé•·æ™‚é–“ã€‚\n    æ‡‰è©²åœ¨æäº¤æ§‹å»ºä¹‹å‰ï¼Œæä¾›å¢é‡æƒæçš„æ–¹å¼ã€‚  å°‡å®Œæ•´ä»£ç¢¼åº«çš„æƒææ”¾åˆ°å¾ŒæœŸåŸ·è¡Œã€‚  å–®ç¨åŸ·è¡Œã€‚  æ­£å¦‚æˆ‘å€‘å¯èƒ½å°‡æäº¤æ§‹å»ºèˆ‡æ¬¡ç´šæ§‹å»ºåˆ†é–‹ä¸€æ¨£ï¼Œé€™ä¹Ÿæ˜¯ç‚ºäº†åœ¨åé¥‹æ™‚é–“èˆ‡åé¥‹è³ªé‡ä¹‹é–“å–å¾—å¹³è¡¡ã€‚\n  10.5.3 AIåœ¨æ¸¬è©¦é ˜åŸŸçš„æ‡‰ç”¨   åœ¨ä»£ç¢¼åˆ†æã€ç¼ºé™·å®šä½ç­‰æ–¹é¢Alå·¥å…·å¾ˆå¤šï¼Œå…¶ä»–UIã€å®‰å…¨æ€§æ¸¬è©¦ä¹Ÿæœ‰ä¸€äº›ï¼š Appdiffã€DiffBlueã€BugDojoã€å¾®è»ŸAIå®‰å…¨é¢¨éšªæª¢æ¸¬å·¥å…·ã€Facebook Sapienzç­‰ã€‚é›–ç„¶é€™äº›æ™ºèƒ½æ¸¬è©¦å·¥å…·é‚„åœ¨æ¢ç´¢ä¸­ï¼Œä½†å·²ç¶“æœ‰ä¸€äº›å–œäººçš„æˆæœå‡ºç¾ã€‚   ä¾‹å¦‚ 2018 æœˆï¼Œ Facebookçš„å·¥ç¨‹ç¶²ç«™ code.facebook.com ä¸Šï¼ŒKe Mao å’Œ Mark Harman æ’°å¯«äº†ä¸€ç¯‡æ–‡ç« ï¼Œåç‚ºã€ŠSapien z: Intelligent automated so ware testing at scaleã€‹ï¼Œè¬›è¿°äº† Sapienz å° Facebook è‡ªèº«å®‰å“æ‡‰ç”¨é€²è¡Œæ™ºèƒ½è‡ªå‹•åŒ–è»Ÿä»¶æ¸¬è©¦çš„çµæœï¼Œç¨±ï¼šã€Œé™¤èƒ½å¤ åŠ é€Ÿæ¸¬è©¦éç¨‹ä»¥å¤–ï¼Œ Sapienzæ¸¬è©¦çµæœçš„å‡é™½æ€§ç‡æ¥µä½â€¦â€¦ Sapienzçš„çµæœå ±å‘Šä¸­ï¼Œéœ€è¦ä¿®å¾©çš„æ¯”ä¾‹å 75%ã€‚ã€    å°†äººå·¥æ™ºèƒ½ï¼ˆAIï¼‰åº”ç”¨äºè½¯ä»¶æµ‹è¯•ä¸­    å°‡AIæ‡‰ç”¨æ–¼è»Ÿä»¶æ¸¬è©¦ä¸­   æŸ¥æ‰¾å’Œä¿®å¾©éŒ¯èª¤ï¼Œåˆ©ç”¨AIé€²è¡Œæ›´å¿«é€Ÿçš„æ¸¬è©¦  åˆ©ç”¨AIæé«˜DevOpså·¥ä½œæ•ˆç‡  å°‡AIèˆ‡æ©Ÿå™¨å­¸ç¿’ç›¸çµåˆ    ä½¿ç”¨AIé€²è¡Œè»Ÿä»¶æ¸¬è©¦   å¾å–®å…ƒæ¸¬è©¦å’Œéœæ…‹åˆ†æé–‹å§‹  å‘é‡‘å­—å¡”ä¸Šç§»è‡³APIå’ŒUIç´šåˆ¥    åä¸ºå¤§å’–åˆ†äº«ï¼šAIåœ¨è½¯ä»¶æµ‹è¯•é¢†åŸŸåº”ç”¨æ¢ç´¢    10.6 å°çµ   è‡ªå‹•åŒ–æ¸¬è©¦æ¡ˆä¾‹é‹è¡Œæ¬¡æ•¸è¶Šå¤šï¼Œå¹³å‡æˆæœ¬è¶Šä½ï¼Œæ”¶ç›Šè¶Šå¤§  è‡ªå‹•åŒ–æ¸¬è©¦æ¡ˆä¾‹é–“æ‡‰è©²ç›¡å¯èƒ½ç¨ç«‹ï¼Œäº’ä¸å½±éŸ¿  åœ¨è³ªé‡æœ‰ä¿éšœçš„å‰æä¸‹ï¼Œè‡ªå‹•åŒ–æ¸¬è©¦çš„æ¡ˆä¾‹è¶Šå°‘è¶Šå¥½  éºç•™ä»£ç¢¼çš„è‡ªå‹•åŒ–æ¸¬è©¦ç·¨å¯«æ‡‰å¾ä»£ç¢¼ç†±å€é–‹å§‹  è‡ªå‹•åŒ–æ¸¬è©¦æ¡ˆä¾‹å¾æ¸¬è©¦é‡‘å­—å¡”çš„ä¸­é–“å±¤é–‹å§‹è£œå……ï¼ŒæŠ•å…¥ç”¢å‡ºæ¯”æœ€é«˜"},{"id":"content:4.cicd-2.0:11.chapter11.md","path":"/cicd-2.0/chapter11","dir":"cicd-2.0","title":"11 è»Ÿä»¶é…ç½®ç®¡ç†","description":"","keywords":["11.4 ç’°å¢ƒåŸºç¤è¨­æ–½ç®¡ç†","11.5 è»Ÿé«”é…ç½®é …çš„ç®¡ç†","11.6 ä¸å¯è®ŠåŸºç¤è¨­æ–½èˆ‡æ‡‰ç”¨","11.7 è³‡æ–™çš„ç‰ˆæœ¬ç®¡ç†","11.8 éœ€æ±‚èˆ‡åŸå§‹ç¢¼çš„ç‰ˆæœ¬é—œè¯","11.9 å°çµ"],"body":"  11.4 ç’°å¢ƒåŸºç¤è¨­æ–½ç®¡ç†  11.4.1 ç’°å¢ƒæº–å‚™çš„4ç¨®ç‹€æ…‹   è »è’æ³•\n   ä»¥ \"äººè…¦ + æ‰‹å·¥â€ ä»£è¡¨  å‰›èµ·æ­¥çš„å°ˆæ¡ˆï¼Œæ•´é«”ä¸è¤‡é›œï¼Œç”¨æˆ¶èˆ‡å®¢æˆ¶æ•¸é‡ä¸å¤š\n   é–‹ç™¼äººå“¡è‡ªå·±å°±å¯ä»¥æå®šæ‰€æœ‰çš„è»Ÿé«”éƒ¨å±¬ç›¸é—œå•é¡Œ  æ‰€æœ‰ç’°å¢ƒæº–å‚™ç›¸é—œçš„çŸ¥è­˜éƒ½åœ¨é–‹ç™¼äººå“¡è…¦ä¸­ï¼Œåœ˜éšŠæ ¸å¿ƒèˆ‡è‹±é›„  è¦ç¯„æ³•\n   ä»¥ \"æ–‡æª”\" + \"ç§æœ‰è…³æœ¬\" ä»£è¡¨çš„ è¦ç¯„åŒ–ç‹€æ…‹  éš¨è‘—è»Ÿé«”æœå‹™çš„æˆåŠŸï¼Œç”¨æˆ¶è·Ÿå®¢æˆ¶æ•¸é‡è®Šå¤šï¼Œæ›´å¤šéœ€æ±‚æ»¿å¤©é£›éä¾†ï¼Œä¼ºæœå™¨çš„æ•¸é‡ä¹Ÿå› æ­¤å¢é•·ä¸å°‘ï¼Œç’°å¢ƒç¶­è­·å·¥ä½œè®Šå¾—å¤šäº†èµ·ä¾†\n   è¦æ±‚æ­£å¼ä¸Šç·šçš„éƒ¨å±¬æ–‡ä»¶ï¼Œé€šå¸¸æœƒç¸½çµå‡ºä¸€å€‹ç’°å¢ƒéƒ¨å±¬çš„æº–å‚™èªªæ˜æ›¸ï¼Œç”±ç¶­é‹çš„äººä¾†åŸ·è¡Œ\n   ä¾‹å¦‚ æ–‡æª”å¯èƒ½æœ‰11å€‹æ­¥é©Ÿï¼Œä½†æ¯å€‹æ­¥é©Ÿä¸­åˆæœ‰è¨±å¤šå­æ­¥é©Ÿã€‚  å¾ˆå¤šåœ˜éšŠæ˜¯æ‰¾ä¸åˆ°é€™æ¨£çš„ç’°å¢ƒèªªæ˜æ–‡ä»¶ï¼Œå³ä½¿æ‰¾åˆ°ï¼Œå¯èƒ½ä¹Ÿæ˜¯ç„¡æ³•ä½¿ç”¨éæ™‚çš„æ–‡ä»¶  è¦æœ‰è¦ç¯„åŒ–çš„ä¸Šç·šéƒ¨å±¬æµç¨‹ï¼Œæ­¤éšæ®µéœ€è¦æœ‰å€‹SOPæ–‡ä»¶ï¼Œè©³ç´°ç´€éŒ„æ¯æ¬¡çš„æ“ä½œ  åˆ©ç”¨ç§æœ‰åŒ–è…³æœ¬ï¼Œæå‡æ•ˆç‡ã€‚æ¯æ¬¡çš„å‡ç´šè…³æœ¬éƒ½æœƒé‡è¤‡ä¹‹å‰ä¸€äº›å‹•ä½œ   ç¾åœ¨ä»ç„¶æœ‰éå¸¸å¤šçš„ä¼æ¥­è™•æ–¼åœ–ä¸­æ­¤ç¨®ç‹€æ…‹\n    æµç¨‹é€šé \"äºº\" ä¾†ç¶­è­·ï¼Œç¶“å¸¸æœ‰éºæ¼  æ–‡æª”é€šé \"EMAIL\"è¿½è¹¤ï¼ŒæŸ¥æ‰¾ä¸æ–¹ä¾¿  å¯©æŸ¥å·¥ä½œé‡å¤§ï¼Œç”±æ–¼æ‰‹å·¥å·¥ä½œé‡å¤§ï¼Œå¸¸æœ‰äººç¹ééç¨‹  è‡ªå‹•åŒ–è…³æœ¬ä¸è¦ç¯„çµ±ä¸€ï¼Œè€Œä¸”ç¶“å¸¸å‡ºéŒ¯ï¼Œå°è‡´éƒ¨å±¬éç¨‹ä¸­æ–·  ä»¥è¾¦å…¬è‡ªå‹•åŒ–ç‚ºä»£è¡¨çš„ \"æ¨™æº–åŒ–ç‹€æ…‹\"\n   éš¨è‘—è»Ÿé«”æœå‹™çš„è¶Šä¾†è¶ŠæˆåŠŸï¼Œå…¬å¸ä¹Ÿä¸æ–·çš„å£¯å¤§ï¼Œç¶­é‹äººå“¡è¶Šä¾†è¶Šå¤šï¼Œç”Ÿç”¢éƒ¨å±¬äº‹ä»¶ä¹Ÿå¤šäº†èµ·ä¾†  ç„¡ç´™åŒ–çš„å‹æ…‹å‡ºç¾ï¼ŒåŸå…ˆä½¿ç”¨officeå¯«æ–‡ä»¶ï¼Œè½‰ç‚ºç·šä¸Šç³»çµ±å¡«å¯«\n   æµç¨‹å¹³å°çµ±ä¸€åŒ–ï¼Œè»Ÿé«”é–‹ç™¼èˆ‡ç¶­é‹çš†åœ¨åŒä¸€å¹³å°ä¸Š  éƒ¨åˆ†å…§å®¹æ¨™æº–çµ±ä¸€  å¯ä»¥éƒ¨ä»½é‡ç”¨ï¼Œæ¸›å°‘å·¥ä½œé‡  å¯©æ ¸å·¥ä½œè®Šå¾—å®¹æ˜“ï¼Œæ‰€æœ‰ç´€éŒ„çš†ä¿ç•™å¹³å°ä¸Š  ä½†ä»ç„¶æœ‰äº›è¨±å•é¡Œ\n   ç³»çµ±æ“ä½œè®Šå¾—è¤‡é›œï¼Œæœ‰äº›ä»éœ€äººå·¥é¤èˆ‡  å…©æ¬¡ä¸Šç·šéƒ¨å±¬å·®ç•°æ¯”å°ä»ç„¶å›°é›£ï¼Œé›–ç„¶é–‹ç™¼äººå“¡å¯ä»¥è¤‡è£½ä¸Šä¸€ä»½è³‡æ–™ï¼Œä½†æ¯å€‹çš†ç‚ºç¨ç«‹å‰¯æœ¬ï¼Œå¾ˆé›£é€²è¡Œæ¯”å°æŸ¥æ‰¾  ä»¥å—æ§å¼è‡ªå‹•åŒ–è…³æœ¬ç‚ºä»£è¡¨çš„ \"è‡ªå‹•åŒ–ç‹€æ…‹\"\n   æ­¤éšæ®µçš„è‡ªå‹•åŒ–ç¶­é‹è…³æœ¬æœ‰å…©ç¨®å‹æ…‹\n   æ“ä½œéç¨‹å¼ç‚ºä¸»\n   ç¬¦åˆåŸæœ‰çš„æ€è€ƒç¿’æ…£ï¼Œå°‡åŸæœ¬çš„æ‰‹å·¥æ“ä½œæ­¥é©Ÿè½‰ç‚ºè…³æœ¬èªè¨€å³å¯  éˆæ´»ï¼Œæƒ³åšç”šéº¼æ“ä½œï¼Œå¹¾ä¹æ‰‹å·¥æ“ä½œéƒ½å¯ä»¥è¾¦åˆ°ï¼Œä¸å—ä»»ä½•ç´„æŸ  ç‹€æ…‹è²æ˜å¼ç‚ºä¸»\n   å¯ä»¥æ˜ç¢ºçŸ¥é“ï¼Œç„¡è«–ä½•ç¨®æƒ…æ³æˆ–èª°ä¾†åŸ·è¡Œé€™å€‹è…³æœ¬ï¼Œçš†å¯ä»¥å¾—åˆ°ç›¸åŒçµæœ  å¦‚æœå°‡æ­¤è…³æœ¬æ”¾ç½® gitå€‰åº«ï¼Œå¯é€šédiffåŠŸèƒ½ï¼Œæ¯”å°å·®ç•°  å­¸ç¿’æˆæœ¬é«˜ï¼Œæ­¤DSL(Domain=Specific Languageï¼Œé ˜åŸŸå°ˆå±¬èªè¨€)ç”¨ä¾†æè¿°ç’°å¢ƒéƒ¨å±¬çš„å°ˆæœ‰æ“ä½œèˆ‡ç‹€æ…‹  è…³æœ¬æ•¸é‡è¼ƒå¤šæ™‚ï¼Œæ–‡ä»¶ç®¡ç†ä¹Ÿå­˜åœ¨ç›¸åŒå„²å­˜çµæ§‹å•é¡Œ  æ­¤æ™‚å¯ä½¿ç”¨ä¸€äº›å·¥ä½œä¾†åšç‚ºè¼”åŠ©\n    å·¥å…·é‹è¡Œæ¨¡å¼å¯åˆ†å…©ç¨®\n   æ‹‰æ¨¡å¼\n   ç›®æ¨™ä¼ºæœå™¨å®‰è£ agentï¼Œä¿æŒèˆ‡ä¼ºæœå™¨çš„é€£ç·šèˆ‡æ¥å—æŒ‡ä»¤  æ¨æ¨¡å¼\n   ä¸é ˆå®‰è£å®¢æˆ¶ç«¯ agentï¼Œåªéœ€ç”±ä¼ºæœå™¨é ç«¯é€£ç·šé€²è¡Œæ“ä½œå³å¯  11.4.2 é ˜åŸŸå°ˆå±¬èªè¨€çš„æ‡‰ç”¨     ä»¥ä¸Šèªªæ˜çš„é€™äº›å·¥å…·éƒ½å®šç¾©äº†å„è‡ªå·¥å…·é ˜åŸŸï¼Œæ­¤ç¨®èªè¨€å¯ä»¥æè¿°å‡ºç’°å¢ƒéƒ¨å±¬ç‹€æ…‹çš„æ–‡ä»¶ã€‚  ä»¥ Puppetç®¡ç† apache2 æœå‹™ç‚ºä¾‹ä¾†èªªæ˜\n   Ansible èªæ³•ç¯„ä¾‹\n   11.4.3 ç’°å¢ƒåŸºç¤è¨­æ–½å³ä»£ç¢¼   ç¾åœ¨ï¼Œå·²å°‡ç’°å¢ƒåŸºç¤è¨­æ–½ä¸€ç³»åˆ—æº–å‚™å·¥ä½œä»¥è…³æœ¬æè¿°å‡ºä¾†ï¼Œä¹Ÿèƒ½é€šéè‡ªå‹•åŒ–æ–¹å¼ä¾†åŸ·è¡Œã€‚\n   å¥½è™•\n1. ç„¡è«–å“ªå€‹ç’°å¢ƒå‡ºå•é¡Œï¼Œçš†èƒ½å¿«é€Ÿæ§‹å»ºå‡ºå…¨æ–°çš„ç’°å¢ƒ\n1. åªè¦æœ‰æ¬Šé™ï¼Œä»»ä½•äººçš†å¯å®Œæˆä»»å‹™\n1. ä»»ä½•å°ç’°å¢ƒä¿®æ”¹éƒ½å¯ä»¥è¢«è¨˜éŒ„èˆ‡å¯©æ ¸\n1. å°ä¸åŒç’°å¢ƒä¾†èªªï¼Œå°‡è…³æœ¬å°æ¯”å³å¯çŸ¥é“å·®ç•°ï¼Œä¸éœ€å†ç™»å…¥è‡³ä¼ºæœå™¨  ç‚ºäº†æ›´é€²ä¸€æ­¥çš„å„ªåŒ–ï¼Œç‰ˆæœ¬ç®¡ç†æ‡‰è©²è¦æœ‰\n1. æ“ä½œç³»çµ±åç¨±çš„ç‰ˆæœ¬è™Ÿã€è£œä¸è™Ÿèˆ‡ç³»çµ±é…ç½®è¨Šæ¯\n1. ä¾è³´è»Ÿé«”åŒ…çš„æ‰€æœ‰ç‰ˆæœ¬è™Ÿèˆ‡è¨­ç½®çš„å…§å®¹\n1. éœ€èˆ‡æ‡‰ç”¨ç¨‹å¼é€£ç·šçš„ç‰ˆæœ¬è™Ÿèˆ‡è¨­å®šæª”å…§å®¹  11.5 è»Ÿé«”é…ç½®é …çš„ç®¡ç†  11.5.1 äºŒé€²åˆ¶èˆ‡é…ç½®é …çš„åˆ†é›¢   ä¸€å€‹æ‡‰ç”¨ç¨‹å¼é€šå¸¸ç¨‹å¼ç¢¼èˆ‡å¯åŸ·è¡Œæª”æ˜¯åˆ†é–‹çš„ï¼Œä¸€æ—¦ç·¨è­¯å®Œæˆï¼Œæ­¤ç·¨è­¯åŸ·è¡Œæª”å°±ä¸æœƒæ›´æ”¹  ç·¨è­¯å»ºç½®éç¨‹ä¸­ï¼Œå¯èƒ½æœƒæœ‰ä¾è³´å…¶ä»–å¥—ä»¶åŒ…ï¼Œé€šå¸¸å¥—ä»¶åŒ…èˆ‡ç·¨è­¯å®Œæˆçš„åŸ·è¡Œæª”æ˜¯ç‚ºåˆ†é–‹çš„ï¼Œä½†é€™å…©é …ç‚ºå¿…é ˆï¼Œå› è€Œå¯è¦–ç‚ºä¸å¯åˆ†å‰²çš„ä¸€ç’°\n   äºŒé€²åˆ¶åŸ·è¡Œæª”éƒ¨å±¬æ™‚éœ€èˆ‡å¥—ä»¶åŒ…çš„å„ç‰ˆæœ¬å®Œå…¨ç›¸åŒ  11.5.2 é…ç½®ä¿¡æ¯çš„ç‰ˆæœ¬ç®¡ç†   ç·¨è­¯åŸ·è¡Œæª”æ™‚æ ¹æ“šå…§å®¹ä¸åŒæœƒè¨­ç½®å„ç¨®è¨­å®šæª”\n   ç’°å¢ƒé…ç½®é …(environment configuration)\n   ç¶²åŸŸã€ipã€api portã€web port ...ç­‰  æ‡‰ç”¨é…ç½®é …(application configuration)\n   åˆå§‹è³‡æ–™(å¸³å¯†ã€é€šç”¨è³‡æ–™...ç­‰)  VMè³‡æºè¨­ç½®  DBé€£ç·šè³‡æ–™  Logç´€éŒ„ç›¸é—œè¨­å®š  å•†å‹™é…ç½®é …(bussiness configuration)\n   é è¨­å€¼è¨­å®šæª”  æŸäº›å•†æ¥­é‚è¼¯è¨ˆç®—è¨­å®š\n    ä½¿ç”¨è³‡æ–™å¤¾ä¾†å€åˆ†ä¸åŒé–‹ç™¼ç’°å¢ƒçš„è¨­å®šæª”\n   11.5.3 é…ç½®é …çš„å„²å­˜çµ„ç¹”æ–¹å¼   å„²å­˜é…ç½®æ–¹æ³•å¾ˆå¤šï¼Œæœ€ç°¡å–®çš„ç‚ºä½¿ç”¨ç´”æ–‡å­—ä¾†è¨˜éŒ„  å¯é‡å°ä¸åŒç’°å¢ƒå¯«ä¸åŒè¨­ç½®  ç·¨è­¯æ™‚å°‡æ ¹æ“šä¸åŒç’°å¢ƒè‡ªå‹•è¼‰å…¥é…ç½®æª”\n   11.5.4 é…ç½®é£„ç§»èˆ‡æ²»ç†   éš¨è‘—ç”Ÿç”¢ç’°å¢ƒç™¼å±•ï¼ŒæŸäº›è¨­å®šæª”æœƒåç§»åŸå…ˆé æœŸçš„è¨­å®šï¼Œé€šå¸¸æ˜¯ç”±è‡¨æ™‚ä¿®æ”¹æ¸¬è©¦æ‰€å¼•èµ·çš„  ä¸€æ®µæ™‚é–“å¿…é ˆåšæ ¡æ­£å›æ­¸ï¼Œå¦å‰‡å°‡å¸¸å‡ºç¾ä¸ç©©å®šç‹€æ…‹ï¼Œç”šè‡³ç•¶æ©Ÿ  å¥½çš„é…ç½®å¯ä»¥è§£æ±ºé£„ç§»å•é¡Œï¼Œä¹Ÿå¯é¿å…äººç‚ºæ“ä½œä¸Šçš„éºæ¼  11.6 ä¸å¯è®ŠåŸºç¤è¨­æ–½èˆ‡æ‡‰ç”¨  11.6.1 å¯¦ç¾ä¸å¯è®ŠåŸºç¤è¨­æ–½   ç‰©ç†ä¸»æ©Ÿé¡è±¡æŠ€è¡“ èˆ‡ è™›æ“¬æ©Ÿé¡è±¡æŠ€è¡“\n   é€™å…©ç¨®æŠ€è¡“éƒ½å¯ä»¥æä¾›ç’°å¢ƒæº–å‚™æ•ˆç‡  å°‡ä¸Šç·šçš„æœå‹™ä¸€æ¨¡ä¸€æ¨£åˆ†ç‚ºå…©ä»½ï¼ŒåŒæ™‚éƒ¨å±¬è‡³ä¸åŒåœ°æ–¹  è™›æ“¬æ©Ÿé™¤äº†å¯é¡è±¡åˆ†é›¢è…³æœ¬å¤–ä¹Ÿå¯å‹•æ…‹åˆ†é…ç³»çµ±è³‡æº  Dockerå®¹å™¨æŠ€è¡“\n   å®¹å™¨åŒ–ç‰¹æ€§å¯ä½¿éƒ¨å±¬è»Ÿé«”éƒ¨åˆ†å¤§å¹…é™ä½é›£åº¦èˆ‡æˆæœ¬  11.6.2 é›²åŸç”Ÿæ‡‰ç”¨   é›²ç«¯æœå‹™PAASï¼Œå¯è®“éƒ¨å±¬äººå“¡ä½¿ç”¨ git push å³å¯å®Œæˆéƒ¨å±¬å‹•ä½œï¼Œåªéœ€ç­‰å¾…å»ºç½®å®Œæˆå¾Œçš„çµæœ  PAASå…ˆé©… Heroku æå‡ºäº† é›²åŸç”Ÿæ‡‰ç”¨12è¦ç´ \n   ä¸€å¥—åŸºæœ¬ä»£ç¢¼å¤šç’°å¢ƒéƒ¨å±¬  é¡¯ç¤ºè²æ˜ä¾è³´é—œä¿‚  åœ¨ç’°å¢ƒä¸­å„²å­˜é…ç½®  æŠŠå¾Œç«¯æœå‹™ç•¶ä½œé™„åŠ è³‡æº  åš´æ ¼åˆ†é›¢å»ºç½®ã€ç™¼ä½ˆèˆ‡é‹è¡Œ  æ‡‰ç”¨ç¨‹å¼æœ¬èº«æ‡‰è©²æ˜¯ä¸€å€‹æˆ–å¤šå€‹ç„¡ç‹€æ…‹é€²ç¨‹ï¼Œé€²ç¨‹ä¹‹é–“æ²’æœ‰è³‡æ–™å…±äº«  é€šéç«¯å£ç¶å®šæä¾›æœå‹™  é€šéé€²ç¨‹æ¨¡å‹é€²è¡Œæ“´å±•  å¿«é€Ÿå•Ÿå‹•èˆ‡å„ªé›…çµ‚æ­¢  ç›¡å¯èƒ½è®“é–‹ç™¼ç’°å¢ƒã€é ç”Ÿç”¢ç’°å¢ƒèˆ‡ç”Ÿç”¢ç’°å¢ƒç­‰åƒ¹  æ—¥èªŒä½œç‚ºäº‹ä»¶æµ  å°‡ç®¡ç†/ç®¡ç†ä»»å‹™ä½œç‚ºä¸€æ¬¡æ€§é€²ç¨‹é‹è¡Œ  11.6.3 å„ªå‹¢èˆ‡æŒ‘æˆ°   å„ªå‹¢\n   ç°¡åŒ–ç¶­é‹å·¥ä½œ  éƒ¨å±¬æµç¨‹è‡ªè¡Œç”¢ç”Ÿæ–‡ä»¶  æŒçºŒéƒ¨å±¬ä¸åœæ©Ÿï¼Œæ•…éšœæ›´å°‘  æ¸›å°‘éŒ¯èª¤èˆ‡å¨è„…  å¤šé¡ç’°å¢ƒåŸºç¤è¨­æ–½çš„ä¸€è‡´æ€§  æœçµ•äº†\"é…ç½®é£„ç§»\"  è¢«æ¸¬è©¦çš„å³æ˜¯è¢«ä½¿ç”¨çš„  ç›¸å°ä»£åƒ¹çš„æŒ‘æˆ°\n   ç‚ºä¸å¯è®ŠåŸºç¤è¨­æ–½å»ºç«‹ä¸€å¥—è‡ªå‹•åŒ–ï¼ŒåˆæœŸæˆæœ¬è¼ƒé«˜  ç”Ÿç”¢ç’°å¢ƒçªç™¼ç‹€æ³ï¼Œä¿®å¾©æ™‚é–“å¯èƒ½ç¨é•·  å°å¤§è¦æ¨¡è»Ÿé«”æœå‹™ä¾†èªªï¼Œå¤§æª”æ¡ˆé¡è±¡ç™¼ä½ˆè‡³å¤šå°ä¼ºæœå™¨æœƒæ¶ˆè€—å¤§é‡çš„ç¶²è·¯è³‡æºï¼Œæ™‚é–“ä¹Ÿæœƒæ¶ˆè€—ä¸å°‘  æœ‰ç‹€æ…‹å„²å­˜è»Ÿé«”æœå‹™ä¸å®¹æ˜“è¢«ç›´æ¥æ›¿æ›  11.7 è³‡æ–™çš„ç‰ˆæœ¬ç®¡ç†  æ¯å€‹è»Ÿé«”éƒ½éœ€è¦è™•ç†è³‡æ–™ï¼Œå°è³‡æ–™é€²è¡Œç‰ˆæœ¬ç®¡ç†æ˜¯ä¸€ä»¶æ¯”è¼ƒå›°é›£çš„äº‹æƒ…ï¼Œä½†æ˜¯æˆ‘å€‘å¯ä»¥é€šéå°å…¶ä¸­ä¸€éƒ¨åˆ†å…§å®¹é€²è¡Œç‰ˆæœ¬ç®¡ç†ï¼Œä¾†æé«˜ç”¢å“ä¹‹é–“çš„åˆä½œæ•ˆç‡ã€‚ä¾‹å¦‚: åŠ å¿«æ¸¬è©¦ç’°å¢ƒçš„å»ºç«‹ï¼Œæé«˜è‡ªå‹•åŒ–æ¸¬è©¦ä½¿ç”¨æ¡ˆä¾‹çš„åŸ·è¡Œå¯é æ€§ã€‚  11.7.1 è³‡æ–™åº«çµæ§‹è®Šæ›´  ç•¶ä½ ä½¿ç”¨é—œè¯å¼è³‡æ–™åº«ç³»çµ±ï¼Œç•¶è»Ÿé«”éƒ¨ç½²é »ç‡è®Šé«˜ï¼ŒåŒæ™‚åƒèˆ‡è»Ÿé«”é–‹ç™¼çš„äººå“¡è®Šå¤šæ™‚ï¼Œå°±æ‡‰è©²å°è³‡æ–™åº«é€²è¡Œç‰ˆæœ¬ç®¡ç†ã€‚é™¤å¯©è¨ˆ(Audit)ç®¡ç†å’Œå•é¡Œè¨‚ä½å¤–ï¼Œå°è³‡æ–™åº«çš„ç‰ˆæœ¬ç®¡ç†åœ¨é–‹ç™¼å’Œè‡ªå‹•åŒ–æ¸¬è©¦ä¸­ä¹Ÿæ˜¯éå¸¸æœ‰æ•ˆåœ°ã€‚  ä¸‹åœ–ç‚ºé€šéFlywayæˆ–Liquibaseé€™é¡å·¥å…·é€²è¡Œè³‡æ–™åº«çš„å‡ç´šæˆ–é™ç´šæ“ä½œã€‚æ­é…CI/CDå·¥å…·çš„åœ¨åŸ·è¡ŒPipelineæ™‚ï¼Œé€²è¡Œè³‡æ–™åº«çš„ç®¡ç†ã€‚\n   ç•¶æˆ‘å€‘æŠŠè³‡æ–™åº«çµæ§‹çš„è®Šå‹•è…³æœ¬æ”¾åˆ°åŸå§‹ç¢¼å€‰åº«å¾Œï¼Œåœ¨åŸ·è¡Œè‡ªå‹•åŒ–æ¸¬è©¦æ™‚ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¾—åˆ°ä¸€å€‹ä¹¾æ·¨çš„åˆå§‹åŒ–è³‡æ–™åº«ç‰ˆæœ¬ã€‚ç•¶ç™¼å¸ƒçµ¦å®¢æˆ¶çš„æ­·å²ç‰ˆæœ¬å‡ºç¾Bugæ™‚ï¼Œç‚ºäº†è¨‚ä½å•é¡Œï¼Œæˆ‘å€‘å¯ä»¥å¾ˆå¿«çš„å°è³‡æ–™åº«é€²è¡Œæ¸…ç©ºç„¶å¾Œé‡å»ºåˆ°ç‰¹å®šçš„è³‡æ–™åº«ç‰ˆæœ¬ã€‚  11.7.2 Binaryæ–‡ä»¶  å°æ–¼äºŒé€²åˆ¶æ–‡ä»¶çš„ç‰ˆæœ¬ç®¡ç†ï¼Œå°±ä¸èƒ½ä½¿ç”¨åŸå§‹ç¢¼ç‰ˆæœ¬æ§åˆ¶ç³»çµ±äº†ã€‚æ­¤æ™‚å¯ä»¥é€šéé¡ä¼¼FTPã€é ç«¯æª”æ¡ˆç³»çµ±é€²è¡Œç®¡ç†ã€‚   ğŸ’¡ é€™é‚Šæ¨è–¦MINIOç³»çµ±æœå‹™ä¾†ç®¡ç†ï¼Œä»–æ”¯æ´äºŒé€²åˆ¶çš„æª”æ¡ˆç‰ˆæœ¬ç®¡ç†ï¼Œéå¸¸æ–¹ä¾¿ï¼Œåƒè€ƒ  MINIO Versioning  ç•¶æŸå…¬å¸å…§æœ‰ä¸€å€‹  å¤§æª”æ¡ˆå„²å­˜ç³»çµ± æ™‚ï¼Œä½ å¯ä»¥å°‡å¤§å°ºå¯¸æª”æ¡ˆä¸Šå‚³åˆ°ç³»çµ±ä¸­æ™‚ï¼Œå®ƒæœƒè¿”å›ä¸€å€‹URIï¼Œå°‡URIæ”¾åˆ°ä¸€å€‹æ–‡å­—æª”æ¡ˆå…§å®¹ä¸­ï¼Œç„¶å¾Œå°‡æ–‡ä»¶æª”å…§å®¹ç´å…¥åˆ°Gitç‰ˆæœ¬æ§åˆ¶ã€‚é€™æ¨£å°±å°‡è³‡æ–™èˆ‡ç”¢å“åŸå§‹ç¢¼ç‰ˆæœ¬é€²è¡Œçµ±ä¸€çš„ç‰ˆæœ¬ç®¡ç†äº†ã€‚æ­¤æ™‚URLå°±æ˜¯ä¸€å€‹å¼•ç”¨ï¼Œè€Œ  å¤§æª”æ¡ˆå„²å­˜ç³»çµ± å°±ç›¸ç•¶æ–¼ä¸€å€‹å„²å­˜è³‡æ–™ä¸¦é€²è¡Œç‰ˆæœ¬ç®¡ç†çš„å…±äº«å€‰åº«ï¼Œé€™ç¨®æ–¹å¼å°æ–¼æ¸¬è©¦è³‡æ–™ç®¡ç†æ˜¯éå¸¸æ–¹ä¾¿çš„ã€‚  å¦å¤–ä¸€ç¨®ç‹€æ³ï¼Œç•¶æ‡‰ç”¨ç¨‹å¼çš„å•Ÿå‹•æˆ–é‹è¡Œéœ€è¦ä»°è³´ä¸€çµ„è³‡æ–™æª”æ¡ˆæ™‚ï¼Œä¾‹å¦‚:   è³‡æ–™åº«é€£ç·šå­—ä¸² ï¼Œæˆ‘å€‘å¯ä»¥å…ˆå°‡è³‡æ–™åº«é€£ç·šå­—ä¸²é€²è¡Œæ¼”ç®—æ³•åŠ å¯†ï¼Œç•¶ä½œä¸€ä»½äºŒé€²åˆ¶æ–‡ä»¶ï¼Œç„¶å¾Œå°‡è§£å¯†çš„æ¼”ç®—æ³•è…³æœ¬åŠ å…¥åˆ°Gitè³‡æ–™åº«ç‰ˆæœ¬æ§ç®¡ä¸­ï¼Œåœ¨ç¨‹å¼åŸ·è¡Œæ™‚ï¼Œå°‡äºŒé€²åˆ¶æ–‡ä»¶é€²è¡Œè¼‰å…¥å¾Œï¼Œåœ¨åŸ·è¡Œè§£å¯†çš„æ¼”ç®—æ³•å¾Œï¼Œå†é€²è¡Œè³‡æ–™åº«çš„é€£ç·šã€‚  è³‡æ–™åº«ç‰ˆæœ¬è£œå……  è«‹åƒè€ƒ  Appendix 01 Database Version Control  11.8 éœ€æ±‚èˆ‡åŸå§‹ç¢¼çš„ç‰ˆæœ¬é—œè¯  ç”±11-1åœ–ä¸­ï¼Œç¨‹å¼ç¢¼ã€è»Ÿé«”åŒ…ã€ç’°å¢ƒéƒ½é€²è¡Œç®¡ç†äº†ï¼Œä½†æˆ‘å€‘æƒ³è¦å°ç¨‹å¼ç¢¼èˆ‡éœ€æ±‚é …ç›®é€²è¡Œé—œè¯æ™‚ï¼Œæ‡‰è©²å¦‚ä½•è™•ç†å‘¢?  æˆ‘å€‘å¯ä»¥å°‡éœ€æ±‚å…§å®¹é€²è¡Œæ–‡ä»¶åŒ–ï¼Œä¸¦èˆ‡å°æ‡‰çš„è»Ÿé«”åŒ…ç‰ˆæœ¬é€²è¡Œé—œè¯ï¼Œå¦‚æœéœ€æ±‚é¡†ç²’åº¦è¦æ›´ç´°çš„ç®¡ç†ï¼Œä¹Ÿå¯ä»¥å°‡ç®¡ç†å¹³å°ä¸­çš„æ¯å€‹éœ€æ±‚é …ç›®ID(æˆ–ç¼ºé™·ç®¡ç†ç³»çµ±çš„ç¼ºé™·ID)èˆ‡ç¨‹å¼ç¢¼é€²è¡Œé—œè¯ã€‚ä¾‹å¦‚: å†æ¯æ¬¡å‘ç¨‹å¼ç¢¼å€‰åº«æäº¤ç¨‹å¼ç¢¼æ™‚ï¼Œå°‡éœ€æ±‚é …ç›®çš„IDï¼Œåšç‚ºæäº¤è¨»è§£çš„ä¸€éƒ¨åˆ†ï¼Œä¸¦å°‡é€™ç¨®é—œè¯è¨Šæ¯é€²è¡Œå±•é–‹å‡ºä¾†ã€‚ä¸‹åœ–æ˜¯Mingleå·¥å…·ä¸­çš„é—œè¯åƒè€ƒ   Mingleçš„SaaSå¾2019/7/31è™Ÿé–‹å§‹å·²ç¶“åœæ­¢æœå‹™ã€‚åƒè€ƒ  å®˜ç¶² ã€‚ä½ å¯ä»¥ä½¿ç”¨å…¶ä»–æ›¿ä»£å·¥å…·ï¼Œä¾‹å¦‚: jiraã€Asana ã€TFSç­‰ç­‰ã€‚    11.9 å°çµ  è‰¯å¥½çš„è»Ÿé«”ç®¡ç†æ˜¯æ‰“é€ æŒçºŒäº¤ä»˜Pipelineã€åŠ é€Ÿé©—è­‰å£ç’°ç¯€çš„åŸºç¤ã€‚  æœ¬ç« ç¯€ä¸»è¦æœ‰ä¸‰å€‹æ ¸å¿ƒç®¡ç†ã€‚   å°ä¸€åˆ‡é€²è¡Œç‰ˆæœ¬ç®¡ç†  å…±äº«å”¯ä¸€ä¾†æº  æ¨™æº–åŒ–èˆ‡è‡ªå‹•åŒ–  å¯ä»¥é€éä¸‹é¢5å€‹å•é¡Œä¾†é©—è­‰æª¢æŸ¥ä½ æ˜¯å¦å°ä¸€åˆ‡éƒ½åšäº†ç‰ˆæœ¬ç®¡ç†ã€‚ä¸‹åˆ—5å€‹å•é¡Œæ˜¯å¦éƒ½æœ‰æ”¾å…¥åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»çµ±ä¸­å‘¢?   ç”¢å“åŸå§‹ç¢¼å’Œæ¸¬è©¦ç¨‹å¼ç¢¼  è»Ÿé«”æ‡‰ç”¨çš„é…ç½®è¨Šæ¯  å„é¡ç’°å¢ƒçš„ç³»çµ±é…ç½®  è‡ªå‹•åŒ–çš„å»ºç½®å’Œéƒ¨ç½²è…³æœ¬  è»Ÿé«”åŒ…æ˜¯å¦é€²è¡Œç‰ˆæœ¬ç®¡ç†  å¦å¤–å¯ä»¥åˆ©ç”¨ä¸‹åˆ—å…©å€‹å•é¡Œä¾†æª¢æŸ¥è»Ÿé«”ç®¡ç†æ˜¯å¦åšå¾—è¶³å¤ å¥½ã€‚   å¯ä»¥é€éåŸå§‹ç¢¼å€‰åº«çš„å°ˆæ¡ˆï¼Œä¸€éµå¼åœ°å»ºæ§‹å‡ºå®Œæ•´è»Ÿé«”åŒ…å—?  åœ¨æ²’æœ‰ä»–äººçš„å¹«åŠ©ä¸‹ï¼Œä»»ä½•åœ˜éšŠæˆå“¡éƒ½å¯ä»¥ä¸€éµå¼è‡ªå‹•åŒ–æ­å»ºå‡ºä¸€å¥—æ‡‰ç”¨è»Ÿé«”ç³»çµ±ï¼Œç”¨æ–¼é«”é©—ç”¢å“æ–°åŠŸèƒ½å—?"},{"id":"content:4.cicd-2.0:12.chapter12.md","path":"/cicd-2.0/chapter12","dir":"cicd-2.0","title":"12 ä½é¢¨éšªç™¼ä½ˆ","description":"","keywords":["å‰è¨€","12.1 é«˜é »ç™¼ä½ˆæ˜¯ä¸€ç¨®è¶¨å‹¢","12.2 é™ä½ç™¼ä½ˆé¢¨éšªçš„æ–¹æ³•","12.3 é«˜é »ç™¼ä½ˆæ”¯æ’æŠ€è¡“","12.4 å½±éŸ¿ç™¼ä½ˆé »ç‡çš„å› ç´ ","12.5 å°çµ"],"body":"  å‰è¨€     å‰å¹¾ç« ä¸»è¦è¨è«–å¿«é€Ÿé©—è­‰ç’°ä¸­ã€Œå»ºç½®éšæ®µã€çš„å·¥ä½œ  æœ¬ç« ä¸»è¦è¨è«–å¦‚ä½•ã€Œé«˜é »ã€ã€Œä½é¢¨éšªã€åœ°é€²è¡Œè»Ÿé«”éƒ¨ç½²å’Œç™¼ä½ˆï¼Œå„˜æ—©è®“è»Ÿé«”åœ¨ç”Ÿç”¢ç’°å¢ƒä¸­åŸ·è¡Œ\n   ã€Œé«˜é »ã€çš„å¥½è™•èˆ‡å¯èƒ½å¸¶ä¾†çš„æˆæœ¬èˆ‡é¢¨éšª  ã€Œé™ä½é¢¨éšªã€çš„å„ç¨®æ–¹å¼ï¼šè—ç¶ éƒ¨ç½²ã€é–‹é—œæŠ€è¡“â€¦  12.1 é«˜é »ç™¼ä½ˆæ˜¯ä¸€ç¨®è¶¨å‹¢   2007å¹´ä»¥å‰ï¼Œã€Œæ•æ·è»Ÿé«”é–‹ç™¼ã€çš„èªåŒåº¦ä¸é«˜ï¼Œä¸€äº›å‚³çµ±ITä¼æ¥­è¡¨ç¤ºï¼šã€Œæˆ‘å€‘ä¸éœ€è¦é‚£éº¼å¿«é€Ÿåœ°äº¤å’è»Ÿé«”ã€  2009ï¼ŒFlickr çš„ John Allspaw å’Œ Paul Hammond åœ¨ Velocity 2009 å¹´çš„å¤§æœƒä¸Šåˆ†äº«äº†é¡Œç›®ç‚ºã€ŠFlickr æ¯å¤©éƒ¨ç½²10æ¬¡ä»¥ä¸Šï¼šé–‹ç™¼èˆ‡ç¶­é‹çš„é«˜æ•ˆç‡åˆä½œã€‹  2011å¹´5æœˆï¼Œäºé¦¬éœå…¬å¸çš„æœˆåº¦çµ±è¨ˆé¡¯ç¤ºï¼Œå¹³å‡æ¯11å°±è§¸ç™¼ä¸€æ¬¡è»Ÿé«”éƒ¨ç½²æ“ä½œï¼Œç•¶æœˆæœ€é«˜éƒ¨ç½²é »ç‡é”åˆ°æ¯å°æ™‚1079æ¬¡ä¹‹å¤šã€‚å¹³å‡1è¬å°ä¼ºæœå™¨æœƒåŒæ™‚æ”¶åˆ°éƒ¨ç½²è«‹æ±‚ï¼Œè€Œæœ€é«˜ä¸€æ¬¡æ˜¯3è¬å°ä¼ºæœå™¨åŒæ™‚åŸ·è¡Œä¸€å€‹éƒ¨ç½²æ“ä½œ  2017å¹´ï¼ŒFacebookæ¯å¤©å°å…¶ç¶²ç«™æ¨é€å¤šæ¬¡éƒ¨ç½²ã€‚    é«˜é »ç™¼ä½ˆçš„å¥½è™•   æœ‰æ›´å¤šæ©Ÿæœƒèˆ‡çœŸå¯¦ç”¨æˆ¶äº’å‹•ï¼Œå¿«é€Ÿæ±ºå®šæˆ–èª¿æ•´è‡ªå·±ç”¢å“å‰é€²çš„æ–¹å‘  æ¯æ¬¡è®Šæ›´è¦æ¨¡è¼ƒå°ï¼Œé™ä½éƒ¨ç½²é¢¨éšª  å–®æ¬¡éƒ¨ç½²æˆæœ¬é™ä½  å‡ºç¾å•é¡Œæ˜“å®šä½ã€æ˜“ä¿®å¾©ã€èƒ½å¿«é€Ÿä¿®æ­£  ä»ä½¿ç”¨ä½é »ç™¼ä½ˆæ¨¡å¼ï¼Œå¼·è¡ŒåŸ·è¡Œé«˜é »ç™¼ä½ˆçš„è©±ï¼Œæœƒå¸¶ä¾†è¼ƒé«˜çš„è¿­ä»£æˆæœ¬   è¨­æŸåœ˜éšŠä»¥æ‰‹å‹•æ¨¡å¼æ¯å€‹æœˆç™¼ä½ˆä¸€æ¬¡ï¼Œç¾æ”¹ç‚ºæ¯é€±ç™¼ä½ˆä¸€æ¬¡  å‡è¨­ã€Œä»èˆŠæ¡ç”¨åŸæœ‰æ‰‹å‹•æ¨¡å¼éƒ¨ç½²ã€ï¼Œé‚£æ¯å€‹æœˆçš„å·¥ä½œé‡å°±æ˜¯åŸä¾†çš„å››å€  12.2 é™ä½ç™¼ä½ˆé¢¨éšªçš„æ–¹æ³•   é«˜é »å¸¶ä¾†å¥½è™•çš„åŒæ™‚ï¼Œä¹Ÿå­˜åœ¨å„ç¨®é¢¨éšª(ex: å·¥ä½œé‡æé«˜ã€éŒ¯èª¤è™•ç†â€¦)  è—ç¶ éƒ¨ç½²   ğŸ’¡ æº–å‚™å…©å¥—å®Œå…¨ä¸€è‡´çš„åŸ·è¡Œç’°å¢ƒï¼Œäº¤äº’ä½œç‚ºç”Ÿç”¢ç’°å¢ƒèˆ‡é ç”Ÿç”¢ç’°å¢ƒï¼Œç›®çš„ç‚ºæ¸›å°‘é‡‹å‡ºéç¨‹ä¸­æœå‹™åœæ­¢çš„æ™‚é–“   æº–å‚™å…©å¥—å®Œå…¨ä¸€è‡´çš„åŸ·è¡Œç’°å¢ƒ\n   ä¸€å¥—ç’°å¢ƒ For æ­£å¼ç”Ÿç”¢ç’°å¢ƒ  å¦ä¸€å¥— For æ–°ç‰ˆæœ¬çš„é ç”Ÿç”¢ç’°å¢ƒ  å°æ–°ç‰ˆæœ¬ç’°å¢ƒé€²è¡Œé©—æ”¶æ¸¬è©¦ï¼Œç›´è‡³ç¢ºèªç„¡å•é¡Œ  å°‡å­˜å–æµé‡å¼•æµåˆ°æ–°ç‰ˆæœ¬æ‰€åœ¨çš„ç’°å¢ƒï¼Œä½œç‚ºæ­£å¼ç”Ÿç”¢ç’°å¢ƒï¼ŒåŒæ™‚ä¿æŒèˆŠç‰ˆæœ¬æ‰€åœ¨ç’°å¢ƒä¸è®Š  ç›´è‡³ç¢ºå®šæ–°ç‰ˆæœ¬æ²’æœ‰å•é¡Œå¾Œï¼Œå†å°‡èˆŠç‰ˆæœ¬æ‰€åŸ·è¡Œçš„ç’°å¢ƒä½œç‚ºä¸‹ä¸€å€‹æ–°ç‰ˆæœ¬çš„é ç”Ÿç”¢ç’°å¢ƒï¼Œéƒ¨ç½²æœªä¾†çš„æ–°ç‰ˆæœ¬     å¾ˆå¤šè—ç¶ éƒ¨ç½²æ–¹æ¡ˆæœƒä½¿ç”¨ç›¸åŒçš„è³‡æ–™åº«æœå‹™(å› ç‚ºè³‡æ–™åº«è¤‡è£½çš„æˆæœ¬è¼ƒé«˜)\n   åŒä¸€å€‹è³‡æ–™åº«å„²å­˜æ ¼å¼éœ€å°æ–°èˆŠå…©å€‹è»Ÿé«”ç‰ˆæœ¬åšç›¸å®¹æ€§è™•ç†  ç•¶åˆ‡æ›ç™¼ç”Ÿåœ¨ç”¨æˆ¶çš„ä¸€æ¬¡æ¥­å‹™æ“ä½œéç¨‹ä¸­ä¸”æ¶‰åŠäº‹å‹™è™•ç†æ™‚ï¼Œå¦‚ä½•è™•ç†è³‡æ–™çš„ä¸€è‡´æ€§å•é¡Œ\n   åˆ‡æ›ç™¼ç”Ÿæ™‚å°šæœªè¿”å›çµæœçš„èˆŠæœ‰è«‹æ±‚ï¼ŒèˆŠç‰ˆæœ¬ç’°å¢ƒå…è¨±å…¶å­˜å–å®Œæˆ  ä¹‹å¾Œä¸å†æ¥æ”¶æ–°çš„è«‹æ±‚å³å¯    æ»¾å‹•éƒ¨ç½²     å¾æœå‹™ç¾¤é›†ä¸­é¸æ“‡ä¸€å€‹æˆ–å¤šå€‹æœå‹™å–®å…ƒï¼Œåœæ­¢æœå‹™å¾ŒåŸ·è¡Œç‰ˆæœ¬æ›´æ–°  ç›¸è¼ƒæ–¼è—ç¶ éƒ¨ç½²ï¼Œä¸éœ€è¦æº–å‚™å…©å¥—ä¸€æ¨¡ä¸€æ¨£çš„æœå‹™åŸ·è¡Œç’°å¢ƒï¼Œä¼ºæœå™¨æˆæœ¬ç›¸ç•¶æ–¼å°‘äº†ä¸€åŠ  ç•¶æ–°ç‰ˆæœ¬å‡ºç¾å•é¡Œæ™‚ï¼Œé€™ç¨®æ–¹å¼ç„¡æ³•åƒè—ç¶ éƒ¨ç½²é‚£æ¨£é€éå‰é¢çš„æµé‡è² è¼‰å¹³è¡¡å™¨åˆ‡å›èˆŠç’°å¢ƒ\n   è¦å°å…¶ä¸­å·²éƒ¨ç½²æ–°ç‰ˆæœ¬çš„ä¼ºæœå™¨é€²è¡Œé‚„åŸ  æˆ–å¿«é€Ÿä¿®æ­£å¾Œç™¼éƒ¨ç¬¬ä¸‰å€‹ç‰ˆæœ¬V3ï¼Œæ­¤æ™‚æœå™¨ç¾¤é›†ä¸­å¯èƒ½æœƒåŒæ™‚æœ‰V1~V3ä¸‰å€‹ç‰ˆæœ¬å­˜åœ¨  é‡‘çµ²é›€å€ä½ˆ   ğŸ’¡ è®“ä¸€å°éƒ¨ä»½ç”¨æˆ¶å…ˆè¡Œä½¿ç”¨æ–°ç‰ˆæœ¬ï¼Œä»¥ä¾¿æå‰ç™¼ç¾è»Ÿé«”å­˜åœ¨çš„å•é¡Œ  17ä¸–ç´€ï¼Œç¤¦å·¥å¸¶ä¸€éš»é‡‘çµ²é›€ä¸‹äº•ã€‚è‹¥äº•ä¸‹å­˜åœ¨æœ‰å®³æ°£é«”ï¼Œåœ¨äººé«”é‚„æ²’å¯Ÿè¦ºåˆ°å‰ï¼Œé‡‘çµ²é›€å°±æœƒå› ç„¡æ³•æŠµæŠ—ç“¦æ–¯æ°£é«”è€Œæ­»äº¡  ç°åº¦ç™¼ä½ˆ   ğŸ’¡ å°‡ç™¼ä½ˆåˆ†æˆä¸åŒçš„éšæ®µï¼Œæ¯å€‹éšæ®µçš„ç”¨æˆ¶æ•¸é‡é€ç´šå¢åŠ      2012 Facebook ç™¼ä½ˆä¸€æ¬¡é¦–é å¤§æ”¹ç‰ˆ\n   ç”¨æˆ¶æ•¸é”ç¸½ç”¨æˆ¶çš„1%ï¼Œç¶²ç«™çš„ç€è¦½é‡ã€é é¢æ‰“é–‹ç‡ç­‰éƒ½æœ‰æ‰€ä¸‹é™  ç”¨æˆ¶è¶…é10%å¾Œï¼Œå„é …é—œéµæ¥­å‹™ä»èˆŠè¡¨ç¾ä¸ä½³  æ–¼æ˜¯Facebook æœ€çµ‚æ”¾æ£„é€™æ¬¡é¦–é å¤§æ”¹ç‰ˆï¼Œæ¢å¾©äº†åŸæœ‰çš„ç‰ˆæœ¬  å…©ç¨®å¯¦ä½œæ–¹å¼\n   é–‹é—œéš”é›¢æ–¹å¼ï¼šè¨­ç½®é–‹é—œé‡å°ä¸åŒæ­¥åœçš„ç”¨æˆ¶é–‹æ”¾æ–°åŠŸèƒ½  æ»¾å‹•éƒ¨ç½²ï¼šå°‡è»Ÿé«”çš„æ–°ç‰ˆæœ¬éƒ¨ç½²åˆ°ç”Ÿç”¢ç’°å¢ƒä¸­çš„ä¸€éƒ¨åˆ†ç¯€é»ä¸Š  æš—éƒ¨ç½²   ç‚ºæ¼”ç®—æ³•è¨­ä¸€å€‹é–‹é—œ\n   ç•¶é–‹é—œæ‰“é–‹æ™‚ï¼Œæœƒæœ‰æµé‡é€²å…¥æ­¤æ¼”ç®—æ³•ï¼Œä½†ç”¨æˆ¶ä¸¦ä¸çŸ¥é“ä»–ç”¨çš„æ˜¯èˆŠæ¼”ç®—æ³•é‚„æ˜¯æ–°æ¼”ç®—æ³•  è‹¥æ­¤æ¼”ç®—æ³•çš„æ€§èƒ½ä¸å¤ å¥½ï¼Œå¯ä»¥é¦¬ä¸Šé—œé–‰é€™å€‹é–‹é—œ  æµé‡å…‹éš†\n   å°æ¯å€‹è«‹æ±‚éƒ½å…‹éš†ä¸€ä»½ï¼Œç™¼é€çµ¦æ–°æ¼”ç®—æ³•  ä½†æ–°æ¼”ç®—æ³•ä¸¦ä¸å‘ç”¨æˆ¶å›é¥‹çµæœï¼Œè€Œæ˜¯é–‹ç™¼äººå“¡è‡ªå·±æ”¶é›†è³‡æ–™  12.3 é«˜é »ç™¼ä½ˆæ”¯æ’æŠ€è¡“  ç¬¬8ç« æåˆ°ï¼Œç•¶ä¸€å€‹è»Ÿé«”åœ˜éšŠçš„ç™¼ä½ˆé »ç‡é«˜æ–¼ä¸€é€±ä¸€æ¬¡æ™‚ï¼Œæ¡ã€Œä¸»ç·šé–‹ç™¼ï¼Œä¸»ç·šç™¼ä½ˆã€æ›´ç‚ºç¶“æ¿Ÿ  ä½†ç•¶æŸå€‹åŠŸèƒ½ç„¡æ³•åœ¨å…©æ¬¡ç™¼ä½ˆä¹‹é–“å®Œæˆé–‹ç™¼ï¼Œæ€éº¼è¾¦ï¼Ÿ  æ‹†åˆ†åŠŸèƒ½   åˆ†è§£ç‚ºæ›´å°çš„åœ¨ä¸€å€‹é–‹ç™¼é€±æœŸå…§èƒ½å¤ å®Œæˆçš„åŠŸèƒ½é›†  å…ˆå¾Œå†å‰   å…ˆå¯¦ä½œä¼ºæœç«¯åŠŸèƒ½ï¼Œå†å¯¦ä½œç”¨æˆ¶ä»‹é¢    åŠŸèƒ½é–‹é—œæŠ€è¡“   é€éé–‹é—œä¾†éš±è—æœªé–‹ç™¼å®Œæˆçš„åŠŸèƒ½   é–‹é—œæä¾›å…©ç¨®ç”¨é€”\n   éš”é›¢ï¼šå°‡æœªå®ŒæˆåŠŸèƒ½çš„ç¨‹å¼éš”é›¢åœ¨åŸ·è¡Œè·¯å¾‘ä¹‹å¤–  å¿«é€Ÿæ­¢è¡€ï¼šä¸€ä½†ç”Ÿç”¢ç’°å¢ƒå‡ºäº†å•é¡Œï¼Œç›´æ¥æ‰¾åˆ°å°æ‡‰åŠŸèƒ½çš„é–‹é—œå°‡å…¶é—œé–‰  éœ€è€ƒæ…®ç³»çµ±ä¸­æ‰€æœ‰é–‹é—œçš„æ•¸é‡å’Œçµ„åˆæ¸¬è©¦çš„å•é¡Œ\n   é–‹é—œè¶Šå¤šï¼Œç¶­è­·æˆæœ¬è¶Šé«˜  é–‹é—œå­˜åœ¨æ™‚é–“è¶Šé•·ï¼Œç¶­è­·æˆæœ¬è¶Šé«˜  æ‡‰ç›¡å¯èƒ½å°‘ç”¨é–‹é—œæŠ€è¡“\n   if else èªå¥æœƒå¸¶ä¾†ç¨‹å¼çš„è¤‡é›œæ€§ï¼Œé€ æˆç¨‹å¼ç¢¼è¨­è¨ˆæ··äº‚  æ¨¡çµ„è·è²¬ä¸æ¸…æ™‚ï¼Œæ›´å®¹æ˜“å‡ºéŒ¯  ä½†å¦‚æœåœ¨ã€Œåˆ†æ”¯ã€å’Œã€Œé–‹é—œã€é–“é¸æ“‡ï¼Œç›¡å¯èƒ½é¸æ“‡é–‹é—œæŠ€è¡“\n   å»ºç«‹åˆ†æ”¯æœƒå¸¶ä¾†å¾ŒæœŸçš„åˆ†æ”¯åˆå…¥åŠå¤šæ¬¡æ¸¬è©¦æˆæœ¬  æ‡‰å°é–‹é—œè¨­ç½®é …ç›®é€²è¡Œçµ±ä¸€ç®¡ç†  å®šæœŸæª¢æŸ¥å’Œæ¸…ç†ä¸å¿…è¦çš„é–‹é—œé …ç›®  å¸¸è¦‹å·¥å…·\n   C/C++: gflagï¼ŒGoogleå…¬å¸è²¢ç»çš„é–‹æºå·¥å…·  Javaç¤¾ç¾¤å¯ç”¨ï¼šTogglz or Flip  Grails: grails-feature-toggle  .Net: FeatureToggle  è³‡æ–™ç§»è½‰æŠ€è¡“   å› ç‚ºè³‡æ–™åº«æ›´æ–°å¯èƒ½éœ€è¦è¼ƒé•·çš„æ™‚é–“ï¼Œåœæ©Ÿæ›´æ–°çš„æ–¹å¼å¯èƒ½ä¸åˆé©ï¼Œæ‰€ä»¥è™•ç†è³‡æ–™åº«çš„ç‰ˆæ›´æ™‚å¯ä»¥é¸æ“‡ï¼š   å°å¹…æ”¹å‹•çš„è©±ï¼š\n   åªå¢ä¸åˆªï¼šæ¬„ä½ç›¡å¯èƒ½åªå¢ä¸åˆª  å¤§å¹…è³‡æ–™çµæ§‹çš„æ”¹è®Šï¼Œå‰‡è³‡æ–™ç§»è½‰SOPå¦‚ä¸‹\n   ç‚ºè³‡æ–™åº«çµæ§‹å¢åŠ ä¸€å€‹æ–°ç‰ˆæœ¬  ä¿®æ”¹æ‡‰ç”¨ç¨‹å¼ï¼ŒåŒæ™‚å‘å…©å€‹ç‰ˆæœ¬çš„çµæ§‹ä¸­å¯«å…¥è³‡æ–™  ç·¨å¯«è…³æœ¬ç¨‹å¼ï¼Œä»¥å¾Œå°æœå‹™çš„æ–¹å¼å°‡åŸä¾†çš„æ­·å²è³‡æ–™ï¼Œå›å¡«åˆ°æ–°ç‰ˆæœ¬çš„çµæ§‹ä¸­  ä¿®æ”¹æ‡‰ç”¨ç¨‹å¼ï¼Œå¾æ–°èˆŠå…©å€‹ç‰ˆæœ¬ä¸­è®€å–è³‡æ–™ï¼Œä¸¦é€²è¡Œæ¯”è¼ƒï¼Œç¢ºä¿ä¸€è‡´  ç•¶ç¢ºèªç„¡èª¤å¾Œï¼Œä¿®æ”¹æ‡‰ç”¨ç¨‹å¼ï¼Œåªå‘æ–°ç‰ˆæœ¬çµæ§‹å¯«å…¥è³‡æ–™ï¼Œå¯ä»¥å°‡åŸä¾†çš„èˆŠç‰ˆæœ¬è³‡æ–™ä¿ç•™ä¸€æ®µæ™‚é–“ï¼Œä»¥é˜²æ­¢æœªé æœŸçš„å•é¡Œå‡ºç¾  æŠ½è±¡åˆ†æ”¯æ–¹æ³•  å¤§å‹æ¶æ§‹è®Šå‹•æœƒéœ€è¦è¼ƒé•·çš„æ™‚é–“ï¼Œå‚³çµ±åšæ³•å¦‚ä¸‹åœ–ï¼Œä»¥çœŸå¯¦åˆ†æ”¯ï¼Œå¤§è¦æ‘¹è¦†å¯«çš„æ–¹å¼é€²è¡Œæ¶æ§‹èª¿æ•´    é€™ç¨®æ–¹å¼åœ¨èª¿æ•´å¾Œç¬¬ä¸€æ¬¡ç™¼ä½ˆæ™‚å‡ºç¾å•é¡Œçš„æ¦‚ç‡è¼ƒå¤§ï¼Œéœ€è¦ä¸€å®šçš„å“è³ªæ‰“ç£¨é€±æœŸ   ğŸ’¡ ã€ŒæŠ½è±¡åˆ†æ”¯æ–¹æ³•ã€æ˜¯åœ¨ä¸å»ºç«‹çœŸå¯¦åˆ†æ”¯çš„æƒ…æ³ä¸‹ï¼Œé€éè¨­è¨ˆæ‰‹æ®µï¼Œå°‡å¤§çš„é‡æ§‹å°ˆæ¡ˆåˆ†è§£æˆå¾ˆå¤šå€‹å°çš„ç¨‹å¼ç¢¼è®Šæ›´æ­¥é©Ÿï¼Œé€æ­¥å®Œæˆå¤§çš„ç¨‹å¼ç¢¼æ¶æ§‹èª¿æ•´ã€‚     å¥½è™•ï¼š\n   é‡æ§‹çš„åŒæ™‚ä¹Ÿèƒ½äº¤ä»˜æ¥­å‹™åŠŸèƒ½éœ€æ±‚  å¯ä»¥é€æ­¥é©—è­‰æ¶æ§‹èª¿æ•´çš„æ–¹å‘å’Œæ­£ç¢ºæ€§  å¦‚æœé‡åˆ°ç·Šæ€¥çš„æƒ…æ³ï¼Œå¾ˆå®¹æ˜“æš«åœï¼Œä¸”ä¸æµªè²»ä¹‹å‰çš„å·¥ä½œé‡  èƒ½å¼·åŒ–åœ˜éšŠçš„åˆä½œæ€§  å¯ä»¥ä½¿è»Ÿé«”æ¶æ§‹æ›´æ¨¡çµ„åŒ–ï¼Œè®Šå¾—æ›´å®¹æ˜“ç¶­è­·  æˆæœ¬\n   æ•´å€‹ä¿®æ”¹çš„æ™‚é–“é€±æœŸå¯èƒ½æœƒæ‹‰é•·  æ•´é«”å·¥ä½œé‡æ¯”ä¸€æ¬¡æ€§å®Œæˆçš„æƒ…æ³è¦å¤§  æ¡ˆä¾‹\n   iBatis å’Œ Hibernate æ˜¯å…©ç¨®ç‰©ä»¶é—œä¿‚æ˜ å°„æ¡†æ¶ (Object Relational Mappingï¼ŒORM)  GoCDåœ˜éšŠæ›¾ä½¿ç”¨æŠ½è±¡åˆ†æ”¯æ–¹æ³•æˆåŠŸå°‡IBatis æ›¿æ›æˆHibernateï¼Œä¸¦æœ‰å…©å€‹å°å¤–ç™¼ä½ˆçš„ç‰ˆæœ¬åŒæ™‚åŒ…å«äº†é€™å…©å€‹ORMæ¡†æ¶  åœ¨ä½¿ç”¨æŠ½è±¡åˆ†æ”¯æ–¹æ³•å‰ï¼Œä¹Ÿæ›¾å˜—è©¦ä½¿ç”¨å¾ä¸»ç·šä¸Šå»ºç«‹åˆ†æ”¯é€²è¡Œæ¡†æ¶æ›¿æ›ï¼Œä½†å¤±æ•—äº†\n   åœ˜éšŠå¤§å¤šæ•¸äººåœ¨ä¸»ç¶­ä¸Šé–‹ç™¼åŠŸèƒ½ï¼Œåˆ†æ”¯ä¸Šåšæ¡†æ¶æ›¿æ›ï¼Œæ¯å¤©å°‡ä¸»ç·šç¨‹å¼ç¢¼åŒæ­¥åˆ°åˆ†æ”¯ä¸Š  åŸé è¨ˆä¸‰é€±å¯ä»¥å®Œæˆçš„ä»»å‹™ï¼Œå…­é€±ä¹Ÿæ²’æœ‰èƒ½å¤ å®Œæˆ    å¦‚æœä½¿ç”¨å»ºç«‹åˆ†æ”¯çš„æ–¹å¼ï¼Œé€šå¸¸å¿…é ˆåœæ­¢å¤§éƒ¨åˆ†çš„æ–°åŠŸèƒ½é–‹ç™¼ï¼Œå¦å‰‡å¾ˆé›£æˆåŠŸ  å‡ç´šæ›¿ä»£é‚„åŸ   æˆ‘å€‘ç¸½æœƒé‡åˆ°éƒ¨ç½²æˆ–ç™¼ä½ˆå¾Œå‡ºç¾ä¸€äº›å•é¡Œï¼Œéœ€è¦é¦¬ä¸Šä¿®å¾©  æ­¤æ™‚è‹¥æœ‰ä½¿ç”¨é–‹é—œæŠ€è¡“ï¼Œä¾¿é‡æ–°è¨­ç½®ä¸€ä¸‹é–‹é—œå³å¯  ä½†è‹¥æ²’æœ‰ä½¿ç”¨é–‹é—œæŠ€è¡“ï¼Œæ€éº¼è¾¦å‘¢ï¼Ÿ â‡’ å‡ç´šæ›¿ä»£é‚„åŸ  Facebookçš„è™•ç†æ–¹æ³•ï¼š   ç›¡å¯èƒ½ä»¥ç¨‹å¼ç¢¼å‡ç´šæ–¹å¼æ›¿ä»£binaryé‚„åŸ\n   å…¸å‹çš„é‚„åŸæ“ä½œï¼šå°‡èˆ‡å¾…ä¿®å¾©çš„å•é¡Œç›¸é—œçš„æŸæ¬¡æäº¤ï¼Œä»¥åŠèˆ‡ä¹‹ç›¸é—œçš„ä»»ä½•æäº¤ä¸€åŒå¾ç¨‹å¼ç¢¼å€‰åº«ä¸­ç›´æ¥å‰”é™¤ï¼Œç„¶å¾Œå†æ¬¡æäº¤ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡ç™¼ä½ˆå³å¯  Facebookä¹‹æ‰€ä»¥å¯ä»¥ä»¥å‡ç´šæ–¹å¼æ›¿ä»£é‚„åŸï¼Œå¾—ç›Šæ–¼ï¼š\n   å…¶å·¥ç¨‹å¸«çš„ç¨‹å¼ç¢¼æäº¤éµå¾ªã€Œå°æ­¥ã€ç¨ç«‹ã€é »ç¹ã€çš„åŸå‰‡  ç™¼ä½ˆé »ç‡é«˜  Facebookå·¥ç¨‹å¸«å¹³å‡æ¯å¤©æäº¤ç¨‹å¼ç¢¼0.75æ¬¡ï¼Œå¹³å‡æ¯äººæ¯å¤©æäº¤ç´„100è¡Œç¨‹å¼ç¢¼çš„ä¿®æ”¹  12.4 å½±éŸ¿ç™¼ä½ˆé »ç‡çš„å› ç´    é«˜é »ç™¼ä½ˆä¸¦éé©åˆæ‰€æœ‰é¡å‹çš„è»Ÿé«”\n   éœ€éš¨ç¡¬é«”ç™¼ä½ˆçš„åµŒå…¥å¼è»Ÿé«”é–‹ç™¼ä¾†èªªï¼Œå…¶å°å¤–ç™¼ä½ˆçš„æˆæœ¬éå¸¸é«˜  ä¸€ä½†è»Ÿé«”å‡ºç¾å•é¡Œè€Œå°è‡´é€€è²¨ç‡ä¸Šå‡ï¼Œå…¶æå¤±å¯èƒ½ç›¸ç•¶é«˜  æ±ºå®šè»Ÿé«”çš„ç™¼ä½ˆé »ç‡æ™‚ï¼Œéœ€ç¶œåˆè€ƒæ…®ä»¥ä¸‹å½±éŸ¿å› ç´ \n   å¢é‡ç™¼ä½ˆå¸¶ä¾†çš„ç²ç›Šå’Œå¯è¡Œæ€§  æ¯æ¬¡ç™¼ä½ˆæˆ–éƒ¨ç½²çš„æ“ä½œåŸ·è¡Œæˆæœ¬æœ‰å¤šé«˜  å‡ºç¾å•é¡Œçš„æ¦‚ç‡èˆ‡ç”±é€™äº›å•é¡Œå¸¶ä¾†çš„æˆæœ¬æœ‰å¤šå°‘  ç¶­è­·åŒä¸€è»Ÿé«”çš„çœ¾å¤šä¸åŒç‰ˆæœ¬å¸¶ä¾†çš„æˆæœ¬  é«˜é »ç™¼ä½ˆæ¨¡å¼å°å·¥ç¨‹å¸«çš„æŠ€èƒ½è¦æ±‚  æ”¯æ’é€™ç¨®é«˜é »ç™¼ä½ˆæ‰€éœ€è¦çš„åŸºç¤å·¥å…·è¨­æ–½èˆ‡æµç¨‹å®Œå–„æ€§  çµ„ç¹”å°é€™ç¨®é«˜é »ç™¼ä½ˆçš„æ…‹åº¦èˆ‡æ–‡åŒ–å–å‘  å…¶ä¸­ 5ã€6ã€7å°å‰é¢å››é …çš„çµæœæœƒç”¢ç”Ÿç›´æ¥å½±éŸ¿  å¯èƒ½æœƒå› é€™ä¸‰é …åŸå› ä½¿é«˜é »ç™¼ä½ˆçš„æˆæœ¬é«˜å±…ä¸ä¸‹ï¼Œç²ç›Šç›¸å°è¼ƒå°‘  æ­¤æ™‚ä¼æ¥­é ˜å°å°±éœ€åšå‡ºæ›´å¤šåŠªåŠ›ï¼Œåœ¨å¾Œé¢ä¸‰é …ä¸ŠæŠ•å…¥æ›´å¤šçš„ç²¾åŠ›  æ¨é²ç™¼ä½ˆå‹•æ©Ÿçš„æ¼¸é€²å£å¼·ç’°     å¤§å®¶ç¿’æ…£æ¨é²é¢¨éšª  å…©æ¬¡ç™¼ä½ˆä¹‹é–“çš„é–“éš”è¶Šé•·  ç´¯ç©çš„ç¨‹å¼ç¢¼è®Šæ›´è¶Šå¤š  æ‰€éœ€å“è³ªé©—è­‰æ™‚é–“å°±è¶Šé•·ï¼Œéƒ¨ç½²æˆæœ¬ã€ç™¼ä½ˆé¢¨éšªå°±è¶Šé«˜  12.5 å°çµ  æœ¬ç« è¨è«–äº†   å¦‚ä½•åœ¨å¿«é€Ÿéƒ¨ç½²ç™¼ä½ˆçš„æƒ…æ³ä¸‹ï¼Œé€éå¤šç¨®æŠ€è¡“æ‰‹æ®µé™åº•é¢¨éšª\n   è³‡æ–™åº«é·ç§»æŠ€è¡“  å„ç¨®éƒ¨ç½²ç­–ç•¥\n   è—ç¶ éƒ¨ç½²  é‡‘çµ²é›€(ç°åº¦)ç™¼ä½ˆ  æŠ½è±¡åˆ†æ”¯éƒ¨ç½²  æš—éƒ¨ç½²  æ‡‰å°é«˜é »éƒ¨ç½²çš„å…¶å®ƒæŠ€å·§\n   æ‹†åˆ†åŠŸèƒ½ã€å…ˆå¾Œå†å‰  é–‹é—œæŠ€è¡“  è³‡æ–™ç§»è½‰æŠ€è¡“  æŠ½è±¡åˆ†æ”¯æ–¹æ³•  å‡ç´šæ›¿ä»£é‚„åŸ  åœ¨æŸäº›æ¥­å‹™å ´æ™¯ä¸‹ï¼Œæˆ‘å€‘çš„ç¢ºç„¡æ³•ç›´æ¥é«˜é »åœ°å°å¤–ç™¼ä½ˆè»Ÿé«”  ä½†æˆ‘å€‘è‹¥èƒ½ä½¿ç”¨æœ¬ç« ä»‹ç´¹çš„æ–¹æ³•æŒçºŒå‘é ç”Ÿç”¢ç’°å¢ƒé€²è¡Œç™¼ä½ˆèˆ‡éƒ¨ç½²ï¼Œå°±å¯ä»¥å„˜æ—©ç²å¾—è»Ÿé«”çš„ç›¸é—œå“è³ªå›é¥‹ï¼Œé€²è€Œæ¸›å°‘æ­£å¼ç™¼ä½ˆå¾Œçš„é¢¨éšªã€‚  å¦‚æœæˆ‘å€‘èƒ½å°‡æ¯æ¬¡ç™¼ä½ˆçš„å¹³å‡æˆæœ¬é™ä½åˆ°è¶³å¤ ä½ï¼Œé‚£éº¼å°‡æœƒç›´æ¥æ”¹è®Šåœ˜éšŠçš„ç”¢å“ç ”ç™¼æµç¨‹"},{"id":"content:4.cicd-2.0:13.chapter13.md","path":"/cicd-2.0/chapter13","dir":"cicd-2.0","title":"13 ç›£æ¸¬èˆ‡æ±ºç­–","description":"","keywords":["å‰è¨€","13.1 ç”Ÿç”¢ç›£æ¸¬ç¯„åœ","13.2 æ•¸æ“šç›£æ§é«”ç³»","13.3 å•é¡Œè™•ç†é«”ç³»","13.4 ç”Ÿç”¢ç’°å¢ƒæ¸¬è©¦","13.5 å‘æ±ï¼Œé‚„æ˜¯å‘è¥¿","13.6 å°çµ"],"body":"  å‰è¨€   åœ¨æœ‰æ•ˆç‡çš„é–‹ç™¼é«˜å“è³ªçš„è»Ÿé«”ï¼Œä¸¦ä»¥ä½é¢¨éšªæ–¹å¼ä½ˆç½²å’Œç™¼å¸ƒå¾Œï¼Œæˆ‘å€‘è¦é–‹å§‹è§€æ¸¬äº¤ä»˜åˆ°ç”¨æˆ¶æ‰‹ä¸­çš„è»Ÿé«”æˆ–æ‡‰ç”¨ç¨‹å¼çš„ä½¿ç”¨æƒ…å½¢ã€‚  äº†è§£ç”¨æˆ¶çš„ä½¿ç”¨åå¥½å’Œè»Ÿé«”åŸ·è¡Œçš„ç‹€æ³ï¼Œä¸¦ä»¥è’é›†åˆ°çš„é‡åŒ–æ•¸æ“šåšç‚ºå›é¥‹ï¼Œç¢ºä¿æˆ‘å€‘å¯ä»¥æŒçºŒé–‹ç™¼ä¸¦æ”¹é€²è»Ÿé«”ï¼Œç‚ºä½¿ç”¨è€…ç¹¼çºŒæœå‹™ã€‚  å¾ç”¨æˆ¶éœ€æ±‚é–‹å§‹é€²è¡Œè»Ÿé«”é–‹ç™¼ï¼Œåˆ°ä½é¢¨éšªä½ˆç½²/è»Ÿé«”ç™¼å¸ƒï¼Œæ¥è‘—ç›£æ§ç‡Ÿé‹ç‹€æ³ä¸¦è’é›†æ•¸æ“šï¼Œæˆ‘å€‘å®Œæˆäº†è»Ÿé«”é–‹ç™¼æµç¨‹çš„å°é–‰ç’°ï¼è®“æˆ‘å€‘é©—è­‰é–‹ç™¼çš„åŠŸèƒ½æ˜¯å¦æœ‰é”åˆ°é æœŸçš„ç›®æ¨™ã€‚    13.1 ç”Ÿç”¢ç›£æ¸¬ç¯„åœ   ç‚ºäº†äº†è§£ç”¨æˆ¶èˆ‡è»Ÿé«”ä¹‹é–“çš„äº’å‹•ï¼Œä¼æ¥­æœƒæ ¹æ“šç›¸é—œçš„æ•¸æ“šåšç‚ºç ”ç™¼èˆ‡æ”¹å–„çš„æŒ‡æ¨™ã€‚  ä¸€å€‹è»Ÿé«”å°ç”¨æˆ¶çš„æœå‹™æ©«è·¨æˆ‘å€‘ç®¡ç†çš„å¾Œå°ä¼ºæœå™¨å’Œç”¨æˆ¶è£ç½®ä¸Šï¼Œå› æ­¤é€™å…©å€‹è£ç½®ä¸Šçš„æœå‹™å’Œé‹è¡Œç‹€æ…‹éƒ½éœ€è¦ç›£æ¸¬ã€‚  13.1.1 å¾Œè‡ºæœå‹™çš„ç›£æ¸¬   åŸºç¤ç›£æ¸¬ï¼šé‡å°ç³»çµ±åŸºç¤è¨­æ–½ï¼ŒåŒ…æ‹¬ç¶²è·¯èˆ‡ä¼ºæœå™¨ç¯€é»çš„ç›£æ¸¬ã€‚å…§å®¹åŒ…å«ç¶²è·¯é€£ç·šç‹€æ…‹ã€æµé‡ã€CPUè² è¼‰ã€å…§éƒ¨å’Œå¤–éƒ¨å„²å­˜ç©ºé–“ç­‰ä½¿ç”¨ç‹€æ³ã€‚  æ‡‰ç”¨ç›£æ¸¬ï¼šé‡å°æ‡‰ç”¨ç¨‹å¼çš„é‹è¡Œå¥åº·ï¼Œå¦‚æµç¨‹æ˜¯å¦å­˜åœ¨ã€æ˜¯å¦æœ‰æ­£å¸¸æä¾›æœå‹™ã€æ˜¯å¦æœ‰ç¼ºé™·ã€æ˜¯å¦æœ‰æ­£å¸¸çš„èˆ‡ä¼ºæœå™¨é€£ç·šã€æ˜¯å¦å‡ºç¾time outã€æ˜¯å¦å‹ç›´å›ä¾‹å¤–æˆ–è­¦å‘Šã€æ˜¯å¦èƒ½æ‡‰ä»˜çªå¢çš„æœå‹™è«‹æ±‚é‡ç­‰ã€‚  æ¥­å‹™ç›£æ¸¬ï¼šé‡å°æ¥­å‹™æŒ‡æ¨™ï¼Œå¦‚ç”¨æˆ¶é€ è¨ªé‡ã€åŠŸèƒ½ä½¿ç”¨éœ€æ±‚ç­‰ã€‚  13.1.2 ç”¨æˆ¶è£ç½®ä¸Šçš„ç›£æ¸¬   ç›£æ¸¬ç”¨æˆ¶è£ç½®ä¸Šçš„è»Ÿé«”é‹ä½œç‹€æ…‹å’Œè¨­å‚™é‹è¡Œç‹€æ…‹éœ€è¦å–å¾—ä½¿ç”¨è€…æˆæ¬Šï¼Œä¸¦å°‡è’é›†çš„æ•¸æ“šå®šæœŸç™¼é€åˆ°å¾Œå°ä¼ºæœå™¨ä¸Šä¾†åˆ†æã€‚åœ¨é›¢ç·šç‹€æ…‹ä¸‹ï¼Œç¨‹å¼å¾—å…ˆåœ¨æœ¬åœ°ç«¯æš«å­˜æ•¸æ“šï¼Œå¾…é€£ç·šå¾Œå†ä¸€ä½µä¸Šå‚³ã€‚  ç›£æ¸¬çš„é …ç›®èˆ‡åœ¨å¾Œå°çš„ä¸€æ¨£ï¼š   åŸºç¤ç›£æ¸¬ï¼šé‡å°ç”¨æˆ¶è¨­å‚™çš„ç¡¬é«”ç’°å¢ƒï¼Œä»¥åŠèˆ‡ä¼ºæœå™¨çš„é€£ç·šç‹€æ…‹ã€‚  æ‡‰ç”¨ç›£æ¸¬ï¼šåŒå¾Œå°ç›£æ¸¬çš„å…§å®¹ã€‚  æœå‹™ç›£æ¸¬ï¼šæœ¬åœ°ç«¯çš„æœå‹™åŠŸèƒ½ä½¿ç”¨æƒ…å½¢ã€‚  æœ€å¾Œï¼Œä¹Ÿè¦æ ¹æ“šå¸‚å ´è©•åƒ¹ä¾†ä¿®æ­£è»Ÿé«”æœå‹™çš„ç¼ºå¤±ï¼Œæä¾›æ›´å„ªè³ªçš„é«”é©—ã€‚  13.2 æ•¸æ“šç›£æ§é«”ç³»  å°ç›£æ¸¬æ•¸æ“šçš„ç²å–éç¨‹ã€è™•ç†æµç¨‹å…¨é¢ç®¡ç†ï¼ŒåŒ…æ‹¬æ•¸æ“šä¾†æºã€æ•¸æ“šæ ¼å¼ã€æ¡é›†é€±æœŸã€æ•¸æ“šè™•ç†æ–¹æ³•ç­‰ã€‚  13.2.1 æ”¶é›†èˆ‡è™•ç†    æ¯å€‹æ­¥é©Ÿçš„è·è²¬å¦‚ä¸‹ï¼š   æ¡é›†ä¸Šå‚³ï¼šåœ¨æœ¬åœ°ç«¯è’é›†äº‹å…ˆå®šç¾©çš„äº‹ä»¶æ•¸æ“šä¸¦ä¸Šå‚³ã€‚  æ•¸æ“šæ•´ç†ï¼šéæ¿¾æ•´ç†ä¸Šå‚³æ•¸æ“šã€‚  å¯¦æ™‚åˆ†æï¼šåˆ†æç•¶å‰æ•¸æ“šã€‚  é›¢ç·šåˆ†æï¼šå°å¤§é‡æ•¸æ“šé€²è¡Œè¦å‰‡æå–æˆ–æ¨¡å‹åŒ–ã€‚  çµæœè¼¸å‡ºï¼šå‘ˆç¾å¯¦æ™‚å’Œé›¢ç·šåˆ†æçµæœï¼Œä¾›æ±ºç­–åƒè€ƒã€‚  å•é¡Œæ±ºç­–ï¼šæ ¹æ“šè¼¸å‡ºçµæœï¼Œé€éäººç‚ºæˆ–è‡ªå‹•æ–¹å¼åˆ¤å®šæƒ…æ³ï¼Œä¸¦å„²å­˜åˆ¤å®šçµæœï¼Œä»¥åˆ©æ—¥å¾Œåƒè€ƒã€‚  æ•¸æ“šå„²å­˜ï¼šä¿å­˜é›¢ç·šç‹€æ…‹çš„åŸå§‹å’Œåˆ†æå¾Œæ•¸æ“šã€‚  è‡ªå‹•ä¿®å¾©èˆ‡åŸ·è¡Œç³»çµ±ä¹‹é–“çš„ç®¡é“ã€‚ä¿®å¾©æŒ‡ä»¤éœ€è¦è¢«å‚³çµ¦åŸ·è¡Œç³»çµ±ï¼Œä¸¦ç”±å®ƒå°‡æŒ‡ä»¤åˆ†é…åˆ°å°æ‡‰çš„ç¯€é»ï¼Œé€²è¡Œç›¸é—œæ“ä½œã€‚  13.2.2 æ•¸æ“šæ¨™æº–åŒ–  è¦å¾—åˆ°ç›£æ¸¬çš„æ•¸æ“šï¼Œæˆ‘å€‘å¾—å…ˆè¦åŠƒè»Ÿé«”å…§å¦‚ä½•è§¸å‹•ã€Œäº‹ä»¶ã€ï¼Œä¸¦æŒçºŒè¿½è¹¤ã€‚æŒçºŒäº¤ä»˜åƒ¹å€¼ç’°ä¸­å¼·èª¿çš„ã€Œæ¢ç´¢ã€å’Œã€Œé©—è­‰ã€ä¾é ç”¨æˆ¶å›é¥‹ä¾†åŸ·è¡Œã€‚ç‚ºäº†æå‡é©—è­‰çš„å³æ™‚æ€§ï¼Œåœ¨é–‹ç™¼ä¸€å€‹åŠŸèƒ½å‰ï¼Œé™¤äº†è¨‚å®šåŠŸèƒ½é–‹ç™¼ç›®æ¨™å¤–ï¼Œé‚„éœ€è¦ï¼š   å®šç¾©åŠŸèƒ½æŒ‡æ¨™ï¼Œä»¥åŠå¦‚ä½•è™•ç†åŠŸèƒ½æŒ‡æ¨™ï¼å¦‚ä½•ä»¥æŒ‡æ¨™é‡åŒ–è©²åŠŸèƒ½ï¼Œä¸”æ‰¾å‡ºä½¿å¦æœ‰èˆ‡å…¶ä»–åŠŸèƒ½æŒ‡æ¨™æœ‰é—œé€£ï¼›ä»¥åŠ  æ•¸æ“šäº‹ä»¶çš„å®šç¾©ï¼è¦åœ¨ç¨‹å¼ç¢¼å…§åˆé©çš„ä½ç½®å®‰æ’ç›£è½äº‹ä»¶ï¼Œå®šç¾©è¼¸å…¥èˆ‡è¼¸å‡ºçš„æ ¼å¼ï¼Œä¸¦ç¢ºèªæ•¸æ“šæ˜¯å¦èˆ‡å…¶ä»–äº‹ä»¶æœ‰é—œä¿‚ã€‚  è‹¥åœ¨é–‹ç™¼å¯¦æ²’æœ‰å®šç¾©æ•¸æ“šæŒ‡æ¨™çš„é«”ç³»ï¼Œç•¶é‡åˆ°ç”¢å“é–‹ç™¼ç“¶é ¸æ™‚ï¼Œå°±ç„¡æ³•å¯Ÿè¦ºç”¨æˆ¶è¡Œç‚ºã€‚æŒ‡æ¨™åŒ…æ‹¬ï¼š   åå¥½é—œæ³¨åŸºç¤äº‹ä»¶å’Œæ‡‰ç”¨äº‹ä»¶çš„æ•¸æ“šåˆ†æï¼Œè€Œå¿½ç•¥äº†æ¥­å‹™æ–¹é¢çš„æ•¸æ“šã€‚  åœ¨æ²’æœ‰é‡è¦–æ¥­å‹™æ•¸æ“šç›£æ¸¬çš„æƒ…æ³ä¸‹ï¼Œç•¶æ‰“ç®—è’é›†æ•¸æ“šæ™‚ï¼Œå¾—é¡å¤–èŠ±è²»æ™‚é–“å–å¾—è³‡æ–™ã€‚  å› æ­¤ï¼Œåœ¨é«˜åº¦ä¸ç¢ºå®šçš„åŠŸèƒ½ç’°å¢ƒé–‹ç™¼ä¸‹ï¼Œæ¥­å‹™æ•¸æ“šè’é›†çš„é‡è¦æ€§é é«˜æ–¼åŠŸèƒ½å¯¦ç¾çš„é‡è¦æ€§ã€‚  ç‚ºäº†åˆ©æ–¼çµ±è¨ˆåˆ†æï¼Œä¸€é–‹å§‹å°±å¿…é ˆå…ˆå®šç¾©æ•¸æ“šæ—¥èªŒæ ¼å¼èˆ‡è’é›†è¦ç¯„ã€‚è¨‚å®šæ¨™æº–å¯ä»¥ä½¿æ•¸æ“šè’é›†å’Œè™•ç†æ›´æ–¹ä¾¿ï¼Œæ¸›å°‘ç„¡ç”¨çš„æ•¸æ“šæˆ–éŒ¯èª¤çš„åˆ†é¡ï¼Œé€²è€Œæå‡åˆ†æè™•ç†çš„æ•ˆç‡å’Œæº–ç¢ºæ€§ã€‚  æ•¸æ“šç´€éŒ„çš„ç´€éŒ„å…§å®¹åŒ…å«åŸºç¤è¨Šæ¯å’Œæ“´å±•è¨Šæ¯ã€‚å‰è€…æè¿°åŸºæœ¬çš„æ‡‰ç”¨æƒ…æ³ï¼Œå³ Whoï¼ˆå“ªä¸€å€‹ç”¨æˆ¶æˆ–æœå‹™ï¼‰ã€Whenï¼ˆä½•æ™‚ç™¼ç”Ÿï¼‰ã€Whereï¼ˆå“ªè£¡ç™¼ç”Ÿï¼‰ã€å’Œ Whatï¼ˆåšäº†ä»€éº¼ï¼‰ã€‚æ“´å±•è¨Šæ¯æ˜¯ç‚ºäº†è®“æ•¸æ“šæœ‰æ›´å¥½çš„æ“´å±•æ€§ï¼Œä»¥æ‡‰å°ä¸åŒç›£æ¸¬çµ±è¨ˆéœ€æ±‚ã€‚  13.2.3 ç›£æ¸¬æ•¸æ“šç³»çµ±å’Œèƒ½åŠ›è¡¡é‡  ç›£æ¸¬ç”¨æ•¸æ“šçš„å¯é åº¦å¯ä»¥ç”¨ä¸‰å€‹é¢å‘ä¾†è¡¡é‡ï¼š   æ­£ç¢ºæ€§ï¼šå³æ”¶é›†åˆ°çš„æ•¸æ“šèˆ‡äº‹å¯¦çš„ä¸€è‡´æ€§ï¼›  å…¨é¢æ€§ï¼šå³æ”¶é›†åˆ°çš„æ•¸æ“šæ˜¯å¦è¶³ä»¥ç”¨ä¾†ä¸‹é”æ±ºç­–ï¼›  åŠæ™‚æ€§ï¼šå³å¾æ•¸æ“šç”¢ç”Ÿåˆ°ä¸‹é”æ±ºç­–æ‰€éœ€è™•ç†æ™‚é–“å¤ çŸ­ã€‚  åœ˜éšŠé‹ä½œåˆæœŸè¼ƒå¸¸é‡åˆ°æ•¸æ“šçµæœèˆ‡å¯¦éš›æƒ…æ³ä¸ç¬¦çš„æƒ…æ³ï¼Œéœ€è¦èŠ±æ¯”è¼ƒå¤šçš„æ™‚é–“ã€‚å¯ä»¥ä»¥ä¸‹åˆ—å…©ç¨®æ–¹å¼ä¾†é©—ç¢ºè­‰æ•¸æ“šå“è³ªï¼š   å¯åœ¨é‹ä½œåˆæœŸå°‹æ‰¾å°ˆå®¶ç¶“é©—ä¾†å»ºç«‹æ•¸æ“šç³»çµ±ã€‚  å¯ä½¿ç”¨ä¾†è‡ªç³»çµ±å¤–éƒ¨ï¼ˆä¸åŒåœ˜éšŠï¼‰æˆ–å…§éƒ¨ï¼ˆä¸åŒé¢ç›¸ï¼‰çš„æ•¸æ“šç›¸äº’å°è­‰ã€‚  åŠæ™‚æ€§æ˜¯ã€Œ  æ•æ· ã€çš„é‡é»ã€‚åœ¨æ›´æ–°æŸäº›åŠŸèƒ½å¾Œï¼Œéƒ½å¸Œæœ›èƒ½å„˜æ—©çŸ¥é“å®ƒå°æ¥­å‹™ç›¸é—œæ•¸æ“šçš„å½±éŸ¿ã€‚é™¤äº†ä»¥ä¸Šä¸‰å€‹åŸºæœ¬è¡Œé‡ç‚ºåº¦ä»¥å¤–ï¼Œç›£æ¸¬ç³»çµ±é‚„æ‡‰å…·å‚™  æŠ½è±¡èƒ½åŠ› ï¼Œå³æ ¹æ“šå¯¦éš›æ•¸æ“šé‡çš„éœ€è¦ï¼Œå·¥ç¨‹å¸«å¯ä»¥å³æ™‚é…ç½®æ¯ç¨®æ•¸æ“šæ¡æ¨£çš„å¯†åº¦ã€‚  13.3 å•é¡Œè™•ç†é«”ç³»  åˆ¤åˆ¥å•é¡Œçš„æ–¹å¼æœ‰å…©ç¨®ï¼šäººå·¥åˆ¤åˆ¥æˆ–æ˜¯æ©Ÿå™¨è‡ªå‹•åˆ¤åˆ¥ã€‚é¢å°å¤§é‡çš„æ•¸æ“šï¼Œä¸å¯èƒ½å…¨ä¾é äººå·¥è™•ç†ã€‚é€šå¸¸å…ˆç”±é›»è…¦æ ¹æ“šå„ç¨®è¦å‰‡åˆ¤æ–·ï¼Œç›¡å¯èƒ½æ‰¾å‡ºç–‘ä¼¼çš„å•é¡Œã€‚ç„¡æ³•è‡ªå‹•è™•ç†æ™‚ï¼Œå°±ç™¼å¸ƒè­¦å‘Šçµ¦æŒ‡å®šçš„å·¥ç¨‹å¸«ã€‚  13.3.1 æµ·é‡çš„è­¦å‘Šèˆ‡æ™ºèƒ½åŒ–ç®¡ç†  é¢å°å¤§é‡çš„è­¦å‘Šè¨Šæ¯ï¼Œæœƒå¸Œæœ›æ¸›å°‘è­¦å‘Šï¼Œä½†å¦ä¸€æ–¹é¢åˆæ“”å¿ƒå‡ºäº†æ˜¯æ²’æœ‰è­¦å‘Šï¼Œåªå¥½å†åŠ å…¥æ›´å¤šçš„è­¦å ±ã€‚äº‹å¯¦ä¸Šï¼Œå¤§éƒ¨åˆ†çš„è­¦å‘Šè¨Šæ¯æœƒè¢«å¿½ç•¥ï¼Œä¸»è¦æ˜¯å› ç‚ºï¼š   è‡ªå·±ä¸æ˜¯è©²è­¦å‘Šçš„è² è²¬äººï¼Œ  é€™åªæ˜¯ä¸€å€‹é è­¦ï¼Œä¸ç”¨é¦¬ä¸Šè™•ç†ã€‚  è­¦å‘Šç•¶ç„¶æœ‰å®ƒå€‘çš„æ­£ç¢ºæ€§å’ŒçœŸå¯¦æ€§ï¼Œä½†åŒæ™‚ä¹Ÿè¦æé«˜é€™äº›è¨Šæ¯çš„å¦å¤–å…©å€‹é¢å‘ï¼šå³æ™‚æ€§å’Œå¯æ“ä½œæ€§ã€‚é‡å°å¾Œè€…ï¼Œè™•ç†è€…æ‡‰è©²å¯ä»¥å°è­¦å‘Šåšå‡ºæœ‰ç”¨çš„æ“ä½œï¼Œå¦å‰‡è©²è¨Šæ¯æ‡‰è¢«ç•¶æˆåƒåœ¾è¨Šæ¯å±è”½ï¼Œé¿å…é™ä½å·¥ä½œæ•ˆç‡ï¼›ä¸€ä½†çœŸæ­£çš„è­¦å‘Šè¢«æµ·é‡çš„åƒåœ¾è¨Šæ¯æ·¹æ²’ï¼Œå°±å¾ˆå®¹æ˜“é‡€æˆç½é›£ã€‚é€™å€‹å•é¡Œå¯ä»¥é å››å€‹æ–¹é¢ä¾†æ¸›ç·©ï¼š   è®“ç›£æ§é»é›¢å•é¡Œç™¼ç”Ÿåœ°æ›´è¿‘ã€‚  é€éå‹•æ…‹é–¥å€¼è¨­å®šåˆç†çš„è­¦å‘Šã€‚  å®šæœŸå›é¡§è­¦å‘Šé…ç½®ï¼Œä¸¦æ¸…ç†å¤šé¤˜çš„è­¦å‘Šã€‚  ç”¨AIå‹•æ…‹è§£é™¤è­¦å‘Šã€‚  é€™äº›æ–¹æ³•å¯ä»¥å°‡è­¦å‘Šæ•¸é‡æ§åˆ¶åœ¨ä¸€å®šçš„ç¯„åœå…§ï¼Œä½†ç„¡æ³•å®Œå…¨æ¶ˆé™¤ã€‚å¸¸è¦‹çš„è­¦å‘Šå¯èƒ½å·²æœ‰å°æ‡‰çš„æ–¹æ³•ï¼›çœŸæ­£è¦èŠ±æ™‚é–“çš„æ˜¯é‚£äº›ä»¥å¾€æ²’æœ‰å‡ºç¾éçš„ç•°å¸¸è­¦å‘Šï¼Œå› ç‚ºå®ƒå€‘å¾ˆå¯èƒ½æ˜¯ã€Œç”Ÿç”¢å•é¡Œã€ã€‚  13.3.2 å•é¡Œè™•ç†æ˜¯ä¸€å€‹å­¸ç¿’éç¨‹    å•é¡Œè™•ç†æ˜¯ä¸€å€‹è¤‡é›œçš„åœ˜éšŠæ´»å‹•ã€‚å¯æé«˜æ•ˆç‡çš„åšæ³•ï¼š   å„˜å¯èƒ½å°‡äººå·¥æ­¥é©Ÿè‡ªå‹•åŒ–  å»ºç«‹å·¥å–®ç³»çµ±  å›é¡§è™•ç†æµç¨‹  13.4 ç”Ÿç”¢ç’°å¢ƒæ¸¬è©¦   ç”Ÿç”¢ç’°å¢ƒæ˜¯ç¨ä¸€ç„¡äºŒï¼Œæˆ‘å€‘æ°¸é ç„¡æ³•1ä¿è­‰ç™¼ç¾ç”Ÿç”¢ç’°å¢ƒä¸­å¯èƒ½å‡ºç¾çš„æ‰€æœ‰å•é¡Œã€‚  éš¨è‘—è»Ÿé«”å¿«é€Ÿç™¼ä½ˆè¨´æ±‚çš„æå‡ï¼Œéç”Ÿç”¢ç’°å¢ƒçš„æ¸¬è©¦å ´æ™¯è¶Šä¾†è¶Šé¡¯å¾—ä¸å……åˆ†ã€‚  å¦‚ä½•åœ¨ä¸å½±éŸ¿ç”Ÿç”¢çš„å‰æä¸‹ï¼Œåœ¨ç”Ÿç”¢ç’°å¢ƒä¸­é€²è¡Œæ¸¬è©¦ï¼Ÿ  13.4.1 æ¸¬è©¦æ´»å‹•æ‰å¹³åŒ–è¶¨å‹¢   å‚³çµ±çš„æ··å¸ƒå¼è»Ÿé«”é–‹ç™¼æ–¹æ³•ä¸­ï¼Œæ¸¬è©¦åŸ·è¡Œå’Œæ±ºç­–æ´»å‹•é€šå¸¸é›†ä¸­åœ¨è»Ÿé«”ç ”ç™¼å‘¨æœŸçš„ä¸­éƒ¨ã€‚  éš¨è‘—ç¾ä»£è»Ÿé«”äº¤ä»˜é »ç‡çš„ä¸æ–·åŠ å¿«ï¼Œé€™ç¨®æƒ…æ³å‡ºç¾äº†è®ŠåŒ–ã€‚å¾ˆå¤šåœ˜éšŠçš„æ¸¬è©¦æ´»å‹•é–‹å§‹å‘å·¦å³å…©å´ç§»å‹•ï¼Œå¦‚åœ–13-7æ‰€ç¤ºã€‚\n   æ¸¬è©¦å·¦ç§»(æ¸¬è©¦å‰ç§»)ï¼Œæ˜¯æŒ‡æ¸¬è©¦äººå“¡æ›´æ—©ä¸”ç©æ¥µåœ°åƒèˆ‡åˆ°è»Ÿé«”å°ˆæ¡ˆå‰æœŸå„éšæ®µæ´»å‹•ä¸­ï¼Œåœ¨é–‹ç™¼åŠŸèƒ½ä¹‹å‰å°±å®šç¾©ç›¸é—œçš„æ¸¬è©¦æ¡ˆä¾‹ã€‚  æ¸¬è©¦åŸ·è¡Œä»»å‹™ä¹Ÿåœ¨å‘å·¦ç§»å‹•ï¼Œè¡¨ç¾ç‚º : åœ¨è¶Šä¾†è¶Šå¤šçš„è»Ÿé«”åœ˜éšŠä¸­ï¼Œæ¸¬è©¦è§’è‰²é–‹å§‹æ“æŠ±ã€Œå¢é‡æ¸¬è©¦ã€ï¼Œå³åœ¨è»Ÿé«”æ•´åˆæ¸¬è©¦ä¹‹å‰ï¼Œå°±é–‹å§‹é‡å°å–®å€‹å·²é–‹ç™¼å®Œæˆçš„åŠŸèƒ½é›†é€²è¡Œå“è³ªé©—è­‰ï¼Œæå‰ç™¼ç¾å“è³ªé¢¨éšªã€‚å„˜ç®¡é€™ç¨®ã€Œå¢é‡æ¸¬è©¦ã€ç„¡æ³•ç™¼ç¾å…¨éƒ¨å“è³ªå•é¡Œï¼Œä½†å¯ä»¥æ¸›å°‘æ•´åˆæ¸¬è©¦éšæ®µçš„æ™‚é–“å£“åŠ›ï¼Œå¦‚åœ–13-8æ‰€ç¤º\n   æ¸¬è©¦å·¦å³ç§»å‹•   ã€Œæ¸¬è©¦å³ç§»ã€æ˜¯æŒ‡å°‡ä¸€éƒ¨ä»½å“è³ªé©—è­‰å·¥ä½œæ”¾åœ¨è»Ÿé«”ç™¼å¸ƒä¹‹å¾Œï¼Œä¹Ÿå°±æ˜¯è®“å­å½ˆé£›ä¸€å›å…’ã€‚  ä¸»è¦å› ç‚ºç¶²éš›ç¶²è·¯è»Ÿé«”ç”¢å“çš„æ¸¬è©¦ï¼Œèˆ‡åŸå…ˆä¼æ¥­å…§éƒ¨æ‡‰ç”¨çš„è»Ÿé«”æ¸¬è©¦æœ‰é¡¯è‘—ä¸åŒï¼Œå³ç„¡æ³•çª®èˆ‰æ€§ã€‚  ä¼æ¥­å…§éƒ¨è»Ÿé«”çš„ä½¿ç”¨è€…æœ‰é™ï¼Œç’°å¢ƒç›¸å°å¯æ§, ä½†ç¶²éš›ç¶²è·¯ç”¢å“çš„æƒ…æ³æœ‰æ‰€ä¸åŒï¼Œæ¯å€‹äººçš„é›»è…¦æˆ–æ‰‹æ©Ÿä¸Šéƒ½å®‰è£è‘—ä¸åŒçš„è»Ÿé«”ï¼Œç¡¬é«”èˆ‡ä½œæ¥­ç³»çµ±ä¹Ÿæœ‰å¾ˆå¤šç¨®çµ„åˆï¼Œå› æ­¤ç„¡æ³•ä»¥çª®èˆ‰æ–¹å¼é€²è¡Œæ‰€æœ‰ç›¸é—œå ´æ™¯æ¸¬è©¦ã€‚å› æ­¤å¤§å®¶ä¹Ÿè¶Šä¾†è¶Šä¾è³´æ–¼ç”Ÿç”¢ç’°å¢ƒä¸Šçš„å“è³ªé©—è­‰  æ¸¬è©¦å³ç§»ç¾è±¡å¤šè¦‹æ–¼è»Ÿé«”ç”¢å“ä¸­çš„ç¤ºç¯„æ€§åŠŸèƒ½(software for show)ï¼Œå³è»Ÿé«”åŠŸèƒ½æ›´å¤šåœ°å‚¾å‘æ–¼å…§å®¹å±•ç¤ºï¼Œä¾‹å¦‚æœå°‹è»Ÿé«”ã€æ‹ç…§è»Ÿé«”ã€å•†å“å±•ç¤ºã€‚å³ä¾¿é€™é¡åŠŸèƒ½å‡ºç¾ä¸€äº›å•é¡Œï¼Œä½†åªè¦å³æ™‚ç™¼ç¾å³æ™‚ä¿®å¾©ï¼Œå°±ä¸æœƒå°ç”¨æˆ¶é€ æˆæœ¬è³ªæ€§æå¤±æˆ–åš´é‡å½±åš®ã€‚  å°äº‹å‹™æ€§è»Ÿé«”(software for transaction)ä»¥åŠå•é¡Œä¿®å¾©æˆæœ¬è¼ƒé«˜çš„è»Ÿé«”(firmware)ä¾†èªªï¼Œä¸€ä½†ç”Ÿç”¢ç’°å¢ƒå‡ºç¾å•é¡Œï¼Œæœƒå¸¶ä¾†æ¯”è¼ƒå¤§çš„æå¤±ã€‚å› æ­¤è»Ÿé«”åœ˜éšŠä¸æœƒå†’éšªå°‡åŠŸèƒ½é©—è­‰çš„æ´»å‹•å³ç§»ï¼Œè€Œæ˜¯æœ‰å¼·åˆ—çš„å‹•æ©Ÿå°‡æ¸¬è©¦æ´»å‹•ç›¡å¯èƒ½å·¦ç§»ï¼ŒåŒæ™‚åŠ å¼·å³æ¸¬çš„ç›£æ¸¬èƒ½åŠ›ã€‚  13.4.2 ç”Ÿç”¢ç’°å¢ƒä¸­çš„æ¸¬è©¦   QAéƒ¨ä»½æ‡‰å°‡ç”Ÿç”¢ç’°å¢ƒä¸­çš„æ¸¬è©¦åˆ—å…¥æ—¥å¸¸å·¥ä½œä¸­ï¼Œç¨±ç‚ºã€Œç”Ÿç”¢å·¡æª¢ã€ã€‚  å°ç”Ÿç”¢ç’°å¢ƒä¸­çš„å¾Œå°æœå‹™é€²è¡Œå®šæœŸåŠŸèƒ½é©—è­‰ï¼Œä»¥ç¢ºä¿è©²å¾Œå°æœå‹™å‚™èˆŠå°å¤–æ­£å¸¸æä¾›æœå‹™ï¼Œä¸”è™•ç†çš„çµæœæ˜¯æ­£ç¢ºçš„ã€‚  é€šå¸¸çš„åšæ³•æ˜¯ï¼šå»ºç«‹ä¸€å€‹è¦†è“‹æ‡‰ç”¨ç¨‹å¼ä¸»è¦åŠŸèƒ½çš„æ—¥å¸¸å¥åº·æª¢æŸ¥æ¸…å–®ï¼Œå°ç”Ÿç”¢ç’°å¢ƒé€²è¡Œä¾‹è¡Œæ¸¬è©¦å’Œæª¢æŸ¥è»Ÿé«”æœå‹™çš„å“è³ªã€‚é€™ç¨®æ¸¬è©¦æ–¹æ³•èˆ‡ç›£æ¸¬ä¸åŒï¼Œå®ƒå€‘æ˜¯ç”±è»Ÿé«”åœ˜éšŠè‡ªè¡Œå®‰æ’çš„å“è³ªé©—è­‰å·¥ä½œï¼Œä¸¦ä¸”å®šæœŸåŸ·è¡Œï¼Œå› ç‚ºé€™æ˜¯ä¸€äº›ä¾‹è¡Œé©—è­‰ï¼Œæ‰€ä»¥æ‡‰è©²è¢«è‡ªå‹•åŒ–åŸ·è¡Œï¼ã€‚é€™é¡æ¸¬è©¦ä¸­æœ€å…¸å‹çš„å°±æ˜¯ä»‹é¢æ¸¬è©¦ã€‚  å¾ˆå¤šåœ˜éšŠé–‹å§‹å°‡ä¸€äº›è‡ªå‹•åŒ–ä»‹é¢æ¸¬è©¦çš„æ¡ˆä¾‹æ”¾åœ¨ç”Ÿç”¢ç’°å¢ƒéï¼Œå‘¨æœŸæ€§åŸ·è¡Œï¼Œä»¥ä»£æ›¿æ‰‹å‹•æª¢æŸ¥ã€‚  é€™é¡ç”Ÿç”¢ç’°å¢ƒä¸Šçš„å“è³ªä¿éšœå·¥ä½œæ‡‰éµå¾ªä»¥ä¸‹åŸå‰‡\n   å»ºç«‹è‡ªç”¨çš„æ¸¬è©¦è³‡æ–™ï¼Œç¢ºä¿ä¸æ±¡æŸ“çœŸå¯¦ç”¨æˆ¶çš„è³‡æ–™  ä½¿ç”¨çš„æ¸¬è©¦è³‡æ–™ç›¡å¯èƒ½çœŸå¯¦  ä¸è¦éš¨ä¾¿ä¿®æ”¹çœŸå¯¦ç”¨æˆ¶çš„è³‡æ–™  å»ºç«‹æ¸¬è©¦å°ˆç”¨çš„ç”¨æˆ¶å­˜å–æ†‘è­‰ï¼Œç™»éŒ„ç”Ÿç”¢ç’°å¢ƒ  13.4.3 æ··æ²Œå·¥ç¨‹   æ··æ²Œå·¥ç¨‹(chaos engineering)æ˜¯æŒ‡åœ¨ç”Ÿç”¢ç’°å¢ƒä¸­æ³¨å…¥ã€Œå•é¡Œã€ï¼Œé€²è€Œç™¼ç¾ç”Ÿç”¢ç’°å¢ƒç³»çµ±æ€§å¼±é»ï¼Œä¸¦é€²è¡Œç³»çµ±æ€§æ”¹é€²çš„æ–¹æ³•æˆ–æ‰‹æ®µã€‚  å…¶ç›®æ¨™æ˜¯ä¸æ–·æå‡ç”Ÿç”¢ç’°å¢ƒé¢å°ä»»å¯è®Šæ›´çš„å¯é æ€§ã€‚é€™èˆ‡ç–«è‹—æ³¨å°„é¡ä¼¼ï¼Œå‘ç³»çµ±æ³¨å…¥ä¸€äº›å°åŠ‘é‡çš„ã€Œç—…æ¯’ã€ä½¿èº«é«”åº·ç«‹å°å®ƒçš„æŠµæŠ—åŠ›ï¼Œé€²è€Œä½¿èº«é«”ç²å¾—å…ç–«æ€§ã€‚  æ­¤éƒ¨ä»½æœ€æœ‰åçš„ä¾‹å­ç‚ºNetfilxçš„  Simon Army \n![13-8-1-Simian Army.png](images/cicd-2.0/13/13-8-1-Simian Army.png)  Netflixåœ¨AWSä¸Šï¼Œé–‹ç™¼äº†ä¸€ç³»åˆ—ç”Ÿç”¢ç’°å¢ƒæ¸¬è©¦å·¥å…·ï¼Œç¨±ç‚ºSimon Armyï¼Œç”¨æ–¼æ¨¡æ“¬AWSå¦‚å€(zone)æˆ–å¤§å€(region)å‡ºç¾å•é¡Œï¼Œä»¥åŠæ¨¡æ“¬äººç‚ºè£½é€ å‘¼å«å»¶é²ï¼Œç”¨ä¾†æ¨¡æ“¬æœå‹™é™ç´šï¼Œçœ‹ä¾è³´é€™äº›æœå‹™çš„æ¨¡çµ„æ˜¯å¦èƒ½æ­£ç¢ºåšå‡ºåæ‡‰ã€‚  é€™ç¨®å•é¡Œæ³¨å…¥(Failing Injection)å¼çš„ä¸»å‹•æª¢æ¸¬ï¼Œå¯ä½¿è»Ÿé«”å·¥ç¨‹å¸«åœ¨æ¶æ§‹è¨­è¨ˆä¸Šå°±éœ€è€ƒæ…®ä¸€äº›å¸¸è¦‹çš„å¤±æ•—å•é¡Œã€‚  13.5 å‘æ±ï¼Œé‚„æ˜¯å‘è¥¿     å¿«é€Ÿé©—è­‰ç’°ä¸­ï¼Œæˆ‘å€‘å°‡ç²¾ç·´å¾Œçš„è©¦é©—æ–¹æ¡ˆè®Šç‚ºå¯åŸ·è¡Œçš„è»Ÿé«”ï¼Œéƒ¨ç½²åˆ°ç”Ÿç”¢ç’°å¢ƒï¼Œä¸¦ä¸”æ”¶é›†äº†åŸ·è¡Œçµæœå’Œç”¨æˆ¶å›é¥‹ã€‚ç¾åœ¨æ˜¯è¦æ±ºå®šä¸‹ä¸€æ­¥ã€Œå‘æ±ï¼Œé‚„æ˜¯å‘è¥¿ã€ä»¥å®Œæˆç¬¬ä¸€å€‹æ¥­å‹™é–‰è¿´åœˆ  é€éåˆ†æç¸½çµï¼Œå¯å¹«åŠ©æˆ‘å€‘å¾æ”¶é›†åˆ°çš„æ•¸æ“šä¸­ä¾†åˆ¤å®šå‰é€²ç›®æ¨™  è‹¥æ”¶é›†çš„çµæœä¸åˆé æœŸï¼Œåªè¦èˆ‡åœ˜éšŠå…±åŒåˆ†æï¼Œçœ‹æ˜¯é‡å°ç¾è¡Œæ–¹æ¡ˆé€²è¡Œå¾®èª¿ï¼Œé‚„æ˜¯å¾å‚™æ¡ˆä¸­é¸æ“‡æ–°çš„è©¦é©—æ–¹æ¡ˆï¼Œç¹¼çºŒé©…å‹•é€™å€‹å¿«é€Ÿé©—è­‰ç’°  13.6 å°çµ  ç”Ÿç”¢ç’°å¢ƒçš„ç›£æ¸¬ç¯„åœåŒ…å«ä¸‰å€‹å±¤æ¬¡ :   åŸºç¤ç›£æ¸¬  æ‡‰ç”¨ç›£æ¸¬  æ¥­å‹™ç›£æ¸¬  æ¯å€‹å±¤æ¬¡çš„ç‰¹é»ï¼Œç›£æ¸¬è³‡æ–™çš„æ¡é›†æ–¹å¼æœ‰æ‰€ä¸åŒï¼Œä½†å…¶è™•ç†æµç¨‹åŸºæœ¬ä¸€è‡´ï¼ŒåŒ…æ‹¬:\nè³‡æ–™æ”¶é›†ã€ä¸Šå ±ã€æ•´ç†ã€åˆ†æã€å±•ç¾èˆ‡æ±ºç­–é€™å¹¾å€‹ç’°ç¯€  è€Œå°ç›£æ¸¬ç³»çµ±èƒ½åŠ›çš„è¡¡é‡æœ‰3å€‹ç¶­åº¦ :   è³‡æ–™çš„æº–ç¢ºæ€§  å…¨é¢æ€§  å³æ™‚æ€§   å‘Šè­¦è™•ç†æ˜¯ç ”ç™¼äººå“¡å’Œç¶­é‹äººå“¡çš„å¸¸è¦å·¥ä½œï¼Œä½†å‘Šè­¦éå¤šåè€Œæœƒé€ æˆå·¥ä½œä¸­çš„å›°æ“¾ï¼Œé™åº•å·¥ä½œç”¢å‡ºã€‚å› æ­¤æˆ‘å€‘æ‡‰è©²ä¸æ–·å°å‘Šè­¦é»çš„è¨­ç½®åŠè‡¨ç•°å€¼è¨ˆç®—æ–¹å¼é€²è¡Œæœ€ä½³åŒ–ï¼Œé€²è€Œç›¡å¯èƒ½æå‡æœ‰æ•ˆå‘Šè­¦ç‡ã€‚ä¸€ä½†å‘Šè­¦æˆç«‹ï¼Œå°±éœ€è¦å•Ÿå‹•å•é¡Œè™•ç†æµç¨‹ã€‚é€™å€‹æµç¨‹çš„æœ€å¾Œå…©å€‹ç’°ç¯€ ã€Œæ ¹å› åˆ†æã€å’Œã€Œæ ¹æºè§£æ±ºã€æ˜¯å­¸ç¿’å‹çµ„ç¹”çš„é‡è¦ç‰¹å¾µ  éš¨è‘—ç™¼ä½ˆé »ç‡çš„æé«˜ï¼Œæ¸¬è©¦å ´æ™¯çš„è¤‡é›œæ€§æé«˜ï¼Œè¶Šä¾†è¶Šå¤šåœ˜éšŠé–‹å§‹æ‰¾å°‹æ–¹æ³•åœ¨ç”Ÿç”¢ç’°å¢ƒä¸Šé€²è¡Œè»Ÿé«”æ¸¬è©¦ï¼Œé€™è¢«ç¨±ç‚ºæ¸¬è©¦æ´»å‹•å³ç§»ã€‚é€™ç¨®åªé©ç”¨æ–¼è»Ÿé«”å‡ºéŒ¯å¾Œçš„æˆæœ¬å’Œå½±åš®ç›¸å°è¼ƒå°‘ã€‚è€Œé‚£äº›è¼ƒäº¤æ˜“æ€§è»Ÿé«”æˆ–å›æ”¶æˆæœ¬è¼ƒé«˜çš„è»Ÿé«”ä¾†èªªï¼Œæ¸¬è©¦å·¦ç§»çš„è¶¨å‹¢ä¹Ÿè¼ƒæ˜é¡¯ã€‚  æ¸¬è©¦å³ç§»ä¸»è¦æœ‰å…©ç¨®é¡å‹ :   å°‡æ¸¬è©¦æ¡ˆä¾‹åœ¨ç”Ÿç”¢ç’°å¢ƒä¸Šè‡ªå‹•åŸ·è¡Œ  æ··æ²Œå·¥ç¨‹(Chaos engineering)   Netfilxé–‹ç™¼äº†ä¸€ç³»åˆ—ç ´å£æ€§æ¸¬è©¦å·¥å…·(Simian Army)å¯ä»¥ä¿ƒä½¿å·¥ç¨‹å¸«åœ¨è»Ÿé«”è¨­è¨ˆèˆ‡é–‹ç™¼ä¹‹æ™‚ï¼Œå°±æå‰è€ƒæ…®å„ç¨®å¤±æ•—çš„å¯èƒ½æ€§ï¼Œé€™è¢«ç¨±ç‚ºã€Œç‚ºå¤±æ•—è€Œè¨­è¨ˆã€é€²è€Œæé«˜ç”Ÿç”¢ç’°å¢ƒçš„è»Ÿé«”æœå‹™ç©©å®šæ€§ï¼Œç‚ºç”¨æˆ¶æä¾›æ›´å¥½çš„æœå‹™é«”é©—ã€‚  ç•¶æ”¶é›†åˆ°çœŸå¯¦çš„è³‡æ–™å›é¥‹ï¼Œå°±å¯å°è­‰åœ¨åƒ¹å€¼æ¢ç´¢ç’°ä¸­æ‰€æå‡ºçš„å‡è¨­æˆ–ç›®æ¨™ï¼Œä¸¦é€éä¸»å‹•é—œè¯åˆ†æï¼Œæœ€çµ‚ç¢ºå®šæ˜¯ç¹¼çºŒé€²è¡Œæ›´å¤šçš„è©¦é©—ï¼Œé‚„æ˜¯é‡æ–°å†é¸æ“‡ä¸€æ¢æ–°çš„è·¯"},{"id":"content:4.cicd-2.0:16.chapter16.md","path":"/cicd-2.0/chapter16","dir":"cicd-2.0","title":"16 ç ”ç™¼æ¨å‹•çš„DevOps","description":"éåˆ†å¼·èª¿ä¸¦å°ˆæ³¨æ–¼dockerã€Jenkinsã€æ¸¬è©¦æ¡†æ¶ã€Mockæ¡†æ¶æˆ–æŒçºŒé›†æˆæœå‹™å™¨ç­‰å·¥å…·ï¼Œæœ‰æ‚–æ–¼æ•æ·å®£è¨€ -- å’Œæµç¨‹èˆ‡å·¥å…·ç›¸æ¯”ï¼Œå€‹é«”èˆ‡äº¤äº’æ›´ç‚ºé‡è¦ã€‚","keywords":["16.1 æ”¹é€²çš„é—œéµé»","16.2 ç¬¬ä¸€éšæ®µï¼šæ•æ·101","16.3 ç¬¬äºŒéšæ®µï¼šDevOpsè½‰å‹","16.4 å°çµ"],"body":"  éåˆ†å¼·èª¿ä¸¦å°ˆæ³¨æ–¼dockerã€Jenkinsã€æ¸¬è©¦æ¡†æ¶ã€Mockæ¡†æ¶æˆ–æŒçºŒé›†æˆæœå‹™å™¨ç­‰å·¥å…·ï¼Œæœ‰æ‚–æ–¼æ•æ·å®£è¨€ -- å’Œæµç¨‹èˆ‡å·¥å…·ç›¸æ¯”ï¼Œå€‹é«”èˆ‡äº¤äº’æ›´ç‚ºé‡è¦ã€‚  æ¡ˆä¾‹èƒŒæ™¯ï¼š   Bå…¬å¸éƒ¨é–€çµ„æˆï¼š\n   Bå…¬å¸æŸæ¥­å‹™ç·šä¸‹çš„ä¸€å€‹å¾Œå°æœå‹™æ¥­å‹™åœ˜éšŠï¼Œé€™å€‹åœ˜éšŠè² è²¬ç¶²é æœç´¢ç”¢å“çš„å¾Œå°æœå‹™ã€‚è©²æœå‹™æ˜¯ä¸€å€‹ç›¸å°ç¨ç«‹çš„å­ç³»çµ±ï¼Œæ¥å—å…¶ä»–æœå‹™çš„è«‹æ±‚ï¼Œä¹Ÿå°‡è‡ªå·±æœå‹™çš„è™•ç†çµæœæä¾›çµ¦å…¶ä»–æœå‹™ä½¿ç”¨ã€‚   ç”±ä¸€å€‹ç¨‹åºæ¨¡çµ„çµ„æˆï¼Œ  ç¸½é«”ä»£ç¢¼é‡ç´„ç‚º10è¬è¡Œï¼Œ  å…¨éƒ¨ç”±C++èªè¨€ç·¨å¯«ï¼Œ  æ¯å€‹æ¨¡çµ„éƒ½æ˜¯ä¸€å€‹å–®ç¨çš„ç¨‹åºæœå‹™ï¼ˆå¯ä»¥èªç‚ºæ˜¯å¾®æœå‹™ï¼‰ï¼Œ  é‹è¡Œåœ¨è¿‘300å°æœå‹™å™¨ä¸Šã€‚å¾å‰ç«¯çš„è³‡æ–™æµç²å–é–‹å§‹ï¼Œå†åˆ°è³‡æ–™æµçš„è§£æã€åˆ†é¡å…¥åº«ã€‚    å·¥ä½œæ¨¡å¼   åˆ†æ”¯é–‹ç™¼ã€é›†ä¸­è¯èª¿éšæ®µï¼Œæ¸¬è©¦äººå“¡åƒèˆ‡è¼ƒå°‘  ç¨‹å¼ç¢¼ç®¡ç†ï¼šåˆ†æ”¯é–‹ç™¼ã€ä¸»å¹¹ç™¼å¸ƒ    16.1 æ”¹é€²çš„é—œéµé»  16.1.1 æ”¹é€²æ–¹æ³•è«–   ç›®æ¨™é©…å‹•  å¾ç°¡å–®å•é¡Œé–‹å§‹  æŒçºŒæ”¹å–„  16.1.2 å®šç¾©æ”¹é€²ç›®æ¨™   å·¥ä½œéç¨‹ä¸­çš„ç—›é»   éƒ¨é–€è² è²¬äººçš„æœŸæœ›  åœ˜éšŠç®¡ç†è€…äº¤ä»˜çš„å£“åŠ›  é …ç›®è² è²¬äººçš„ç…©æƒ±  åˆ¶è¨‚åˆç†çš„éšæ®µæ€§æ”¹é€²ç›®æ¨™   çŸ­æœŸç›®æ¨™\n   é …ç›®è¿‘é æœŸæ™‚é–“äº¤ä»˜  å‰µå»ºæ–°çš„è»Ÿé«”é–‹ç™¼å”ä½œæ–¹å¼  å»ºç«‹å¿…è¦çš„åŸºç¤è¨­æ–½ï¼Œä»¥æ”¯æŒä¹‹å¾Œçš„æŒçºŒäº¤ä»˜  ä¸­æœŸç›®æ¨™\n   ç¸®çŸ­ç™¼å¸ƒé€±æœŸï¼Œå¯ä»¥å¿«é€Ÿä¸Šç·š  ä¸é™ä½ç”Ÿç”¢ç’°å¢ƒçš„å“è³ª  é™ä½æ¸¬è©¦äººåŠ›ç¸½æŠ•å…¥  æ”¹é€²ç›®æ¨™å°æ‡‰å…©å€‹å¯¦æ–½éšæ®µ   ç¬¬ä¸€éšæ®µï¼Œæ•æ·101  ç¬¬äºŒéšæ®µï¼ŒDevOpsè½‰å‹  16.2 ç¬¬ä¸€éšæ®µï¼šæ•æ·101   ç°¡ä»‹   ä¹Ÿç¨±ç‚ºWater-Scrum-fallæ¨¡å¼ï¼ŒæŒ‡ç€‘å¸ƒé–‹ç™¼æ¡†æ¶æ¨¡å¼ä¸‹ï¼Œå°å„éšæ®µå…§éƒ¨é€²è¡Œè¿­ä»£æ™‚é–“ç›’çš„åŠƒåˆ†  è¿­ä»£é€±æœŸé€šå¸¸ç‚º1~4é€±ã€‚é–‹ç™¼éšæ®µå…§çš„æ¯å€‹è¿­ä»£é€±æœŸå…§ï¼Œéƒ½æœƒç™¼ç”Ÿéœ€æ±‚åˆ†æã€ç¨‹å¼é–‹ç™¼ã€æ¸¬è©¦æ´»å‹•ã€‚ä¸¦ä¸”æ¯å€‹é–‹ç™¼è¿­ä»£çµæŸæ™‚åšæ¼”ç¤ºé©—æ”¶  é€²å…¥é–‹ç™¼éšæ®µå¾Œï¼Œä»èˆŠæœ‰éœ€æ±‚æ”¶é›†ã€åˆ†æå’Œè¨ˆåŠƒçš„éšæ®µï¼Œä¸¦ä¸”åœ¨çµæŸå¾Œä¹Ÿæœƒå†å®‰æ’1~2å€‹ä½œç‚ºç³»çµ±æ¸¬è©¦è¿­ä»£  æœ€å¾Œå®‰æ’ç³»çµ±è©¦ç‡Ÿé‹éšæ®µï¼Œç„¶å¾Œå†æ­£å¼ä¸Šç·š  ç‰¹é»ï¼š   ç€‘å¸ƒé–‹ç™¼æ¨¡å¼ä¸­çš„å¹¾å¤§éšæ®µæ²’æœ‰è®ŠåŒ–ï¼Œåªå°å„éšæ®µå…§éƒ¨æ´»å‹•é€²è¡Œé©ç•¶èª¿æ•´  æ­¤æ¨¡å¼å¸¸æ‡‰ç”¨åœ¨å°æ–¼æŒçºŒäº¤ä»˜ç†è§£ä¸æ·±ã€ç ”ç™¼åŸºç¤è¨­æ–½ä¸å®Œå‚™ï¼Œä½†å¸Œæœ›é€²è¡Œæ”¹å–„çš„åœ˜éšŠ    16.2.1 åšå€‹é è­œçš„è¨ˆåŠƒ   éœ€æ±‚æ‹†åˆ†ï¼Œé–‹ç™¼è² è²¬äººæ ¹æ“šä¸‹åˆ—3å€‹è¦æ±‚ä½œæ‹†åˆ†ï¼Œä¸¦äº¤çµ¦æ¸¬è©¦äººå“¡é€²è¡Œè©•å¯©å’Œè£œå……å¾Œï¼Œå†æ¬¡ç›¸äº’è¨è«–ä¸¦é”æˆæ„è¦‹ä¸€è‡´\n   æ¯å€‹éœ€æ±‚å¯¦ç¾å°‘æ–¼ä¸‰å¤©  æ‹†åˆ†è¦éµå¾ª  INVESTåŸå‰‡   ç¨ç«‹çš„ï¼ˆIndependentï¼‰  å¯å”å•†çš„ï¼ˆNegotiableï¼‰  æœ‰åƒ¹å€¼çš„ï¼ˆValuableï¼‰  å¯ä¼°ç®—çš„ï¼ˆEstimatableï¼‰  è¼ƒå°çš„ï¼ˆSmall)  å¯æ¸¬è©¦çš„ï¼ˆTestableï¼‰  æ‹†åˆ†éç¨‹ä¸­çš„æ¬Šè¡¡  ç›¸å°ä¼°ç®—ï¼Œä½¿ç”¨æ’åºæ³•å°éœ€æ±‚ä¼°ç®—ï¼Œæ’åºæ³•æœ‰2ä¸»å¼µ(1  2)èˆ‡4å‰æ(3 6)\n   å°‡è¼ƒå¤šçš„éœ€æ±‚æ”¾ä¸€èµ·ï¼Œçµåˆä¸Šä¸‹æ–‡åšæ¯”è¼ƒ (é™ä½å› äººå“¡èƒ½åŠ›å·®ç•°å¸¶ä¾†çš„åæŸ¥)  åœ¨éœ€æ±‚çš„æ•¸é‡è¼ƒå¤šæ™‚ï¼Œé …ç›®æ•´é«”è¦æ¨¡è©•ä¼°æœƒç›¸å°æº–ç¢º  æ¯å€‹éœ€æ±‚è‡³å°‘æœ‰å…©å€‹äººè¼ƒäº†è§£ï¼Œä¸”æ˜¯å¯ä»¥å®Œæˆçš„  ä¸éœ€è¦è©•ä¼°æ¸¬è©¦æ´»å‹•çš„å·¥ä½œé‡ (é–‹ç™¼ç’°ç¯€æ‰æ˜¯ç³»çµ±çš„ç“¶é ¸ï¼Œè‹¥æ¸¬è©¦ç’°ç¯€å°±æœƒæˆç‚ºç“¶é ¸ç”šè‡³å¯èªç‚ºé–‹ç™¼è³‡æºå·²æŠ•å…¥éå¤š)  æ‰€æœ‰éœ€æ±‚éƒ½æ‹†è§£ï¼Œä¸¦ä¸”è¦æ¨¡ä¸æœƒç›¸å·®å¤ªå¤š  éœ€æ±‚çš„å€‹æ•¸ç›¸å°è¼ƒå¤š  åˆå§‹è¨ˆåŠƒ\n   ç†æƒ³æƒ…æ³ä¸‹ï¼Œæ¯é€±å·¥ä½œæ™‚é–“æ˜¯å¤šå°‘  ç†æƒ³æƒ…æ³ä¸‹ï¼Œæ¯é€±èƒ½å®Œæˆå¤šå°‘éœ€æ±‚  å¯¦éš›æ¯é€±æœ€æœ‰å¯èƒ½é–‹ç™¼å®Œæˆå¤šå°‘éœ€æ±‚  å¦‚ä½•è™•ç†æ•´å€‹é …ç›®é–‹ç™¼éç¨‹ä¸­çš„ç·šä¸Šéœ€æ±‚è®Šæ›´\n   ä¾‹å¦‚æ˜¯åœ¨ç™¼å¸ƒä¸»å¹¹ä¸Šæ‹‰ä¸€æ¢é …ç›®é–‹ç™¼åˆ†æ”¯ï¼Œæ‰€æœ‰äººä»¥é€™å€‹åˆ†æ”¯é€²è¡Œé–‹ç™¼ã€‚å°æ–¼è‡¨æ™‚çš„ç·Šæ€¥éœ€æ±‚ï¼Œåœ¨ç·šä¸Šç™¼å¸ƒç‰ˆæœ¬åˆ†æ”¯ä¸Šå–®ç¨æ‹‰åˆ†æ”¯ï¼Œå¿«é€Ÿä¿®å¾©ç·šä¸Šå•é¡Œæˆ–é–‹ç™¼ç·Šæ€¥éœ€æ±‚ï¼Œå†å¿«é€Ÿåˆä½µä¸Šç·š\n   ç³»çµ±æ¸¬è©¦çš„æ™‚é–“åœ¨å“ªè£¡ï¼Ÿ  å…¶ä»–é¡å‹çš„æ¸¬è©¦æ€éº¼è¾¦ï¼Ÿ  è¨ˆåŠƒæ™‚é‚„éœ€è¦è€ƒæ…®ä¾è³´å› ç´ \n   ä¾‹å¦‚è€ƒæ…®æ¥­å‹™æˆ–æŠ€è¡“ä¸Šï¼Œæ˜¯å¦èˆ‡å…¶ä»–åœ˜éšŠæœ‰ä¾è³´çš„é—œä¿‚ï¼Ÿ  é …ç›®è¨ˆåŠƒåœ¨æ•´é«”ä¸Šè¦åŠ ä¸€å€‹ç·©è¡æ™‚é–“  16.2.2 é–‹ç™¼éšæ®µå•Ÿèˆª   è¿­ä»£é€±æœŸçš„é¸æ“‡     æ°´ä½ç•¶ä½œé–‹ç™¼çš„æ™‚é–“ç¯„åœï¼Œå²©çŸ³ç•¶ä½œæ—¥å¸¸å•é¡Œ  è‹¥ä»¥å‚³çµ±æ¨¡å¼é–‹ç™¼ï¼Œæ­¤æ™‚å•é¡Œé›£ä»¥æš´éœ²å‡ºä¾†  è‹¥ä»¥è¿­ä»£æ¨¡å¼é–‹ç™¼ï¼Œå› ç‚ºäº¤ä»˜æ™‚é–“è®ŠçŸ­ï¼Œç›¸ç•¶æ–¼æ°´ä½è®Šä½ï¼Œå•é¡Œå°±èƒ½ææ—©å‡¸é¡¯å‡ºä¾†ã€‚ä½†æ˜¯æ°´ä½çš„é«˜ä½çš„é¸æ“‡ï¼Œå‰‡éœ€è¦åœ˜éšŠè¦–æƒ…æ³è€Œæ±ºå®š  åœ˜éšŠå”ä½œæµç¨‹   æ¯å€‹è¿­ä»£çš„å·¥ä½œç´„å®š  å°æ–¼å–®å€‹éœ€æ±‚çš„é–‹ç™¼æµç¨‹ç´„å®š   æ‰¹é‡é–‹ç™¼ï¼Œæ‰¹é‡ææ¸¬ï¼šæŒ‡é–‹ç™¼äººå“¡ç­‰åˆ°å…¨éƒ¨æˆ–å¤§éƒ¨åˆ†åŠŸèƒ½é–‹ç™¼å®Œæˆå¾Œï¼Œå†ä¸€èµ·è¯åˆé©—è­‰  å–®ä¾‹é–‹ç™¼ï¼Œå³æ™‚ææ¸¬ï¼šæŒ‡æ¯ç•¶é–‹ç™¼äººå“¡é–‹ç™¼å®Œä¸€å€‹éœ€æ±‚ä¹‹å¾Œï¼Œå°±å³åˆ»äº¤çµ¦æ¸¬è©¦äººå“¡é€²è¡Œé©—è­‰    16.2.3 å°éç¨‹å“è³ªçš„ç´„æŸ   å¦‚ä½•èƒ½è‡ªè¦ºéµå®ˆCIå®šå¾‹ï¼Ÿ  ç·¨è­¯æ™‚é–“éé•·   é–‹ç™¼äººå“¡å¯«å®Œç¨‹å¼ç¢¼ï¼Œæäº¤å‰åœ¨è‡ªå·±æ©Ÿå™¨ä¸Šé‹è¡Œå‘½ä»¤è…³æœ¬ï¼Œå°‡SVNç•¶å‰ç‰ˆæœ¬è€—èˆ‡patchä¸€èµ·æäº¤çµ¦æœå‹™ç«¯ï¼Œç©ºé–’æ™‚å°±æœƒè‡ªå‹•ç·¨è­¯ã€‚è‹¥å‡ºéŒ¯å°±æœƒå¾—åˆ°åé¥‹ï¼Œè‹¥æ²’å•é¡Œé–‹ç™¼äººå“¡å‰‡å¯æäº¤ç¨‹å¼ç¢¼    é–‹ç™¼äººå“¡ç„¡æ³•é‹è¡Œè‡ªå‹•åŒ–æ¸¬è©¦   è¿­ä»£é–‹ç™¼ä¸­ï¼Œè‡ªå‹•åŒ–æ¸¬è©¦çš„ç¬¬ä¸€å€‹ç”¨æˆ¶æ˜¯é–‹ç™¼äººå“¡ï¼Œä¾†æª¢æŸ¥æ–°å¢ä¿®æ”¹çš„ç¨‹å¼ç¢¼æ˜¯å¦æ­£å¸¸  è‡ªå‹•åŒ–æ¸¬è©¦çš„ç­–ç•¥ã€‚æ ¹æ“šè‡ªå‹•åŒ–æ¸¬è©¦é‡‘å­—å¡”ç†è«–åŠåœ˜éšŠç‹€æ³åšå‡ºæ¸¬è©¦ç´„å®š   å–®å…ƒæ¸¬è©¦  æ¨¡çµ„è‡ªå‹•åŒ–æ¸¬è©¦  æœå‹™æ¥å£è‡ªå‹•åŒ–æ¸¬è©¦  å­ç³»çµ±ç´šè‡ªå‹•åŒ–æ¸¬è©¦  å¤§ç’°è‡ªå‹•åŒ–æ¸¬è©¦    è‡ªå‹•åŒ–æ¸¬è©¦æ‰€éœ€é‹è¡Œç’°å¢ƒä¸è¶³æ€éº¼è¾¦  å¦‚ä½•ç¢ºå®šä¸€å€‹éœ€æ±‚å¯ä»¥ææ¸¬   æ¸¬è©¦äººå“¡åœ¨é–‹ç™¼äººå“¡çš„æ©Ÿå™¨ä¸Šé«”é©—éè©²éœ€æ±‚  æ‰€æœ‰è‡ªå‹•åŒ–æ¸¬è©¦éƒ½é€šéã€‚  å¦‚ä½•ä½œæ€§èƒ½èˆ‡å£“åŠ›æ¸¬è©¦   å°é–‹ç™¼äººå“¡çš„å·¥ä½œè¦æ±‚\n   åœ¨è¿­ä»£é–‹ç™¼çš„å·¥ä½œæ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰éœ€æ±‚æ˜¯ä¾æ“šPARIDäº”å› ç´ ç¶œåˆå„ªå…ˆç´šæ’å…¥è¿­ä»£è¨ˆåŠƒç•¶ä¸­ï¼Œé€™æœƒè¦æ±‚é–‹ç™¼äººå“¡ç›¡é‡èƒ½å¤ å¤šäº†è§£å’Œä¿®æ”¹ä¸åŒçš„æ¨¡çµ„åŠŸèƒ½  åœ˜éšŠçš„è‡ªæˆ‘ä¸»å‹•æ”¹é€²\n   æ¯å€‹è¿­ä»£èˆ‰è¡Œå›é¡§æœƒè­°ï¼Œå°å·¥ä½œéç¨‹ä¸­æˆå“¡çš„å”ä½œæ–¹å¼ã€å·¥ä½œæ´»å‹•çš„ç´„å®šã€åœ˜éšŠé¢è‡¨çš„å•é¡ŒåŠå¯èƒ½çš„è§£æ±ºæ–¹æ¡ˆé€²è¡Œè¨è«–  ä¸èƒ½ä¿®æ”¹æœ€åˆä¼°ç®—çš„å¤§å°\n   æ–°å¢éœ€æ±‚ï¼šä»¥å‰æœªè©•ä¼°éï¼Œæ‰€ä»¥éœ€è¦å¿«é€Ÿè¨è«–ã€ä¼°ç®—ï¼Œä»¥ä¾¿åŠ å…¥é–‹ç™¼è¨ˆåŠƒç•¶ä¸­  å·²ä¼°éœ€æ±‚ï¼šå–®å€‹éœ€æ±‚ä¼°ç®—æœ¬å°±ä¸ç²¾ç¢ºï¼ŒåŸå…ˆçš„ä¼°ç®—æ˜¯åŸºæ–¼æ•´é«”çš„ç¸½é‡è©•ä¼°ï¼Œå› æ­¤ä¸å¤ªæœƒå› ç‚ºå€‹åˆ¥éœ€æ±‚é‡æ–°è©•ä¼°è€Œåå·®å¤ªå¤š  16.2.4 éšæ®µæ€§æ”¹é€²é»   æ¥­å‹™ç›®æ¨™åˆç†  é …ç›®è¨ˆåŠƒé€æ˜  æµç¨‹\"è‡ªå®šç¾©ï¼Œè‡ªéµå®ˆ\"ï¼Œåœ˜éšŠç¢ºä¿é«˜å“è³ªäº¤ä»˜  å®šæœŸä¸»å‹•å›é¡§ï¼Œè€Œéäº‹ä»¶é©…å‹•çš„å›é¡§  é€šéç´°ç²’åº¦éœ€æ±‚çµ„ç¹”é–‹ç™¼æµç¨‹  æŒçºŒé›†æˆå…­æ­¥æäº¤æ³•  é©ç•¶æ˜¯ç”¨è‡ªå‹•åŒ–æ¸¬è©¦ï¼Œæé«˜å“è³ªåé¥‹æ•ˆç‡    16.3 ç¬¬äºŒéšæ®µï¼šDevOpsè½‰å‹   é€éæ•æ·101çš„æ–¹å¼ï¼Œå°æ–¼æ™‚ç¨‹é ä¼°ã€é–‹ç™¼åœ˜éšŠçš„åˆä½œã€æ¸¬è©¦æµç¨‹éƒ½æœ‰ä¸€å®šçš„æˆé•·ï¼Œåœ˜éšŠé–‹å§‹æœå‘å°æ‰¹é‡ç”Ÿç”¢çš„æ–¹å¼é–‹ç™¼ï¼Œä¸¦ä¸”é–‹å§‹æœ‰æ¯”è¼ƒé »ç¹çš„æˆæœç™¼ä½ˆ(ex.å…©é€±ä¸€æ¬¡)  å¾éå»çš„åˆ†æ”¯é–‹ç™¼ã€åˆä½µä¸»ç·šå…§å®¹åˆ°åˆ†æ”¯ã€é›†ä¸­æ¸¬è©¦ï¼Œæ”¹ç‚ºä¸»ç·šé–‹ç™¼ã€åˆ†æ”¯ç™¼å¸ƒçš„åŸéš›å¿«ç·šé–‹ç™¼æ¨¡å¼\n   åœ¨wikiä¸Šå¯ä»¥çŸ¥é“æ¯å€‹ç™¼å¸ƒçš„æ™‚é–“é»ï¼Œä»¥åŠå°æ‡‰çš„ç™¼å¸ƒåˆ—è¡¨  å®¢æˆ¶å¯ä»¥éš¨æ™‚æäº¤éœ€æ±‚  éœ€æ±‚åˆ—è¡¨ä¸­ï¼Œä¸ä½†æœ‰å®¢æˆ¶è¦æ±‚ï¼Œé‚„åŒ…å«è‡ªæˆ‘å„ªåŒ–éœ€æ±‚æ’ç¨‹  16.3.1 èˆ‡ç¶­é‹äººå“¡çš„è¡çª   å› ç‚ºé »ç¹çš„ç™¼å¸ƒï¼Œå¼•ç™¼ç¶­é‹äººå“¡çš„æ†‚æ…®\n   éå»æ¸¬è©¦æ™‚é–“é‚£éº¼é•·ï¼Œä¸Šç·šçš„ç³»çµ±é‚„æ˜¯æœƒå‡ºç¾å„ç¨®å•é¡Œï¼Œç¾åœ¨æ¸¬è©¦çš„æ™‚é–“ç¸®çŸ­å¾Œ(æ¸¬è©¦å·¦ç§»ï¼Œå°è‡´æœ€å¾Œä¸Šç·šå‰æ¸¬è©¦æ™‚é–“ç¸®çŸ­)ï¼Œé‚£ä¸Šç·šä¸€å®šæœƒæ›´å®¹æ˜“å‡ºå•é¡Œ  æˆ‘æœƒè¢«ç´¯æ­»ï¼Œéƒ¨ç½²åˆ°å¤šå°ä¸»æ©Ÿï¼Œä»¥å‰ä¸‰å€‹æœˆåŠ ç­ä¸€æ¬¡ï¼Œç¾åœ¨è®Šæˆå…©é€±å°±è¦åŠ ç­ä¸€æ¬¡  é€éè®“ç¶­é‹äººå“¡åƒèˆ‡åœ˜éšŠæ—¥å¸¸çš„é‹ä½œï¼Œå¢åŠ é€æ˜åº¦\n   é–‹ç™¼è² è²¬äººç‚ºç¶­é‹äººå“¡è©³ç´°è¬›è§£ç›®å‰ä½¿ç”¨çš„ç ”ç™¼æµç¨‹æ¨¡å¼ï¼Œè®“ä»–äº†è§£ç›®å‰å°æ–¼ç¨‹å¼ç¢¼å“è³ªçš„ä¿éšœæ–¹å¼  é‚€è«‹ç¶­é‹äººå“¡åƒèˆ‡é–‹ç™¼åœ˜éšŠæ´»å‹•ï¼ŒåƒåŠ æ—¥å¸¸å·¥ä½œçš„è¨è«–ex.åƒèˆ‡ç«™ç«‹æœƒè­°ã€åƒèˆ‡åœ˜éšŠè¡åˆºé€±æœŸå¾Œçš„å›é¡§æœƒè­°  å°‡ç¶­é‹äººå“¡åŠ å…¥é–‹ç™¼åœ˜éšŠçš„å·¥ä½œæºé€šç¾¤ä¸­ï¼Œä»¥ä¾¿éš¨æ™‚äº†è§£é‹ä½œç‹€æ³ï¼Œé€™ç¶­é‹äººå“¡ä¸å†è¦–ç‚ºé–‹ç™¼åœ˜éšŠæ˜¯ä¸€å€‹çœ‹ä¸åˆ°å…§éƒ¨çš„ã€Œé»‘ç›’ã€  é‡å°ç¶­é‹éœ€æ±‚é€²è¡Œæ¶æ§‹èª¿æ•´ï¼Œè®“ç¶­é‹äººå“¡çš„å·¥ä½œæ›´æœ‰æ•ˆç‡(éå»å°æ–¼ç¶­é‹çš„éœ€æ±‚éƒ½ä»¥æœ‰ç©ºå†ä¾†è™•ç†è€Œå¿½æ‚ éå»ï¼Œç¾åœ¨è®Šæˆä¸€å€‹åˆä½œå¤¥ä¼´ï¼Œä¸€èµ·è®“è®“éƒ¨ç½²éç¨‹å¯ä»¥æ›´è‡ªå‹•åŒ–)  16.3.2 é«˜é »éƒ¨ç½²ç™¼å¸ƒä¸­çš„å…·é«”éšœç¤™   ç”±æ–¼æ­·å²å…±æ¥­ï¼Œå„æ¨¡çµ„çš„éƒ¨ç½²æ–¹å¼ä¸ä¸€è‡´ï¼Œå°è‡´ä¸åˆ©æ–¼çµ±ä¸€ç¶­é‹  éƒ¨åˆ†æ¨¡çµ„åœ¨éƒ¨ç½²æ™‚ï¼Œç¶­é‹äººå“¡éœ€è¦æ‰‹å‹•å‰µå»ºæŸå€‹ç›®éŒ„ï¼Œå‚™ä»½ç¨‹å¼é‹è¡Œæ™‚ç”¢ç”Ÿçš„è‡¨æ™‚æ•¸æ“š  åŒæ¨£çš„æ¨¡çµ„åœ¨ä¸åŒæ©Ÿå™¨ä¸Šçš„éƒ¨ç½²ä½ç½®éƒ½æœ‰å·®åˆ¥  åŒæ¨£çš„æ¨¡çµ„åœ¨ä¸åŒæ©Ÿå™¨ä¸Šå°å¤–çš„æ¥å£ç­–ç•¥ä¹Ÿä¸åŒ  ç¨‹å¼ç¢¼æ˜¯ç”¨çµ•å°è·¯å¾‘è€Œéç›¸å°è·¯å¾‘  éƒ¨ç½²æ“ä½œæ–‡ä»¶æ˜¯ç”±é–‹ç™¼åœ¨éƒ¨ç½²å‰ç·¨å¯«(ä»£è¡¨æ¯æ¬¡å¯èƒ½éƒ½ä¸ä¸€æ¨£ï¼Œå°è‡´ç„¡æ³•é€éè‡ªå‹•åŒ–åè¦†åŸ·è¡Œ)ï¼Œç¶­é‹äººå“¡æ ¹æ“šæ–‡ä»¶èªªæ˜æ“ä½œ  é–‹ç™¼ç’°å¢ƒçš„éƒ¨ç½²æ–¹å¼è·Ÿæ­£å¼ç’°å¢ƒçš„éƒ¨ç½²æ–¹å¼ä¸åŒ  æ¸¬è©¦ä»£ç¢¼å­˜åœ¨QAçš„å„²å­˜åº«ï¼Œè€Œä¸æ˜¯è·Ÿè‘—å°ˆæ¡ˆè·‘ï¼Œå°è‡´åªæœ‰QAæ‰æœ‰è¾¦æ³•åŸ·è¡Œæ¸¬è©¦  é–‹ç™¼ç’°å¢ƒã€æ¸¬è©¦ç’°å¢ƒå…±ç”¨ï¼Œå°è‡´é«’è³‡æ–™è­°é¡Œ  è‡ªå‹•åŒ–æ¸¬è©¦è¦†è“‹ç‡ä¸è¶³ï¼Œå°è‡´æ¸¬è©¦äººå“¡ä»ç„¶éœ€è¦åŸ·è¡Œå¾ˆå¤šæ‰‹å·¥å›æ­¸æ¸¬è©¦(æ¯æ¬¡ä¸Šç‰ˆéƒ½è¦æ‰‹å‹•æ¸¬è©¦å…¨ç³»çµ±)  16.3.3 æ•´é«”è§£æ±ºæ–¹æ¡ˆçš„è¨­è¨ˆ   è‡ªå‹•åŒ–æ¸¬è©¦ç­–ç•¥çš„èª¿æ•´ï¼š\n   æŠŠæ¸¬è©¦å¾QAæ“´å±•åˆ°å…¨é–‹ç™¼ï¼Œå°æ–¼é–‹ç™¼äººå“¡é€²è¡Œå–®å…ƒæ¸¬è©¦æ¡†æ¶çš„åŸ¹è¨“  æ¸›å°‘ä¸åŒå±¤æ¬¡é–“çš„é‡è¤‡æ¸¬è©¦ï¼ŒèªçŸ¥ã€Œé€šéä½å±¤æ¬¡çš„æ¸¬è©¦ä¾†é©—è­‰å¾ˆé›£åœ¨é«˜å±¤æ¬¡é©—è­‰çš„æ¸¬è©¦ã€ï¼Œæ‰¾åˆ°æœ€é©åˆæ¸¬è©¦çš„éšå±¤ï¼Œä¸æ˜¯æ‰€æœ‰çš„æ¸¬è©¦éƒ½æ˜¯äº¤çµ¦QAåŸ·è¡Œæ•´åˆæ¸¬è©¦     è‡ªå‹•åŒ–æ¸¬è©¦çš„ä¾¿æ·æ€§\n   é€éé…ç½®æ–‡ä»¶çš„æ–¹å¼è®“ä¸åŒçš„é–‹ç™¼å¯ä»¥å…±ç”¨ä¸€å€‹æ¸¬è©¦ç’°å¢ƒ(ex.åªè¦æ›ä¸åŒçš„é…ç½®æ–‡ä»¶ï¼Œç³»çµ±å°±å¯ä»¥ä¸Šåˆ°æŸä¸€å°æ¸¬è©¦ä¸»æ©Ÿï¼Œè¦æ›åˆ°å¦ä¸€å°ä¸»æ©Ÿï¼Œåªè¦æ›´æ›é…ç½®æ–‡ä»¶ä¸éœ€è¦ä¿®æ”¹ç¨‹å¼ç¢¼å°±å¯ä»¥é·ç§»éå»)  æ¸¬è©¦ä»£ç¢¼åŒæº\n   æŠŠæ¸¬è©¦ä»£ç¢¼æ”¾åˆ°å°ˆæ¡ˆè£¡é¢ï¼Œè€Œä¸æ˜¯QAçš„å„²å­˜åº«ï¼Œé€™æ¨£ä»»ä½•äººéƒ½å¯ä»¥å»åŸ·è¡Œæ¸¬è©¦  é…ç½®ç®¡ç†å„ªåŒ–\n   ä»£ç¢¼åº«çµæ§‹\n   ç¨‹å¼è³‡æ–™å¤¾æœ‰çµ±ä¸€çš„çµæ§‹ï¼Œæ¨¡çµ„ç›¸é—œçš„å°±åœ¨è©²æ¨¡çµ„è³‡æ–™å¤¾ä¸‹(ex.è©²æ¨¡çµ„çš„æ¸¬è©¦ï¼Œæ˜¯æ”¾åœ¨è©²æ¨¡çµ„çš„testè³‡æ–™å¤¾å…§ï¼Œè€Œä¸æ˜¯æ•´å€‹ç³»çµ±çš„æ¸¬è©¦å…¨éƒ¨æ”¾ä¸€èµ·)ï¼Œè©²æ¨¡çµ„çš„configå°±æ”¾åœ¨è©²æ¨¡çµ„ä¸‹  ex.å–®å…ƒæ¸¬è©¦å°±æ”¾åœ¨ã€Œæ¨¡çµ„a/test/unittest/æ¸¬è©¦æ¡ˆä¾‹1ã€  æœƒæœ‰outputçš„è³‡æ–™å¤¾ï¼Œæä¾›ç¶­é‹äººå“¡éƒ¨ç½²ä½¿ç”¨  ç”¢å‡ºç‰©çš„æ¨™æº–åŒ–èˆ‡ç‰ˆæœ¬ç®¡ç†\n   æŒçºŒæ•´åˆç”¢å‡ºçš„æˆå“ï¼Œé€éå»ºæ§‹è™Ÿ(build_id)ä½œç‚ºæˆå“çš„å”¯ä¸€è­˜åˆ¥  å–ä»£æ‰‹å·¥è‡ªè¡Œç·¨è­¯  è»Ÿä»¶åŒ…ç®¡ç†\n   åªæœ‰ç¶“éä¸€ç³»åˆ—çš„è‡ªå‹•åŒ–æ¸¬è©¦ï¼Œä¸¦ç¶“éæ¸¬è©¦äººå“¡æ‰‹å·¥é©—è­‰å¾Œï¼Œæ‰åœ¨è‡¨æ™‚æ§‹å»ºæˆå“åº«ä¸­æ¨™è¨˜ç‚ºã€Œç¬¦åˆå“è³ªæ¨™æº–ã€ï¼Œç•¶è¦ç²å–æŸå€‹ç‰ˆæœ¬éƒ¨ç½²æ™‚ï¼Œåªèƒ½å¾è‡¨æ™‚æ§‹å»ºæˆå“åº«ä¸­é¸æ“‡é‚£äº›ç¬¦åˆå“è³ªæ¨™æº–çš„ç‰ˆæœ¬æ”¾å…¥ç”¢å“ç™¼å¸ƒåº«    16.3.4 DevOpséšæ®µçš„åœ˜éšŠæ”¹è®Š   å®Œæ•´çš„è·¨åŠŸèƒ½åœ˜éšŠï¼Œç¶­é‹ç©æ¥µåƒèˆ‡åœ˜éšŠçš„æ—¥å¸¸å·¥ä½œè¿­ä»£æœƒè­°  æ‰€æœ‰å…§å®¹éƒ½åšç‰ˆæœ¬æ§åˆ¶ï¼ŒåŒ…æ‹¬åŸå§‹ç¢¼ã€æ¸¬è©¦ç¨‹å¼ã€å„é¡ç’°å¢ƒçš„é…ç½®ã€ç›¸é—œçš„æ‰“åŒ…åŠå®‰è£è…³æœ¬ï¼Œä»¥åŠä¸€äº›æ•¸æ“š  æ‰€æœ‰ç’°å¢ƒæ¨™æº–åŒ–ç®¡ç†ï¼Œå¯ä»¥ä¸€éµå¼æº–å‚™å¥½æ¸¬è©¦ç’°å¢ƒ  å»ºç«‹å®Œæ•´çš„éƒ¨ç½²æµæ°´ç·šï¼Œå¯ä»¥ä¸€éµå¼ç™¼ä½ˆåˆ°å¤šç¨®éƒ¨ç½²ç’°å¢ƒ    16.4 å°çµ   æ‰€æœ‰æ”¹é€²éƒ½æ˜¯ä¸€ç¨®ä¸€é€£ä¸²çš„é€£çºŒæµç¨‹ï¼Œå¾æ˜ç¢ºç›®æ¨™ã€è¨ºæ–·å•é¡Œã€è§£æ±ºæ–¹æ¡ˆã€æŒçºŒé‹ç‡Ÿå„ªåŒ–  éç¨‹ä¸­æŠ±æŒè‘—æŒçºŒå­¸ç¿’çš„å¿ƒæ…‹  "},{"id":"content:5.ddia:1.chapter1.md","path":"/ddia/chapter1","dir":"ddia","title":"01 å¯é æ€§ã€å¯ä¼¸ç¸®æ€§å’Œå¯ç¶­è­·æ€§","description":"","keywords":["ç¬¬ä¸€ç« ï¼šå¯é æ€§ã€å¯ä¼¸ç¸®æ€§å’Œå¯ç¶­è­·æ€§","é—œæ–¼è³‡æ–™ç³»çµ±çš„æ€è€ƒ","å¯é æ€§","å¯ä¼¸ç¸®æ€§","å¯ç¶­è­·æ€§"],"body":"  ç¬¬ä¸€ç« ï¼šå¯é æ€§ã€å¯ä¼¸ç¸®æ€§å’Œå¯ç¶­è­·æ€§  ç¾åœ¨å¤šæ•¸ç³»çµ±éƒ½æ˜¯  è³‡æ–™å¯†é›†å‹ï¼ˆdata-intensiveï¼‰  çš„ï¼Œè€Œé è¨ˆç®—å¯†é›†å‹ï¼ˆcompute-intensiveï¼‰  è³‡æ–™å¯†é›†å‹æ‡‰ç”¨é€šå¸¸ç”±æ¨™æº–çµ„ä»¶æ§‹å»ºè€Œæˆï¼Œæ¨™æº–çµ„ä»¶æä¾›äº†å¾ˆå¤šé€šç”¨çš„åŠŸèƒ½ï¼›ä¾‹å¦‚ï¼Œè¨±å¤šæ‡‰ç”¨ç¨‹å¼éƒ½éœ€è¦ï¼š   å„²å­˜è³‡æ–™ï¼Œä»¥ä¾¿è‡ªå·±æˆ–å…¶ä»–æ‡‰ç”¨ç¨‹å¼ä¹‹å¾Œèƒ½å†æ¬¡æ‰¾åˆ° ï¼ˆ  è³‡æ–™åº«ï¼Œå³ databases ï¼‰  è¨˜ä½é–‹éŠ·æ˜‚è²´æ“ä½œçš„çµæœï¼ŒåŠ å¿«è®€å–é€Ÿåº¦ï¼ˆ  å¿«å–ï¼Œå³ caches ï¼‰  å…è¨±ä½¿ç”¨è€…æŒ‰é—œéµå­—æœå°‹è³‡æ–™ï¼Œæˆ–ä»¥å„ç¨®æ–¹å¼å°è³‡æ–™é€²è¡Œéæ¿¾ï¼ˆ  æœå°‹ç´¢å¼•ï¼Œå³ search indexes ï¼‰  å‘å…¶ä»–ç¨‹åºå‚³é€è¨Šæ¯ï¼Œé€²è¡ŒéåŒæ­¥è™•ç†ï¼ˆ  æµè™•ç†ï¼Œå³ stream processing ï¼‰  å®šæœŸè™•ç†ç´¯ç©çš„å¤§æ‰¹æ¬¡è³‡æ–™ï¼ˆ  æ‰¹è™•ç†ï¼Œå³ batch processing ï¼‰  é—œæ–¼è³‡æ–™ç³»çµ±çš„æ€è€ƒ  è¿‘äº›å¹´ä¾†ï¼Œå‡ºç¾äº†è¨±å¤šæ–°çš„è³‡æ–™å„²å­˜å·¥å…·èˆ‡è³‡æ–™è™•ç†å·¥å…·ã€‚å®ƒå€‘é‡å°ä¸åŒæ‡‰ç”¨å ´æ™¯é€²è¡Œæœ€ä½³åŒ–ï¼Œå› æ­¤ä¸å†é©åˆç”Ÿç¡¬åœ°æ­¸å…¥å‚³çµ±é¡åˆ¥ã€1ã€‘ã€‚é¡åˆ¥ä¹‹é–“çš„ç•Œé™è®Šå¾—è¶Šä¾†è¶Šæ¨¡ç³Šï¼Œä¾‹å¦‚ï¼šè³‡æ–™å„²å­˜å¯ä»¥è¢«ç•¶æˆè¨Šæ¯ä½‡åˆ—ç”¨ï¼ˆRedisï¼‰ï¼Œè¨Šæ¯ä½‡åˆ—å‰‡å¸¶æœ‰é¡ä¼¼è³‡æ–™åº«çš„æŒä¹…ä¿è­‰ï¼ˆApache Kafkaï¼‰ã€‚  å…¶æ¬¡ï¼Œè¶Šä¾†è¶Šå¤šçš„æ‡‰ç”¨ç¨‹å¼æœ‰è‘—å„ç¨®åš´æ ¼è€Œå»£æ³›çš„è¦æ±‚ï¼Œå–®å€‹å·¥å…·ä¸è¶³ä»¥æ»¿è¶³æ‰€æœ‰çš„è³‡æ–™è™•ç†å’Œå„²å­˜éœ€æ±‚ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œç¸½é«”å·¥ä½œè¢«æ‹†åˆ†æˆä¸€ç³»åˆ—èƒ½è¢«å–®å€‹å·¥å…·é«˜æ•ˆå®Œæˆçš„ä»»å‹™ï¼Œä¸¦é€éæ‡‰ç”¨ç¨‹å¼ç¢¼å°‡å®ƒå€‘ç¸«åˆèµ·ä¾†ã€‚  ä¾‹å¦‚ï¼Œå¦‚æœå°‡å¿«å–ï¼ˆæ‡‰ç”¨ç®¡ç†çš„å¿«å–å±¤ï¼ŒMemcached æˆ–åŒé¡ç”¢å“ï¼‰å’Œå…¨æ–‡æœå°‹ï¼ˆå…¨æ–‡æœå°‹ä¼ºæœå™¨ï¼Œä¾‹å¦‚ Elasticsearch æˆ– Solrï¼‰åŠŸèƒ½å¾ä¸»è³‡æ–™åº«å‰é›¢å‡ºä¾†ï¼Œé‚£éº¼ä½¿å¿«å– / ç´¢å¼•èˆ‡ä¸»è³‡æ–™åº«ä¿æŒåŒæ­¥é€šå¸¸æ˜¯æ‡‰ç”¨ç¨‹å¼ç¢¼çš„è²¬ä»»ã€‚  åœ– 1-1 çµ¦å‡ºäº†é€™ç¨®æ¶æ§‹å¯èƒ½çš„æ¨£å­ï¼ˆç´°ç¯€å°‡åœ¨å¾Œé¢çš„ç« ç¯€ä¸­è©³ç´°ä»‹ç´¹ï¼‰ã€‚    å¯é æ€§  äººå€‘å°å¯é è»Ÿé«”çš„å…¸å‹æœŸæœ›åŒ…æ‹¬ï¼š   æ‡‰ç”¨ç¨‹å¼è¡¨ç¾å‡ºä½¿ç”¨è€…æ‰€æœŸæœ›çš„åŠŸèƒ½ã€‚  å…è¨±ä½¿ç”¨è€…çŠ¯éŒ¯ï¼Œå…è¨±ä½¿ç”¨è€…ä»¥å‡ºä¹æ„æ–™çš„æ–¹å¼ä½¿ç”¨è»Ÿé«”ã€‚  åœ¨é æœŸçš„è² è¼‰å’Œè³‡æ–™é‡ä¸‹ï¼Œæ•ˆèƒ½æ»¿è¶³è¦æ±‚ã€‚  ç³»çµ±èƒ½é˜²æ­¢æœªç¶“æˆæ¬Šçš„è¨ªå•å’Œæ¿«ç”¨ã€‚  å¦‚æœæ‰€æœ‰é€™äº›åœ¨ä¸€èµ·æ„å‘³è‘— â€œæ­£ç¢ºå·¥ä½œâ€ï¼Œé‚£éº¼å¯ä»¥æŠŠå¯é æ€§ç²—ç•¥ç†è§£ç‚º â€œå³ä½¿å‡ºç¾å•é¡Œï¼Œä¹Ÿèƒ½ç¹¼çºŒæ­£ç¢ºå·¥ä½œâ€ã€‚   é€ æˆéŒ¯èª¤çš„åŸå› å«åšÂ   æ•…éšœï¼ˆfaultï¼‰   **æ•…éšœï¼ˆfaultï¼‰**ä¸åŒæ–¼Â   å¤±æ•ˆï¼ˆfailureï¼‰ -  æ•…éšœç‚ºéƒ¨åˆ†ç‹€æ…‹åé›¢æ¨™æº–ï¼Œå¤±æ•ˆå‰‡ç‚ºæ•´å€‹ç³»çµ±æ›æ‰ï¼Œå› æ­¤æœ€å¥½è¨­è¨ˆå®¹éŒ¯æ©Ÿåˆ¶ï¼Œä»¥é˜²å› æ•…éšœè€Œå¤±æ•ˆã€‚  æˆ‘å€‘å¯ä»¥é€éæ•…æ„å¼•ç™¼æ•…éšœä¾†ç¢ºä¿å®¹éŒ¯æ©Ÿåˆ¶ä¸æ–·åŸ·è¡Œä¸¦æ¥å—è€ƒé©—ï¼Œå¾è€Œæé«˜æ•…éšœè‡ªç„¶ç™¼ç”Ÿæ™‚ç³»çµ±èƒ½æ­£ç¢ºè™•ç†çš„ä¿¡å¿ƒã€‚ç¯„ä¾‹ï¼šNetflix å…¬å¸çš„Â   Chaos Monkey ã€4ã€‘  èƒ½é æ–™ä¸¦æ‡‰å°æ•…éšœçš„ç³»çµ±ç‰¹æ€§å¯ç¨±ç‚ºÂ **å®¹éŒ¯ï¼ˆfault-tolerantï¼‰**æˆ–Â   éŸŒæ€§ï¼ˆresilientï¼‰  ç¡¬é«”æ•…éšœ**ï¼ˆhardware faultsï¼‰**    ç‚ºäº†æ¸›å°‘ç³»çµ±çš„æ•…éšœç‡ï¼Œç¬¬ä¸€åæ‡‰é€šå¸¸éƒ½æ˜¯å¢åŠ å–®å€‹ç¡¬é«”çš„å†—é¤˜åº¦ ï¼Œä¾‹å¦‚ï¼šç£ç¢Ÿå¯ä»¥çµ„å»º RAIDï¼Œä¼ºæœå™¨å¯èƒ½æœ‰é›™è·¯é›»æºå’Œç†±æ’æ‹” CPUï¼Œè³‡æ–™ä¸­å¿ƒå¯èƒ½æœ‰é›»æ± å’ŒæŸ´æ²¹ç™¼é›»æ©Ÿä½œç‚ºå¾Œå‚™é›»æºï¼ŒæŸå€‹å…ƒä»¶æ›æ‰æ™‚å†—é¤˜å…ƒä»¶å¯ä»¥ç«‹åˆ»æ¥ç®¡ã€‚é€™ç¨®æ–¹æ³•é›–ç„¶ä¸èƒ½å®Œå…¨é˜²æ­¢ç”±ç¡¬é«”å•é¡Œå°è‡´çš„ç³»çµ±å¤±æ•ˆï¼Œä½†å®ƒç°¡å–®æ˜“æ‡‚ï¼Œé€šå¸¸ä¹Ÿè¶³ä»¥è®“æ©Ÿå™¨ä¸é–“æ–·åŸ·è¡Œå¾ˆå¤šå¹´ã€‚  **ä½†æ˜¯éš¨è‘—è³‡æ–™é‡å’Œæ‡‰ç”¨è¨ˆç®—éœ€æ±‚çš„å¢åŠ ï¼Œè¶Šä¾†è¶Šå¤šçš„æ‡‰ç”¨é–‹å§‹å¤§é‡ä½¿ç”¨æ©Ÿå™¨ï¼Œé€™æœƒç›¸æ‡‰åœ°å¢åŠ ç¡¬é«”æ•…éšœç‡ã€‚**æ­¤å¤–ï¼Œåœ¨é¡ä¼¼äºé¦¬éœ AWSçš„ä¸€äº›é›²æœå‹™å¹³è‡ºä¸Šï¼Œè™›æ“¬æ©Ÿå™¨ä¾‹é …ä¸å¯ç”¨å»æ²’æœ‰ä»»ä½•è­¦å‘Šä¹Ÿæ˜¯å¾ˆå¸¸è¦‹çš„ï¼Œå› ç‚ºé›²å¹³è‡ºçš„è¨­è¨ˆå°±æ˜¯å„ªå…ˆè€ƒæ…® éˆæ´»æ€§ï¼ˆflexibilityï¼‰ å’Œ å½ˆæ€§ï¼ˆelasticityï¼‰ï¼Œè€Œä¸æ˜¯å–®æ©Ÿå¯é æ€§ã€‚   å¦‚æœåœ¨ç¡¬é«”å†—é¤˜çš„åŸºç¤ä¸Šé€²ä¸€æ­¥å¼•å…¥è»Ÿé«”å®¹éŒ¯æ©Ÿåˆ¶ï¼Œé‚£éº¼ç³»çµ±åœ¨å®¹å¿æ•´å€‹ï¼ˆå–®è‡ºï¼‰æ©Ÿå™¨æ•…éšœçš„é“è·¯ä¸Šå°±æ›´é€²ä¸€æ­¥äº†ã€‚é€™æ¨£çš„ç³»çµ±ä¹Ÿæœ‰é‹ç¶­ä¸Šçš„ä¾¿åˆ© ï¼Œä¾‹å¦‚ï¼šå¦‚æœéœ€è¦é‡å•Ÿæ©Ÿå™¨ï¼ˆä¾‹å¦‚æ‡‰ç”¨ä½œæ¥­ç³»çµ±å®‰å…¨è£œä¸ï¼‰ï¼Œå–®ä¼ºæœå™¨ç³»çµ±å°±éœ€è¦è¨ˆåŠƒåœæ©Ÿã€‚è€Œå…è¨±æ©Ÿå™¨å¤±æ•ˆçš„ç³»çµ±å‰‡å¯ä»¥ä¸€æ¬¡ä¿®å¾©ä¸€å€‹ç¯€é»ï¼Œç„¡éœ€æ•´å€‹ç³»çµ±åœæ©Ÿã€‚  è»Ÿé«”éŒ¯èª¤  æ˜¯å…§éƒ¨çš„  ç³»çµ±æ€§éŒ¯èª¤ï¼ˆsystematic errorï¼‰ ï¼Œä¾‹å­åŒ…æ‹¬ï¼š   æ¥å—ç‰¹å®šçš„éŒ¯èª¤è¼¸å…¥ï¼Œä¾¿å°è‡´æ‰€æœ‰æ‡‰ç”¨ä¼ºæœå™¨ä¾‹é …å´©æ½°çš„ BUGã€‚ä¾‹å¦‚ 2012 å¹´ 6 æœˆ 30 æ—¥çš„é–ç§’ï¼Œç”±æ–¼ Linux æ ¸å¿ƒä¸­çš„ä¸€å€‹éŒ¯èª¤ï¼Œè¨±å¤šæ‡‰ç”¨åŒæ™‚æ›æ‰äº†ã€‚  å¤±æ§ç¨‹åºæœƒç”¨ç›¡ä¸€äº›å…±äº«è³‡æºï¼ŒåŒ…æ‹¬ CPU æ™‚é–“ã€è¨˜æ†¶é«”ã€ç£ç¢Ÿç©ºé–“æˆ–ç¶²è·¯é »å¯¬ã€‚  ç³»çµ±ä¾è³´çš„æœå‹™è®Šæ…¢ï¼Œæ²’æœ‰éŸ¿æ‡‰ï¼Œæˆ–è€…é–‹å§‹è¿”å›éŒ¯èª¤çš„éŸ¿æ‡‰ã€‚  ç´šè¯æ•…éšœï¼Œä¸€å€‹å…ƒä»¶ä¸­çš„å°æ•…éšœè§¸ç™¼å¦ä¸€å€‹å…ƒä»¶ä¸­çš„æ•…éšœï¼Œé€²è€Œè§¸ç™¼æ›´å¤šçš„æ•…éšœã€‚  é›–ç„¶è»Ÿé«”ä¸­çš„ç³»çµ±æ€§æ•…éšœæ²’æœ‰é€Ÿæ•ˆè—¥ï¼Œä½†æˆ‘å€‘é‚„æ˜¯æœ‰å¾ˆå¤šå°è¾¦æ³•ï¼Œä¾‹å¦‚ï¼š   ä»”ç´°è€ƒæ…®ç³»çµ±ä¸­çš„å‡è¨­å’Œäº’å‹•  å¾¹åº•çš„æ¸¬è©¦  ç¨‹åºéš”é›¢  å…è¨±ç¨‹åºå´©æ½°ä¸¦é‡å•Ÿ  æ¸¬é‡ã€ç›£æ§ä¸¦åˆ†æç”Ÿç”¢ç’°å¢ƒä¸­çš„ç³»çµ±è¡Œç‚º  å¦‚æœç³»çµ±èƒ½å¤ æä¾›ä¸€äº›ä¿è­‰ï¼ˆä¾‹å¦‚åœ¨ä¸€å€‹è¨Šæ¯ä½‡åˆ—ä¸­ï¼Œé€²å…¥èˆ‡ç™¼å‡ºçš„è¨Šæ¯æ•¸é‡ç›¸ç­‰ï¼‰ï¼Œé‚£éº¼ç³»çµ±å°±å¯ä»¥åœ¨åŸ·è¡Œæ™‚ä¸æ–·è‡ªæª¢ï¼Œä¸¦åœ¨å‡ºç¾Â **å·®ç•°ï¼ˆdiscrepancyï¼‰**æ™‚è­¦å ±  äººç‚ºéŒ¯èª¤  äººç‚ºéŒ¯èª¤æ˜¯å°è‡´æœå‹™ä¸­æ–·çš„é¦–è¦åŸå› ï¼Œä½†é‚„æ˜¯æœ‰äº›æ–¹æ³•å¯ä»¥å¢åŠ ç³»çµ±å¯é åº¦ï¼š   ä»¥æœ€å°çŠ¯éŒ¯æ©Ÿæœƒçš„æ–¹å¼è¨­è¨ˆç³»çµ±ï¼Œè®“åšå°äº‹æƒ…æ›´å®¹æ˜“ï¼Œè®“åšéŒ¯äº‹æƒ…æ›´å›°é›£ã€‚  å°‡äººå€‘æœ€å®¹æ˜“çŠ¯éŒ¯çš„åœ°æ–¹èˆ‡å¯èƒ½å°è‡´å¤±æ•ˆçš„åœ°æ–¹   è§£è€¦ï¼ˆdecoupleï¼‰ ã€‚ç‰¹åˆ¥æ˜¯æä¾›ä¸€å€‹åŠŸèƒ½é½Šå…¨çš„éç”Ÿç”¢ç’°å¢ƒ  æ²™ç®±ï¼ˆsandboxï¼‰ ï¼Œä½¿äººå€‘å¯ä»¥åœ¨ä¸å½±éŸ¿çœŸå¯¦ä½¿ç”¨è€…çš„æƒ…æ³ä¸‹ï¼Œä½¿ç”¨çœŸå¯¦è³‡æ–™å®‰å…¨åœ°æ¢ç´¢å’Œå¯¦é©—ã€‚  åœ¨å„å€‹å±¤æ¬¡é€²è¡Œå¾¹åº•çš„æ¸¬è©¦ï¼Œå¾å–®å…ƒæ¸¬è©¦ã€å…¨ç³»çµ±æ•´åˆæ¸¬è©¦åˆ°æ‰‹å‹•æ¸¬è©¦ã€‚è‡ªå‹•åŒ–æ¸¬è©¦ç‰¹åˆ¥é©åˆç”¨ä¾†è¦†è“‹æ­£å¸¸æƒ…æ³ä¸­å°‘è¦‹çš„  é‚Šç·£å ´æ™¯ï¼ˆcorner caseï¼‰ ã€‚  å…è¨±å¾äººç‚ºéŒ¯èª¤ä¸­ç°¡å–®å¿«é€Ÿåœ°æ¢å¾©ï¼Œä»¥æœ€å¤§é™åº¦åœ°æ¸›å°‘å¤±æ•ˆæƒ…æ³å¸¶ä¾†çš„å½±éŸ¿ã€‚ ä¾‹å¦‚ï¼Œå¿«é€Ÿå›æ»¾é…ç½®è®Šæ›´ï¼Œåˆ†æ‰¹ç™¼å¸ƒæ–°ç¨‹å¼ç¢¼ï¼ˆä»¥ä¾¿ä»»ä½•æ„å¤–éŒ¯èª¤åªå½±éŸ¿ä¸€å°éƒ¨åˆ†ä½¿ç”¨è€…ï¼‰ï¼Œä¸¦æä¾›è³‡æ–™é‡ç®—å·¥å…·ï¼ˆä»¥å‚™èˆŠçš„è¨ˆç®—å‡ºéŒ¯ï¼‰ã€‚  é…ç½®è©³ç´°å’Œæ˜ç¢ºçš„ç›£æ§ï¼Œæ¯”å¦‚æ•ˆèƒ½æŒ‡æ¨™å’ŒéŒ¯èª¤ç‡ã€‚ åœ¨å…¶ä»–å·¥ç¨‹å­¸ç§‘ä¸­é€™æŒ‡çš„æ˜¯ é™æ¸¬ï¼ˆtelemetryï¼‰ï¼ˆä¸€æ—¦ç«ç®­é›¢é–‹äº†åœ°é¢ï¼Œé™æ¸¬æŠ€è¡“å°æ–¼è·Ÿè¹¤ç™¼ç”Ÿçš„äº‹æƒ…å’Œç†è§£å¤±æ•—æ˜¯è‡³é—œé‡è¦çš„ï¼‰ã€‚ç›£æ§å¯ä»¥å‘æˆ‘å€‘ç™¼å‡ºé è­¦è¨Šè™Ÿï¼Œä¸¦å…è¨±æˆ‘å€‘æª¢æŸ¥æ˜¯å¦æœ‰ä»»ä½•åœ°æ–¹é•åäº†å‡è¨­å’Œç´„æŸã€‚ç•¶å‡ºç¾å•é¡Œæ™‚ï¼ŒæŒ‡æ¨™è³‡æ–™å°æ–¼å•é¡Œè¨ºæ–·æ˜¯éå¸¸å¯¶è²´çš„ã€‚  è‰¯å¥½çš„ç®¡ç†å¯¦è¸èˆ‡å……åˆ†çš„åŸ¹è¨“ â€”â€” ä¸€å€‹è¤‡é›œè€Œé‡è¦çš„æ–¹é¢ï¼Œä½†è¶…å‡ºäº†æœ¬æ›¸çš„ç¯„åœã€‚  å¯ä¼¸ç¸®æ€§  **å¯ä¼¸ç¸®æ€§ï¼ˆScalabilityï¼‰**æ˜¯ç”¨ä¾†æè¿°ç³»çµ±æ‡‰å°è² è¼‰å¢é•·èƒ½åŠ›çš„è¡“èªã€‚  æœå‹™**é™ç´šï¼ˆdegradationï¼‰**çš„ä¸€å€‹å¸¸è¦‹åŸå› æ˜¯è² è¼‰å¢åŠ   æè¿°è² è¼‰  è² è¼‰å¯ä»¥ç”¨ä¸€äº›ç¨±ç‚ºÂ **è² è¼‰å¼•æ•¸ï¼ˆload parametersï¼‰**çš„æ•¸å­—ä¾†æè¿°ã€‚å¼•æ•¸çš„æœ€ä½³é¸æ“‡å–æ±ºæ–¼ç³»çµ±æ¶æ§‹ï¼Œå®ƒå¯èƒ½æ˜¯æ¯ç§’å‘ Web ä¼ºæœå™¨ç™¼å‡ºçš„è«‹æ±‚ã€è³‡æ–™åº«ä¸­çš„è®€å¯«æ¯”ç‡ã€èŠå¤©å®¤ä¸­åŒæ™‚æ´»èºçš„ä½¿ç”¨è€…æ•¸é‡ã€å¿«å–å‘½ä¸­ç‡æˆ–å…¶ä»–æ±è¥¿ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä¹Ÿè¨±å¹³å‡æƒ…æ³å°ä½ å¾ˆé‡è¦ï¼Œä¹Ÿè¨±ä½ çš„ç“¶é ¸æ˜¯å°‘æ•¸æ¥µç«¯å ´æ™¯ã€‚  æè¿°æ•ˆèƒ½  ç•¶è² è¼‰å¢åŠ æ™‚æœƒç™¼ç”Ÿä»€éº¼ï¼Œå¯ä»¥å¾å…©å€‹è§’åº¦ä¾†çœ‹   å¢åŠ è² è¼‰å¼•æ•¸ä¸¦ä¿æŒç³»çµ±è³‡æºï¼ˆCPUã€è¨˜æ†¶é«”ã€ç¶²è·¯é »å¯¬ç­‰ï¼‰ä¸è®Šæ™‚ï¼Œç³»çµ±æ€§èƒ½å°‡å—åˆ°ä»€éº¼å½±éŸ¿ï¼Ÿ  å¢åŠ è² è¼‰å¼•æ•¸ä¸¦å¸Œæœ›ä¿æŒæ•ˆèƒ½ä¸è®Šæ™‚ï¼Œéœ€è¦å¢åŠ å¤šå°‘ç³»çµ±è³‡æºï¼Ÿ  å°æ–¼ Hadoop é€™æ¨£çš„æ‰¹è™•ç†ç³»çµ±ï¼Œé€šå¸¸é—œå¿ƒçš„æ˜¯Â   ååé‡ï¼ˆthroughputï¼‰ ï¼Œå³æ¯ç§’å¯ä»¥è™•ç†çš„è¨˜éŒ„æ•¸é‡ï¼Œæˆ–è€…åœ¨ç‰¹å®šè¦æ¨¡è³‡æ–™é›†ä¸ŠåŸ·è¡Œä½œæ¥­çš„ç¸½æ™‚é–“ã€‚  å°æ–¼ç·šä¸Šç³»çµ±ï¼Œé€šå¸¸æ›´é‡è¦çš„æ˜¯æœå‹™çš„Â   éŸ¿æ‡‰æ™‚é–“ï¼ˆresponse timeï¼‰ ï¼Œå³å®¢æˆ¶ç«¯å‚³é€è«‹æ±‚åˆ°æ¥æ”¶éŸ¿æ‡‰ä¹‹é–“çš„æ™‚é–“ã€‚  å°±ç®—æ˜¯ç›¸åŒéœ€æ±‚ï¼ŒéŸ¿æ‡‰æ™‚é–“ä¹Ÿæœƒç•¥æœ‰ä¸åŒï¼Œå› æ­¤éœ€è¦å°‡éŸ¿æ‡‰æ™‚é–“è¦–ç‚ºä¸€å€‹å¯ä»¥æ¸¬é‡çš„æ•¸å€¼Â   åˆ†ä½ˆï¼ˆdistributionï¼‰ ï¼Œè€Œä¸æ˜¯å–®å€‹æ•¸å€¼ã€‚  å¦‚æœæƒ³çŸ¥é“**å…¸å‹ï¼ˆtypicalï¼‰**éŸ¿æ‡‰æ™‚é–“ï¼Œä½¿ç”¨ä¸­ä½æ•¸æœƒæ¯”å¹³å‡å€¼æ›´å¥½ã€‚ç‚ºäº†å¼„æ¸…æ¥šç•°å¸¸å€¼æœ‰å¤šç³Ÿç³•ï¼Œå¯ä»¥çœ‹æ›´é«˜çš„ç™¾åˆ†ä½é»ï¼Œä¾‹å¦‚95%ã€99%ã€99.9%ã€‚  éŸ¿æ‡‰æ™‚é–“çš„é«˜ç™¾åˆ†ä½é»ï¼ˆä¹Ÿç¨±ç‚ºÂ   å°¾éƒ¨å»¶é² ï¼Œå³Â   tail latencies ï¼‰éå¸¸é‡è¦ï¼Œå› ç‚ºå®ƒå€‘ç›´æ¥å½±éŸ¿ä½¿ç”¨è€…çš„æœå‹™é«”é©—ã€‚  é€™æ˜¯å› ç‚ºè«‹æ±‚éŸ¿æ‡‰æœ€æ…¢çš„å®¢æˆ¶å¾€å¾€ä¹Ÿæ˜¯è³‡æ–™æœ€å¤šçš„å®¢æˆ¶ï¼Œä¹Ÿå¯ä»¥èªªæ˜¯æœ€æœ‰åƒ¹å€¼çš„å®¢æˆ¶ â€”â€” å› ç‚ºä»–å€‘æéŒ¢äº†  å¦ä¸€æ–¹é¢ï¼Œæœ€ä½³åŒ–ç¬¬ 99.99 ç™¾åˆ†ä½é»ï¼ˆä¸€è¬å€‹è«‹æ±‚ä¸­æœ€æ…¢çš„ä¸€å€‹ï¼‰è¢«èªç‚ºå¤ªæ˜‚è²´äº†ï¼Œä¸èƒ½ç‚ºäºé¦¬éœçš„ç›®æ¨™å¸¶ä¾†è¶³å¤ å¥½è™•ã€‚æ¸›å°é«˜ç™¾åˆ†ä½é»è™•çš„éŸ¿æ‡‰æ™‚é–“ç›¸ç•¶å›°é›£ï¼Œå› ç‚ºå®ƒå¾ˆå®¹æ˜“å—åˆ°éš¨æ©Ÿäº‹ä»¶çš„å½±éŸ¿ï¼Œé€™è¶…å‡ºäº†æ§åˆ¶ç¯„åœï¼Œè€Œä¸”æ•ˆç›Šä¹Ÿå¾ˆå°ã€‚  ç™¾åˆ†ä½é»é€šå¸¸ç”¨æ–¼Â   æœå‹™ç´šåˆ¥ç›®æ¨™ï¼ˆSLO, service level objectivesï¼‰ Â å’ŒÂ   æœå‹™ç´šåˆ¥å”è­°ï¼ˆSLA, service level agreementsï¼‰ ï¼Œå³å®šç¾©æœå‹™é æœŸæ•ˆèƒ½å’Œå¯ç”¨æ€§çš„åˆç´„ã€‚ SLA å¯èƒ½æœƒå®£å‘Šï¼Œå¦‚æœæœå‹™éŸ¿æ‡‰æ™‚é–“çš„ä¸­ä½æ•¸å°æ–¼ 200 æ¯«ç§’ï¼Œä¸” 99.9 ç™¾åˆ†ä½é»ä½æ–¼ 1 ç§’ï¼Œå‰‡èªç‚ºæœå‹™å·¥ä½œæ­£å¸¸ï¼ˆå¦‚æœéŸ¿æ‡‰æ™‚é–“æ›´é•·ï¼Œå°±èªç‚ºæœå‹™ä¸é”æ¨™ï¼‰ã€‚é€™äº›æŒ‡æ¨™ç‚ºå®¢æˆ¶è¨­å®šäº†æœŸæœ›å€¼ï¼Œä¸¦å…è¨±å®¢æˆ¶åœ¨ SLA æœªé”æ¨™çš„æƒ…æ³ä¸‹è¦æ±‚é€€æ¬¾ã€‚   æ’éšŠå»¶é²ï¼ˆqueueing delayï¼‰ Â é€šå¸¸ä½”äº†é«˜ç™¾åˆ†ä½é»è™•éŸ¿æ‡‰æ™‚é–“çš„å¾ˆå¤§ä¸€éƒ¨åˆ†ã€‚ç”±æ–¼ä¼ºæœå™¨åªèƒ½ä¸¦è¡Œè™•ç†å°‘é‡çš„äº‹å‹™ï¼ˆå¦‚å—å…¶ CPU æ ¸æ•¸çš„é™åˆ¶ï¼‰ï¼Œæ‰€ä»¥åªè¦æœ‰å°‘é‡ç·©æ…¢çš„è«‹æ±‚å°±èƒ½é˜»ç¤™å¾ŒçºŒè«‹æ±‚çš„è™•ç†ï¼Œé€™ç¨®æ•ˆæ‡‰æœ‰æ™‚è¢«ç¨±ç‚ºÂ   é ­éƒ¨é˜»å¡ï¼ˆhead-of-line blockingï¼‰ Â ã€‚  æ‡‰å°è² è¼‰çš„æ–¹æ³•    ç¸±å‘ä¼¸ç¸® ï¼ˆscaling upï¼Œä¹Ÿç¨±ç‚ºå‚ç›´ä¼¸ç¸®ï¼Œå³ vertical scalingï¼Œè½‰å‘æ›´å¼·å¤§çš„æ©Ÿå™¨ï¼‰   æ©«å‘ä¼¸ç¸® ï¼ˆscaling outï¼Œä¹Ÿç¨±ç‚ºæ°´å¹³ä¼¸ç¸®ï¼Œå³ horizontal scalingï¼Œå°‡è² è¼‰åˆ†ä½ˆåˆ°å¤šè‡ºå°æ©Ÿå™¨ä¸Šï¼‰  è·¨å¤šè‡ºæ©Ÿå™¨åˆ†é…è² è¼‰ä¹Ÿç¨±ç‚º â€œ  ç„¡å…±äº«ï¼ˆshared-nothingï¼‰ â€ æ¶æ§‹ã€‚å¯ä»¥åœ¨å–®è‡ºæ©Ÿå™¨ä¸ŠåŸ·è¡Œçš„ç³»çµ±é€šå¸¸æ›´ç°¡å–®ï¼Œä½†é«˜éšæ©Ÿå™¨å¯èƒ½éå¸¸è²´ï¼Œæ‰€ä»¥éå¸¸å¯†é›†çš„è² è¼‰é€šå¸¸ç„¡æ³•é¿å…åœ°éœ€è¦æ©«å‘ä¼¸ç¸®ã€‚ç¾å¯¦ä¸–ç•Œä¸­çš„å„ªç§€æ¶æ§‹éœ€è¦å°‡é€™å…©ç¨®æ–¹æ³•å‹™å¯¦åœ°çµåˆï¼Œå› ç‚ºä½¿ç”¨å¹¾è‡ºè¶³å¤ å¼·å¤§çš„æ©Ÿå™¨å¯èƒ½æ¯”ä½¿ç”¨å¤§é‡çš„å°å‹è™›æ“¬æ©Ÿå™¨æ›´ç°¡å–®ä¹Ÿæ›´ä¾¿å®œã€‚   æœ‰äº›ç³»çµ±æ˜¯Â   å½ˆæ€§ï¼ˆelasticï¼‰  çš„ï¼Œé€™æ„å‘³è‘—å¯ä»¥åœ¨ æª¢æ¸¬åˆ°è² è¼‰å¢åŠ æ™‚è‡ªå‹•å¢åŠ è¨ˆç®—è³‡æº  è€Œå…¶ä»–ç³»çµ±å‰‡æ˜¯æ‰‹å‹•ä¼¸ç¸®ï¼ˆäººå·¥åˆ†æå®¹é‡ä¸¦æ±ºå®šå‘ç³»çµ±æ–°å¢æ›´å¤šçš„æ©Ÿå™¨ï¼‰  å¦‚æœè² è¼‰Â   æ¥µé›£é æ¸¬ï¼ˆhighly unpredictableï¼‰ ï¼Œå‰‡å½ˆæ€§ç³»çµ±å¯èƒ½å¾ˆæœ‰ç”¨ï¼Œä½†æ‰‹å‹•ä¼¸ç¸®ç³»çµ±æ›´ç°¡å–®ï¼Œä¸¦ä¸”æ„å¤–æ“ä½œå¯èƒ½æœƒæ›´å°‘ï¼ˆè«‹åƒé–± â€œ  åˆ†å‰²æ§½å†å¹³è¡¡ â€ï¼‰ã€‚  è·¨å¤šè‡ºæ©Ÿå™¨éƒ¨ç½²Â   ç„¡ç‹€æ…‹æœå‹™ï¼ˆstateless servicesï¼‰ Â éå¸¸ç°¡å–®ï¼Œä½†  å°‡å¸¶ç‹€æ…‹çš„è³‡æ–™ç³»çµ±å¾å–®ç¯€é»è®Šç‚ºåˆ†æ•£å¼é…ç½®å‰‡å¯èƒ½å¼•å…¥è¨±å¤šé¡å¤–è¤‡é›œåº¦ ã€‚å‡ºæ–¼é€™å€‹åŸå› ï¼Œå¸¸è­˜å‘Šè¨´æˆ‘å€‘æ‡‰è©²å°‡è³‡æ–™åº«æ”¾åœ¨å–®å€‹ç¯€é»ä¸Šï¼ˆç¸±å‘ä¼¸ç¸®ï¼‰ï¼Œç›´åˆ°ä¼¸ç¸®æˆæœ¬æˆ–å¯ç”¨æ€§éœ€æ±‚è¿«ä½¿å…¶æ”¹ç‚ºåˆ†æ•£å¼ã€‚  ä¸€å€‹è‰¯å¥½é©é…æ‡‰ç”¨çš„å¯ä¼¸ç¸®æ¶æ§‹ï¼Œæ˜¯åœç¹è‘—Â   å‡è¨­ï¼ˆassumptionï¼‰ Â å»ºç«‹çš„ï¼šå“ªäº›æ“ä½œæ˜¯å¸¸è¦‹çš„ï¼Ÿå“ªäº›æ“ä½œæ˜¯ç½•è¦‹çš„ï¼Ÿé€™å°±æ˜¯æ‰€è¬‚è² è¼‰å¼•æ•¸ã€‚å¦‚æœå‡è¨­æœ€çµ‚æ˜¯éŒ¯èª¤çš„ï¼Œé‚£éº¼ç‚ºä¼¸ç¸®æ‰€åšçš„å·¥ç¨‹æŠ•å…¥å°±ç™½è²»äº†ï¼Œæœ€ç³Ÿç³•çš„æ˜¯é©å¾—å…¶åã€‚åœ¨æ—©æœŸå‰µæ¥­å…¬å¸æˆ–éæ­£å¼ç”¢å“ä¸­ï¼Œé€šå¸¸æ”¯æ´ç”¢å“å¿«é€Ÿè¿­ä»£çš„èƒ½åŠ›ï¼Œè¦æ¯”å¯ä¼¸ç¸®è‡³æœªä¾†çš„å‡æƒ³è² è¼‰è¦é‡è¦çš„å¤šã€‚  å¯ç¶­è­·æ€§  é¿å…è‡ªå·±çš„ç³»çµ±è®Šæˆ  éºç•™ï¼ˆlegacyï¼‰ Â ç³»çµ±çš„ä¸‰å€‹è¨­è¨ˆåŸå‰‡ï¼š  ä¸€ã€å¯æ“ä½œæ€§ï¼ˆOperabilityï¼‰  ä¾¿æ–¼é‹ç¶­åœ˜éšŠä¿æŒç³»çµ±å¹³ç©©åŸ·è¡Œã€‚   ä¸€å€‹å„ªç§€é‹ç¶­åœ˜éšŠçš„å…¸å‹è·è²¬å¦‚ä¸‹ï¼ˆæˆ–è€…æ›´å¤šï¼‰ï¼š   ç›£æ§ç³»çµ±çš„åŸ·è¡Œç‹€æ³ï¼Œä¸¦åœ¨æœå‹™ç‹€æ…‹ä¸ä½³æ™‚å¿«é€Ÿæ¢å¾©æœå‹™ã€‚  è·Ÿè¹¤å•é¡Œçš„åŸå› ï¼Œä¾‹å¦‚ç³»çµ±æ•…éšœæˆ–æ•ˆèƒ½ä¸‹é™ã€‚  åŠæ™‚æ›´æ–°è»Ÿé«”å’Œå¹³è‡ºï¼Œæ¯”å¦‚å®‰å…¨è£œä¸ã€‚  ç­è§£ç³»çµ±é–“çš„ç›¸äº’ä½œç”¨ï¼Œä»¥ä¾¿åœ¨ç•°å¸¸è®Šæ›´é€ æˆæå¤±å‰é€²è¡Œè¦é¿ã€‚  é æ¸¬æœªä¾†çš„å•é¡Œï¼Œä¸¦åœ¨å•é¡Œå‡ºç¾ä¹‹å‰åŠ ä»¥è§£æ±ºï¼ˆä¾‹å¦‚ï¼Œå®¹é‡è¦åŠƒï¼‰ã€‚  å»ºç«‹éƒ¨ç½²ã€é…ç½®ã€ç®¡ç†æ–¹é¢çš„è‰¯å¥½å¯¦è¸ï¼Œç·¨å¯«ç›¸æ‡‰å·¥å…·ã€‚  åŸ·è¡Œè¤‡é›œçš„ç¶­è­·ä»»å‹™ï¼Œä¾‹å¦‚å°‡æ‡‰ç”¨ç¨‹å¼å¾ä¸€å€‹å¹³è‡ºé·ç§»åˆ°å¦ä¸€å€‹å¹³è‡ºã€‚  ç•¶é…ç½®è®Šæ›´æ™‚ï¼Œç¶­æŒç³»çµ±çš„å®‰å…¨æ€§ã€‚  å®šç¾©å·¥ä½œæµç¨‹ï¼Œä½¿é‹ç¶­æ“ä½œå¯é æ¸¬ï¼Œä¸¦ä¿æŒç”Ÿç”¢ç’°å¢ƒç©©å®šã€‚  éµæ‰“çš„ç‡Ÿç›¤æµæ°´çš„å…µï¼Œç¶­æŒçµ„ç¹”å°ç³»çµ±çš„ç­è§£ã€‚   è³‡æ–™ç³»çµ±å¯ä»¥é€éå„ç¨®æ–¹å¼ä½¿æ—¥å¸¸ä»»å‹™æ›´è¼•é¬†ï¼š   é€éè‰¯å¥½çš„ç›£æ§ï¼Œæä¾›å°ç³»çµ±å…§éƒ¨ç‹€æ…‹å’ŒåŸ·è¡Œæ™‚è¡Œç‚ºçš„Â   å¯è¦‹æ€§ï¼ˆvisibilityï¼‰ ã€‚  ç‚ºè‡ªå‹•åŒ–æä¾›è‰¯å¥½æ”¯æ´ï¼Œå°‡ç³»çµ±èˆ‡æ¨™æº–åŒ–å·¥å…·ç›¸æ•´åˆã€‚  é¿å…ä¾è³´å–®è‡ºæ©Ÿå™¨ï¼ˆåœ¨æ•´å€‹ç³»çµ±ç¹¼çºŒä¸é–“æ–·åŸ·è¡Œçš„æƒ…æ³ä¸‹å…è¨±æ©Ÿå™¨åœæ©Ÿç¶­è­·ï¼‰ã€‚  æä¾›è‰¯å¥½çš„æ–‡ä»¶å’Œæ˜“æ–¼ç†è§£çš„æ“ä½œæ¨¡å‹ï¼ˆâ€œå¦‚æœåš Xï¼Œæœƒç™¼ç”Ÿ Yâ€ï¼‰ã€‚  æä¾›è‰¯å¥½çš„é è¨­è¡Œç‚ºï¼Œä½†éœ€è¦æ™‚ä¹Ÿå…è¨±ç®¡ç†å“¡è‡ªç”±è¦†è“‹é è¨­å€¼ã€‚  æœ‰æ¢ä»¶æ™‚é€²è¡Œè‡ªæˆ‘ä¿®å¾©ï¼Œä½†éœ€è¦æ™‚ä¹Ÿå…è¨±ç®¡ç†å“¡æ‰‹å‹•æ§åˆ¶ç³»çµ±ç‹€æ…‹ã€‚  è¡Œç‚ºå¯é æ¸¬ï¼Œæœ€å¤§é™åº¦æ¸›å°‘æ„å¤–ã€‚  äºŒã€ç°¡å–®æ€§ï¼ˆSimplicityï¼‰  å¾ç³»çµ±ä¸­æ¶ˆé™¤å„˜å¯èƒ½å¤šçš„Â   è¤‡é›œåº¦ï¼ˆcomplexityï¼‰ ï¼Œä½¿æ–°å·¥ç¨‹å¸«ä¹Ÿèƒ½è¼•é¬†ç†è§£ç³»çµ±ï¼ˆæ³¨æ„é€™å’Œä½¿ç”¨è€…ä»‹é¢çš„ç°¡å–®æ€§ä¸ä¸€æ¨£ï¼‰ã€‚  ä¸€å€‹é™·å…¥è¤‡é›œæ³¥æ½­çš„è»Ÿé«”å°ˆæ¡ˆæœ‰æ™‚è¢«æè¿°ç‚ºÂ   çˆ›æ³¥æ½­ï¼ˆa big ball of mudï¼‰  **è¤‡é›œåº¦ï¼ˆcomplexityï¼‰**æœ‰å„ç¨®å¯èƒ½çš„ç—‡ç‹€ï¼Œä¾‹å¦‚ï¼šç‹€æ…‹ç©ºé–“æ¿€å¢ã€æ¨¡çµ„é–“ç·Šå¯†è€¦åˆã€ç³¾çµçš„ä¾è³´é—œä¿‚ã€ä¸ä¸€è‡´çš„å‘½åå’Œè¡“èªã€è§£æ±ºæ•ˆèƒ½å•é¡Œçš„ Hackã€éœ€è¦ç¹é–‹çš„ç‰¹ä¾‹ç­‰ç­‰ã€‚  ç°¡åŒ–ç³»çµ±ä¸¦ä¸ä¸€å®šæ„å‘³è‘—æ¸›å°‘åŠŸèƒ½ï¼›å®ƒä¹Ÿå¯ä»¥æ„å‘³è‘—æ¶ˆé™¤Â   é¡å¤–çš„ï¼ˆaccidentalï¼‰ Â çš„è¤‡é›œåº¦ã€‚ Moseley å’Œ MarksæŠŠÂ   é¡å¤–è¤‡é›œåº¦ Â å®šç¾©ç‚ºï¼šç”±å…·é«”å¯¦ç¾ä¸­æ¹§ç¾ï¼Œè€Œéï¼ˆå¾ä½¿ç”¨è€…è¦–è§’çœ‹ï¼Œç³»çµ±æ‰€è§£æ±ºçš„ï¼‰å•é¡Œæœ¬èº«å›ºæœ‰çš„è¤‡é›œåº¦ã€‚æ¶ˆé™¤  é¡å¤–è¤‡é›œåº¦ Â çš„æœ€å¥½å·¥å…·ä¹‹ä¸€æ˜¯Â   æŠ½è±¡ï¼ˆabstractionï¼‰  ä¸‰ã€å¯æ¼”åŒ–æ€§ï¼ˆevolvabilityï¼‰  ä½¿å·¥ç¨‹å¸«åœ¨æœªä¾†èƒ½è¼•é¬†åœ°å°ç³»çµ±é€²è¡Œæ›´æ”¹ï¼Œç•¶éœ€æ±‚è®ŠåŒ–æ™‚ç‚ºæ–°æ‡‰ç”¨å ´æ™¯åšé©é…ã€‚ä¹Ÿç¨±ç‚ºÂ   å¯æ“´å……å¥—ä»¶æ€§ï¼ˆextensibilityï¼‰ ã€**å¯ä¿®æ”¹æ€§ï¼ˆmodifiabilityï¼‰**æˆ–Â   å¯å¡‘æ€§ï¼ˆplasticityï¼‰ ã€‚   æ•æ·ï¼ˆagileï¼‰ Â å·¥ä½œæ¨¡å¼ç‚ºé©æ‡‰è®ŠåŒ–æä¾›äº†ä¸€å€‹æ¡†æ¶ã€‚æ•æ·ç¤¾ç¾¤é‚„é–‹ç™¼äº†å°åœ¨é »ç¹è®ŠåŒ–çš„ç’°å¢ƒä¸­é–‹ç™¼è»Ÿé«”å¾ˆæœ‰å¹«åŠ©çš„æŠ€è¡“å·¥å…·å’Œæ¨¡å¼ï¼Œå¦‚Â **æ¸¬è©¦é©…å‹•é–‹ç™¼ï¼ˆTDD, test-driven developmentï¼‰**å’ŒÂ   é‡æ§‹ï¼ˆrefactoringï¼‰ ã€‚  ä¿®æ”¹è³‡æ–™ç³»çµ±ä¸¦ä½¿å…¶é©æ‡‰ä¸æ–·è®ŠåŒ–éœ€æ±‚çš„å®¹æ˜“ç¨‹åº¦ï¼Œæ˜¯èˆ‡Â   ç°¡å–®æ€§ Â å’ŒÂ   æŠ½è±¡æ€§ Â å¯†åˆ‡ç›¸é—œçš„ï¼šç°¡å–®æ˜“æ‡‚çš„ç³»çµ±é€šå¸¸æ¯”è¤‡é›œç³»çµ±æ›´å®¹æ˜“ä¿®æ”¹ã€‚ä½†ç”±æ–¼é€™æ˜¯ä¸€å€‹éå¸¸é‡è¦çš„æ¦‚å¿µï¼Œæˆ‘å€‘å°‡ç”¨ä¸€å€‹ä¸åŒçš„è©ä¾†æŒ‡ä»£è³‡æ–™ç³»çµ±å±¤é¢çš„æ•æ·æ€§ï¼šÂ   å¯æ¼”åŒ–æ€§ï¼ˆevolvabilityï¼‰"},{"id":"content:5.ddia:3.chapter3.md","path":"/ddia/chapter3","dir":"ddia","title":"03 æ•¸æ“šå„²å­˜èˆ‡æª¢ç´¢","description":"ddia/ch3.md at master Â· Vonng/ddia","keywords":["å¼•è¨€","é©…å‹•è³‡æ–™åº«çš„è³‡æ–™çµæ§‹","Bæ¨¹","äº‹å‹™è™•ç†é‚„æ˜¯åˆ†æï¼Ÿ","æœ¬ç« å°çµ"],"body":"   ddia/ch3.md at master Â· Vonng/ddia  å¼•è¨€  æ•¸æ“šåº«æœ€åŸºæœ¬å…©ä»¶äº‹ï¼š   å„²å­˜æ•¸æ“š  æª¢ç´¢æ•¸æ“š  æœ¬ç« æœƒè¨è«–   è³‡æ–™åº«å¦‚ä½•å„²å­˜è³‡æ–™  å¦‚ä½•æ‰¾åˆ°è³‡æ–™  å„²å­˜å¼•æ“ä¾æ“šè² è¼‰é€²æœ€ä½³åŒ–ï¼Œåˆ†æˆå…©ç¨®   äº‹å‹™å‹è² è¼‰æœ€ä½³åŒ–  Online Transaction Processing (OLTP) å„²å­˜å¼•æ“ï¼Œç”¨æ–¼é«˜ä½µç™¼çš„äº¤æ˜“æ€§æ‡‰ç”¨ï¼Œéœ€è¦æ”¯æ´ä½µç™¼çš„è®€å–æˆ–å¯«å…¥æ“ä½œã€‚  åˆ†ææ€§è² è¼‰æœ€ä½³åŒ–  Online Analytical Processing (OLAP) å„²å­˜å¼•æ“ï¼Œç”¨æ–¼é‡å°å¤§æ•¸æ“šé›†é€²è¡Œåˆ†ææŸ¥è©¢ï¼Œæ”¯æ´è¤‡é›œçš„èšé›†è¨ˆç®—å’Œå¤šç¶­åˆ†æã€‚  å…©å¤§é¡è³‡æ–™åº«å¼•æ“   page-oriented  é é¢å°å‘è³‡æ–™åº«è¢«ç”¨æ–¼å„²å­˜è¡¨æ ¼ï¼Œå…¶ä¸­æ¯å€‹è¡¨æ ¼è¢«åˆ†ç‚ºå¥½å¹¾å€‹ç£ç¢Ÿé é¢ã€‚ç£ç¢Ÿé é¢æ˜¯è³‡æ–™åº«ç³»çµ±èˆ‡ç£ç¢Ÿäº¤äº’çš„æœ€å°å–®ä½ï¼Œé€šå¸¸å¤§å°ç‚º 4KB æˆ– 8KBã€‚  log-structured  æ—¥èªŒå°å‘è³‡æ–™åº«æœ€åˆæ˜¯ç”± Google ç™¼æ˜ï¼Œç”¨æ–¼è™•ç† Web æœç´¢çš„ç´¢å¼•æ•¸æ“šã€‚é€™ç¨®è³‡æ–™åº«å¼•æ“å°‡æ‰€æœ‰ä¿®æ”¹æ“ä½œå¯«å…¥ä¸€å€‹è¿½è¹¤å¯«å…¥ï¼ˆwrite-ahead log, WALï¼‰ä¸­ï¼Œç„¶å¾Œå°‡å¯¦éš›æ•¸æ“šè®€å–åˆ°è¨˜æ†¶é«”ä¸­ï¼Œä¸¦åœ¨è¨˜æ†¶é«”ä¸­é€²è¡Œä¿®æ”¹ã€‚ç•¶ä¿®æ”¹å®Œæˆæ™‚ï¼Œé€™äº›ä¿®æ”¹æ“ä½œæœƒè¢«è¿½åŠ åˆ° WAL ä¸­ï¼Œç„¶å¾Œå†ä»¥æŸç¨®æ–¹å¼å¯«å…¥ç£ç¢Ÿã€‚é€™ç¨®æ–¹å¼å…è¨±å¯«å…¥æ“ä½œéå¸¸å¿«é€Ÿï¼Œä¸¦ä¸”å¯ä»¥ç¶­è­·è‰¯å¥½çš„å¯«å…¥ååé‡ï¼Œå¾è€Œä½¿å…¶æˆç‚ºè¨±å¤šå¤§å‹åˆ†ä½ˆå¼æ•¸æ“šåº«çš„ç†æƒ³é¸æ“‡ã€‚  é©…å‹•è³‡æ–™åº«çš„è³‡æ–™çµæ§‹  æœ€ç°¡å–®çš„è³‡æ–™åº«     #!/bin/bash\n   db_set   () {\n     echo   \"  $1  ,  $2  \"   >>   database\n   }\n   \n   db_get   () {\n     grep   \"^  $1  ,\"   database   |   sed   -e   \"s/^  $1  ,//\"   |   tail   -n   1\n   }\n  é€™å€‹ç°¡å–®çš„ç¨‹å¼å¯¦ç¾éµå€¼å„²å­˜å’Œè®€å–ï¼Œæ¯æ¬¡set æ™‚æœƒåœ¨æª”æ¡ˆå°¾å·´è¿½åŠ è¨˜éŒ„ï¼Œè®€å–æ™‚æœƒå¾æœ€å¾Œä¸€è¡Œå¾€ä¸Šæ‰¾ç›´åˆ°æ‰¾åˆ°key     $ db_set   123456   '{\"name\":\"London\",\"attractions\":[\"Big Ben\",\"London Eye\"]}'\n   \n   $ db_set   42   '{\"name\":\"San Francisco\",\"attractions\":[\"Golden Gate Bridge\"]}'\n   \n   $ db_get   42\n   {  \"name\"  :  \"San Francisco\"  ,  \"attractions\"  :[  \"Golden Gate Bridge\"  ]}\n  db_set æœ‰éå¸¸å¥½çš„æ•ˆèƒ½ï¼Œå› ç‚ºåœ¨æª”å°¾è¿½åŠ å¯«å…¥æ˜¯éå¸¸é«˜æ•ˆçš„ï¼Œè¨±å¤šè³‡æ–™åº«çš„å…§éƒ¨ä½¿ç”¨äº†log structedï¼Œä¹Ÿæ˜¯ç”¨  åƒ…è¿½åŠ (append-only)  db_get çš„æ•ˆèƒ½å‰‡å¾ˆç³Ÿ, O(n)ï¼Œç‚ºäº†æ”¹å–„é€™å€‹å•é¡Œï¼Œæˆ‘å€‘éœ€è¦ä¸€å€‹æ•¸æ“šçµæ§‹ Index  Index æ˜¯ä¸€å€‹ã€Œé¡å¤–ã€çš„è³‡æ–™ï¼Œèƒ½æ”¹è®ŠæŸ¥è©¢çš„æ•ˆèƒ½ï¼Œä½†æ˜¯åœ¨å¯«å…¥æ™‚æœƒå¢åŠ é–‹éŠ·ï¼Œæ‰€ä»¥å¯«å…¥æ•ˆèƒ½å¾ˆé›£è¶…éå–®ç´”çš„è¿½åŠ å¯«å…¥æª”æ¡ˆ  æ¬Šè¡¡é¸ä»€éº¼ç´¢å¼•å°±æ˜¯DBAçš„å°ˆæ¥­  Hash Index  ç‚ºäº†ç°¡åŒ–ï¼Œæ›¸ä¸­å‡è¨­è¦å„²å­˜çš„è³‡æ–™æ˜¯ key-value Data  å‡å¦‚è³‡æ–™è¦å­˜é€²æª”æ¡ˆï¼Œé‚£ Index æœ€ç°¡å–®çš„ä½œæ³•å°±æ˜¯ å­˜ä¸‹æ¯ç­†è³‡æ–™åœ¨æª”æ¡ˆçš„ Offset    æŸ¥è©¢è³‡æ–™æ™‚ï¼Œåªè¦å¾indexå–å¾— offsetï¼Œå†å»æª”æ¡ˆå°‹æ‰¾(seek)å³å¯ã€‚  æ„Ÿè¦ºå¾ˆç°¡å–®ï¼Œå¯¦éš›ä¸Š Bitcask å°±æ˜¯é€™éº¼åšçš„ã€‚  é€™ç¨®çµæ§‹ç‰¹åˆ¥é©åˆåœ¨å¾ˆå¤šå¯«æ“ä½œçš„å ´æ™¯ï¼Œåƒæ˜¯è²“å’ªå½±ç‰‡çš„é»æ“Šæ¬¡æ•¸  å¦‚æœæª”æ¡ˆå¤ªå¤§çš„è©±ï¼Œå°±é–‹æ–°çš„æª”æ¡ˆï¼Œç„¶å¾Œæœ‰æ™‚é–“å†æŠŠèˆŠçš„æª”æ¡ˆå£“ç¸®    å¥å€¼æ›´æ–°æ—¥èªŒ (çµ±è¨ˆè²“å’ªå½±ç‰‡çš„æ’­æ”¾æ¬¡æ•¸)  æª”æ¡ˆå¾ˆå¤šçš„è©±ï¼Œå¯ä»¥åˆä½µ     åŒæ™‚åŸ·è¡Œå£“ç¸®å’Œåˆ†æ®µåˆä½µ  ç‚ºæ¯å€‹æª”æ¡ˆå„²å­˜è‡ªå·±çš„ hash index  å…¶å®ƒå¯¦ç¾ç´°ç¯€ï¼š   æª”æ¡ˆæ ¼å¼  æ›¸ä¸­æåˆ°ï¼Œåœ¨å„²å­˜æ•¸æ“šæ™‚ä½¿ç”¨äºŒé€²åˆ¶æ ¼å¼æœƒæ¯”ä½¿ç”¨æ–‡æœ¬æ ¼å¼æ›´å¿«ï¼Œå› ç‚ºæ–‡æœ¬æ ¼å¼éœ€è¦é€²è¡Œè§£æå’Œåºåˆ—åŒ–ï¼Œè€ŒäºŒé€²åˆ¶æ ¼å¼å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚é€™æ˜¯è¨±å¤šè³‡æ–™åº«çš„å„ªåŒ–æŠ€å·§ä¹‹ä¸€ã€‚  åˆªé™¤è¨˜éŒ„  ç•¶è³‡æ–™è¢«åˆªé™¤æ™‚ï¼Œç‚ºäº†é¿å… hash index ä¸­çš„è³‡æ–™ä¸ä¸€è‡´ï¼Œå¯ä»¥å…ˆæ¨™è¨˜å®ƒå€‘ç‚ºè¢«åˆªé™¤çš„ç‹€æ…‹ï¼Œç¨±ç‚ºå¢“ç¢‘ï¼ˆtombstoneï¼‰ã€‚ç•¶ hash index æŸ¥æ‰¾åˆ°è¢«æ¨™è¨˜ç‚ºå¢“ç¢‘çš„è³‡æ–™æ™‚ï¼Œå°±çŸ¥é“é€™å€‹è³‡æ–™å·²ç¶“è¢«åˆªé™¤ï¼Œä¸¦ä¸”ä¸æœƒå†è¢«å›å‚³ã€‚  å´©æ½°æ¢å¾©  å¦‚æœè³‡æ–™åº«é‡æ–°å•Ÿå‹•ï¼Œå› ç‚ºè¨˜æ†¶é«”ä¸­çš„é›œæ¹Šå°æ˜ è¡¨ä¸Ÿå¤±ï¼Œæ‰€ä»¥å¿…é ˆé‡æ–°æ§‹å»ºã€‚é€™å¯ä»¥é€šéåœ¨å•Ÿå‹•æ™‚é‡æ–°è®€å–æ¯å€‹æ•¸æ“šæª”æ¡ˆä¸¦é‡å»ºå°æ˜ è¡¨ä¾†å¯¦ç¾ã€‚Bitcask æœƒæŠŠ index cache èµ·ä¾†  éƒ¨åˆ†å¯«å…¥è¨˜éŒ„  è³‡æ–™åº«éš¨æ™‚å¯èƒ½å´©æ½°ï¼ŒåŒ…æ‹¬åœ¨å°‡è¨˜éŒ„è¿½åŠ åˆ°æ—¥èªŒçš„éç¨‹ä¸­ã€‚ Bitcask æª”æ¡ˆåŒ…å«æ ¡é©—å’Œï¼Œå…è¨±æª¢æ¸¬å’Œå¿½ç•¥æ—¥èªŒä¸­çš„é€™äº›æå£éƒ¨åˆ†ã€‚  ä½µç™¼æ§åˆ¶  ç”±æ–¼å¯«æ“ä½œæ˜¯ä»¥åš´æ ¼çš„é †åºè¿½åŠ åˆ°æ—¥èªŒä¸­çš„ï¼Œæ‰€ä»¥å¸¸è¦‹çš„å¯¦ç¾æ˜¯éš»æœ‰ä¸€å€‹å¯«å…¥åŸ·è¡Œç·’ã€‚ä¹Ÿå› ç‚ºè³‡æ–™æª”æ¡ˆæ®µæ˜¯åƒ…è¿½åŠ çš„æˆ–è€…èªªæ˜¯ä¸å¯è®Šçš„ï¼Œæ‰€ä»¥å®ƒå€‘å¯ä»¥è¢«å¤šå€‹åŸ·è¡Œç·’åŒæ™‚è®€å–ã€‚  åƒ…è¿½åŠ æ—¥èªŒä¼¼ä¹å¾ˆæµªè²»ï¼šç‚ºä»€éº¼ä¸ç›´æ¥åœ¨æª”æ¡ˆè£¡æ›´æ–°ï¼ŒåŸå› å¦‚ä¸‹   é †åºå¯«å…¥æ¯”éš¨æ©Ÿè®€å–æ›´å¿«ï¼Œå› ç‚ºå®ƒå…è¨±æ“ä½œç³»çµ±ä»¥æ›´é«˜æ•ˆçš„æ–¹å¼ç·¨çµ„å¯«å…¥æ“ä½œã€‚  ä½µç™¼å’Œå´©æ½°æ¢å¾©å®¹æ˜“ã€‚  åˆä½µèˆŠæ®µè³‡æ–™å¯ä»¥é˜²æ­¢ç¢ç‰‡åŒ–å•é¡Œ  hash index ä¹Ÿæœ‰å…¶ä¾·é™æ€§ï¼š   memory æ”¾ä¸ä¸‹ index æ™‚ï¼Œhash index åœ¨ disk ä¸Šè¡¨ç¾å¾ˆç³Ÿ  ç¯„åœæŸ¥è©¢æ•ˆç‡ä¸é«˜ï¼Œç„¡æ³•è¼•é¬†æƒæ kitty00000 ~ kitty99999  SSTables and LSM tree  åœ¨ä¹‹å‰çš„ hash index çµæ§‹ï¼Œå¯«å…¥æª”æ¡ˆçš„ key å€¼é †åºï¼Œæ˜¯ç…§å¯«å…¥æ™‚é–“å…ˆå¾Œçš„  SSTable(Sorted String Table) å‰‡æ˜¯è¦æ±‚å¯«å…¥çš„é †åºç…§ key çš„é †åº  ç”¨SSTable çš„å¥½è™•æ˜¯   åˆä½µæª”æ¡ˆå¯ä»¥æ›´é«˜æ•ˆï¼ŒåŒæ™‚è®€å–å¤šå€‹æª”æ¡ˆåˆä½µ  å¯ä»¥ä¸ç”¨å­˜ä¸‹æ‰€æœ‰çš„ key offset å°æ‡‰ï¼Œå› ç‚º key æ˜¯æ’åºçš„ï¼Œåªè¦å…ˆæ‰¾åˆ°å¤§æ¦‚çš„ä½ç½®ï¼Œå†æƒææª”æ¡ˆå³å¯  index çš„ç©ºé–“ç¯€çœï¼ŒIOä¹Ÿç¯€çœ     å…·æœ‰è¨˜æ†¶é«”ç´¢å¼•çš„ SSTable   æ§‹å»ºå’Œç¶­è­·SSTables  å¦‚ä½•è®“è³‡æ–™èƒ½å¤ é å…ˆæ’å¥½åºå‘¢ï¼Ÿç•¢ç«Ÿæˆ‘å€‘æ¥æ”¶åˆ°çš„å¯«å…¥è«‹æ±‚æ˜¯æ²’æœ‰é †åºçš„ã€‚  é›–ç„¶åœ¨ç¡¬ç¢Ÿä¸Šç¶­è­·æœ‰åºçµæ§‹ä¹Ÿæ˜¯å¯èƒ½çš„ï¼Œä½†åœ¨è¨˜æ†¶é«”å…§å‰‡å®¹æ˜“å¤š  æ–¹ä¾¿æ’åºçš„è³‡æ–™çµæ§‹   ç´…é»‘æ¨¹  AVL æ¨¹  æˆ‘å€‘å¯ä»¥è®“æˆ‘å€‘çš„å„²å­˜å¼•æ“ä»¥å¦‚ä¸‹æ–¹å¼å·¥ä½œï¼š   æœ‰æ–°å¯«å…¥æ™‚ï¼Œå°‡å…¶æ–°å¢åˆ°è¨˜æ†¶é«”ä¸­çš„å¹³è¡¡æ¨¹è³‡æ–™çµæ§‹ã€‚  ç•¶Â   è¨˜æ†¶é«”è¡¨ Â å¤§æ–¼æŸå€‹é–¾å€¼ï¼ˆé€šå¸¸ç‚ºå¹¾å…†ä½å…ƒçµ„ï¼‰æ™‚ï¼Œå°‡å…¶ä½œç‚º SSTable æª”æ¡ˆå¯«å…¥ç¡¬ç¢Ÿã€‚ç•¶è©² SSTable è¢«å¯«å…¥ç¡¬ç¢Ÿæ™‚ï¼Œæ–°çš„å¯«å…¥å¯ä»¥åœ¨ä¸€å€‹æ–°çš„è¨˜æ†¶é«”è¡¨ä¾‹é …ä¸Šç¹¼çºŒé€²è¡Œã€‚  æ”¶åˆ°è®€å–è«‹æ±‚æ™‚ï¼Œé¦–å…ˆå˜—è©¦åœ¨è¨˜æ†¶é«”è¡¨ä¸­æ‰¾åˆ°å°æ‡‰çš„éµï¼Œå¦‚æœæ²’æœ‰å°±åœ¨æœ€è¿‘çš„ç¡¬ç¢Ÿæ®µä¸­å°‹æ‰¾ï¼Œå¦‚æœé‚„æ²’æœ‰å°±åœ¨ä¸‹ä¸€å€‹è¼ƒèˆŠçš„æ®µä¸­ç¹¼çºŒå°‹æ‰¾ï¼Œä»¥æ­¤é¡æ¨ã€‚  æ™‚ä¸æ™‚åœ°ï¼Œåœ¨å¾Œè‡ºåŸ·è¡Œä¸€å€‹åˆä½µå’Œå£“ç¸®éç¨‹ï¼Œä»¥åˆä½µæ®µæª”æ¡ˆä¸¦å°‡å·²è¦†è“‹æˆ–å·²åˆªé™¤çš„å€¼ä¸Ÿæ£„æ‰ã€‚  åªå‰©ä¸€å€‹å•é¡Œï¼Œè³‡æ–™åº«å´©æ½°ï¼Œå‰‡æœ€è¿‘çš„å¯«å…¥ï¼ˆåœ¨è¨˜æ†¶é«”è¡¨ä¸­ï¼Œä½†å°šæœªå¯«å…¥ç¡¬ç¢Ÿï¼‰å°‡ä¸Ÿå¤±ã€‚  è§£æ³•ï¼šç¡¬ç¢Ÿä¸Šå„²å­˜ä¸€å€‹å–®ç¨çš„æ—¥èªŒæª”ï¼Œåœ¨å¯«å…¥è¨˜æ†¶é«”éŒ¢å…ˆå¯«å…¥æ—¥èªŒæª”ï¼Œç”¨æ–¼å´©æ½°å¾Œå›å¾©è¨˜æ†¶é«”   ç”¨SSTablesè£½ä½œLSMæ¨¹  LSM-Treeï¼ˆLog Structured-Merge Treeï¼‰æ˜¯ä¸€ç¨®éå¸¸æµè¡Œçš„æ¨¹å‹è³‡æ–™çµæ§‹ï¼Œç”¨æ–¼å¯¦ç¾è¨±å¤šç¾ä»£è³‡æ–™åº«ç³»çµ±ã€‚LSM-Tree å°‡æ•¸æ“šåˆ†ç‚ºå¤šå€‹å±¤ï¼Œæ¯å±¤ä½¿ç”¨ä¸åŒçš„è³‡æ–™çµæ§‹ï¼ˆå¦‚ SSTableï¼‰ä¾†é€²è¡Œå„²å­˜å’Œæª¢ç´¢ã€‚ç•¶è³‡æ–™å¯«å…¥æ™‚ï¼Œå®ƒæœƒå…ˆè¢«å¯«å…¥å…·æœ‰è¼ƒå¿«å¯«å…¥é€Ÿåº¦çš„è¨˜æ†¶é«”ä¸­ï¼Œç„¶å¾Œç•¶è¨˜æ†¶é«”ä¸­çš„è³‡æ–™é”åˆ°ä¸€å®šé–¾å€¼æ™‚ï¼Œæœƒå°‡å…¶å¯«å…¥ä¸‹ä¸€å±¤ã€‚é€™æ¨£å¯ä»¥é¿å…éå¤šçš„ç¡¬ç¢Ÿå¯«å…¥ï¼ŒåŒæ™‚ä¹Ÿå¯ä»¥æé«˜æŸ¥è©¢æ•ˆç‡ã€‚      LSM Read å¯¦ä½œæ–¹å¼  åœ¨ LSM-Tree ä¸­ï¼Œç•¶æˆ‘å€‘éœ€è¦æŸ¥è©¢è³‡æ–™æ™‚ï¼Œæœƒé¦–å…ˆåœ¨è¨˜æ†¶é«”ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œå°±ç¹¼çºŒåœ¨ä¸‹ä¸€å±¤çš„ SSTable ä¸­æŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°è©²ç­†è³‡æ–™æˆ–è€…æ‰€æœ‰çš„ SSTable éƒ½è¢«æŸ¥è©¢éç‚ºæ­¢ã€‚æ­¤å¤–ï¼ŒLSM-Tree é€šå¸¸é‚„æœƒä½¿ç”¨ Bloom Filters ä¾†é€²ä¸€æ­¥åŠ é€ŸæŸ¥è©¢ã€‚  Bloom Filters æ˜¯ä¸€ç¨®è³‡æ–™çµæ§‹ï¼Œå¸¸ç”¨æ–¼åˆ¤æ–·æŸå€‹å…ƒç´ æ˜¯å¦å­˜åœ¨æ–¼ä¸€å€‹é›†åˆä¸­ã€‚å®ƒæ˜¯ç”± Burton Bloom æ–¼ 1970 å¹´æå‡ºçš„ã€‚  ç›¸è¼ƒæ–¼å‚³çµ±çš„B-Treeï¼ŒLSM-Treeçš„å„ªé»åœ¨æ–¼ï¼š   å¯«å…¥æ•ˆç‡é«˜ï¼Œå› ç‚ºæ•¸æ“šå…ˆè¢«å¯«å…¥è¨˜æ†¶é«”ä¸­ï¼Œè€Œä¸æ˜¯ç›´æ¥å¯«å…¥ç£ç¢Ÿä¸­ï¼Œç•¶è¨˜æ†¶é«”ä¸­çš„æ•¸æ“šé”åˆ°ä¸€å®šé–¾å€¼æ™‚ï¼Œå†é€²è¡Œä¸€æ¬¡æ€§çš„å¯«å…¥æ“ä½œã€‚  å¯ä»¥é€²è¡Œæ‰¹é‡å¯«å…¥å’Œåˆªé™¤æ“ä½œï¼Œå› ç‚ºæ•¸æ“šè¢«åˆ†ç‚ºå¤šå€‹å±¤ï¼Œå¯ä»¥ä½¿ç”¨æ‰¹é‡å¯«å…¥å’Œåˆªé™¤æ“ä½œä¾†é€²è¡Œå„ªåŒ–ã€‚  å¯ä»¥é€²è¡Œå´©æ½°æ¢å¾©ï¼Œå› ç‚ºæ•¸æ“šè¢«åˆ†ç‚ºå¤šå€‹å±¤ï¼Œå¯ä»¥åœ¨æ•¸æ“šå´©æ½°æ™‚é€²è¡Œæ¢å¾©æ“ä½œã€‚  LSM-Tree çš„ç¼ºé»åŒ…æ‹¬ï¼š   æŸ¥è©¢æ•ˆç‡ä¸ç©©å®šï¼Œå› ç‚ºæ•¸æ“šè¢«åˆ†ç‚ºå¤šå€‹å±¤ï¼Œæ‰€ä»¥æŸ¥è©¢æ•ˆç‡å¯èƒ½æœƒéš¨è‘—å±¤æ•¸çš„å¢åŠ è€Œä¸‹é™ï¼Œå°¤å…¶æ˜¯åœ¨ SSTable ä¸­æœ‰å¾ˆå¤šå¢“ç¢‘ï¼ˆtombstoneï¼‰æ™‚ã€‚  LSM-Tree çš„å„²å­˜æ ¼å¼æ¯”è¼ƒè¤‡é›œï¼Œéœ€è¦å°‡æ•¸æ“šåˆ†ç‚ºå¤šå€‹å±¤ï¼Œæ¯å±¤ä½¿ç”¨ä¸åŒçš„è³‡æ–™çµæ§‹é€²è¡Œå„²å­˜ï¼Œé€™å°è‡´å®ƒæ¯”è¼ƒé›£ä»¥å¯¦ç¾ã€‚  åœ¨å¯«å…¥æ™‚ï¼Œéœ€è¦å…ˆå°‡æ•¸æ“šå¯«å…¥è¨˜æ†¶é«”ä¸­ï¼Œç„¶å¾Œå†é€²è¡Œä¸€æ¬¡æ€§çš„å¯«å…¥æ“ä½œã€‚é€™æ¨£æœƒå°è‡´å¯«å…¥æ“ä½œçš„å»¶é²æ€§è¼ƒé«˜ã€‚  ç¸½é«”è€Œè¨€ï¼ŒLSM-Tree æ˜¯ä¸€ç¨®éå¸¸æœ‰æ•ˆçš„æ•¸æ“šå„²å­˜å’Œæª¢ç´¢æ–¹å¼ï¼Œä½†å®ƒä¹Ÿæœ‰ä¸€äº›ç¼ºé»ï¼Œéœ€è¦åœ¨å¯¦éš›ä½¿ç”¨ä¸­åŠ ä»¥æ³¨æ„ã€‚  æ•ˆèƒ½æœ€ä½³åŒ–  ç•¶æŸ¥è©¢ä¸å­˜åœ¨çš„éµæ™‚ï¼Œéœ€è¦æª¢æŸ¥è¨˜æ†¶é«”è¡¨å’Œå¾æœ€è¿‘åˆ°æœ€æ—©çš„æ‰€æœ‰æ®µæª”æ¡ˆï¼Œé‚£æ¨£å¾ˆæ…¢ã€‚  è§£æ±ºæ–¹æ³•ï¼š   ä½¿ç”¨å¸ƒéš†éæ¿¾å™¨(Bloom Filters)ä¾†æœ€ä½³åŒ–æŸ¥è©¢ä¸å­˜åœ¨çš„éµæ™‚çš„è¨ªå•  è€ƒæ…®ä½¿ç”¨ size-tiered å’Œ leveled compaction ä¾†ç¢ºå®š SSTables è¢«å£“ç¸®å’Œåˆä¸¦çš„é †åºå’Œæ™‚é–“  LSM æ¨¹çš„åŸºæœ¬æ€æƒ³æ˜¯å°‡ä¸€ç³»åˆ—åœ¨å¾Œè‡ºåˆä½µçš„ SSTables å„²å­˜èµ·ä¾†ï¼Œå³ä½¿è³‡æ–™é›†æ¯”å¯ç”¨è¨˜æ†¶é«”å¤§å¾—å¤šï¼Œå®ƒä»èƒ½ç¹¼çºŒæ­£å¸¸å·¥ä½œã€‚è³‡æ–™æŒ‰æ’åºé †åºå„²å­˜ï¼Œå¯é«˜æ•ˆåœ°åŸ·è¡Œç¯„åœæŸ¥è©¢ï¼Œä¸¦ä¸”å› ç‚ºç¡¬ç¢Ÿå¯«å…¥æ˜¯é€£çºŒçš„ï¼Œæ‰€ä»¥ LSM æ¨¹å¯ä»¥æ”¯æ´éå¸¸é«˜çš„å¯«å…¥ååé‡ã€‚  Bloom Filterï¼ˆå¸ƒéš†éæ¿¾å™¨ï¼‰æ˜¯ç”¨ä¾†æª¢é©—ä¸€å€‹å…ƒç´ æ˜¯å¦å­˜åœ¨æ–¼ç‰¹å®šé›†åˆä¸­çš„æ¦‚å¿µã€‚å®ƒåœ¨ç©ºé–“è¤‡é›œåº¦æ–¹é¢æ¯” hash table æ›´å„ªç§€ï¼Œä½†ä½¿ç”¨å®ƒæ™‚éœ€è¦æ³¨æ„å½é™½æ€§(false positive)çš„å•é¡Œ  false positiveï¼šæ²’æœ‰å°±æ˜¯æ²’æœ‰ï¼Œæœ‰ä»£è¡¨æœ‰å¯èƒ½æœ‰  Bæ¨¹  æ—¥èªŒçµæ§‹ç´¢å¼•å·²ç¶“å¾ˆå¸¸è¦‹ï¼Œä½†å®ƒå€‘ä¸æ˜¯æœ€å¸¸ç”¨çš„ç´¢å¼•ã€‚B æ¨¹æ˜¯ä¸€ç¨®æœ€å¸¸è¦‹çš„ç´¢å¼•çµæ§‹ï¼Œå¾ 1970 å¹´è¢«å¼•å…¥ä»¥ä¾†ï¼Œåƒ…ä¸åˆ° 10 å¹´å°±è®Šå¾—â€œç„¡è™•ä¸åœ¨â€ï¼Œè¢«å»£æ³›ä½¿ç”¨åœ¨é—œä¿‚è³‡æ–™åº«å’Œéé—œä¿‚è³‡æ–™åº«ä¸­ã€‚  åƒ SSTables ä¸€æ¨£ï¼ŒB æ¨¹ä¿æŒæŒ‰éµæ’åºçš„éµå€¼å°ï¼Œé€™å…è¨±é«˜æ•ˆçš„éµå€¼æŸ¥è©¢å’Œç¯„åœæŸ¥è©¢ã€‚  B æ¨¹å°‡è³‡æ–™åº«åˆ†è§£æˆå›ºå®šå¤§å°çš„å¡Šæˆ–åˆ†é ï¼Œé€šå¸¸å¤§å°ç‚º 4KBï¼Œä¸¦ä¸”ä¸€æ¬¡åªèƒ½è®€å–æˆ–å¯«å…¥ä¸€å€‹é é¢ã€‚æ¯å€‹é é¢éƒ½å¯ä»¥ä½¿ç”¨åœ°å€æˆ–ä½ç½®ä¾†æ¨™è­˜ï¼Œé€™å…è¨±ä¸€å€‹é é¢å¼•ç”¨å¦ä¸€å€‹é é¢ï¼Œé¡ä¼¼æ–¼æŒ‡æ¨™ï¼Œåªæ˜¯æ˜¯åœ¨ç¡¬ç¢Ÿè€Œä¸æ˜¯åœ¨è¨˜æ†¶é«”ä¸­ã€‚æˆ‘å€‘å¯ä»¥ä½¿ç”¨é€™äº›é é¢å¼•ç”¨ä¾†æ§‹å»ºä¸€å€‹é é¢æ¨¹ï¼Œå¦‚åœ– 3-6 æ‰€ç¤ºã€‚     ä½¿ç”¨ B æ¨¹ç´¢å¼•æŸ¥è©¢ä¸€å€‹éµ   Bæ¨¹ç”±æ ¹é é¢ã€å­é é¢å’Œè‘‰å­é é¢çµ„æˆ  å­é é¢è² è²¬é€£çºŒéµç¯„åœï¼Œæ ¹é é¢ä¸Šçš„éµè¡¨ç¤ºç›¸é„°å­é é¢ç®¡ç†çš„éµçš„é‚Šç•Œ  æŸ¥æ‰¾éµå€¼æ™‚ï¼Œå¾æ ¹é é¢é–‹å§‹ï¼ŒæŒ‰ç¯„åœæŸ¥æ‰¾å­é é¢ï¼Œç›´åˆ°è‘‰å­é é¢  åˆ†æ”¯å› å­æ˜¯æ¯å€‹é é¢ä¸­å°å­é é¢å¼•ç”¨çš„æ•¸é‡ï¼Œç¯„ä¾‹ä¸Šæ˜¯6å€‹ï¼Œé€šå¸¸æ˜¯å¹¾ç™¾     æ›´æ–° B æ¨¹ä¸­çš„éµå€¼ï¼Œéœ€æœå°‹åŒ…å«è©²éµçš„è‘‰å­é é¢ï¼Œæ›´æ”¹å€¼ï¼Œå†å°‡è©²é é¢å¯«å›ç¡¬ç¢Ÿï¼ˆå¼•ç”¨ä»æœ‰æ•ˆï¼‰ã€‚  æ–°å¢éµéœ€æ‰¾åˆ°å¯åŒ…å«å®ƒçš„é é¢ï¼Œå¦‚ç©ºé–“ä¸è¶³ï¼Œå‰‡åˆ†æˆå…©åŠæ»¿é é¢ï¼Œä¸¦æ›´æ–°çˆ¶é é¢ã€‚  æ¼”ç®—æ³•ç¢ºä¿æ¨¹å¹³è¡¡ï¼Œn å€‹éµçš„ B æ¨¹æ·±åº¦ç‚º O(log n)ã€‚å¤šæ•¸è³‡æ–™åº«å¯ç”¨ä¸‰åˆ°å››å±¤æ¨¹ï¼Œåˆ†æ”¯å› å­ç‚º 500 çš„ 4KB é é¢çš„å››å±¤æ¨¹ï¼Œå¯å„²å­˜ 256TB è³‡æ–™ã€‚  è®“Bæ¨¹æ›´å¯é    B æ¨¹çš„åŸºæœ¬å¯«å…¥æ“ä½œï¼Œ  å¦‚ä½•è¦†å¯«ç¡¬ç¢Ÿä¸Šçš„é é¢ä»¥åŠå¦‚ä½•è™•ç†æ‹†åˆ†é é¢ç­‰æƒ…æ³ã€‚  è¨è«–äº†é å¯«å¼æ—¥èªŒï¼ˆWALï¼‰æª”æ¡ˆä»¥åŠä½µç™¼æ§åˆ¶çš„å•é¡Œã€‚  æ—¥èªŒçµæ§‹åŒ–çš„æ–¹æ³•ç›¸å°æ–¼ B æ¨¹çš„å„ªå‹¢ã€‚  B æ¨¹çš„åŸºæœ¬å¯«å…¥æ“ä½œæ˜¯ç”¨æ–°è³‡æ–™è¦†å¯«ç¡¬ç¢Ÿä¸Šçš„é é¢ï¼Œè€Œä¸æœƒæ”¹è®Šé é¢çš„ä½ç½®ã€‚é€™è¡¨ç¤ºç•¶é é¢è¢«è¦†å¯«æ™‚ï¼Œå°è©²é é¢çš„æ‰€æœ‰å¼•ç”¨ä¸æœƒæ”¹è®Šã€‚é€™èˆ‡æ—¥èªŒçµæ§‹ç´¢å¼•ï¼ˆå¦‚ LSM æ¨¹ï¼‰å½¢æˆé®®æ˜å°æ¯”ï¼Œå¾Œè€…åªæ˜¯è¿½åŠ åˆ°æª”æ¡ˆï¼Œå¾ä¸ä¿®æ”¹æª”æ¡ˆä¸­å·²æœ‰çš„å…§å®¹ã€‚  è¦†å¯«ç¡¬ç¢Ÿä¸Šçš„é é¢å°±åƒå°å¯¦éš›ç¡¬é«”é€²è¡Œæ“ä½œã€‚åœ¨ç£æ€§ç¡¬ç¢Ÿé©…å‹•å™¨ä¸Šï¼Œé€™æ„å‘³è‘—å°‡ç£é ­ç§»å‹•åˆ°æ­£ç¢ºçš„ä½ç½®ï¼Œç­‰å¾…æ—‹è½‰ç›¤ä¸Šçš„æ­£ç¢ºä½ç½®å‡ºç¾ï¼Œç„¶å¾Œç”¨æ–°çš„è³‡æ–™è¦†å¯«é©ç•¶çš„æ‰‡å€ã€‚å›ºæ…‹ç¡¬ç¢Ÿä¸Šï¼Œç”±æ–¼ SSD å¿…é ˆä¸€æ¬¡æ“¦é™¤å’Œé‡å¯«ç›¸ç•¶å¤§çš„å„²å­˜æ™¶ç‰‡å¡Šï¼Œå› æ­¤æœƒç™¼ç”Ÿæ›´è¤‡é›œçš„äº‹æƒ…ã€‚  æœ‰æ™‚å€™ï¼Œéœ€è¦è¦†å¯«å¤šå€‹ä¸åŒçš„é é¢ã€‚ä¾‹å¦‚ï¼Œå› ç‚ºæ’å…¥å°è‡´é é¢éæ»¿è€Œæ‹†åˆ†é é¢ï¼Œå‰‡éœ€è¦å¯«å…¥æ–°æ‹†åˆ†çš„å…©å€‹é é¢ï¼Œä¸¦è¦†å¯«å…¶çˆ¶é é¢ä»¥æ›´æ–°å°å…©å€‹å­é é¢çš„å¼•ç”¨ã€‚é€™æ˜¯ä¸€å€‹å±éšªçš„æ“ä½œï¼Œå› ç‚ºå¦‚æœè³‡æ–™åº«åœ¨ç³»åˆ—æ“ä½œé€²è¡Œåˆ°ä¸€åŠæ™‚å´©æ½°ï¼Œé‚£éº¼æœ€çµ‚å°‡å°è‡´ä¸€å€‹æå£çš„ç´¢å¼•ã€‚  B æ¨¹å¯¦ç¾ä¸­é€šå¸¸æœƒæœ‰é å¯«å¼æ—¥èªŒï¼ˆWALï¼Œå³ write-ahead logï¼Œä¹Ÿç¨±ç‚ºé‡åšæ—¥èªŒï¼‰æª”æ¡ˆï¼Œä»¥è™•ç†ç•°å¸¸å´©æ½°çš„æƒ…æ³ã€‚æ¯æ¬¡å° B æ¨¹çš„ä¿®æ”¹éƒ½å¿…é ˆå…ˆå¯«å…¥è©²æª”æ¡ˆï¼Œç„¶å¾Œæ‰èƒ½æ‡‰ç”¨åˆ°æ¨¹æœ¬èº«çš„é é¢ã€‚ç•¶è³‡æ–™åº«åœ¨å´©æ½°å¾Œæ¢å¾©æ™‚ï¼Œé€™å€‹æ—¥èªŒå°‡è¢«ç”¨ä¾†ä½¿ B æ¨¹æ¢å¾©åˆ°ä¸€è‡´çš„ç‹€æ…‹ã€‚  ç•¶å¤šå€‹åŸ·è¡Œç·’è¦åŒæ™‚è¨ªå• B æ¨¹æ™‚ï¼Œé‚„éœ€è¦ä»”ç´°çš„ä½µç™¼æ§åˆ¶ï¼Œå¦å‰‡åŸ·è¡Œç·’å¯èƒ½æœƒçœ‹åˆ°æ¨¹è™•æ–¼ä¸ä¸€è‡´çš„ç‹€æ…‹ã€‚é€šå¸¸æ˜¯é€éä½¿ç”¨é–å­˜å™¨ï¼ˆlatchesï¼Œè¼•é‡ç´šé–ï¼‰ä¿è­·æ¨¹çš„è³‡æ–™çµæ§‹ä¾†å®Œæˆã€‚æ—¥èªŒçµæ§‹åŒ–çš„æ–¹æ³•åœ¨é€™æ–¹é¢æ›´ç°¡å–®ï¼Œå› ç‚ºå®ƒå€‘åœ¨å¾Œè‡ºé€²è¡Œæ‰€æœ‰çš„åˆä½µï¼Œä¸å¹²æ“¾æ–°æ¥æ”¶åˆ°çš„æŸ¥è©¢ï¼Œä¸¦ä¸”èƒ½å¤ æ™‚ä¸æ™‚åœ°å°‡æ®µæª”æ¡ˆåˆ‡æ›ç‚ºæ–°çš„ï¼ˆè©²åˆ‡æ›æ˜¯åŸå­æ“ä½œï¼‰ã€‚  Bæ¨¹çš„æœ€ä½³åŒ–  Bæ¨¹å­˜åœ¨å·²ä¹…ï¼Œå¤šå¹´ä¾†å·²é–‹ç™¼å‡ºè¨±å¤šå„ªåŒ–è¨­è¨ˆï¼ŒåŒ…æ‹¬ï¼š   ä½¿ç”¨å¯«æ™‚è¤‡è£½æ–¹æ¡ˆï¼Œä¾‹å¦‚LMDBï¼Œè€Œéè¦†å¯«é é¢ä¸¦ç¶­è­·WALä»¥æ”¯æ´å´©æ½°æ¢å¾©ã€‚ç¶“ä¿®æ”¹çš„é é¢è¢«å¯«å…¥ä¸åŒä½ç½®ï¼Œä¸¦åœ¨æ¨¹ä¸­å»ºç«‹çˆ¶é é¢çš„æ–°ç‰ˆæœ¬ä»¥æŒ‡å‘æ–°ä½ç½®ã€‚é€™ç¨®æ–¹æ³•å°æ–¼ä½µç™¼æ§åˆ¶ä¹Ÿå¾ˆæœ‰ç”¨ã€‚  ç¸®çŸ­éµçš„å¤§å°ï¼Œè€Œéå„²å­˜æ•´å€‹éµï¼Œä»¥ç¯€çœé é¢ç©ºé–“ã€‚åœ¨æ¨¹å…§éƒ¨çš„é é¢ä¸Šï¼Œéµåªéœ€æä¾›è¶³å¤ çš„è³‡è¨Šä¾†å……ç•¶éµç¯„åœä¹‹é–“çš„é‚Šç•Œã€‚åœ¨é é¢ä¸­åŒ…å«æ›´å¤šçš„éµå…è¨±æ¨¹å…·æœ‰æ›´é«˜çš„åˆ†æ”¯å› å­ï¼Œå› æ­¤ä¹Ÿå°±å…è¨±æ›´å°‘çš„å±¤ç´šã€‚  ä¸è¦æ±‚ç›¸é„°éµç¯„åœçš„é é¢ä¹Ÿæ”¾åœ¨ç¡¬ç¢Ÿä¸Šç›¸é„°çš„å€åŸŸï¼Œä½†é€™æ¨£éš¨æ©Ÿå­˜å–çš„é€Ÿåº¦å¾ˆæ…¢ã€‚å› æ­¤ï¼Œè¨±å¤šBæ¨¹çš„å¯¦ç¾åœ¨ä½ˆå±€æ¨¹æ™‚æœƒç›¡é‡ä½¿è‘‰å­é é¢æŒ‰é †åºå‡ºç¾åœ¨ç¡¬ç¢Ÿä¸Šï¼Œä½†éš¨è‘—æ¨¹çš„å¢é•·ï¼Œè¦ç¶­æŒé€™å€‹é †åºæ˜¯å¾ˆå›°é›£çš„ã€‚  æ–°å¢æŒ‡æ¨™åˆ°æ¨¹ä¸­ï¼Œä¾‹å¦‚æ¯å€‹è‘‰å­é é¢å¼•ç”¨å…¶å·¦å³å…„å¼Ÿé é¢ï¼Œä½¿å¾—ä¸ç”¨è·³å›çˆ¶é é¢å³å¯æŒ‰é †åºæƒæéµã€‚  Bæ¨¹çš„è®Šé«”å¦‚åˆ†å½¢æ¨¹å€Ÿç”¨äº†ä¸€äº›æ—¥èªŒçµæ§‹çš„æ€æƒ³ä¾†æ¸›å°‘ç¡¬ç¢ŸæŸ¥è©¢ã€‚  æ¯”è¼ƒBæ¨¹å’ŒLSMæ¨¹   é€šå¸¸ï¼ŒLSMæ¨¹çš„å¯«å…¥é€Ÿåº¦è¼ƒå¿«ï¼ŒBæ¨¹çš„è®€å–é€Ÿåº¦è¼ƒå¿«ã€‚  LSMæ¨¹å…·æœ‰è¼ƒé«˜çš„å¯«å…¥ååé‡ï¼Œè¼ƒä½çš„å¯«æ”¾å¤§å’Œç¢ç‰‡ï¼Œå°å›ºæ…‹ç¡¬ç¢Ÿè¼ƒç‚ºå‹å¥½ã€‚  LSMæ¨¹å¯èƒ½åœ¨å£“ç¸®éç¨‹ä¸­å¹²æ“¾è®€å¯«æ“ä½œï¼Œä¸”åœ¨é«˜å¯«å…¥ååé‡ä¸‹å£“ç¸®æ€§èƒ½å—é™  Bæ¨¹ç‚ºè¨±å¤šå·¥ä½œè² è¼‰æä¾›äº†å§‹çµ‚å¦‚ä¸€çš„è‰¯å¥½æ•ˆèƒ½ï¼Œä¸¦é©ç”¨æ–¼äº‹å‹™éš”é›¢ç­‰æ‡‰ç”¨ã€‚  Bæ¨¹å’ŒLSMæ¨¹çš„æ¯”è¼ƒä¸­ï¼ŒBæ¨¹å¯¦ç¾é€šå¸¸è¼ƒç‚ºæˆç†Ÿï¼Œä½†LSMæ¨¹åœ¨æ•ˆèƒ½ç‰¹å¾µæ–¹é¢ä¹Ÿå¾ˆæœ‰å¸å¼•åŠ›ã€‚ç¶“é©—è¡¨æ˜ï¼ŒLSMæ¨¹çš„å¯«å…¥é€Ÿåº¦é€šå¸¸æ›´å¿«ï¼Œè€ŒBæ¨¹çš„è®€å–é€Ÿåº¦æ›´å¿«ã€‚LSMæ¨¹ä¸Šçš„è®€å–ç›¸å°è¼ƒæ…¢ï¼Œå› ç‚ºéœ€è¦æª¢æŸ¥å¤šå€‹è³‡æ–™çµæ§‹å’ŒSSTablesçš„ä¸åŒå£“ç¸®å±¤ç´šã€‚  ç„¶è€Œï¼ŒåŸºæº–æ¸¬è©¦çµæœé€šå¸¸å–æ±ºæ–¼å·¥ä½œè² è¼‰ç´°ç¯€ï¼Œæ‰€ä»¥éœ€è¦é‡å°ç‰¹å®šå·¥ä½œè² è¼‰é€²è¡Œæ¸¬è©¦ä»¥é€²è¡Œæœ‰æ•ˆæ¯”è¼ƒã€‚åœ¨è©•ä¼°å„²å­˜å¼•æ“æ•ˆèƒ½æ™‚ï¼Œéœ€è¦è€ƒæ…®å¹¾å€‹å› ç´ ã€‚  LSMæ¨¹å…·æœ‰æ›´é«˜å¯«å…¥ååé‡ã€è¼ƒä½çš„å¯«å…¥æ”¾å¤§å’Œç¢ç‰‡åŒ–ï¼Œä¸¦ä¸”å¯ä»¥å°‡è³‡æ–™å£“ç¸®å¾—æ›´å¥½ï¼Œå› æ­¤åœ¨ç¡¬ç¢Ÿä¸Šç”¢ç”Ÿçš„æª”æ¡ˆè¼ƒå°ã€‚ä¸éï¼Œå£“ç¸®éç¨‹å¯èƒ½å¹²æ“¾åˆ°æ­£åœ¨é€²è¡Œçš„è®€å¯«æ“ä½œï¼Œå°è‡´æ€§èƒ½æ³¢å‹•å’Œè¼ƒé«˜çš„éŸ¿æ‡‰æ™‚é–“ã€‚åœ¨é«˜å¯«å…¥ååé‡ä¸‹ï¼Œå£“ç¸®æ€§èƒ½å¯èƒ½å—é™ï¼Œå°è‡´ç¡¬ç¢Ÿä¸Šæœªåˆä½µæ®µçš„æ•¸é‡ä¸æ–·å¢åŠ ï¼Œå¾è€Œå½±éŸ¿è®€å–é€Ÿåº¦ã€‚  Bæ¨¹çš„å„ªå‹¢åœ¨æ–¼æ¯å€‹éµåœ¨ç´¢å¼•ä¸­åªå­˜åœ¨ä¸€å€‹ä½ç½®ï¼Œä¸¦ä¸”é€šå¸¸å…·æœ‰è¼ƒå¿«çš„è®€å–é€Ÿåº¦ã€‚æ­¤å¤–ï¼ŒBæ¨¹åœ¨éœ€è¦å¼·å¤§äº‹å‹™èªç¾©çš„è³‡æ–™åº«ä¸­éå¸¸é©ç”¨ï¼Œå› ç‚ºå¯ä»¥ç›´æ¥åœ¨Bæ¨¹ç´¢å¼•ä¸­çš„éµç¯„åœä¸Šæ‡‰ç”¨é–ã€‚ç„¶è€Œï¼ŒBæ¨¹å¯èƒ½å…·æœ‰æ›´é«˜çš„å¯«å…¥æ”¾å¤§å’Œç¢ç‰‡åŒ–ï¼Œå°è‡´ç£ç¢Ÿç©ºé–“ä½¿ç”¨å¢åŠ å’Œå¯«å…¥ååé‡é™ä½ã€‚  Bæ¨¹åœ¨è³‡æ–™åº«æ¶æ§‹ä¸­å…·æœ‰æ·±åšåŸºç¤ï¼Œè€ŒLSMæ¨¹åœ¨æ–°å‹è³‡æ–™åº«ä¸­è¶Šä¾†è¶Šå—æ­¡è¿ã€‚è¦ç¢ºå®šå“ªç¨®å„²å­˜å¼•æ“æœ€é©åˆç‰¹å®šä½¿ç”¨å ´æ™¯ï¼Œéœ€è¦æ ¹æ“šå¯¦éš›å·¥ä½œè² è¼‰é€²è¡Œæ¸¬è©¦ã€‚  å…¶ä»–ç´¢å¼•çµæ§‹  åè©è§£é‡‹   ä¸»éµç´¢å¼•ï¼šåœ¨é—œè¯å¼è³‡æ–™åº«ã€æ–‡ä»¶è³‡æ–™åº«æˆ–åœ–å½¢è³‡æ–™åº«ä¸­ï¼Œä¸»éµå”¯ä¸€è­˜åˆ¥ä¸€è¡Œã€ä¸€å€‹æ–‡æª”æˆ–ä¸€å€‹é ‚é»ã€‚å…¶ä»–ç´€éŒ„å¯ä»¥é€šéä¸»éµï¼ˆæˆ–IDï¼‰å¼•ç”¨è©²è¡Œ/æ–‡æª”/é ‚é»ï¼Œç´¢å¼•ç”¨æ–¼è§£æé€™äº›å¼•ç”¨ã€‚  æ¬¡ç´šç´¢å¼•ï¼šå…è¨±åœ¨è³‡æ–™åº«è¡¨æ ¼ä¸Šå»ºç«‹é¡å¤–çš„ç´¢å¼•ï¼Œä»¥æé«˜æŸ¥è©¢æ€§èƒ½ã€‚æ¬¡è¦ç´¢å¼•å¯ä»¥å¾éµå€¼ç´¢å¼•æ§‹å»ºï¼Œä¸»è¦å€åˆ¥åœ¨æ–¼éµä¸æ˜¯å”¯ä¸€çš„ã€‚é€™å¯ä»¥é€šéä½¿ç´¢å¼•ä¸­çš„æ¯å€‹å€¼æˆç‚ºåŒ¹é…è¡Œæ¨™è­˜ç¬¦çš„åˆ—è¡¨æˆ–é€šéå°‡è¡Œæ¨™è­˜ç¬¦é™„åŠ åˆ°éµä¸Šä½¿å…¶å”¯ä¸€ä¾†è§£æ±ºã€‚  heap fileï¼šå­˜å„²è¡Œæ•¸æ“šçš„ç„¡ç‰¹å®šé †åºçš„æ–‡ä»¶ã€‚å †æ–‡ä»¶é¿å…äº†å¤šå€‹æ¬¡è¦ç´¢å¼•å­˜åœ¨æ™‚çš„æ•¸æ“šé‡è¤‡å•é¡Œï¼šæ¯å€‹ç´¢å¼•åƒ…å¼•ç”¨å †æ–‡ä»¶ä¸­çš„ä½ç½®ï¼Œå¯¦éš›æ•¸æ“šå­˜å„²åœ¨ä¸€å€‹åœ°æ–¹ã€‚  Clustered ç´¢å¼•ï¼šå°‡ç´¢å¼•è¡Œç›´æ¥å­˜å„²åœ¨ç´¢å¼•ä¸­çš„ä¸€ç¨®æ–¹æ³•ï¼Œå¯ä»¥æé«˜æŸ¥è©¢æ€§èƒ½ã€‚ä¾‹å¦‚ï¼ŒMySQLçš„InnoDBå­˜å„²å¼•æ“ä¸­ï¼Œè¡¨çš„ä¸»éµå§‹çµ‚æ˜¯èšç°‡ç´¢å¼•ï¼Œæ¬¡è¦ç´¢å¼•å¼•ç”¨ä¸»éµï¼ˆè€Œä¸æ˜¯å †æ–‡ä»¶ä½ç½®ï¼‰ã€‚  åŒ…å«åˆ—çš„ç´¢å¼•ï¼šClustered and non clustered index çš„éæ¸¡ï¼Œåªä¿å­˜éƒ¨ä»½éœ€è¦ç”¨åˆ°çš„è³‡æ–™  å¤šåˆ—ç´¢å¼•ï¼šåŒæ™‚æŸ¥è©¢å¤šå€‹è¡¨åˆ—æˆ–æ–‡æª”å­—æ®µçš„ç´¢å¼•ã€‚é€™å°æ–¼éœ€è¦æ ¹æ“šå¤šå€‹æ¢ä»¶æŸ¥æ‰¾æ•¸æ“šçš„æƒ…æ³éå¸¸æœ‰ç”¨ã€‚  ä¸²æ¥ç´¢å¼•ï¼šå°‡å¤šå€‹å­—æ®µçµ„åˆæˆä¸€å€‹éµçš„å¤šåˆ—ç´¢å¼•ã€‚ä¸²æ¥ç´¢å¼•çš„éµæ˜¯æŒ‰ç…§æŒ‡å®šçš„é †åºå°‡å­—æ®µé™„åŠ åœ¨ä¸€èµ·çš„ã€‚å®ƒå¯ä»¥ç”¨ä¾†æŸ¥æ‰¾å…·æœ‰ç‰¹å®šæ¢ä»¶çš„æ‰€æœ‰æ•¸æ“šï¼Œä½†å¦‚æœåªæŸ¥è©¢å…¶ä¸­ä¸€å€‹å­—æ®µï¼Œå®ƒå¯èƒ½ç„¡æ³•æä¾›å¹«åŠ©ã€‚  å¤šç¶­ç´¢å¼•ï¼šç”¨æ–¼æŸ¥è©¢å¤šå€‹åˆ—çš„ä¸€èˆ¬æ–¹æ³•ï¼Œç‰¹åˆ¥é©ç”¨æ–¼åœ°ç†ç©ºé–“æ•¸æ“šã€‚  Ræ¨¹ï¼šå°ˆé–€ç”¨æ–¼åœ°ç†ç©ºé–“æ•¸æ“šçš„ç©ºé–“ç´¢å¼•ã€‚  å…¨æ–‡æœç´¢ï¼šç”¨æ–¼æ¨¡ç³ŠæŸ¥è©¢çš„æŠ€è¡“ï¼Œæ”¯æŒå°è©å½™ã€èªæ³•è®ŠåŒ–å’Œè¿‘ç¾©è©ç­‰é€²è¡Œæœç´¢ã€‚  ç›®å‰ï¼Œæˆ‘å€‘åªè¨è«–äº†éµå€¼ç´¢å¼•ï¼Œå®ƒå€‘å°±åƒé—œä¿‚æ¨¡å‹ä¸­çš„   ä¸»éµç´¢å¼• ã€‚  æ¬¡ç´šç´¢å¼•ï¼ˆsecondary indexesï¼‰ä¹Ÿå¾ˆå¸¸è¦‹ã€‚åœ¨é—œä¿‚è³‡æ–™åº«ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨   CREATE INDEX  å‘½ä»¤åœ¨åŒä¸€å€‹è¡¨ä¸Šå»ºç«‹å¤šå€‹æ¬¡ç´šç´¢å¼•ã€‚  å„²å­˜Index ä¸­çš„å€¼  ç´¢å¼•çš„éµæ˜¯æŸ¥è©¢æ¬„ä½ï¼Œè€Œå€¼å¯ä»¥æ˜¯è¡Œæœ¬èº«æˆ–æ˜¯å„²å­˜åœ¨åˆ¥è™•è¡Œçš„åƒç…§ã€‚å¾Œè€…å„²å­˜åœ¨ heap file ä¸­  heap file è³‡æ–™æ²’æœ‰ç‰¹å®šé †åºï¼Œé€™ç¨®æ–¹æ³•å¸¸è¦‹ï¼Œå› ç‚ºå¯ä»¥é¿å…åœ¨æœ‰å¤šå€‹æ¬¡ç´š index æ™‚è¤‡è£½è³‡æ–™ã€‚  Clustered Index å°‡æ•´å€‹è³‡æ–™åˆ—çš„æ‰€æœ‰è³‡æ–™å­˜å…¥ç´¢å¼•ä¸­ï¼ŒæŸ¥è©¢å¯ç›´æ¥åœ¨ç´¢å¼•æ¨¹ä¸Šå®Œæˆï¼Œé€Ÿåº¦è¼ƒå¿«ï¼Œä½†åªèƒ½å»ºç«‹åœ¨å”¯ä¸€çš„éµä¸Šã€‚ç›¸ååœ°ï¼Œéèšé›†å¼ index å°‡ç´¢å¼•è³‡æ–™å­˜å…¥ç´¢å¼•æ¨¹ä¸­ï¼Œè€Œå°‡è³‡æ–™åˆ—æ”¾ç½®åœ¨å¦ä¸€å€‹æ–‡ä»¶ä¸­ï¼Œå› æ­¤æŸ¥è©¢éœ€è¦å…ˆåœ¨ç´¢å¼•æ¨¹ä¸Šå®Œæˆï¼Œå†åˆ°æ–‡ä»¶ä¸­æŸ¥è©¢è³‡æ–™åˆ—ã€‚  cover index ä»‹æ–¼ clustered index and non clustered index ä¹‹é–“ï¼ŒåŒ…å«æŸ¥è©¢æ‰€éœ€çš„æ‰€æœ‰æ¬„ä½ï¼Œå¯ä¸å¿…æŸ¥è©¢è¡¨æ ¼æœ¬èº«å³å¯å›ç­”æŸ¥è©¢ï¼Œå› æ­¤å¯å¤§å¹…æé«˜æŸ¥è©¢æ€§èƒ½ã€‚  å¤šåˆ— index  åˆå«è¤‡åˆ indexï¼Œå°æŸ¥è©¢æœ‰å¤šç¨®æ¢ä»¶æ™‚ï¼Œèƒ½åŠ é€Ÿï¼Œè¦æ³¨æ„ key çš„é †åºæ˜¯é‡è¦çš„ï¼Œå’Œä¸‹ where æ¬„ä½çš„é †åºä¸€è‡´çš„è©±ï¼ŒæŸ¥è©¢æ˜¯æœ€å¿«çš„ã€‚  å¤šç¶­ index  ç”¨æ–¼åŠ é€Ÿå¤šç¶­è³‡æ–™çš„æŸ¥è©¢ï¼Œä¾‹å¦‚å¸¶æœ‰æ™‚é–“å’Œåœ°é»å…©å€‹ç¶­åº¦çš„å¤©æ°£è³‡æ–™ã€‚å®ƒé€šå¸¸ä½¿ç”¨ R æ¨¹è³‡æ–™çµæ§‹ä¾†å¯¦ç¾ï¼Œå…·æœ‰é«˜æ•ˆçš„ç¯„åœæŸ¥è©¢å’Œç©ºé–“æŸ¥è©¢åŠŸèƒ½ã€‚åœ¨è¨­è¨ˆå¤šç¶­ index æ™‚ï¼Œå¿…é ˆä»”ç´°é¸æ“‡ç´¢å¼•çš„ç¶­åº¦ï¼Œä»¥ä¾¿åœ¨æŸ¥è©¢æ™‚ç²å¾—æœ€ä½³æ•ˆèƒ½ã€‚  B æ¨¹æˆ– LSM æ¨¹ç´¢å¼•ç„¡æ³•é«˜æ•ˆè™•ç†é€™ç¨®æŸ¥è©¢ï¼šå®ƒå¯ä»¥è¿”å›ä¸€å€‹ç¶“åº¦ç¯„åœå…§çš„æ‰€æœ‰é¤å»³ï¼ˆä½†ç·¯åº¦å¯èƒ½æ˜¯ä»»æ„å€¼ï¼‰ï¼Œæˆ–è€…è¿”å›åœ¨åŒä¸€ç·¯åº¦ç¯„åœå…§çš„æ‰€æœ‰é¤å»³ï¼ˆä½†ç¶“åº¦å¯èƒ½æ˜¯ä»»æ„å€¼ï¼‰ï¼Œä½†ä¸èƒ½åŒæ™‚æ»¿è¶³å…©å€‹æ¢ä»¶ã€‚  å…¨æ–‡æœå°‹å’Œæ¨¡ç³Šç´¢å¼•  åˆ°ç›®å‰ç‚ºæ­¢æ‰€è¨è«–çš„æ‰€æœ‰ç´¢å¼•éƒ½å‡å®šä½ æœ‰ç¢ºåˆ‡çš„è³‡æ–™ï¼Œä¸¦å…è¨±ä½ æŸ¥è©¢éµçš„ç¢ºåˆ‡å€¼æˆ–å…·æœ‰æ’åºé †åºçš„éµçš„å€¼ç¯„åœã€‚ä»–å€‘ä¸å…è¨±ä½ åšçš„æ˜¯æœå°‹  é¡ä¼¼ çš„éµï¼Œå¦‚æ‹¼å¯«éŒ¯èª¤çš„å–®è©ã€‚é€™ç¨®æ¨¡ç³Šçš„æŸ¥è©¢éœ€è¦ä¸åŒçš„æŠ€è¡“ï¼Œå¦‚å…¨æ–‡æœå°‹å¼•æ“ç­‰ã€‚å…¨æ–‡æœå°‹å¼•æ“å…è¨±ç”¨æˆ¶æœç´¢ç›¸ä¼¼çš„éµï¼Œè€Œä¸åƒ…åƒ…æ˜¯ç¢ºåˆ‡çš„éµå€¼ã€‚  æ¨¡ç³Šç´¢å¼•ï¼ˆfuzzy indexesï¼‰é¡ä¼¼æ–¼å…¨æ–‡æœå°‹ï¼Œä½†å…è¨±åœ¨æŸ¥è©¢éç¨‹ä¸­åŒ…å«è¿‘ä¼¼åŒ¹é…ï¼Œä»¥è™•ç†æ‹¼å¯«éŒ¯èª¤ã€æ‹¼éŸ³ç›¸ä¼¼æ€§ç­‰å•é¡Œã€‚ç‚ºå¯¦ç¾æ¨¡ç³Šç´¢å¼•ï¼Œå¯ä»¥ä½¿ç”¨åƒLevenshteinè·é›¢ã€Damerau-Levenshteinè·é›¢å’ŒJaro-Winklerè·é›¢ç­‰ç·¨è¼¯è·é›¢åº¦é‡ï¼Œæˆ–ä½¿ç”¨å¦‚ä¸‰å…ƒçµ„æˆ–å››å…ƒçµ„çš„n-gramæ–¹æ³•ä¾†åº¦é‡ç›¸ä¼¼æ€§ã€‚   åœ¨è¨˜æ†¶é«”ä¸­å„²å­˜ä¸€åˆ‡  è¨˜æ†¶é«”è³‡æ–™åº«åœ¨æ•ˆèƒ½ã€è³‡æ–™æ¨¡å‹å’Œæ“´å±•æ€§æ–¹é¢å…·æœ‰å„ªå‹¢ï¼š   æ•ˆèƒ½ï¼šè¨˜æ†¶é«”è³‡æ–™åº«é€šéç›´æ¥å¾è¨˜æ†¶é«”è®€å–å’Œå¯«å…¥è³‡æ–™ï¼Œå¯ä»¥æä¾›æ›´é«˜çš„è®€å¯«é€Ÿåº¦ï¼Œå¾è€Œæé«˜æ•´é«”æ•ˆèƒ½ã€‚é€™æ¯”å‚³çµ±çš„åŸºæ–¼ç¡¬ç¢Ÿçš„è³‡æ–™åº«æ›´å¿«ï¼Œå› ç‚ºå¾Œè€…éœ€è¦åœ¨ç¡¬ç¢Ÿä¸ŠæŸ¥æ‰¾å’Œæ“ä½œè³‡æ–™ï¼Œé€™æœƒæ¶ˆè€—æ›´å¤šçš„æ™‚é–“ã€‚  è³‡æ–™æ¨¡å‹ï¼šè¨˜æ†¶é«”è³‡æ–™åº«å¯ä»¥è¼ƒå®¹æ˜“åœ°æ”¯æ´å¤šç¨®è³‡æ–™çµæ§‹ï¼ˆå¦‚å„ªå…ˆé †åºä½‡åˆ—å’Œé›†åˆï¼‰ï¼Œå¾è€Œæä¾›æ›´å¥½çš„æ‡‰ç”¨æ”¯æ´ã€‚é€™ä½¿å¾—é–‹ç™¼äººå“¡å¯ä»¥æ›´éˆæ´»åœ°è¨­è¨ˆå’Œå¯¦ç¾è³‡æ–™æ¨¡å‹ï¼Œä»¥æ»¿è¶³ä¸åŒçš„æ‡‰ç”¨éœ€æ±‚ã€‚  æ“´å±•æ€§ï¼šè¨˜æ†¶é«”è³‡æ–™åº«å¯ä»¥é€šéåå¿«å–æ–¹æ³•åœ¨è¨˜æ†¶é«”ä¸è¶³çš„æƒ…æ³ä¸‹å°‡æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„è³‡æ–™å¾è¨˜æ†¶é«”è½‰ç§»åˆ°ç¡¬ç¢Ÿï¼Œä¸¦åœ¨éœ€è¦æ™‚é‡æ–°å°‡å…¶è¼‰å…¥åˆ°è¨˜æ†¶é«”ä¸­ã€‚é€™ä½¿å¾—è¨˜æ†¶é«”è³‡æ–™åº«èƒ½å¤ æ”¯æ´æ¯”å¯ç”¨è¨˜æ†¶é«”æ›´å¤§çš„è³‡æ–™é›†ï¼ŒåŒæ™‚ä¿æŒé«˜æ•ˆèƒ½ã€‚  éš¨è‘— RAM æˆæœ¬çš„é™ä½ï¼Œå°‡è³‡æ–™é›†å®Œå…¨å„²å­˜åœ¨è¨˜æ†¶é«”ä¸­è®Šå¾—æ›´åŠ å¯è¡Œã€‚æ­¤å¤–ï¼Œéæ˜“å¤±æ€§å„²å­˜å™¨ï¼ˆNVMï¼‰æŠ€è¡“çš„ç™¼å±•æœ‰æœ›ç‚ºæœªä¾†çš„è³‡æ–™å­˜å„²å¸¶ä¾†é‡å¤§è®Šé©ï¼Œå› ç‚ºå®ƒå€‘çµåˆäº†è¨˜æ†¶é«”å’Œç¡¬ç¢Ÿçš„ç‰¹é»ï¼Œä¸¦å¯ä»¥åœ¨ä¸åŒçš„æ‡‰ç”¨å ´æ™¯ä¸­æä¾›æ›´å¥½çš„æ€§èƒ½ã€‚  ç¸½ä¹‹ï¼Œè¨˜æ†¶é«”è³‡æ–™åº«åœ¨è³‡æ–™åº«é ˜åŸŸå…·æœ‰é¡¯è‘—å„ªå‹¢ï¼Œç‰¹åˆ¥æ˜¯åœ¨è™•ç†è¼ƒå°è³‡æ–™é›†æ™‚ã€‚éš¨è‘— RAM æˆæœ¬é™ä½å’Œéæ˜“å¤±æ€§å„²å­˜å™¨æŠ€è¡“çš„ç™¼å±•ï¼Œè¨˜æ†¶é«”è³‡æ–™åº«å°‡åœ¨è³‡æ–™åº«é ˜åŸŸç™¼æ®è¶Šä¾†è¶Šé‡è¦çš„ä½œç”¨ã€‚   äº‹å‹™è™•ç†é‚„æ˜¯åˆ†æï¼Ÿ  æ—©æœŸè³‡æ–™åº«å¯«å…¥å°æ‡‰å•†æ¥­äº¤æ˜“ã€‚å¾Œä¾†è³‡æ–™åº«æ‡‰ç”¨æ–¼éé‡‘éŒ¢ç›¸é—œé ˜åŸŸï¼Œä»ä½¿ç”¨\"äº‹å‹™\"ä¸€è©ã€‚äº‹å‹™è™•ç†å…è¨±å®¢æˆ¶ç«¯ä½å»¶é²è®€å¯«ï¼Œç¨±ç‚ºç·šä¸Šäº‹å‹™è™•ç†ï¼ˆOLTPï¼‰ã€‚  è³‡æ–™åº«è¶Šä¾†è¶Šå¤šåœ°ç”¨æ–¼è³‡æ–™åˆ†æï¼Œé€™äº›åˆ†ææŸ¥è©¢è¢«ç¨±ç‚ºç·šä¸Šåˆ†æè™•ç†ï¼ˆOLAPï¼‰ã€‚OLTPä¸»è¦æ˜¯æŸ¥è©¢å°‘é‡è¨˜éŒ„ï¼Œçµ‚ç«¯ä½¿ç”¨è€…æ“ä½œã€‚OLAPå‰‡ä¸»è¦åœ¨å¤§æ‰¹æ¬¡è¨˜éŒ„ä¸Šèšåˆï¼Œä¾›å…§éƒ¨è³‡æ–™åˆ†æå¸«ä½¿ç”¨ã€‚  èµ·åˆï¼Œäº‹å‹™è™•ç†å’Œåˆ†ææŸ¥è©¢ä½¿ç”¨ç›¸åŒè³‡æ–™åº«ï¼Œä½†ä¼æ¥­è¶¨å‹¢æ˜¯åœ¨å–®ç¨çš„è³‡æ–™å€‰åº«ä¸ŠåŸ·è¡Œåˆ†æã€‚   è¡¨ 3-1 æ¯”è¼ƒäº‹å‹™è™•ç†å’Œåˆ†æç³»çµ±çš„ç‰¹é»     å±¬æ€§  äº‹å‹™è™•ç†ç³»çµ± OLTP  åˆ†æç³»çµ± OLAP    ä¸»è¦è®€å–æ¨¡å¼  æŸ¥è©¢å°‘é‡è¨˜éŒ„ï¼ŒæŒ‰éµè®€å–  åœ¨å¤§æ‰¹æ¬¡è¨˜éŒ„ä¸Šèšåˆ   ä¸»è¦å¯«å…¥æ¨¡å¼  éš¨æ©Ÿè¨ªå•ï¼Œå¯«å…¥è¦æ±‚ä½å»¶æ™‚  æ‰¹æ¬¡åŒ¯å…¥ï¼ˆETLï¼‰æˆ–è€…äº‹ä»¶æµ   ä¸»è¦ä½¿ç”¨è€…  çµ‚ç«¯ä½¿ç”¨è€…ï¼Œé€é Web æ‡‰ç”¨  å…§éƒ¨è³‡æ–™åˆ†æå¸«ï¼Œç”¨æ–¼æ±ºç­–æ”¯æ´   è™•ç†çš„è³‡æ–™  è³‡æ–™çš„æœ€æ–°ç‹€æ…‹ï¼ˆç•¶å‰æ™‚é–“é»ï¼‰  éš¨æ™‚é–“æ¨ç§»çš„æ­·å²äº‹ä»¶   è³‡æ–™é›†å°ºå¯¸  GB ~ TB  TB ~ PB  è³‡æ–™å€‰åº«  è³‡æ–™å€‰åº«æ˜¯ä¸€å€‹ç¨ç«‹çš„è³‡æ–™åº«ï¼Œç”¨æ–¼å„²å­˜ä¼æ¥­å…§æ‰€æœ‰OLTPï¼ˆç·šä¸Šäº‹å‹™è™•ç†ï¼‰ç³»çµ±ä¸­çš„åªè®€è³‡æ–™å‰¯æœ¬ã€‚ä¼æ¥­å¯èƒ½æ“æœ‰å¤šå€‹äº¤æ˜“è™•ç†ç³»çµ±ï¼Œå¦‚çµ‚ç«¯å®¢æˆ¶ç¶²ç«™ã€å¯¦é«”å•†åº—æ”¶éŠ€ç³»çµ±ã€å€‰åº«åº«å­˜è¿½è¸ªç­‰ã€‚é€™äº›OLTPç³»çµ±å°æ¥­å‹™é‹ä½œè‡³é—œé‡è¦ï¼Œè¦æ±‚é«˜å¯ç”¨å’Œä½å»¶é²ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸å…è¨±æ¥­å‹™åˆ†æäººå“¡ç›´æ¥åœ¨é€™äº›è³‡æ–™åº«ä¸ŠåŸ·è¡Œåˆ†ææŸ¥è©¢ã€‚  è³‡æ–™å€‰åº«å…è¨±åˆ†æäººå“¡æŸ¥è©¢è³‡æ–™ï¼Œè€Œä¸å½±éŸ¿OLTPæ“ä½œã€‚è³‡æ–™å€‰åº«å¾OLTPè³‡æ–™åº«ä¸­æå–è³‡æ–™ï¼Œè½‰æ›ç‚ºé©åˆåˆ†æçš„æ ¼å¼ï¼Œç„¶å¾Œè¼‰å…¥è³‡æ–™å€‰åº«ã€‚é€™å€‹éç¨‹ç¨±ç‚ºæŠ½å–-è½‰æ›-è¼‰å…¥ï¼ˆETLï¼‰ã€‚     åœ– 3-8 ETL è‡³è³‡æ–™å€‰åº«çš„ç°¡åŒ–æç¶±  è³‡æ–™å€‰åº«å¯é‡å°åˆ†æé¡çš„è¨ªå•æ¨¡å¼é€²è¡Œæœ€ä½³åŒ–ã€‚é›–ç„¶è³‡æ–™å€‰åº«å’Œé—œä¿‚å‹OLTPè³‡æ–™åº«éƒ½æœ‰SQLæŸ¥è©¢ä»‹é¢ï¼Œä½†å®ƒå€‘é‡å°éå¸¸ä¸åŒçš„æŸ¥è©¢æ¨¡å¼é€²è¡Œæœ€ä½³åŒ–ã€‚è¨±å¤šè³‡æ–™åº«ä¾›æ‡‰å•†å°ˆæ³¨æ–¼æ”¯æ´äº‹å‹™è™•ç†è² è¼‰æˆ–åˆ†æå·¥ä½œè² è¼‰ï¼Œè€Œä¸æ˜¯å…©è€…å…¼é¡§ã€‚  ä¸€äº›è³‡æ–™åº«ï¼ˆå¦‚Microsoft SQL Serverå’ŒSAP HANAï¼‰åœ¨åŒä¸€ç”¢å“ä¸­æ”¯æ´äº‹å‹™è™•ç†å’Œè³‡æ–™å€‰åº«ã€‚é‚„æœ‰ä¸€äº›è³‡æ–™å€‰åº«ä¾›æ‡‰å•†ï¼Œå¦‚Teradataã€Verticaç­‰ï¼Œå®ƒå€‘çš„ç”¢å“é€šå¸¸ä½¿ç”¨æ˜‚è²´çš„å•†æ¥­è¨±å¯è­‰éŠ·å”®ã€‚é–‹æºSQL-on-Hadoopå°ˆæ¡ˆæ­£èˆ‡å•†æ¥­è³‡æ–™å€‰åº«ç³»çµ±ç«¶çˆ­ï¼Œä¾‹å¦‚Apache Hiveã€Spark SQLã€Cloudera Impalaç­‰ã€‚   æ˜Ÿå‹å’Œé›ªèŠ±å‹ï¼šåˆ†æçš„æ¨¡å¼  æ˜Ÿå‹å’Œé›ªèŠ±å‹æ¨¡å¼æ˜¯åˆ†æå‹è³‡æ–™åº«ä¸­å¸¸è¦‹çš„è³‡æ–™æ¨¡å‹ã€‚åœ¨æ˜Ÿå‹æ¨¡å¼ä¸­ï¼Œè³‡æ–™åº«ä¸­å¿ƒæ˜¯ä¸€å€‹äº‹å¯¦è¡¨ï¼Œå®ƒè¨˜éŒ„äº†ç‰¹å®šäº‹ä»¶ï¼ˆä¾‹å¦‚å®¢æˆ¶è³¼è²·çš„ç”¢å“ï¼‰ã€‚äº‹å¯¦è¡¨çš„æ¯ä¸€è¡Œéƒ½åŒ…å«ä¸€å€‹äº‹ä»¶ï¼Œä¸¦é€šéå¤–éƒ¨éµå¼•ç”¨å…¶ä»–è¡¨ï¼ˆç¨±ç‚ºç¶­åº¦è¡¨ï¼‰ã€‚é€™äº›ç¶­åº¦è¡¨åŒ…å«äº†äº‹ä»¶ç™¼ç”Ÿçš„ç‰©ä»¶ã€å…§å®¹ã€åœ°é»ã€æ™‚é–“ã€æ–¹å¼å’ŒåŸå› ç­‰è³‡è¨Šã€‚æ˜Ÿå‹æ¨¡å¼ä¹‹æ‰€ä»¥è¢«ç¨±ç‚ºæ˜Ÿå‹ï¼Œæ˜¯å› ç‚ºç•¶æˆ‘å€‘å°‡è¡¨ä¹‹é–“çš„é—œä¿‚è¦–è¦ºåŒ–æ™‚ï¼Œäº‹å¯¦è¡¨ä½æ–¼ä¸­å¿ƒï¼Œè¢«ç¶­åº¦è¡¨åŒ…åœï¼Œé€£ç·šå°±åƒæ˜Ÿæ˜Ÿçš„å…‰èŠ’ã€‚     åœ– 3-9 ç”¨æ–¼è³‡æ–™å€‰åº«çš„æ˜Ÿå‹æ¨¡å¼çš„ç¤ºä¾‹  é›ªèŠ±æ¨¡å¼æ˜¯æ˜Ÿå‹æ¨¡å¼çš„ä¸€å€‹è®Šé«”ï¼Œå…¶ä¸­ç¶­åº¦è¢«é€²ä¸€æ­¥åˆ†è§£æˆå­ç¶­åº¦ã€‚é€™æ„å‘³è‘—ç¶­åº¦è¡¨å¯ä»¥å†å¼•ç”¨å…¶ä»–è¡¨ï¼Œå°‡è³‡æ–™é€²ä¸€æ­¥ç´°åˆ†ã€‚é›–ç„¶é›ªèŠ±æ¨¡å¼æ¯”æ˜Ÿå‹æ¨¡å¼æ›´è¦ç¯„åŒ–ï¼Œä½†åˆ†æå¸«é€šå¸¸æ›´å–œæ­¡ä½¿ç”¨æ˜Ÿå‹æ¨¡å¼ï¼Œå› ç‚ºå®ƒæ›´ç°¡å–®ã€‚   åˆ—å¼å„²å­˜  åˆ—å¼å­˜å„²æ˜¯ä¸€ç¨®åœ¨è³‡æ–™åº«ä¸­å„²å­˜è³‡æ–™çš„æ–¹å¼ï¼Œå®ƒå°‡è¡¨ä¸­çš„æ¯ä¸€åˆ—è³‡æ–™å­˜å„²åœ¨ä¸€èµ·ï¼Œè€Œä¸æ˜¯å°‡åŒä¸€è¡Œçš„æ‰€æœ‰å€¼ç›¸é„°å­˜å„²ã€‚é€™èˆ‡å¸¸è¦‹çš„è¡Œå¼å­˜å„²æ–¹å¼ä¸åŒï¼Œè¡Œå¼å­˜å„²æ–¹å¼æœƒå°‡è¡¨ä¸­åŒä¸€è¡Œçš„æ‰€æœ‰å€¼ç›¸é„°å­˜å„²ã€‚  åœ¨è³‡æ–™å€‰åº«å’Œå¤§è¦æ¨¡åˆ†ææŸ¥è©¢ä¸­ï¼Œåˆ—å¼å­˜å„²å…·æœ‰æ˜é¡¯å„ªå‹¢ã€‚ç•¶æŸ¥è©¢åªæ¶‰åŠè¡¨ä¸­å°‘æ•¸å¹¾åˆ—æ™‚ï¼Œåˆ—å¼å­˜å„²å¯ä»¥æœ‰æ•ˆåœ°æ¸›å°‘IOæ“ä½œï¼Œæé«˜æŸ¥è©¢æ€§èƒ½ã€‚é€™æ˜¯å› ç‚ºæŸ¥è©¢å¼•æ“åªéœ€è¦è®€å–å’Œè§£ææŸ¥è©¢ä¸­æ¶‰åŠçš„åˆ—ï¼Œè€Œä¸æ˜¯æ•´è¡Œæ•¸æ“šã€‚é€™åœ¨å¤§å‹äº‹å¯¦è¡¨ï¼ˆå¯èƒ½åŒ…å«æ•¸ç™¾åˆ—ï¼‰çš„è³‡æ–™å€‰åº«æŸ¥è©¢ä¸­ç‰¹åˆ¥æœ‰ç”¨ã€‚     åœ– 3-10 æŒ‰åˆ—å„²å­˜é—œä¿‚å‹è³‡æ–™ï¼Œè€Œä¸æ˜¯è¡Œ   åˆ—å£“ç¸®  é€éå£“ç¸®è³‡æ–™ï¼Œé™ä½å°ç¡¬ç¢Ÿååé‡çš„éœ€æ±‚ã€‚åˆ—å¼å„²å­˜é€šå¸¸é©åˆå£“ç¸®ï¼Œå› ç‚ºåœ¨åˆ—å¼å„²å­˜ä¸­ï¼Œæ¯ä¸€åˆ—çš„å€¼åºåˆ—é€šå¸¸å…·æœ‰é‡è¤‡æ€§ï¼Œé€™æœ‰åˆ©æ–¼å£“ç¸®ã€‚æ ¹æ“šåˆ—ä¸­çš„è³‡æ–™ï¼Œå¯ä»¥ä½¿ç”¨ä¸åŒçš„å£“ç¸®æŠ€è¡“ã€‚  é»é™£åœ–ç·¨ç¢¼ï¼šåœ¨è³‡æ–™å€‰åº«ä¸­ç‰¹åˆ¥æœ‰æ•ˆçš„å£“ç¸®æŠ€è¡“ã€‚é»é™£åœ–ç·¨ç¢¼å°‡å…·æœ‰ n å€‹ä¸åŒå€¼çš„åˆ—è½‰æ›ç‚º n å€‹ç¨ç«‹çš„é»é™£åœ–ï¼Œæ¯å€‹ä¸åŒå€¼å°æ‡‰ä¸€å€‹ä½åœ–ï¼Œæ¯è¡Œå°æ‡‰ä¸€å€‹ä½å…ƒä½ã€‚å¦‚æœè©²è¡Œå…·æœ‰è©²å€¼ï¼Œå‰‡è©²ä½ç‚º 1ï¼Œå¦å‰‡ç‚º 0ã€‚     åœ– 3-11 å£“ç¸®çš„é»é™£åœ–ç´¢å¼•å„²å­˜ä½ˆå±€  å°æ–¼ç¨€ç–çš„é»é™£åœ–ï¼ˆå…¶ä¸­åŒ…å«è¨±å¤šé›¶ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨éŠç¨‹ç·¨ç¢¼ï¼ˆä¸€ç¨®ç„¡æè³‡æ–™å£“ç¸®æŠ€è¡“ï¼‰é€²ä¸€æ­¥å£“ç¸®ã€‚é€™å¯ä»¥ä½¿åˆ—çš„ç·¨ç¢¼éå¸¸ç·Šæ¹Šã€‚  è¨˜æ†¶é«”é »å¯¬å’Œå‘é‡åŒ–è™•ç†  è³‡æ–™å€‰åº«æŸ¥è©¢ä¸­ï¼Œå…©å€‹ä¸»è¦æ€§èƒ½ç“¶é ¸ç‚º   ç¡¬ç¢Ÿåˆ°è¨˜æ†¶é«”é »å¯¬  è¨˜æ†¶é«”åˆ°CPUçš„é »å¯¬  è§£æ±ºæ–¹æ³•ï¼š   åˆ—å¼å„²å­˜ä½ˆå±€å¯ä»¥é™ä½å¾ç¡¬ç¢Ÿè¼‰å…¥çš„è³‡æ–™é‡ï¼Œå¾è€Œæé«˜æ•ˆç‡ã€‚  æŸ¥è©¢å¼•æ“å¯ä»¥å°‡å£“ç¸®å¾Œçš„åˆ—è³‡æ–™æ”¾å…¥CPUçš„L1å¿«å–ï¼Œç„¶å¾Œåœ¨ç·Šå¯†çš„è¿´åœˆä¸­éæ­·ã€‚é€™æ¨£çš„è¿´åœˆç›¸å°æ–¼åŒ…å«å¤§é‡å‡½å¼å‘¼å«å’Œæ¢ä»¶åˆ¤æ–·çš„ç¨‹å¼ç¢¼åŸ·è¡Œé€Ÿåº¦æ›´å¿«ã€‚  åˆ—å£“ç¸®å…è¨±æ›´å¤šçš„è¡ŒåŒæ™‚æ”¾å…¥æœ‰é™çš„L1å¿«å–ã€‚  å‘é‡åŒ–è™•ç†æ˜¯ä¸€ç¨®å¯ä»¥ç›´æ¥åœ¨å£“ç¸®åˆ—è³‡æ–™å¡Šä¸Šæ“ä½œçš„æŠ€è¡“ã€‚ä¾‹å¦‚ï¼ŒæŒ‰ä½ \"èˆ‡\" å’Œ \"æˆ–\" é‹ç®—å­å¯ä»¥è¢«è¨­è¨ˆæˆåœ¨å£“ç¸®åˆ—è³‡æ–™å¡Šä¸ŠåŸ·è¡Œã€‚   åˆ—å¼å„²å­˜ä¸­çš„æ’åºé †åº  åˆ—å¼å„²å­˜ä¸­è³‡æ–™æ’åºé †åºçš„æ¦‚å¿µå’Œå…¶å°æŸ¥è©¢æ•ˆç‡çš„å½±éŸ¿ã€‚   åœ¨åˆ—å¼å„²å­˜ä¸­ï¼Œè³‡æ–™çš„è¡Œé †åºä¸æ˜¯éå¸¸é‡è¦ã€‚å¯ä»¥æŒ‰æ’å…¥é †åºå„²å­˜ï¼Œä½†ä¹Ÿå¯ä»¥æ ¹æ“šæŸç¨®æ’åºé †åºæ’åˆ—è³‡æ–™ä»¥ä½œç‚ºç´¢å¼•æ©Ÿåˆ¶ã€‚  å°æ¯ä¸€åˆ—åˆ†åˆ¥é€²è¡Œæ’åºæ˜¯æ²’æœ‰æ„ç¾©çš„ï¼Œå› ç‚ºé€™æ¨£å°±ç„¡æ³•é‡å»ºå‡ºå®Œæ•´çš„è¡Œã€‚æ‰€ä»¥éœ€è¦å°æ•´è¡Œè³‡æ–™é€²è¡Œçµ±ä¸€æ“ä½œï¼Œå³ä½¿å¯¦éš›å„²å­˜æ–¹å¼æ˜¯æŒ‰åˆ—çš„ã€‚  è³‡æ–™åº«ç®¡ç†å“¡å¯ä»¥æ ¹æ“šå¸¸ç”¨æŸ¥è©¢çš„éœ€æ±‚ä¾†é¸æ“‡ç”¨æ–¼æ’åºçš„åˆ—ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæŸ¥è©¢é€šå¸¸æ¶‰åŠæ—¥æœŸç¯„åœï¼Œå‰‡å¯ä»¥ä½¿ç”¨æ—¥æœŸä½œç‚ºç¬¬ä¸€å€‹æ’åºéµï¼Œé€™æ¨£æŸ¥è©¢å¼•æ“åªéœ€æƒæç‰¹å®šæ—¥æœŸç¯„åœçš„è¡Œï¼Œè€Œä¸éœ€è¦æƒææ‰€æœ‰è¡Œã€‚  å°è³‡æ–™é€²è¡Œæ’åºé‚„æœ‰åŠ©æ–¼å£“ç¸®åˆ—ã€‚å¦‚æœä¸»è¦æ’åºåˆ—çš„å€¼é‡è¤‡ç¨‹åº¦è¼ƒé«˜ï¼Œå‰‡æ’åºå¾Œå¯ä»¥ç”¨ç°¡å–®çš„é‹è¡Œé•·åº¦ç·¨ç¢¼ä¾†é€²è¡Œå£“ç¸®ã€‚  C-Store å’Œ Vertica ç­‰è³‡æ–™åº«ç³»çµ±ä¸­çš„ä¸€å€‹æ“´å……å¥—ä»¶æ˜¯ï¼Œæ—¢ç„¶ä¸åŒæŸ¥è©¢å—ç›Šæ–¼ä¸åŒçš„æ’åºé †åºï¼Œç‚ºä»€éº¼ä¸ä»¥å¤šç¨®ä¸åŒæ–¹å¼å„²å­˜ç›¸åŒè³‡æ–™ï¼Ÿé€™æ¨£å¯ä»¥åœ¨è™•ç†æŸ¥è©¢æ™‚ï¼Œé¸æ“‡æœ€é©åˆæŸ¥è©¢æ¨¡å¼çš„æ’åºç‰ˆæœ¬ã€‚  ç¸½ä¹‹ï¼Œåˆ—å¼å„²å­˜ä¸­çš„æ’åºé †åºå°æ–¼æŸ¥è©¢æ•ˆç‡å’Œè³‡æ–™å£“ç¸®å…·æœ‰é‡è¦å½±éŸ¿ã€‚ä¸åŒçš„æ’åºé †åºå¯ä»¥å„ªåŒ–æŸ¥è©¢æ€§èƒ½ä¸¦æé«˜è³‡æ–™å£“ç¸®ç‡ã€‚   å¯«å…¥åˆ—å¼å„²å­˜  åœ¨è³‡æ–™å€‰åº«ä¸­ï¼Œåˆ—å¼å„²å­˜ã€å£“ç¸®å’Œæ’åºå°æ–¼å¤§å‹åªè®€æŸ¥è©¢æœ‰å¹«åŠ©ã€‚ä½†æ˜¯ï¼Œå¯«å…¥åˆ—å¼å„²å­˜æ¯”è¼ƒå›°é›£ã€‚ç”±æ–¼è¡Œç”±åˆ—ä¸­çš„ä½ç½®æ¨™è­˜ï¼Œæ’å…¥æ–°è¡Œå¯èƒ½éœ€è¦é‡å¯«æ‰€æœ‰åˆ—æª”æ¡ˆã€‚  ä¸€å€‹è§£æ±ºæ–¹æ¡ˆæ˜¯ä½¿ç”¨LSMæ¨¹ã€‚å¯«æ“ä½œå…ˆé€²å…¥è¨˜æ†¶é«”ä¸­çš„å„²å­˜ï¼Œè¢«åŠ å…¥å·²æ’åºçµæ§‹ï¼Œç„¶å¾Œæ‰¹æ¬¡å¯«å…¥ç¡¬ç¢Ÿä¸Šçš„åˆ—æª”æ¡ˆã€‚æŸ¥è©¢æ“ä½œéœ€è¦æª¢æŸ¥ç¡¬ç¢Ÿä¸Šçš„åˆ—è³‡æ–™å’Œè¨˜æ†¶é«”ä¸­çš„æœ€è¿‘å¯«å…¥ï¼Œå°‡å…©è€…åˆä½µã€‚æŸ¥è©¢æœ€ä½³åŒ–å™¨æœƒéš±è—é€™äº›ç´°ç¯€ï¼Œä½¿å¾—ä¿®æ”¹å¾Œçš„è³‡æ–™èƒ½ç«‹å³åæ˜ åœ¨æŸ¥è©¢ä¸­ã€‚   èšåˆï¼šè³‡æ–™ç«‹æ–¹é«”å’Œç‰©åŒ–æª¢è¦–  ç‚ºäº†æé«˜è³‡æ–™å€‰åº«çš„æŸ¥è©¢æ€§èƒ½ï¼Œå¯ä»¥åˆ©ç”¨è³‡æ–™ç«‹æ–¹é«”å’Œç‰©åŒ–æª¢è¦–é€²è¡Œæ•¸æ“šèšåˆã€‚é€™å…©ç¨®æŠ€è¡“å…·æœ‰ä¸åŒçš„ç‰¹é»å’Œç”¨é€”ï¼š   ç‰©åŒ–æª¢è¦–ï¼š\n   å°‡æŸ¥è©¢çµæœçš„å¯¦éš›å‰¯æœ¬å„²å­˜èµ·ä¾†ï¼ŒåŠ é€Ÿå¸¸ç”¨èšåˆå‡½å¼ï¼Œå¦‚ COUNTã€SUMã€AVG ç­‰ã€‚  èˆ‡è™›æ“¬æª¢è¦–ä¸åŒï¼Œè™›æ“¬æª¢è¦–åªæ˜¯æŸ¥è©¢çš„æ·å¾‘ï¼Œä¸å„²å­˜ä»»ä½•å¯¦éš›æ•¸æ“šã€‚  éœ€è¦åœ¨åº•å±¤æ•¸æ“šè®ŠåŒ–æ™‚é€²è¡Œæ›´æ–°ï¼Œé€™æœƒå¢åŠ å¯«å…¥æˆæœ¬ï¼Œåœ¨ OLTP è³‡æ–™åº«ä¸­ä¸å¤ªå¸¸ç”¨ã€‚  è³‡æ–™ç«‹æ–¹é«”ï¼š\n   ç‰©åŒ–æª¢è¦–çš„ä¸€å€‹ç‰¹ä¾‹ï¼ŒæŒ‰ç…§ä¸åŒç¶­åº¦åˆ†çµ„çš„èšåˆç¶²æ ¼ï¼Œä¹Ÿè¢«ç¨±ç‚º OLAP ç«‹æ–¹ã€‚  å…è¨±æ ¹æ“šä¸åŒç¶­åº¦å°æ•¸æ“šé€²è¡Œå½™ç¸½ï¼Œä¾‹å¦‚æ ¹æ“šæ—¥æœŸå’Œç”¢å“å°éŠ·å”®é¡é€²è¡Œå½™ç¸½ã€‚  ç•¶äº‹å¯¦å…·æœ‰å¤šå€‹ç¶­åº¦æ™‚ï¼Œå¯ä»¥æ“´å±•åˆ°å¤šç¶­è¶…ç«‹æ–¹é«”ï¼Œä¾‹å¦‚æ—¥æœŸã€ç”¢å“ã€å•†åº—ã€ä¿ƒéŠ·å’Œå®¢æˆ¶ç­‰äº”å€‹ç¶­åº¦ã€‚  å„ªé»ï¼šè®“æŸäº›æŸ¥è©¢è®Šå¾—éå¸¸å¿«ï¼Œå› ç‚ºé€™äº›æŸ¥è©¢å·²ç¶“è¢«æœ‰æ•ˆåœ°é å…ˆè¨ˆç®—äº†ã€‚  ç¼ºé»ï¼šç¼ºä¹æŸ¥è©¢åŸå§‹æ•¸æ“šçš„éˆæ´»æ€§ï¼Œå› ç‚ºåƒ¹æ ¼ç­‰æŸäº›ç¯„åœæ¢ä»¶ä¸æ˜¯ç«‹æ–¹é«”çš„ç¶­åº¦ã€‚  è³‡æ–™å€‰åº«é€šå¸¸æœƒä¿ç•™å„˜å¯èƒ½å¤šçš„åŸå§‹æ•¸æ“šï¼Œä¸¦å°‡èšåˆæ•¸æ“šï¼ˆå¦‚è³‡æ–™ç«‹æ–¹é«”ï¼‰åƒ…ä½œç‚ºæŸäº›æŸ¥è©¢çš„æ•ˆèƒ½æå‡æ‰‹æ®µã€‚     æœ¬ç« å°çµ  åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘å€‘è©³ç´°è¨è«–äº†è³‡æ–™åº«å¦‚ä½•è™•ç†è³‡æ–™çš„å„²å­˜å’Œæª¢ç´¢ã€‚è³‡æ–™å„²å­˜åœ¨è³‡æ–™åº«å¾Œï¼ŒæŸ¥è©¢æ™‚è³‡æ–™åº«æœƒé€²è¡Œæª¢ç´¢ã€‚æˆ‘å€‘äº†è§£äº†é‡å°äº‹å‹™è™•ç†ï¼ˆOLTPï¼‰å’Œç·šä¸Šåˆ†æï¼ˆOLAPï¼‰å…©ç¨®ä¸åŒä½¿ç”¨å ´æ™¯çš„å„²å­˜å¼•æ“ï¼Œä»¥åŠä»–å€‘ä¹‹é–“çš„å€åˆ¥ã€‚   OLTPç³»çµ±ï¼š\na. é¢å‘çµ‚ç«¯ä½¿ç”¨è€…ï¼Œè™•ç†å¤§é‡è«‹æ±‚ã€‚\nb. æ¯å€‹æŸ¥è©¢é€šå¸¸åªè¨ªå•å°‘é‡è¨˜éŒ„ï¼Œä½¿ç”¨ç´¢å¼•é€²è¡ŒæŸ¥è©¢ã€‚\nc. ç¡¬ç¢ŸæŸ¥è©¢æ™‚é–“æ˜¯ç“¶é ¸ã€‚  OLAPç³»çµ±ï¼š\na. é¢å‘æ¥­å‹™åˆ†æäººå“¡ï¼ŒæŸ¥è©¢é‡è¼ƒå°‘ã€‚\nb. æ¯å€‹æŸ¥è©¢é–‹éŠ·é«˜ï¼Œéœ€è¦çŸ­æ™‚é–“å…§æƒæå¤§é‡è¨˜éŒ„ã€‚\nc. ç¡¬ç¢Ÿé »å¯¬æ˜¯ç“¶é ¸ï¼Œåˆ—å¼å„²å­˜æœ‰åŠ©æ–¼æé«˜æ•ˆèƒ½ã€‚  å…©æ´¾ä¸»æµçš„å„²å­˜å¼•æ“ï¼š\na. æ—¥èªŒçµæ§‹å­¸æ´¾ï¼šä¾‹å¦‚Bitcaskã€SSTablesã€LSMæ¨¹ã€LevelDBã€Cassandraã€HBaseã€Luceneç­‰ã€‚é€™äº›æŠ€è¡“é€šéå°‡éš¨æ©Ÿè¨ªå•å¯«å…¥è½‰æ›ç‚ºç¡¬ç¢Ÿä¸Šçš„é †åºå¯«å…¥ï¼Œæé«˜å¯«å…¥ååé‡ã€‚\nb. å°±åœ°æ›´æ–°å­¸æ´¾ï¼šä¾‹å¦‚Bæ¨¹ï¼Œç”¨æ–¼é—œä¿‚è³‡æ–™åº«å’Œéé—œä¿‚å‹è³‡æ–™åº«ã€‚å°‡ç¡¬ç¢Ÿè¦–ç‚ºä¸€çµ„å¯è¦†å¯«çš„å›ºå®šå¤§å°çš„é é¢ã€‚  è¤‡é›œçš„ç´¢å¼•çµæ§‹èˆ‡è¨˜æ†¶é«”å…§è³‡æ–™åº«ï¼šä»‹ç´¹äº†ä¸€äº›æ›´è¤‡é›œçš„ç´¢å¼•çµæ§‹ï¼Œä»¥åŠé‡å°æ‰€æœ‰è³‡æ–™éƒ½æ”¾åœ¨è¨˜æ†¶é«”è£¡è€Œæœ€ä½³åŒ–çš„è³‡æ–™åº«ã€‚  è³‡æ–™å€‰åº«çš„é«˜éšæ¶æ§‹ï¼š\na. ç•¶æŸ¥è©¢éœ€è¦åœ¨å¤§é‡è¡Œä¸­é †åºæƒææ™‚ï¼Œç´¢å¼•çš„é‡è¦æ€§é™ä½ã€‚\nb. éå¸¸ç·Šæ¹Šåœ°ç·¨ç¢¼è³‡æ–™è®Šå¾—éå¸¸é‡è¦ï¼Œä»¥æ¸›å°‘æŸ¥è©¢éœ€è¦å¾ç¡¬ç¢Ÿè®€å–çš„è³‡æ–™é‡ã€‚\nc. åˆ—å¼å„²å­˜æœ‰åŠ©æ–¼å¯¦ç¾é€™ä¸€ç›®æ¨™ï¼Œæé«˜æŸ¥è©¢æ•ˆèƒ½ã€‚  ä½œç‚ºä¸€åæ‡‰ç”¨ç¨‹å¼é–‹ç™¼äººå“¡ï¼Œäº†è§£å„²å­˜å¼•æ“å…§éƒ¨çš„çŸ¥è­˜å°‡æœ‰åŠ©æ–¼æ‚¨æ›´å¥½åœ°äº†è§£å“ªç¨®å·¥å…·æœ€é©åˆç‰¹å®šæ‡‰ç”¨ç¨‹å¼ã€‚åœ¨èª¿æ•´è³‡æ–™åº«æœ€ä½³åŒ–å¼•æ•¸æ™‚ï¼Œé€™ç¨®ç†è§£è®“æ‚¨èƒ½å¤ é æ¸¬å¢æ¸›æŸå€‹å€¼æ‰€ç”¢ç”Ÿçš„æ•ˆæœã€‚  äº†è§£è³‡æ–™åº«å„²å­˜å¼•æ“çš„å…§éƒ¨é‹ä½œå°æ–¼é¸æ“‡æœ€é©åˆæ‚¨éœ€æ±‚çš„è³‡æ–™åº«ç³»çµ±è‡³é—œé‡è¦ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å»ºè­°å¹«åŠ©æ‚¨é¸æ“‡è³‡æ–™åº«ï¼š   è©•ä¼°æ‚¨çš„å·¥ä½œè² è¼‰é¡å‹ï¼šç¢ºå®šæ‚¨çš„æ‡‰ç”¨ç¨‹å¼æ˜¯å¦æ›´åå‘OLTPæˆ–OLAPï¼Œä»¥é¸æ“‡é‡å°ç‰¹å®šéœ€æ±‚æœ€ä½³åŒ–çš„è³‡æ–™åº«ã€‚  è€ƒæ…®è³‡æ–™åº«çš„å¯æ“´å±•æ€§ï¼šæ ¹æ“šæ‚¨çš„æ‡‰ç”¨ç¨‹å¼çš„æœªä¾†éœ€æ±‚å’Œæˆé•·ï¼Œç¢ºä¿è³‡æ–™åº«å¯ä»¥æ»¿è¶³é€™äº›éœ€æ±‚ã€‚  è©•ä¼°è³‡æ–™åº«çš„æ€§èƒ½ï¼šæ ¹æ“šæ‚¨çš„æ‡‰ç”¨ç¨‹å¼éœ€æ±‚ï¼Œé¸æ“‡æ€§èƒ½æœ€ä½³çš„è³‡æ–™åº«ï¼Œç‰¹åˆ¥æ˜¯åœ¨è®€å–å’Œå¯«å…¥æ“ä½œæ–¹é¢ã€‚  ç­è§£è³‡æ–™åº«çš„å®‰å…¨æ€§å’Œå®Œæ•´æ€§ï¼šé¸æ“‡å…·æœ‰å…§å»ºå®‰å…¨æ€§å’Œå®Œæ•´æ€§æ©Ÿåˆ¶çš„è³‡æ–™åº«ï¼Œä»¥ç¢ºä¿æ‚¨çš„æ•¸æ“šå®‰å…¨ç„¡è™ã€‚  è€ƒæ…®è³‡æ–™åº«çš„æ”¯æŒå’Œç¤¾å€ï¼šé¸æ“‡å…·æœ‰è‰¯å¥½æ”¯æŒå’Œæ´»èºé–‹ç™¼è€…ç¤¾å€çš„è³‡æ–™åº«ï¼Œé€™å°‡æœ‰åŠ©æ–¼æ‚¨è§£æ±ºå•é¡Œå’Œç²å–æŠ€è¡“æ”¯æ´ã€‚  å„˜ç®¡æœ¬ç« ç„¡æ³•ä½¿æ‚¨æˆç‚ºç‰¹å®šå„²å­˜å¼•æ“çš„èª¿åƒå°ˆå®¶ï¼Œä½†è‡³å°‘èƒ½è®“æ‚¨ç²å¾—è¶³å¤ çš„æ¦‚å¿µå’Œè©å½™ï¼Œä»¥ä¾¿æ‚¨èƒ½å¤ é–±è®€å’Œç†è§£æ‰€é¸è³‡æ–™åº«çš„æ–‡æª”ã€‚æŒæ¡è³‡æ–™åº«å„²å­˜å¼•æ“çš„åŸºæœ¬çŸ¥è­˜å°æ–¼æ‚¨ä½œç‚ºæ‡‰ç”¨ç¨‹å¼é–‹ç™¼äººå“¡ä¾†èªªæ˜¯éå¸¸æœ‰åƒ¹å€¼çš„ã€‚  html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}"},{"id":"content:5.ddia:4.chapter4.md","path":"/ddia/chapter4","dir":"ddia","title":"04 ç·¨ç¢¼èˆ‡æ¼”åŒ–","description":"","keywords":["ç·¨ç¢¼è³‡æ–™çš„æ ¼å¼bo","è³‡æ–™æµçš„å‹åˆ¥","å°çµ"],"body":"  \n  tr, th, td {\n    border: none!important;\n  }\n  .nolinebreak {\n    white-space: nowrap;\n  }\n  .movepadding {\n    padding-left: 2%!important;\n  }\n  ç•¶è³‡æ–™çš„  æ ¼å¼ (format)æˆ–  æ¨¡å¼ (schema)ç™¼ç”Ÿè®ŠåŒ–æ™‚ï¼Œé€šå¸¸éœ€è¦å°æ‡‰ç”¨ç¨‹å¼ç¨‹å¼ç¢¼é€²è¡Œç›¸æ‡‰çš„æ›´æ”¹(ä¾‹å¦‚ï¼Œç‚ºè¨˜éŒ„æ–°å¢æ–°æ¬„ä½ï¼Œç„¶å¾Œä¿®æ”¹ç¨‹å¼é–‹å§‹è®€å¯«è©²æ¬„ä½)ã€‚ä½†åœ¨å¤§å‹æ‡‰ç”¨ç¨‹å¼ä¸­ï¼Œç¨‹å¼ç¢¼è®Šæ›´é€šå¸¸ä¸æœƒç«‹å³å®Œæˆï¼š  \n     \n       æœå‹™ç«¯ (server-side)ï¼š \n      å¯èƒ½éœ€è¦åŸ·è¡Œ   æ»¾å‹•å‡ç´š (rolling upgrade)ï¼Œä¸€æ¬¡å°‡æ–°ç‰ˆæœ¬éƒ¨ç½²åˆ°å°‘æ•¸å¹¾å€‹ç¯€é»ï¼Œæª¢æŸ¥æ–°ç‰ˆæœ¬æ˜¯å¦åŸ·è¡Œæ­£å¸¸ï¼Œç„¶å¾Œé€æ¼¸éƒ¨å®Œæ‰€æœ‰çš„ç¯€é»ã€‚ \n   \n    \n       å®¢æˆ¶ç«¯ (client-side)ï¼š \n      å‡ä¸å‡ç´šå°±è¦çœ‹ä½¿ç”¨è€…çš„å¿ƒæƒ…äº†ã€‚ä½¿ç”¨è€…å¯èƒ½ç›¸ç•¶é•·ä¸€æ®µæ™‚é–“è£¡éƒ½ä¸æœƒå»å‡ç´šè»Ÿé«”ã€‚ \n    é€™ä¹Ÿè¡¨ç¤ºï¼Œæ–°èˆŠç‰ˆæœ¬çš„ç¨‹å¼ç¢¼æˆ–æ˜¯æ–°èˆŠè³‡æ–™æ ¼å¼å¯èƒ½æœƒåœ¨ç³»çµ±ä¸­åŒæ™‚å…±è™•ã€‚ç³»çµ±æƒ³è¦ç¹¼çºŒé †åˆ©åŸ·è¡Œï¼Œå°±éœ€è¦ä¿æŒ  é›™å‘ç›¸å®¹æ€§ ï¼š  \n     \n       å‘å¾Œç›¸å®¹ (backward compatibility)ï¼š \n      æ–°çš„ç¨‹å¼ç¢¼å¯ä»¥è®€å–ç”±èˆŠçš„ç¨‹å¼ç¢¼å¯«å…¥çš„è³‡æ–™ã€‚è¼ƒå®¹æ˜“è™•ç†ï¼Œå› ç‚ºä½œè€…çŸ¥é“èˆŠç¨‹å¼ç¢¼æ‰€ä½¿ç”¨çš„è³‡æ–™æ ¼å¼(ä¸€èˆ¬æœ€ç°¡å–®çš„æ–¹æ³•ï¼Œå°±æ˜¯ä¿ç•™èˆŠç¨‹å¼ç¢¼å³å¯è®€å–èˆŠè³‡æ–™)ã€‚ \n   \n    \n       å‘å‰ç›¸å®¹ (forward compatibility)ï¼š \n      èˆŠçš„ç¨‹å¼ç¢¼å¯ä»¥è®€å–ç”±æ–°çš„ç¨‹å¼ç¢¼å¯«å…¥çš„è³‡æ–™ã€‚è¼ƒä¸æ˜“è™•ç†ï¼Œå› ç‚ºèˆŠç‰ˆçš„ç¨‹å¼éœ€è¦å¿½ç•¥æ–°ç‰ˆè³‡æ–™æ ¼å¼ä¸­æ–°å¢çš„éƒ¨åˆ†ã€‚ \n      ç·¨ç¢¼è³‡æ–™çš„æ ¼å¼bo  ç¨‹å¼é€šå¸¸(è‡³å°‘)ä½¿ç”¨å…©ç¨®å½¢å¼çš„è³‡æ–™ï¼š   è³‡æ–™ä»¥ç‰©ä»¶ã€çµæ§‹é«”ã€åˆ—è¡¨ã€é™£åˆ—ã€æ•£åˆ—è¡¨ã€æ¨¹ç­‰æ–¹å¼å„²å­˜åˆ°  è¨˜æ†¶é«” ä¸­ã€‚é€™äº›è³‡æ–™çµæ§‹é‡å° CPU çš„é«˜æ•ˆè¨ªå•å’Œæ“ä½œé€²è¡Œäº†æœ€ä½³åŒ–(é€šå¸¸ä½¿ç”¨æŒ‡æ¨™)ã€‚  è³‡æ–™å¯«å…¥æª”æ¡ˆï¼Œæˆ–é€éç¶²è·¯å‚³é€ï¼Œå‰‡å¿…é ˆå°‡å…¶è½‰æ›ç‚ºæŸç¨®è‡ªåŒ…å«çš„ä½å…ƒçµ„åºåˆ—(ä¾‹å¦‚ï¼ŒJSON æ–‡ä»¶)ã€‚é€™å€‹ä½å…ƒçµ„åºåˆ—è¡¨ç¤ºæœƒèˆ‡é€šå¸¸åœ¨è¨˜æ†¶é«”ä¸­ä½¿ç”¨çš„è³‡æ–™çµæ§‹ä¸åŒã€‚  è¦åœ¨å…©ç¨®è¡¨ç¤ºä¹‹é–“é€²è¡ŒæŸç¨®å‹åˆ¥çš„ç¿»è­¯ã€‚å¾è¨˜æ†¶é«”ä¸­è¡¨ç¤ºåˆ°ä½å…ƒçµ„åºåˆ—çš„è½‰æ›ç¨±ç‚º  ç·¨ç¢¼ (Encoding)(ä¹Ÿç¨±ç‚º  åºåˆ—åŒ– (serialization)æˆ–  ç·¨çµ„ (marshalling))ï¼Œåéä¾†ç¨±ç‚º  è§£ç¢¼ (Decoding)2(  è§£æ (Parsing)ï¼Œ  ååºåˆ—åŒ– (deserialization)ï¼Œ  åç·¨çµ„  (unmarshalling))    èªè¨€ç‰¹å®šçš„æ ¼å¼  è¨±å¤šç¨‹å¼èªè¨€éƒ½å…§å»ºäº†å°‡è¨˜æ†¶é«”ç‰©ä»¶ç·¨ç¢¼ç‚ºä½å…ƒçµ„åºåˆ—çš„æ”¯æ´ã€‚   Java æœ‰ java.io.Serializableã€‚  Ruby æœ‰ Marshalã€‚  Python æœ‰ pickleã€‚  ç¬¬ä¸‰æ–¹é¡åˆ¥åº«åƒæ˜¯ Kryo for Java ....ç­‰ã€‚  ç·¨ç¢¼åº«å¾ˆæ–¹ä¾¿ï¼Œå¯ä»¥ç”¨å¾ˆå°‘çš„ç¨‹å¼ç¢¼å¯¦ç¾è¨˜æ†¶é«”ç‰©ä»¶çš„å„²å­˜èˆ‡æ¢å¾©ã€‚ä½†ä¹Ÿæœ‰ä¸€äº›æ·±å±¤æ¬¡çš„å•é¡Œï¼š   èˆ‡ç‰¹å®šçš„ç¨‹å¼èªè¨€æ·±åº¦ç¹«çµï¼Œå…¶ä»–èªè¨€å¾ˆé›£è®€å–é€™ç¨®è³‡æ–™ï¼Œä¸”å¾ˆé›£å°‡ç³»çµ±èˆ‡å…¶ä»–çµ„ç¹”çš„ç³»çµ±(å¯èƒ½ç”¨çš„æ˜¯ä¸åŒçš„èªè¨€)é€²è¡Œæ•´åˆã€‚  ç‚ºäº†æ¢å¾©ç›¸åŒç‰©ä»¶å‹åˆ¥çš„è³‡æ–™ï¼Œè§£ç¢¼éç¨‹éœ€è¦ ä¾‹é …åŒ–ä»»æ„é¡ã€‚é€™æœƒæœ‰å®‰å…¨æ€§å•é¡Œï¼Œè‹¥æ”»æ“Šè€…å¯ä»¥è®“æ‡‰ç”¨ç¨‹å¼è§£ç¢¼ä»»æ„çš„ä½å…ƒçµ„åºåˆ—ï¼Œä»–å€‘å°±èƒ½ä¾‹é …åŒ–ä»»æ„çš„é¡ã€‚  å®¹æ˜“å‡ºç¾å‘å‰å‘å¾Œç›¸å®¹æ€§å¸¶ä¾†çš„éº»ç…©å•é¡Œã€‚  æ•ˆç‡(ç·¨ç¢¼æˆ–è§£ç¢¼æ‰€èŠ±è²»çš„ CPU æ™‚é–“ï¼Œä»¥åŠç·¨ç¢¼çµæ§‹çš„å¤§å°)ã€‚ä¾‹å¦‚ï¼ŒJava çš„å…§å»ºåºåˆ—åŒ–ç”±æ–¼å…¶ç³Ÿç³•çš„æ•ˆèƒ½å’Œè‡ƒè…«çš„ç·¨ç¢¼è€Œè‡­åæ˜­è‘—ã€‚    JSONã€XMLå’ŒCSV  JSONï¼ŒXML å’Œ CSV å±¬æ–¼æ–‡å­—æ ¼å¼ï¼Œå› æ­¤å…·æœ‰äººé¡å¯è®€æ€§ã€‚ä½†ä¹Ÿå­˜åœ¨ä¸€äº›å¾®å¦™çš„å•é¡Œï¼š   æ•¸å­—(numbers)ç·¨ç¢¼æœ‰å¾ˆå¤šæ¨¡ç³Šä¹‹è™•ã€‚åœ¨ XML å’Œ CSV ä¸­ï¼Œç„¡æ³•å€åˆ†æ•¸å­—å’Œç´”æ•¸å­—çµ„æˆçš„å­—ä¸²(é™¤äº†å¼•ç”¨å¤–éƒ¨æ¨¡å¼)ã€‚JSON é›–ç„¶å€åˆ†å­—ä¸²èˆ‡æ•¸å­—ï¼Œä½†ä¸¦ä¸å€åˆ†æ•´æ•¸å’Œæµ®é»æ•¸ï¼Œä¸¦ä¸”ä¸èƒ½æŒ‡å®šç²¾åº¦ã€‚  è™•ç†å¤§æ•¸å­—æ™‚æ˜¯å€‹å•é¡Œã€‚ä¾‹å¦‚å¤§æ–¼$2^{53}$çš„æ•´æ•¸ç„¡æ³•ä½¿ç”¨ IEEE 754 é›™ç²¾åº¦æµ®é»æ•¸ç²¾ç¢ºè¡¨ç¤ºå› æ­¤åœ¨ä½¿ç”¨æµ®é»æ•¸(ä¾‹å¦‚ JavaScript)çš„èªè¨€é€²è¡Œåˆ†ææ™‚ï¼Œé€™äº›æ•¸å­—æœƒè®Šå¾—ä¸æº–ç¢ºã€‚  JSON å’Œ XML ä¸æ”¯æ´äºŒé€²ä½åˆ¶è³‡æ–™(å³ä¸å¸¶ å­—å…ƒç·¨ç¢¼(character encoding)çš„ä½å…ƒçµ„åºåˆ—)ã€‚  XML å’Œ JSON éƒ½æœ‰å¯é¸çš„æ¨¡å¼æ”¯æ´ã€‚é€™äº›æ¨¡å¼èªè¨€ç›¸ç•¶å¼·å¤§ï¼Œç›¸å°å­¸ç¿’å’Œå¯¦ç¾èµ·ä¾†éƒ½æ¯”è¼ƒè¤‡é›œã€‚  CSV æ²’æœ‰ä»»ä½•æ¨¡å¼ï¼Œå› æ­¤æ¯è¡Œå’Œæ¯åˆ—çš„å«ç¾©å®Œå…¨ç”±æ‡‰ç”¨ç¨‹å¼è‡ªè¡Œå®šç¾©ã€‚å¦‚æœæ‡‰ç”¨ç¨‹å¼è®Šæ›´æ·»åŠ äº†æ–°çš„è¡Œæˆ–åˆ—ï¼Œé‚£éº¼é€™ç¨®è®Šæ›´å¿…é ˆé€éæ‰‹å·¥è™•ç†ã€‚    äºŒé€²ä½åˆ¶ç·¨ç¢¼  å°è³‡æ–™é›†åˆçš„ç·¨ç¢¼é€ æˆçš„æ•ˆèƒ½å½±éŸ¿å¯ä»¥å¿½ç•¥ä¸è¨ˆï¼›ä½†ä¸€æ—¦é”åˆ° TB ç´šåˆ¥ï¼Œè³‡æ–™æ ¼å¼çš„é¸å‹å°±æœƒç”¢ç”Ÿå·¨å¤§çš„å½±éŸ¿ã€‚äºŒé€²ä½åˆ¶ä¸²æ˜¯å¾ˆæœ‰ç”¨çš„åŠŸèƒ½ï¼Œäººå€‘é€éä½¿ç”¨ Base64 å°‡äºŒé€²ä½åˆ¶è³‡æ–™ç·¨ç¢¼ç‚ºæ–‡å­—ä¾†ç¹éæ­¤é™åˆ¶ã€‚å…¶ç‰¹æœ‰çš„æ¨¡å¼æ¨™è­˜è‘—é€™å€‹å€¼æ‡‰ç•¶è¢«è§£é‡‹ç‚º Base64 ç·¨ç¢¼çš„äºŒé€²ä½åˆ¶è³‡æ–™ã€‚   {\n    \"userName\": \"Martin\",\n    \"favoriteNumber\": 1337,\n    \"interests\": [\"daydreaming\", \"hacking\"]\n}\n     MessagePack  ä¸‹åœ–ç‚º MessagePack ç·¨ç¢¼å¾Œçš„æ ¼å¼å®šç¾©ï¼š\n    ç¬¬ 1 å€‹ä½å…ƒçµ„ç‚º 83(1000 0011)ï¼Œ1000 è¡¨ç¤ºè³‡æ–™å‹åˆ¥ç‚º fixmapï¼Œ0011 è¡¨ç¤ºæœ‰ 3 å€‹é …ç›®ã€‚  ç¬¬ 2 ~ 10 å€‹ä½å…ƒçµ„è¡¨ç¤ºæ¬„ä½ \"userName\"ã€‚\n   ç¬¬ 2 å€‹ä½å…ƒçµ„ç‚º a8(1010 1000)ï¼Œ101 è¡¨ç¤ºè³‡æ–™å‹åˆ¥ç‚º fixstrï¼Œ01000 è¡¨ç¤ºé•·åº¦ç‚º 8ã€‚  ç¬¬ 3 ~ 10 å€‹ä½å…ƒçµ„è¡¨ç¤º userName çš„ ASCII ç·¨ç¢¼ã€‚  ç¬¬ 11 ~ 17 å€‹ä½å…ƒçµ„è¡¨ç¤ºå€¼ \"Martin\"ã€‚  ç¬¬ 18 ~ 32 å€‹ä½å…ƒçµ„è¡¨ç¤ºæ¬„ä½ \"favoriteNumber\"ã€‚  ç¬¬ 33 ~ 35 å€‹ä½å…ƒçµ„è¡¨ç¤ºå€¼ 1337ã€‚\n   ç¬¬ 33 å€‹ä½å…ƒçµ„ç‚º cd(1100 1101)ï¼Œè¡¨ç¤ºè³‡æ–™å‹åˆ¥ç‚º uint16ã€‚  ç¬¬ 34 ~ 35 è¡¨ç¤º 1337(05 39) çš„åå…­é€²åˆ¶ç·¨ç¢¼ã€‚  ç¬¬ 36 ~ 45 å€‹ä½å…ƒçµ„è¡¨ç¤ºæ¬„ä½ \"interests\"ã€‚  ç¬¬ 46 ~ 66 å€‹ä½å…ƒçµ„è¡¨ç¤ºç‚ºä¸€å€‹é™£åˆ—é›†åˆçš„è³‡æ–™ã€‚\n   ç¬¬ 46 å€‹ä½å…ƒçµ„ç‚º 92(1001 0010)ï¼Œ1001 è¡¨ç¤ºè³‡æ–™å‹åˆ¥ç‚º fixarrayï¼Œ0010 è¡¨ç¤ºæœ‰ 2 å€‹é …ç›®ã€‚  ç¬¬ 47 ~ 58 å€‹ä½å…ƒçµ„è¡¨ç¤ºå€¼ \"daydreaming\"ã€‚  ç¬¬ 59 ~ 66 å€‹ä½å…ƒçµ„è¡¨ç¤ºå€¼ \"hacking\"ã€‚  è©³ç´°æ•™å­¸å¯åƒè€ƒ  MessagePackå®˜ç¶² ã€‚     Thrift  ä¸‹åœ–ç‚º Thrift BinaryProtocol ç·¨ç¢¼å¾Œçš„æ ¼å¼å®šç¾©ï¼š\n    ç¬¬ 1 ~ 13 å€‹ä½å…ƒçµ„è¡¨ç¤ºå€¼ \"Martin\"ã€‚\n   ç¬¬ 1 å€‹ä½å…ƒçµ„ç‚º 0b è¡¨ç¤ºç‚ºè³‡æ–™å‹åˆ¥ç‚º stringã€‚  ç¬¬ 2 ~ 3 å€‹ä½å…ƒçµ„ç‚º 00 01 è¡¨ç¤ºç‚ºç¬¬ 1 å€‹é …ç›®ã€‚  ç¬¬ 4 ~ 7 å€‹ä½å…ƒçµ„ç‚º 00 00 00 06 è¡¨ç¤ºç‚ºé•·åº¦ç‚º 6ã€‚  ç¬¬ 8 ~ 13 å€‹ä½å…ƒçµ„è¡¨ç¤º Martin çš„ ASCII ç·¨ç¢¼ã€‚  ç¬¬ 14 ~ 24 å€‹ä½å…ƒçµ„è¡¨ç¤ºå€¼ 1337ã€‚\n   ç¬¬ 14 å€‹ä½å…ƒçµ„ç‚º 0a è¡¨ç¤ºç‚ºè³‡æ–™å‹åˆ¥ç‚º int64ã€‚  ç¬¬ 15 ~ 16 å€‹ä½å…ƒçµ„ç‚º 00 02 è¡¨ç¤ºç‚ºç¬¬ 2 å€‹é …ç›®ã€‚  ç¬¬ 17 ~ 24 å€‹ä½å…ƒçµ„è¡¨ç¤º 1337 çš„åå…­é€²åˆ¶ç·¨ç¢¼ã€‚  ç¬¬ 25 ~ 59 å€‹ä½å…ƒçµ„è¡¨ç¤º 1 å€‹é™£åˆ—é›†åˆã€‚\n   ç¬¬ 25 å€‹ä½å…ƒçµ„ç‚º 0f è¡¨ç¤ºç‚ºè³‡æ–™å‹åˆ¥ç‚º listã€‚  ç¬¬ 26 ~ 27 å€‹ä½å…ƒçµ„ç‚º 00 03 è¡¨ç¤ºç‚ºç¬¬ 3 å€‹é …ç›®ã€‚  ç¬¬ 28 å€‹ä½å…ƒçµ„ç‚º 0b è¡¨ç¤ºç‚ºé›†åˆå…§çš„è³‡æ–™å‹åˆ¥ç‚º stringã€‚  ç¬¬ 29 ~ 32 å€‹ä½å…ƒçµ„ç‚º 00 00 00 02 è¡¨ç¤ºé›†åˆå«æœ‰ 2 å€‹é …ç›®ã€‚  ç¬¬ 33 ~ 36 å€‹ä½å…ƒçµ„ç‚º 00 00 00 0b è¡¨ç¤ºç‚ºé•·åº¦ç‚º 11ã€‚  ç¬¬ 37 ~ 47 å€‹ä½å…ƒçµ„ç‚º daydreaming çš„ ASCII ç·¨ç¢¼ã€‚  ç¬¬ 48 ~ 51 å€‹ä½å…ƒçµ„ç‚º 00 00 00 07 è¡¨ç¤ºç‚ºé•·åº¦ç‚º 7ã€‚  ç¬¬ 52 ~ 58 å€‹ä½å…ƒçµ„ç‚º hacking çš„ ASCII ç·¨ç¢¼ã€‚  ç¬¬ 59 å€‹ä½å…ƒçµ„ç‚ºæ­¤é›†åˆçš„çµæŸæ¨™è¨˜ã€‚  è©³ç´°æ•™å­¸å¯åƒè€ƒ  Thrift Binary protocol encoding ã€‚  ä¸‹åœ–ç‚º Thrift CompactProtocol ç·¨ç¢¼å¾Œçš„æ ¼å¼å®šç¾©ï¼š\n    ç¬¬ 1 ~ 8 å€‹ä½å…ƒçµ„è¡¨ç¤ºå€¼ \"Martin\"ã€‚\n   ç¬¬ 1 å€‹ä½å…ƒçµ„ç‚º 18(0001 1000)ã€‚0001 è¡¨ç¤º 1 å€‹é …ç›®ï¼Œ1000 è¡¨ç¤ºç‚ºè³‡æ–™å‹åˆ¥ç‚º stringã€‚  ç¬¬ 2 å€‹ä½å…ƒçµ„ç‚º 06 è¡¨ç¤ºç‚ºé•·åº¦ç‚º 6ã€‚  ç¬¬ 3 ~ 8 å€‹ä½å…ƒçµ„è¡¨ç¤º Martin çš„ ASCII ç·¨ç¢¼ã€‚  ç¬¬ 9 ~ 11 å€‹ä½å…ƒçµ„è¡¨ç¤ºå€¼ 1337ã€‚\n   ç¬¬ 9 å€‹ä½å…ƒçµ„ç‚º 16(0001 0110)ã€‚0001 è¡¨ç¤º 1 å€‹é …ç›®ï¼Œ0110 è¡¨ç¤ºç‚ºè³‡æ–™å‹åˆ¥ç‚º int64ã€‚  ç¬¬ 10 ~ 11 å€‹ä½å…ƒçµ„è¡¨ç¤º 1337 çš„åå…­é€²åˆ¶ç·¨ç¢¼(å…ˆä½œ ZigZagï¼Œå†ä½œ varint)ã€‚  ç¬¬ 12 ~ 34 å€‹ä½å…ƒçµ„è¡¨ç¤ºå€¼ä¸€å€‹é™£åˆ—é›†åˆã€‚\n   ç¬¬ 12 å€‹ä½å…ƒçµ„ç‚º 19(0001 1001)ã€‚0001 è¡¨ç¤º 1 å€‹é …ç›®ï¼Œ1001 è¡¨ç¤ºç‚ºè³‡æ–™å‹åˆ¥ç‚º listã€‚  ç¬¬ 13 å€‹ä½å…ƒçµ„ç‚º 28(0010 1000)ã€‚0010 è¡¨ç¤º 2 å€‹é …ç›®ï¼Œ1000 è¡¨ç¤ºç‚ºè³‡æ–™å‹åˆ¥ç‚º stringã€‚  ç¬¬ 14 ~ 25 å€‹ä½å…ƒçµ„è¡¨ç¤º daydreaming çš„é•·åº¦ åŠ ASCII ç·¨ç¢¼ã€‚  ç¬¬ 26 ~ 33 å€‹ä½å…ƒçµ„è¡¨ç¤º hacking çš„é•·åº¦ åŠ ASCII ç·¨ç¢¼ã€‚  ç¬¬ 34 å€‹ä½å…ƒçµ„ç‚ºæ­¤é›†åˆçš„çµæŸæ¨™è¨˜ã€‚  è©³ç´°æ•™å­¸å¯åƒè€ƒ  Thrift Compact protocol encoding ã€‚     Protocol Buffers  ä¸‹åœ–ç‚º Protocol Buffers ç·¨ç¢¼å¾Œçš„æ ¼å¼å®šç¾©ï¼š\n      Avro  ä¸‹åœ–ç‚º Thrift CompactProtocol ç·¨ç¢¼å¾Œçš„æ ¼å¼å®šç¾©ï¼š\n      Writeræ¨¡å¼èˆ‡Readeræ¨¡å¼  \n     \n       Writer æ¨¡å¼ ï¼š \n      æ‡‰ç”¨ç¨‹å¼æƒ³è¦ç·¨ç¢¼ä¸€äº›è³‡æ–™(å°‡å…¶å¯«å…¥æª”æ¡ˆæˆ–è³‡æ–™åº«ï¼Œé€éç¶²è·¯å‚³é€ç­‰)æ™‚ï¼Œå®ƒä½¿ç”¨å®ƒçŸ¥é“çš„ä»»ä½•ç‰ˆæœ¬çš„æ¨¡å¼ç·¨ç¢¼è³‡æ–™ã€‚ \n   \n    \n       Reader æ¨¡å¼ ï¼š \n      æ‡‰ç”¨ç¨‹å¼æƒ³è¦è§£ç¢¼ä¸€äº›è³‡æ–™(å¾ä¸€å€‹æª”æ¡ˆæˆ–è³‡æ–™åº«è®€å–è³‡æ–™ï¼Œå¾ç¶²è·¯æ¥æ”¶è³‡æ–™ç­‰)æ™‚ï¼Œå®ƒå¸Œæœ›è³‡æ–™åœ¨æŸå€‹æ¨¡å¼ä¸­ã€‚ \n    Avro çš„é—œéµæ€æƒ³æ˜¯ Writer æ¨¡å¼å’Œ Reader æ¨¡å¼ä¸å¿…æ˜¯ç›¸åŒçš„ - ä»–å€‘åªéœ€è¦ç›¸å®¹ã€‚ç•¶è³‡æ–™è§£ç¢¼(è®€å–)æ™‚ï¼ŒAvro åº«é€éä¸¦æ’æª¢è¦– Writer æ¨¡å¼å’Œ Reader æ¨¡å¼ä¸¦å°‡è³‡æ–™å¾ Writer æ¨¡å¼è½‰æ›åˆ° Reader æ¨¡å¼ä¾†è§£æ±ºå·®ç•°ã€‚  Writer æ¨¡å¼å’Œ Reader æ¨¡å¼çš„æ¬„ä½é †åºä¸åŒï¼Œé€™æ˜¯æ²’æœ‰å•é¡Œçš„ï¼Œå› ç‚ºæ¨¡å¼è§£æé€éæ¬„ä½ååŒ¹é…æ¬„ä½ã€‚å¦‚æœè®€å–è³‡æ–™çš„ç¨‹å¼ç¢¼é‡åˆ°å‡ºç¾åœ¨ Writer æ¨¡å¼ä¸­ä½†ä¸åœ¨ Reader æ¨¡å¼ä¸­çš„æ¬„ä½ï¼Œå‰‡å¿½ç•¥å®ƒã€‚å¦‚æœè®€å–è³‡æ–™çš„ç¨‹å¼ç¢¼éœ€è¦æŸå€‹æ¬„ä½ï¼Œä½†æ˜¯ Writer æ¨¡å¼ä¸åŒ…å«è©²åç¨±çš„æ¬„ä½ï¼Œå‰‡ä½¿ç”¨åœ¨ Reader æ¨¡å¼ä¸­å®£å‘Šçš„é è¨­å€¼å¡«å……ã€‚       Writeræ¨¡å¼åˆ°åº•æ˜¯ä»€éº¼  å°æ–¼ä¸€æ®µç‰¹å®šçš„ç·¨ç¢¼è³‡æ–™ï¼ŒReader å¦‚ä½•çŸ¥é“å…¶ Writer æ¨¡å¼ï¼Ÿé€™å–æ±ºæ–¼ Avro ä½¿ç”¨çš„ä¸Šä¸‹æ–‡ã€‚ä¾‹å¦‚ï¼š   æœ‰å¾ˆå¤šè¨˜éŒ„çš„å¤§æª”æ¡ˆã€‚  æ”¯æ´ç¨ç«‹å¯«å…¥çš„è¨˜éŒ„çš„è³‡æ–™åº«ã€‚  é€éç¶²è·¯é€£ç·šå‚³é€è¨˜éŒ„ã€‚    æ¨¡å¼çš„å„ªé»   å¯ä»¥æ¯”å„ç¨® â€œäºŒé€²ä½åˆ¶ JSONâ€ è®Šé«”æ›´ç·Šæ¹Šï¼Œå› ç‚ºå®ƒå€‘å¯ä»¥çœç•¥ç·¨ç¢¼è³‡æ–™ä¸­çš„æ¬„ä½åç¨±ã€‚  æ¨¡å¼æ˜¯ä¸€ç¨®æœ‰åƒ¹å€¼çš„æ–‡ä»¶å½¢å¼ï¼Œå› ç‚ºæ¨¡å¼æ˜¯è§£ç¢¼æ‰€å¿…éœ€çš„ï¼Œæ‰€ä»¥å¯ä»¥ç¢ºå®šå®ƒæ˜¯æœ€æ–°çš„ã€‚  ç¶­è­·ä¸€å€‹æ¨¡å¼çš„è³‡æ–™åº«å…è¨±ä½ åœ¨éƒ¨ç½²ä»»ä½•å…§å®¹ä¹‹å‰æª¢æŸ¥æ¨¡å¼æ›´æ”¹çš„å‘å‰å’Œå‘å¾Œç›¸å®¹æ€§ã€‚  å°æ–¼éœæ…‹å‹åˆ¥ç¨‹å¼èªè¨€çš„ä½¿ç”¨è€…ä¾†èªªï¼Œå¾æ¨¡å¼ç”Ÿæˆç¨‹å¼ç¢¼çš„èƒ½åŠ›æ˜¯æœ‰ç”¨çš„ï¼Œå› ç‚ºå®ƒå¯ä»¥åœ¨ç·¨è­¯æ™‚é€²è¡Œå‹åˆ¥æª¢æŸ¥ã€‚    è³‡æ–™æµçš„å‹åˆ¥  æƒ³è¦å°‡æŸäº›è³‡æ–™å‚³é€åˆ°ä¸å…±äº«è¨˜æ†¶é«”çš„å¦ä¸€å€‹ç¨‹åºï¼Œå°±éœ€è¦å°‡å®ƒç·¨ç¢¼ç‚ºä¸€å€‹ä½å…ƒçµ„åºåˆ—ã€‚è€Œè³‡æ–™å¯ä»¥é€éå¤šç¨®æ–¹å¼å¾ä¸€å€‹æµç¨‹æµå‘å¦ä¸€å€‹æµç¨‹ï¼Œä¸‹åˆ—æ˜¯ä¸€äº›å¸¸è¦‹çš„æ–¹å¼ï¼š   é€éè³‡æ–™åº«(è©³ç´°åƒé–± è³‡æ–™åº«ä¸­çš„è³‡æ–™æµ)ã€‚  é€éæœå‹™å‘¼å«(è©³ç´°åƒé–± æœå‹™ä¸­çš„è³‡æ–™æµï¼šRESTèˆ‡RPC)ã€‚  é€ééåŒæ­¥è¨Šæ¯å‚³é(è©³ç´°åƒé–± è¨Šæ¯å‚³éä¸­çš„è³‡æ–™æµ)ã€‚    è³‡æ–™åº«ä¸­çš„è³‡æ–™æµ  åœ¨è³‡æ–™åº«ä¸­ï¼Œå¯«å…¥è³‡æ–™åº«çš„éç¨‹å°è³‡æ–™é€²è¡Œç·¨ç¢¼ï¼Œå¾è³‡æ–™åº«è®€å–çš„éç¨‹å°è³‡æ–™é€²è¡Œè§£ç¢¼ã€‚å‡è‹¥ä»Šå¤©æœ‰ä¸€å€‹ç¨‹åºè¨ªå•è³‡æ–™åº«ï¼Œåœ¨é€™ç¨®æƒ…æ³ä¸‹ï¼Œç•¶ç¨‹åºæ›´æ–°ç‚ºå¾ŒçºŒç‰ˆæœ¬ï¼Œå°±å¿…é ˆè€ƒæ…®å°‡è³‡æ–™åº«ä¸­çš„å…§å®¹å„²å­˜ç‚ºèƒ½å‘æœªä¾†çš„è‡ªèº«ç¨‹åºå‚³é€è¨Šæ¯ã€‚å› æ­¤å‘å¾Œç›¸å®¹æ€§é¡¯ç„¶æ˜¯å¿…è¦çš„ï¼Œå¦å‰‡ä½ æœªä¾†çš„ç¨‹åºå°‡ç„¡æ³•è§£ç¢¼ä½ ä»¥å‰ç¨‹åºçš„è³‡æ–™ã€‚    ç•¶è¼ƒèˆŠç‰ˆæœ¬çš„æ‡‰ç”¨ç¨‹å¼æ›´æ–°ä»¥å‰ç”±è¼ƒæ–°ç‰ˆæœ¬çš„æ‡‰ç”¨ç¨‹å¼ç·¨å¯«çš„è³‡æ–™æ™‚ï¼Œå¦‚æœä¸å°å¿ƒï¼Œè³‡æ–™å¯èƒ½æœƒä¸Ÿå¤±ã€‚    åœ¨ä¸åŒçš„æ™‚é–“å¯«å…¥ä¸åŒçš„å€¼  è³‡æ–™åº«é€šå¸¸å…è¨±ä»»ä½•æ™‚å€™æ›´æ–°ä»»ä½•å€¼ã€‚é€™æ„å‘³è‘—åœ¨ä¸€å€‹å–®ä¸€çš„è³‡æ–™åº«ä¸­ï¼Œå¯èƒ½æœ‰ä¸€äº›å€¼æ˜¯äº”æ¯«ç§’å‰å¯«çš„ï¼Œè€Œä¸€äº›å€¼æ˜¯äº”å¹´å‰å¯«çš„ã€‚  å°‡è³‡æ–™é‡å¯«(é·ç§»)åˆ°ä¸€å€‹æ–°çš„æ¨¡å¼ç•¶ç„¶æ˜¯å¯èƒ½çš„ï¼Œä½†æ˜¯åœ¨ä¸€å€‹å¤§è³‡æ–™é›†ä¸ŠåŸ·è¡Œæ˜¯ä¸€å€‹æ˜‚è²´çš„äº‹æƒ…ï¼Œæ‰€ä»¥å¤§å¤šæ•¸è³‡æ–™åº«å¦‚æœå¯èƒ½çš„è©±å°±é¿å…å®ƒã€‚å¤§å¤šæ•¸é—œä¿‚è³‡æ–™åº«éƒ½å…è¨±ç°¡å–®çš„æ¨¡å¼æ›´æ”¹ï¼Œä¾‹å¦‚æ–°å¢ä¸€å€‹é è¨­å€¼ç‚ºç©ºçš„æ–°åˆ—ï¼Œè€Œä¸é‡å¯«ç¾æœ‰è³‡æ–™ã€‚è®€å–èˆŠè¡Œæ™‚ï¼Œå°æ–¼ç£ç¢Ÿä¸Šçš„ç·¨ç¢¼è³‡æ–™ç¼ºå°‘çš„ä»»ä½•åˆ—ï¼Œè³‡æ–™åº«å°‡å¡«å……ç©ºå€¼ã€‚  å› æ­¤ï¼Œæ¨¡å¼æ¼”è®Šå…è¨±æ•´å€‹è³‡æ–™åº«çœ‹èµ·ä¾†å¥½åƒæ˜¯ç”¨å–®å€‹æ¨¡å¼ç·¨ç¢¼çš„ï¼Œå³ä½¿åº•å±¤å„²å­˜å¯èƒ½åŒ…å«ç”¨å„ç¨®æ­·å²ç‰ˆæœ¬çš„æ¨¡å¼ç·¨ç¢¼çš„è¨˜éŒ„ã€‚    æ­¸æª”å„²å­˜  ä¹Ÿè¨±ä½ ä¸æ™‚ç‚ºè³‡æ–™åº«å»ºç«‹ä¸€å€‹å¿«ç…§ï¼Œä¾‹å¦‚å‚™ä»½æˆ–è¼‰å…¥åˆ°è³‡æ–™å€‰åº«ã€‚åœ¨é€™ç¨®æƒ…æ³ä¸‹ï¼Œå³ä½¿æºè³‡æ–™åº«ä¸­çš„åŸå§‹ç·¨ç¢¼åŒ…å«ä¾†è‡ªä¸åŒæ™‚ä»£çš„æ¨¡å¼ç‰ˆæœ¬çš„æ··åˆï¼Œè³‡æ–™è½‰å„²é€šå¸¸ä¹Ÿå°‡ä½¿ç”¨æœ€æ–°æ¨¡å¼é€²è¡Œç·¨ç¢¼ã€‚æ—¢ç„¶ä½ ä¸ç®¡æ€æ¨£éƒ½è¦è¤‡è£½è³‡æ–™ï¼Œé‚£éº¼ä½ å¯ä»¥å°é€™å€‹è³‡æ–™è¤‡è£½é€²è¡Œä¸€è‡´çš„ç·¨ç¢¼ã€‚  ç”±æ–¼è³‡æ–™è½‰å„²æ˜¯ä¸€æ¬¡å¯«å…¥çš„ï¼Œè€Œä¸”ä»¥å¾Œæ˜¯ä¸å¯è®Šçš„ï¼Œæ‰€ä»¥ Avro ç‰©ä»¶å®¹å™¨æª”æ¡ˆç­‰æ ¼å¼éå¸¸é©åˆã€‚é€™ä¹Ÿæ˜¯ä¸€å€‹å¾ˆå¥½çš„æ©Ÿæœƒï¼Œå¯ä»¥å°‡è³‡æ–™ç·¨ç¢¼ç‚ºé¢å‘åˆ†æçš„åˆ—å¼æ ¼å¼ï¼Œä¾‹å¦‚åˆ—å£“ç¸®(Parquet)ã€‚    æœå‹™ä¸­çš„è³‡æ–™æµï¼šRESTèˆ‡RPC  é€éç¶²è·¯é€²è¡Œé€šè¨Šçš„æ–¹å¼æœ€å¸¸è¦‹çš„å®‰æ’å…©å€‹è§’è‰²ï¼š  \n     \n       ä¼ºæœå™¨ ï¼š \n      é€éç¶²è·¯å…¬é–‹ APIï¼Œä¹Ÿå°±æ˜¯æ‰€è¬‚çš„æœå‹™ã€‚ \n   \n    \n       å®¢æˆ¶ç«¯ ï¼š \n      å¯ä»¥é€£ç·šåˆ°ä¼ºæœå™¨ä»¥å‘è©² API ç™¼å‡ºè«‹æ±‚ã€‚ \n    Web ä»¥é€™ç¨®æ–¹å¼å·¥ä½œï¼šå®¢æˆ¶(Web ç€è¦½å™¨)å‘ Web ä¼ºæœå™¨ç™¼å‡ºè«‹æ±‚ï¼Œé€é GET è«‹æ±‚ä¸‹è¼‰ HTMLã€CSSã€JavaScriptã€å½±è±¡ç­‰ï¼Œä¸¦é€é POST è«‹æ±‚æäº¤è³‡æ–™åˆ°ä¼ºæœå™¨ã€‚  API å‰‡åŒ…å«ä¸€çµ„æ¨™æº–çš„å”è­°å’Œè³‡æ–™æ ¼å¼(HTTPã€URLã€SSL/TLSã€HTML ç­‰)ã€‚ç”±æ–¼ç¶²è·¯ç€è¦½å™¨ã€ç¶²è·¯ä¼ºæœå™¨å’Œç¶²ç«™ä½œè€…å¤§å¤šåŒæ„é€™äº›æ¨™æº–ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ä»»ä½•ç¶²è·¯ç€è¦½å™¨è¨ªå•ä»»ä½•ç¶²ç«™ã€‚  ä¹Ÿç”±æ–¼ Web ç€è¦½å™¨ä¸æ˜¯å”¯ä¸€çš„å®¢æˆ¶ç«¯å‹åˆ¥ï¼Œæ‰€ä»¥ä¼ºæœå™¨çš„éŸ¿æ‡‰é€šå¸¸ä¸æ˜¯ç”¨æ–¼é¡¯ç¤ºçµ¦äººçš„ HTMLï¼Œè€Œæ˜¯ä¾¿æ–¼å®¢æˆ¶ç«¯æ‡‰ç”¨ç¨‹å¼é€²ä¸€æ­¥è™•ç†çš„ç·¨ç¢¼è³‡æ–™(ä¾‹å¦‚ JSON)ã€‚é›–ç„¶ HTTP å¯èƒ½è¢«ç”¨ä½œå‚³è¼¸å”è­°ï¼Œä½†é ‚å±¤å¯¦ç¾çš„ API æ˜¯ç‰¹å®šæ–¼æ‡‰ç”¨ç¨‹å¼çš„ï¼Œå®¢æˆ¶ç«¯å’Œä¼ºæœå™¨éœ€è¦å°±è©² API çš„ç´°ç¯€é”æˆä¸€è‡´ã€‚  ä¼ºæœå™¨æœ¬èº«å¯ä»¥æ˜¯å¦ä¸€å€‹æœå‹™çš„å®¢æˆ¶ç«¯(ä¾‹å¦‚ï¼Œå…¸å‹çš„ Web æ‡‰ç”¨ä¼ºæœå™¨å……ç•¶è³‡æ–™åº«çš„å®¢æˆ¶ç«¯)ã€‚é€™ç¨®æ–¹æ³•é€šå¸¸ç”¨æ–¼å°‡å¤§å‹æ‡‰ç”¨ç¨‹å¼æŒ‰ç…§åŠŸèƒ½å€åŸŸåˆ†è§£ç‚ºè¼ƒå°çš„æœå‹™ï¼Œé€™æ¨£ç•¶ä¸€å€‹æœå‹™éœ€è¦ä¾†è‡ªå¦ä¸€å€‹æœå‹™çš„æŸäº›åŠŸèƒ½æˆ–è³‡æ–™æ™‚ï¼Œå°±æœƒå‘å¦ä¸€å€‹æœå‹™ç™¼å‡ºè«‹æ±‚ã€‚é€™ç¨®æ§‹å»ºæ‡‰ç”¨ç¨‹å¼çš„æ–¹å¼å‚³çµ±ä¸Šè¢«ç¨±ç‚º  é¢å‘æœå‹™çš„é«”ç³»çµæ§‹ (service-oriented architectureï¼ŒSOA)ï¼Œæœ€è¿‘è¢«æ”¹é€²å’Œæ›´åç‚º  å¾®æœå‹™æ¶æ§‹ ã€‚  é€™é¡æœå‹™é¡ä¼¼æ–¼è³‡æ–™åº«ï¼Œå®ƒå€‘é€šå¸¸å…è¨±å®¢æˆ¶ç«¯æäº¤å’ŒæŸ¥è©¢è³‡æ–™ã€‚ä¸¦å…¬é–‹äº†ä¸€å€‹ç‰¹å®šæ–¼æ‡‰ç”¨ç¨‹å¼çš„ APIï¼Œåªå…è¨±ç”±æœå‹™çš„æ¥­å‹™é‚è¼¯(æ‡‰ç”¨ç¨‹å¼ç¨‹å¼ç¢¼)é å®šçš„è¼¸å…¥å’Œè¼¸å‡ºã€‚é€™ç¨®é™åˆ¶æä¾›äº†ä¸€å®šç¨‹åº¦çš„å°è£ï¼Œé™åˆ¶äº†å°å®¢æˆ¶å¯ä»¥åšä»€éº¼å’Œä¸å¯ä»¥åšä»€éº¼ã€‚é¢å‘æœå‹™ / å¾®æœå‹™æ¶æ§‹çš„è¨­è¨ˆç›®æ¨™æ˜¯ä½¿æœå‹™ç¨ç«‹éƒ¨ç½²ä¾†è®“æ‡‰ç”¨ç¨‹å¼æ›´æ˜“æ–¼æ›´æ”¹å’Œç¶­è­·ã€‚æ¯å€‹æœå‹™æ‡‰è©²ç”±ä¸€å€‹é–‹ç™¼åœ˜éšŠæ“æœ‰ï¼Œè€Œä¸å¿…èˆ‡å…¶ä»–åœ˜éšŠå”èª¿ï¼Œå› æ­¤ä¼ºæœå™¨å’Œå®¢æˆ¶ç«¯ä½¿ç”¨çš„è³‡æ–™ç·¨ç¢¼å¿…é ˆåœ¨ä¸åŒç‰ˆæœ¬çš„æœå‹™ API ä¹‹é–“ç›¸å®¹ã€‚    Webæœå‹™  æœå‹™ä½¿ç”¨ HTTP ä½œç‚ºåº•å±¤é€šè¨Šå”è­°æ™‚ï¼Œå¯ç¨±ä¹‹ç‚º Web æœå‹™ã€‚å®ƒä¸åƒ…åœ¨ Web ä¸Šä½¿ç”¨ï¼Œè€Œä¸”åœ¨å¹¾å€‹ä¸åŒçš„ç’°å¢ƒä¸­ä½¿ç”¨ï¼š   åŸ·è¡Œåœ¨ä½¿ç”¨è€…è£ç½®ä¸Šçš„å®¢æˆ¶ç«¯æ‡‰ç”¨ç¨‹å¼ï¼Œé€é HTTP å‘æœå‹™ç™¼å‡ºè«‹æ±‚ã€‚  ä¸€å€‹æœå‹™å‘åŒä¸€çµ„ç¹”æ“æœ‰çš„å¦ä¸€å€‹æœå‹™æå‡ºè«‹æ±‚ï¼Œé€™äº›æœå‹™é€šå¸¸ä½æ–¼åŒä¸€è³‡æ–™ä¸­å¿ƒå…§ï¼Œä½œç‚ºé¢å‘æœå‹™ / å¾®æœå‹™æ¶æ§‹çš„ä¸€éƒ¨åˆ†ã€‚(æ”¯æ´é€™ç¨®ç”¨ä¾‹çš„è»Ÿé«”æœ‰æ™‚è¢«ç¨±ç‚º  ä¸­ä»‹è»Ÿé«” (middleware))  ä¸€å€‹æœå‹™é€éç¶²éš›ç¶²è·¯å‘ä¸åŒçµ„ç¹”æ‰€æ“æœ‰çš„æœå‹™æå‡ºè«‹æ±‚ã€‚é€™ç”¨æ–¼ä¸åŒçµ„ç¹”å¾Œç«¯ç³»çµ±ä¹‹é–“çš„è³‡æ–™äº¤æ›ã€‚æ­¤é¡åˆ¥åŒ…æ‹¬ç”±ç·šä¸Šæœå‹™(å¦‚ä¿¡ç”¨å¡è™•ç†ç³»çµ±)æä¾›çš„å…¬å…± APIï¼Œæˆ–ç”¨æ–¼å…±äº«è¨ªå•ä½¿ç”¨è€…è³‡æ–™çš„ OAuthã€‚  å…©ç¨®æµè¡Œçš„ Web æœå‹™æ–¹æ³•ï¼š  \n     \n       REST ï¼š \n      æ˜¯ä¸€å€‹åŸºæ–¼ HTTP åŸå‰‡çš„è¨­è¨ˆã€‚å¼·èª¿ç°¡å–®çš„è³‡æ–™æ ¼å¼ï¼Œä½¿ç”¨ URL ä¾†æ¨™è­˜è³‡æºï¼Œä¸¦ä½¿ç”¨ HTTP åŠŸèƒ½é€²è¡Œå¿«å–æ§åˆ¶ï¼Œèº«ä»½é©—è­‰å’Œå…§å®¹å‹åˆ¥å”å•†ã€‚ \n   \n    \n       SOAP ï¼š \n      ç”¨æ–¼è£½ä½œç¶²è·¯ API è«‹æ±‚ï¼Œä½¿ç”¨ç¨±ç‚º Web æœå‹™æè¿°èªè¨€(WSDLï¼Œè©³ç´°æ•™å­¸å¯åƒè€ƒ  WSDLæ•™å­¸ )çš„åŸºæ–¼ XML çš„å”è­°ã€‚WSDL æ”¯æ´ç¨‹å¼ç¢¼ç”Ÿæˆï¼Œå®¢æˆ¶ç«¯å¯ä»¥ä½¿ç”¨æœ¬åœ°é¡å’Œæ–¹æ³•å‘¼å«(ç·¨ç¢¼ç‚º XML è¨Šæ¯ä¸¦ç”±æ¡†æ¶å†æ¬¡è§£ç¢¼)è¨ªå•é ç«¯æœå‹™ã€‚é›–ç„¶å®ƒæœ€å¸¸ç”¨æ–¼ HTTPï¼Œä½†å…¶ç›®çš„æ˜¯ç¨ç«‹æ–¼ HTTPï¼Œä¸¦é¿å…ä½¿ç”¨å¤§å¤šæ•¸ HTTP åŠŸèƒ½ã€‚ \n    WSDLæ–‡ä»¶ç¯„ä¾‹å¦‚ä¸‹ï¼š   <definitions name = \"HelloService\"\n   targetNamespace = \"http://www.examples.com/wsdl/HelloService.wsdl\"\n   xmlns = \"http://schemas.xmlsoap.org/wsdl/\"\n   xmlns:soap = \"http://schemas.xmlsoap.org/wsdl/soap/\"\n   xmlns:tns = \"http://www.examples.com/wsdl/HelloService.wsdl\"\n   xmlns:xsd = \"http://www.w3.org/2001/XMLSchema\">\n\n   <message name = \"SayHelloRequest\">\n      <part name = \"firstName\" type = \"xsd:string\"/>\n   </message>\n\n   <message name = \"SayHelloResponse\">\n      <part name = \"greeting\" type = \"xsd:string\"/>\n   </message>\n\n   <portType name = \"Hello_PortType\">\n      <operation name = \"sayHello\">\n         <input message = \"tns:SayHelloRequest\"/>\n         <output message = \"tns:SayHelloResponse\"/>\n      </operation>\n   </portType>\n\n   <binding name = \"Hello_Binding\" type = \"tns:Hello_PortType\">\n      <soap:binding style = \"rpc\"\n         transport = \"http://schemas.xmlsoap.org/soap/http\"/>\n      <operation name = \"sayHello\">\n         <soap:operation soapAction = \"sayHello\"/>\n         <input>\n            <soap:body\n               encodingStyle = \"http://schemas.xmlsoap.org/soap/encoding/\"\n               namespace = \"urn:examples:helloservice\"\n               use = \"encoded\"/>\n         </input>\n\n         <output>\n            <soap:body\n               encodingStyle = \"http://schemas.xmlsoap.org/soap/encoding/\"\n               namespace = \"urn:examples:helloservice\"\n               use = \"encoded\"/>\n         </output>\n      </operation>\n   </binding>\n\n   <service name = \"Hello_Service\">\n      <documentation>WSDL File for HelloService</documentation>\n      <port binding = \"tns:Hello_Binding\" name = \"Hello_Port\">\n         <soap:address\n            location = \"http://www.examples.com/SayHello/\" />\n      </port>\n   </service>\n</definitions>\n    é ç«¯éç¨‹å‘¼å«(RPC)çš„å•é¡Œ  é ç«¯éç¨‹å‘¼å«(RPC)çš„æ€æƒ³ï¼ŒRPC æ¨¡å‹è©¦åœ–å‘é ç«¯ç¶²è·¯æœå‹™ç™¼å‡ºè«‹æ±‚ï¼Œçœ‹èµ·ä¾†èˆ‡åœ¨åŒä¸€ç¨‹åºä¸­å‘¼å«å‡½å¼æˆ–æ–¹æ³•ç›¸åŒã€‚ä½†æ ¹æœ¬ä¸Šæ˜¯æœ‰ç¼ºé™·çš„ã€‚å› ç‚ºç¶²è·¯è«‹æ±‚èˆ‡æœ¬åœ°å‡½å¼å‘¼å«é‚„æ˜¯æœ‰ä¸åŒä¹‹è™•ï¼š     æœ¬åœ°å‡½å¼å‘¼å«  ç¶²è·¯è«‹æ±‚    å¯é æ¸¬çš„ï¼ŒæˆåŠŸæˆ–å¤±æ•—å–æ±ºæ–¼å—ä½ æ§åˆ¶çš„å¼•æ•¸  ä¸å¯é æ¸¬çš„ï¼Œè«‹æ±‚æˆ–éŸ¿æ‡‰å¯èƒ½ç”±æ–¼ç¶²è·¯å•é¡Œæœƒä¸Ÿå¤±   è¿”å›/ä¸è¿”å›çµæœã€ä¸Ÿæ“²ç•°å¸¸  è¿”å›/ä¸è¿”å›çµæœã€ä¸Ÿæ“²ç•°å¸¸ã€æˆ–è€…å› ç‚ºè¶…æ™‚é€ æˆè¿”å›æ™‚å·²æ²’æœ‰çµæœ   ä¸æœƒç™¼ç”ŸéŸ¿æ‡‰ä¸Ÿå¤±çš„æƒ…æ³  èƒ½æœƒç™¼ç”Ÿè«‹æ±‚å¯¦éš›ä¸Šå·²ç¶“å®Œæˆï¼Œåªæ˜¯éŸ¿æ‡‰ä¸Ÿå¤±çš„æƒ…æ³   åŸ·è¡Œæ™‚é–“å¤§è‡´ç›¸åŒ  åŸ·è¡Œæ™‚é–“ä¸ç©©å®š(æœƒæœ‰ç¶²è·¯æ“å¡æˆ–è€…é ç«¯æœå‹™è¶…è¼‰çš„å•é¡Œ)   å¯ä»¥é«˜æ•ˆåœ°å°‡å¼•ç”¨(æŒ‡æ¨™)å‚³éçµ¦æœ¬åœ°è¨˜æ†¶é«”ä¸­çš„ç‰©ä»¶  æ‰€æœ‰å¼•æ•¸éƒ½éœ€è¦è¢«ç·¨ç¢¼æˆå¯ä»¥é€éç¶²è·¯å‚³é€çš„ä¸€ç³»åˆ—ä½å…ƒçµ„    RPCçš„ç•¶å‰æ–¹å‘  ä¸Šè¿°çš„ç·¨ç¢¼åœ¨åŸºç¤ä¸Šæ§‹å»ºäº†å„ç¨® RPC æ¡†æ¶ï¼š   Thrift å’Œ Avro å¸¶æœ‰ RPC æ”¯æ´  gRPC æ˜¯ä½¿ç”¨ Protocol Buffers çš„ RPC å¯¦ç¾  Finagle ä¹Ÿä½¿ç”¨ Thrift  Rest.li ä½¿ç”¨ JSON over HTTPã€‚  æ–°ä¸€ä»£çš„ RPC æ¡†æ¶æ›´åŠ æ˜ç¢ºçš„æ˜¯ï¼Œé ç«¯è«‹æ±‚èˆ‡æœ¬åœ°å‡½å¼å‘¼å«ä¸åŒã€‚   Finagle å’Œ Rest.li ä½¿ç”¨ futures(promises)ä¾†å°è£å¯èƒ½å¤±æ•—çš„éåŒæ­¥æ“ä½œã€‚  gRPC æ”¯æ´æµï¼Œå…¶ä¸­ä¸€å€‹å‘¼å«ä¸åƒ…åŒ…æ‹¬ä¸€å€‹è«‹æ±‚å’Œä¸€å€‹éŸ¿æ‡‰ï¼Œé‚„å¯ä»¥æ˜¯éš¨æ™‚é–“çš„ä¸€ç³»åˆ—è«‹æ±‚å’ŒéŸ¿æ‡‰ã€‚    è¨Šæ¯å‚³éä¸­çš„è³‡æ–™æµ  RPC å’Œè³‡æ–™åº«ä¹‹é–“çš„éåŒæ­¥è¨Šæ¯å‚³éç³»çµ±ã€‚   èˆ‡ RPC é¡ä¼¼ï¼Œå› ç‚ºå®¢æˆ¶ç«¯çš„è«‹æ±‚(é€šå¸¸ç¨±ç‚ºè¨Šæ¯)ä»¥ä½å»¶é²å‚³é€åˆ°å¦ä¸€å€‹ç¨‹åºã€‚  èˆ‡è³‡æ–™åº«é¡ä¼¼ï¼Œä¸æ˜¯é€éç›´æ¥çš„ç¶²è·¯é€£ç·šå‚³é€è¨Šæ¯ï¼Œè€Œæ˜¯é€éç¨±ç‚ºè¨Šæ¯ä»£ç†(ä¹Ÿç¨±ç‚ºè¨Šæ¯ä½‡åˆ—æˆ–é¢å‘è¨Šæ¯çš„ä¸­ä»‹è»Ÿé«”)çš„ä¸­ä»‹ä¾†è‡¨æ™‚å„²å­˜è¨Šæ¯ã€‚  èˆ‡ç›´æ¥ RPC ç›¸æ¯”ï¼Œä½¿ç”¨è¨Šæ¯ä»£ç†æœ‰å¹¾å€‹å„ªé»ï¼š   å¦‚æœæ”¶ä»¶äººä¸å¯ç”¨æˆ–éè¼‰ï¼Œå¯ä»¥å……ç•¶ç·©è¡å€ï¼Œå¾è€Œæé«˜ç³»çµ±çš„å¯é æ€§ã€‚  å¯ä»¥è‡ªå‹•å°‡è¨Šæ¯é‡æ–°ç™¼é€åˆ°å…ˆå‰å·²ç¶“å´©æ½°çš„ç¨‹åºï¼Œå¾è€Œé˜²æ­¢è¨Šæ¯ä¸Ÿå¤±ã€‚  é¿å…ç™¼ä»¶äººéœ€è¦çŸ¥é“æ”¶ä»¶äººçš„ IP åœ°å€å’ŒåŸ è™Ÿ(é€™åœ¨è™›æ“¬æ©Ÿå™¨ç¶“å¸¸å‡ºå…¥çš„é›²éƒ¨ç½²ä¸­ç‰¹åˆ¥æœ‰ç”¨)ã€‚  å®ƒå…è¨±å°‡ä¸€æ¢è¨Šæ¯å‚³é€çµ¦å¤šå€‹æ”¶ä»¶äººã€‚  å°‡ç™¼ä»¶äººèˆ‡æ”¶ä»¶äººé‚è¼¯åˆ†é›¢(ç™¼ä»¶äººåªæ˜¯é‡‹å‡ºéƒµä»¶ï¼Œä¸é—œå¿ƒä½¿ç”¨è€…)ã€‚  èˆ‡ RPC ç›¸æ¯”ï¼Œå·®ç•°åœ¨æ–¼è¨Šæ¯å‚³éé€šè¨Šé€šå¸¸æ˜¯å–®å‘çš„ï¼šå‚³é€è€…é€šå¸¸ä¸æœŸæœ›æ”¶åˆ°å…¶è¨Šæ¯çš„å›è¦†ã€‚ä¸€å€‹ç¨‹åºå¯èƒ½å‚³é€ä¸€å€‹éŸ¿æ‡‰ï¼Œä½†é€™é€šå¸¸æ˜¯åœ¨ä¸€å€‹å–®ç¨çš„é€šé“ä¸Šå®Œæˆçš„ã€‚é€™ç¨®é€šè¨Šæ¨¡å¼æ˜¯éåŒæ­¥çš„ï¼šå‚³é€è€…ä¸æœƒç­‰å¾…è¨Šæ¯è¢«å‚³éï¼Œè€Œåªæ˜¯å‚³é€å®ƒï¼Œç„¶å¾Œå¿˜è¨˜å®ƒã€‚    è¨Šæ¯ä»£ç†  è¨Šæ¯ä»£ç†çš„ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼šä¸€å€‹ç¨‹åºå°‡è¨Šæ¯å‚³é€åˆ°æŒ‡å®šçš„ä½‡åˆ—æˆ–ä¸»é¡Œï¼Œä»£ç†ç¢ºä¿å°‡è¨Šæ¯å‚³éçµ¦é‚£å€‹ä½‡åˆ—æˆ–ä¸»é¡Œçš„ä¸€å€‹æˆ–å¤šå€‹æ¶ˆè²»è€…æˆ–è¨‚é–±è€…ã€‚åœ¨åŒä¸€ä¸»é¡Œä¸Šå¯ä»¥æœ‰è¨±å¤šç”Ÿç”¢è€…å’Œè¨±å¤šæ¶ˆè²»è€…ã€‚  è¨Šæ¯ä»£ç†é€šå¸¸ä¸æœƒåŸ·è¡Œä»»ä½•ç‰¹å®šçš„è³‡æ–™æ¨¡å‹ â€”â€” è¨Šæ¯åªæ˜¯åŒ…å«ä¸€äº›å…ƒè³‡æ–™çš„ä½å…ƒçµ„åºåˆ—ï¼Œå› æ­¤ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•ç·¨ç¢¼æ ¼å¼ã€‚å¦‚æœç·¨ç¢¼æ˜¯å‘å¾Œå’Œå‘å‰ç›¸å®¹çš„ï¼Œä½ å¯ä»¥éˆæ´»åœ°å°é‡‹å‡ºè€…å’Œæ¶ˆè²»è€…çš„ç·¨ç¢¼é€²è¡Œç¨ç«‹çš„ä¿®æ”¹ï¼Œä¸¦ä»¥ä»»æ„é †åºé€²è¡Œéƒ¨ç½²ã€‚    åˆ†æ•£å¼çš„Actoræ¡†æ¶  Actor æ¨¡å‹æ˜¯å–®å€‹ç¨‹åºä¸­ä½µç™¼çš„ç¨‹å¼è¨­è¨ˆæ¨¡å‹ã€‚é‚è¼¯è¢«å°è£åœ¨ actor ä¸­ï¼Œè€Œä¸æ˜¯ç›´æ¥è™•ç†åŸ·è¡Œç·’ã€‚actor é€šå¸¸ä»£è¡¨ä¸€å€‹å®¢æˆ¶æˆ–å¯¦é«”ï¼Œå®ƒå¯èƒ½æœ‰ä¸€äº›æœ¬åœ°ç‹€æ…‹(ä¸èˆ‡å…¶ä»–ä»»ä½•è§’è‰²å…±äº«)ï¼Œå®ƒé€éå‚³é€å’Œæ¥æ”¶éåŒæ­¥è¨Šæ¯èˆ‡å…¶ä»–è§’è‰²é€šè¨Šã€‚ä¸ä¿è­‰è¨Šæ¯å‚³é€ï¼šåœ¨æŸäº›éŒ¯èª¤æƒ…æ³ä¸‹ï¼Œè¨Šæ¯å°‡ä¸Ÿå¤±ã€‚ç”±æ–¼æ¯å€‹è§’è‰²ä¸€æ¬¡åªèƒ½è™•ç†ä¸€æ¢è¨Šæ¯ï¼Œå› æ­¤ä¸éœ€è¦æ“”å¿ƒåŸ·è¡Œç·’ï¼Œæ¯å€‹è§’è‰²å¯ä»¥ç”±æ¡†æ¶ç¨ç«‹æ’ç¨‹ã€‚åˆ†æ•£å¼çš„ Actor æ¡†æ¶å¯¦è³ªä¸Šæ˜¯å°‡è¨Šæ¯ä»£ç†å’Œ actor ç¨‹å¼è¨­è¨ˆæ¨¡å‹æ•´åˆåˆ°ä¸€å€‹æ¡†æ¶ä¸­ã€‚  ä¸‰å€‹æµè¡Œçš„åˆ†æ•£å¼ actor æ¡†æ¶è™•ç†è¨Šæ¯ç·¨ç¢¼å¦‚ä¸‹ï¼š   Akka ä½¿ç”¨ Java çš„å…§å»ºåºåˆ—åŒ–ï¼Œä¸æä¾›å‰å‘æˆ–å¾Œå‘ç›¸å®¹æ€§ã€‚ ä½†æ˜¯ï¼Œä½ å¯ä»¥ç”¨é¡ä¼¼ Prototol Buffers çš„æ±è¥¿æ›¿ä»£å®ƒï¼Œå¾è€Œç²å¾—æ»¾å‹•å‡ç´šçš„èƒ½åŠ›ã€‚  Orleans é è¨­ä½¿ç”¨ä¸æ”¯æ´æ»¾å‹•å‡ç´šéƒ¨ç½²çš„è‡ªå®šç¾©è³‡æ–™ç·¨ç¢¼æ ¼å¼ï¼›è¦éƒ¨ç½²æ–°ç‰ˆæœ¬çš„æ‡‰ç”¨ç¨‹å¼ï¼Œä½ éœ€è¦è¨­å®šä¸€å€‹æ–°çš„å¢é›†ï¼Œå°‡æµé‡å¾èˆŠå¢é›†é·ç§»åˆ°æ–°å¢é›†ï¼Œç„¶å¾Œé—œé–‰èˆŠå¢é›†ã€‚åƒ Akka ä¸€æ¨£ï¼Œå¯ä»¥ä½¿ç”¨è‡ªå®šç¾©åºåˆ—åŒ–å¤–æ›ã€‚  Erlang OTP ä¸­ï¼Œå°è¨˜éŒ„æ¨¡å¼é€²è¡Œæ›´æ”¹æ˜¯éå¸¸å›°é›£çš„(å„˜ç®¡ç³»çµ±å…·æœ‰è¨±å¤šç‚ºé«˜å¯ç”¨æ€§è¨­è¨ˆçš„åŠŸèƒ½)ã€‚ æ»¾å‹•å‡ç´šæ˜¯å¯èƒ½çš„ï¼Œä½†éœ€è¦ä»”ç´°è¨ˆåŠƒã€‚ ä¸€å€‹æ–°çš„å¯¦é©—æ€§çš„ maps è³‡æ–™å‹åˆ¥(2014 å¹´åœ¨ Erlang R17 ä¸­å¼•å…¥çš„é¡ä¼¼æ–¼ JSON çš„çµæ§‹)å¯èƒ½ä½¿å¾—é€™å€‹è³‡æ–™å‹åˆ¥åœ¨æœªä¾†æ›´å®¹æ˜“ã€‚    å°çµ"},{"id":"content:5.ddia:5.chapter5.md","path":"/ddia/chapter5","dir":"ddia","title":"05 è¤‡è£½","description":"","keywords":["å¼•è¨€","é ˜å°è€…èˆ‡è¿½éš¨è€…","åŒæ­¥è¤‡è£½èˆ‡éåŒæ­¥è¤‡è£½","è¤‡è£½è½å¾Œçš„å•é¡Œ","å¤šé ˜å°è¤‡è£½","ç„¡é ˜å°è¤‡è£½","å°çµ"],"body":"  \n  tr, th, td {\n    border: none!important;\n  }\n  .nolinebreak {\n    white-space: nowrap;\n  }\n  .movepadding {\n    padding-left: 2%!important;\n  }\n  å¼•è¨€   è¤‡è£½è³‡æ–™çš„ç›®çš„ï¼š   ä½¿è³‡æ–™èˆ‡ä½¿ç”¨è€…åœ¨åœ°ç†ä¸Šæ¥è¿‘ï¼ˆæ¸›å°‘å»¶é²ï¼‰  æé«˜ç³»çµ±å¯ç”¨æ€§ï¼ˆå³ä½¿éƒ¨åˆ†æ•…éšœï¼‰  æé«˜è®€å–ååé‡ï¼ˆä¼¸ç¸®è®€è«‹æ±‚æ©Ÿå™¨æ•¸é‡ï¼‰  è¤‡è£½è³‡æ–™ç³»çµ±çš„æŒ‘æˆ°ï¼š   å‡è¨­è³‡æ–™é›†éå¸¸å°  å‡è¨­æ¯è‡ºæ©Ÿå™¨å¯ä»¥å„²å­˜æ•´å€‹è³‡æ–™é›†çš„å‰¯æœ¬  è™•ç†è³‡æ–™çš„è®Šæ›´  è®Šæ›´è¤‡è£½æ¼”ç®—æ³•ï¼š   å–®é ˜å°è€…ï¼ˆsingle leaderï¼‰  å¤šé ˜å°è€…ï¼ˆmulti leaderï¼‰  ç„¡é ˜å°è€…ï¼ˆleaderlessï¼‰  è¤‡è£½æ¬Šè¡¡ï¼š   åŒæ­¥è¤‡è£½ vs éåŒæ­¥è¤‡è£½  è™•ç†å¤±æ•—çš„å‰¯æœ¬  è¤‡è£½ç®—æ³•æ­·å²ï¼š   70 å¹´ä»£ç ”ç©¶  åˆ†æ•£å¼è³‡æ–™åº«è®Šç‚ºä¸»æµ  è¤‡è£½å»¶é²å•é¡Œï¼š   æœ€çµ‚ä¸€è‡´æ€§ï¼ˆeventual consistencyï¼‰  è®€å·±ä¹‹å¯«ï¼ˆread-your-writesï¼‰  å–®èª¿è®€ï¼ˆmonotonic readï¼‰  é ˜å°è€…èˆ‡è¿½éš¨è€…   å‰¯æœ¬ï¼ˆreplicaï¼‰ï¼šå„²å­˜è³‡æ–™åº«è¤‡è£½çš„ç¯€é»ã€‚   ç¢ºä¿æ‰€æœ‰è³‡æ–™è½åœ¨æ‰€æœ‰å‰¯æœ¬ä¸Šçš„å•é¡Œï¼š\nå‘è³‡æ–™åº«çš„å¯«å…¥æ“ä½œéœ€è¦å‚³æ’­åˆ°æ‰€æœ‰å‰¯æœ¬ã€‚  åŸºæ–¼é ˜å°è€…çš„è¤‡è£½ï¼ˆleader-based replicationï¼‰ï¼š   é ˜å°è€…ï¼ˆleaderï¼‰ï¼šè² è²¬æ¥æ”¶å¯«å…¥æ“ä½œã€‚  è¿½éš¨è€…ï¼ˆfollowersï¼‰ï¼šè² è²¬æ‹‰å–æ—¥èªŒä¸¦æ›´æ–°æœ¬åœ°è³‡æ–™åº«å‰¯æœ¬ã€‚  è¤‡è£½éç¨‹ï¼š   å®¢æˆ¶ç«¯å°‡å¯«å…¥è«‹æ±‚å‚³é€çµ¦é ˜å°è€…ã€‚  é ˜å°è€…å°‡æ–°è³‡æ–™å¯«å…¥æœ¬åœ°å„²å­˜ã€‚  é ˜å°è€…å°‡è³‡æ–™è®Šæ›´å‚³é€çµ¦æ‰€æœ‰è¿½éš¨è€…ï¼ˆè¤‡è£½æ—¥èªŒ/è®Šæ›´æµï¼‰ã€‚  è¿½éš¨è€…æŒ‰ç…§ç›¸åŒè™•ç†é †åºæ›´æ–°æœ¬åœ°è³‡æ–™åº«å‰¯æœ¬ã€‚  è®€å–æ“ä½œï¼šå®¢æˆ¶ç«¯å¯ä»¥å‘é ˜å°è€…æˆ–ä»»ä¸€è¿½éš¨è€…é€²è¡ŒæŸ¥è©¢ã€‚  åŸºæ–¼é ˜å°è€…çš„è¤‡è£½æ‡‰ç”¨ç¯„ä¾‹ï¼š   é—œä¿‚è³‡æ–™åº«ï¼šPostgreSQLï¼ˆ9.0 ç‰ˆæœ¬é–‹å§‹ï¼‰ã€MySQLã€Oracle Data Guardã€SQL Server çš„ AlwaysOn å¯ç”¨æ€§çµ„ã€‚  éé—œä¿‚è³‡æ–™åº«ï¼šMongoDBã€RethinkDBã€Espressoã€‚  åˆ†æ•£å¼è¨Šæ¯ä»£ç†ï¼šKafkaã€RabbitMQ é«˜å¯ç”¨ä½‡åˆ—ã€‚  ç¶²è·¯æª”æ¡ˆç³»çµ±ï¼šDRBD ç­‰å¡Šè¤‡è£½è£ç½®ã€‚  \n      åœ– 5-1 åŸºæ–¼é ˜å°è€…çš„ï¼ˆä¸»/å¾ï¼‰è¤‡è£½  åŒæ­¥è¤‡è£½èˆ‡éåŒæ­¥è¤‡è£½   è¤‡è£½ç´°ç¯€ï¼šè¤‡è£½å¯ä»¥æ˜¯åŒæ­¥ï¼ˆsynchronouslyï¼‰æˆ–éåŒæ­¥ï¼ˆasynchronouslyï¼‰ã€‚   åŒæ­¥è¤‡è£½ï¼šä¸»åº«åœ¨å ±å‘Šå¯«å…¥æˆåŠŸå‰ï¼Œéœ€è¦ç­‰å¾…å¾åº«ç¢ºèªå·²æ”¶åˆ°å¯«å…¥æ“ä½œã€‚  éåŒæ­¥è¤‡è£½ï¼šä¸»åº«å‚³é€è¨Šæ¯ï¼Œä½†ä¸ç­‰å¾…å¾åº«éŸ¿æ‡‰ã€‚  åŒæ­¥è¤‡è£½çš„å„ªç¼ºé»ï¼š   å„ªé»ï¼šå¾åº«ä¿è­‰æœ‰èˆ‡ä¸»åº«ä¸€è‡´çš„æœ€æ–°è³‡æ–™å‰¯æœ¬ã€‚  ç¼ºé»ï¼šåŒæ­¥å¾åº«ç„¡éŸ¿æ‡‰æ™‚ï¼Œä¸»åº«ç„¡æ³•è™•ç†å¯«å…¥æ“ä½œã€‚  åŠåŒæ­¥è¤‡è£½ï¼ˆsemi-synchronousï¼‰ï¼š   ä¸€å€‹å¾åº«æ˜¯åŒæ­¥çš„ï¼Œå…¶ä»–çš„å¾åº«å‰‡æ˜¯éåŒæ­¥çš„ã€‚  åŒæ­¥å¾åº«ä¸å¯ç”¨æˆ–ç·©æ…¢æ™‚ï¼Œå°‡ä¸€å€‹éåŒæ­¥å¾åº«æ”¹ç‚ºåŒæ­¥åŸ·è¡Œã€‚  å®Œå…¨éåŒæ­¥è¤‡è£½ï¼š   ä¸»åº«å¤±æ•ˆä¸”ä¸å¯æ¢å¾©æ™‚ï¼Œå°šæœªè¤‡è£½çµ¦å¾åº«çš„å¯«å…¥æœƒä¸Ÿå¤±ã€‚  å„ªé»ï¼šä¸»åº«å¯ä»¥ç¹¼çºŒè™•ç†å¯«å…¥ï¼Œå³ä½¿æ‰€æœ‰å¾åº«éƒ½è½å¾Œã€‚  éˆå¼è¤‡è£½ï¼ˆchain replicationï¼‰ï¼š   åŒæ­¥è¤‡è£½çš„ä¸€ç¨®è®Šé«”ï¼Œæ—¨åœ¨ä¸ä¸Ÿè³‡æ–™ä¸¦æä¾›è‰¯å¥½æ•ˆèƒ½å’Œå¯ç”¨æ€§ã€‚  å·²åœ¨ä¸€äº›ç³»çµ±ä¸­å¯¦ç¾ï¼Œä¾‹å¦‚ Microsoft Azure Storageã€‚  \n      åœ– 5-2 åŸºæ–¼é ˜å°è€…çš„è¤‡è£½ï¼šä¸€å€‹åŒæ­¥å¾åº«å’Œä¸€å€‹éåŒæ­¥å¾åº«  è¤‡è£½çš„ä¸€è‡´æ€§èˆ‡å…±è­˜ï¼ˆconsensusï¼‰ï¼š   ç¬¬ä¹ç« å°‡è©³ç´°æ¢è¨å…±è­˜ç†è«–ã€‚  æœ¬ç« ä¸»è¦è¨è«–å¯¦è¸ä¸­çš„è³‡æ–™åº«å¸¸ç”¨çš„ç°¡å–®è¤‡è£½å½¢å¼ã€‚  è¨­å®šæ–°å¾ç¯€é»ï¼š   ç²å–ä¸»ç¯€é»ä¸€è‡´æ€§å¿«ç…§ã€‚  å°‡å¿«ç…§è¤‡è£½åˆ°æ–°çš„å¾ç¯€é»ã€‚  å¾ç¯€é»é€£ç·šåˆ°ä¸»ç¯€é»ä¸¦æ‹‰å–å¿«ç…§å¾Œçš„æ‰€æœ‰è³‡æ–™è®Šæ›´ã€‚  å¾ç¯€é»è¶•ä¸Šä¸»åº«å¾Œï¼Œå¯ä»¥ç¹¼çºŒåŠæ™‚è™•ç†ä¸»ç¯€é»è³‡æ–™è®ŠåŒ–ã€‚  è™•ç†ç¯€é»å®•æ©Ÿï¼š   ä»¥åŸºæ–¼é ˜å°è€…çš„è¤‡è£½å¯¦ç¾é«˜å¯ç”¨ã€‚  å¾ç¯€é»å¤±æ•ˆï¼šè¿½è¶•æ¢å¾©   é‡æ–°é€£ç·šåˆ°ä¸»ç¯€é»ã€‚  è«‹æ±‚ä¸¦è™•ç†æ–·é–‹æœŸé–“çš„æ‰€æœ‰è³‡æ–™è®Šæ›´ã€‚  ä¸»ç¯€é»å¤±æ•ˆï¼šæ•…éšœåˆ‡æ›   ç¢ºèªä¸»åº«å¤±æ•ˆã€‚  é¸æ“‡æ–°çš„ä¸»ç¯€é»ã€‚  é‡æ–°é…ç½®ç³»çµ±ä»¥å•Ÿç”¨æ–°çš„ä¸»ç¯€é»ã€‚  æ•…éšœåˆ‡æ›éç¨‹ä¸­å¯èƒ½å‡ºç¾çš„å•é¡Œï¼š   éåŒæ­¥è¤‡è£½å°è‡´è³‡æ–™æå¤±ã€‚  èˆ‡å…¶ä»–å¤–éƒ¨å„²å­˜å”èª¿æ™‚çš„å•é¡Œã€‚  è…¦è£‚å•é¡Œã€‚  è¶…æ™‚é…ç½®çš„å›°é›£ã€‚  å„˜ç®¡æœ‰äº›è»Ÿé«”æ”¯æ´è‡ªå‹•æ•…éšœåˆ‡æ›ï¼Œä½†è¨±å¤šé‹ç¶­åœ˜éšŠä»æ›´é¡˜æ„æ‰‹å‹•åŸ·è¡Œæ•…éšœåˆ‡æ›ã€‚   åˆ†æ•£å¼ç³»çµ±ä¸­çš„åŸºæœ¬å•é¡ŒåŒ…æ‹¬ç¯€é»æ•…éšœã€ä¸å¯é çš„ç¶²è·¯ã€å‰¯æœ¬ä¸€è‡´æ€§ã€æ°¸çºŒæ€§ã€å¯ç”¨æ€§å’Œå»¶é²ã€‚é€™äº›å•é¡Œå°‡åœ¨ç¬¬å…«ç« å’Œç¬¬ä¹ç« ä¸­æ·±å…¥è¨è«–ã€‚  è¤‡è£½æ—¥èªŒçš„å¯¦ç¾å¯ä»¥åˆ†ç‚ºä»¥ä¸‹å¹¾ç¨®ï¼š   åŸºæ–¼èªå¥çš„è¤‡è£½ï¼šä¸»ç¯€é»è¨˜éŒ„æ¯å€‹å¯«å…¥è«‹æ±‚ä¸¦å°‡èªå¥æ—¥èªŒå‚³é€çµ¦å¾åº«ã€‚ä½†é€™ç¨®æ–¹å¼å­˜åœ¨è«¸å¤šå•é¡Œï¼Œå¦‚éç¢ºå®šæ€§å‡½å¼ã€è‡ªå¢åˆ—ã€å‰¯ä½œç”¨ç­‰ã€‚  å‚³è¼¸é å¯«å¼æ—¥èªŒï¼ˆWALï¼‰ï¼šä¸»åº«å°‡æ—¥èªŒé€šéç¶²è·¯å‚³é€çµ¦å¾åº«ã€‚æ­¤æ–¹æ³•ä½¿è¤‡è£½èˆ‡å„²å­˜å¼•æ“ç·Šå¯†è€¦åˆï¼Œå‡ç´šè³‡æ–™åº«è»Ÿé«”å¯èƒ½éœ€è¦åœæ©Ÿã€‚  é‚è¼¯æ—¥èªŒè¤‡è£½ï¼ˆåŸºæ–¼è¡Œï¼‰ï¼šå°è¤‡è£½å’Œå„²å­˜å¼•æ“ä½¿ç”¨ä¸åŒçš„æ—¥èªŒæ ¼å¼ï¼Œä½¿ä¸»åº«å’Œå¾åº«èƒ½å¤ åŸ·è¡Œä¸åŒç‰ˆæœ¬çš„è³‡æ–™åº«è»Ÿé«”æˆ–å„²å­˜å¼•æ“ã€‚é‚è¼¯æ—¥èªŒæ ¼å¼æ›´å®¹æ˜“è§£æï¼Œæœ‰åˆ©æ–¼è³‡æ–™è®Šæ›´æ•ç²ï¼ˆchange data captureï¼‰ã€‚  åŸºæ–¼è§¸ç™¼å™¨çš„è¤‡è£½ï¼šé€šéè³‡æ–™åº«ä¸­çš„è§¸ç™¼å™¨å’Œå„²å­˜éç¨‹ï¼Œå°‡è³‡æ–™æ›´æ”¹è¨˜éŒ„åˆ°å–®ç¨çš„è¡¨ä¸­ï¼Œå†ä½¿ç”¨å¤–éƒ¨ç¨‹å¼è®€å–è©²è¡¨ä¸¦å°‡è³‡æ–™è®Šæ›´è¤‡è£½åˆ°å¦ä¸€å€‹ç³»çµ±ã€‚å„˜ç®¡é–‹éŠ·è¼ƒå¤§ä¸”å®¹æ˜“å‡ºéŒ¯ï¼Œä½†åŸºæ–¼è§¸ç™¼å™¨çš„è¤‡è£½å…·æœ‰å¾ˆé«˜çš„éˆæ´»æ€§ã€‚  ä»¥ä¸Šå››ç¨®è¤‡è£½æ–¹å¼å„æœ‰å„ªç¼ºé»ï¼Œå…·é«”æ‡‰ç”¨éœ€æ ¹æ“šå¯¦éš›æƒ…æ³é¸æ“‡åˆé©çš„è¤‡è£½æ–¹æ³•ã€‚  è¤‡è£½è½å¾Œçš„å•é¡Œ  èƒ½å¤ å®¹å¿ç¯€é»æ•…éšœåªæ˜¯äººå€‘æ¡ç”¨è¤‡è£½çš„åŸå› ä¹‹ä¸€ã€‚  åŒ…æ‹¬å®¹éŒ¯ã€å¯ä¼¸ç¸®æ€§å’Œé™ä½å»¶é²ã€‚\nåŸºæ–¼é ˜å°è€…çš„è¤‡è£½æ–¹æ³•å¯ç”¨æ–¼è®€å¤šå¯«å°‘çš„å ´æ™¯ï¼Œé€šéå¢åŠ å¾ç¯€é»ä¾†åˆ†æ•£è®€è«‹æ±‚ä»¥é”åˆ°è®€å–ä¼¸ç¸®ã€‚  ç„¶è€Œï¼Œé€™ç¨®æ–¹æ³•ä¸»è¦é©ç”¨æ–¼éåŒæ­¥è¤‡è£½ï¼Œå› ç‚ºå®Œå…¨åŒæ­¥çš„é…ç½®å®¹æ˜“å—åˆ°ç¯€é»æ•…éšœå’Œç¶²è·¯ä¸­æ–·çš„å½±éŸ¿ï¼Œå°è‡´æ•´å€‹ç³»çµ±ç„¡æ³•å¯«å…¥ã€‚æœ€å¾Œå¯èƒ½æœƒé‡åˆ°æœ€çµ‚ä¸€è‡´æ€§å•é¡Œã€‚  ç•¶æ‡‰ç”¨ç¨‹å¼è®€å–å¾ç¯€é»æ™‚ï¼Œå¯èƒ½æœƒçœ‹åˆ°éæ™‚çš„è³‡è¨Šï¼Œå°è‡´ä¸ä¸€è‡´ã€‚\né€™ç¨®ä¸ä¸€è‡´æ˜¯æš«æ™‚çš„ï¼Œä½†åœ¨æŸäº›æƒ…æ³ä¸‹ï¼Œå¦‚ç³»çµ±è² è¼‰éé«˜æˆ–ç¶²è·¯å•é¡Œï¼Œå»¶é²å¯èƒ½é”åˆ°å¹¾åˆ†é˜ã€‚  é€™ä¸åƒ…æ˜¯ç†è«–å•é¡Œï¼Œé‚„æœƒåœ¨æ‡‰ç”¨è¨­è¨ˆä¸­ç”¢ç”Ÿå¯¦éš›å½±éŸ¿ã€‚\næœ¬ç¯€å°‡æ¢è¨è¤‡è£½å»¶é²æ™‚å¯èƒ½å‡ºç¾çš„å•é¡Œä»¥åŠè§£æ±ºæ–¹æ¡ˆã€‚  è®€å·±ä¹‹å¯«  ç”¨æˆ¶æäº¤è³‡æ–™å¾Œå¯èƒ½æœƒç«‹å³æŸ¥çœ‹ã€‚  ç„¶è€Œï¼Œå¦‚æœä½¿ç”¨ç•°æ­¥è¤‡è£½ï¼Œæ–°è³‡æ–™å¯èƒ½å°šæœªåŒæ­¥åˆ°å‰¯æœ¬ä¸­ï¼Œå°è‡´ç”¨æˆ¶çœ‹ä¸åˆ°å‰›å‰›æäº¤çš„è³‡æ–™ï¼Œé€ æˆç”¨æˆ¶ä¸æ»¿ã€‚  \n      åœ– 5-3 ä½¿ç”¨è€…å¯«å…¥å¾Œå¾èˆŠå‰¯æœ¬ä¸­è®€å–è³‡æ–™ã€‚éœ€è¦å¯«å¾Œå³è®€ (read-after-write) çš„ä¸€è‡´æ€§ä¾†é˜²æ­¢é€™ç¨®ç•°å¸¸  ã€Œå¯«å¾Œè®€ä¸€è‡´æ€§ã€çš„æ¦‚å¿µï¼Œå®ƒç¢ºä¿ç”¨æˆ¶åœ¨æäº¤æ›´æ–°å¾Œé‡æ–°åŠ è¼‰é é¢æ™‚èƒ½çœ‹åˆ°è‡ªå·±çš„æ›´æ–°ã€‚é€™ä¸¦ä¸ä¿è­‰å…¶ä»–ç”¨æˆ¶ç«‹å³çœ‹åˆ°é€™äº›æ›´æ–°ï¼Œä½†å¯ç¢ºä¿ç”¨æˆ¶çš„è¼¸å…¥å·²è¢«å¦¥å–„å„²å­˜ã€‚  åœ¨åŸºæ–¼é ˜å°è€…çš„è¤‡è£½ç³»çµ±ä¸­å¯¦ç¾å¯«å¾Œè®€ä¸€è‡´æ€§çš„æ–¹æ³•ï¼š   å°å¯èƒ½è¢«ä½¿ç”¨è€…ä¿®æ”¹çš„å…§å®¹ï¼Œç¸½æ˜¯å¾ä¸»ç¯€é»è®€å–ã€‚  è·Ÿè¹¤ä¸Šæ¬¡æ›´æ–°æ™‚é–“ï¼Œæ±ºå®šæ˜¯å¦å¾ä¸»ç¯€é»è®€å–ã€‚ç›£æ§å¾ç¯€é»çš„è¤‡è£½å»¶é²ï¼Œé¿å…è®€å–éæ–¼æ»¯å¾Œçš„å¾ç¯€é»ã€‚  å®¢æˆ¶ç«¯è¨˜ä½æœ€è¿‘ä¸€æ¬¡å¯«å…¥çš„æ™‚é–“æˆ³ï¼Œç¢ºä¿è®€å–æ™‚æ‰€æœ‰è®Šæ›´å·²å‚³æ’­åˆ°å¾ç¯€é»ã€‚  è€ƒæ…®æ•¸æ“šä¸­å¿ƒåˆ†ä½ˆï¼Œç¢ºä¿éœ€è¦ä¸»ç¯€é»çš„è«‹æ±‚è·¯ç”±åˆ°æ­£ç¢ºçš„è³‡æ–™ä¸­å¿ƒã€‚  ä½¿ç”¨å¤šå€‹è£ç½®çš„ä½¿ç”¨è€…éœ€æä¾›è·¨è£ç½®çš„å¯«å¾Œè®€ä¸€è‡´æ€§çš„æŒ‘æˆ°ã€‚ä»¥ä¸‹æ˜¯å…©å€‹é‡é»ï¼š   è·¨è£ç½®å…ƒè³‡æ–™çš„ä¸­å¿ƒåŒ–å„²å­˜ï¼šç”±æ–¼ä¸åŒè£ç½®ä¸Šçš„ç¨‹å¼ç„¡æ³•çŸ¥é“å…¶ä»–è£ç½®çš„æ“ä½œï¼Œå› æ­¤éœ€è¦å°å…ƒè³‡æ–™é€²è¡Œä¸­å¿ƒåŒ–å„²å­˜ï¼Œä»¥è¨˜ä½ä½¿ç”¨è€…çš„æ›´æ–°æ™‚é–“æˆ³ã€‚  è·¨è³‡æ–™ä¸­å¿ƒçš„è«‹æ±‚è·¯ç”±ï¼šç•¶å‰¯æœ¬åˆ†å¸ƒåœ¨ä¸åŒçš„è³‡æ–™ä¸­å¿ƒæ™‚ï¼Œç¢ºä¿ä¾†è‡ªä¸åŒè£ç½®çš„è«‹æ±‚è·¯ç”±åˆ°åŒä¸€è³‡æ–™ä¸­å¿ƒè®Šå¾—å›°é›£ã€‚è§£æ±ºæ–¹æ³•æ˜¯å°‡æ‰€æœ‰ä½¿ç”¨è€…è£ç½®çš„è«‹æ±‚è·¯ç”±åˆ°åŒä¸€å€‹è³‡æ–™ä¸­å¿ƒã€‚  å–®èª¿è®€å–  é€™æ®µæè¿°äº†åœ¨ä½¿ç”¨éåŒæ­¥å¾åº«è®€å–è³‡æ–™æ™‚ï¼Œå¯èƒ½å‡ºç¾çš„æ™‚å…‰å€’æµç¾è±¡ã€‚\nç•¶ä½¿ç”¨è€…å¾ä¸åŒå¾ç¯€é»é€²è¡Œå¤šæ¬¡è®€å–æ™‚ï¼Œå¯èƒ½æœƒçœ‹åˆ°ä¸ä¸€è‡´çš„çµæœï¼Œ  ä¾‹å¦‚å…ˆçœ‹åˆ°ä¸€æ¢è©•è«–ï¼Œç„¶å¾Œè©²è©•è«–æ¶ˆå¤±ã€‚é€™ç¨®ç¾è±¡å¯èƒ½æœƒè®“ä½¿ç”¨è€…æ„Ÿåˆ°å›°æƒ‘ã€‚  \n      åœ– 5-4 ä½¿ç”¨è€…é¦–å…ˆå¾æ–°å‰¯æœ¬è®€å–ï¼Œç„¶å¾Œå¾èˆŠå‰¯æœ¬è®€å–ã€‚æ™‚é–“çœ‹ä¸Šå»å›é€€äº†ã€‚ç‚ºäº†é˜²æ­¢é€™ç¨®ç•°å¸¸ï¼Œæˆ‘å€‘éœ€è¦å–®èª¿çš„è®€å–ã€‚  ä»‹æ–¼å¼·ä¸€è‡´æ€§å’Œæœ€çµ‚ä¸€è‡´æ€§ä¹‹é–“çš„ä¿è­‰ã€‚  å–®èª¿è®€ç¢ºä¿ä½¿ç”¨è€…åœ¨é€£çºŒè®€å–éç¨‹ä¸­ä¸æœƒçœ‹åˆ°æ™‚é–“å›é€€ï¼Œå³ä½¿è®€å–åˆ°çš„æ˜¯èˆŠè³‡æ–™ã€‚\nå¯¦ç¾å–®èª¿è®€çš„æ–¹æ³•ä¹‹ä¸€æ˜¯è®“æ¯å€‹ä½¿ç”¨è€…å§‹çµ‚å¾åŒä¸€å‰¯æœ¬è®€å–è³‡æ–™ã€‚  ç°¡å–®ä¾†èªªï¼Œå–®èª¿è®€ä¿è­‰äº†ä½¿ç”¨è€…è®€å–è³‡æ–™çš„é€£çºŒæ€§ï¼Œé¿å…äº†æ™‚é–“å›é€€ã€‚  ä¸€è‡´æ€§å‰ç¶´è®€å–  è¤‡è£½å»¶é²ç•°å¸¸å¦‚ä½•é•åå› æœå¾‹ã€‚  ç•¶ç¬¬ä¸‰å€‹äººè½åˆ° Cake å¤«äººå’Œ Poons å…ˆç”Ÿçš„å°è©±æ™‚ï¼Œç”±æ–¼å¾åº«å»¶é²çš„å·®ç•°ï¼Œä»–å€‘è½åˆ°çš„å°è©±é †åºé¡›å€’äº†ã€‚\né€™ä½¿å¾—è§€å¯Ÿè€…æ„Ÿè¦º Cake å¤«äººåœ¨å•é¡Œè¢«æå‡ºä¹‹å‰å°±å·²ç¶“å›ç­”äº†ï¼Œé¡¯å¾—å…·æœ‰è¶…èƒ½åŠ›ã€‚  é€™æ¨£çš„ç¾è±¡å¯èƒ½æœƒè®“äººæ„Ÿåˆ°å›°æƒ‘ã€‚  \n      åœ– 5-5 å¦‚æœæŸäº›åˆ†å‰²æ§½çš„è¤‡è£½é€Ÿåº¦æ…¢æ–¼å…¶ä»–åˆ†å‰²æ§½ï¼Œé‚£éº¼è§€å¯Ÿè€…å¯èƒ½æœƒåœ¨çœ‹åˆ°å•é¡Œä¹‹å‰å…ˆçœ‹åˆ°ç­”æ¡ˆã€‚  ç³»çµ±æœƒç‚ºæ¯å€‹å¯«å…¥æ“ä½œåˆ†é…ä¸€å€‹å…¨å±€å”¯ä¸€çš„æ™‚é–“æˆ³ã€‚\né€™äº›æ™‚é–“æˆ³ä¿è­‰äº†æ“ä½œçš„å…¨å±€é †åºã€‚  ç•¶ç”¨æˆ¶ç™¼èµ·è®€å–è«‹æ±‚æ™‚ï¼Œç³»çµ±æœƒè¿”å›å°æ–¼æˆ–ç­‰æ–¼è©²è«‹æ±‚æ™‚é–“æˆ³çš„æœ€æ–°æ•¸æ“šã€‚\né€™æ¨£ï¼Œå³ä½¿æŸäº›ç¯€é»çš„æ•¸æ“šå°šæœªåŒæ­¥ï¼Œç”¨æˆ¶ä¹Ÿèƒ½ç²å¾—ä¸€å€‹ä¸€è‡´çš„æ•¸æ“šå¿«ç…§ã€‚  æ­¤å¤–ï¼Œé€™ç¨®ç­–ç•¥é‚„èƒ½ä¿è­‰è®€å–æ“ä½œçš„å› æœä¸€è‡´æ€§ï¼Œå³ç”¨æˆ¶èƒ½å¤ è§€å¯Ÿåˆ°ä»–å€‘ä¹‹å‰çš„å¯«å…¥æ“ä½œæ‰€å¼•èµ·çš„è®ŠåŒ–ã€‚  ç¸½ä¹‹ï¼Œä¸€è‡´æ€§å‰ç¶´è®€å–æ˜¯ä¸€ç¨®åœ¨åˆ†å¸ƒå¼ç³»çµ±ä¸­ç¢ºä¿æ•¸æ“šè®€å–ä¸€è‡´æ€§çš„æœ‰æ•ˆç­–ç•¥ã€‚\né€šéä½¿ç”¨å…¨å±€å”¯ä¸€çš„æ™‚é–“æˆ³å°å¯«å…¥æ“ä½œé€²è¡Œæ’åºï¼Œä¸¦åœ¨è®€å–æ™‚è¿”å›å°æ–¼æˆ–ç­‰æ–¼è«‹æ±‚æ™‚é–“æˆ³çš„æœ€æ–°æ•¸æ“šï¼Œé€™å€‹ç­–ç•¥ç¢ºä¿äº†ç”¨æˆ¶åœ¨è®€å–æ•¸æ“šæ™‚èƒ½å¤ ç²å¾—ä¸€å€‹ä¸€è‡´çš„æ•¸æ“šå¿«ç…§ï¼ŒåŒæ™‚ä¿è­‰äº†è®€å–æ“ä½œçš„å› æœä¸€è‡´æ€§ã€‚  è¤‡è£½è½å¾Œçš„è§£æ±ºæ–¹æ¡ˆ  ç¢ºä¿è³‡æ–™ä¸€è‡´æ€§å’Œæ­£ç¢ºæ€§éå¸¸é‡è¦ã€‚\nç•¶è¤‡è£½å»¶é²è®Šå¤§æ™‚ï¼Œæˆ‘å€‘éœ€è¦é—œæ³¨æ‡‰ç”¨ç¨‹å¼çš„è¡Œç‚ºï¼Œç¢ºä¿ä½¿ç”¨è€…é«”é©—ä¸å—å½±éŸ¿ã€‚  æ‡‰ç”¨ç¨‹å¼å¯ä»¥åœ¨è³‡æ–™åº«å±¤é¢æä¾›æ›´å¼·çš„ä¿è­‰ï¼Œè€Œäº‹å‹™å°±æ˜¯ä¸€å€‹å¾ˆå¥½çš„è§£æ±ºæ–¹æ¡ˆã€‚\nå„˜ç®¡åœ¨åˆ†æ•£å¼è³‡æ–™åº«ä¸­ï¼Œä¸€äº›ç³»çµ±æ”¾æ£„äº†äº‹å‹™ï¼Œä½†äº‹å‹™ä»ç„¶æ˜¯ä¸€å€‹æœ‰åŠ›çš„å·¥å…·ã€‚  å¾ŒçºŒç« ç¯€(ç¬¬7ç« ã€ç¬¬9ç« )å°‡æ›´è©³ç´°åœ°è¨è«–äº‹å‹™å’Œå…¶ä»–æ›¿ä»£æ–¹æ¡ˆã€‚  å¤šé ˜å°è¤‡è£½  ç›®å‰ç‚ºæ­¢ï¼Œæˆ‘å€‘å°ˆæ³¨åœ¨å–®ä¸€ä¸»ç¯€é»çš„è¤‡è£½æ¶æ§‹ï¼Œä½†é‚„æœ‰å…¶ä»–é¸æ“‡ã€‚å–®ä¸€ä¸»ç¯€é»çš„å•é¡Œåœ¨æ–¼æ‰€æœ‰å¯«å…¥éƒ½å¿…é ˆé€šéå®ƒï¼Œè€Œå¤šé ˜å°è€…é…ç½®å…è¨±å¤šå€‹ç¯€é»æ¥å—å¯«å…¥ã€‚åœ¨é€™ç¨®æƒ…æ³ä¸‹ï¼Œæ¯å€‹ä¸»ç¯€é»ä¹ŸåŒæ™‚æ˜¯å…¶ä»–ä¸»ç¯€é»çš„å¾ç¯€é»ã€‚  å¤šé ˜å°è¤‡è£½çš„é©ç”¨å ´æ™¯  åœ¨å–®å€‹æ•¸æ“šä¸­å¿ƒå…§éƒ¨ä½¿ç”¨å¤šå€‹ä¸»ç¯€é»çš„é…ç½®æ²’æœ‰å¤ªå¤§æ„ç¾©ï¼Œå› ç‚ºå…¶å°è‡´çš„è¤‡é›œæ€§å·²ç¶“è¶…éäº†èƒ½å¸¶ä¾†çš„å¥½è™•ã€‚ä½†åœ¨ä¸€äº›æƒ…æ³ä¸‹ï¼Œé€™ç¨®é…ç½®ä¹Ÿæ˜¯åˆç†çš„ã€‚  å¤šè³‡æ–™ä¸­å¿ƒæ“ä½œ  è¨è«–äº†ä¸€ç¨®å¤šä¸»ç¯€é»é…ç½®ï¼Œç”¨æ–¼åœ¨å¤šå€‹è³‡æ–™ä¸­å¿ƒåˆ†æ•£æ•¸æ“šåº«å‰¯æœ¬ã€‚é€™ç¨®é…ç½®å¯æé«˜å®¹éŒ¯èƒ½åŠ›å’Œåœ°ç†è¦ªè¿‘æ€§ã€‚æ¯å€‹è³‡æ–™ä¸­å¿ƒéƒ½æœ‰ä¸€å€‹ä¸»åº«ï¼Œä¸¦åœ¨è³‡æ–™ä¸­å¿ƒä¹‹é–“äº’ç›¸è¤‡è£½æ›´æ”¹ã€‚é€™æ¨£å¯ä»¥åœ¨æœ¬åœ°è³‡æ–™ä¸­å¿ƒå…§ä½¿ç”¨å¸¸è¦çš„ä¸»å¾è¤‡è£½ã€‚  \n      åœ– 5-6 è·¨å¤šå€‹æ•¸æ“šä¸­å¿ƒçš„å¤šä¸»è¤‡è£½  æˆ‘å€‘ä¾†æ¯”è¼ƒä¸€ä¸‹åœ¨é‹ç¶­å¤šå€‹æ•¸æ“šä¸­å¿ƒæ™‚ï¼Œå–®é ˜å°å’Œå¤šé ˜å°çš„é©æ‡‰æƒ…æ³   æ•ˆèƒ½   å–®é ˜å°ï¼šå¯«å…¥éœ€ç©¿è¶Šç¶²éš›ç¶²è·¯ï¼Œå¢åŠ å¯«å…¥æ™‚é–“ã€‚  å¤šé ˜å°ï¼šå¯«å…¥åœ¨æœ¬åœ°è³‡æ–™ä¸­å¿ƒé€²è¡Œï¼Œé™ä½ç¶²è·¯å»¶é²å½±éŸ¿ã€‚  å®¹å¿è³‡æ–™ä¸­å¿ƒåœæ©Ÿ   å–®é ˜å°ï¼šéœ€æ•…éšœåˆ‡æ›ï¼Œå¾åº«æˆç‚ºä¸»åº«ã€‚  å¤šé ˜å°ï¼šå„è³‡æ–™ä¸­å¿ƒç¨ç«‹é‹ä½œï¼Œæ•…éšœè³‡æ–™ä¸­å¿ƒæ¢å¾©å¾Œè‡ªå‹•è¤‡è£½ã€‚  å®¹å¿ç¶²è·¯å•é¡Œ   å–®é ˜å°ï¼šå°è³‡æ–™ä¸­å¿ƒé–“é€£ç·šå•é¡Œæ•æ„Ÿï¼Œå¯«å…¥ç‚ºåŒæ­¥æ“ä½œã€‚  å¤šé ˜å°ï¼šæ¡éåŒæ­¥è¤‡è£½ï¼Œå°ç¶²è·¯å•é¡Œæœ‰æ›´é«˜çš„æ‰¿å—èƒ½åŠ›ã€‚  ä¸€äº›è³‡æ–™åº«æ”¯æ´å¤šé ˜å°é…ç½®ï¼Œä¸¦ä¸”å¯ä»¥é€éå¤–éƒ¨å·¥å…·å¯¦ç¾ã€‚\nå„˜ç®¡å¤šé ˜å°è¤‡è£½å…·æœ‰å„ªé»ï¼Œä½†ä¹Ÿå­˜åœ¨å¯«è¡çªå•é¡Œã€‚  æ­¤å¤–ï¼Œç”±æ–¼å¤šé ˜å°è¤‡è£½åœ¨å¾ˆå¤šè³‡æ–™åº«ä¸­æ˜¯æ”¹è£åŠŸèƒ½ï¼Œå¯èƒ½æœƒæœ‰ä¸€äº›é…ç½®ä¸Šçš„ç¼ºé™·ï¼Œä¸¦å¯èƒ½èˆ‡å…¶ä»–è³‡æ–™åº«åŠŸèƒ½ç”¢ç”Ÿæ„å¤–åæ‡‰ã€‚\nå› æ­¤ï¼Œå¤šé ˜å°è¤‡è£½è¢«èªç‚ºæ˜¯ä¸€å€‹é«˜é¢¨éšªé ˜åŸŸï¼Œæ‡‰è©²ç›¡é‡é¿å…ä½¿ç”¨ã€‚  å®¢æˆ¶ç«¯çš„é›¢ç·šæ“ä½œ  å¦ä¸€ç¨®é©ç”¨å¤šé ˜å°è¤‡è£½çš„å ´æ™¯ï¼Œå³éœ€è¦åœ¨æ–·ç¶²ç‹€æ…‹ä¸‹ä»èƒ½ä½¿ç”¨çš„æ‡‰ç”¨ç¨‹å¼\nä¾‹å¦‚æ—¥æ›†æ‡‰ç”¨ç¨‹å¼ã€‚\nåœ¨é€™ç¨®æƒ…æ³ä¸‹ï¼Œæ¯å€‹è£ç½®éƒ½æœ‰ä¸€å€‹æœ¬åœ°è³‡æ–™åº«ï¼Œä¸¦å­˜åœ¨éåŒæ­¥çš„å¤šä¸»è¤‡è£½éç¨‹ä¾†åŒæ­¥æ—¥æ›†å‰¯æœ¬ã€‚\né€™ç¨®è¨­å®šé¡ä¼¼æ–¼è³‡æ–™ä¸­å¿ƒä¹‹é–“çš„å¤šé ˜å°è¤‡è£½ï¼Œä½†ç¶²è·¯é€£ç·šæ¥µä¸å¯é ã€‚  é›–ç„¶æœ‰ä¸€äº›å·¥å…·å¯ä»¥å¹«åŠ©å¯¦ç¾å¤šé ˜å°è¤‡è£½ï¼Œä½†å¯¦éš›æ‡‰ç”¨ä¸­ä»ç„¶æœ‰å¾ˆå¤šé›£é»éœ€è¦å…‹æœã€‚  å…¶ä¸­ä¸€å€‹å·¥å…·æ˜¯CouchDBã€‚  å”ä½œç·¨è¼¯  é€™ç¨®æ‡‰ç”¨å…è¨±å¤šäººåŒæ™‚ç·¨è¼¯åŒä¸€ä»½æ–‡ä»¶ï¼Œä¾‹å¦‚ Etherpad å’Œ Google Docsã€‚  ç‚ºäº†é¿å…ç·¨è¼¯è¡çªï¼Œæ‡‰ç”¨ç¨‹å¼å¿…é ˆå…ˆå–å¾—æ–‡ä»¶çš„é–å®šï¼Œç„¶å¾Œæ‰èƒ½é€²è¡Œç·¨è¼¯ã€‚\nä½†ç‚ºäº†åŠ é€Ÿå”ä½œï¼Œå¯èƒ½æœƒå°‡æ›´æ”¹çš„å–®ä½è¨­å®šå¾—éå¸¸å°ï¼Œä¸¦é¿å…é–å®šã€‚  é€™ç¨®æ–¹æ³•å…è¨±å¤šå€‹ä½¿ç”¨è€…åŒæ™‚é€²è¡Œç·¨è¼¯ï¼Œä½†éœ€è¦è§£æ±ºè¡çªã€‚\né€™ç¨®å”ä½œæ¨¡å¼ç›¸ç•¶æ–¼ä¸»å¾è¤‡è£½æ¨¡å‹ä¸‹åœ¨ä¸»ç¯€é»ä¸ŠåŸ·è¡Œäº‹å‹™æ“ä½œã€‚  è™•ç†å¯«å…¥è¡çª  å®¹æ˜“é‡åˆ°å¯«è¡çªçš„å•é¡Œã€‚\nä¾‹å¦‚ï¼Œå…©å€‹ä½¿ç”¨è€…åŒæ™‚ç·¨è¼¯åŒä¸€å€‹ç¶­åŸºé é¢ï¼Œä¸”å°åŒä¸€å€‹æ¨™é¡Œé€²è¡Œä¿®æ”¹ï¼Œé€™å°±å¯èƒ½ç™¼ç”Ÿè¡çªã€‚  é€™æ™‚éœ€è¦è§£æ±ºè¡çªï¼Œä»¥ä¿è­‰æ•¸æ“šçš„ä¸€è‡´æ€§ã€‚\nå¤šé ˜å°è€…çš„è³‡æ–™åº«åŒæ­¥ä¸Š é€šå¸¸è¢«èªç‚ºæœ‰é¢¨éšªï¼Œæ‡‰å„˜é‡é¿å…ï¼  \n      åœ– 5-7 å…©å€‹ä¸»ç¯€é»åŒæ™‚æ›´æ–°åŒä¸€è¨˜éŒ„å¼•èµ·çš„å¯«å…¥è¡çª  åŒæ­¥èˆ‡éåŒæ­¥è¡çªæª¢æ¸¬  åœ¨å–®é ˜å°è³‡æ–™åº«ä¸­ï¼Œå…©å€‹å¯«å…¥æ“ä½œæœƒç™¼ç”Ÿé˜»å¡ï¼Œå¿…é ˆç­‰å¾…ç¬¬ä¸€å€‹æ“ä½œå®Œæˆæ‰èƒ½é€²è¡Œç¬¬äºŒå€‹ã€‚  è€Œåœ¨å¤šé ˜å°é…ç½®ä¸­ï¼Œå…©å€‹æ“ä½œéƒ½èƒ½æˆåŠŸé€²è¡Œï¼Œä½†æ˜¯è¡çªçš„æª¢æ¸¬éœ€è¦åœ¨ç¨å¾Œçš„æ™‚é–“é€²è¡Œï¼Œå¯èƒ½å°è‡´è§£æ±ºè¡çªçš„éç¨‹è¼ƒç‚ºå›°é›£ã€‚  å¦‚æœæƒ³è¦åŒæ­¥è¡çªæª¢æ¸¬ï¼Œå¯ä»¥ç­‰å¾…æ‰€æœ‰å‰¯æœ¬æ¥å—å¯«å…¥å¾Œå†å‘Šè¨´ä½¿ç”¨è€…å¯«å…¥æˆåŠŸï¼Œä½†æ˜¯é€™æ¨£æœƒå¤±å»å¤šé ˜å°è¤‡è£½çš„å„ªå‹¢ã€‚\nå¦‚æœéœ€è¦åŒæ­¥è¡çªæª¢æ¸¬ï¼Œå»ºè­°ä½¿ç”¨å–®é ˜å°è¤‡è£½ã€‚  é¿å…è¡çª  æœ€ç°¡å–®ç­–ç•¥ï¼Œå³ç¢ºä¿æ‰€æœ‰å¯«å…¥ç‰¹å®šè¨˜éŒ„çš„æ“ä½œéƒ½é€éåŒä¸€å€‹ä¸»åº«é€²è¡Œã€‚\né€™æ¨£å¯ä»¥é¿å…å¤šå€‹ä¸»åº«åŒæ™‚å¯«å…¥åŒä¸€å€‹è¨˜éŒ„è€Œå°è‡´è¡çªã€‚  ç„¶è€Œï¼Œå¦‚æœéœ€è¦æ›´æ”¹æŒ‡å®šçš„ä¸»åº«ï¼Œä¾‹å¦‚å› ç‚ºæŸå€‹è³‡æ–™ä¸­å¿ƒå‡ºç¾æ•…éšœï¼Œå°±éœ€è¦è™•ç†ä¸åŒä¸»åº«åŒæ™‚å¯«å…¥çš„å¯èƒ½æ€§ã€‚\né€™éœ€è¦åœ¨æ‡‰ç”¨ç¨‹å¼ä¸­å¯¦ç¾ä¸€äº›ç‰¹æ®Šè™•ç†ã€‚  æ¼¸è¶¨ä¸€è‡´çš„ç‹€æ…‹  å¦‚ä½•è™•ç†å¤šå€‹è¤‡æœ¬ä¹‹é–“çš„æ•¸æ“šä¸€è‡´æ€§å•é¡Œã€‚\nç•¶å–®å€‹ä¸»è³‡æ–™åº«é€²è¡Œå¯«æ“ä½œæ™‚ï¼Œæœ€å¾Œä¸€æ¬¡å¯«æ“ä½œå°‡æ±ºå®šè©²æ¬„ä½çš„æœ€çµ‚å€¼ã€‚  ä½†åœ¨å¤šä¸»é…ç½®ä¸­ï¼Œç”±æ–¼æ²’æœ‰æ˜ç¢ºçš„å¯«å…¥é †åºï¼Œæœ€çµ‚å€¼å¾ˆé›£ç¢ºå®šã€‚\nå› æ­¤ï¼Œå¿…é ˆä»¥ä¸€ç¨®æ”¶æ–‚çš„æ–¹å¼è§£æ±ºè¡çªï¼Œä»¥ç¢ºä¿æ‰€æœ‰è¤‡æœ¬çš„æœ€çµ‚å€¼éƒ½æ˜¯ç›¸åŒçš„ã€‚  æœ‰å¤šç¨®æ–¹æ³•å¯ä»¥å¯¦ç¾é€™å€‹ç›®æ¨™ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š   ä½¿ç”¨å”¯ä¸€ ID ä¾†é¸æ“‡å‹åˆ©è€…ä¸¦ä¸Ÿæ£„å…¶ä»–å¯«å…¥ï¼Œé€™ç¨®æ–¹æ³•ç¨±ç‚ºæœ€å¾Œå¯«å…¥å‹åˆ©ã€‚ç„¶è€Œï¼Œé€™ç¨®æ–¹æ³•å®¹æ˜“é€ æˆè³‡æ–™ä¸Ÿå¤±ã€‚  ç‚ºæ¯å€‹å‰¯æœ¬åˆ†é…ä¸€å€‹å”¯ä¸€çš„ IDï¼Œä»¥ ID ç·¨è™Ÿè¼ƒé«˜çš„å¯«å…¥ç‚ºå„ªå…ˆã€‚åŒæ¨£ï¼Œé€™ç¨®æ–¹æ³•ä¹Ÿå¯èƒ½å°è‡´è³‡æ–™ä¸Ÿå¤±ã€‚  å°‡å¯«å…¥çš„å€¼åˆä½µåœ¨ä¸€èµ·ï¼Œä¾‹å¦‚æŒ‰å­—æ¯é †åºæ’åºå¾Œåˆä½µã€‚  ä½¿ç”¨é¡¯å¼è³‡æ–™çµæ§‹è¨˜éŒ„è¡çªï¼Œç„¶å¾Œç·¨å¯«è§£æ±ºè¡çªçš„ç¨‹å¼ç¢¼ä¾†ä¿ç•™æ‰€æœ‰è³‡è¨Šã€‚  è‡ªè¨‚è§£æ±ºè¡çªçš„é‚è¼¯   å¯«å…¥æ™‚åŸ·è¡Œ\næŒ‡ç•¶è³‡æ–™åº«ç³»çµ±åœ¨è¤‡è£½æ›´æ”¹æ—¥èªŒä¸­ç™¼ç¾è¡çªæ™‚ï¼Œæœƒç«‹å³å‘¼å«è¡çªè™•ç†ç¨‹å¼ç¢¼ã€‚  è®€å–æ™‚åŸ·è¡Œ\nå°‡æ‰€æœ‰çš„ä¸åŒç‰ˆæœ¬éƒ½å„²å­˜åœ¨è³‡æ–™åº«ä¸­ã€‚\nç•¶æ‡‰ç”¨ç¨‹å¼ä¸‹ä¸€æ¬¡è®€å–é€™äº›è³‡æ–™æ™‚ï¼Œæœƒå°‡é€™äº›ä¸åŒç‰ˆæœ¬çš„è³‡æ–™éƒ½è¿”å›çµ¦æ‡‰ç”¨ç¨‹å¼ã€‚\næ‡‰ç”¨ç¨‹å¼å¯ä»¥è®“ä½¿ç”¨è€…è§£æ±ºè¡çªæˆ–è‡ªå‹•è§£æ±ºè¡çªï¼Œç„¶å¾Œå°‡çµæœå¯«å›è³‡æ–™åº«ã€‚\né€™æ˜¯ä¸€ç¨®å¸¸è¦‹çš„è§£æ±ºè¡çªçš„æ–¹æ³•ï¼Œä¾‹å¦‚ CouchDB å°±æ˜¯é€™æ¨£åšçš„ã€‚   è‡ªå‹•è¡çªè§£æ±º\nè¡çªè§£æ±ºè¦å‰‡å¯èƒ½å¾ˆå®¹æ˜“è®Šå¾—è¶Šä¾†è¶Šè¤‡é›œï¼Œè‡ªå®šç¾©ç¨‹å¼ç¢¼å¯èƒ½ä¹Ÿå¾ˆå®¹æ˜“å‡ºéŒ¯ã€‚\näºé¦¬éœæ˜¯ä¸€å€‹ç¶“å¸¸è¢«å¼•ç”¨çš„ä¾‹å­ï¼Œç”±æ–¼è¡çªè§£æ±ºè™•ç†ç¨‹å¼è€Œç”¢ç”Ÿäº†ä»¤äººæ„å¤–çš„æ•ˆæœï¼šä¸€æ®µæ™‚é–“ä»¥ä¾†ï¼Œè³¼ç‰©è»Šä¸Šçš„è¡çªè§£æ±ºé‚è¼¯å°‡ä¿ç•™æ–°å¢åˆ°è³¼ç‰©è»Šçš„ç‰©å“ï¼Œä½†ä¸åŒ…æ‹¬å¾è³¼ç‰©è»Šä¸­ç§»é™¤çš„ç‰©å“ã€‚\nå› æ­¤ï¼Œé¡§å®¢æœ‰æ™‚æœƒçœ‹åˆ°ç‰©å“é‡æ–°å‡ºç¾åœ¨ä»–å€‘çš„è³¼ç‰©è»Šä¸­ï¼Œå³ä½¿ä»–å€‘ä¹‹å‰å·²ç¶“è¢«ç§»èµ°ã€37ã€‘ã€‚  å·²ç¶“æœ‰ä¸€äº›æœ‰è¶£çš„ç ”ç©¶ä¾†è‡ªå‹•è§£æ±ºç”±æ–¼è³‡æ–™ä¿®æ”¹å¼•èµ·çš„è¡çªã€‚æœ‰å¹¾é …ç ”ç©¶å€¼å¾—ä¸€æï¼š   ç„¡è¡çªè¤‡è£½è³‡æ–™å‹åˆ¥ï¼ˆConflict-free replicated datatypesï¼ŒCRDTï¼‰ã€32,38ã€‘æ˜¯å¯ä»¥ç”±å¤šå€‹ä½¿ç”¨è€…åŒæ™‚ç·¨è¼¯çš„é›†åˆã€å°æ˜ ã€æœ‰åºåˆ—è¡¨ã€è¨ˆæ•¸å™¨ç­‰ä¸€ç³»åˆ—è³‡æ–™çµæ§‹ï¼Œå®ƒå€‘ä»¥åˆç†çš„æ–¹å¼è‡ªå‹•è§£æ±ºè¡çªã€‚ä¸€äº› CRDT å·²ç¶“åœ¨ Riak 2.0 ä¸­å¯¦ç¾ã€39,40ã€‘ã€‚  å¯åˆä½µçš„æŒä¹…è³‡æ–™çµæ§‹ï¼ˆMergeable persistent data structuresï¼‰ã€41ã€‘é¡¯å¼è·Ÿè¹¤æ­·å²è¨˜éŒ„ï¼Œé¡ä¼¼æ–¼ Git ç‰ˆæœ¬æ§åˆ¶ç³»çµ±ï¼Œä¸¦ä½¿ç”¨ä¸‰å‘åˆä½µåŠŸèƒ½ï¼ˆè€Œ CRDT ä½¿ç”¨é›™å‘åˆä½µï¼‰ã€‚  æ“ä½œè½‰æ›ï¼ˆoperational transformationï¼‰  42  æ˜¯ Etherpad ã€30ã€‘å’Œ Google Docs ã€31ã€‘ç­‰å”åŒç·¨è¼¯æ‡‰ç”¨èƒŒå¾Œçš„è¡çªè§£æ±ºæ¼”ç®—æ³•ã€‚å®ƒæ˜¯å°ˆç‚ºæœ‰åºåˆ—è¡¨çš„ä¸¦ç™¼ç·¨è¼¯è€Œè¨­è¨ˆçš„ï¼Œä¾‹å¦‚æ§‹æˆæ–‡å­—æ–‡ä»¶çš„å­—å…ƒåˆ—è¡¨ã€‚\né€™äº›æ¼”ç®—æ³•åœ¨è³‡æ–™åº«ä¸­çš„å¯¦ç¾é‚„å¾ˆå¹´è¼•ï¼Œä½†å¾ˆå¯èƒ½å°‡ä¾†å®ƒå€‘æœƒè¢«æ•´åˆåˆ°æ›´å¤šçš„è¤‡è£½è³‡æ–™ç³»çµ±ä¸­ã€‚è‡ªå‹•è¡çªè§£æ±ºæ–¹æ¡ˆå¯ä»¥ä½¿æ‡‰ç”¨ç¨‹å¼è™•ç†å¤šä¸»è³‡æ–™åŒæ­¥æ›´ç‚ºç°¡å–®ã€‚  æ€æ¨£æ‰ç®—è¡çªï¼Ÿ  æœ‰äº›è¡çªæ˜¯æ˜é¡¯çš„ï¼Œä¾‹å¦‚åŒæ™‚ä¿®æ”¹åŒä¸€æ¬„ä½çš„å¯«æ“ä½œï¼Œä½†æœ‰äº›è¡çªå¯èƒ½ä¸å¤ªå®¹æ˜“å¯Ÿè¦ºï¼Œ  ä¾‹å¦‚åœ¨æœƒè­°å®¤é è¨‚ç³»çµ±ä¸­é¿å…åŒä¸€æˆ¿é–“çš„é‡ç–Šé è¨‚ï¼Œé›–ç„¶å¯ä»¥åœ¨é è¨‚æ™‚å†æ¬¡æª¢æŸ¥ï¼Œä½†åœ¨å¤šé ˜å°ä¸åŒä¸»åº«æ™‚é‚„æ˜¯å¯èƒ½ç™¼ç”Ÿè¡çªï¼  æ¥ä¸‹ä¾†çš„ç« ç¯€å°‡é€²ä¸€æ­¥è¨è«–å¦‚ä½•è§£æ±ºé€™äº›è¡çªï¼Œ\nåŒ…æ‹¬åœ¨ç¬¬ä¸ƒç« ä¸­ä»‹ç´¹æ›´å¤šè¡çªæ¡ˆä¾‹ï¼Œä»¥åŠåœ¨ç¬¬åäºŒç« ä¸­è¨è«–æª¢æ¸¬å’Œè§£æ±ºè¡çªçš„å¯ä¼¸ç¸®æ–¹æ³•ã€‚  Multi-Leader è¤‡è£½çš„æ‹“æ¨¸  å³è³‡æ–™å¦‚ä½•å¾ä¸€å€‹ç¯€é»å‚³æ’­åˆ°å¦ä¸€å€‹ç¯€é»ã€‚\nç•¶æœ‰å…©å€‹ä¸»åº«æ™‚ï¼Œå”¯ä¸€åˆç†çš„æ‹“æ’²æ˜¯å°‡æ‰€æœ‰å¯«å…¥éƒ½ç™¼é€åˆ°å°æ–¹ã€‚  ä½†å¦‚æœæœ‰å…©å€‹ä»¥ä¸Šçš„ä¸»åº«æ™‚ï¼Œå°±æœ‰å¤šç¨®ä¸åŒçš„æ‹“æ’²çµæ§‹å¯é¸æ“‡ã€‚  \n      åœ– 5-8 ä¸‰ç¨®å¯ä»¥åœ¨å¤šä¸»è¤‡è£½ä¸­ä½¿ç”¨çš„æ‹“æ’²ç¤ºä¾‹ã€‚  å¸¸è¦‹çš„ä¸‰ç¨®æ‹“æ’²çµæ§‹   ç’°ç‹€æ‹“å¢£  æ˜Ÿç‹€æ‹“å¢£  All to all æ‹“å¢£  å…¶ä¸­ï¼Œå…¨éƒ¨åˆ°å…¨éƒ¨çš„æ‹“æ’²çµæ§‹å®¹éŒ¯æ€§è¼ƒå¥½ï¼Œå› ç‚ºå®ƒå¯ä»¥é¿å…å–®é»æ•…éšœï¼Œä½†å¯èƒ½å­˜åœ¨è¨Šæ¯è¶…å‰çš„å•é¡Œã€‚\nè€Œç’°å½¢å’Œæ˜Ÿå½¢æ‹“æ’²çµæ§‹çš„å®¹éŒ¯æ€§è¼ƒå·®ï¼Œä¸€æ—¦æŸå€‹ç¯€é»å‡ºç¾æ•…éšœï¼Œå¯èƒ½æœƒä¸­æ–·è¤‡è£½è¨Šæ¯æµï¼Œéœ€è¦æ‰‹å‹•é‡æ–°é…ç½®ã€‚  æ­¤å¤–ï¼Œåœ¨ç’°å½¢å’Œæ˜Ÿå½¢æ‹“æ’²ä¸­ï¼Œç‚ºäº†é¿å…ç„¡é™è¤‡è£½è¿´åœˆï¼Œæ¯å€‹ç¯€é»éƒ½è¢«è³¦äºˆä¸€å€‹å”¯ä¸€çš„è­˜åˆ¥ç¬¦è™Ÿã€‚  \n      åœ– 5-9 ä½¿ç”¨å¤šä¸»è¤‡è£½æ™‚ï¼Œå¯«å…¥å¯èƒ½æœƒä»¥éŒ¯èª¤çš„é †åºåˆ°é”æŸäº›å‰¯æœ¬ã€‚  å¤šä¸»è¤‡è£½ç³»çµ±ä¸­çš„ä¸€å€‹å› æœé—œä¿‚å•é¡Œï¼Œ  ä¾‹å¦‚ç•¶ä¸åŒçš„ç¯€é»ä»¥ä¸åŒé †åºè™•ç†å¯«å…¥æ™‚å¯èƒ½æœƒç™¼ç”Ÿè¡çªã€‚\nç‚ºäº†è§£æ±ºé€™å€‹å•é¡Œï¼Œå¯ä»¥ä½¿ç”¨**ç‰ˆæœ¬å‘é‡(version vectors)**æŠ€è¡“é€²è¡Œæ’åºã€‚  ä½†æ˜¯ï¼Œæœ‰äº›å¤šä¸»è¤‡è£½ç³»çµ±çš„è¡çªæª¢æ¸¬æŠ€è¡“å¯èƒ½ä¸å¤ å¥½ï¼Œå› æ­¤åœ¨ä½¿ç”¨é€™äº›ç³»çµ±æ™‚æ‡‰è©²ä»”ç´°é–±è®€æ–‡ä»¶ä¸¦é€²è¡Œæ¸¬è©¦ï¼Œä»¥ç¢ºä¿ç³»çµ±èƒ½æä¾›æ‰€éœ€çš„ä¿è­‰ã€‚  ç„¡é ˜å°è¤‡è£½  æœ¬ç« ç¯€è¨è«–äº†ä¸åŒçš„è¤‡è£½æ–¹æ³•ï¼Œå¦‚å–®ä¸»è¤‡è£½å’Œå¤šä¸»è¤‡è£½ï¼Œå®ƒå€‘çš„å…±åŒé»æ˜¯éƒ½æœ‰ä¸€å€‹ä¸»åº«ä¾†è™•ç†å¯«è«‹æ±‚ã€‚  ç„¶è€Œï¼Œç„¡ä¸»è¤‡è£½æ–¹æ³•ä¸åŒï¼Œå› ç‚ºå®ƒä¸ä¾è³´ä¸»åº«ã€‚  ç„¡ä¸»è¤‡è£½ç³»çµ±å¦‚ Dynamoã€Riakã€Cassandra å’Œ Voldemort å…è¨±å®¢æˆ¶ç«¯ç›´æ¥å‘å‰¯æœ¬å¯«å…¥è³‡æ–™ï¼Œæˆ–é€šéå”èª¿è€…ç¯€é»é€²è¡Œå¯«å…¥ã€‚\nç„¡ä¸»è¤‡è£½è¨­è¨ˆå°è³‡æ–™åº«çš„ä½¿ç”¨æ–¹å¼å…·æœ‰é‡è¦å½±éŸ¿ã€‚  ç•¶ç¯€é»å¤±æ•ˆæ™‚å¯«å…¥è³‡æ–™åº«  å‡è¨­æœ‰ä¸‰å€‹å‰¯æœ¬çš„è³‡æ–™åº«ã€‚ç•¶å…¶ä¸­ä¸€å€‹å‰¯æœ¬ä¸å¯ç”¨æ™‚ï¼ŒåŸºæ–¼é ˜å°è€…çš„é…ç½®å¯èƒ½éœ€è¦é€²è¡Œæ•…éšœåˆ‡æ›ã€‚  ç„¶è€Œï¼Œåœ¨ç„¡ä¸»é…ç½®ä¸­ï¼Œæ•…éšœè½‰ç§»ä¸å­˜åœ¨ã€‚\nå®¢æˆ¶ç«¯æœƒå°‡å¯«å…¥å‚³é€åˆ°æ‰€æœ‰å‰¯æœ¬ï¼Œè€Œç„¡éœ€æ“”å¿ƒå…¶ä¸­ä¸€å€‹å‰¯æœ¬éŒ¯éäº†å¯«å…¥ã€‚  åªè¦æœ‰å…©å€‹å‰¯æœ¬ç¢ºèªå¯«å…¥ï¼Œå°±èªç‚ºå¯«å…¥æˆåŠŸã€‚  \n     åœ– 5-10 æ³•å®šå¯«å…¥ï¼Œæ³•å®šè®€å–ï¼Œä¸¦åœ¨ç¯€é»ä¸­æ–·å¾Œè®€ä¿®å¾©ã€‚  ä½œè€…æåˆ°äº†ç¯€é»é‡æ–°é€£ç·šå¾Œçš„æ•¸æ“šåŒæ­¥å•é¡Œã€‚  ç‚ºäº†è§£æ±ºå¯èƒ½è®€å–åˆ°éæ™‚æ•¸æ“šçš„å•é¡Œï¼Œå®¢æˆ¶ç«¯æœƒå‘å¤šå€‹ç¯€é»ç™¼é€è®€è«‹æ±‚ã€‚\nç„¶å¾Œï¼Œé€šéç‰ˆæœ¬è™Ÿç¢ºå®šå„ç¯€é»è¿”å›çš„æ•¸æ“šå“ªå€‹æ˜¯æœ€æ–°çš„ï¼Œä»¥é¿å…ä½¿ç”¨åˆ°èˆŠçš„æ•¸æ“šè³‡æ–™ã€‚  åˆ©ç”¨è®€å–ä¾†ä¿®å¾©å’Œåç†µ  åœ¨å¯†é›†å‹æ‡‰ç”¨çš„è³‡æ–™è¤‡è£½éç¨‹ä¸­ï¼Œæœ‰å…©ç¨®å¸¸ç”¨çš„æ–¹æ³•ä¾†ç¢ºä¿æ‰€æœ‰è³‡æ–™åœ¨å„å€‹å‰¯æœ¬ä¸­ä¸€è‡´ï¼š   åˆ©ç”¨è®€å–ä¾†ä¿®å¾©ï¼šå®¢æˆ¶ç«¯åœ¨è®€å–å¤šå€‹ç¯€é»æ™‚ï¼Œæª¢æ¸¬ä¸¦ä¿®æ­£èˆŠçš„æ•¸æ“šè³‡æ–™(å‚³é€æ–°å€¼çµ¦è©²ç¯€é»)ï¼Œé©ç”¨æ–¼ç¶“å¸¸è¢«è®€å–çš„å€¼ã€‚  åç†µéç¨‹ï¼šä¸€å€‹å¾Œå°ç¨‹åºåœ¨å‰¯æœ¬é–“ä¸æ–·æª¢æŸ¥ä¸¦è¤‡è£½ç¼ºå¤±çš„è³‡æ–™ï¼Œä¸ä¾è³´ç‰¹å®šçš„é †åºï¼Œå¯èƒ½æœ‰ä¸€å®šå»¶é²ã€‚  ç„¶è€Œï¼Œä¸¦éæ‰€æœ‰ç³»çµ±éƒ½å¯¦ç¾äº†é€™å…©ç¨®æ©Ÿåˆ¶ã€‚å¦‚æœæ²’æœ‰åç†µéç¨‹ï¼Œå¾ˆå°‘è¢«è®€å–çš„å€¼å¯èƒ½æœƒä¸Ÿå¤±ï¼Œé™ä½äº†æ°¸çºŒæ€§ã€‚  è®€å–å’Œå¯«å…¥çš„æ³•å®šç¥¨æ•¸æ¼”ç®—(Quorums)  æˆ‘å€‘è¨è«–äº†è³‡æ–™å¯†é›†å‹æ‡‰ç”¨ä¸­çš„è³‡æ–™å‰¯æœ¬ã€‚  ä»¥ä¸‰å€‹å‰¯æœ¬çš„æƒ…æ³ç‚ºä¾‹ï¼Œåªè¦è‡³å°‘æœ‰å…©å€‹å‰¯æœ¬å®Œæˆå¯«å…¥ï¼Œè©²å¯«å…¥å°±ç®—æˆåŠŸã€‚ç‚ºäº†ç¢ºä¿è®€å–åˆ°çš„è³‡æ–™æ˜¯æœ€æ–°çš„ï¼Œæˆ‘å€‘éœ€è¦å¾è‡³å°‘å…©å€‹å‰¯æœ¬è®€å–ã€‚\né€šå¸¸ï¼Œn ä»£è¡¨å‰¯æœ¬æ•¸ï¼Œw ä»£è¡¨å¯«å…¥æˆåŠŸéœ€è¦çš„ç¯€é»æ•¸ï¼Œr ä»£è¡¨è®€å–éœ€è¦æŸ¥è©¢çš„ç¯€é»æ•¸ã€‚  åªè¦ r å’Œ w çš„å’Œå¤§æ–¼ nï¼Œå°±èƒ½ç¢ºä¿è®€å–åˆ°æœ€æ–°çš„è³‡æ–™ã€‚\né€™ç¨®è®€å¯«æ–¹æ³•è¢«ç¨±ç‚ºæ³•å®šäººæ•¸çš„è®€å¯«ã€‚  åœ¨ Dynamo é¢¨æ ¼çš„è³‡æ–™åº«ä¸­ï¼Œnã€w å’Œ r çš„å€¼éƒ½æ˜¯å¯é…ç½®çš„ï¼Œå¯ä»¥æ ¹æ“šéœ€æ±‚é€²è¡Œèª¿æ•´ã€‚   å¢é›†ä¸­å¯èƒ½æœ‰å¤šæ–¼ n å€‹çš„ç¯€é»ï¼ˆå¢é›†çš„æ©Ÿå™¨æ•¸å¯èƒ½å¤šæ–¼å‰¯æœ¬æ•¸ç›®ï¼‰ã€‚ä½†æ˜¯ä»»ä½•çµ¦å®šçš„å€¼åªèƒ½å„²å­˜åœ¨ n å€‹ç¯€é»ä¸Šã€‚é€™å…è¨±å°è³‡æ–™é›†é€²è¡Œåˆ†å‰²æ§½ï¼Œå¾è€Œå¯ä»¥æ”¯æ´æ¯”å–®å€‹ç¯€é»çš„å„²å­˜èƒ½åŠ›æ›´å¤§çš„è³‡æ–™é›†ã€‚æˆ‘å€‘å°‡åœ¨ ç¬¬å…­ç«  ç¹¼çºŒè¨è«–åˆ†å‰²æ§½ã€‚   å¦‚æœ w < n ï¼Œç•¶ç¯€é»ä¸å¯ç”¨æ™‚ï¼Œæˆ‘å€‘ä»ç„¶å¯ä»¥è™•ç†å¯«å…¥ã€‚  å¦‚æœ r < n ï¼Œç•¶ç¯€é»ä¸å¯ç”¨æ™‚ï¼Œæˆ‘å€‘ä»ç„¶å¯ä»¥è™•ç†è®€å–ã€‚  å°æ–¼ n = 3ï¼Œw = 2ï¼Œr = 2ï¼Œæˆ‘å€‘å¯ä»¥å®¹å¿ä¸€å€‹ä¸å¯ç”¨çš„ç¯€é»ã€‚  å°æ–¼ n = 5ï¼Œw = 3ï¼Œr = 3ï¼Œæˆ‘å€‘å¯ä»¥å®¹å¿å…©å€‹ä¸å¯ç”¨çš„ç¯€é»ã€‚ é€™å€‹æ¡ˆä¾‹å¦‚ åœ– 5-11 æ‰€ç¤ºã€‚  é€šå¸¸ï¼Œè®€å–å’Œå¯«å…¥æ“ä½œå§‹çµ‚ä¸¦è¡Œå‚³é€åˆ°æ‰€æœ‰ n å€‹å‰¯æœ¬ã€‚å¼•æ•¸ w å’Œ r æ±ºå®šæˆ‘å€‘ç­‰å¾…å¤šå°‘å€‹ç¯€é»ï¼Œå³åœ¨æˆ‘å€‘èªç‚ºè®€æˆ–å¯«æˆåŠŸä¹‹å‰ï¼Œæœ‰å¤šå°‘å€‹ç¯€é»éœ€è¦å ±å‘ŠæˆåŠŸã€‚  \n     åœ– 5-11 å¦‚æœ w + r > n ï¼Œè®€å– r å€‹å‰¯æœ¬ï¼Œè‡³å°‘æœ‰ä¸€å€‹å‰¯æœ¬å¿…ç„¶åŒ…å«äº†æœ€è¿‘çš„æˆåŠŸå¯«å…¥ã€‚  åœ¨é€²è¡Œè³‡æ–™å¯«å…¥æˆ–è®€å–æ™‚ï¼Œå¦‚æœå¯ç”¨ç¯€é»å°‘æ–¼æ‰€éœ€çš„ w æˆ– r å€¼ï¼Œå°‡æœƒå‡ºç¾éŒ¯èª¤ã€‚\nç¯€é»å¤±æ•ˆå¯èƒ½æœ‰å¤šç¨®åŸå› ï¼Œå¦‚ç¯€é»é—œé–‰ã€æ“ä½œéŒ¯èª¤æˆ–ç¶²è·¯å•é¡Œç­‰ã€‚  æˆ‘å€‘åªéœ€é—œæ³¨ç¯€é»æ˜¯å¦æˆåŠŸéŸ¿æ‡‰ï¼Œè€Œç„¡éœ€å€åˆ†éŒ¯èª¤é¡å‹ã€‚  Quorum ä¸€è‡´æ€§çš„é™åˆ¶  ç•¶æœ‰ n å€‹å‰¯æœ¬ï¼Œä¸¦æ»¿è¶³ w + r > n çš„æ¢ä»¶æ™‚ï¼Œé€šå¸¸æ¯æ¬¡è®€å–éƒ½èƒ½ç²å¾—æœ€æ–°å¯«å…¥çš„å€¼ã€‚\nç‚ºç¢ºä¿ w + r > nï¼Œä¸¦åœ¨ç¯€é»æ•…éšœæ™‚ä¿æŒå¯é æ€§ï¼Œr å’Œ w é€šå¸¸è¢«é¸ç‚ºå¤§æ–¼ n/2 çš„æ•¸å­—ã€‚\nè¨­è¨ˆåˆ†æ•£å¼ç®—æ³•æ™‚ï¼Œå¯ä»¥éˆæ´»é¸æ“‡å…¶ä»–è®€å¯«ç¯€é»æ•¸é‡ã€‚  ç•¶ w å’Œ r è¨­å®šè¼ƒå°ï¼Œä»¥ä½¿ w + r <= n æ™‚ï¼Œè®€å–å’Œå¯«å…¥æ“ä½œåƒ…éœ€è¦å°‘é‡æˆåŠŸéŸ¿æ‡‰ã€‚\né€™æ¨£çš„è¨­å®šå¯ä»¥æé«˜å¯ç”¨æ€§å’Œé™ä½å»¶é²ï¼Œä½†å¯èƒ½å°è‡´è®€å–åˆ°è¼ƒèˆŠçš„è³‡æ–™ã€‚\nåªæœ‰ç•¶å¯é”å‰¯æœ¬æ•¸é‡ä½æ–¼ w æˆ– r æ™‚ï¼Œè³‡æ–™åº«æ‰ç„¡æ³•é€²è¡Œè®€å¯«ã€‚  é›–ç„¶æ³•å®šäººæ•¸ (w + r > n) ä¼¼ä¹å¯ä»¥ä¿è­‰è®€å–è¿”å›æœ€æ–°çš„å¯«å…¥å€¼ï¼Œä½†å¯¦éš›ä¸Šä»å¯èƒ½å‡ºç¾é‚Šç·£æƒ…æ³ï¼Œå°è‡´è®€å–åˆ°èˆŠçš„ æ•¸æ“šè³‡æ–™ã€‚\né€™äº›é‚Šç·£æƒ…æ³åŒ…æ‹¬å¯«å…¥å’Œè®€å–è½åœ¨ä¸åŒç¯€é»ä¸Šã€å¯«å…¥è¡çªã€å¯«å…¥å’Œè®€å–åŒæ™‚é€²è¡Œã€å¯«å…¥éƒ¨åˆ†æˆåŠŸæˆ–ç¯€é»æ•…éšœç­‰ã€‚  å› æ­¤ï¼Œåœ¨å¯¦è¸ä¸­ï¼ŒDynamo é¢¨æ ¼çš„è³‡æ–™åº«é€šå¸¸å°å¯å®¹å¿æœ€çµ‚ä¸€è‡´æ€§çš„ç”¨ä¾‹é€²è¡Œæœ€ä½³åŒ–ã€‚\né›–ç„¶å¯ä»¥é€šéèª¿æ•´ w å’Œ r çš„å€¼ä¾†æ¸›å°‘è®€å–åˆ°é™³èˆŠå€¼çš„æ©Ÿç‡ï¼Œä½†å°‡å…¶è¦–ç‚ºçµ•å°ä¿è­‰æ˜¯ä¸æ˜æ™ºçš„ã€‚  ç‚ºäº†ç²å¾—æ›´å¼·æœ‰åŠ›çš„ä¿è­‰ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨  äº¤æ˜“(Translation)  æˆ– å…±è­˜æ–¹æ³•(Consensus Algorithm) ã€‚  ç›£æ§èˆŠå€¼  åœ¨ç›£æ§è³‡æ–™åº«å¥åº·ç‹€æ³æ™‚ï¼Œäº†è§£è¤‡è£½å»¶é²å’Œé™³èˆŠè®€å–å°æ–¼ç¢ºä¿æ•¸æ“šæº–ç¢ºæ€§éå¸¸é‡è¦ã€‚  å°æ–¼åŸºæ–¼é ˜å°è€…çš„è¤‡è£½ï¼Œå¯ä»¥é€šéæ¯”è¼ƒä¸»å¾åº«çš„ä½ç½®ä¾†æ¸¬é‡å»¶é²è§£æ±ºèˆŠæ•¸æ“šè³‡æ–™çš„åˆ¤æ–·ã€‚  ä½†æ˜¯ç„¡ä¸»è¤‡è£½ç³»çµ±çš„ç›£æ§æ›´ç‚ºå›°é›£ï¼Œç„¡ä¸»å¯«å…¥é †åºæ˜¯ä¸å›ºå®šçš„ï¼Œè®“ç›£æ§æ›´åŠ å›°é›£ï¼\nå¦‚æœæ²’æœ‰åç†µï¼Œè½å¾Œç¨‹åº¦å°±æœƒæ²’æœ‰ä¸Šé™ï¼  ç›®å‰å°æ–¼ç„¡ä¸»è¤‡è£½çš„ç›£æ¸¬æœ‰ä¸€å®šçš„ç ”ç©¶ï¼Œä½†å°šæœªæ™®åŠã€‚  å°‡é™³èˆŠæ¸¬é‡å€¼ç´å…¥æ¨™æº–åº¦é‡é›†æ˜¯æœ‰ç›Šçš„ï¼Œ\nå› ç‚ºæœ€çµ‚ä¸€è‡´æ€§æ˜¯å€‹æ¨¡ç³Šçš„ä¿è­‰ï¼Œå¾ç¶­é‹è§’åº¦ä¾†çœ‹ï¼Œæœ€çµ‚\"é‡åŒ–\"ä»ç„¶æ˜¯ä»¶å¾ˆé‡è¦çš„äº‹æƒ…ã€‚  å¯¬é¬†çš„Quorumså’Œæç¤ºç§»äº¤  ä½¿ç”¨åˆç†é…ç½®çš„æ³•å®šäººæ•¸å¯ä»¥è®“è³‡æ–™åº«åœ¨ä¸éœ€è¦æ•…éšœåˆ‡æ›çš„æƒ…æ³ä¸‹å®¹å¿ç¯€é»æ•…éšœã€‚\né€™å°æ–¼éœ€è¦é«˜å¯ç”¨æ€§ã€ä½å»¶é²ä¸¦èƒ½å®¹å¿å¶çˆ¾è®€å–åˆ°èˆŠè³‡æ–™çš„æ‡‰ç”¨éå¸¸æœ‰å¸å¼•åŠ›ã€‚  ç„¶è€Œï¼Œæ³•å®šäººæ•¸åœ¨ç¶²è·¯ä¸­æ–·æ™‚å¯èƒ½ç„¡æ³•å¦‚é æœŸé‚£æ¨£å…·æœ‰å®¹éŒ¯æ€§ã€‚  å¦‚æœå®¢æˆ¶ç«¯èˆ‡è³‡æ–™åº«ç¯€é»å¤±å»é€£æ¥ï¼Œå‰‡å‰©é¤˜çš„å¯ç”¨ç¯€é»å¯èƒ½ä¸è¶³ä»¥é”åˆ°æ³•å®šäººæ•¸ï¼Œå°è‡´å®¢æˆ¶ç«¯ç„¡æ³•æ­£å¸¸ä½¿ç”¨è³‡æ–™åº«ã€‚\nå¦‚æœåœ¨ç¶²è·¯ä¸­æ–·æœŸé–“å®¢æˆ¶ç«¯èƒ½é€£ç·šåˆ°éƒ¨åˆ†è³‡æ–™åº«ç¯€é»ï¼Œä½†ç„¡æ³•é”åˆ°æ³•å®šç¯€é»æ•¸é‡ï¼Œè¨­è¨ˆäººå“¡éœ€è€ƒæ…®ï¼š   å°ç„¡æ³•æ»¿è¶³æ³•å®š w æˆ– r å€‹ç¯€é»æ•¸çš„è«‹æ±‚æ˜¯å¦è¿”å›éŒ¯èª¤ï¼Ÿ  æˆ–æ˜¯æ¥å—å¯«å…¥ï¼Œå¯«åˆ°éƒ¨åˆ†å¯é”ç¯€é»ï¼Œè€Œéå¸¸è¦‹åˆ¶å®šçš„ n å€‹ç¯€é»ï¼Ÿã€Œå¯¬é¬†çš„Quorumsã€  ç°¡è€Œè¨€ä¹‹ï¼Œå¦‚ä½•åœ¨ç¶²è·¯ä¸­æ–·æ™‚ä¿è­‰è³‡æ–™åº«æ­£å¸¸é‹è¡Œæ˜¯è¨­è¨ˆäººå“¡éœ€è¦è€ƒæ…®çš„å•é¡Œã€‚\nå¯¬é¬†çš„æ³•å®šäººæ•¸ï¼ˆsloppy quorumï¼‰åœ¨è¨­è¨ˆè³‡æ–™å¯†é›†å‹æ‡‰ç”¨çš„éç¨‹ä¸­çš„ä½œç”¨ã€‚  ç•¶ç¶²è·¯å‡ºç¾å•é¡Œæ™‚ï¼Œå¯¬é¬†çš„æ³•å®šäººæ•¸å¯ä»¥æé«˜å¯«å…¥å¯ç”¨æ€§ï¼Œå…è¨±å¯«å…¥æ“ä½œåœ¨ä»»ä½•å¯ç”¨çš„ç¯€é»ä¸Šå®Œæˆã€‚\nä½†é€™ç¨®æ–¹æ³•ä¸èƒ½ç¢ºä¿è®€å–åˆ°æœ€æ–°çš„æ•¸æ“šï¼Œå› ç‚ºæœ€æ–°çš„æ•¸æ“šå¯èƒ½å·²ç¶“æš«æ™‚å¯«å…¥äº†ä¸åœ¨ä¸»ç¯€é»é›†åˆä¸­çš„ç¯€é»ã€‚  æç¤ºç§»äº¤ï¼ˆhinted handoffï¼‰æ©Ÿåˆ¶å¯åœ¨ç¶²è·¯å•é¡Œè§£æ±ºå¾Œå°‡é€™äº›æš«æ™‚å¯«å…¥çš„æ•¸æ“šå‚³é€åˆ°ä¸»ç¯€é»ã€‚  å¯¬é¬†çš„Quorums æ¨¡å¼ åœ¨ä¸åŒçš„ Dynamo å¯¦ç¾ä¸­æ˜¯å¯é¸çš„ï¼Œä¸¦ä¸”å…¶é è¨­è¨­ç½®å› å¯¦ç¾è€Œç•°ã€‚  å¤šè³‡æ–™ä¸­å¿ƒç‡Ÿé‹  ç„¡é ˜å°è¤‡è£½åœ¨å¤šè³‡æ–™ä¸­å¿ƒæ“ä½œä¸­çš„é©ç”¨æ€§ï¼Œç‰¹åˆ¥æ˜¯åœ¨å®¹å¿è¡çªã€ç¶²è·¯ä¸­æ–·å’Œå»¶é²å°–å³°æ–¹é¢ã€‚Cassandra å’Œ Voldemort é‹ç”¨ç„¡ä¸»æ¨¡å‹ä¾†å¯¦ç¾å¤šè³‡æ–™ä¸­å¿ƒæ”¯æ´ï¼Œ  å°‡å‰¯æœ¬åˆ†å¸ƒåœ¨å„å€‹è³‡æ–™ä¸­å¿ƒï¼Œä¸¦å…è¨±é…ç½®æ¯å€‹è³‡æ–™ä¸­å¿ƒçš„å‰¯æœ¬æ•¸é‡ã€‚  å®¢æˆ¶ç«¯é€šå¸¸åƒ…ç­‰å¾…æœ¬åœ°è³‡æ–™ä¸­å¿ƒå…§çš„æ³•å®šç¯€é»ç¢ºèªï¼Œä»¥æ¸›å°‘è·¨è³‡æ–™ä¸­å¿ƒéˆè·¯å»¶é²å’Œä¸­æ–·çš„å½±éŸ¿ã€‚  Riak å‰‡å°‡é€šè¨Šé™åˆ¶åœ¨å–®ä¸€è³‡æ–™ä¸­å¿ƒç¯„åœå…§ï¼Œä¸¦åœ¨å¾Œå°éåŒæ­¥åŸ·è¡Œè·¨è³‡æ–™ä¸­å¿ƒçš„è¤‡è£½ã€‚  æª¢æ¸¬ä¸¦ç™¼å¯«å…¥  Dynamo é¢¨æ ¼çš„è³‡æ–™åº«å¯èƒ½æœƒé‡åˆ°è¡çªå•é¡Œï¼Œå› ç‚ºå¤šå€‹å®¢æˆ¶ç«¯å¯ä»¥åŒæ™‚å¯«å…¥ç›¸åŒçš„éµã€‚  ç”±æ–¼ç¶²è·¯å»¶é²å’Œéƒ¨åˆ†ç¯€é»æ•…éšœï¼Œäº‹ä»¶å¯èƒ½ä»¥ä¸åŒé †åºåˆ°é”ä¸åŒç¯€é»ï¼Œå°è‡´è¡çªã€‚  ä¾‹å¦‚ï¼Œåœ– 5-12 é¡¯ç¤ºäº†å…©å€‹å®¢æˆ¶æ©Ÿ A å’Œ B åŒæ™‚å¯«å…¥ä¸‰ç¯€é»è³‡æ–™å„²å­˜ä¸­çš„éµ Xï¼š   ç¯€é» 1 æ¥æ”¶ä¾†è‡ª A çš„å¯«å…¥ï¼Œä½†ç”±æ–¼æš«æ™‚ä¸­æ–·ï¼Œæœªæ¥æ”¶åˆ°ä¾†è‡ª B çš„å¯«å…¥ã€‚  ç¯€é» 2 é¦–å…ˆæ¥æ”¶ä¾†è‡ª A çš„å¯«å…¥ï¼Œç„¶å¾Œæ¥æ”¶ä¾†è‡ª B çš„å¯«å…¥ã€‚  ç¯€é» 3 é¦–å…ˆæ¥æ”¶ä¾†è‡ª B çš„å¯«å…¥ï¼Œç„¶å¾Œå¾ A å¯«å…¥ã€‚  \n     åœ– 5-12 ä¸¦ç™¼å¯«å…¥ Dynamo é¢¨æ ¼çš„è³‡æ–™å„²å­˜ï¼šæ²’æœ‰æ˜ç¢ºå®šç¾©çš„é †åºã€‚  å¦‚ä½•é”æˆä¸€è‡´æ€§ã€‚ç‚ºäº†é”æˆä¸€è‡´æ€§ï¼Œå‰¯æœ¬æ‡‰è©²è¶¨æ–¼ç›¸åŒçš„å€¼ã€‚  é›–ç„¶ç†æƒ³æƒ…æ³ä¸‹ï¼Œè³‡æ–™åº«æ‡‰è©²è‡ªå‹•è™•ç†è¤‡è£½è¡çªï¼Œä½†å¯¦éš›ä¸Šå¯èƒ½éœ€è¦æ‡‰ç”¨ç¨‹å¼é–‹ç™¼äººå“¡å…·å‚™ä¸€å®šçš„è³‡æ–™åº«å…§éƒ¨çŸ¥è­˜ä¾†é¿å…è³‡æ–™ä¸Ÿå¤±ã€‚  æœ¬ç« é‚„å°‡æ›´æ·±å…¥åœ°æ¢è¨è§£æ±ºè¡çªçš„æ–¹æ³•ã€‚  å¾Œå¯«è€…è´(ä¸Ÿæ£„ä¸¦ç™¼çš„å¯«å…¥)  ç‚ºäº†å¯¦ç¾æœ€çµ‚æ”¶æ–‚ï¼Œå¯ä»¥ä½¿ç”¨æœ€å¾Œå¯«å…¥å‹åˆ©LWW(Last Write Win)æ–¹æ³•ï¼Œå³é¸æ“‡å…·æœ‰æœ€å¤§æ™‚é–“æˆ³çš„å¯«å…¥ä½œç‚ºæœ€æ–°çš„ï¼Œä¸¦ä¸Ÿæ£„å…·æœ‰è¼ƒæ—©æ™‚é–“æˆ³çš„å¯«å…¥ã€‚  ä½†æ˜¯ï¼ŒLWWæœƒä»¥æ°¸çºŒæ€§ç‚ºä»£åƒ¹ï¼Œå¯èƒ½å°è‡´éƒ¨åˆ†å¯«å…¥ä¸Ÿå¤±ã€‚\nåœ¨æŸäº›æƒ…æ³ä¸‹ï¼Œä¾‹å¦‚å¿«å–ï¼Œé€™å¯èƒ½æ˜¯å¯ä»¥æ¥å—çš„ï¼Œä½†å¦‚æœè³‡æ–™ä¸Ÿå¤±ä¸å¯æ¥å—ï¼Œå‰‡LWWå¯èƒ½ä¸æ˜¯æœ€ä½³é¸æ“‡ã€‚  è¦å®‰å…¨åœ°åœ¨è³‡æ–™åº«ä¸­ä½¿ç”¨LWWï¼Œæ‡‰ç¢ºä¿æ¯å€‹éµåªå¯«å…¥ä¸€æ¬¡ï¼Œä¸¦å°‡å…¶è¦–ç‚ºä¸å¯è®Šï¼Œä»¥é¿å…å°åŒä¸€å€‹éµé€²è¡Œä¸¦ç™¼æ›´æ–°ã€‚  happens-before å’Œä¸¦ç™¼æ€§  åˆ¤æ–·å…©å€‹æ“ä½œæ˜¯å¦ä¸¦ç™¼çš„é—œéµåœ¨æ–¼ä¸€å€‹æ“ä½œæ˜¯å¦åœ¨å¦ä¸€å€‹æ“ä½œä¹‹å‰ç™¼ç”Ÿã€‚\nç•¶å…©å€‹æ“ä½œäº’ä¸çŸ¥é“å°æ–¹æ™‚ï¼Œå®ƒå€‘æ˜¯ä¸¦ç™¼çš„ã€‚  åœ¨é€™ç¨®æƒ…æ³ä¸‹ï¼Œéœ€è¦è§£æ±ºæ½›åœ¨çš„è¡çªã€‚ç¸½çµä¾†èªªï¼Œæ“ä½œçš„ä¸¦ç™¼æ€§å¯ä»¥åˆ†ç‚ºä¸‰ç¨®æƒ…æ³ï¼š   A åœ¨ B ä¹‹å‰  B åœ¨ A ä¹‹å‰  A å’Œ B ä¸¦ç™¼   ä¸¦ç™¼æ€§ã€æ™‚é–“å’Œç›¸å°æ€§\nå¦‚æœå…©å€‹æ“ä½œ â€œåŒæ™‚â€ ç™¼ç”Ÿï¼Œä¼¼ä¹æ‡‰è©²ç¨±ç‚ºä¸¦ç™¼ â€”â€” ä½†äº‹å¯¦ä¸Šï¼Œå®ƒå€‘åœ¨å­—é¢æ™‚é–“ä¸Šé‡ç–Šèˆ‡å¦ä¸¦ä¸é‡è¦ã€‚ç”±æ–¼åˆ†æ•£å¼ç³»çµ±ä¸­çš„æ™‚é˜å•é¡Œï¼Œç¾å¯¦ä¸­æ˜¯å¾ˆé›£åˆ¤æ–·å…©å€‹äº‹ä»¶æ˜¯å¦æ˜¯ åŒæ™‚ ç™¼ç”Ÿçš„ï¼Œé€™å€‹å•é¡Œæˆ‘å€‘å°‡åœ¨ ç¬¬å…«ç«  ä¸­è©³ç´°è¨è«–ã€‚  ç‚ºäº†å®šç¾©ä¸¦ç™¼æ€§ï¼Œç¢ºåˆ‡çš„æ™‚é–“ä¸¦ä¸é‡è¦ï¼šå¦‚æœå…©å€‹æ“ä½œéƒ½æ„è­˜ä¸åˆ°å°æ–¹çš„å­˜åœ¨ï¼Œå°±ç¨±é€™å…©å€‹æ“ä½œ ä¸¦ç™¼ï¼Œè€Œä¸ç®¡å®ƒå€‘å¯¦éš›ç™¼ç”Ÿçš„ç‰©ç†æ™‚é–“ã€‚äººå€‘æœ‰æ™‚æŠŠé€™å€‹åŸç†å’Œç‰©ç†å­¸ä¸­çš„ç‹¹ç¾©ç›¸å°è«–è¯çµ¡èµ·ä¾†ã€54ã€‘ï¼Œè©²ç†è«–å¼•å…¥äº†è³‡è¨Šä¸èƒ½> æ¯”å…‰é€Ÿæ›´å¿«çš„æ€æƒ³ã€‚å› æ­¤ï¼Œå¦‚æœå…©å€‹äº‹ä»¶ç™¼ç”Ÿçš„æ™‚é–“å·®å°æ–¼å…‰é€éå®ƒå€‘ä¹‹é–“çš„è·é›¢æ‰€éœ€è¦çš„æ™‚é–“ï¼Œé‚£éº¼é€™å…©å€‹äº‹ä»¶ä¸å¯èƒ½ç›¸äº’å½±éŸ¿ã€‚  åœ¨è¨ˆç®—æ©Ÿç³»çµ±ä¸­ï¼Œå³ä½¿å…‰é€ŸåŸå‰‡ä¸Šå…è¨±ä¸€å€‹æ“ä½œå½±éŸ¿å¦ä¸€å€‹æ“ä½œï¼Œä½†å…©å€‹æ“ä½œä¹Ÿå¯èƒ½æ˜¯ ä¸¦ç™¼çš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç¶²è·¯ç·©æ…¢æˆ–ä¸­æ–·ï¼Œå…©å€‹æ“ä½œé–“å¯èƒ½æœƒå‡ºç¾ä¸€æ®µæ™‚é–“é–“éš”ï¼Œä½†ä»ç„¶æ˜¯ä¸¦ç™¼çš„ï¼Œå› ç‚ºç¶²è·¯å•é¡Œé˜»æ­¢ä¸€å€‹æ“ä½œæ„è­˜åˆ°å¦ä¸€å€‹æ“ä½œçš„å­˜åœ¨ã€‚  æ“·å– happens-before å…ˆå¾Œé—œä¿‚  ç”¨æ–¼ç¢ºå®šå…©å€‹æ“ä½œæ˜¯å¦ç‚ºä¸¦ç™¼çš„ï¼Œæˆ–è€…ä¸€å€‹åœ¨å¦ä¸€å€‹ä¹‹å‰ã€‚\nè©²ä¾‹å­ä¸­ï¼Œå…©å€‹å®¢æˆ¶ç«¯åŒæ™‚å°‡å•†å“åŠ å…¥è³¼ç‰©è»Šã€‚  é€™å€‹éç¨‹æ¶‰åŠäº”æ¬¡å¯«å…¥æ“ä½œï¼Œæ¯æ¬¡å®¢æˆ¶ç«¯å˜—è©¦å°‡æ–°å•†å“æ·»åŠ åˆ°è³¼ç‰©è»Šæ™‚ï¼Œä¼ºæœå™¨éƒ½æœƒåˆ†é…æ–°çš„ç‰ˆæœ¬è™Ÿã€‚\nåœ¨é€™å€‹éç¨‹ä¸­ï¼Œä¸åŒå®¢æˆ¶ç«¯çš„æ“ä½œå¯èƒ½äº’ç›¸å½±éŸ¿ï¼Œæœ€å¾Œä¼ºæœå™¨å°‡ä¿ç•™ä¸¦ç™¼å€¼ã€‚  ç°¡å–®ä¾†èªªï¼Œè©²æ¼”ç®—æ³•æ˜¯ç‚ºäº†ç¢ºå®šæ“ä½œä¹‹é–“çš„ä¸¦ç™¼æ€§ï¼Œä¸¦æ ¹æ“šæ“ä½œçš„é †åºå’Œç‰ˆæœ¬è™Ÿä¾†åˆä½µè³¼ç‰©è»Šå…§å®¹ã€‚  \n     åœ– 5-13 åœ¨åŒæ™‚ç·¨è¼¯è³¼ç‰©è»Šæ™‚æ•ç²å…©å€‹å®¢æˆ¶ç«¯ä¹‹é–“çš„å› æœé—œä¿‚ã€‚  \n     åœ– 5-14 åœ– 5-13 ä¸­çš„å› æœä¾è³´é—œä¿‚åœ–ã€‚  è©²æ¼”ç®—æ³•çš„å·¥ä½œåŸç†å¦‚ä¸‹   ä¼ºæœå™¨ç‚ºæ¯å€‹éµç¶­è­·ä¸€å€‹ç‰ˆæœ¬è™Ÿï¼Œå¯«å…¥æ™‚éå¢ç‰ˆæœ¬è™Ÿï¼Œä¸¦å°‡æ–°ç‰ˆæœ¬è™Ÿèˆ‡å€¼ä¸€èµ·å„²å­˜ã€‚  å®¢æˆ¶ç«¯è®€å–éµæ™‚ï¼Œä¼ºæœå™¨è¿”å›æ‰€æœ‰æœªè¦†è“‹å€¼åŠæœ€æ–°ç‰ˆæœ¬è™Ÿï¼›å®¢æˆ¶ç«¯éœ€å…ˆè®€å–å†å¯«å…¥ã€‚  å®¢æˆ¶ç«¯å¯«å…¥éµæ™‚ï¼Œé™„å¸¶è®€å–çš„ç‰ˆæœ¬è™Ÿï¼Œä¸¦å°‡ä¹‹å‰è®€å–çš„æ‰€æœ‰å€¼åˆä½µåœ¨ä¸€èµ·ã€‚  ä¼ºæœå™¨æ”¶åˆ°å¯«å…¥æ™‚ï¼Œè¦†è“‹ç›¸åŒæˆ–æ›´ä½ç‰ˆæœ¬è™Ÿçš„å€¼ï¼Œä¸¦ä»¥æ›´é«˜ç‰ˆæœ¬è™Ÿå„²å­˜æ‰€æœ‰å€¼ã€‚  å¯«å…¥æ™‚åŒ…å«è®€å–çš„ç‰ˆæœ¬è™Ÿæœ‰åŠ©æ–¼ç¢ºå®šå¯«å…¥åŸºæ–¼çš„ç‹€æ…‹ã€‚\nç„¡ç‰ˆæœ¬è™Ÿçš„å¯«å…¥èˆ‡å…¶ä»–å¯«å…¥ä¸¦ç™¼ï¼Œä¸æœƒè¦†è“‹å…§å®¹ï¼Œè€Œåªæœƒä½œç‚ºéš¨å¾Œè®€å–çš„ä¸€å€‹å€¼è¿”å›ã€‚  åˆä½µä¸¦ç™¼å¯«å…¥çš„å€¼  ç•¶å¤šå€‹å®¢æˆ¶ç«¯åŒæ™‚é€²è¡Œè³‡æ–™å¯«å…¥æ™‚ï¼Œå¦‚ä½•è§£æ±ºè¡çªä¸¦åˆä½µè³‡æ–™ã€‚  ä»¥è³¼ç‰©è»Šç‚ºä¾‹ï¼Œä½œè€…æå‡ºä¸€ç¨®å°‡ä¸¦ç™¼å€¼åšä¸¦é›†çš„åˆä½µæ–¹æ³•ã€‚\nç„¶è€Œï¼Œè‹¥è¦å…è¨±ç”¨æˆ¶ç§»é™¤è³¼ç‰©è»Šä¸­çš„é …ç›®ï¼Œé€™ç¨®æ–¹æ³•å¯èƒ½ç„¡æ³•ç”¢ç”Ÿæ­£ç¢ºçµæœã€‚  ç‚ºè§£æ±ºé€™å€‹å•é¡Œï¼Œç³»çµ±æ‡‰ç•™ä¸‹åˆªé™¤æ¨™è¨˜ï¼ˆå¢“ç¢‘ï¼‰ï¼Œä»¥è¡¨ç¤ºæŸå€‹é …ç›®å·²è¢«ç§»é™¤ã€‚\nå¦å¤–ï¼Œç‚ºç°¡åŒ–åˆä½µéç¨‹ï¼Œæœ‰ä¸€äº›è³‡æ–™çµæ§‹ï¼ˆå¦‚CRDTï¼‰å¯è‡ªå‹•åŸ·è¡Œåˆä½µæ“ä½œã€‚  ç‰ˆæœ¬å‘é‡  åœ¨åœ– 5-13 çš„ä¾‹å­ä¸­ï¼Œåƒ…ä½¿ç”¨äº†ä¸€å€‹å‰¯æœ¬ã€‚  ç•¶æœ‰å¤šå€‹å‰¯æœ¬è€Œç„¡ä¸»åº«æ™‚ï¼Œæˆ‘å€‘éœ€è¦ä¿®æ”¹ç®—æ³•ã€‚\næˆ‘å€‘å°‡ä½¿ç”¨ç‰ˆæœ¬å‘é‡ä¾†æ•æ‰å¤šå€‹å‰¯æœ¬ä¹‹é–“çš„ä¾è³´é—œä¿‚ï¼Œæ¯å€‹å‰¯æœ¬éƒ½æœ‰è‡ªå·±çš„ç‰ˆæœ¬è™Ÿã€‚  ç•¶å‰¯æœ¬è™•ç†å¯«å…¥æ™‚ï¼Œç‰ˆæœ¬è™Ÿæœƒå¢åŠ ï¼Œä¸¦è¿½è¸ªå…¶ä»–å‰¯æœ¬çš„ç‰ˆæœ¬è™Ÿã€‚\né€™æœ‰åŠ©æ–¼ç¢ºå®šè¦†è“‹å“ªäº›å€¼ä»¥åŠä¿ç•™å“ªäº›å€¼ã€‚  ç‰ˆæœ¬å‘é‡å…è¨±å€åˆ†è¦†è“‹å¯«å…¥å’Œä¸¦ç™¼å¯«å…¥ï¼Œä¸¦ç¢ºä¿å¾ä¸€å€‹å‰¯æœ¬è®€å–ä¸¦å¯«å›åˆ°å¦ä¸€å€‹å‰¯æœ¬æ˜¯å®‰å…¨çš„ã€‚\nç„¶è€Œï¼Œæ‡‰ç”¨ç¨‹å¼å¯èƒ½éœ€è¦åˆä½µä¸¦ç™¼å€¼ã€‚\nåªè¦èƒ½æ­£ç¢ºåˆä½µï¼Œå°±ä¸æœƒä¸Ÿå¤±è³‡æ–™ã€‚   ç‰ˆæœ¬å‘é‡å’Œå‘é‡æ™‚é˜\nç‰ˆæœ¬å‘é‡æœ‰æ™‚ä¹Ÿè¢«ç¨±ç‚ºå‘é‡æ™‚é˜ï¼Œå³ä½¿å®ƒå€‘ä¸å®Œå…¨ç›¸åŒã€‚å…¶ä¸­çš„å·®åˆ¥å¾ˆå¾®å¦™ â€”â€” ç´°ç¯€è«‹åƒé–±åƒè€ƒè³‡æ–™ã€57,60,61ã€‘ã€‚ç°¡è€Œè¨€ä¹‹ï¼Œåœ¨æ¯”è¼ƒå‰¯æœ¬çš„ç‹€æ…‹æ™‚ï¼Œç‰ˆæœ¬å‘é‡æ‰æ˜¯æ­£ç¢ºçš„è³‡æ–™çµæ§‹ã€‚  å°çµ  åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘å€‘è€ƒå¯Ÿäº†è¤‡è£½çš„å•é¡Œã€‚è¤‡è£½å¯ä»¥ç”¨æ–¼å¹¾å€‹ç›®çš„ï¼š   é«˜å¯ç”¨æ€§  å³ä½¿åœ¨ä¸€è‡ºæ©Ÿå™¨ï¼ˆæˆ–å¤šè‡ºæ©Ÿå™¨ï¼Œæˆ–æ•´å€‹è³‡æ–™ä¸­å¿ƒï¼‰åœæ©Ÿçš„æƒ…æ³ä¸‹ä¹Ÿèƒ½ä¿æŒç³»çµ±æ­£å¸¸åŸ·è¡Œ  æ–·é–‹é€£ç·šçš„æ“ä½œ  å…è¨±æ‡‰ç”¨ç¨‹å¼åœ¨ç¶²è·¯ä¸­æ–·æ™‚ç¹¼çºŒå·¥ä½œ  å»¶é²  å°‡è³‡æ–™æ”¾ç½®åœ¨åœ°ç†ä¸Šè·é›¢ä½¿ç”¨è€…è¼ƒè¿‘çš„åœ°æ–¹ï¼Œä»¥ä¾¿ä½¿ç”¨è€…èƒ½å¤ æ›´å¿«åœ°èˆ‡å…¶äº’å‹•  å¯ä¼¸ç¸®æ€§  é€éåœ¨å‰¯æœ¬ä¸Šè®€ï¼Œèƒ½å¤ è™•ç†æ¯”å–®æ©Ÿæ›´å¤§çš„è®€å–é‡  å„˜ç®¡æ˜¯ä¸€å€‹ç°¡å–®çš„ç›®æ¨™ - åœ¨å¹¾è‡ºæ©Ÿå™¨ä¸Šä¿ç•™ç›¸åŒè³‡æ–™çš„å‰¯æœ¬ï¼Œä½†è¤‡è£½å»æ˜¯ä¸€å€‹éå¸¸æ£˜æ‰‹çš„å•é¡Œã€‚å®ƒéœ€è¦ä»”ç´°è€ƒæ…®ä¸¦ ç™¼å’Œæ‰€æœ‰å¯èƒ½å‡ºéŒ¯çš„äº‹æƒ…ï¼Œä¸¦è™•ç†é€™äº›æ•…éšœçš„å¾Œæœã€‚è‡³å°‘ï¼Œæˆ‘å€‘éœ€è¦è™•ç†ä¸å¯ç”¨çš„ç¯€é»å’Œç¶²è·¯ä¸­æ–·ï¼ˆé€™é‚„ä¸åŒ…æ‹¬æ›´éš±è”½çš„æ•…éšœï¼Œä¾‹å¦‚ç”±æ–¼è»Ÿé«”éŒ¯èª¤å°è‡´çš„éœé»˜è³‡æ–™æå£ï¼‰ã€‚  æˆ‘å€‘è¨è«–äº†è¤‡è£½çš„ä¸‰ç¨®ä¸»è¦æ–¹æ³•ï¼š   å–®ä¸»è¤‡è£½  å®¢æˆ¶ç«¯å°‡æ‰€æœ‰å¯«å…¥æ“ä½œå‚³é€åˆ°å–®å€‹ç¯€é»ï¼ˆä¸»åº«ï¼‰ï¼Œè©²ç¯€é»å°‡è³‡æ–™æ›´æ”¹äº‹ä»¶æµå‚³é€åˆ°å…¶ä»–å‰¯æœ¬ï¼ˆå¾åº«ï¼‰ã€‚è®€å–å¯ä»¥åœ¨ä»»ä½•å‰¯æœ¬ä¸ŠåŸ·è¡Œï¼Œä½†å¾åº«çš„è®€å–çµæœå¯èƒ½æ˜¯é™³èˆŠçš„ã€‚  å¤šä¸»è¤‡è£½  å®¢æˆ¶ç«¯å°‡æ¯å€‹å¯«å…¥å‚³é€åˆ°å¹¾å€‹ä¸»åº«ç¯€é»ä¹‹ä¸€ï¼Œå…¶ä¸­ä»»ä½•ä¸€å€‹ä¸»åº«éƒ½å¯ä»¥æ¥å—å¯«å…¥ã€‚ä¸»åº«å°‡è³‡æ–™æ›´æ”¹äº‹ä»¶æµå‚³é€çµ¦å½¼æ­¤ä»¥åŠä»»ä½•å¾åº«ç¯€é»ã€‚  ç„¡ä¸»è¤‡è£½  å®¢æˆ¶ç«¯å°‡æ¯å€‹å¯«å…¥å‚³é€åˆ°å¹¾å€‹ç¯€é»ï¼Œä¸¦å¾å¤šå€‹ç¯€é»ä¸¦è¡Œè®€å–ï¼Œä»¥æª¢æ¸¬å’Œç³¾æ­£å…·æœ‰é™³èˆŠè³‡æ–™çš„ç¯€é»ã€‚  æ¯ç¨®æ–¹æ³•éƒ½æœ‰å„ªé»å’Œç¼ºé»ã€‚å–®ä¸»è¤‡è£½æ˜¯éå¸¸æµè¡Œçš„ï¼Œå› ç‚ºå®ƒå¾ˆå®¹æ˜“ç†è§£ï¼Œä¸éœ€è¦æ“”å¿ƒè¡çªè§£æ±ºã€‚åœ¨å‡ºç¾æ•…éšœç¯€é»ã€ç¶²è·¯ä¸­æ–·å’Œå»¶é²å³°å€¼çš„æƒ…æ³ä¸‹ï¼Œå¤šä¸»è¤‡è£½å’Œç„¡ä¸»è¤‡è£½å¯ä»¥æ›´åŠ å¥å£¯ï¼Œå…¶ä»£åƒ¹æ˜¯é›£ä»¥æ¨ç†ä¸¦ä¸”åƒ…æä¾›éå¸¸å¼±çš„ä¸€è‡´æ€§ä¿è­‰ã€‚  è¤‡è£½å¯ä»¥æ˜¯åŒæ­¥çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯éåŒæ­¥çš„ï¼Œé€™åœ¨ç™¼ç”Ÿæ•…éšœæ™‚å°ç³»çµ±è¡Œç‚ºæœ‰æ·±é çš„å½±éŸ¿ã€‚å„˜ç®¡åœ¨ç³»çµ±åŸ·è¡Œå¹³ç©©æ™‚éåŒæ­¥è¤‡è£½é€Ÿåº¦å¾ˆå¿«ï¼Œä½†æ˜¯è¦å¼„æ¸…æ¥šåœ¨è¤‡è£½å»¶é²å¢åŠ å’Œä¼ºæœå™¨æ•…éšœæ™‚æœƒç™¼ç”Ÿä»€éº¼ï¼Œé€™ä¸€é»å¾ˆé‡è¦ã€‚å¦‚æœä¸»åº«å¤±æ•—å¾Œä½ å°‡ä¸€å€‹éåŒæ­¥æ›´æ–°çš„å¾åº«æå‡ç‚ºæ–°çš„ä¸»åº«ï¼Œé‚£éº¼æœ€è¿‘æäº¤çš„è³‡æ–™å¯èƒ½æœƒä¸Ÿå¤±ã€‚  æˆ‘å€‘ç ”ç©¶äº†ä¸€äº›å¯èƒ½ç”±è¤‡è£½å»¶é²å¼•èµ·çš„å¥‡æ€ªæ•ˆæ‡‰ï¼Œæˆ‘å€‘ä¹Ÿè¨è«–äº†ä¸€äº›æœ‰åŠ©æ–¼æ±ºå®šæ‡‰ç”¨ç¨‹å¼åœ¨è¤‡è£½å»¶é²æ™‚çš„è¡Œç‚ºçš„ä¸€è‡´æ€§æ¨¡å‹ï¼š   å¯«å¾Œè®€ä¸€è‡´æ€§  ä½¿ç”¨è€…æ‡‰è©²ç¸½æ˜¯èƒ½çœ‹åˆ°è‡ªå·±æäº¤çš„è³‡æ–™ã€‚  å–®èª¿è®€  ä½¿ç”¨è€…åœ¨çœ‹åˆ°æŸå€‹æ™‚é–“é»çš„è³‡æ–™å¾Œï¼Œä»–å€‘ä¸æ‡‰è©²å†çœ‹åˆ°è©²è³‡æ–™åœ¨æ›´æ—©æ™‚é–“é»çš„æƒ…æ³ã€‚  ä¸€è‡´å­—é¦–è®€  ä½¿ç”¨è€…æ‡‰è©²çœ‹åˆ°è³‡æ–™è™•æ–¼ä¸€ç¨®å…·æœ‰å› æœæ„ç¾©çš„ç‹€æ…‹ï¼šä¾‹å¦‚ï¼ŒæŒ‰æ­£ç¢ºçš„é †åºçœ‹åˆ°ä¸€å€‹å•é¡Œå’Œå°æ‡‰çš„å›ç­”ã€‚  æœ€å¾Œï¼Œæˆ‘å€‘è¨è«–äº†å¤šä¸»è¤‡è£½å’Œç„¡ä¸»è¤‡è£½æ–¹æ³•æ‰€å›ºæœ‰çš„ä¸¦ç™¼å•é¡Œï¼šå› ç‚ºä»–å€‘å…è¨±å¤šå€‹å¯«å…¥ä¸¦ç™¼ç™¼ç”Ÿï¼Œé€™å¯èƒ½æœƒå°è‡´è¡çªã€‚æˆ‘å€‘ç ”ç©¶äº†ä¸€å€‹æ•¸æ“šåº«å¯ä»¥ä½¿ç”¨çš„æ¼”ç®—æ³•ä¾†ç¢ºå®šä¸€å€‹æ“ä½œæ˜¯å¦ç™¼ç”Ÿåœ¨å¦ä¸€å€‹æ“ä½œä¹‹å‰ï¼Œæˆ–è€…å®ƒå€‘æ˜¯å¦ä¸¦ç™¼ç™¼ç”Ÿã€‚æˆ‘å€‘é‚„è«‡åˆ°äº†é€éåˆä½µä¸¦ç™¼æ›´æ–°ä¾†è§£æ±ºè¡çªçš„æ–¹æ³•ã€‚  åœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘å€‘å°‡ç¹¼çºŒè€ƒå¯Ÿè³‡æ–™åˆ†ä½ˆåœ¨å¤šè‡ºæ©Ÿå™¨é–“çš„å¦ä¸€ç¨®ä¸åŒæ–¼ è¤‡è£½ çš„å½¢å¼ï¼šå°‡å¤§è³‡æ–™é›†åˆ†å‰²æˆ åˆ†å‰²æ§½ã€‚"},{"id":"content:6.clean-arch:1.chapter1.md","path":"/clean-arch/chapter1","dir":"clean-arch","title":"01 ä»€éº¼æ˜¯è¨­è¨ˆèˆ‡çµæ§‹","description":"","keywords":["å‰è¨€","ç›®æ¨™","æ¡ˆä¾‹ç ”ç©¶","ç¸½çµ"],"body":"  å‰è¨€  é€™äº›å¹´ä¾†ï¼Œåœ¨è¨­è¨ˆå’Œæ¶æ§‹æ–¹é¢ä¸€ç›´å­˜åœ¨ä¸å°‘çš„ç–‘æƒ‘ã€‚åˆ°åº•ä»€éº¼æ˜¯è¨­è¨ˆ(design)? ä»€éº¼æ˜¯æ¶æ§‹(architecture)? å…©è€…æœ‰ä½•å€åˆ¥?  æœ¬æ›¸çš„ç›®çš„ä¹‹ä¸€å°±æ˜¯è¦æ¶ˆé™¤é€™äº›å›°æƒ‘ï¼Œä¸¦ä¸€å‹æ°¸é€¸åœ°å®šç¾©æ¶æ§‹å’Œè¨­è¨ˆã€‚   æ¶æ§‹ï¼š æ›´é«˜å±¤æ¬¡çš„æ¦‚å¿µï¼Œå®ƒæ¶‰åŠåˆ°ç³»çµ±çš„æ•´é«”çµæ§‹å’Œçµ„ä»¶ä¹‹é–“çš„é—œä¿‚ã€‚æ¶æ§‹é—œæ³¨æ–¼ç³»çµ±çš„çµ„ç¹”æ–¹å¼ï¼Œç¢ºä¿ç³»çµ±èƒ½å¤ æ»¿è¶³éåŠŸèƒ½æ€§éœ€æ±‚ï¼Œå¦‚å¯æ“´å±•æ€§ã€å¯ç¶­è­·æ€§å’Œå®‰å…¨æ€§ã€‚  è¨­è¨ˆï¼š è¼ƒä½å±¤æ¬¡çš„æ¦‚å¿µï¼Œå®ƒæ¶‰åŠè»Ÿé«”é–‹ç™¼çš„å…·é«”ç´°ç¯€ï¼Œä¾‹å¦‚: é¡åˆ¥çš„å®šç¾©ã€æ–¹æ³•çš„å¯¦ç¾ã€è®Šæ•¸çš„ä½¿ç”¨ç­‰ã€‚  èˆ‰å€‹ä¾‹å­ï¼Œä»¥ä¸€å€‹è¨­è¨ˆçš„æ–°å®¶ä¾†èˆ‰ä¾‹ï¼Œé€™å€‹å®¶æœ‰ä¸€å€‹æ¶æ§‹å—? ç•¶ç„¶æœ‰çš„ã€‚é‚£éº¼æ¶æ§‹æ˜¯ä»€éº¼å‘¢? å°±æ˜¯å®¶çš„å½¢ç‹€(Shape)ã€å¤–è§€ã€æŒ‘é«˜ã€å’Œç©ºé–“ä»¥åŠæˆ¿é–“çš„ä½ˆå±€ã€‚ä½†ç•¶æˆ‘å€‘å»çœ‹è¨­è¨ˆå¸«è£½ä½œçš„  è¨­è¨ˆåœ– æ™‚ï¼Œä½ æœƒçœ‹åˆ°å¤§é‡çš„ä½å±¤æ¬¡ç´°ç¯€ï¼Œä¾‹å¦‚: æ’åº§ã€ç‡ˆçš„é–‹é—œå’Œç‡ˆè¢«æ”¾ç½®åœ¨å“ªè£¡ã€‚  å› æ­¤ï¼Œé€™å°±æ˜¯è»Ÿé«”è¨­è¨ˆã€‚ä½å±¤æ¬¡çš„ç´°ç¯€å’Œé«˜å±¤æ¬¡çš„çµæ§‹éƒ½æ˜¯åŒä¸€å€‹æ•´é«”çš„ä¸€éƒ¨åˆ†ã€‚ä»–å€‘å½¢æˆäº†ä¸€å€‹é€£çºŒçš„çµæ§‹ï¼Œå®šç¾©äº†ç³»çµ±çš„å½¢ç‹€(Shape)ã€‚ä½ ä¸èƒ½åªæœ‰ä¸€å€‹è€Œæ²’æœ‰å¦å¤–ä¸€å€‹; å¯¦éš›ä¸Šï¼Œé€™å…©è€…æ²’æœ‰å¾ˆæ˜ç¢ºçš„åˆ†ç•Œç·šã€‚åªæœ‰å¾æœ€é«˜å±¤åˆ°æœ€ä½å±¤çš„ä¸€ç³»åˆ—æ±ºç­–ã€‚  ç›®æ¨™  é€™äº›æ±ºç­–çš„ç›®æ¨™æ˜¯ä»€éº¼? å¥½çš„è»Ÿé«”è¨­è¨ˆçš„ç›®æ¨™æ˜¯ä»€éº¼?   ğŸ’¡æŸ¥çœ‹ç­”æ¡ˆ   è»Ÿé«”æ¶æ§‹çš„ç›®æ¨™æ˜¯æœ€å°åŒ–å»ºç½®å’Œç¶­è­·ã€Œéœ€æ±‚ç³»çµ±ã€æ‰€éœ€è¦çš„äººåŠ›è³‡æºã€‚  è¨­è¨ˆå“è³ªçš„åº¦é‡æ¨™æº–ã€‚åœ¨ç³»çµ±çš„æ•´å€‹ç”Ÿå‘½é€±æœŸä¸­ï¼ŒèŠ±è²»çš„ç²¾åŠ›éƒ½æ˜¯ä¿æŒå°‘çš„ï¼Œé‚£éº¼é€™å€‹è¨­è¨ˆå°±æ˜¯å¥½çš„ï¼Œå¦‚æœæ¯æ¬¡èŠ±è²»çš„ç²¾åŠ›éƒ½æœƒéš¨è‘—æ¯å€‹æ–°ç‰ˆæœ¬çš„å¢é•·è€Œå¢é•·çš„è©±ï¼Œé‚£éº¼é€™å€‹è¨­è¨ˆå°±æ˜¯ä¸å¥½çš„ã€‚  æ¡ˆä¾‹ç ”ç©¶  ä¸‹é¢æ˜¯æ¡ç”¨çœŸå¯¦çš„æ¡ˆä¾‹ç ”ç©¶ä¾†é€²è¡Œå±•ç¤º, ä¸»è¦æ˜¯é€éå¹¾å€‹è§€é»ä¾†é€²è¡Œæ¯”è¼ƒ   å·¥ç¨‹äººå“¡çš„å¢åŠ   å·¥ç¨‹äººå“¡çš„ç”Ÿç”¢åŠ›  ç¨‹å¼ç¢¼èŠ±è²»çš„æˆæœ¬  \n    \n    \n     çˆ›æ”¤å­çš„è¨˜è™Ÿ  ä½ çœ‹åˆ°ä¸Šé¢çš„æ¡ˆä¾‹ç ”ç©¶å°±æ˜¯æ‰€è¬‚çš„çˆ›æ”¤å­è¨˜è™Ÿã€‚ç•¶å°ç¨‹å¼ç¢¼çš„æ•´æ½”ç¨‹åº¦å’Œè¨­è¨ˆæ¶æ§‹æ²’æœ‰è¦åŠƒå¥½çš„æƒ…æ³ä¸‹ï¼Œæœƒå°è‡´ä½ çš„ Release è¶Šå¤§æ™‚ï¼ŒèŠ±è²»çš„æˆæœ¬ä¹Ÿè·Ÿè‘—æé«˜ã€‚  \n     \n  å¾é–‹ç™¼äººå“¡çš„è§€é»ä¾†çœ‹ï¼ŒæŠ•å…¥äº†å¤§é‡çš„æ™‚é–“ï¼Œä½†ä»–å€‘ç”¢å‡ºéå¸¸çš„ä½ï¼Œæ˜¯å› ç‚ºä»–å€‘éœ€è¦åŠªåŠ›ä¾†ç®¡ç†é€™äº›çˆ›æ”¤å­ï¼Œè€Œå°è‡´æ²’æœ‰ä»»ä½•çš„ç”¢èƒ½ã€‚  é«˜å±¤ç®¡ç†çš„è§€é»  \n     \n   ç¬¬ä¸€å€‹ç‰ˆæœ¬çš„æ¯æœˆèŠ±è²»æ˜¯æ•¸åè¬ç¾å…ƒã€‚  ç¬¬äºŒå€‹ç‰ˆæœ¬çš„æ¯æœˆèŠ±è²»æ¯”ç¬¬ä¸€å€‹ç‰ˆæœ¬å¤šäº†æ•¸åè¬ç¾å…ƒã€‚  ç¬¬å…«å€‹ç‰ˆæœ¬çš„æ¯æœˆèŠ±è²»æ˜¯ 2000 è¬ç¾å…ƒï¼Œé€™å€‹é‡‘é¡æŒçºŒä¸Šå‡  æˆ‘å€‘æ¯”è¼ƒåœ– 1.5 å’Œåœ– 1.2 ä¸­æ¯å€‹ç‰ˆæœ¬çš„ç¨‹å¼ç¢¼è¡Œæ•¸ã€‚ä½ æœƒç™¼ç¾æœ€åˆåªèŠ±æ¯å€‹æœˆåå¹¾è¬ç¾å…ƒæ›å¾—äº†è¨±å¤šåŠŸèƒ½ï¼Œä½†æœ€å¾Œçš„ 2000 è¬ç¾å…ƒå¹¾ä¹æ²’æœ‰å¾—åˆ°ä»»ä½•çš„æ±è¥¿! å¦‚æœä½ æ˜¯å…¬å¸çš„ä¸»ç®¡çœ‹åˆ°é€™å…©å¼µåœ–è¡¨ï¼Œå°±å¯ä»¥çŸ¥é“é¿å…ç½é›£ä¸¦ç«‹å³æ¡å–è¡Œå‹•æ˜¯å¿…è¦çš„ã€‚  é«˜å±¤ç®¡ç†äººå“¡å¿…é ˆæ€è€ƒä¸‹åˆ—çš„äº‹æƒ…ï¼Œå˜—è©¦æ‰¾å‡ºå•é¡Œé»   è©²æ€éº¼æ¡å–è¡Œå‹•?  å“ªè£¡å‡ºäº†å•é¡Œ?  ä»€éº¼å•é¡Œå°è‡´ç”Ÿç”¢åŠ›å¦‚æ­¤é©šäººåœ°ä¸‹é™?  ä»€éº¼åœ°æ–¹å‡ºäº†éŒ¯ï¼Ÿ  åœ¨å…©åƒå…­ç™¾å¹´å‰ï¼Œä¼Šç´¢å‘Šè¨´æˆ‘å€‘ã€Œé¾œå…”è³½è·‘ã€çš„æ•…äº‹ã€‚é€™å€‹æ•…äº‹çš„å¯“æ„å·²ç¶“è¢«é™³è¿°å¾ˆå¤šæ¬¡äº†:   è¸å¯¦å’Œç©©å®šæŒçºŒæ˜¯è´å¾—æ¯”è³½çš„é—œéµ  é€™å ´æ¯”è³½ä¸æ˜¯æ¯”è¿…é€Ÿï¼Œä¹Ÿä¸æ˜¯æ¯”èª°è¼ƒç‚ºå¼·å£¯  è¶Šå¿«çš„ï¼Œåè€Œé€Ÿåº¦æ…¢  é€™å€‹æ•…äº‹æœ¬èº«èªªæ˜äº†éåº¦è‡ªä¿¡çš„æ„šè ¢ã€‚å…”å­å°æ–¼è‡ªå·±çš„é€Ÿåº¦å¦‚æ­¤è‡ªä¿¡ï¼Œåˆä¸èªçœŸå°å¾…æ¯”è³½ï¼Œæ‰€ä»¥çƒé¾œç©¿è¶Šçµ‚é»æ™‚é‚„åœ¨ç¡åˆè¦ºã€‚  ç¾ä»£é–‹ç™¼è€…ä¹Ÿè™•æ–¼é¡ä¼¼çš„ç«¶è³½ç‹€æ…‹ï¼Œè¡¨ç¾å‡ºé¡ä¼¼çš„éåº¦è‡ªä¿¡ã€‚å¤§å¤šæ•¸çš„ç¾ä»£é–‹ç™¼è€…å·¥ä½œå¾—å¾ˆåŠªåŠ›ï¼Œä½†ä»–å€‘çš„å¤§è…¦ä¸€éƒ¨åˆ†ç¢ºå¯¦åœ¨ç¡è¦ºçš„ï¼Œé€™é‚Šæ˜¯æŒ‡å¥½çš„ã€æ•´æ½”çš„ã€ç²¾å¿ƒè¨­è¨ˆçš„ç¨‹å¼ç¢¼  å¾ˆé‡è¦ çš„éƒ¨åˆ†ä»ç„¶æ­£åœ¨ç¡è¦ºã€‚  é€™äº›é–‹ç™¼äººå“¡å¸¸é™·å…¥ä¸€å€‹ç†Ÿæ‚‰çš„è¬Šè¨€ï¼šã€Œæˆ‘å€‘æ™šé»æ•´ç†ç¨‹å¼ç¢¼ï¼Œæˆ‘å€‘å…ˆæŠŠç”¢å“ä¸Šå¸‚å…ˆã€ï¼Œç•¶ç„¶ï¼Œä½ çŸ¥æˆ‘ä¹ŸçŸ¥ï¼Œé€™äº›éª¯é«’çš„ç¨‹å¼ç¢¼åœ¨ä¹‹å¾Œä¹Ÿæ°¸é ä¸å¯èƒ½è¢«é‡æ§‹ï¼Œå› ç‚ºå¸‚å ´å£“åŠ›æ°¸é ä¸æœƒæ¸›å°‘ï¼Œä½ æ²’æœ‰é¡å¤–çš„æ™‚é–“å»é€²è¡Œæ•´ç†çš„ã€‚è€Œä¸”é€²å…¥å¸‚å ´å°±æ„å‘³è‘—ä½ å¾Œé¢æœ‰ä¸€å¤§å †çš„ç«¶çˆ­å°æ‰‹ï¼Œä½ å¿…é ˆç›¡å¯èƒ½å¿«é»è·‘åˆ°æœ€å‰é¢ã€‚  æ‰€ä»¥é–‹ç™¼äººå“¡çµ•ä¸å¯èƒ½å›é ­æ¸…ç†æˆ–é‡æ§‹é€™äº›ç¨‹å¼ç¢¼ï¼Œå› ç‚ºä»–å€‘å¿…é ˆæŒçºŒä¸æ–·åœ°å®Œæˆä¸‹ä¸€å€‹åŠŸèƒ½ã€‚è€Œé€™æ™‚çˆ›æ”¤å­å°±æ­¤ç”¢ç”Ÿäº†ï¼Œç”Ÿç”¢åŠ›ç¹¼çºŒæœè‘—0çš„æ–¹å‘è¶¨è¿‘ã€‚  å°±åƒå…”å­å°æ–¼ç‰ çš„é€Ÿåº¦éæ–¼è‡ªä¿¡é‚£æ¨£ï¼Œé–‹ç™¼è€…å°æ–¼è‡ªå·±çš„ç”Ÿç”¢åŠ›ä¹Ÿéæ–¼è‡ªä¿¡ã€‚ä½†ç¨‹å¼ç¢¼çš„é«’äº‚ä½¿å¾—ä»–å€‘å·¥ä½œæ•ˆç‡ä¸å½°ï¼Œé€™ç¨®æƒ…æ³å¾æœªåœæ­¢ä¹Ÿä¸æœƒæ¸›ç·©ã€‚å¦‚æœæŒ‰ç…§é€™æ¨£çš„æ–¹å¼ï¼Œåœ¨å¹¾å€‹æœˆå…§ç”Ÿç”¢åŠ›å°±æœƒé™ä½åˆ°0ã€‚  é–‹ç™¼äººå“¡é™·å…¥ä¸€å€‹æ›´å¤§çš„è¬Šè¨€æ˜¯ï¼Œæ’°å¯«é«’äº‚çš„ç¨‹å¼ç¢¼å¯ä»¥ä½¿ä»–å€‘åœ¨çŸ­æœŸå…§èµ°å¾—æ›´é æ›´å¿«ï¼Œåªæœ‰é•·æœŸä¸‹ä¾†æ‰æœƒè®Šæ…¢ã€‚æ¥å—é€™ç¨®è¬Šè¨€çš„é–‹ç™¼äººå“¡è¡¨ç¾å‡ºå…”å­éåˆ†è‡ªä¿¡çš„èƒ½åŠ›ï¼Œèªç‚ºä»–åœ¨æœªä¾†å°‡æœ‰æ©Ÿæœƒå¯ä»¥è™•ç†é€™äº›é«’äº‚çš„ç¨‹å¼ç¢¼ï¼Œé€™æ¨£çŠ¯äº†ä¸€å€‹æ˜¯ä½ç´šçš„éŒ¯èª¤ã€‚äº‹å¯¦ä¸Šï¼Œ  è£½é€ é«’äº‚çš„é–‹ç™¼é€Ÿåº¦ç¸½æ˜¯æ¯”ä¿æŒæ•´æ½”çš„é–‹ç™¼é€Ÿåº¦é‚„è¦æ…¢ ã€‚  ä¸‹åœ–ä¸­ï¼ŒJason Gormané€²è¡Œäº†ä¸€é …æ¸¬è©¦å¯¦é©—ï¼Œä»–æ¡ç”¨äº†æ¸¬è©¦é©…å‹•é–‹ç™¼(TDDï¼Œtest-driven development)é–‹ç™¼äº†ä¸‰å¤©ï¼Œå¦å¤–ä¸‰å¤©ä»–ä¸¦æ²’æœ‰éµå®ˆé€™å€‹åŸå‰‡ä¾†é–‹ç™¼ï¼Œé€™é‚Šæ¯”è¼ƒäº†å…©è€…ä¹‹é–“çš„æˆæœã€‚  \n     \n  æˆ‘å€‘å¯ä»¥ç™¼ç¾åœ–1.6çš„å­¸ç¿’æ›²ç·šã€‚å¾Œä¸€å¤©çš„å·¥ä½œæ¯”ä¹‹å‰å¾—æ›´å¿«å®Œæˆã€‚å€¼å¾—æ³¨æ„çš„æ˜¯æ¡ç”¨TDDçš„å·¥ä½œæ—¥æ¯”éTDDæ—¥çš„å·¥ä½œå¿«äº†è¿‘10%ï¼Œå³ä¾¿æ˜¯æœ€æ…¢çš„TDDæ—¥ä¹Ÿæ¯”æœ€å¿«çš„éTDDæ—¥é‚„è¦å¿«ã€‚  æœ‰äº›äººå¯èƒ½æœƒé€™ç‚ºé€™æ¨£çš„åˆ†ææ˜¯ä¸€å€‹äº†ä¸èµ·çš„çµæœï¼Œä½†å°é‚£äº›æ²’æœ‰è¢«å…”å­éåº¦è‡ªä¿¡è¿·æƒ‘çš„äººä¾†èªªï¼Œé€™æ¨£çš„çµæœæ˜¯å¯ä»¥é æ–™åˆ°çš„ï¼Œå› ç‚ºä»–å€‘çŸ¥é“é€™æ˜¯è»Ÿé«”é–‹ç™¼çš„åŸºæœ¬é“ç†:   ğŸ’¡ æƒ³è¦èµ°å¾—å¿«ï¼Œå”¯ä¸€çš„æ–¹å¼å°±æ˜¯è¦èµ°å¾—å¥½ã€‚  é€™å°±æ˜¯é«˜å±¤äººå“¡å›°å¢ƒçš„è§£ç­”ã€‚æ‰­è½‰ç”Ÿç”¢åŠ›ä¸‹é™å’Œæˆæœ¬å¢åŠ çš„å”¯ä¸€æ–¹æ³•æ˜¯ï¼Œè®“é–‹ç™¼äººå“¡åœæ­¢éåº¦è‡ªä¿¡çš„å…”å­é‚£æ¨£æ€è€ƒï¼Œä¸¦æ›¿ä»–å€‘é‚£éª¯é«’çš„ç¨‹å¼ç¢¼é€²è¡Œè² è²¬ã€‚  è€Œé–‹ç™¼äººå“¡å¯èƒ½æœƒèªç‚ºï¼Œå¾é ­é–‹å§‹å†æ¬¡é‡æ–°è¨­è¨ˆæ•´å€‹ç³»çµ±å°±å¥½ï¼Œä½†é€™åªä¸éæ˜¯å…”å­å†æ¬¡ç™¼è¨€ã€‚å› ç‚ºå°±ç®—é‡æ–°é–‹ç™¼äº†ï¼Œä½†ç¨‹å¼ç¢¼ä¸¦æ²’æœ‰å“è³ªï¼Œåˆ°é ­ä¾†é‚„æ˜¯æœƒé‡è¹ˆè¦†è½çš„ã€‚   ğŸ’¡ ä»–å€‘çš„éåº¦è‡ªä¿¡å°‡é©…ä½¿é€²è¡Œé‡æ–°è¨­è¨ˆï¼Œå°±åƒåŸæœ¬çš„å°ˆæ¡ˆé‚£æ¨£é«’äº‚ã€‚  ç¸½çµ  è¦é¿å…é€™ç¨®æƒ…æ³ç™¼ç”Ÿï¼Œæœ€å¥½çš„é¸æ“‡å°±æ˜¯è®“é–‹ç™¼éƒ¨é–€èªè­˜å’Œé¿å…è‡ªå·±çš„éåº¦è‡ªä¿¡ï¼Œä¸¦èªçœŸå°å¾…è»Ÿé«”æ¶æ§‹çš„å“è³ªã€‚  è¦èªçœŸå°å¾…è»Ÿé«”æ¶æ§‹ï¼Œä½ éœ€è¦çŸ¥é“ä»€éº¼æ˜¯å¥½çš„è»Ÿé«”æ¶æ§‹ã€‚ç‚ºäº†å»ºç½®ä¸€å€‹èƒ½ã€Œæ»¿è¶³ä»˜å‡ºç²¾åŠ›æœ€å°åŒ–åŠç”Ÿç”¢åŠ›æœ€å¤§åŒ–ã€çš„ç³»çµ±è¨­è¨ˆå’Œæ¶æ§‹ã€‚  é€™å°±æ˜¯æœ¬æ›¸çš„å…§å®¹: ä»–æè¿°äº†ä»€éº¼æ˜¯å¥½çš„æ•´æ½”æ¶æ§‹å’Œè¨­è¨ˆ(clean architecture and designs)ï¼Œé€™æ¨£é–‹ç™¼äººå“¡å¯ä»¥å»ºç½®å‡ºå°æ–¼ç”Ÿå‘½é€±æœŸé•·æœŸæœ‰åˆ©çš„ç³»çµ±ã€‚"},{"id":"content:6.clean-arch:2.chapter2.md","path":"/clean-arch/chapter2","dir":"clean-arch","title":"02 å…©ç¨®åƒ¹å€¼è§€çš„æ•…äº‹","description":"","keywords":["å‰è¨€","è¡Œç‚º","æ¶æ§‹","æ›´é«˜çš„åƒ¹å€¼","Eisenhower çŸ©é™£","ç‚ºæ¶æ§‹è€Œæˆ°"],"body":"  å‰è¨€  æ¯ä¸€å€‹è»Ÿé«”ç³»çµ±éƒ½æœƒç‚ºåˆ©ç›Šç›¸é—œè€…æä¾›å…©ç¨®ä¸åŒçš„åƒ¹å€¼:   è¡Œç‚º(behavior)\n   é—œæ–¼ç³»çµ±ã€Œåšä»€éº¼ã€  è¡Œç‚ºæ˜¯æŒ‡è»Ÿé«”ç³»çµ±åŸ·è¡Œçš„å‹•ä½œæˆ–åŠŸèƒ½ã€‚é€™åŒ…æ‹¬ç³»çµ±å¦‚ä½•éŸ¿æ‡‰ä½¿ç”¨è€…è¼¸å…¥ã€è™•ç†è³‡æ–™ã€åŸ·è¡Œè¨ˆç®—ã€èˆ‡å…¶ä»–ç³»çµ±æºé€šä»¥åŠç”¢ç”Ÿè¼¸å‡ºç­‰ã€‚  çµæ§‹(structure)\n   é—œæ–¼ç³»çµ±ã€Œå¦‚ä½•çµ„ç¹”å’Œæ§‹å»ºã€  çµæ§‹æ˜¯æŒ‡è»Ÿé«”ç³»çµ±çš„å…§éƒ¨çµ„ç¹”å’Œè¨­è¨ˆã€‚é€™åŒ…æ‹¬ç³»çµ±çš„æ¶æ§‹ã€æ¨¡çµ„çš„åŠƒåˆ†ã€é¡åˆ¥å’Œå‡½æ•¸çš„è¨­è¨ˆã€è³‡æ–™å„²å­˜å’Œç®¡ç†æ–¹å¼ç­‰ã€‚çµæ§‹ç¢ºä¿äº†ç³»çµ±çš„å¯æ“´å±•æ€§ã€å¯ç¶­è­·æ€§ã€å¯æ¸¬è©¦æ€§å’Œå…¶ä»–éåŠŸèƒ½æ€§éœ€æ±‚ã€‚  è»Ÿé«”é–‹ç™¼äººå“¡æœ‰è²¬ä»»ç¢ºä¿é€™äº›åƒ¹å€¼éƒ½ä¿æŒåœ¨é«˜åƒ¹å€¼ï¼Œä½†é€šå¸¸åªæœƒæŠŠé‡é»æ”¾åœ¨å…¶ä¸­ä¸€å€‹è€Œæ’é™¤å¦å¤–ä¸€å€‹ã€‚æ›´ç³Ÿçš„æ˜¯ä»–å€‘å¾€å¾€åªæœƒæŠŠé‡é»æ”¾åœ¨é€™å…©å€‹ä¸­åƒ¹å€¼è¼ƒå°çš„ä¸€å€‹ï¼Œé€™å°è‡´è»Ÿé«”ç³»çµ±æœ€çµ‚è®Šå¾—æ²’æœ‰åƒ¹å€¼ã€‚  è¡Œç‚º  è»Ÿé«”çš„ç¬¬ä¸€å€‹åƒ¹å€¼å°±æ˜¯ã€Œè¡Œç‚ºã€ã€‚ç¨‹å¼è¨­è¨ˆå¸«æ˜¯è¢«é›‡ç”¨ä¾†è¨­è¨ˆæ©Ÿå™¨çš„è¡Œç‚ºï¼Œé€éæ©Ÿå™¨çš„äººè¡Œç‚ºèƒ½å¤ ç²å¾—åˆ©ç›Šæˆ–ç¯€çœè³‡é‡‘ã€‚é€éå¹«åŠ©åˆ©ç›Šç›¸é—œåˆ¶å®šåŠŸèƒ½è¦æ ¼(functional specification)æˆ–éœ€æ±‚æ–‡ä»¶(requirements document)ä¾†åšåˆ°é€™ä¸€é»ã€‚  ç•¶æ©Ÿå™¨é•åé€™äº›éœ€æ±‚æ™‚ï¼Œç¨‹å¼è¨­è¨ˆå¸«æœƒé€éé™¤éŒ¯å™¨(debugger)ä¾†è§£æ±ºå•é¡Œã€‚  è¨±å¤šç¨‹å¼è¨­è¨ˆå¸«èªç‚ºé€™å°±æ˜¯ä»–å€‘å…¨éƒ¨çš„å·¥ä½œã€‚ä»–å€‘ç›¸ä¿¡ä»–å€‘çš„å·¥ä½œå°±æ˜¯è®“æ©Ÿå™¨å¯¦ä½œå‡ºä¾†éœ€æ±‚ä¸¦ä¿®å¾©ä»»ä½•éŒ¯èª¤ã€‚ä½†å¯æ‚²çš„æ˜¯ï¼Œä»–å€‘æ˜¯éŒ¯èª¤çš„ã€‚  æ¶æ§‹  è»Ÿé«”çš„ç¬¬äºŒå€‹åƒ¹å€¼è·Ÿsoftwareé€™å€‹å­—æ˜¯æœ‰ç›¸é—œçš„ï¼Œsoftè¡¨ç¤ºè»Ÿçš„ã€wareè¡¨ç¤ºç”¢å“(prodcut)ï¼Œç•¶æˆ‘å€‘æåˆ°è»Ÿé«”(software)æ™‚ï¼Œä»£è¡¨å®ƒå¯ä»¥è¼•æ˜“åœ°ä¿®æ”¹æ©Ÿå™¨è¡Œç‚ºçš„ä¸€ç¨®æ–¹å¼ã€‚è€Œå¦‚æœæ©Ÿå™¨çš„è¡Œç‚ºæ˜¯é›£ä»¥æ”¹è®Šçš„ï¼Œæˆ‘å€‘å‰‡ç¨±å‘¼ç‚ºç¡¬é«”(hardware)ã€‚  ç‚ºäº†é”åˆ°è»Ÿé«”çš„æœ¬ä¾†ç›®çš„ï¼Œè»Ÿé«”å°±å¿…é ˆæ˜¯  è»Ÿçš„ ï¼Œä¹Ÿå°±æ˜¯èªªå®ƒå¯ä»¥å¾ˆå®¹æ˜“æ”¹è®Šã€‚ç•¶éœ€æ±‚æ–¹æ”¹è®Šéœ€æ±‚æ™‚ï¼Œé€™å€‹æ”¹è®Šæ‡‰è©²èƒ½ç°¡å–®åœ°å¯¦ç¾ã€‚é€²è¡Œé€™ç¨®æ”¹è®Šé›£åº¦æ‡‰è©²åªèˆ‡æ”¹è®Šçš„ç¯„ç–‡(scope)æˆæ­£æ¯”ï¼Œè€Œä¸æ˜¯è·Ÿå…·é«”å½¢ç‹€(shape)æˆæ­£æ¯”ã€‚  éœ€æ±‚è®Šæ›´çš„ç¯„ç–‡(scope)å’Œå…·é«”å½¢ç‹€(shape)ï¼Œæ˜¯æ±ºå®šè»Ÿé«”è®Šæ›´å¯¦æ–½æˆæœ¬é«˜ä½çš„é—œéµã€‚é€™ä¹Ÿæ˜¯ç‚ºä»€éº¼ç¬¬äºŒå¹´çš„ç ”ç™¼æˆæœ¬æ¯”ç¬¬ä¸€å¹´é«˜å¾ˆå¤šï¼Œç¬¬ä¸‰å¹´åˆæ¯”ç¬¬äºŒå¹´æ›´é«˜ã€‚  å•é¡Œçš„æ ¹æºç•¶ç„¶æ˜¯ç³»çµ±çš„æ¶æ§‹è¨­è¨ˆã€‚å¦‚æœç³»çµ±çš„æ¶æ§‹è¨­è¨ˆåå‘æŸç¨®ç‰¹å®šçš„å½¢ç‹€ï¼Œé‚£éº¼æ–°çš„è®Šæ›´å°±æœƒè¶Šä¾†è¶Šé›£ä»¥å¯¦æ–½ã€‚æ‰€ä»¥å¥½çš„ç³»çµ±æ¶æ§‹æ‡‰è©²ç›¡å¯èƒ½åšåˆ°èˆ‡   å…·é«”å½¢ç‹€(shape)  ç„¡é—œã€‚  æ›´é«˜çš„åƒ¹å€¼  åŠŸèƒ½é‚„æ˜¯æ¶æ§‹æ›´æœ‰åƒ¹å€¼å‘¢? è»Ÿé«”ç³»çµ±èƒ½å¤ å·¥ä½œæ¯”è¼ƒé‡è¦ï¼Œé‚„æ˜¯è»Ÿé«”ç³»çµ±æ›´å®¹æ˜“è®Šæ›´æ¯”è¼ƒé‡è¦?  å¦‚æœä½ å»è©¢å•æ¥­å‹™ç¶“ç†ï¼Œé€šå¸¸æœƒå¾—åˆ°çš„ç­”æ¡ˆæ˜¯  è»Ÿé«”ç³»çµ±èƒ½å¤ å·¥ä½œæ¯”è¼ƒé‡è¦ ã€‚è€Œé–‹ç™¼äººå“¡ä¹Ÿæœƒç¶“å¸¸è·Ÿè‘—é€™ç¨®æ…‹åº¦å’Œæ€è€ƒä¸‹å»åšã€‚é€™æ˜¯éŒ¯èª¤çš„æ…‹åº¦ã€‚æˆ‘å€‘å¯ä»¥ç”¨ç°¡å–®çš„é‚è¼¯ä»¥æ¥µç«¯çš„æƒ…æ³ä¾†é€²è¡Œé©—è­‰ã€‚   å¦‚æœæ‚¨çµ¦æˆ‘ä¸€å€‹å®Œç¾çš„ç¨‹å¼ï¼Œä½†ä¸å¯èƒ½ä¿®æ”¹ï¼Œé‚£éº¼ç•¶éœ€æ±‚æ”¹è®Šæ™‚ï¼Œå®ƒå°±ä¸èƒ½å·¥ä½œäº†ï¼Œè€Œæˆ‘ä¹Ÿå°‡ç„¡æ³•ä½¿å…¶å·¥ä½œã€‚æ‰€ä»¥é€™å€‹ç¨‹å¼è®Šå¾—æ¯«ç„¡ç”¨è™•ã€‚  å¦‚æœæ‚¨çµ¦æˆ‘çš„ç¨‹å¼ä¸èƒ½å·¥ä½œä½†å®¹æ˜“ä¿®æ”¹ï¼Œé‚£éº¼æˆ‘å¯ä»¥ä½¿å…¶å·¥ä½œï¼Œä¸¦éš¨è‘—éœ€æ±‚çš„è®ŠåŒ–è€Œç¹¼çºŒå·¥ä½œã€‚å› æ­¤ï¼Œè©²ç¨‹å¼å°‡æŒçºŒæ˜¯æœ‰ç”¨çš„ã€‚  æœ‰äº›ç³»çµ±å¯¦éš›ä¸Šæ˜¯ä¸å¯èƒ½æ”¹è®Šçš„ï¼Œå› ç‚ºæ”¹è®Šçš„æˆæœ¬è¶…éäº†æ”¹è®Šçš„åˆ©ç›Šã€‚è¨±å¤šç³»çµ±åœ¨æŸäº›åŠŸèƒ½ç‰¹æ€§æˆ–è¨­ç½®çš„ç¢ºå¦‚æ­¤ã€‚  ç•¶ä½ è©¢å•æ¥­å‹™ç¶“ç†ï¼Œä»–å€‘æ˜¯å¦æƒ³è¦åšé»æ”¹è®Šï¼Œä»–å€‘æœƒèªªç•¶ç„¶æ˜¯è¦çš„ï¼Œä½†ä½ æœƒç™¼ç¾åˆ°ä»–å€‘åªæ³¨æ„åˆ°ç›®å‰çš„åŠŸèƒ½ï¼Œè€Œä¸æœƒæ³¨æ„åˆ°å¾€å¾Œçš„ç³»çµ±æ“´å……æˆ–éˆæ´»åº¦ï¼Œç•¢ç«Ÿå°æ¥­å‹™ç¶“ç†ä¾†èªªä»–å€‘åªé—œæ³¨åœ¨ç”¢å“çš„ã€Œè¡Œç‚ºã€ä¸Šã€‚è€Œä»Šå¤©ç•¶æ¥­å‹™ç¶“ç†è¦æ±‚ä½ å°ä¸€å€‹ç°¡æ˜“çš„åŠŸèƒ½é€²è¡Œè®Šæ›´æ™‚ï¼Œè€Œä½ æŠŠæˆæœ¬ä¼°å¾—éå¸¸é«˜æ™‚ï¼Œç›¸ä¿¡æ¥­å‹™ç¶“ç†æ˜¯æ†¤æ€’çš„ã€‚  Eisenhower çŸ©é™£  ç”± Dwight D. Eisenhower ç¸½çµ±æåˆ°çš„é‡è¦æ€§èˆ‡ç·Šæ€¥æ€§çŸ©é™£(åœ– 2.1)   ğŸ’¡ æˆ‘æœ‰å…©é¡å•é¡Œï¼Œç·Šæ€¥å’Œé‡è¦ã€‚ç·Šæ€¥çš„ä¸é‡è¦ï¼Œé‡è¦çš„ä¸ç·Šæ€¥ã€‚  \n     \n  ä¸Šè¿°é€™å¥è©±æœ‰æ·±çš„é“ç†ã€‚æˆ‘å€‘ç”¨è»Ÿé«”çš„æ–¹å¼ä¾†èˆ‰ä¾‹:   è»Ÿé«”çš„ç¬¬ä¸€å€‹åƒ¹å€¼ã€Œè¡Œç‚ºã€æ˜¯  è¿«åˆ‡ çš„ï¼Œä½†ä¸¦ä¸ç¸½æ˜¯ç‰¹åˆ¥é‡è¦ã€‚  è»Ÿé«”çš„ç¬¬äºŒå€‹åƒ¹å€¼ã€Œæ¶æ§‹ã€æ˜¯  é‡è¦ çš„ï¼Œä½†å¾ä¸ç‰¹åˆ¥è¿«åˆ‡ã€‚  ç•¶ç„¶æœ‰äº›äº‹æƒ…æ—¢è¿«åˆ‡åˆé‡è¦ï¼Œæœ‰äº›äº‹æƒ…ä¸è¿«åˆ‡ä¹Ÿä¸é‡è¦ã€‚æœ€çµ‚ï¼Œæˆ‘å€‘å¯ä»¥æŠŠé€™å››å€‹é»æ’å‡ºå®ƒçš„å„ªå…ˆé †åº:    è¿«åˆ‡ ä¸”  é‡è¦  ä¸  è¿«åˆ‡ ä½†  é‡è¦   è¿«åˆ‡ ä½†ä¸  é‡è¦  ä¸  è¿«åˆ‡ ä¹Ÿä¸  é‡è¦  è«‹æ³¨æ„ï¼Œè»Ÿé«”çš„ç³»çµ±æ¶æ§‹(é‡è¦çš„äº‹æƒ…)ä½æ–¼æ­¤åˆ—è¡¨çš„å‰å…©ä½ï¼Œè€Œç³»çµ±è¡Œç‚º(è¿«åˆ‡çš„äº‹æƒ…)åªä½”æ“šäº†ç¬¬ä¸€å’Œç¬¬ä¸‰çš„ä½ç½®ã€‚  æ¥­å‹™ç¶“ç†å’Œé–‹ç™¼äººå“¡ç¶“å¸¸çŠ¯çš„éŒ¯èª¤å°±æ˜¯æŠŠä½ç½® 3 çš„é …ç›®æå‡åˆ°ä½ç½® 1ã€‚æ›å¥è©±èªªï¼Œä»–å€‘æ²’æœ‰æŠŠé‚£äº›è¿«åˆ‡ä½†ä¸é‡è¦çš„åŠŸèƒ½å¾é‚£äº›çœŸæ­£è¿«åˆ‡ä¸”é‡è¦çš„åŠŸèƒ½ä¸­åˆ†é›¢å‡ºä¾†ã€‚é€™å€‹å¤±èª¤æœƒå°è‡´å¿½ç•¥äº†ç³»çµ±æ¶æ§‹çš„é‡è¦æ€§ï¼Œè€Œå»é‡è¦–ç³»çµ±ä¸é‡è¦çš„åŠŸèƒ½ã€‚  é–‹ç™¼äººå“¡çš„å›°å¢ƒæ˜¯æ¥­å‹™ç¶“ç†æ²’æœ‰èƒ½åŠ›å»è©•ä¼°æ¶æ§‹çš„é‡è¦æ€§ã€‚è€Œé€™å°±æ˜¯  è»Ÿé«”é–‹ç™¼äººå“¡è©²å»åšçš„ ã€‚å› æ­¤è»Ÿé«”é–‹ç™¼åœ˜éšŠæœ‰è²¬ä»»ä¸»å¼µæ¶æ§‹çš„é‡è¦æ€§é«˜æ–¼åŠŸèƒ½çš„è¿«åˆ‡æ€§ã€‚  ç‚ºæ¶æ§‹è€Œæˆ°  å¦‚æœä½ æ˜¯ä¸€å  è»Ÿé«”æ¶æ§‹å¸« æ›´æ‡‰è©²æ³¨é‡åœ¨ç³»çµ±çš„çµæ§‹è€Œä¸æ˜¯å…¶ç‰¹æ€§å’ŒåŠŸèƒ½ã€‚æ¶æ§‹å¸«å»ºç«‹äº†ä¸€å€‹æ¶æ§‹ï¼Œä½¿é€™äº›ç‰¹æ€§å’ŒåŠŸèƒ½éå¸¸å®¹æ˜“é–‹ç™¼ä¸”æ˜“æ–¼ä¿®æ”¹ï¼Œé€™æ‰æ˜¯æ¶æ§‹å¸«çš„è·è²¬ã€‚  æœ€å¾Œéœ€è¦è¨˜ä½çš„æ˜¯ï¼Œå¦‚æœæ¶æ§‹æ˜¯æœ€å¾Œæ‰å‡ºç¾çš„ï¼Œé‚£éº¼é–‹ç™¼ç³»çµ±å°‡è®Šå¾—æ›´æ˜‚è²´ï¼Œå› ç‚ºè¦å»ä½œå…¨é¢æ€§çš„ä¿®æ”¹ï¼Œå°‡è®Šå¾—å¹¾ä¹ä¸å¯èƒ½å®Œæˆçš„ã€‚"},{"id":"content:6.clean-arch:3.chapter3.md","path":"/clean-arch/chapter3","dir":"clean-arch","title":"03 ç¯„å¼æ¦‚è¿°","description":"","keywords":["å‰è¨€","çµæ§‹åŒ–ç¨‹å¼è¨­è¨ˆ","ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆ","å‡½æ•¸å¼ç¨‹å¼è¨­è¨ˆ","éŸ¿æ‡‰å¼ç¨‹å¼è¨­è¨ˆ","ç¸½çµ"],"body":"  å‰è¨€  ä»»ä½•è»Ÿé«”æ¶æ§‹çš„å¯¦ä½œéƒ½é›¢ä¸é–‹å…·é«”çš„ç¨‹å¼ç¢¼ï¼Œæ‰€ä»¥æˆ‘å€‘å°è»Ÿé«”æ¶æ§‹çš„è¨è«–æ‡‰è©²å¾ç¬¬ä¸€è¡Œè¢«å¯«ä¸‹çš„ç¨‹å¼ç¢¼é–‹å§‹ã€‚   1938 å¹´ï¼ŒAlan Turing ç‚ºç¾ä»£é›»è…¦ç¨‹å¼è¨­è¨ˆæ‰“ä¸‹äº†åŸºç¤ã€‚ä»–ä¹Ÿæ˜¯ç¬¬ä¸€å€‹æå‡ºã€Œç¨‹å¼å³æ•¸æ“šã€çš„äººã€‚  1945 å¹´ï¼ŒTuring å·²ç¶“åœ¨çœŸå¯¦é›»è…¦ä¸Šç·¨å¯«æˆ‘å€‘ç¾åœ¨ä¹Ÿèƒ½çœ‹æ‡‚çš„é›»è…¦ç¨‹å¼äº†ã€‚é€™äº›ç¨‹å¼ä¸­ç”¨åˆ°äº†å¾ªç’°ã€åˆ†æ”¯ã€è³¦å€¼ã€å­å‘¼å«ã€å †ç–Šç­‰å¦‚ä»Šæˆ‘å€‘éƒ½å¾ˆç†Ÿæ‚‰çš„çµæ§‹ã€‚è€Œä»–ç”¨çš„ç¨‹å¼èªè¨€å°±æ˜¯ç°¡å–®çš„äºŒé€²åˆ¶æ•¸åºåˆ—ã€‚  20 ä¸–ç´€ 40 å¹´ä»£æœ«æœŸå‡ºç¾äº†å½™ç·¨å™¨ï¼ˆassemblerï¼‰ï¼Œå®ƒèƒ½è‡ªå‹•å°‡ä¸€æ®µç¨‹å¼è½‰æ›ç‚ºç›¸æ‡‰çš„äºŒé€²åˆ¶æ•¸åºåˆ—ï¼Œå¤§å¹…è§£æ”¾äº†ç¨‹å¼è¨­è¨ˆå¸«ã€‚  1951 å¹´ï¼ŒGrace Hopper ç™¼æ˜äº† A0ï¼Œé€™æ˜¯ä¸–ç•Œä¸Šç¬¬ä¸€å€‹ç·¨è­¯å™¨ï¼ˆcompilerï¼‰ã€‚äº‹å¯¦ä¸Šï¼Œç·¨è­¯å™¨é€™å€‹åå­—å°±æ˜¯ä»–å®šç¾©å’Œæ¨å»£ä½¿ç”¨çš„ã€‚  1953 å¹´ï¼Œé‚£ä¸€å¹´ FORTRAN é¢ä¸–äº†ã€‚æ¥ä¸‹ä¾†å°±æ˜¯å±¤å‡ºä¸çª®çš„æ–°ç¨‹å¼èªè¨€äº† â€”â€” COBOLã€PL/1ã€SNOBOLã€Cã€Pascalã€C++ã€Java ç­‰ç­‰ï¼Œä¸å‹æšèˆ‰ã€‚  é™¤æ­¤ä¹‹å¤–ï¼Œé›»è…¦ç¨‹å¼è¨­è¨ˆé ˜åŸŸé‚„ç¶“æ­·äº†å¦ä¸€å€‹æ›´å·¨å¤§ã€æ›´é‡è¦çš„è®Šé©ï¼Œé‚£å°±æœç¨‹å¼è¨­è¨ˆç¯„å¼ï¼ˆparadigmï¼‰çš„è®ŠåŒ–ã€‚ç¨‹å¼è¨­è¨ˆç¯„å¼æŒ‡çš„æ˜¯ç¨‹å¼çš„ç·¨å¯«æ¨¡å¼ï¼Œèˆ‡å…·é«”çš„ç¨‹å¼èªè¨€é—œä¿‚ç›¸å°è¼ƒå°ã€‚é€™äº›ç¯„å¼æœƒå‘Šè¨´ä½ æ‡‰è©²åœ¨ä»€éº¼æ™‚å€™æ¡ç”¨ä»€éº¼æ¨£çš„ç¨‹å¼ç¢¼çµæ§‹ã€‚ç›´åˆ°ä»Šå¤©ï¼Œæˆ‘å€‘ä¹Ÿç¸½å…±åªæœ‰ä¸‰å€‹ç¨‹å¼è¨­è¨ˆç¯„å¼ï¼Œè€Œä¸”æœªä¾†å¹¾ä¹ä¸å¯èƒ½å†å‡ºç¾æ–°çš„ï¼Œæ¥ä¸‹ä¾†æˆ‘å€‘å°±ä¾†çœ‹çœ‹ç‚ºä»€éº¼ã€‚  çµæ§‹åŒ–ç¨‹å¼è¨­è¨ˆ  çµæ§‹åŒ–ç¨‹å¼è¨­è¨ˆï¼ˆStructured programmingï¼Œç°¡ç¨±SPï¼‰æ˜¯ä¸€ç¨®ç¨‹å¼è¨­è¨ˆçš„ç¯„å¼ï¼Œæ—¨åœ¨é€éä½¿ç”¨  å­ç¨‹åº ã€  å€å¡Šçµæ§‹ ã€  è¿´åœˆ å’Œ  æ±ºç­–æ§åˆ¶çµæ§‹ ï¼ˆå¦‚ if-else èªå¥å’Œ switch èªå¥ï¼‰ä¾†å¢å¼ºç¨‹å¼ç¢¼çš„æ¸…æ™°åº¦ã€å“è³ªå’Œé–‹ç™¼æ•ˆç‡ã€‚å®ƒé¼“å‹µç¨‹åºå“¡é¿å…ä½¿ç”¨ goto èªå¥ï¼Œé€™æ¨£å¯ä»¥ä½¿ç¨‹å¼ç¢¼æ›´æ˜“æ–¼ç†è§£å’Œç¶­è­·ã€‚çµæ§‹åŒ–ç¨‹å¼è¨­è¨ˆå¼·èª¿çš„æ˜¯å°‡å¤§å•é¡Œåˆ†è§£æˆå°å•é¡Œï¼Œä¸¦å°‡é€™äº›å°å•é¡Œåˆ†è§£æˆæ›´å°çš„å•é¡Œï¼Œç›´åˆ°é€™äº›å•é¡Œå¯ä»¥ç”¨ç°¡å–®çš„èªå¥ä¾†è§£æ±ºã€‚   ä½¿ç”¨ goto åŠçµæ§‹åŒ–çš„ç¨‹å¼ç¢¼æ¯”è¼ƒ  æˆ‘å€‘ç¾åœ¨æœ‰ä¸€å€‹ä»»å‹™æ˜¯å¾ 1 æ•¸åˆ° 10ï¼Œä½†ç•¶æ•¸åˆ° 5 æ™‚ï¼Œæˆ‘å€‘è¦è·³é 5 ç›´æ¥æ•¸åˆ° 6ï¼Œç¹¼çºŒæ•¸åˆ° 10ã€‚  ä½¿ç”¨ goto çš„ç¨‹å¼ç¢¼ï¼š     using   System  ;\n   \n   class   GotoComplexExample   {\n       static   void   Main  () {\n           int   num   =   1  ;\n           \n           start  :\n           if   (num   ==   5  ) {\n               goto   skipFive  ;\n           }\n           \n           Console.  WriteLine  (num);\n           num  ++  ;\n           \n           if   (num   <=   10  ) {\n               goto   start  ;\n           }\n           goto   end  ;\n           \n           skipFive  :\n           num  ++  ;\n           goto   start  ;\n           \n           end  :\n           Console.  WriteLine  (  \"Done\"  );\n       }\n   }\n  çµæ§‹åŒ–çš„ç¨‹å¼ç¢¼ï¼š     using   System  ;\n   \n   class   StructuredComplexExample   {\n       static   void   Main  () {\n           for   (  int   num   =   1  ; num   <=   10  ; num  ++  ) {\n               if   (num   ==   5  ) {\n                   continue  ;   // è·³é5ï¼Œç›´æ¥ç¹¼çºŒä¸‹ä¸€è¼ªå¾ªç’°\n               }\n               Console.  WriteLine  (num);\n           }\n           Console.  WriteLine  (  \"Done\"  );\n       }\n   }\n   ä»¥ä¸‹æ˜¯çµæ§‹åŒ–ç¨‹å¼è¨­è¨ˆçš„ä¸»è¦æ¦‚å¿µå’Œé‡é»ï¼š   åŸºæœ¬æ§åˆ¶çµæ§‹ï¼š    é †åºçµæ§‹ ï¼šç¨‹å¼ç¢¼æŒ‰é †åºåŸ·è¡Œã€‚ \n    \n    ç¨‹å¼ç¢¼æ¼”ç¤º     Console.  WriteLine  (  \"ç¬¬ä¸€æ­¥\"  );\n   Console.  WriteLine  (  \"ç¬¬äºŒæ­¥\"  );\n   Console.  WriteLine  (  \"ç¬¬ä¸‰æ­¥\"  );\n \n      é¸æ“‡çµæ§‹ ï¼šæ ¹æ“šæ¢ä»¶é¸æ“‡ä¸åŒçš„åŸ·è¡Œè·¯å¾‘ï¼Œå¦‚if-elseèªå¥ã€‚ \n    \n    ç¨‹å¼ç¢¼æ¼”ç¤º     var   number   =   10  ;\n   if   (number   >   0  )\n       Console.  WriteLine  (  \"æ•¸å­—æ˜¯æ­£æ•¸ã€‚\"  );\n   else   if   (number   <   0  )\n       Console.  WriteLine  (  \"æ•¸å­—æ˜¯è² æ•¸ã€‚\"  );\n   else\n       Console.  WriteLine  (  \"æ•¸å­—æ˜¯é›¶ã€‚\"  );\n \n      è¿´åœˆçµæ§‹ ï¼šé‡è¤‡åŸ·è¡Œç¨‹å¼ç¢¼å¡Šç›´åˆ°æ»¿è¶³æŸå€‹æ¢ä»¶ï¼ŒåŒ…æ‹¬forè¿´åœˆã€whileè¿´åœˆç­‰ã€‚ \n    \n    ç¨‹å¼ç¢¼æ¼”ç¤º     for   (  int   i   =   0  ; i   <   5  ; i  ++  )\n       Console.  WriteLine  (  $\"è¿´åœˆæ¬¡æ•¸ï¼š{  i  }\"  );\n \n     æ¨¡å¡ŠåŒ–å’Œå‡½æ•¸ï¼š   å°‡å¤§çš„å•é¡Œåˆ†è§£æˆå°çš„ã€æ›´æ˜“æ–¼ç®¡ç†çš„å­å•é¡Œã€‚  æ¯å€‹å­å•é¡Œç”±ä¸€å€‹æ¨¡å¡Šæˆ–å‡½æ•¸ä¾†è§£æ±ºï¼Œä½¿ç¨‹å¼ç¢¼æ›´æ˜“æ–¼ç†è§£å’Œé‡ç”¨ã€‚ \n   \n   ç¨‹å¼ç¢¼æ¼”ç¤º     // å®šç¾©ä¸€å€‹å‡½æ•¸ä¾†è¨ˆç®—å…©æ•¸ä¹‹å’Œ\n   static   int   Add  (  int   num1  ,   int   num2  ) {\n       return   num1   +   num2;\n   }\n   \n   // ä¸»ç¨‹å¼èª¿ç”¨Addå‡½æ•¸\n   static   void   Main  (  string  []   args  ) {\n       int   result   =   Add  (  5  ,   3  );\n       Console.  WriteLine  (  $\"5 + 3 = {  result  }\"  );\n   }\n \n    å±€éƒ¨è®Šé‡å’Œä½œç”¨åŸŸï¼š   æ¨å»£åœ¨æœ€æ¥è¿‘ä½¿ç”¨ä½ç½®è²æ˜è®Šé‡ï¼Œä»¥æé«˜ç¨‹å¼ç¢¼çš„å¯è®€æ€§å’Œæ¸›å°‘éŒ¯èª¤ã€‚  ä½¿ç”¨å±€éƒ¨è®Šé‡ä¾†é™åˆ¶è®Šé‡çš„ä½œç”¨ç¯„åœï¼Œå¢å¼·ç¨‹å¼çš„æ¨¡å¡Šæ€§ã€‚ \n   \n   ç¨‹å¼ç¢¼æ¼”ç¤º     static   void   ShowScopeExample  () {\n       // å±€éƒ¨è®Šé‡içš„ä½œç”¨åŸŸé–‹å§‹\n       int   i   =   100  ;\n       Console.  WriteLine  (  $\"åœ¨ShowScopeExampleå…§éƒ¨ï¼Œi = {  i  }\"  );\n       // å±€éƒ¨è®Šé‡içš„ä½œç”¨åŸŸçµæŸ\n   }\n   \n   static   void   Main  (  string  []   args  ) {\n       ShowScopeExample  ();\n       // ä»¥ä¸‹å°‡ç„¡æ³•è¨ªå•iï¼Œå› ç‚ºå®ƒçš„ä½œç”¨åŸŸåƒ…é™æ–¼ShowScopeExampleå‡½æ•¸å…§\n       // Console.WriteLine(i); // é€™æœƒå°è‡´ç·¨è­¯éŒ¯èª¤\n   }\n \n    çµæ§‹åŒ–è¨­è¨ˆçš„åŸå‰‡ï¼š    è‡ªé ‚å‘ä¸‹è¨­è¨ˆ ï¼šå¾æœ€å»£æ³›çš„å•é¡Œé–‹å§‹ï¼Œé€æ­¥ç´°åŒ–åˆ°å…·é«”çš„åŠŸèƒ½å’Œç´°ç¯€ã€‚   é€æ­¥ç´°åŒ– ï¼šå°‡è¤‡é›œçš„å•é¡Œé€æ­¥åˆ†è§£æˆæ›´ç°¡å–®ã€æ›´æ˜“æ–¼ç®¡ç†çš„éƒ¨åˆ†ã€‚   æ¨¡å¡Šç¨ç«‹æ€§ ï¼šæé«˜æ¨¡å¡Šä¹‹é–“çš„ç¨ç«‹æ€§ï¼Œé™ä½å®ƒå€‘ä¹‹é–“çš„è€¦åˆã€‚  ä½¿ç”¨çµæ§‹åŒ–ç¨‹å¼è¨­è¨ˆçš„å„ªé»ï¼š   æé«˜ç¨‹å¼ç¢¼çš„æ¸…æ™°åº¦å’Œå¯ç¶­è­·æ€§ã€‚  ä¿ƒé€²ç¨‹å¼ç¢¼é‡ç”¨ã€‚  æ¸›å°‘éŒ¯èª¤å’Œé–‹ç™¼æ™‚é–“ã€‚  ä½¿ç¨‹å¼è¨­è¨ˆæ›´åŠ ç³»çµ±åŒ–å’Œè¦ç¯„åŒ–ã€‚  çµæ§‹åŒ–ç¨‹å¼è¨­è¨ˆæ˜¯å°æ—©æœŸç„¡çµæ§‹ã€é›£ä»¥ç¶­è­·çš„ç¨‹å¼è¨­è¨ˆæ–¹æ³•çš„ä¸€ç¨®æ”¹é€²ï¼Œå®ƒå¼·èª¿æ¸…æ™°çš„çµæ§‹å’Œç°¡å–®çš„æ§åˆ¶æµã€‚éš¨è‘—è»Ÿä»¶å·¥ç¨‹çš„ç™¼å±•ï¼Œé›–ç„¶å‡ºç¾äº†è¨±å¤šæ–°çš„ç¨‹å¼è¨­è¨ˆç¯„å¼ï¼ˆå¦‚ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆï¼‰ï¼Œçµæ§‹åŒ–ç¨‹å¼è¨­è¨ˆä»ç„¶æ˜¯æ•™æˆåˆå­¸è€…åŸºæœ¬ç¨‹å¼è¨­è¨ˆæŠ€å·§å’Œå¯¦è¸çš„é‡è¦æ–¹æ³•ã€‚  ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆ  ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆï¼ˆObject-Oriented Programmingï¼Œç°¡ç¨±OOPï¼‰æ˜¯ä¸€ç¨®ç¨‹å¼è¨­è¨ˆç¯„å¼ï¼Œå®ƒä½¿ç”¨ã€Œ  ç‰©ä»¶ ã€ï¼ˆobjectsï¼‰é€™å€‹æ¦‚å¿µä¾†æ¨¡æ“¬ç¾å¯¦ä¸–ç•Œä¸­çš„äº‹ç‰©å’Œäº‹ç‰©é–“çš„äº’å‹•ï¼Œå¾è€Œå¯¦ç¾è»Ÿä»¶çš„  å°è£ ã€  ç¹¼æ‰¿ å’Œ  å¤šå‹æ€§ ç­‰ç‰¹æ€§ã€‚ä»¥ä¸‹æ˜¯ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆçš„ä¸»è¦æ¦‚å¿µå’Œé‡é»ï¼š    é¡åˆ¥ï¼ˆClassï¼‰ ï¼š\n   å®šç¾©äº†ä¸€çµ„å…·æœ‰ç›¸åŒå±¬æ€§ï¼ˆAttributesï¼‰å’Œè¡Œç‚ºï¼ˆMethodsï¼‰çš„ç‰©ä»¶çš„è—åœ–æˆ–æ¨¡æ¿ã€‚  é¡åˆ¥æ˜¯å‰µå»ºç‰©ä»¶çš„åŸºç¤ï¼Œç‰©ä»¶æ˜¯é¡åˆ¥çš„å¯¦ä¾‹ã€‚   ç‰©ä»¶ï¼ˆObjectï¼‰ ï¼š\n   æ˜¯é¡åˆ¥çš„å¯¦ä¾‹ï¼Œå…·æœ‰é¡åˆ¥å®šç¾©çš„å±¬æ€§å’Œè¡Œç‚ºã€‚  ç‰©ä»¶æ˜¯ç¨‹å¼é‹è¡Œæ™‚æ“ä½œçš„åŸºæœ¬å–®ä½ã€‚   å±¬æ€§ï¼ˆAttributesï¼‰ ï¼š\n   ä»£è¡¨ç‰©ä»¶çš„ç‹€æ…‹æˆ–ç‰¹å¾µï¼Œä¾‹å¦‚ï¼šä¸€è¼›è»Šçš„é¡è‰²ã€å‹è™Ÿç­‰ã€‚  åœ¨é¡åˆ¥ä¸­å®šç¾©ï¼Œæ¯å€‹ç‰©ä»¶å¯ä»¥æœ‰è‡ªå·±çš„å±¬æ€§å€¼ã€‚   æ–¹æ³•ï¼ˆMethodsï¼‰ ï¼š\n   æè¿°ç‰©ä»¶èƒ½å¤ åŸ·è¡Œçš„æ“ä½œï¼Œä¾‹å¦‚ï¼šä¸€è¼›è»Šå¯ä»¥åŠ é€Ÿã€åœè»Šç­‰ã€‚  æ–¹æ³•åœ¨é¡åˆ¥ä¸­å®šç¾©ï¼Œç‰©ä»¶é€šéæ–¹æ³•èˆ‡å¤–ç•Œäº’å‹•ã€‚   å°è£ï¼ˆEncapsulationï¼‰ ï¼š\n   æŒ‡å°‡ç‰©ä»¶çš„ç´°ç¯€ï¼ˆå±¬æ€§å’Œæ–¹æ³•ï¼‰éš±è—èµ·ä¾†ï¼Œåªæš´éœ²æœ‰é™çš„ä»‹é¢çµ¦å¤–éƒ¨ä½¿ç”¨ã€‚  é€šéå°è£ï¼Œå¯ä»¥æ¸›å°‘å¤–éƒ¨å°ç‰©ä»¶å…§éƒ¨çš„ä¾è³´ï¼Œæé«˜ç¨‹å¼çš„æ¨¡å¡Šæ€§å’Œå¯ç¶­è­·æ€§ã€‚   ç¹¼æ‰¿ï¼ˆInheritanceï¼‰ ï¼š\n   å…è¨±æ–°çš„é¡åˆ¥ç¹¼æ‰¿ç¾æœ‰é¡åˆ¥çš„å±¬æ€§å’Œæ–¹æ³•ã€‚  ç¹¼æ‰¿æ”¯æŒä»£ç¢¼é‡ç”¨ï¼Œä¸¦èƒ½å»ºç«‹ä¸€å€‹å±¤æ¬¡åŒ–çš„é¡åˆ¥çµæ§‹ã€‚   å¤šå‹æ€§ï¼ˆPolymorphismï¼‰ ï¼š\n   å…è¨±ä¸åŒé¡åˆ¥çš„ç‰©ä»¶å°åŒä¸€è¨Šæ¯åšå‡ºå›æ‡‰ã€‚  é€šéå¤šå‹æ€§ï¼Œç›¸åŒçš„æ¥å£å¯ä»¥ç”¨æ–¼ä¸åŒçš„ç‰©ä»¶ï¼Œå¢å¼·ç¨‹å¼çš„å½ˆæ€§å’Œå¯æ“´å±•æ€§ã€‚   æŠ½è±¡ï¼ˆAbstractionï¼‰ ï¼š\n   æ˜¯å°‡è¤‡é›œçš„å¯¦éš›å•é¡ŒæŠ½è±¡åŒ–ï¼Œåªé—œæ³¨å°ç•¶å‰ç›®æ¨™æœ‰ç”¨çš„è³‡è¨Šã€‚  é€šéæŠ½è±¡ï¼Œå¯ä»¥éš±è—èƒŒå¾Œçš„è¤‡é›œå¯¦ç¾ï¼Œåªæä¾›å¿…è¦çš„æ“ä½œã€‚   ç¨‹å¼ç¢¼æ¼”ç¤º    å®šç¾©æŠ½è±¡åŸºé¡ - Vehicle ï¼šåœ¨é€™å€‹æ­¥é©Ÿä¸­ï¼ŒVehicleå°‡è¢«å®šç¾©ç‚ºä¸€å€‹æŠ½è±¡é¡åˆ¥ï¼Œå®ƒåŒ…å«äº†ä¸€å€‹æŠ½è±¡æ–¹æ³•DisplayInfoã€‚     public   abstract   class   Vehicle\n   {\n       // å±¬æ€§\n       public   string   Brand   {   get  ;   set  ; }\n       public   int   Year   {   get  ;   set  ; }\n   \n       // å»ºæ§‹å­\n       public   Vehicle  (  string   brand  ,   int   year  )\n       {\n           Brand   =   brand;\n           Year   =   year;\n       }\n   \n       // æŠ½è±¡æ–¹æ³•\n       public   abstract   void   DisplayInfo  ();\n   }\n   å®šç¾©å­é¡åˆ¥ - Car å’Œ Truck ï¼šé€™è£¡çš„Carå’ŒTrucké¡åˆ¥å°‡å¯¦ç¾ï¼ˆoverrideï¼‰åŸºé¡çš„DisplayInfoæŠ½è±¡æ–¹æ³•ã€‚     public   class   Car   :   Vehicle\n   {\n       public   int   Seats   {   get  ;   set  ; }\n   \n       public   Car  (  string   brand  ,   int   year  ,   int   seats  ) :   base  (brand, year)\n       {\n           Seats   =   seats;\n       }\n   \n       // å¯¦ç¾æŠ½è±¡æ–¹æ³•\n       public   override   void   DisplayInfo  ()\n       {\n           Console.  WriteLine  (  $\"Car: {  Brand  }, Year: {  Year  }, Seats: {  Seats  }\"  );\n       }\n   }\n   \n   public   class   Truck   :   Vehicle\n   {\n       public   int   LoadCapacity   {   get  ;   set  ; }\n   \n       public   Truck  (  string   brand  ,   int   year  ,   int   loadCapacity  ) :   base  (brand, year)\n       {\n           LoadCapacity   =   loadCapacity;\n       }\n   \n       // å¯¦ç¾æŠ½è±¡æ–¹æ³•\n       public   override   void   DisplayInfo  ()\n       {\n           Console.  WriteLine  (  $\"Truck: {  Brand  }, Year: {  Year  }, Load Capacity: {  LoadCapacity  }kg\"  );\n       }\n   }\n   å±•ç¤ºå°è£ã€ç¹¼æ‰¿ã€å¤šå‹æ€§å’ŒæŠ½è±¡çš„æ‡‰ç”¨ ï¼š     class   Program\n   {\n       static   void   Main  (  string  []   args  )\n       {\n           // å‰µå»ºç‰©ä»¶\n           Vehicle   myCar   =   new   Car  (  \"Toyota\"  ,   2020  ,   5  );\n           Vehicle   myTruck   =   new   Truck  (  \"Ford\"  ,   2018  ,   1200  );\n   \n           // é€šéå¤šå‹æ€§è™•ç†ä¸åŒçš„ç‰©ä»¶\n           List  <  Vehicle  >   vehicles   =   new   List  <  Vehicle  > { myCar, myTruck };\n   \n           foreach   (  Vehicle   vehicle   in   vehicles)\n           {\n               vehicle.  DisplayInfo  ();\n           }\n       }\n   }\n  åœ¨é€™å€‹ç¯„ä¾‹ä¸­ï¼ŒVehicleæ˜¯ä¸€å€‹æŠ½è±¡åŸºé¡ï¼Œå®ƒå®šç¾©äº†ä¸€å€‹æŠ½è±¡æ–¹æ³•DisplayInfoã€‚Carå’ŒTruckæ˜¯å…·é«”çš„å­é¡åˆ¥ï¼Œå®ƒå€‘å¯¦ç¾äº†Vehicleä¸­çš„æŠ½è±¡æ–¹æ³•ã€‚é€™æ¨£çš„è¨­è¨ˆä¸åƒ…å±•ç¤ºäº†ç¹¼æ‰¿å’Œå¤šå‹æ€§ï¼ˆå› ç‚ºCarå’ŒTruckéƒ½æ˜¯Vehicleçš„é¡å‹ï¼‰ï¼Œä¹Ÿåˆ©ç”¨äº†æŠ½è±¡ä¾†å¼·åˆ¶è¦æ±‚ä»»ä½•Vehicleå­é¡åˆ¥éƒ½å¿…é ˆæä¾›è‡ªå·±çš„DisplayInfoæ–¹æ³•å¯¦ç¾ã€‚æ­¤å¤–ï¼Œå±¬æ€§çš„ä½¿ç”¨ï¼ˆå¦‚Brandå’ŒYearç­‰ï¼‰ä»¥åŠæ–¹æ³•çš„å¯¦ç¾ï¼Œå±•ç¤ºäº†å°è£çš„æ¦‚å¿µï¼Œå› ç‚ºå®ƒå€‘å°‡è³‡æ–™å’ŒåŠŸèƒ½å°è£åœ¨å„è‡ªçš„é¡åˆ¥å…§éƒ¨ã€‚é€éé€™äº›æ¦‚å¿µçš„æ‡‰ç”¨ï¼Œç¨‹å¼ç¢¼è®Šå¾—æ›´åŠ æ¨¡çµ„åŒ–ã€æ˜“æ–¼ç¶­è­·å’Œæ“´å±•ã€‚   ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆçš„é€™äº›æ¦‚å¿µå’ŒåŸå‰‡å…±åŒä½œç”¨ï¼Œä½¿å¾—ç¨‹å¼è¨­è¨ˆæ›´åŠ éˆæ´»ã€æ¨¡å¡ŠåŒ–ï¼Œä¸¦ä¸”æ˜“æ–¼ç¶­è­·å’Œæ“´å±•ã€‚é€éå°é€™äº›æ¦‚å¿µçš„ç†è§£å’Œæ‡‰ç”¨ï¼Œé–‹ç™¼è€…å¯ä»¥æ›´æœ‰æ•ˆåœ°è™•ç†è»Ÿä»¶é–‹ç™¼ä¸­çš„è¤‡é›œå•é¡Œã€‚  å‡½æ•¸å¼ç¨‹å¼è¨­è¨ˆ  å‡½æ•¸å¼ç¨‹å¼è¨­è¨ˆï¼ˆFunctional Programmingï¼Œç°¡ç¨±FPï¼‰æ˜¯ä¸€ç¨®å»ºç«‹åœ¨æ•¸å­¸å‡½æ•¸æ¦‚å¿µä¸Šçš„ç¨‹å¼è¨­è¨ˆç¯„å¼ã€‚ç›¸å°æ–¼æŒ‡ä»¤å¼ç¨‹å¼è¨­è¨ˆï¼Œå®ƒå¼·èª¿æ‡‰ç”¨å‡½æ•¸å’Œé¿å…æ”¹è®Šç‹€æ…‹åŠå¯è®Šæ•¸æ“šã€‚ä»¥ä¸‹æ˜¯å‡½æ•¸å¼ç¨‹å¼è¨­è¨ˆçš„ä¸€äº›æ ¸å¿ƒæ¦‚å¿µæ•´ç†ï¼š    ä¸å¯è®Šæ€§ï¼ˆImmutabilityï¼‰ ï¼šæ˜¯å‡½æ•¸å¼ç¨‹å¼è¨­è¨ˆä¸­çš„ä¸€å€‹é‡è¦æ¦‚å¿µï¼ŒæŒ‡çš„æ˜¯ä¸€æ—¦æ•¸æ“šçµæ§‹è¢«å‰µå»ºå¾Œï¼Œå…¶å…§éƒ¨çš„æ•¸æ“šå°±ä¸èƒ½è¢«æ”¹è®Šã€‚é€™æ„å‘³è‘—å¦‚æœä½ éœ€è¦ä¿®æ”¹æŸå€‹æ•¸æ“šçµæ§‹ï¼Œä½ æ‡‰è©²å‰µå»ºä¸€å€‹æ–°çš„æ•¸æ“šçµæ§‹ä¾†ä»£æ›¿åŸæœ‰çµæ§‹çš„æŸéƒ¨åˆ†ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹åŸæœ‰çµæ§‹ä¸­çš„æ•¸æ“šã€‚é€™ç¨®æ–¹å¼æœ‰åŠ©æ–¼æé«˜ç¨‹å¼çš„å¯é æ¸¬æ€§ï¼Œæ¸›å°‘éŒ¯èª¤ï¼Œä¸¦ä¸”åœ¨å¤šç·šç¨‹ç’°å¢ƒä¸­é¿å…äº†  ç«¶æ…‹æ¢ä»¶ ï¼ˆRace Conditionsï¼‰ã€‚ \n   \n   å„ªé»    ç°¡åŒ–äº†è¤‡é›œåº¦ ï¼šä¸éœ€è¦æ“”å¿ƒæ•¸æ“šåœ¨ç³»çµ±çš„æŸå€‹éƒ¨åˆ†è¢«æ„å¤–æ”¹è®Šï¼Œå› ç‚ºæ•¸æ“šæ˜¯ä¸å¯è®Šçš„ã€‚   æé«˜äº†ç¨‹å¼çš„å®‰å…¨æ€§ ï¼šç”±æ–¼æ•¸æ“šä¸æœƒæ”¹è®Šï¼Œå› æ­¤åœ¨å¤šç·šç¨‹ç’°å¢ƒä¸‹æ²’æœ‰ç«¶æ…‹æ¢ä»¶å•é¡Œï¼Œé€™ä½¿å¾—ç¨‹å¼æ›´åŠ å®‰å…¨ã€‚   ä¾¿æ–¼é€²è¡Œæ™‚é–“æ—…è¡Œèª¿è©¦ ï¼ˆTime Travel Debuggingï¼‰ï¼šç”±æ–¼æ¯æ¬¡æ•¸æ“šè®Šæ›´éƒ½æœƒç”¢ç”Ÿæ–°çš„æ•¸æ“šçµæ§‹ï¼Œå› æ­¤å¯ä»¥å¾ˆå®¹æ˜“åœ°è¿½è¹¤æ•¸æ“šçš„è®ŠåŒ–æ­·å²ã€‚ \n  \n   \n   ç¨‹å¼ç¢¼æ¼”ç¤º   ä½¿ç”¨ä¸å¯è®Šé›†åˆ\n     using   System  .  Collections  .  Immutable  ;\n   \n   var   list   =   ImmutableList<  int  >.Empty;\n   list   =   list.  Add  (  1  );\n   list   =   list.  Add  (  2  );\n   // list ç¾åœ¨åŒ…å« [1, 2]ï¼Œéç¨‹ä¸­æ²’æœ‰ä¿®æ”¹ä»»ä½•é›†åˆï¼Œè€Œæ˜¯å‰µå»ºäº†æ–°çš„é›†åˆã€‚\n  è¨­è¨ˆä¸å¯è®Šé¡\n     public   class   ImmutablePerson\n   {\n       public   string   Name   {   get  ; }\n       public   int   Age   {   get  ; }\n   \n       public   ImmutablePerson  (  string   name  ,   int   age  )\n       {\n           Name   =   name;\n           Age   =   age;\n       }\n   }\n   \n   var   person   =   new   ImmutablePerson  (  \"Alice\"  ,   30  );\n   // person çš„ Name å’Œ Age ä¸€æ—¦è¨­å®šï¼Œå°±ç„¡æ³•æ›´æ”¹ã€‚\n \nåœ¨é€™å€‹ä¾‹å­ä¸­ï¼ŒImmutablePerson çš„å¯¦ä¾‹ä¸€æ—¦å‰µå»ºï¼Œå…¶ Name å’Œ Age å°±ä¸å¯æ›´æ”¹ï¼Œå¾è€Œä¿è­‰äº†å¯¦ä¾‹çš„ä¸å¯è®Šæ€§ã€‚é€™ç¨®æ–¹å¼æœ‰åŠ©æ–¼å‰µå»ºæ›´åŠ å®‰å…¨ã€ç°¡æ½”ã€å¯ç¶­è­·çš„ä»£ç¢¼ã€‚ \n      ç´”å‡½æ•¸ ï¼ˆPure Functionsï¼‰ ï¼šæ˜¯å‡½æ•¸å¼ç¨‹å¼è¨­è¨ˆä¸­çš„ä¸€å€‹æ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒæŒ‡çš„æ˜¯é€™æ¨£ä¸€ç¨®å‡½æ•¸ï¼šå°æ–¼ç›¸åŒçš„è¼¸å…¥ï¼Œæ°¸é æœƒè¿”å›ç›¸åŒçš„è¼¸å‡ºï¼Œä¸”åœ¨éç¨‹ä¸­ä¸æœƒæœ‰ä»»ä½•å‰¯ä½œç”¨ï¼ˆSide Effectsï¼‰ï¼Œä¾‹å¦‚ä¸æœƒä¿®æ”¹ä»»ä½•å¤–éƒ¨ç‹€æ…‹ã€ä¸æœƒæœ‰ I/O æ“ä½œç­‰ã€‚ \n   \n   å„ªé»    å¯é æ¸¬æ€§ï¼ˆPredictabilityï¼‰ ï¼šç”±æ–¼ç´”å‡½æ•¸å°ç›¸åŒçš„è¼¸å…¥ç¸½æ˜¯ç”¢ç”Ÿç›¸åŒçš„è¼¸å‡ºï¼Œé€™ä½¿å¾—å®ƒå€‘éå¸¸å¯é æ¸¬ã€‚é€™ç¨®å¯é æ¸¬æ€§ä½¿å¾—ç¨‹å¼çš„èª¿è©¦å’Œç†è§£è®Šå¾—æ›´åŠ å®¹æ˜“ã€‚   æ˜“æ–¼æ¸¬è©¦ï¼ˆEase of Testingï¼‰ ï¼šç´”å‡½æ•¸ä¸ä¾è³´æ–¼å¤–éƒ¨ç‹€æ…‹ï¼Œä¹Ÿä¸ç”¢ç”Ÿå‰¯ä½œç”¨ï¼Œå› æ­¤å®ƒå€‘æ›´åŠ å®¹æ˜“é€²è¡Œå–®å…ƒæ¸¬è©¦ã€‚æ¸¬è©¦è€…ç„¡éœ€æ“”å¿ƒè¨­ç½®æˆ–æ¸…ç†å¤–éƒ¨ç’°å¢ƒï¼Œåªéœ€é—œæ³¨è¼¸å…¥å’Œé æœŸçš„è¼¸å‡ºå³å¯ã€‚   ç„¡å‰¯ä½œç”¨ï¼ˆNo Side Effectsï¼‰ ï¼šç´”å‡½æ•¸çš„åŸ·è¡Œä¸æœƒå°ç³»çµ±çš„å…¶ä»–éƒ¨åˆ†ç”¢ç”Ÿä¸å¯é è¦‹çš„å½±éŸ¿ã€‚é€™é™ä½äº†ç¨‹å¼åœ¨æ“´å±•æˆ–ä¿®æ”¹æ™‚ç”¢ç”ŸéŒ¯èª¤çš„é¢¨éšªã€‚   å¯ç§»æ¤æ€§ï¼è‡ªåŒ…å«æ€§ï¼ˆPortability / Self-containedï¼‰ ï¼šç´”å‡½æ•¸ä¸ä¾è³´æ–¼ç¨‹åºçš„å¤–éƒ¨ç‹€æ…‹ï¼Œå› æ­¤å®ƒå€‘æ›´å®¹æ˜“åœ¨ç¨‹å¼çš„ä¸åŒéƒ¨åˆ†é–“ç§»æ¤ï¼Œæˆ–è€…ç”¨æ–¼å…¶ä»–ç¨‹å¼ä¸­ã€‚   å¯åˆ©ç”¨æ€§ï¼ˆReusabilityï¼‰ ï¼šç”±æ–¼ç´”å‡½æ•¸çš„è‡ªåŒ…å«æ€§å’Œç„¡å‰¯ä½œç”¨ç‰¹æ€§ï¼Œå®ƒå€‘å…·æœ‰å¾ˆé«˜çš„å¯é‡ç”¨æ€§ï¼Œå¯ä»¥ä½œç‚ºç¨‹å¼ä¸­çš„æ§‹å»ºå¡Šï¼Œè¢«å¤šè™•ä½¿ç”¨è€Œä¸å¿…æ“”å¿ƒæ„å¤–å½±éŸ¿ã€‚   ä¸¦è¡Œ/ä¸¦è¡Œè™•ç†ï¼ˆConcurrency/Parallelismï¼‰ ï¼šç´”å‡½æ•¸ä¸æœƒæ”¹è®Šä»»ä½•å¤–éƒ¨ç‹€æ…‹ï¼Œé€™æ„å‘³è‘—å¤šå€‹ç´”å‡½æ•¸å¯ä»¥å®‰å…¨åœ°ä¸¦è¡Œæˆ–ä¸¦è¡ŒåŸ·è¡Œï¼Œé€™å°æ–¼æé«˜æ€§èƒ½åœ¨å¤šæ ¸å¿ƒè™•ç†å™¨çš„åˆ©ç”¨ä¸Šå°¤ç‚ºé‡è¦ã€‚   åƒç…§é€æ˜æ€§ï¼ˆReferential Transparencyï¼‰ ï¼šç”±æ–¼ç´”å‡½æ•¸çš„çµæœåƒ…ä¾è³´æ–¼å…¶è¼¸å…¥ï¼Œæ‰€ä»¥å®ƒå€‘çš„å‘¼å«å¯ä»¥è¢«å…¶è¼¸å‡ºå€¼æ›¿æ›è€Œä¸æœƒå½±éŸ¿ç¨‹å¼çš„è¡Œç‚ºï¼Œé€™ç¨®æ€§è³ªç¨±ç‚ºåƒç…§é€æ˜æ€§ã€‚é€™é€²ä¸€æ­¥æé«˜äº†ç¨‹å¼çš„å¯ç†è§£æ€§å’Œç°¡åŒ–äº†å„ªåŒ–ã€‚   æ›´å®¹æ˜“é€²è¡Œå½¢å¼åŒ–é©—è­‰ï¼ˆEasier Formal Verificationï¼‰ ï¼šç´”å‡½æ•¸çš„æ€§è³ªä½¿å®ƒå€‘æ›´å®¹æ˜“é©æ‡‰å½¢å¼åŒ–çš„é©—è­‰æ–¹æ³•ï¼Œé€™å°æ–¼éœ€è¦é«˜åº¦å¯é æ€§çš„æ‡‰ç”¨å ´æ™¯ï¼ˆå¦‚é‡‘èå’Œèˆªç©ºç³»çµ±ï¼‰éå¸¸é‡è¦ã€‚ \n  \n   \n   ç¨‹å¼ç¢¼æ¼”ç¤º     using   System  ;\n   \n   class   Program\n   {\n       // å®šç¾©ä¸€å€‹ç´”å‡½æ•¸\n       static   int   Add  (  int   a  ,   int   b  )\n       {\n           return   a   +   b;\n       }\n   \n       static   void   Main  (  string  []   args  )\n       {\n           int   result   =   Add  (  5  ,   3  );\n           Console.  WriteLine  (result);   // è¼¸å‡º: 8\n       }\n   }\n  åœ¨é€™å€‹ä¾‹å­ä¸­ï¼ŒAdd å‡½æ•¸åªä¾è³´æ–¼å…¶è¼¸å…¥åƒæ•¸ a å’Œ bï¼Œä¸è®€å–æˆ–ä¿®æ”¹ä»»ä½•å¤–éƒ¨ç‹€æ…‹ï¼ˆå¦‚å…¨å±€è®Šé‡æˆ–éœæ…‹è®Šé‡ï¼‰ï¼Œä¹Ÿä¸åŸ·è¡Œå¦‚æ‰“å°åˆ°æ§åˆ¶å°æˆ–å¯«æ–‡ä»¶ç­‰æœ‰å‰¯ä½œç”¨çš„æ“ä½œã€‚å› æ­¤ï¼Œç„¡è«–èª¿ç”¨å®ƒå¤šå°‘æ¬¡ï¼Œåªè¦è¼¸å…¥åƒæ•¸ç›¸åŒï¼Œå®ƒéƒ½æœƒè¿”å›ç›¸åŒçš„çµæœã€‚ \n      é ­ç­‰ç‰©ä»¶ ï¼ˆFunctions as First-class Citizensï¼‰ ï¼šæ˜¯ä¸€å€‹æ ¸å¿ƒæ¦‚å¿µã€‚é€™æ„å‘³è‘—åœ¨ç¨‹å¼èªè¨€ä¸­ï¼Œå‡½æ•¸è¢«è¦–ç‚ºä¸€ç¨®å¯ä»¥å­˜å„²åœ¨è®Šé‡ä¸­ã€ä½œç‚ºåƒæ•¸å‚³éçµ¦å…¶ä»–å‡½æ•¸ã€å¾å…¶ä»–å‡½æ•¸è¿”å›ï¼Œç”šè‡³åœ¨é‹è¡Œæ™‚æ§‹é€ çš„å€¼ã€‚é€™ç¨®å°å‡½æ•¸çš„è™•ç†æ–¹å¼æå‡äº†å‡½æ•¸çš„éˆæ´»æ€§ï¼Œä½¿å¾—å‡½æ•¸å¯ä»¥åƒå…¶ä»–æ•¸æ“šé¡å‹ä¸€æ¨£è¢«æ“ä½œå’Œä½¿ç”¨ï¼Œå¾è€Œä¿ƒé€²äº†æ›´é«˜éšçš„æŠ½è±¡å’Œç¨‹å¼ç¢¼çš„é‡ç”¨ã€‚ \n   \n   ç‰¹é»   å¯å­˜å„²ï¼šå‡½æ•¸å¯ä»¥è¢«è³¦å€¼çµ¦è®Šé‡ã€‚  å¯å‚³éï¼šå‡½æ•¸å¯ä»¥ä½œç‚ºåƒæ•¸å‚³éçµ¦å…¶ä»–å‡½æ•¸ã€‚  å¯è¿”å›ï¼šå‡½æ•¸å¯ä»¥ä½œç‚ºå…¶ä»–å‡½æ•¸çš„è¿”å›å€¼ã€‚  é‹è¡Œæ™‚æ§‹é€ ï¼šå‡½æ•¸å¯ä»¥åœ¨ç¨‹å¼é‹è¡Œæ™‚å‹•æ…‹å‰µå»ºã€‚ \n  \n   \n   ç¨‹å¼ç¢¼æ¼”ç¤º  C# ä¸­æœƒé€šéå§”è¨—ï¼ˆDelegatesï¼‰å’Œè¡¨é”å¼æ¨¹ï¼ˆExpression Treesï¼‰ä»¥åŠ Lambda è¡¨é”å¼æ”¯æŒå°‡å‡½æ•¸ä½œç‚ºé ­ç­‰ç‰©ä»¶ã€‚   å‡½æ•¸è³¦å€¼çµ¦è®Šé‡\n     Func  <  int  ,   int  ,   int  >   add   =   (  a  ,   b  )   =>   a   +   b;\n   int   result   =   add  (  2  ,   3  );   // result = 5\n  å‡½æ•¸ä½œç‚ºåƒæ•¸å‚³é\n     List  <  int  >   numbers   =   new   List  <  int  > {   1  ,   2  ,   3  ,   4  ,   5   };\n   IEnumerable  <  int  >   evenNumbers   =   numbers.  Where  (  n   =>   n   %   2   ==   0  );\n   // Where æ¥å—ä¸€å€‹å‡½æ•¸ä½œç‚ºåƒæ•¸\n  å‡½æ•¸ä½œç‚ºè¿”å›å€¼\n     Func  <  int  ,   Func  <  int  ,   int  >>   createAdder   =   x   =>   y   =>   x   +   y;\n   var   addTwo   =   createAdder  (  2  );\n   int   result   =   addTwo  (  3  );   // result = 5\n  é€™äº›ä¾‹å­å±•ç¤ºäº†åœ¨ C# ä¸­å¦‚ä½•åˆ©ç”¨ Lambda è¡¨é”å¼å’Œå§”è¨—ä¾†å¯¦ç¾å‡½æ•¸ä½œç‚ºé ­ç­‰ç‰©ä»¶çš„æ¦‚å¿µã€‚é€™ç¨®è™•ç†æ–¹å¼ä¸åƒ…å¢åŠ äº†ç¨‹å¼ç¢¼çš„éˆæ´»æ€§å’Œå¯é‡ç”¨æ€§ï¼Œè€Œä¸”ä¹Ÿæ”¯æŒäº†æ›´è¤‡é›œçš„å‡½æ•¸å¼ç¨‹å¼è¨­è¨ˆæŠ€è¡“ï¼Œå¦‚é«˜éšå‡½æ•¸å’Œå‡½æ•¸çµ„åˆã€‚ \n     é«˜éšå‡½æ•¸ï¼ˆHigher-order Functionsï¼‰ ï¼šæ˜¯å‡½æ•¸å¼ç¨‹å¼è¨­è¨ˆä¸­çš„ä¸€å€‹é—œéµæ¦‚å¿µï¼ŒæŒ‡çš„æ˜¯é‚£äº›è‡³å°‘æ»¿è¶³ä¸‹åˆ—ä¸€é …æ¢ä»¶çš„å‡½æ•¸ï¼š   æ¥å—ä¸€å€‹æˆ–å¤šå€‹å‡½æ•¸ä½œç‚ºåƒæ•¸ã€‚  è¿”å›å¦ä¸€å€‹å‡½æ•¸ä½œç‚ºçµæœã€‚  é«˜éšå‡½æ•¸çš„å­˜åœ¨å…è¨±å‡½æ•¸æ“ä½œå…¶ä»–å‡½æ•¸ï¼Œæä¾›äº†æ¥µå¤§çš„éˆæ´»æ€§å’Œè¡¨é”åŠ›ï¼Œä½¿å¾—é–‹ç™¼è€…å¯ä»¥ç”¨æ›´åŠ å®£å‘Šæ€§çš„æ–¹å¼ä¾†æ§‹é€ ç¨‹åºã€‚ \n   \n   å„ªé»    æŠ½è±¡åŒ–ç¨‹åº¦é«˜ ï¼šå¯ä»¥å°‡æ“ä½œæŠ½è±¡æˆå‡½æ•¸ï¼Œä½¿å¾—ç¨‹å¼ç¢¼æ›´åŠ ç°¡æ½”å’Œå¯è®€ã€‚   å¢å¼·å¯é‡ç”¨æ€§ ï¼šé€šéå°‡é€šç”¨çš„æ“ä½œæŠ½è±¡æˆå‡½æ•¸ï¼Œå¯ä»¥åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­é‡ç”¨é€™äº›å‡½æ•¸ã€‚   ä¾¿æ–¼çµ„åˆå’Œé‡æ§‹ ï¼šå‡½æ•¸å¯ä»¥ä½œç‚ºæ§‹ä»¶é€²è¡Œçµ„åˆï¼Œä»¥æ§‹å»ºæ›´è¤‡é›œçš„æ“ä½œå’Œæ•¸æ“šæµã€‚ \n  \n   \n   ç¨‹å¼ç¢¼æ¼”ç¤º   æ¥å—å‡½æ•¸ä½œç‚ºåƒæ•¸çš„é«˜éšå‡½æ•¸     public   static   void   ProcessList  (  List  <  int  >   list  ,   Func  <  int  ,   int  >   operation  )\n   {\n       for   (  int   i   =   0  ; i   <   list.Count; i  ++  )\n       {\n           list[i]   =   operation  (list[i]);\n       }\n   }\n   \n   List  <  int  >   numbers   =   new   List  <  int  > {   1  ,   2  ,   3  ,   4  ,   5   };\n   ProcessList  (numbers,   x   =>   x   *   x);   // å°‡åˆ—è¡¨ä¸­æ¯å€‹æ•¸å­—å¹³æ–¹\n  è¿”å›å‡½æ•¸çš„é«˜éšå‡½æ•¸     public   static   Func  <  int  ,   int  >   MultiplyBy  (  int   factor  )\n   {\n       return   x   =>   x   *   factor;\n   }\n   \n   var   triple   =   MultiplyBy  (  3  );\n   int   result   =   triple  (  5  );   // result = 15\n \n     å‡½æ•¸çµ„åˆï¼ˆFunction Compositionï¼‰ ï¼šæ˜¯å‡½æ•¸å¼ç¨‹å¼è¨­è¨ˆçš„å¦ä¸€å€‹æ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒæ¶‰åŠå°‡å…©å€‹æˆ–æ›´å¤šçš„å‡½æ•¸çµåˆæˆä¸€å€‹æ–°çš„å‡½æ•¸ã€‚åœ¨é€™ç¨®æ¨¡å¼ä¸‹ï¼Œä¸€å€‹å‡½æ•¸çš„è¼¸å‡ºæˆç‚ºå¦ä¸€å€‹å‡½æ•¸çš„è¼¸å…¥ã€‚é€™ç¨®æ–¹æ³•å…è¨±é–‹ç™¼è€…å»ºç«‹è¤‡é›œçš„æ“ä½œï¼Œé€éçµ„åˆç°¡å–®å‡½æ•¸ä¾†å¯¦ç¾ï¼Œå¾è€Œå¢åŠ ç¨‹å¼ç¢¼çš„æ¨¡çµ„åŒ–å’Œé‡ç”¨æ€§ã€‚ \n   \n   å„ªé»    æ¨¡çµ„åŒ– ï¼šé€éå°‡å°çš„ã€å°ˆä¸€çš„å‡½æ•¸çµ„åˆæˆä¸€å€‹è¤‡é›œçš„å‡½æ•¸ï¼Œå¯ä»¥æé«˜ç¨‹å¼ç¢¼çš„æ¨¡çµ„åŒ–ã€‚   é‡ç”¨æ€§ ï¼šå–®ç¨çš„å‡½æ•¸å¯ä»¥åœ¨ä¸åŒçš„çµ„åˆä¸­é‡è¤‡ä½¿ç”¨ï¼Œæé«˜äº†ç¨‹å¼ç¢¼çš„é‡ç”¨æ€§ã€‚   å¯è®€æ€§å’Œç¶­è­·æ€§ ï¼šè‰¯å¥½è¨­è¨ˆçš„å‡½æ•¸çµ„åˆå¯ä»¥ä½¿å¾—ç¨‹å¼ç¢¼æ›´æ˜“æ–¼ç†è§£å’Œç¶­è­·ã€‚ \n  \n   \n   ç¨‹å¼ç¢¼æ¼”ç¤º   å‡½æ•¸çµ„åˆåœ¨ C# ä¸­çš„æ‡‰ç”¨     // å®šç¾©å…©å€‹ç°¡å–®å‡½æ•¸\n   Func  <  int  ,   int  >   doubleIt   =   x   =>   x   *   2  ;\n   Func  <  int  ,   int  >   addOne   =   x   =>   x   +   1  ;\n   \n   // å‡½æ•¸çµ„åˆ\n   Func  <  int  ,   int  >   doubleThenAddOne   =   x   =>   addOne  (  doubleIt  (x));\n   \n   // ä½¿ç”¨çµ„åˆå‡½æ•¸\n   int   result   =   doubleThenAddOne  (  3  );   // çµæœç‚º 7\n  åœ¨é€™å€‹ä¾‹å­ä¸­ï¼ŒdoubleThenAddOne å°±æ˜¯ä¸€å€‹çµ„åˆäº† doubleIt å’Œ addOne çš„å‡½æ•¸ã€‚é¦–å…ˆå°è¼¸å…¥åŸ·è¡Œ doubleIt å‡½æ•¸ï¼Œç„¶å¾Œå°‡ç»“æœä½œç‚º addOne å‡½æ•¸çš„è¼¸å…¥ã€‚  C# çš„éˆå¼èª¿ç”¨     List  <  int  >   numbers   =   new   List  <  int  > {   1  ,   2  ,   3  ,   4  ,   5   };\n   var   result   =   numbers.  Select  (doubleIt).  Select  (addOne);\n   // result æ˜¯ IEnumerable<int>ï¼ŒåŒ…å« [3, 5, 7, 9, 11]\n  åœ¨é€™å€‹ä¾‹å­ä¸­ï¼ŒSelect æ–¹æ³•è¢«ç”¨ä¾†æ‡‰ç”¨ doubleIt å’Œ addOne å‡½æ•¸åˆ°åˆ—è¡¨çš„æ¯å€‹å…ƒç´ ä¸Šã€‚å±•ç¾äº†å¦‚ä½•ä½¿ç”¨ LINQ ä¾†é€²è¡Œå‡½æ•¸çµ„åˆã€‚ \n     éè¿´ï¼ˆRecursionï¼‰ ï¼šæ˜¯ä¸€ç¨®åœ¨ç¨‹å¼è¨­è¨ˆä¸­å¸¸è¦‹çš„æŠ€å·§ï¼Œå…¶ä¸­ä¸€å€‹å‡½æ•¸ç›´æ¥æˆ–é–“æ¥åœ°å‘¼å«è‡ªèº«ã€‚é€™ç¨®æŠ€è¡“å°¤å…¶åœ¨è™•ç†å…·æœ‰è‡ªç„¶å±¤æ¬¡çµæ§‹çš„æ•¸æ“šï¼Œå¦‚æ–‡ä»¶ç³»çµ±çš„ç›®éŒ„çµæ§‹ã€ç¶²é çš„ DOM çµæ§‹ã€æˆ–æ˜¯æ•¸æ“šçµæ§‹ï¼ˆä¾‹å¦‚æ¨¹å’Œåœ–ï¼‰æ™‚ç‰¹åˆ¥æœ‰ç”¨ã€‚ \n   \n   å„ªé»    æ¨¡çµ„åŒ– ï¼šé€éå°‡å°çš„ã€å°ˆä¸€çš„å‡½æ•¸çµ„åˆæˆä¸€å€‹è¤‡é›œçš„å‡½æ•¸ï¼Œå¯ä»¥æé«˜ç¨‹å¼ç¢¼çš„æ¨¡çµ„åŒ–ã€‚   é‡ç”¨æ€§ ï¼šå–®ç¨çš„å‡½æ•¸å¯ä»¥åœ¨ä¸åŒçš„çµ„åˆä¸­é‡è¤‡ä½¿ç”¨ï¼Œæé«˜äº†ç¨‹å¼ç¢¼çš„é‡ç”¨æ€§ã€‚   å¯è®€æ€§å’Œç¶­è­·æ€§ ï¼šè‰¯å¥½è¨­è¨ˆçš„å‡½æ•¸çµ„åˆå¯ä»¥ä½¿å¾—ç¨‹å¼ç¢¼æ›´æ˜“æ–¼ç†è§£å’Œç¶­è­·ã€‚ \n  \n   \n   ç¨‹å¼ç¢¼æ¼”ç¤º   è¨ˆç®—éšä¹˜\n     public   static   int   Factorial  (  int   n  )\n   {\n       if   (n   <=   1  )   // åŸºæœ¬æƒ…æ³\n           return   1  ;\n       else\n           return   n   *   Factorial  (n   -   1  );   // éæ­¸æ­¥é©Ÿ\n   }\n   \n   int   result   =   Factorial  (  5  );   // è¨ˆç®— 5!\n \nåœ¨é€™å€‹ä¾‹å­ä¸­ï¼ŒFactorial å‡½æ•¸æ˜¯ä¸€å€‹éæ­¸å‡½æ•¸ï¼Œç”¨ä¾†è¨ˆç®—ä¸€å€‹æ•¸çš„éšä¹˜ã€‚ç•¶ n å°æ–¼æˆ–ç­‰æ–¼ 1 æ™‚ï¼Œå‡½æ•¸ç›´æ¥è¿”å› 1ï¼ˆé€™æ˜¯åŸºæœ¬æƒ…æ³ï¼Œä¸éœ€è¦é€²ä¸€æ­¥éæ­¸ï¼‰ã€‚å¦å‰‡ï¼Œå‡½æ•¸é€é n * Factorial(n - 1) é€²è¡Œéæ­¸èª¿ç”¨è‡ªå·±ï¼ˆéæ­¸æ­¥é©Ÿï¼‰ï¼Œç›´åˆ°é”åˆ°åŸºæœ¬æƒ…æ³ã€‚ \n    éŸ¿æ‡‰å¼ç¨‹å¼è¨­è¨ˆ  éŸ¿æ‡‰å¼ç¨‹å¼è¨­è¨ˆï¼ˆReactive Programmingï¼‰æ˜¯ä¸€ç¨®é¢å‘æ•¸æ“šæµå’Œè®ŠåŒ–å‚³æ’­çš„ç¨‹å¼è¨­è¨ˆç¯„å¼ã€‚é€™æ„å‘³è‘—ï¼Œç•¶ä½¿ç”¨éŸ¿æ‡‰å¼ç¨‹å¼è¨­è¨ˆæ™‚ï¼Œå¯ä»¥è¼•é¬†åœ°è¡¨é”éœæ…‹æˆ–å‹•æ…‹çš„æ•¸æ“šæµï¼Œä¸¦ä¸”ç•¶æ•¸æ“šæµç™¼ç”Ÿè®ŠåŒ–æ™‚ï¼Œç›¸é—œè¨ˆç®—æ¨¡å‹æœƒè‡ªå‹•æ›´æ–°ã€‚é€™ç¨®ç¨‹å¼è¨­è¨ˆæ¨¡å¼åœ¨è™•ç†å…·æœ‰é«˜åº¦äº¤äº’æ€§çš„æ‡‰ç”¨ç¨‹åºä¸­ç‰¹åˆ¥æœ‰ç”¨ï¼Œä¾‹å¦‚å¯¦æ™‚æ•¸æ“šè™•ç†ç³»çµ±ã€å‹•æ…‹ç”¨æˆ¶ç•Œé¢å’Œå…¶ä»–éœ€è¦å³æ™‚éŸ¿æ‡‰æ•¸æ“šè®ŠåŒ–çš„æ‡‰ç”¨å ´æ™¯ã€‚  åœ¨C#ä¸­ï¼ŒéŸ¿æ‡‰å¼ç¨‹å¼è¨­è¨ˆä¸»è¦æ˜¯é€šé Reactive Extensionsï¼ˆRxï¼‰åº«ä¾†å¯¦ç¾çš„ã€‚Rx æ˜¯ä¸€å€‹ä½¿ç”¨å¯è§€å¯Ÿåºåˆ—ä¾†é€²è¡Œç•°æ­¥ç¨‹å¼è¨­è¨ˆå’ŒåŸºæ–¼äº‹ä»¶çš„ç¨‹åºåº«ï¼Œå®ƒæ“´å±•äº†è§€å¯Ÿè€…æ¨¡å¼ä»¥æ”¯æŒæ•¸æ“š/äº‹ä»¶åºåˆ—ï¼Œä¸¦æä¾›äº†è±å¯Œçš„æ“ä½œç¬¦ä¾†å‰µå»ºã€åˆæˆã€éæ¿¾ã€è½‰æ›ã€ä»¥åŠå°é€™äº›åºåˆ—é€²è¡Œå…¶ä»–æ“ä½œã€‚  æ ¸å¿ƒæ¦‚å¿µï¼š     å¯è§€å¯Ÿåºåˆ— ï¼ˆObservableï¼‰ ï¼šåœ¨ Rx ä¸­ï¼ŒObservable æ˜¯è¡¨ç¤ºç•°æ­¥æ•¸æ“šæµçš„ä¸»è¦æŠ½è±¡ã€‚ä½ å¯ä»¥è¨‚é–±ï¼ˆSubscribeï¼‰ä¸€å€‹ Observableï¼Œä¸¦ä¸”ç•¶æ•¸æ“šæµç™¼å‡ºä¸€å€‹æˆ–å¤šå€‹å€¼æ™‚ï¼Œè¨‚é–±è€…ï¼ˆSubscriberï¼‰å°±æœƒæ”¶åˆ°é€šçŸ¥ã€‚é€™é¡ä¼¼æ–¼æšèˆ‰ï¼ˆIEnumerableï¼‰å’Œè¿­ä»£å™¨ï¼ˆIEnumeratorï¼‰æ¨¡å¼ï¼Œä½†é‡å°çš„æ˜¯ç•°æ­¥å’ŒåŸºæ–¼äº‹ä»¶çš„æ•¸æ“šæµã€‚    è¨‚é–±è€… ï¼ˆSubscriberï¼‰ ï¼šè¨‚é–±è€…å° Observable ç™¼å‡ºçš„é …ç›®é€²è¡ŒéŸ¿æ‡‰ã€‚åœ¨ Rx ä¸­ï¼Œè¨‚é–±è€…å¯¦ç¾äº†ä¸€å€‹æˆ–å¤šå€‹æ¥å£æ–¹æ³•ä¾†è™•ç†æ•¸æ“šæµç™¼å‡ºçš„é …ç›®ã€éŒ¯èª¤ä»¥åŠå®Œæˆä¿¡è™Ÿã€‚   å„ªé»    éé˜»å¡ ï¼šæ•¸æ“šæµçš„è™•ç†æ˜¯éé˜»å¡çš„ï¼Œé€™æ„å‘³è‘—ä½ çš„æ‡‰ç”¨ç¨‹åºå¯ä»¥æ›´æœ‰æ•ˆåœ°ä½¿ç”¨ç³»çµ±è³‡æºï¼ŒåŒæ™‚è™•ç†å¤šå€‹æ“ä½œã€‚   ç•°æ­¥è™•ç† ï¼šRx å¤©ç”Ÿæ”¯æŒç•°æ­¥æ“ä½œï¼Œé€™ä½¿å¾—è™•ç†æ™‚é–“å¯†é›†å‹æˆ– I/O å¯†é›†å‹ä»»å‹™è®Šå¾—æ›´åŠ ç°¡å–®ã€‚   æ˜“æ–¼åˆæˆ ï¼šé€šé Rx æä¾›çš„è±å¯Œæ“ä½œç¬¦ï¼Œå¯ä»¥è¼•é¬†åœ°åˆæˆå’Œè½‰æ›æ•¸æ“šæµï¼Œä»¥å¯¦ç¾è¤‡é›œçš„æ¥­å‹™é‚è¼¯ã€‚   éŒ¯èª¤è™•ç† ï¼šåœ¨ Rx ä¸­ï¼ŒéŒ¯èª¤è¢«è¦–ç‚ºæ•¸æ“šæµçš„ä¸€éƒ¨åˆ†ã€‚é€™æ„å‘³è‘—éŒ¯èª¤å’Œæ­£å¸¸æ•¸æ“šä¸€æ¨£å¯ä»¥è¢«è™•ç†å’Œè½‰æ›ï¼Œä½¿å¾—éŒ¯èª¤è™•ç†è®Šå¾—æ›´åŠ éˆæ´»å’Œå¼·å¤§ã€‚   é©ç”¨å ´æ™¯    å¯¦æ™‚æ•¸æ“šè™•ç† ï¼šå¦‚è‚¡ç¥¨å ±åƒ¹ã€å¯¦æ™‚åˆ†æç­‰ã€‚   ç”¨æˆ¶ç•Œé¢é–‹ç™¼ ï¼šå¯ä»¥è¼•é¬†å¯¦ç¾å°ç”¨æˆ¶æ“ä½œçš„éŸ¿æ‡‰ï¼Œå¦‚æŒ‰éˆ•é»æ“Šã€æ»‘å‹•äº‹ä»¶ç­‰ã€‚   ç¶²è·¯ç¨‹å¼è¨­è¨ˆ ï¼šè™•ç†HTTPè«‹æ±‚ã€éŸ¿æ‡‰å’Œå…¶ä»–ç•°æ­¥I/Oæ“ä½œã€‚   äº‹ä»¶é©…å‹•ç³»çµ± ï¼šä»»ä½•éœ€è¦è™•ç†äº‹ä»¶æµçš„ç³»çµ±ï¼Œå¦‚æ¶ˆæ¯éšŠåˆ—æ¶ˆè²»è€…ã€ç›£æ§ç³»çµ±ç­‰ã€‚   ç¨‹å¼ç¢¼æ¼”ç¤º     using   System  ;\n   using   System  .  Reactive  .  Linq  ;\n   \n   namespace   ReactiveExample\n   {\n       class   Program\n       {\n           static   void   Main  (  string  []   args  )\n           {\n               // å‰µå»ºä¸€å€‹å¯è§€å¯Ÿåºåˆ—ï¼Œå¾1é–‹å§‹ï¼Œæ¯éš”ä¸€ç§’ç™¼å‡ºä¸€å€‹æ•¸å€¼\n               var   observable   =   Observable.  Interval  (TimeSpan.  FromSeconds  (  1  ))\n                                           .  Select  (  index   =>   $\"Value {  index  }\"  );\n               \n               // è¨‚é–±å¯è§€å¯Ÿåºåˆ—ï¼Œä¸¦æ‰“å°å‡ºç™¼å‡ºçš„å€¼\n               var   subscription   =   observable.  Subscribe  (value =  >   Console.  WriteLine  (value));\n   \n               // é˜²æ­¢ç¨‹åºç›´æ¥é€€å‡º\n               Console.  WriteLine  (  \"Press any key to exit\"  );\n               Console.  ReadKey  ();\n   \n               // å–æ¶ˆè¨‚é–±\n               subscription.  Dispose  ();\n           }\n       }\n   }\n  åœ¨é€™å€‹ç¤ºä¾‹ä¸­ï¼Œæˆ‘å€‘å‰µå»ºäº†ä¸€å€‹æ¯ç§’ç™¼å‡ºä¸€å€‹å€¼çš„å¯è§€å¯Ÿåºåˆ—ï¼Œç„¶å¾Œé€šé Subscribe æ–¹æ³•è¨‚é–±äº†é€™å€‹åºåˆ—ã€‚ç•¶åºåˆ—ç™¼å‡ºä¸€å€‹å€¼æ™‚ï¼Œæˆ‘å€‘çš„è¨‚é–±è€…å°±æœƒæ¥æ”¶åˆ°é€™å€‹å€¼ä¸¦å°‡å…¶æ‰“å°å‡ºä¾†ã€‚é€™å€‹éç¨‹æœƒä¸€ç›´æŒçºŒï¼Œç›´åˆ°æˆ‘å€‘é€šéèª¿ç”¨ subscription.Dispose() æ‰‹å‹•å–æ¶ˆè¨‚é–±ï¼Œæˆ–è€… Observable åºåˆ—è‡ªè¡ŒçµæŸï¼ˆä¾‹å¦‚ï¼Œç™¼å‡ºäº†å®Œæˆä¿¡è™Ÿæˆ–éŒ¯èª¤ä¿¡è™Ÿï¼‰ã€‚   ç¸½çµ  html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}"},{"id":"content:6.clean-arch:4.chapter4.md","path":"/clean-arch/chapter4","dir":"clean-arch","title":"04 çµæ§‹åŒ–ç¨‹å¼è¨­è¨ˆ","description":"","keywords":["è­‰æ˜","å…¬å‘Šï¼šé€™æ˜¯æœ‰å®³çš„","åŠŸèƒ½åˆ†è§£","æ›¾æœ‰æ­£å¼çš„è­‰æ˜","ä¾é ç§‘å­¸","æ¸¬è©¦","ç¸½çµ"],"body":"  è­‰æ˜  å…¬å‘Šï¼šé€™æ˜¯æœ‰å®³çš„  åŠŸèƒ½åˆ†è§£  æ›¾æœ‰æ­£å¼çš„è­‰æ˜  ä¾é ç§‘å­¸  æ¸¬è©¦  ç¸½çµ"},{"id":"content:6.clean-arch:5.chapter5.md","path":"/clean-arch/chapter5","dir":"clean-arch","title":"05 ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆ","description":"","keywords":["å°è£ï¼Ÿ","ç¹¼æ‰¿ï¼Ÿ","å¤šå‹ï¼Ÿ","ç¸½çµ"],"body":"  å°è£ï¼Ÿ  ç¹¼æ‰¿ï¼Ÿ  å¤šå‹ï¼Ÿ  å¤šå‹çš„å¨åŠ›  ä¾è³´åå‘  ç¸½çµ"},{"id":"content:6.clean-arch:6.chapter6.md","path":"/clean-arch/chapter6","dir":"clean-arch","title":"06 å‡½æ•¸å¼ç¨‹å¼è¨­è¨ˆ","description":"","keywords":["æ•´æ•¸çš„å¹³æ–¹","ä¸å¯è®Šèˆ‡æ¶æ§‹","å¯è®Šæ€§çš„åˆ†é›¢","äº‹ä»¶ä¾†æº","ç¸½çµ"],"body":"  æ•´æ•¸çš„å¹³æ–¹  ä¸å¯è®Šèˆ‡æ¶æ§‹  å¯è®Šæ€§çš„åˆ†é›¢  äº‹ä»¶ä¾†æº  ç¸½çµ"},{"id":"content:zh:ddia:chapter9.md","path":"/zh/ddia/chapter9","dir":"ddia","title":"è¨­è¨ˆè³‡æ–™å¯†é›†å‹æ‡‰ç”¨-ch9","description":"","keywords":["ä¸€è‡´æ€§èˆ‡å…±è­˜","ç›®éŒ„","9.1 ä¸€è‡´æ€§ä¿è­‰","9.2 ç·šæ€§ä¸€è‡´æ€§","æ˜¯ä»€éº¼æ±è¥¿å¯ä»¥è®“ç³»çµ±ç·šæ€§ä¸€è‡´**ï¼Ÿ**","ä¾è³´ç·šæ€§ä¸€è‡´æ€§","å¯¦ç¾ç·šæ€§ä¸€è‡´çš„ç³»çµ±","ç·šæ€§ä¸€è‡´æ€§çš„ä»£åƒ¹","9.3 é †åºä¿è­‰","é †åºèˆ‡å› æœé—œä¿‚(å› æœä¸€è‡´æ€§ causally consistent)","åºåˆ—è™Ÿé †åº","å…¨åºå»£æ’­","9.4 åˆ†æ•£å¼äº‹å‹™èˆ‡å…±è­˜","å…±è­˜çš„ä¸å¯èƒ½æ€§","åŸå­æäº¤èˆ‡å…©éšæ®µæäº¤","å…©éšæ®µæäº¤ç°¡ä»‹","ç³»çµ±æ‰¿è«¾","å”èª¿è€…å¤±æ•ˆ","ä¸‰éšæ®µæäº¤","å¯¦è¸ä¸­çš„åˆ†æ•£å¼äº‹å‹™","æ°å¥½ä¸€æ¬¡çš„è¨Šæ¯è™•ç†","XAäº‹å‹™","æ‡·ç–‘æŒæœ‰é–","å¾å”èª¿è€…æ•…éšœä¸­æ¢å¾©","åˆ†æ•£å¼äº‹å‹™çš„é™åˆ¶","å®¹éŒ¯å…±è­˜","å…±è­˜æ¼”ç®—æ³•å’Œå…¨åºå»£æ’­","å–®ä¸»è¤‡è£½èˆ‡å…±è­˜","ç´€å…ƒç·¨è™Ÿå’Œæ³•å®šäººæ•¸","å…±è­˜çš„å±€é™æ€§","æˆå“¡èˆ‡å”èª¿æœå‹™","å°‡å·¥ä½œåˆ†é…çµ¦ç¯€é»","æœå‹™ç™¼ç¾","æˆå“¡è³‡æ ¼æœå‹™","9.5 æœ¬ç« å°çµ"],"body":"  è¨­è¨ˆè³‡æ–™å¯†é›†å‹æ‡‰ç”¨-ch9  ä¸€è‡´æ€§èˆ‡å…±è­˜  ç›®éŒ„   9.1    ä¸€è‡´æ€§ä¿è­‰  9.2    ç·šæ€§ä¸€è‡´æ€§  9.3    é †åºä¿è­‰  9.4     åˆ†æ•£å¼äº‹å‹™èˆ‡å…±è­˜  9.5     æœ¬ç« å°çµ  9.1 ä¸€è‡´æ€§ä¿è­‰  å¤§å¤šæ•¸è¤‡è£½çš„è³‡æ–™åº«è‡³å°‘æä¾›äº†æœ€çµ‚ä¸€è‡´æ€§ï¼Œé€™æ„å‘³è‘—å¦‚æœä½ åœæ­¢å‘è³‡æ–™åº«å¯«å…¥è³‡æ–™ä¸¦ç­‰å¾…ä¸€æ®µä¸ç¢ºå®šçš„æ™‚é–“ï¼Œé‚£éº¼æœ€çµ‚æ‰€æœ‰çš„è®€å–è«‹æ±‚éƒ½æœƒè¿”å›ç›¸åŒçš„å€¼ã€‚æ›å¥è©±èªªï¼Œä¸ä¸€è‡´æ€§æ˜¯æš«æ™‚çš„ï¼Œæœ€çµ‚æœƒè‡ªè¡Œè§£æ±ºï¼ˆå‡è¨­ç¶²è·¯ä¸­çš„ä»»ä½•æ•…éšœæœ€çµ‚éƒ½æœƒè¢«ä¿®å¾©ã€‚  å°æ–¼æ‡‰ç”¨é–‹ç™¼äººå“¡è€Œè¨€ï¼Œæœ€çµ‚ä¸€è‡´æ€§æ˜¯å¾ˆå›°é›£çš„ï¼Œå› ç‚ºå®ƒèˆ‡æ™®é€šå–®åŸ·è¡Œç·’ç¨‹å¼ä¸­è®Šæ•¸çš„è¡Œç‚ºæœ‰å¾ˆå¤§å€åˆ¥ã€‚å¦‚æœå°‡ä¸€å€‹å€¼è³¦çµ¦ä¸€å€‹è®Šæ•¸ï¼Œç„¶å¾Œå¾ˆå¿«åœ°å†æ¬¡è®€å–ï¼Œä¸å¯èƒ½è®€åˆ°èˆŠçš„å€¼ï¼Œæˆ–è€…è®€å–å¤±æ•—ã€‚è³‡æ–™åº«è¡¨é¢ä¸Šçœ‹èµ·ä¾†åƒä¸€å€‹ä½ å¯ä»¥è®€å¯«çš„è®Šæ•¸ï¼Œä½†å¯¦éš›ä¸Šå®ƒæœ‰æ›´è¤‡é›œçš„èªç¾©ã€‚  æˆ‘å€‘åœ¨ä½¿ç”¨å¼±ä¸€è‡´æ€§çš„è³‡æ–™åº«æ™‚å¿…é ˆäº†è§£å¼±ä¸€è‡´æ€§çš„å±€é™æ€§,å› ç‚ºéŒ¯èª¤å¸¸å¸¸å¾ˆé›£æ‰¾åˆ°ä¹Ÿå¾ˆé›£æ¸¬è©¦ï¼Œå› ç‚ºæ‡‰ç”¨å¯èƒ½åœ¨å¤§å¤šæ•¸æƒ…æ³ä¸‹åŸ·è¡Œè‰¯å¥½ã€‚ç•¶ç³»çµ±å‡ºç¾æ•…éšœï¼ˆä¾‹å¦‚ç¶²è·¯ä¸­æ–·ï¼‰æˆ–é«˜ä½µç™¼æ™‚ï¼Œæœ€çµ‚ä¸€è‡´æ€§çš„é‚Šç·£æƒ…æ³æ‰æœƒé¡¯ç¾å‡ºä¾†ã€‚      å¼·ä¸€è‡´æ€§  å¼±ä¸€è‡´æ€§    è§£é‡‹  å¼·ä¸€è‡³æ€§è¡¨ç¤ºï¼Œä¸€æ—¦ä¸€å€‹æ“ä½œï¼ˆå¦‚å¯«å…¥ï¼‰å®Œæˆï¼Œè©²æ“ä½œçš„æ•ˆæœæœƒç«‹å³åæ˜ åœ¨æ¥ä¸‹ä¾†æ‰€æœ‰çš„è®€å–æ“ä½œä¸Šï¼Œç„¡è«–é€™äº›è®€å–æ“ä½œæ˜¯å¾å“ªå€‹ç¯€é»ç™¼å‡ºçš„ã€‚  åœ¨å¼±ä¸€è‡³æ€§æ¨¡å‹ä¸‹ï¼Œå¯«å…¥æ“ä½œçš„æ•ˆæœå¯èƒ½ä¸æœƒç«‹å³åæ˜ åœ¨éš¨å¾Œçš„è®€å–æ“ä½œä¸­ï¼Œç‰¹åˆ¥æ˜¯ä¾†è‡ªå…¶ä»–ç¯€é»çš„è®€å–æ“ä½œã€‚   ä¾‹å­  å‡è¨­ä½ åœ¨éŠ€è¡Œè½‰å¸³ï¼Œç•¶éŒ¢å¾ä¸€å€‹å¸³æˆ¶è½‰åˆ°å¦ä¸€å€‹å¸³æˆ¶å¾Œï¼Œä¸ç®¡æ˜¯ä½ è‡ªå·±é‚„æ˜¯å…¶ä»–ä»»ä½•äººï¼Œåªè¦æŸ¥è©¢é¤˜é¡ï¼Œéƒ½æœƒç«‹å³çœ‹åˆ°æœ€æ–°çš„æ•¸å­—ã€‚  å‡è¨­ä½ æ›´æ–°äº†ä½ çš„ç¤¾äº¤åª’é«”ç‹€æ…‹ã€‚ä½ çš„æœ‹å‹å¯èƒ½æœƒåœ¨å¹¾ç§’é˜å¾Œæˆ–å¹¾åˆ†é˜å¾Œæ‰çœ‹åˆ°é€™å€‹æ›´æ–°ï¼Œå–æ±ºæ–¼å„ç¨®å› ç´ ï¼ˆå¦‚ç¶²çµ¡å»¶é²ã€ç·©å­˜ç­‰ï¼‰ã€‚   æ¨¡å‹  ç·šæ€§ä¸€è‡´æ€§(linearizability)æœ€å¼·  æœ€çµ‚ä¸€è‡´æ€§(Eventual Consistency)   å®¹éŒ¯æ€§  å°‘  é«˜   æ‰€éœ€è³‡æº  é«˜  ä½   å¯¦è¸  æ˜“  é›£  9.2 ç·šæ€§ä¸€è‡´æ€§  ä»‹ç´¹ï¼š  åœ¨æœ€çµ‚ä¸€è‡´çš„è³‡æ–™åº«ï¼Œå¦‚æœä½ åœ¨åŒä¸€æ™‚åˆ»å•å…©å€‹ä¸åŒå‰¯æœ¬ç›¸åŒçš„å•é¡Œï¼Œå¯èƒ½æœƒå¾—åˆ°å…©å€‹ä¸åŒçš„ç­”æ¡ˆã€‚é€™å¾ˆè®“äººå›°æƒ‘ã€‚å¦‚æœè³‡æ–™åº«å¯ä»¥æä¾›åªæœ‰ä¸€å€‹å‰¯æœ¬çš„å‡è±¡ï¼ˆå³ï¼Œåªæœ‰ä¸€å€‹æ•¸æ“šå‰¯æœ¬ï¼‰ï¼Œé‚£éº¼äº‹æƒ…å°±ç°¡å–®å¤ªå¤šäº†ã€‚æ¯å€‹å®¢æˆ¶ç«¯éƒ½æœƒæœ‰ç›¸åŒçš„è³‡æ–™æª¢è¦–ï¼Œä¸”ä¸å¿…æ“”å¿ƒè¤‡è£½æ»¯å¾Œäº†ã€‚  é€™ç¨®æŠ½è±¡çš„æƒ³æ³•ä¹Ÿç¨±ç‚º  åŸå­ä¸€è‡´æ€§ï¼ˆatomic consistencyï¼‰ ã€7ã€‘ï¼Œ  å¼·ä¸€è‡´æ€§ï¼ˆstrong consistencyï¼‰ ï¼Œ  ç«‹å³ä¸€è‡´æ€§ï¼ˆimmediate consistencyï¼‰ Â æˆ–Â   å¤–éƒ¨ä¸€è‡´æ€§ï¼ˆexternal consistency ï¼‰     åœ– 9-1 é€™å€‹ç³»çµ±æ˜¯éç·šæ€§ä¸€è‡´çš„ï¼Œå°è‡´äº†çƒè¿·çš„å›°æƒ‘  æè¿°ï¼š  è¨ˆåˆ†å“¡æˆåŠŸå¯«å…¥å¾·åœ‹ç²å‹åˆ°Leader  Leaderé–‹å§‹å¯«å…¥Foll1 Foll2  Aliceç”¨æ‰‹æ©Ÿçœ‹åˆ°å¾·åœ‹è´äº†ç„¶å¾ŒBobå› ç‚ºLeaderå¯«å…¥çš„æ™‚é–“å·®ä»¥ç‚ºæ¯”è³½é‚„åœ¨é€²è¡Œ  æ˜¯ä»€éº¼æ±è¥¿å¯ä»¥è®“ç³»çµ±ç·šæ€§ä¸€è‡´**ï¼Ÿ**  ä»‹ç´¹ï¼š  çœŸæ­£çš„æƒ³æ³•å°±æ˜¯å¦‚ä½•è®“æ“ä½œå¤šå€‹è³‡æ–™åº«åƒåœ¨å–®ä¸€æ“ä½œä¸€å€‹è³‡æ–™åº«ä¸€æ¨£     åœ– 9-2 å¦‚æœè®€å–è«‹æ±‚èˆ‡å¯«å…¥è«‹æ±‚ä½µç™¼ï¼Œå‰‡å¯èƒ½æœƒè¿”å›èˆŠå€¼æˆ–æ–°å€¼  xç¨±ç‚ºæš«å­˜å™¨,å¯ä»¥æ˜¯éµæˆ–æ˜¯è³‡æ–™åº«çš„è¡Œæˆ–æ˜¯è³‡æ–™åº«çš„ä¸€å€‹æ–‡ä»¶  æè¿°ï¼š  Aèˆ‡Bæœƒåœ¨Cå¯«å…¥ä¸­ç”¢ç”Ÿä¸ç¢ºå®šæ€§  test     package   main\n   \n   import   (\n       \"  log  \"\n       \"  math/rand  \"\n       \"  sync  \"\n       \"  time  \"\n   )\n   \n   type   DB   struct   {\n       Value   int\n   }\n   type   Client   struct   {\n       Name   string\n       wg     *  sync.WaitGroup\n   }\n   \n   func   (c   *  Client)   Read  (db   *  DB) {\n       defer   c.wg.  Done  ()\n       for   i   :=   0  ; i   <   3  ; i  ++   {\n           time.  Sleep  (time.Millisecond   *   time.  Duration  (rand.  Intn  (  10  )))\n           log.  Printf  (  \"  %s   x=  %d   %v   \\n  \"  , c.Name, db.Value, time.  Now  ().  UnixMilli  ())\n       }\n   }\n   \n   func   (c   *  Client)   Write  (db   *  DB, i   int  ) {\n       defer   c.wg.  Done  ()\n       time.  Sleep  (time.Millisecond   *   time.  Duration  (rand.  Intn  (  10  )))\n       db.Value   =   i\n   }\n   \n   func   main  () {\n       rand.  Seed  (time.  Now  ().  UnixNano  ())\n       wg   :=   &  sync.WaitGroup{}\n   \n       wg.  Add  (  3  )\n       db   :=   &  DB{Value:   0  }\n       clientA   :=   &  Client{Name:   \"ClientA\"  , wg: wg}\n       clientB   :=   &  Client{Name:   \"ClientB\"  , wg: wg}\n       clientC   :=   &  Client{Name:   \"ClientC\"  , wg: wg}\n   \n       go   clientA.  Read  (db)\n       go   clientB.  Read  (db)\n       go   clientC.  Write  (db,   1  )\n   \n       wg.  Wait  ()\n   }\n   /*\n   2023/09/01 17:34:13 ClientA x=0 1693560853277 \n   2023/09/01 17:34:13 ClientA x=0 1693560853278 \n   2023/09/01 17:34:13 ClientB x=0 1693560853278 \n   2023/09/01 17:34:13 ClientA x=0 1693560853283 \n   2023/09/01 17:34:13 ClientB x=1 1693560853288 \n   2023/09/01 17:34:13 ClientB x=1 1693560853298\n   */\n   ç‚ºäº†ä½¿ç³»çµ±ç·šæ€§ä¸€è‡´éœ€è¦æ–°å¢å¦å¤–ä¸€å€‹ç´„æŸâ€œåªè¦æœ‰ä»»ä½•ä¸€å€‹Clientè®€å–xéƒ½å¿…é ˆè¿”å›æœ€æ–°å€¼     åœ– 9-3 ä»»ä½•ä¸€å€‹è®€å–è¿”å›æ–°å€¼å¾Œï¼Œæ‰€æœ‰å¾ŒçºŒè®€å–ï¼ˆåœ¨ç›¸åŒæˆ–å…¶ä»–å®¢æˆ¶ç«¯ä¸Šï¼‰ä¹Ÿå¿…é ˆè¿”å›æ–°å€¼ã€‚  æè¿°ï¼š  é€™å¼µåœ–æ˜¯èˆ‡ä¸Šä¸€å€‹åœ–çš„æ¯”è¼ƒ,é€™å¼µåœ–æ˜¯æœ€å¾Œæƒ³è¦é”åˆ°çš„ç›®æ¨™(ç·šæ€§ä¸€è‡´)ä¹Ÿå°±æ˜¯æˆ‘ä¸ç®¡Cåˆ°åº•åœ¨å“ªå€‹æ™‚é–“é»çœŸæ­£å¯«å…¥,åªè¦Aå·²ç¶“è®€åˆ°1çš„è©±,Bæ°¸é ä¸èƒ½è®€åˆ°å…¶ä»–å€¼ä¸€å®šè¦æ˜¯1     åœ– 9-4 è¦–è¦ºåŒ–è®€å–å’Œå¯«å…¥çœ‹èµ·ä¾†å·²ç¶“ç”Ÿæ•ˆçš„æ™‚é–“é»ã€‚ B çš„æœ€å¾Œè®€å–ä¸æ˜¯ç·šæ€§ä¸€è‡´æ€§çš„  æè¿°ï¼š  é€™é‚Šæƒ³è¦æè¿°å¦‚æœwriteèˆ‡casæ··ç”¨æœƒç™¼ç”Ÿä»€éº¼å•é¡Œ  Dæœ€å¾Œå‡ºéŒ¯äº†åŸå› æ˜¯ä»–ä¸€é–‹å§‹æ²’æœ‰ç”¨caså…ˆæ¯”è¼ƒè³‡æ–™åº«åŸæœ¬æœ‰çš„å…§å®¹æ˜¯ä»€éº¼ç­‰åˆ°ä»–æƒ³ç”¨casçš„æ™‚å€™ç™¼ç¾cas(2,0,3) 2â‰ 0 æ‰€ä»¥error,  Cæƒ³ç”¨casæ›´æ–°è³‡æ–™åº«,è€ŒCæœ€å¾Œä¸€æ¬¡çš„è¨˜æ†¶é«”è£¡é¢x=2æ‰€ä»¥cas(2,2,4) 2=2æ‰€ä»¥xæ›´æ–°æˆ4  ç¬¬ä¸ƒç« CAS(Compare and Swap)çš„è§£é‡‹   *è£œå…¨  ç¬¬7ç« â€äº‹å‹™â€æœ‰æåˆ°  CAS èˆ‡ACID  cas(å¯¦ä¾‹æ•¸å€¼(å…§å­˜æ•¸å€¼),æœŸæœ›æ•¸å€¼,æ›´æ–°æ•¸å€¼)  = True or False     sequenceDiagram\n     participant   T1\n     participant   Memory\n     participant   T2\n     Note   over   Memory  :   x=77\n   \n       T2  ->>  Memory  :   è®€å–æ•¸å€¼ (Read x)\n     Memory  ->>  T2  :   è¿”å› 77\n     T1  ->>  Memory  :   è®€å–æ•¸å€¼ (Read x)\n     Memory  ->>  T1  :   è¿”å› 77\n       \n   \n     Note   over   T1  ,  T2  :   é–‹å§‹ç«¶çˆ­æ¶åšcasæ›´æ–°\n       \n       Note   over   T1  ,  Memory  :   T1å…ˆæ¶åˆ°é–‹å§‹åšcas\n     T1  ->>  Memory  :   CAS(77, 77, 78) \n     Note   over   Memory  :   æ¯”è¼ƒ 77 == 77\n     Memory  ->>  T1  :   CASæˆåŠŸï¼Œæ›´æ–°ç‚º78\n   \n       Note   over   Memory  :   x=78\n     Note   over   Memory  ,  T2  :   T2æ¯”T1æ™šä¸€æ­¥åšcas\n     T2  ->>  Memory  :   CAS(78, 77, 7788)\n     Note   over   Memory  :   æ¯”è¼ƒ 78 != 77\n     Memory  ->>  T2  :   CASå¤±æ•—\n   \n     Note   over   Memory  :   æœ€çµ‚æ•¸å€¼ç‚º x=78\n  *é‡é»ï¼š  CASåªåœ¨ä¹å¯«ï¼Œè€Œåˆå§‹å€¼çš„è®€å–å¯ä»¥æ˜¯åˆ»æ„å…ˆå»è®€æˆ–è€…æ˜¯æ›¾ç¶“è®€é  æ²’æœ‰å…ˆè®€çš„casä¸èƒ½æ¯”è¼ƒ  test     type   CAS   struct   {\n       value   int\n   }\n   \n   func   (c   *  CAS)   CompareAndSwap  (expected   int  , newValue   int  )   bool   {\n       if   c.value   ==   expected {\n           c.value   =   newValue\n           return   true\n       }\n       return   false\n   }\n  ç¬¬7ç« èªªCASæ˜¯è¼•å‹äº‹å‹™æ‰€ä»¥ç”¨redisäº†è§£äº†ä¸€ä¸‹äº‹å‹™  æœ€å¾Œå°æ–¼casçš„ç†è§£å°±åƒæ˜¯redisçš„watchæœƒå»ç›£è¦–æŸå€‹keyç•¶æŸå€‹keyè¢«ä½µç™¼å¯«å…¥æ™‚å°±æœƒç™¼å‡ºéŒ¯èª¤åœæ­¢äº‹å‹™     go   func  ()  {   //A\n       WATCH   x\n       MULTI\n       SET   x   \"newValueFromA\"\n       EXEC\n   }  ()\n   go func(){   //B\n       WATCH   x\n       MULTI\n       SET   x   \"newValueFromB\"\n       EXEC\n   }()\n   /*\n   2023/09/04   00  :06:19   Goroutine   A   aborted:   redis:   transaction   failed\n   2023/09/04   00  :06:19   Goroutine   B   succeeded\n   2023/09/04   00  :06:19   Final   value   of   x:   newValueFromB\n   *  /\n  test     package   main\n   \n   import   (\n       \"  context  \"\n       \"  log  \"\n       \"  sync  \"\n   \n       \"  github.com/go-redis/redis/v8  \"\n   )\n   \n   func   main  () {\n       var   ctx   =   context.  Background  ()\n       rdb   :=   redis.  NewClient  (  &  redis.Options{\n           Addr:       \"localhost:6379\"  ,\n           Password:   \"redis\"  ,\n       })\n   \n       var   wg sync.WaitGroup\n       wg.  Add  (  2  )\n   \n       go   func  () { \n           defer   wg.  Done  ()\n   \n           err   :=   rdb.  Watch  (ctx,   func  (tx   *  redis.Tx)   error   {\n   \n               _, err   :=   tx.  TxPipelined  (ctx,   func  (pipe redis.Pipeliner)   error   {\n                   pipe.  Set  (ctx,   \"x\"  ,   \"newValueFromA\"  ,   0  )\n                   return   nil\n               })\n   \n               return   err\n           },   \"x\"  )\n   \n           if   err   !=   nil   {\n               log.  Printf  (  \"Goroutine A aborted:   %v  \"  , err)\n           }   else   {\n               log.  Printf  (  \"Goroutine A succeeded\"  )\n           }\n       }()\n   \n       go   func  () { \n           defer   wg.  Done  ()\n   \n           err   :=   rdb.  Watch  (ctx,   func  (tx   *  redis.Tx)   error   {\n               _, err   :=   tx.  TxPipelined  (ctx,   func  (pipe redis.Pipeliner)   error   {\n                   pipe.  Set  (ctx,   \"x\"  ,   \"newValueFromB\"  ,   0  )\n                   return   nil\n               })\n   \n               return   err\n           },   \"x\"  )\n   \n           if   err   !=   nil   {\n               log.  Printf  (  \"Goroutine B aborted:   %v  \"  , err)\n           }   else   {\n               log.  Printf  (  \"Goroutine B succeeded\"  )\n           }\n       }()\n   \n       wg.  Wait  ()\n   \n       value, err   :=   rdb.  Get  (ctx,   \"x\"  ).  Result  ()\n       if   err   !=   nil   {\n           log.  Fatalf  (  \"Could not get x:   %v  \"  , err)\n       }\n   \n       log.  Printf  (  \"Final value of x:   %v  \"  , value)\n   }\n   /*\n   2023/09/04 00:06:19 Goroutine A aborted: redis: transaction failed\n   2023/09/04 00:06:19 Goroutine B succeeded\n   2023/09/04 00:06:19 Final value of x: newValueFromB\n   */\n  ä¾è³´ç·šæ€§ä¸€è‡´æ€§  ä»‹ç´¹ï¼š  ç·šæ€§ä¸€è‡´æ€§åœ¨ä»€éº¼æƒ…æ³ä¸‹æœ‰ç”¨ï¼Ÿè§€çœ‹é«”è‚²æ¯”è³½çš„æœ€å¾Œå¾—åˆ†å¯èƒ½æ˜¯ä¸€å€‹è¼•ç‡çš„ä¾‹å­ï¼šæ»¯å¾Œäº†å¹¾ç§’é˜çš„çµæœä¸å¤ªå¯èƒ½åœ¨é€™ç¨®æƒ…æ³ä¸‹é€ æˆä»»ä½•çœŸæ­£çš„å‚·å®³ã€‚ç„¶è€Œå°æ–¼å°‘æ•¸é ˜åŸŸï¼Œç·šæ€§ä¸€è‡´æ€§æ˜¯ç³»çµ±æ­£ç¢ºå·¥ä½œçš„ä¸€å€‹é‡è¦æ¢ä»¶ã€‚    é–å®šå’Œé ˜å°é¸èˆ‰  åœ¨å–®ä¸»è¤‡è£½æ¶æ§‹ä¸­ï¼Œåªæœ‰ä¸€å€‹é ˜å°è€…ï¼ˆä¹Ÿå«åšä¸»ç¯€é»ï¼‰è² è²¬åŸ·è¡Œæ‰€æœ‰å¯«æ“ä½œï¼Œä»¥é é˜²è…¦è£‚ç¾è±¡ï¼Œå³é¿å…å¤šå€‹ç¯€é»åŒæ™‚èªç‚ºè‡ªå·±æ˜¯é ˜å°è€…ã€‚ç‚ºäº†å”èª¿å“ªå€‹ç¯€é»å¯ä»¥æˆç‚ºé ˜å°è€…ï¼Œç³»çµ±æœƒæ¡ç”¨åˆ†æ•£å¼é–ã€‚é€™ç¨®é–å¿…é ˆè¦é”åˆ°ç·šæ€§ä¸€è‡´æ€§ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰ç¯€é»å¿…é ˆå…±è­˜åˆ°èª°æ“æœ‰é€™æŠŠé–ã€‚å”èª¿æœå‹™åƒ Apache ZooKeeper å’Œ etcd å¸¸è¢«ç”¨ä¾†å¯¦ç¾é€™æ¨£çš„åˆ†æ•£å¼é–å’Œé ˜å°è€…é¸èˆ‰ã€‚å„˜ç®¡å®ƒå€‘æä¾›äº†ç·šæ€§ä¸€è‡´æ€§çš„å¯«æ“ä½œï¼Œè®€å–æ•¸æ“šå¯èƒ½ä»æ˜¯éæ™‚çš„ï¼Œå› ç‚ºé€™äº›è®€å–æ“ä½œå¯èƒ½ç”±ä»»ä½•ä¸€å€‹å‰¯æœ¬å®Œæˆã€‚    ç´„æŸå’Œå”¯ä¸€æ€§ä¿è­‰  åœ¨ç¶­æŒé—œè¯å¼è³‡æ–™åº«ä¸­çš„  PRIMARY KEY å’Œ  UNIQUE ç´„æŸæ™‚ï¼Œé€šå¸¸æœƒä½¿ç”¨ç·šæ€§ä¸€è‡´æ€§ä¾†ç¢ºä¿æ‰€æœ‰ç¯€é»é”åˆ°å…±è­˜ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€å€‹ç”¨æˆ¶è¨»å†Šç³»çµ±ä¸­ï¼Œå¯èƒ½æœƒé¸æ“‡ä½¿ç”¨é›»éƒµä½œç‚ºå”¯ä¸€è­˜åˆ¥ã€‚å¦‚æœæ²’æœ‰ç·šæ€§ä¸€è‡´æ€§ï¼Œé€™å¯èƒ½å°è‡´è³‡æ–™ä¸ä¸€è‡´æˆ–ç”¨æˆ¶é‡è¤‡è¨»å†Šã€‚  å°æ–¼æ›´å¯¬é¬†çš„ç´„æŸï¼Œå¦‚  FOREIGN KEY ï¼Œç·šæ€§ä¸€è‡´æ€§ä¸ä¸€å®šæ˜¯å¿…é ˆçš„ã€‚ä»¥é›»å•†å¹³å°ç‚ºä¾‹ï¼Œ  Orders  è¡¨èˆ‡   Products  è¡¨æ˜¯ç·Šå¯†ç›¸é—œçš„ã€‚æ–°å•†å“ä¸€æ—¦åŠ å…¥   Products  è¡¨ï¼Œä¾¿å¯èƒ½æœƒç«‹å³åœ¨æœç´¢çµæœä¸­å‡ºç¾ï¼Œä½†ç›¸å°æ‡‰çš„è¨‚å–®è™•ç†ï¼ˆæ¶‰åŠ   Orders  è¡¨ï¼‰å¯èƒ½æœƒå› ç‚ºåº«å­˜æˆ–åƒ¹æ ¼ç­‰å› ç´ ç¨å¾®å»¶å¾Œã€‚åœ¨é€™æ¨£çš„æƒ…å¢ƒä¸‹ï¼Œæœ€çµ‚ä¸€è‡´æ€§æœƒæ˜¯ä¸€å€‹æ›´éˆæ´»çš„é¸æ“‡ã€‚    è·¨é€šé“çš„æ™‚åºä¾è³´  åœ–9-1ä¸­æœ‰ä¸€å€‹ç´°ç¯€ï¼šå¦‚æœAliceæ²’æœ‰å–Šå¾·åœ‹è´äº†Bobå°±ä¸æœƒé è…°è³‡æ–™æ˜¯èˆŠçš„ï¼Œæ˜¯å› ç‚ºé€™å€‹ç³»çµ±å¤šäº†ä¸€å€‹é¡å¤–é€šé“(é€šè©±)æ‰å°è‡´ç™¼ç¾ç·šæ€§ä¸ä¸€è‡´ã€‚  è¨ˆç®—æ©Ÿç³»çµ±ä¹Ÿæœƒå‡ºç¾é¡ä¼¼çš„æƒ…æ³ã€‚ä¾‹å¦‚ï¼Œå‡è¨­æœ‰ä¸€å€‹ç¶²ç«™ï¼Œä½¿ç”¨è€…å¯ä»¥ä¸Šå‚³ç…§ç‰‡ï¼Œä¸€å€‹å¾Œè‡ºç¨‹åºæœƒèª¿æ•´ç…§ç‰‡å¤§å°ï¼Œé™ä½è§£æåº¦ä»¥åŠ å¿«ä¸‹è¼‰é€Ÿåº¦ï¼ˆç¸®åœ–ï¼‰ã€‚è©²ç³»çµ±çš„æ¶æ§‹å’Œè³‡æ–™æµå¦‚  åœ– 9-5 æ‰€ç¤º  å‡è¨­æœ‰ä¸€å€‹ç¶²ç«™ä½¿ç”¨è€…ä¸Šå‚³ç…§ç‰‡ï¼Œå¾Œå°æœƒç¸®å°ç…§ç‰‡é™ä½è§£æåº¦å¢åŠ ä¸‹è¼‰é€Ÿåº¦(ç¸®åœ–)ã€‚     åœ– 9-5 Web ä¼ºæœå™¨å’Œå½±è±¡ç¸®æ”¾å™¨é€éæª”æ¡ˆå„²å­˜å’Œè¨Šæ¯ä½‡åˆ—é€²è¡Œé€šè¨Šï¼Œé–‹å•Ÿç«¶çˆ­æ¢ä»¶çš„å¯èƒ½æ€§ã€‚  æè¿°ï¼š  1.ä½¿ç”¨è€…ä¸Šå‚³ç…§ç‰‡(1.jpg)åˆ°Web server  2.Web serverå°‡ç…§ç‰‡(UUID.jpg)æ”¾åˆ°File storage(/temp)å„²å­˜  3.å°‡ä¸€å€‹è¨Šæ¯pushåˆ°MQ(UUID.jpg,/temp)  4.MQé€šçŸ¥Image resizerè¦ç¸®å°çš„æª”æ¡ˆä½ç½®(/temp/UUID.jpg)  5.Image resizerè®€å–File storageçš„ç…§ç‰‡(/temp/UUID.jpg)  6.Image resizerè™•ç†å®Œç¸®å°ç…§ç‰‡å¾Œä¸Šå‚³åˆ°File storage(/result/UUID.jpg)çµ¦ä½¿ç”¨è€…ä¸‹è¼‰  å¦‚æœMQæ¯”File stroageè¤‡è£½çš„æ›´å¿«ï¼Œå¯èƒ½æœƒå°è‡´æ­¥é©Ÿ5å‡ºç¾èˆŠçš„å½±åƒæˆ–æ²’æœ‰å½±åƒï¼Œå¦‚æœæŸå€‹ç¯€é»è™•ç†æ˜¯èˆŠçš„å½±åƒå‰‡å°±ç”¢ç”Ÿäº†æ°¸ä¹…æ€§çš„ä¸ä¸€è‡´ã€‚  å‡ºç¾é€™å€‹å•é¡Œæ˜¯å› ç‚ºWeb serverå’ŒImage resizerä¹‹é–“å­˜åœ¨ä¸åŒçš„é€šé“ï¼šFile storageèˆ‡MQï¼Œé€™å…©å€‹é€šé“ä¹‹é–“æœ‰å¯èƒ½ç”¢ç”Ÿç«¶çˆ­æ¢ä»¶ã€‚é€™ç¨®ç‹€æ³é¡ä¼¼Aliceèˆ‡BobèªéŸ³é€šè¨Šèˆ‡ç¶²é æ›´æ–°ä¹Ÿå­˜åœ¨äº†ç«¶çˆ­æ¢ä»¶ã€‚  ç·šæ€§ä¸€è‡´æ€§ä¸¦ä¸æ˜¯é¿å…é€™ç¨®ç«¶çˆ­æ¢ä»¶çš„å”¯ä¸€æ–¹æ³•ï¼Œåªæ˜¯é€™ç¨®æ–¹å¼æœ€å®¹æ˜“ç†è§£ï¼Œå¦‚æœå¯ä»¥é€éæ§åˆ¶MQå‰‡å¯ä»¥ä½¿ç”¨ç¬¬äº”ç« (  Read-Your-Writes Consistency )é¡ä¼¼çš„æ–¹æ³•ï¼Œä½†æ˜¯æœƒæœ‰è€Œå¤–çš„è¤‡é›œä»£åƒ¹ã€‚  ç¬¬äº”ç«   Read-Your-Writes Consistency ~~ *è£œå…¨~~  ç•¶ä½¿ç”¨è€…å¯«å…¥ä¸€å‰‡è©•è«–ï¼Œæœ‰å¯èƒ½é‡æ–°æ•´ç†é é¢ç™¼ç¾å‰›å‰›å¯«å…¥çš„è³‡æ–™ä¸è¦‹äº†(å¯èƒ½å¾å…¶ä»–ç¯€é»è®€å–ä½†æ˜¯é‚£å€‹ç¯€é»æ ¹æœ¬é‚„æ²’æœ‰è¢«Leaderæ›´æ–°)ï¼Œå› æ­¤ä½¿ç”¨è€…å›°æƒ‘äº†å¯èƒ½æœƒå†æ¬¡å¯«å…¥å‰›å‰›çš„è©•è«–ï¼Œæ‰€ä»¥è¦åœ¨å¯«å…¥Leaderçš„æ™‚å€™ç›´æ¥è®€å–ä½¿ç”¨è€…è©•è«–ï¼Œé€™æ¨£å°±å¯ä»¥é¿å…ä½¿ç”¨è€…è®€å–åˆ°å°šæœªæœ€çµ‚ä¸€è‡´æ€§çš„è³‡æ–™ã€‚     åœ– 5-3 ä½¿ç”¨è€…å¯«å…¥å¾Œå¾èˆŠå‰¯æœ¬ä¸­è®€å–è³‡æ–™ã€‚éœ€è¦å¯«å¾Œè®€ (read-after-write) çš„ä¸€è‡´æ€§ä¾†é˜²æ­¢é€™ç¨®ç•°å¸¸  æè¿°ï¼š  1.Userå¯«è©•è«–åˆ°Leaderç„¶å¾Œ  2.ä½¿ç”¨è€…å»Follower2è®€å–å‰›å‰›çš„commentsä¸¦æ²’æœ‰å‰›å‰›å¯«å…¥55555çš„è©•è«–  3.Leaderéäº†ä¸€æ®µæ™‚é–“æ‰å®Œæˆæœ€çµ‚ä¸€è‡´æ€§é€™æ™‚å€™Useræ‰èƒ½å–åˆ°çœŸå‰›å‰›å¯«å…¥çš„55555  ç¸½çµï¼š  å¯ä»¥åˆ©ç”¨å¯«å…¥Leaderå¯«å…¥å›å‚³çš„okä¾†è™•ç†è®€è‡ªå·±å¯«çš„å‡è³‡æ–™è‡³å°‘è®“ä»–ä¸è¦å»Follower2å»æŸ¥çœ‹ç™¼ç¾è³‡æ–™ä¸å°  å¯¦ç¾ç·šæ€§ä¸€è‡´çš„ç³»çµ±  ä»‹ç´¹ï¼š  ç”±æ–¼ç·šæ€§ä¸€è‡´æ€§æœ¬è³ªä¸Šæ„å‘³è‘— â€œè¡¨ç¾å¾—å¥½åƒåªæœ‰ä¸€å€‹æ•¸æ“šå‰¯æœ¬ï¼Œè€Œä¸”æ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯åŸå­çš„â€ï¼Œæ‰€ä»¥æœ€ç°¡å–®çš„ç­”æ¡ˆå°±æ˜¯ï¼ŒçœŸçš„åªç”¨ä¸€å€‹æ•¸æ“šå‰¯æœ¬ã€‚ä½†æ˜¯é€™ç¨®æ–¹æ³•ç„¡æ³•å®¹éŒ¯ï¼šå¦‚æœæŒæœ‰è©²å‰¯æœ¬çš„ç¯€é»å¤±æ•ˆï¼Œè³‡æ–™å°‡æœƒä¸Ÿå¤±ï¼Œæˆ–è€…è‡³å°‘ç„¡æ³•è¨ªå•ï¼Œç›´åˆ°ç¯€é»é‡æ–°å•Ÿå‹•ã€‚  ä½¿ç³»çµ±å®¹éŒ¯æœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯ä½¿ç”¨è¤‡è£½ã€‚æˆ‘å€‘å†ä¾†å›é¡§Â    ç¬¬äº”ç«  Â ä¸­çš„è¤‡è£½æ–¹æ³•ï¼Œä¸¦æ¯”è¼ƒå®ƒå€‘æ˜¯å¦å¯ä»¥æ»¿è¶³ç·šæ€§ä¸€è‡´æ€§ï¼š   å–®ä¸»è¤‡è£½ï¼ˆå¯èƒ½ç·šæ€§ä¸€è‡´ï¼‰  åœ¨å…·æœ‰å–®ä¸»è¤‡è£½åŠŸèƒ½çš„ç³»çµ±ä¸­ï¼ˆè«‹åƒé–± â€œ   é ˜å°è€…èˆ‡è¿½éš¨è€… â€ï¼‰ï¼Œä¸»åº«å…·æœ‰ç”¨æ–¼å¯«å…¥çš„è³‡æ–™çš„ä¸»å‰¯æœ¬ï¼Œè€Œè¿½éš¨è€…åœ¨å…¶ä»–ç¯€é»ä¸Šä¿ç•™è³‡æ–™çš„å‚™ä»½å‰¯æœ¬ã€‚å¦‚æœå¾ä¸»åº«æˆ–åŒæ­¥æ›´æ–°çš„å¾åº«è®€å–è³‡æ–™ï¼Œå®ƒå€‘Â   å¯èƒ½ï¼ˆpotentialï¼‰ Â æ˜¯ç·šæ€§ä¸€è‡´æ€§çš„   ^iv ã€‚ç„¶è€Œï¼Œå¯¦éš›ä¸Šä¸¦ä¸æ˜¯æ¯å€‹å–®ä¸»è³‡æ–™åº«éƒ½æ˜¯ç·šæ€§ä¸€è‡´æ€§çš„ï¼Œç„¡è«–æ˜¯å› ç‚ºè¨­è¨ˆçš„åŸå› ï¼ˆä¾‹å¦‚ï¼Œå› ç‚ºä½¿ç”¨äº†å¿«ç…§éš”é›¢ï¼‰é‚„æ˜¯å› ç‚ºåœ¨ä½µç™¼è™•ç†ä¸Šå­˜åœ¨éŒ¯èª¤ã€10ã€‘ã€‚  å¾ä¸»åº«è®€å–ä¾è³´ä¸€å€‹å‡è¨­ï¼Œä½ ç¢ºåˆ‡åœ°çŸ¥é“é ˜å°è€…æ˜¯èª°ã€‚æ­£å¦‚åœ¨ â€œ   çœŸç›¸ç”±å¤šæ•¸æ‰€å®šç¾© â€ ä¸­æ‰€è¨è«–çš„é‚£æ¨£ï¼Œä¸€å€‹ç¯€é»å¾ˆå¯èƒ½æœƒèªç‚ºå®ƒæ˜¯é ˜å°è€…ï¼Œè€Œäº‹å¯¦ä¸Šä¸¦éå¦‚æ­¤ â€”â€” å¦‚æœå…·æœ‰éŒ¯è¦ºçš„é ˜å°è€…ç¹¼çºŒç‚ºè«‹æ±‚æä¾›æœå‹™ï¼Œå¯èƒ½é•åç·šæ€§ä¸€è‡´æ€§ã€20ã€‘ã€‚ä½¿ç”¨éåŒæ­¥è¤‡è£½ï¼Œæ•…éšœåˆ‡æ›æ™‚ç”šè‡³å¯èƒ½æœƒä¸Ÿå¤±å·²æäº¤çš„å¯«å…¥ï¼ˆè«‹åƒé–± â€œ   è™•ç†ç¯€é»å®•æ©Ÿ â€ï¼‰ï¼Œé€™åŒæ™‚é•åäº†æ°¸çºŒæ€§å’Œç·šæ€§ä¸€è‡´æ€§ã€‚  å…±è­˜æ¼”ç®—æ³•ï¼ˆç·šæ€§ä¸€è‡´ï¼‰  ä¸€äº›åœ¨æœ¬ç« å¾Œé¢è¨è«–çš„å…±è­˜æ¼”ç®—æ³•ï¼Œèˆ‡å–®ä¸»è¤‡è£½é¡ä¼¼ã€‚ç„¶è€Œï¼Œå…±è­˜å”è­°åŒ…å«é˜²æ­¢è…¦è£‚å’Œé™³èˆŠå‰¯æœ¬çš„æªæ–½ã€‚æ­£æ˜¯ç”±æ–¼é€™äº›ç´°ç¯€ï¼Œå…±è­˜æ¼”ç®—æ³•å¯ä»¥å®‰å…¨åœ°å¯¦ç¾ç·šæ€§ä¸€è‡´æ€§å„²å­˜ã€‚ä¾‹å¦‚ï¼ŒZookeeper ã€21ã€‘å’Œ etcd ã€22ã€‘å°±æ˜¯é€™æ¨£å·¥ä½œçš„ã€‚  å¤šä¸»è¤‡è£½ï¼ˆéç·šæ€§ä¸€è‡´ï¼‰  å…·æœ‰å¤šä¸»ç¨‹å¼è¤‡è£½çš„ç³»çµ±é€šå¸¸ä¸æ˜¯ç·šæ€§ä¸€è‡´çš„ï¼Œå› ç‚ºå®ƒå€‘åŒæ™‚åœ¨å¤šå€‹ç¯€é»ä¸Šè™•ç†å¯«å…¥ï¼Œä¸¦å°‡å…¶éåŒæ­¥è¤‡è£½åˆ°å…¶ä»–ç¯€é»ã€‚å› æ­¤ï¼Œå®ƒå€‘å¯èƒ½æœƒç”¢ç”Ÿéœ€è¦è¢«è§£æ±ºçš„å¯«å…¥è¡çªï¼ˆè«‹åƒé–± â€œ   è™•ç†å¯«å…¥è¡çª â€ï¼‰ã€‚é€™ç¨®è¡çªæ˜¯å› ç‚ºç¼ºå°‘å–®ä¸€è³‡æ–™å‰¯æœ¬æ‰€å°è‡´çš„ã€‚  ç„¡ä¸»è¤‡è£½ï¼ˆä¹Ÿè¨±ä¸æ˜¯ç·šæ€§ä¸€è‡´çš„ï¼‰  å°æ–¼ç„¡ä¸»è¤‡è£½çš„ç³»çµ±ï¼ˆDynamo é¢¨æ ¼ï¼›è«‹åƒé–± â€œ   ç„¡ä¸»è¤‡è£½ â€ï¼‰ï¼Œæœ‰æ™‚å€™äººå€‘æœƒè²ç¨±é€éè¦æ±‚æ³•å®šäººæ•¸è®€å¯«(w+r>n)å¯ä»¥ç²å¾— â€œå¼·ä¸€è‡´æ€§â€ã€‚é€™å–æ±ºæ–¼æ³•å®šäººæ•¸çš„å…·é«”é…ç½®ï¼Œä»¥åŠå¼·ä¸€è‡´æ€§å¦‚ä½•å®šç¾©ï¼ˆé€šå¸¸ä¸å®Œå…¨æ­£ç¢ºï¼‰ã€‚  åŸºæ–¼æ—¥æ›†æ™‚é˜ï¼ˆä¾‹å¦‚ï¼Œåœ¨ Cassandra ä¸­ï¼›è«‹åƒé–± â€œ   ä¾è³´åŒæ­¥æ™‚é˜ â€ï¼‰çš„ â€œæœ€å¾Œå¯«å…¥å‹åˆ©â€ è¡çªè§£æ±ºæ–¹æ³•å¹¾ä¹å¯ä»¥ç¢ºå®šæ˜¯éç·šæ€§ä¸€è‡´çš„ï¼Œç”±æ–¼æ™‚é˜åå·®ï¼Œä¸èƒ½ä¿è­‰æ™‚é˜çš„æ™‚é–“æˆ³èˆ‡å¯¦éš›äº‹ä»¶é †åºä¸€è‡´ã€‚å¯¬é¬†çš„æ³•å®šäººæ•¸ï¼ˆè«‹åƒé–± â€œ   å¯¬é¬†çš„æ³•å®šäººæ•¸èˆ‡æç¤ºç§»äº¤ â€ï¼‰ä¹Ÿç ´å£äº†ç·šæ€§ä¸€è‡´çš„å¯èƒ½æ€§ã€‚å³ä½¿ä½¿ç”¨åš´æ ¼çš„æ³•å®šäººæ•¸ï¼Œéç·šæ€§ä¸€è‡´çš„è¡Œç‚ºä¹Ÿæ˜¯å¯èƒ½çš„ï¼Œå¦‚ä¸‹ç¯€æ‰€ç¤ºã€‚  ç¬¬äº”ç« ç„¡ä¸»è¤‡è£½   è£œå…¨  ä½¿ç”¨è€…æ¯æ¬¡éƒ½è®€å¯«å¤šå€‹è¤‡è£½ä»¶  è®€å¯«æ³•å®šäººæ•¸ï¼š  å…¬å¼ w+r>n è®€åŠ å¯«è¦å¤§æ–¼ç¸½çµé»  å› çˆ²n=3 w=2 r=2 æ‰€ä»¥2+2>3æˆç«‹     åœ– 5-10 æ³•å®šå¯«å…¥ï¼Œæ³•å®šè®€å–ï¼Œä¸¦åœ¨ç¯€é»ä¸­æ–·å¾Œè®€ä¿®å¾©ã€‚  æ•˜è¿°ï¼š  1.UserAå¯«å…¥N1 N2 â€˜me-new.jpgâ€™(å› ç‚ºN3æ­»æ‰äº†)  2.UserBè®€å–N1 N2 N3 çµæœç™¼ç¾N3çš„ç‰ˆæœ¬æ˜¯6å…¶ä»–æ˜¯7  3.UserBå°±å°‡N3 â€™me-new.jpgâ€™çš„versionè¨­å®šæˆ7  çµè«–ï¼š  ç„¡ä¸»è¤‡è£½å°±æ˜¯è¦å°‡ç›£ç£æ©Ÿåˆ¶ç›´æ¥å¯«åœ¨ä½¿ç”¨è€…èº«ä¸Š(æ‡‰ç”¨å±¤)è€Œä¸æ˜¯è®“è³‡æ–™åº«è‡ªå·±å»ç™¼ç¾    ç·šæ€§ä¸€è‡´æ€§å’Œæ³•å®šäººæ•¸  ä»‹ç´¹ï¼š  ç›´è¦ºä¸Šç„¡ä¸»è¤‡è£½æ¨¡å‹ä¸­åš´æ ¼çš„æ³•å®šäººæ•¸æ‡‰è©²æ˜¯ç·šæ€§ä¸€è‡´çš„ã€‚ä½†æ˜¯ç•¶å¯è®Šçš„ç¶²è·¯å»¶é²å°±èƒ½ç”¢ç”Ÿç«¶çˆ­æ¢ä»¶ã€‚     åœ– 9-6 éç·šæ€§ä¸€è‡´çš„åŸ·è¡Œï¼Œå„˜ç®¡ä½¿ç”¨äº†åš´æ ¼çš„æ³•å®šäººæ•¸  æ•˜è¿°ï¼š  w = 3 r = 2 n = 3   x=0  Writer å¯«å…¥x = 1 åˆ° N1 N2 N3(æœ€å¿«å¯«å…¥)  ReaderA è®€å–N1(X) N2(x=0) N3(x=1)  ReaderB è®€å–N1(x=0) N2(x=0) N3(X)  çµè«–ï¼š  å°±ç®—æ³•å®šäººæ•¸æ­£ç¢ºä¹Ÿç„¡æ³•ä¿è­‰ç·šæ€§ä¸€è‡´ï¼Œæ‰€ä»¥æœ€å®‰å…¨çš„åšæ³•å°±æ˜¯ç•¶ä½œç„¡ä¸»è¤‡è£½ç³»çµ±ä¸èƒ½æä¾›ç·šæ€§ä¸€è‡´  ç·šæ€§ä¸€è‡´æ€§çš„ä»£åƒ¹  ä»‹ç´¹ï¼š  ä¸€äº›è¤‡è£½æ–¹æ³•å¯ä»¥æä¾›ç·šæ€§ä¸€è‡´æ€§ï¼Œå¦ä¸€äº›è¤‡è£½æ–¹æ³•å‰‡ä¸èƒ½ï¼Œå› æ­¤æ·±å…¥åœ°æ¢è¨ç·šæ€§ä¸€è‡´æ€§çš„å„ªç¼ºé»æ˜¯å¾ˆæœ‰è¶£çš„ã€‚  æˆ‘å€‘å·²ç¶“åœ¨Â    ç¬¬äº”ç«  Â ä¸­è¨è«–äº†ä¸åŒè¤‡è£½æ–¹æ³•çš„ä¸€äº›ç”¨ä¾‹ã€‚ä¾‹å¦‚å°å¤šè³‡æ–™ä¸­å¿ƒçš„è¤‡è£½è€Œè¨€ï¼Œå¤šä¸»è¤‡è£½é€šå¸¸æ˜¯ç†æƒ³çš„é¸æ“‡ï¼ˆè«‹åƒé–± â€œ   é‹ç¶­å¤šå€‹æ•¸æ“šä¸­å¿ƒ â€ï¼‰ã€‚   åœ– 9-7 Â èªªæ˜äº†é€™ç¨®éƒ¨ç½²çš„ä¸€å€‹ä¾‹å­ã€‚     åœ– 9-7 ç¶²è·¯ä¸­æ–·è¿«ä½¿ç·šæ€§ä¸€è‡´æ€§å’Œå¯ç”¨æ€§ä¹‹é–“åšå‡ºé¸æ“‡ã€‚  æ•˜è¿°ï¼š  å¤šä¸»è³‡æ–™åº«ï¼šå…©å€‹datacenteré‚„æ˜¯å¯ä»¥å–®ç¨ä½¿ç”¨ç­‰åˆ°ç¶²è·¯æ¢å¾©å¾Œåªéœ€è¦æ’éšŠä¸¦äº¤æ›  å–®ä¸»è¤‡è£½ï¼šå¾åº«è³‡æ–™ä¸­å¿ƒç„¡æ³•å¯«å…¥ä¹Ÿä¸èƒ½åŸ·è¡Œä»»ä½•ç·šæ€§ä¸€è‡´çš„è®€å–ï¼Œä½†æ˜¯é‚„æ˜¯å¯ä»¥ä¸ä½¿ç”¨ç·šæ€§ä¸€è‡´çš„è®€å–ä½†æ˜¯è®€çš„è³‡æ–™å¯èƒ½æ˜¯èˆŠçš„ã€‚  çµè«–ï¼š  æ•´é«”ä¾†èªªä¸ç®¡å¤šä¸»å–®ä¸»éƒ½ç„¡æ³•é¿å…æ–·ç·šå¸¶ä¾†çš„ç·šæ€§ä¸ä¸€è‡´    CAPå®šç†  ä»‹ç´¹ï¼š  é€™å€‹å•é¡Œä¸åƒ…åƒ…æ˜¯å–®ä¸»è¤‡è£½å’Œå¤šä¸»è¤‡è£½çš„å¾Œæœï¼šä»»ä½•ç·šæ€§ä¸€è‡´çš„è³‡æ–™åº«éƒ½æœ‰é€™å€‹å•é¡Œï¼Œä¸ç®¡å®ƒæ˜¯å¦‚ä½•å¯¦ç¾çš„ã€‚é€™å€‹å•é¡Œä¹Ÿä¸åƒ…åƒ…ä¾·é™æ–¼å¤šè³‡æ–™ä¸­å¿ƒéƒ¨ç½²ï¼Œè€Œå¯èƒ½ç™¼ç”Ÿåœ¨ä»»ä½•ä¸å¯é çš„ç¶²è·¯ä¸Šï¼Œå³ä½¿åœ¨åŒä¸€å€‹è³‡æ–™ä¸­å¿ƒå…§ä¹Ÿæ˜¯å¦‚æ­¤ã€‚å•é¡Œé¢è‡¨çš„æ¬Šè¡¡å¦‚ä¸‹ï¼š   å¦‚æœæ‡‰ç”¨éœ€è¦ç·šæ€§ä¸€è‡´æ€§ï¼Œä¸”æŸäº›å‰¯æœ¬å› ç‚ºç¶²è·¯å•é¡Œèˆ‡å…¶ä»–å‰¯æœ¬æ–·é–‹é€£ç·šï¼Œé‚£éº¼é€™äº›å‰¯æœ¬æ‰ç·šæ™‚ä¸èƒ½è™•ç†è«‹æ±‚ã€‚è«‹æ±‚å¿…é ˆç­‰åˆ°ç¶²è·¯å•é¡Œè§£æ±ºï¼Œæˆ–ç›´æ¥è¿”å›éŒ¯èª¤ã€‚ï¼ˆç„¡è«–å“ªç¨®æ–¹å¼ï¼Œæœå‹™éƒ½Â   ä¸å¯ç”¨ ï¼‰ã€‚  å¦‚æœæ‡‰ç”¨ä¸éœ€è¦ç·šæ€§ä¸€è‡´æ€§ï¼Œé‚£éº¼æŸå€‹å‰¯æœ¬å³ä½¿èˆ‡å…¶ä»–å‰¯æœ¬æ–·é–‹é€£ç·šï¼Œä¹Ÿå¯ä»¥ç¨ç«‹è™•ç†è«‹æ±‚ï¼ˆä¾‹å¦‚å¤šä¸»è¤‡è£½ï¼‰ã€‚åœ¨é€™ç¨®æƒ…æ³ä¸‹ï¼Œæ‡‰ç”¨å¯ä»¥åœ¨ç¶²è·¯å•é¡Œè§£æ±ºå‰ä¿æŒå¯ç”¨ï¼Œä½†å…¶è¡Œç‚ºä¸æ˜¯ç·šæ€§ä¸€è‡´çš„ã€‚  é€™å…©ç¨®é¸æ“‡æœ‰æ™‚åˆ†åˆ¥ç¨±ç‚º CPï¼ˆåœ¨ç¶²è·¯åˆ†å‰²æ§½ä¸‹ä¸€è‡´ä½†ä¸å¯ç”¨ï¼‰å’Œ APï¼ˆåœ¨ç¶²è·¯åˆ†å‰²æ§½ä¸‹å¯ç”¨ä½†ä¸ä¸€è‡´ï¼‰ã€‚ ä½†æ˜¯ï¼Œé€™ç¨®åˆ†é¡æ–¹æ¡ˆå­˜åœ¨ä¸€äº›ç¼ºé™·ã€9ã€‘ï¼Œæ‰€ä»¥æœ€å¥½ä¸è¦é€™æ¨£ç”¨ã€‚  è£œå……ï¼š  ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰:  æ‰€æœ‰ç¯€é»åœ¨åŒä¸€æ™‚åˆ»å¯ä»¥çœ‹åˆ°ç›¸åŒçš„æ•¸æ“šã€‚  å¯ç”¨æ€§ï¼ˆAvailabilityï¼‰:  æ¯æ¬¡è«‹æ±‚éƒ½æœƒåœ¨æœ‰é™çš„æ™‚é–“å…§æ”¶åˆ°ä¸€å€‹æ˜ç¢ºçš„æˆåŠŸæˆ–å¤±æ•—å›æ‡‰ã€‚  åˆ†å€å®¹éŒ¯æ€§ï¼ˆPartition toleranceï¼‰:  å³ä½¿ç¶²çµ¡åˆ†å€ï¼ˆPartitionï¼‰ç™¼ç”Ÿï¼Œç³»çµ±ä¾ç„¶èƒ½æ­£å¸¸é‹ä½œã€‚  CAPå®šç†èªç‚ºå¿…é ˆè¦åœ¨ä¸€è‡´æ€§èˆ‡å¯ç”¨æ€§ä½œå‡ºæ¬Šè¡¡   å¯ä»¥æœ‰ä¸€å€‹ CPï¼ˆä¸€è‡´æ€§å’Œåˆ†å€å®¹éŒ¯æ€§ï¼‰ çš„ç³»çµ±ï¼Œæ¯”å¦‚ ZooKeeperã€‚  å¯ä»¥æœ‰ä¸€å€‹ CAï¼ˆä¸€è‡´æ€§å’Œå¯ç”¨æ€§ï¼‰ çš„ç³»çµ±ï¼Œä½†é€™åŸºæœ¬ä¸Šåªèƒ½åœ¨å–®ä¸€ç¯€é»çš„æƒ…æ³ä¸‹å¯¦ç¾ï¼Œä¸€æ—¦æ¶‰åŠåˆ°åˆ†å¸ƒå¼ï¼Œç¶²çµ¡åˆ†å€æ˜¯ç„¡æ³•é¿å…çš„ã€‚  å¯ä»¥æœ‰ä¸€å€‹ APï¼ˆå¯ç”¨æ€§å’Œåˆ†å€å®¹éŒ¯æ€§ï¼‰ çš„ç³»çµ±ï¼Œæ¯”å¦‚ Cassandra æˆ– Couchbaseã€‚    ç·šæ€§ä¸€è‡´æ€§å’Œç¶²è·¯å»¶é²  1.é€£cpuä¸Šçš„è¨˜æ†¶é«”éƒ½ä¸ä¸€å®šæ˜¯ç·šæ€§ä¸€è‡´æ€§çš„ï¼š  å¦‚æœä¸€å€‹ CPU æ ¸ä¸ŠåŸ·è¡Œçš„åŸ·è¡Œç·’å¯«å…¥æŸå€‹è¨˜æ†¶é«”åœ°å€ï¼Œè€Œå¦ä¸€å€‹ CPU æ ¸ä¸ŠåŸ·è¡Œçš„åŸ·è¡Œç·’ä¸ä¹…ä¹‹å¾Œè®€å–ç›¸åŒçš„åœ°å€ï¼Œä¸¦æ²’æœ‰ä¿è­‰ä¸€å®šèƒ½è®€åˆ°ç¬¬ä¸€å€‹åŸ·è¡Œç·’å¯«å…¥çš„å€¼ï¼ˆé™¤éä½¿ç”¨äº† è¨˜æ†¶é«”å±éšœï¼ˆmemory barrierï¼‰ æˆ– åœæ¬„ï¼ˆfenceï¼‰ã€44ã€‘ï¼‰ã€‚  è€Œä¸”CPUæ ¸å¿ƒèˆ‡æ ¸å¿ƒä¹‹é–“çš„é€šè¨ŠåŸºæœ¬éƒ½æ˜¯æ­£å¸¸çš„ç‹€æ³ä¸‹é‚„æœ‰å¯èƒ½ç™¼ç”Ÿç·šæ€§ä¸ä¸€è‡´æ€§ã€‚  2.ä»¥CPUä¾†èªªæ˜¯ç‚ºäº†æé«˜æ•ˆèƒ½è€Œé¸æ“‡çŠ§ç‰²ç·šæ€§ä¸€è‡´æ€§è€Œä¸æ˜¯ç‚ºäº†å®¹éŒ¯  3.å¯èƒ½æ‰¾ä¸åˆ°é«˜æ•ˆä¸¦ä¸”ç·šæ€§ä¸€è‡´æ€§çš„ç³»çµ±  9.3 é †åºä¿è­‰  ä»‹ç´¹ï¼š  é€™å°ç¯€ä¸»è¦è¦æ¢è¨åœ–9-4é †åº   åœ¨Â    ç¬¬äº”ç«  Â ä¸­æˆ‘å€‘çœ‹åˆ°ï¼Œé ˜å°è€…åœ¨å–®ä¸»è¤‡è£½ä¸­çš„ä¸»è¦ç›®çš„å°±æ˜¯ï¼Œåœ¨è¤‡è£½æ—¥èªŒä¸­ç¢ºå®šÂ   å¯«å…¥é †åºï¼ˆorder of writeï¼‰ â€”â€” ä¹Ÿå°±æ˜¯å¾åº«æ‡‰ç”¨é€™äº›å¯«å…¥çš„é †åºã€‚å¦‚æœä¸å­˜åœ¨ä¸€å€‹é ˜å°è€…ï¼Œå‰‡ä½µç™¼æ“ä½œå¯èƒ½å°è‡´è¡çªï¼ˆè«‹åƒé–± â€œ   è™•ç†å¯«å…¥è¡çª â€ï¼‰ã€‚  åœ¨Â    ç¬¬ä¸ƒç«  Â ä¸­è¨è«–çš„Â   å¯åºåˆ—åŒ– ï¼Œæ˜¯é—œæ–¼äº‹å‹™è¡¨ç¾çš„åƒæŒ‰Â   æŸç¨®å…ˆå¾Œé †åºï¼ˆsome sequential orderï¼‰ Â åŸ·è¡Œçš„ä¿è­‰ã€‚å®ƒå¯ä»¥å­—é¢æ„ç¾©ä¸Šåœ°ä»¥Â   åºåˆ—é †åºï¼ˆserial orderï¼‰ Â åŸ·è¡Œäº‹å‹™ä¾†å¯¦ç¾ï¼Œæˆ–è€…å…è¨±ä¸¦è¡ŒåŸ·è¡Œï¼Œä½†åŒæ™‚é˜²æ­¢åºåˆ—åŒ–è¡çªä¾†å¯¦ç¾ï¼ˆé€éé–æˆ–ä¸­æ­¢äº‹å‹™ï¼‰ã€‚  åœ¨Â    ç¬¬å…«ç«  Â è¨è«–éçš„åœ¨åˆ†æ•£å¼ç³»çµ±ä¸­ä½¿ç”¨æ™‚é–“æˆ³å’Œæ™‚é˜ï¼ˆè«‹åƒé–± â€œ   ä¾è³´åŒæ­¥æ™‚é˜ â€ï¼‰æ˜¯å¦ä¸€ç¨®å°‡é †åºå¼•å…¥ç„¡åºä¸–ç•Œçš„å˜—è©¦ï¼Œä¾‹å¦‚ï¼Œç¢ºå®šå…©å€‹å¯«å…¥æ“ä½œå“ªä¸€å€‹æ›´æ™šç™¼ç”Ÿã€‚    é †åºèˆ‡å› æœé—œä¿‚ (å› æœä¸€è‡´æ€§ causally consistent)   5-5  ä¸€è‡´å­—é¦–è®€ï¼šæœ‰å› æœé—œä¿‚     åœ– 5-5 å¦‚æœæŸäº›åˆ†å‰²æ§½çš„è¤‡è£½é€Ÿåº¦æ…¢æ–¼å…¶ä»–åˆ†å‰²æ§½ï¼Œé‚£éº¼è§€å¯Ÿè€…å¯èƒ½æœƒåœ¨çœ‹åˆ°å•é¡Œä¹‹å‰å…ˆçœ‹åˆ°ç­”æ¡ˆã€‚  é€šå¸¸ï¼Œå•é¡Œå’Œç­”æ¡ˆä¹‹é–“å­˜åœ¨æ˜ç¢ºçš„å› æœé—œä¿‚ï¼Œå› ç‚ºè¦å›ç­”ä¸€å€‹å•é¡Œï¼Œé¦–å…ˆè¦æœ‰å•é¡Œçš„å­˜åœ¨ã€‚  å› æœé—œä¿‚ä¾‹å­ï¼š  åœ¨ä¸€å€‹ç·šä¸Šå•ç­”ç¤¾å€ï¼Œé€šå¸¸éœ€è¦å…ˆæœ‰äººæå‡ºå•é¡Œï¼Œç„¶å¾Œå…¶ä»–äººæ‰èƒ½çœ‹åˆ°ä¸¦å›ç­”é€™å€‹å•é¡Œã€‚å¦‚æœç”±æ–¼ç¶²çµ¡å»¶é²ï¼Œæœ‰äººå…ˆçœ‹åˆ°äº†å›ç­”è€Œå¾Œçœ‹åˆ°å•é¡Œï¼Œé€™é•åäº†æ­£å¸¸çš„å› æœé †åºã€‚  5-9  è¤‡è£½å’Œç¶²è·¯å»¶é²ï¼šæœ‰å› æœé—œä¿‚     åœ– 5-9 ä½¿ç”¨å¤šä¸»è¤‡è£½æ™‚ï¼Œå¯«å…¥å¯èƒ½æœƒä»¥éŒ¯èª¤çš„é †åºåˆ°é”æŸäº›å‰¯æœ¬ã€‚  åœ¨é€™å€‹æƒ…å¢ƒä¸‹ï¼Œæ˜ç¢ºçš„å› æœé—œä¿‚æ˜¯ï¼Œä¸€å€‹è¨˜éŒ„å¿…é ˆå…ˆè¢«å‰µå»ºï¼Œç„¶å¾Œæ‰èƒ½è¢«æ›´æ–°ã€‚  å› æœé—œä¿‚ä¾‹å­ï¼š  å¦‚æœåœ¨å®¶ä¸­çš„å¤šå°é›»è…¦ä¸ŠåŒæ­¥æ–‡ä»¶ï¼Œé€šå¸¸å¿…é ˆå…ˆåœ¨ä¸€å°é›»è…¦ä¸Šå‰µå»ºæ–‡ä»¶ï¼Œç„¶å¾Œå®ƒæ‰èƒ½è¢«åŒæ­¥åˆ°å…¶ä»–é›»è…¦ä¸Šã€‚å¦‚æœç”±æ–¼ç¶²çµ¡å»¶é²ï¼Œæ–‡ä»¶çš„æ›´æ–°åœ¨æŸå°é›»è…¦ä¸Šå…ˆæ–¼æ–‡ä»¶çš„å‰µå»ºè¢«æ¥æ”¶åˆ°ï¼Œé€™é•åäº†æ­£å¸¸çš„å› æœé †åºã€‚   æª¢æ¸¬ä½µç™¼å¯«å…¥ï¼šæœ‰å¯èƒ½æœ‰å› æœé—œä¿‚     åœ– 5-12 ä½µç™¼å¯«å…¥ Dynamo é¢¨æ ¼çš„è³‡æ–™å„²å­˜ï¼šæ²’æœ‰æ˜ç¢ºå®šç¾©çš„é †åºã€‚  åœ¨é€™å€‹æƒ…å¢ƒä¸‹ï¼Œå¯èƒ½å­˜åœ¨å› æœé—œä¿‚ï¼Œä¾‹å¦‚ï¼Œå¦‚æœæ“ä½œAå½±éŸ¿äº†æ“ä½œBçš„çµæœï¼Œé‚£éº¼å°±å­˜åœ¨å› æœé—œä¿‚ã€‚ä½†å¦‚æœAå’ŒBæ˜¯ç¨ç«‹ä¸¦è¡Œçš„ï¼Œå‰‡ä¸å­˜åœ¨å› æœé—œä¿‚ã€‚  å› æœé—œä¿‚ä¾‹å­ï¼š  åœ¨è¶…å¸‚çµè³¬æ™‚ï¼Œå¦‚æœå…©å€‹äººåŒæ™‚åˆ°é”çµè³¬å°ï¼Œéœ€è¦ç¢ºå®šå“ªå€‹äººæ‡‰è©²å…ˆçµè³¬ä»¥ä¿æŒç§©åºã€‚é€™ç¨®é †åºæ±ºå®šäº†èª°å…ˆèª°å¾Œï¼Œå­˜åœ¨å› æœé—œä¿‚ã€‚   äº‹å‹™å¿«ç…§éš”é›¢(  å¿«ç…§éš”é›¢å’Œå¯é‡è¤‡è®€ )ï¼šæœ‰å› æœé—œä¿‚     åœ– 7-6 è®€å–åå·®ï¼šAlice è§€å¯Ÿè³‡æ–™åº«è™•æ–¼ä¸ä¸€è‡´çš„ç‹€æ…‹  ä¸å¯é‡è¤‡è®€ï¼Œé™¤éçŸ¥é“å› æœé—œä¿‚è¦ä¸ç„¶é‡è¤‡è®€å–æœƒç”¢ç”Ÿä¸ä¸€è‡´  å› æœé—œä¿‚ä¾‹å­ï¼š  æŸ¥çœ‹ç¤¾äº¤åª’é«”çš„æ™‚å€™çœ‹åˆ°äº†ä¸€å€‹å›è¦†ï¼Œç†æ‰€ç•¶ç„¶çš„ï¼Œä½ æœƒæœŸæœ›èƒ½å¤ çœ‹åˆ°è¢«å›è¦†çš„åŸå§‹å¸–å­ï¼Œå› ç‚ºå›è¦†ï¼ˆæ•ˆæœï¼‰ä¾è³´æ–¼åŸå§‹å¸–å­ï¼ˆåŸå› ï¼‰ã€‚   å¯«åå·®(  å¯«å…¥åå·®èˆ‡å¹»è®€ ):å¯èƒ½æœ‰å› æœé—œä¿‚     åœ– 7-8 å¯«å…¥åå·®å°è‡´æ‡‰ç”¨ç¨‹å¼éŒ¯èª¤çš„ç¤ºä¾‹  Aliceä¾è³´Bobçš„on_callç‹€æ…‹ï¼ŒBobä¹Ÿä¾è³´Aliceçš„on_callç‹€æ…‹  å¯«åå·®çš„æƒ…å¢ƒä¸‹å¯èƒ½å­˜åœ¨å› æœé—œä¿‚ï¼Œä¾‹å¦‚ï¼ŒæŸå€‹äº‹å‹™çš„çµæœå¯èƒ½ä¾è³´æ–¼å¦ä¸€å€‹äº‹å‹™çš„ç‹€æ…‹ã€‚  å› æœé—œä¿‚ä¾‹å­ï¼š  åœ¨ä¸€å€‹å¿™ç¢Œçš„é¤å»³ï¼Œå¦‚æœå…©å€‹æœå‹™å“¡åŒæ™‚å»æ¶ä¸€å€‹ç©ºå‡ºä¾†çš„æ¡Œå­çµ¦ç­‰å¾…çš„å®¢äººï¼Œä½†ç”±æ–¼æ²’æœ‰åŠæ™‚é€šä¿¡ï¼Œå¯èƒ½æœƒå°è‡´å…©çµ„å®¢äººè¢«å®‰æ’åˆ°åŒä¸€å€‹æ¡Œå­ï¼Œé€™æ˜¯å› æœé—œä¿‚ç®¡ç†çš„å¤±æ•—ã€‚   å› æœä¾è³´å’Œæ™‚åº(Alice & Bob çœ‹çƒè³½)ï¼šæœ‰å› æœé—œä¿‚     åœ– 9-1 é€™å€‹ç³»çµ±æ˜¯éç·šæ€§ä¸€è‡´çš„ï¼Œå°è‡´äº†çƒè¿·çš„å›°æƒ‘  åœ¨é€™å€‹æƒ…å¢ƒä¸‹ï¼Œå­˜åœ¨æ˜ç¢ºçš„å› æœé—œä¿‚ï¼Œæ¯”å¦‚é€²çƒï¼ˆåŸå› ï¼‰å’Œçƒå“¡æ…¶ç¥ï¼ˆæ•ˆæœï¼‰ã€‚  å› æœé—œä¿‚ä¾‹å­ï¼š  åœ¨è§€çœ‹è¶³çƒæ¯”è³½æ™‚ï¼Œçƒå“¡çš„æ…¶ç¥æ˜¯ä¾è³´æ–¼å…ˆå‰çš„é€²çƒäº‹ä»¶ã€‚é€²çƒæ˜¯åŸå› ï¼Œçƒå“¡çš„æ…¶ç¥æ˜¯æ•ˆæœï¼ŒäºŒè€…ä¹‹é–“å­˜åœ¨æ˜ç¢ºçš„å› æœé—œä¿‚ã€‚  çµè«–ï¼š    å› æœä¸€è‡´æ€§ ï¼šé‡è¦–æ“ä½œä¹‹é–“çš„å› æœé—œä¿‚ã€‚å¦‚æœæ“ä½œAåœ¨å› æœä¸Šå…ˆæ–¼æ“ä½œBï¼Œé‚£éº¼ç³»çµ±æ‡‰ä¿è­‰æ‰€æœ‰ç¯€é»ä¸ŠAçš„æ•ˆæœéƒ½æœƒåœ¨Bçš„æ•ˆæœä¹‹å‰è¢«çœ‹åˆ°ã€‚é€™ä½¿å¾—ç³»çµ±èƒ½å¤ ä¿ç•™æ“ä½œçš„è‡ªç„¶é †åºï¼Œä½†ä¸ä¿è­‰å…¨å±€çš„æ“ä½œé †åºã€‚   ç·šæ€§ä¸€è‡´æ€§ ï¼šè¦æ±‚ç³»çµ±ä¸­çš„æ‰€æœ‰æ“ä½œéƒ½èƒ½å¤ æŒ‰ç…§æŸä¸€å…¨å±€é †åºï¼ˆé€šå¸¸æ˜¯æ™‚é–“é †åºï¼‰ä¾†å‘ˆç¾ï¼Œä½¿å¾—æ‰€æœ‰æ“ä½œçœ‹èµ·ä¾†å°±åƒæ˜¯åœ¨ä¸€å€‹å–®ä¸€çš„ã€åŸå­çš„ã€å…¨å±€é †åºçš„æ™‚é–“é»ä¸Šç™¼ç”Ÿçš„ã€‚é€™æä¾›äº†ä¸€å€‹éå¸¸å¼·çš„ä¸€è‡´æ€§ä¿è­‰ï¼Œä½†å¯èƒ½æœƒé™ä½ç³»çµ±çš„æ€§èƒ½å’Œå¯ç”¨æ€§ã€‚    å› æœé †åºä¸æ˜¯å…¨åºçš„   å…¨åº(total order)ï¼š Â å…è¨±ä»»æ„å…©å€‹å…ƒç´ é€²è¡Œæ¯”è¼ƒï¼Œæ‰€ä»¥å¦‚æœæœ‰å…©å€‹å…ƒç´ ï¼Œä½ ç¸½æ˜¯å¯ä»¥èªªå‡ºå“ªå€‹æ›´å¤§ï¼Œå“ªå€‹æ›´å°ã€‚ä¾‹å¦‚ï¼Œè‡ªç„¶æ•¸é›†æ˜¯å…¨åºçš„ï¼šçµ¦å®šå…©å€‹è‡ªç„¶æ•¸ï¼Œæ¯”å¦‚èªª 5 å’Œ 13ï¼Œé‚£éº¼ä½ å¯ä»¥çŸ¥é“ï¼Œ13 å¤§æ–¼ 5ã€‚  ååº(partially ordered)ï¼šè€ƒæ…®ä¸‰å€‹é›†åˆï¼šA={1,2}ï¼ŒB={2,3}ï¼Œå’ŒC={1,2,3}ã€‚åœ¨é€™è£¡ï¼ŒAå’ŒBæ˜¯ç„¡æ³•æ¯”è¼ƒçš„ï¼Œå› ç‚ºå®ƒå€‘ä¹‹é–“æ²’æœ‰å­é›†é—œä¿‚ã€‚ä½†æ˜¯ï¼ŒAå’ŒCå¯ä»¥æ¯”è¼ƒï¼Œå› ç‚ºAæ˜¯Cçš„å­é›†ï¼Œè¨˜ä½œAâŠ‚Cã€‚  å…¨åºå’Œååºä¹‹é–“çš„å·®ç•°åæ˜ åœ¨ä¸åŒçš„è³‡æ–™åº«ä¸€è‡´æ€§æ¨¡å‹ä¸­ï¼š   ç·šæ€§ä¸€è‡´æ€§  ç·šæ€§ä¸€è‡´çš„ç³»çµ±ä¸­ï¼Œæ“ä½œæ˜¯å…¨åºçš„ï¼šå¦‚æœç³»çµ±è¡¨ç¾çš„å°±å¥½åƒåªæœ‰ä¸€å€‹æ•¸æ“šå‰¯æœ¬ï¼Œä¸¦ä¸”æ‰€æœ‰æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ï¼Œé€™æ„å‘³è‘—å°ä»»ä½•å…©å€‹æ“ä½œï¼Œæˆ‘å€‘ç¸½æ˜¯èƒ½åˆ¤å®šå“ªå€‹æ“ä½œå…ˆç™¼ç”Ÿã€‚é€™å€‹å…¨åºåœ¨Â    åœ– 9-4 Â ä¸­ä»¥æ™‚é–“ç·šè¡¨ç¤ºã€‚  å› æœæ€§  æˆ‘å€‘èªªéï¼Œå¦‚æœå…©å€‹æ“ä½œéƒ½æ²’æœ‰åœ¨å½¼æ­¤Â   ä¹‹å‰ç™¼ç”Ÿ ï¼Œé‚£éº¼é€™å…©å€‹æ“ä½œæ˜¯ä½µç™¼çš„ï¼ˆè«‹åƒé–±Â    â€œæ­¤å‰ç™¼ç”Ÿâ€ çš„é—œä¿‚å’Œä½µç™¼ ï¼‰ã€‚æ›å¥è©±èªªï¼Œå¦‚æœå…©å€‹äº‹ä»¶æ˜¯å› æœç›¸é—œçš„ï¼ˆä¸€å€‹ç™¼ç”Ÿåœ¨å¦ä¸€å€‹äº‹ä»¶ä¹‹å‰ï¼‰ï¼Œå‰‡å®ƒå€‘ä¹‹é–“æ˜¯æœ‰åºçš„ï¼Œä½†å¦‚æœå®ƒå€‘æ˜¯ä½µç™¼çš„ï¼Œå‰‡å®ƒå€‘ä¹‹é–“çš„é †åºæ˜¯ç„¡æ³•æ¯”è¼ƒçš„ã€‚é€™æ„å‘³è‘—å› æœé—œä¿‚å®šç¾©äº†ä¸€å€‹ååºï¼Œè€Œä¸æ˜¯ä¸€å€‹å…¨åºï¼šä¸€äº›æ“ä½œç›¸äº’ä¹‹é–“æ˜¯æœ‰é †åºçš„ï¼Œä½†æœ‰äº›å‰‡æ˜¯ç„¡æ³•æ¯”è¼ƒçš„ã€‚ä½µç™¼æ˜¯ååºçš„     graph   TD  ;\n           å…¨åº\n       A  [  ä»»å‹™ A  ]  ;\n       B  [  ä»»å‹™ B  ]  ;\n       C  [  ä»»å‹™ C  ]  ;\n       D  [  ä»»å‹™ D  ]  ;\n       E  [  ä»»å‹™ E  ]  ;\n       å…¨åº   -->   A  ;\n       A   -->   B  ;\n       B   -->   C  ;\n       C   -->   D  ;\n       D   -->   E  ;\n   \n           ååº\n           A1  [  ä»»å‹™ A  ]  ;\n       B1  [  ä»»å‹™ B  ]  ;\n       C1  [  ä»»å‹™ C  ]  ;\n       D1  [  ä»»å‹™ D  ]  ;\n       E1  [  ä»»å‹™ E  ]  ;\n       F1  [  ä»»å‹™ F  ]  ;\n       \n           ååº  -->  A1  ;\n       A1   -->   B1  ;\n       B1   -->   D1  ;\n       A1   -->   C1  ;\n       C1   -->   E1  ;\n       D1   -->   F1  ;\n       E1   -->   F1  ;\n  å¦‚æœä½ ç†Ÿæ‚‰åƒ Git é€™æ¨£çš„åˆ†æ•£å¼ç‰ˆæœ¬æ§åˆ¶ç³»çµ±ï¼Œé‚£éº¼å…¶ç‰ˆæœ¬æ­·å²èˆ‡å› æœé—œä¿‚åœ–æ¥µå…¶ç›¸ä¼¼ã€‚é€šå¸¸ï¼Œä¸€å€‹Â   æäº¤ï¼ˆCommitï¼‰ Â ç™¼ç”Ÿåœ¨å¦ä¸€å€‹æäº¤ä¹‹å¾Œï¼Œåœ¨ä¸€æ¢ç›´ç·šä¸Šã€‚ä½†æ˜¯æœ‰æ™‚ä½ æœƒé‡åˆ°åˆ†æ”¯ï¼ˆç•¶å¤šå€‹äººåŒæ™‚åœ¨ä¸€å€‹å°ˆæ¡ˆä¸Šå·¥ä½œæ™‚ï¼‰ï¼Œ  åˆä½µï¼ˆMergeï¼‰ Â æœƒåœ¨é€™äº›ä½µç™¼å»ºç«‹çš„æäº¤ç›¸èåˆæ™‚å»ºç«‹ã€‚å› ç‚ºçŸ¥é“developç™¼ç”Ÿéä»€éº¼äº‹æƒ…å†å»çœ‹5-22e4a46æ‰çŸ¥é“æ˜¯å…¨åºçš„     gitGraph  :\n   options\n   {\n       \"nodeSpacing\": 150,\n       \"nodeRadius\": 10\n   }\n   end\n   commit\n   commit\n   branch   develop\n   checkout   develop\n   commit\n   commit\n   checkout   main\n   merge   develop\n   commit\n   commit\n    ç·šæ€§ä¸€è‡´æ€§å¼·æ–¼å› æœä¸€è‡´æ€§  ç·šæ€§ä¸€è‡´æ€§éš±å«äº†å› æœé—œä¿‚ï¼Œä¹Ÿå°±æ˜¯èªªï¼Œä»»ä½•ç·šæ€§ä¸€è‡´çš„ç³»çµ±éƒ½èƒ½æ­£ç¢ºåœ°ä¿æŒå› æœæ€§ï¼Œå³ä½¿åœ¨æœ‰å¤šå€‹é€šè¨Šé€šé“çš„æƒ…æ³ä¸‹ä¹Ÿèƒ½è‡ªå‹•ä¿è­‰ï¼Œç„¡éœ€é€²è¡Œç‰¹æ®Šçš„æ“ä½œå¦‚å‚³éæ™‚é–“æˆ³ã€‚é€™ç¨®éš±å«çš„é—œä¿‚ä½¿å¾—ç·šæ€§ä¸€è‡´æ€§æˆç‚ºäº†ä¸€å€‹éå¸¸å¼·å¤§è€Œåˆç›´è§€çš„ä¸€è‡´æ€§æ¨¡å‹ã€‚  è¨±å¤šåˆ†æ•£å¼ç³»çµ±çœ‹èµ·ä¾†éœ€è¦ç·šæ€§ä¸€è‡´æ€§ä½†å¯¦éš›ä¸Šåªè¦ä¿è­‰ç¶²è·¯ä¸å»¶é²å…¶å¯¦ä½¿ç”¨å› æœä¸€è‡´æ€§å°±ç®—æ˜¯æœ€å¼·çš„ä¸€è‡´æ€§æ¨¡å‹ã€‚  æ•ç²å› æœé—œä¿‚  ç‚ºäº†ä¿æŒå› æœæ€§ï¼Œç³»çµ±å¿…é ˆèƒ½å¤ è­˜åˆ¥æ“ä½œé–“çš„â€œç™¼ç”Ÿåœ¨å…ˆå‰â€ï¼ˆhappened beforeï¼‰é—œä¿‚ã€‚é€™å½¢æˆäº†ä¸€ç¨®ååºï¼ˆpartial orderingï¼‰é—œä¿‚ï¼Œæ„å‘³è‘—åœ¨æŸäº›æƒ…æ³ä¸‹ï¼Œå¯ä»¥æ˜ç¢ºåœ°èªªä¸€å€‹æ“ä½œç™¼ç”Ÿåœ¨å¦ä¸€å€‹æ“ä½œä¹‹å‰ï¼Œè€Œåœ¨å…¶ä»–æƒ…æ³ä¸‹ï¼ˆå¦‚ä½µç™¼æ“ä½œï¼‰ï¼Œå‰‡ç„¡æ³•åšå‡ºæ­¤åˆ¤å®šã€‚  ç‚ºäº†æ˜ç¢ºå› æœä¾è³´ï¼Œéœ€è¦æœ‰æ–¹å¼æè¿°ç³»çµ±ä¸­å„ç¯€é»çš„â€œçŸ¥è­˜â€ã€‚é€™ç¨®â€œçŸ¥è­˜â€æ˜¯æŒ‡ç¯€é»åœ¨é€²è¡ŒæŸäº›æ“ä½œæ™‚ï¼Œå°ç³»çµ±ä¸­å…¶ä»–äº‹ä»¶çš„äº†è§£ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€å€‹ç¯€é»åœ¨ç™¼å‡ºå¯«å…¥Yçš„è«‹æ±‚æ™‚å·²ç¶“çœ‹åˆ°äº†Xçš„å€¼ï¼Œé‚£éº¼å°±å¯èƒ½å­˜åœ¨ä¸€å€‹å› æœé—œä¿‚ï¼Œè¡¨ç¤ºXæ˜¯Yç™¼ç”Ÿçš„åŸå› ã€‚é€™ç¨®æƒ…æ³é¡ä¼¼æ–¼åœ¨æ¬ºè©æŒ‡æ§çš„åˆ‘äº‹èª¿æŸ¥ä¸­å¸¸è¦‹çš„å•é¡Œï¼Œä¾‹å¦‚åœ¨åšå‡ºæŸå€‹æ±ºå®šYæ™‚ï¼ŒCEOæ˜¯å¦çŸ¥é“äº†Xçš„æƒ…æ³ã€‚åœ¨é€™ç¨®æƒ…æ³ä¸‹ï¼ŒXå’ŒYä¹‹é–“çš„å› æœé—œä¿‚æ˜¯åŸºæ–¼ç¯€é»ï¼ˆæˆ–åœ¨åˆ‘äº‹èª¿æŸ¥ä¸­çš„CEOï¼‰åœ¨åŸ·è¡Œæ“ä½œæ™‚æ‰€å…·æœ‰çš„çŸ¥è­˜ã€‚é€™ç¨®åˆ†ææ–¹å¼å¯ä»¥å¹«åŠ©ç¢ºå®šäº‹ä»¶ä¹‹é–“çš„å› æœä¾è³´ï¼Œä¸¦ä¸”å°æ–¼ç¶­æŒç³»çµ±çš„å› æœä¸€è‡´æ€§è‡³é—œé‡è¦ã€‚  ç‚ºäº†ç¢ºå®šå› æœé †åºï¼Œè³‡æ–™åº«éœ€è¦çŸ¥é“æ‡‰ç”¨è®€å–äº†å“ªå€‹ç‰ˆæœ¬çš„è³‡æ–™ã€‚é€™å°±æ˜¯ç‚ºä»€éº¼åœ¨Â    åœ– 5-13 Â ä¸­ï¼Œä¾†è‡ªå…ˆå‰æ“ä½œçš„ç‰ˆæœ¬è™Ÿåœ¨å¯«å…¥æ™‚è¢«å‚³å›åˆ°è³‡æ–™åº«çš„åŸå› ã€‚åœ¨ SSI çš„è¡çªæª¢æ¸¬ä¸­æœƒå‡ºç¾é¡ä¼¼çš„æƒ³æ³•ï¼Œå¦‚ â€œ   å¯åºåˆ—åŒ–å¿«ç…§éš”é›¢ â€ ä¸­æ‰€è¿°ï¼šç•¶äº‹å‹™è¦æäº¤æ™‚ï¼Œè³‡æ–™åº«å°‡æª¢æŸ¥å®ƒæ‰€è®€å–çš„è³‡æ–™ç‰ˆæœ¬æ˜¯å¦ä»ç„¶æ˜¯æœ€æ–°çš„ã€‚ç‚ºæ­¤ï¼Œè³‡æ–™åº«è·Ÿè¹¤å“ªäº›è³‡æ–™è¢«å“ªäº›äº‹å‹™æ‰€è®€å–ã€‚  çµè«–ï¼š  æˆ‘å€‘å¯ä»¥å¾è³‡æ–™åº«çš„ç‰ˆæœ¬â€œçŸ¥è­˜é»â€ä¾†æ•ç²å› æœé—œä¿‚ï¼Œç”±æ–¼é€™å€‹çŸ¥è­˜æ˜¯æ‰¾å‡ºå› æœçš„é—œéµæ‰€ä»¥å¯èƒ½æœƒè£½é€ å‡ºè¡çªè®“å¤šç¯€é»ç³»çµ±ä¿æŒä¸€è‡´æ€§    åºåˆ—è™Ÿé †åº  é›–ç„¶å› æœæ˜¯ä¸€å€‹é‡è¦çš„ç†è«–æ¦‚å¿µï¼Œä½†æ˜¯è¦è·Ÿè¹¤æ‰€æœ‰çš„å› æœé—œä¿‚æ˜¯ä¸åˆ‡å¯¦éš›çš„ï¼Œé‚„å¥½æœ‰ä¸€å€‹æ›´å¥½çš„æ–¹æ³•ï¼Œæˆ‘å€‘å¯ä»¥ä½¿ç”¨Â   åºåˆ—è™Ÿï¼ˆsequence numberï¼‰ Â æˆ–Â   æ™‚é–“æˆ³ï¼ˆtimestampï¼‰ Â ä¾†æ’åºäº‹ä»¶ï¼Œæ™‚é–“æˆ³ä¸ä¸€å®šè¦ä¾†è‡ªæ–¼æ—¥æ›†æ™‚é˜ï¼Œå¯ä»¥ç”¨ä½¿ç”¨é‚è¼¯æ™‚é˜ï¼Œå› ç‚ºæ—¥æ›†æ™‚é˜æœƒæœ‰â€œä¸å¯é æ™‚é˜â€å•é¡Œï¼Œå…¸å‹çš„é‚è¼¯æ™‚é˜å¯¦ç¾æ˜¯ä½¿ç”¨æ¯æ¬¡æ“ä½œè‡ªå¢è¨ˆæ•¸å™¨ã€‚  ä½¿ç”¨è‡ªå¢è¨ˆæ•¸å™¨å¯ä»¥æä¾›æ¯”è¼ƒå€¼è¶Šå¤§çš„å¾Œç™¼ç”Ÿï¼Œæˆ‘å€‘å¯ä»¥ä½¿ç”¨å› æœä¸€è‡´çš„å…¨åºä¾†ç”¢ç”Ÿåºåˆ—è™Ÿï¼Œé€™æ¨£å°±å¯ä»¥ç”¢ç”Ÿä¸€å€‹æ¯”å› æœæ€§æ›´åš´æ ¼çš„é †åºã€‚  ä¸€å€‹å› æœé—œä¿‚ä¸ä¸€è‡´çš„å…¨åºå¾ˆå®¹æ˜“å»ºç«‹ä½†æ˜¯æ˜¯åƒåœ¾ï¼Œä¾‹å¦‚æˆ‘å€‘éš¨æ©Ÿç”¢ç”Ÿäº†ä¸€å€‹UUIDä½†æ˜¯é€™å€‹åºåˆ—æ ¹æœ¬æ²’è¾¦æ³•ç‚ºæˆ‘å€‘æä¾›æ“ä½œçš„å…ˆå¾Œé †åºï¼Œæˆ–è€…æ˜¯å¦è§€å¯Ÿçš„å‡ºä¾†æ“ä½œæ˜¯å¦æ˜¯ä½µç™¼çš„ã€‚  åœ¨å–®ä¸»è¤‡è£½çš„è³‡æ–™åº«ä¸­ï¼Œè¤‡è£½æ—¥èªŒå®šç¾©å› æœä¸€è‡´çš„å¯«æ“ä½œï¼Œä¸»åº«å¯ä»¥ç‚ºæ¯å€‹å‹•ä½œæ¡ç”¨è‡ªå¢è¨ˆæ•¸ï¼Œè€Œå¾æ¯å€‹æ“ä½œåˆ†é…ä¸€å€‹éå¢çš„åºåˆ—è™Ÿã€‚å¦‚æœä¸€å€‹å¾åº«æŒ‰ç…§è¤‡è£½æ—¥èªŒçš„é †åºä¾†å¯«å…¥ï¼Œé€™æ¨£ä¸€ä¾†å¾åº«çš„ç‹€æ…‹æœƒå§‹çµ‚æ˜¯å› æœä¸€è‡´çš„ã€‚å°±ç®—å¾åº«è½å¾Œæ–¼é ˜å°è€…ä¹Ÿèƒ½ä¿æŒå› æœä¸€è‡´ï¼Œå› ç‚ºæœ‰è¤‡è£½æ—¥èªŒçš„åºåˆ—è®“å¾åº«çŸ¥é“å…ˆå¾Œé †åºè©²å¦‚ä½•å¯«å…¥ã€‚     sequenceDiagram\n       participant   ä¸»åº«\n       participant   è¤‡è£½æ—¥èªŒ\n       participant   å¾åº«\n   \n       ä¸»åº«  ->>  è¤‡è£½æ—¥èªŒ  :   æ“ä½œ1 (åºåˆ—è™Ÿ: 1)\n       è¤‡è£½æ—¥èªŒ  -->>  å¾åº«  :   æ“ä½œ1 (åºåˆ—è™Ÿ: 1)\n       ä¸»åº«  ->>  è¤‡è£½æ—¥èªŒ  :   æ“ä½œ2 (åºåˆ—è™Ÿ: 2)\n       è¤‡è£½æ—¥èªŒ  -->>  å¾åº«  :   æ“ä½œ2 (åºåˆ—è™Ÿ: 2)\n       ä¸»åº«  ->>  è¤‡è£½æ—¥èªŒ  :   æ“ä½œ3 (åºåˆ—è™Ÿ: 3)\n       è¤‡è£½æ—¥èªŒ  -->>  å¾åº«  :   æ“ä½œ3 (åºåˆ—è™Ÿ: 3)\n    éå› æœåºåˆ—è™Ÿç”Ÿæˆå™¨  å¦‚æœä¸»åº«ä¸å­˜åœ¨ï¼ˆå¯èƒ½å› ç‚ºä½¿ç”¨äº†å¤šä¸»è³‡æ–™åº«æˆ–ç„¡ä¸»è³‡æ–™åº«ï¼Œæˆ–è€…å› ç‚ºä½¿ç”¨äº†åˆ†å‰²æ§½çš„è³‡æ–™åº«ï¼‰ï¼Œå¦‚ä½•ç‚ºæ“ä½œç”Ÿæˆåºåˆ—è™Ÿå°±æ²’æœ‰é‚£éº¼æ˜é¡¯äº†ã€‚åœ¨å¯¦è¸ä¸­æœ‰å„ç¨®å„æ¨£çš„æ–¹æ³•ï¼š   æ¯å€‹ç¯€é»éƒ½å¯ä»¥ç”Ÿæˆè‡ªå·±ç¨ç«‹çš„ä¸€çµ„åºåˆ—è™Ÿã€‚ä¾‹å¦‚æœ‰å…©å€‹ç¯€é»ï¼Œä¸€å€‹ç¯€é»åªèƒ½ç”Ÿæˆå¥‡æ•¸ï¼Œè€Œå¦ä¸€å€‹ç¯€é»åªèƒ½ç”Ÿæˆå¶æ•¸ã€‚é€šå¸¸ï¼Œå¯ä»¥åœ¨åºåˆ—è™Ÿçš„äºŒé€²ä½åˆ¶è¡¨ç¤ºä¸­é ç•™ä¸€äº›ä½ï¼Œç”¨æ–¼å”¯ä¸€çš„ç¯€é»è­˜åˆ¥ç¬¦è™Ÿï¼Œé€™æ¨£å¯ä»¥ç¢ºä¿å…©å€‹ä¸åŒçš„ç¯€é»æ°¸é ä¸æœƒç”Ÿæˆç›¸åŒçš„åºåˆ—è™Ÿã€‚     sequenceDiagram\n       participant   Node1   as   ç¯€é»1 (å¥‡æ•¸åºåˆ—è™Ÿ)\n       participant   Node2   as   ç¯€é»2 (å¶æ•¸åºåˆ—è™Ÿ)\n       Note   over   Node1  ,  Node2  :   æ¯å€‹ç¯€é»å¯ä»¥ç”Ÿæˆè‡ªå·±ç¨ç«‹çš„ä¸€çµ„åºåˆ—è™Ÿ\n       Node1  ->>  Node2  :   æ“ä½œ1 (åºåˆ—è™Ÿ: 1)\n       Node2  ->>  Node1  :   æ“ä½œ2 (åºåˆ—è™Ÿ: 2)\n       Node1  ->>  Node2  :   æ“ä½œ3 (åºåˆ—è™Ÿ: 3)\n       Node2  ->>  Node1  :   æ“ä½œ4 (åºåˆ—è™Ÿ: 4)\n       Note   over   Node1  ,  Node2  :   å…©å€‹ä¸åŒçš„ç¯€é»æ°¸é ä¸æœƒç”Ÿæˆç›¸åŒçš„åºåˆ—è™Ÿ\n  å¯ä»¥å°‡æ—¥æ›†æ™‚é˜ï¼ˆç‰©ç†æ™‚é˜ï¼‰çš„æ™‚é–“æˆ³é™„åŠ åˆ°æ¯å€‹æ“ä½œä¸Šã€55ã€‘ã€‚é€™ç¨®æ™‚é–“æˆ³ä¸¦ä¸é€£çºŒï¼Œä½†æ˜¯å¦‚æœå®ƒå…·æœ‰è¶³å¤ é«˜çš„è§£æåº¦ï¼Œé‚£ä¹Ÿè¨±è¶³ä»¥æä¾›ä¸€å€‹æ“ä½œçš„å…¨åºé—œä¿‚ã€‚é€™ä¸€äº‹å¯¦æ‡‰ç”¨æ–¼* æœ€å¾Œå¯«å…¥å‹åˆ© * çš„è¡çªè§£æ±ºæ–¹æ³•ä¸­ï¼ˆè«‹åƒé–± â€œ   æœ‰åºäº‹ä»¶çš„æ™‚é–“æˆ³ â€ï¼‰ã€‚\nâ€æœ€å¾Œåªæœ‰æ“ä½œä¸‰å¯ä»¥æˆåŠŸå¯«å…¥â€     sequenceDiagram\n       participant   Node1   as   ç¯€é»1\n       participant   Node2   as   ç¯€é»2\n       Note   over   Node1  ,  Node2  :   æ“ä½œä¾è³´ç‰©ç†æ™‚é˜\n       Node1  ->>  Node2  :   æ“ä½œ1 (æ™‚é–“æˆ³: 08:00:00)\n       Node2  ->>  Node1  :   æ“ä½œ2 (æ™‚é–“æˆ³: 08:01:00)\n       Node1  ->>  Node2  :   æ“ä½œ3 (æ™‚é–“æˆ³: 08:02:00)\n       Note over Node1, Node2: æœ€å¾Œåªæœ‰æ“ä½œä¸‰å¯ä»¥æˆåŠŸå¯«å…¥\n  å¯ä»¥é å…ˆåˆ†é…åºåˆ—è™Ÿå€å¡Šã€‚ä¾‹å¦‚ï¼Œç¯€é» A å¯èƒ½è¦æ±‚å¾åºåˆ—è™Ÿ 1 åˆ° 1,000 å€å¡Šçš„æ‰€æœ‰æ¬Šï¼Œè€Œç¯€é» B å¯èƒ½è¦æ±‚åºåˆ—è™Ÿ 1,001 åˆ° 2,000 å€å¡Šçš„æ‰€æœ‰æ¬Šã€‚ç„¶å¾Œæ¯å€‹ç¯€é»å¯ä»¥ç¨ç«‹åˆ†é…æ‰€å±¬å€å¡Šä¸­çš„åºåˆ—è™Ÿï¼Œä¸¦åœ¨åºåˆ—è™Ÿå‘Šæ€¥æ™‚è«‹æ±‚åˆ†é…ä¸€å€‹æ–°çš„å€å¡Šã€‚     sequenceDiagram\n       participant   NodeA   as   ç¯€é»A\n       participant   NodeB   as   ç¯€é»B\n       Note   over   NodeA  ,  NodeB  :   é å…ˆåˆ†é…åºåˆ—è™Ÿå€å¡Š\n       NodeA  ->>  NodeB  :   æ“ä½œ1 (åºåˆ—è™Ÿ: 500)\n       NodeB  ->>  NodeA  :   æ“ä½œ2 (åºåˆ—è™Ÿ: 1500)\n       NodeA  ->>  NodeB  :   æ“ä½œ3 (åºåˆ—è™Ÿ: 800)\n       NodeB  ->>  NodeA  :   æ“ä½œ4 (åºåˆ—è™Ÿ: 1600)\n  é€™ä¸‰å€‹é¸é …éƒ½æ¯”å–®ä¸€ä¸»åº«çš„è‡ªå¢è¨ˆæ•¸å™¨è¡¨ç¾è¦å¥½ï¼Œä¸¦ä¸”æ›´å…·å¯ä¼¸ç¸®æ€§ã€‚å®ƒå€‘ç‚ºæ¯å€‹æ“ä½œç”Ÿæˆä¸€å€‹å”¯ä¸€çš„ï¼Œè¿‘ä¼¼è‡ªå¢çš„åºåˆ—è™Ÿã€‚ç„¶è€Œå®ƒå€‘éƒ½æœ‰åŒä¸€å€‹å•é¡Œï¼šç”Ÿæˆçš„åºåˆ—è™Ÿèˆ‡å› æœä¸ä¸€è‡´ã€‚   æ¯å€‹ç¯€é»æ¯ç§’å¯ä»¥è™•ç†ä¸åŒæ•¸é‡çš„æ“ä½œã€‚å› æ­¤ï¼Œå¦‚æœä¸€å€‹ç¯€é»ç”¢ç”Ÿå¶æ•¸åºåˆ—è™Ÿè€Œå¦ä¸€å€‹ç”¢ç”Ÿå¥‡æ•¸åºåˆ—è™Ÿï¼Œå‰‡å¶æ•¸è¨ˆæ•¸å™¨å¯èƒ½è½å¾Œæ–¼å¥‡æ•¸è¨ˆæ•¸å™¨ï¼Œåä¹‹äº¦ç„¶ã€‚å¦‚æœä½ æœ‰ä¸€å€‹å¥‡æ•¸ç·¨è™Ÿçš„æ“ä½œå’Œä¸€å€‹å¶æ•¸ç·¨è™Ÿçš„æ“ä½œï¼Œä½ ç„¡æ³•æº–ç¢ºåœ°èªªå‡ºå“ªä¸€å€‹æ“ä½œåœ¨å› æœä¸Šå…ˆç™¼ç”Ÿã€‚     sequenceDiagram\n       participant   Node1   as   ç¯€é»1 (å¥‡æ•¸åºåˆ—è™Ÿ)\n       participant   Node2   as   ç¯€é»2 (å¶æ•¸åºåˆ—è™Ÿ)\n       \n       Note   over   Node1  ,  Node2  :   æ¯å€‹ç¯€é»æ¯ç§’å¯ä»¥è™•ç†ä¸åŒæ•¸é‡çš„æ“ä½œ\n       \n       Node1  ->>  Node2  :   æ“ä½œ1 (åºåˆ—è™Ÿ: 1, æ™‚é–“: 08:00:00)\n       Note   over   Node1  :   ç¯€é»1 å¿«é€Ÿè™•ç†æ“ä½œ\n       Node1  ->>  Node2  :   æ“ä½œ3 (åºåˆ—è™Ÿ: 3, æ™‚é–“: 08:00:01)\n       \n       Note   over   Node2  :   ç¯€é»2 è¼ƒæ…¢åœ°è™•ç†æ“ä½œ\n       Node2  ->>  Node1  :   æ“ä½œ2 (åºåˆ—è™Ÿ: 2, æ™‚é–“: 08:00:05)\n       Node2  ->>  Node1  :   æ“ä½œ4 (åºåˆ—è™Ÿ: 4, æ™‚é–“: 08:00:10)\n       \n       Note   over   Node1  ,  Node2  :   ç„¡æ³•ç¢ºå®šæ“ä½œ2å’Œæ“ä½œ3å“ªå€‹åœ¨å› æœä¸Šå…ˆç™¼ç”Ÿ\n  ä¾†è‡ªç‰©ç†æ™‚é˜çš„æ™‚é–“æˆ³æœƒå—åˆ°æ™‚é˜åç§»çš„å½±éŸ¿ï¼Œé€™å¯èƒ½æœƒä½¿å…¶èˆ‡å› æœä¸ä¸€è‡´ã€‚ä¾‹å¦‚Â    åœ– 8-3 Â å±•ç¤ºäº†ä¸€å€‹ä¾‹å­ï¼Œå…¶ä¸­å› æœä¸Šæ™šç™¼ç”Ÿçš„æ“ä½œï¼Œå»è¢«åˆ†é…äº†ä¸€å€‹æ›´æ—©çš„æ™‚é–“æˆ³ã€‚å¯ä»¥ä½¿ç‰©ç†æ™‚é˜æ™‚é–“æˆ³èˆ‡å› æœé—œä¿‚ä¿æŒä¸€è‡´ï¼šåœ¨ â€œ   å…¨åŸŸæ€§å¿«ç…§çš„åŒæ­¥æ™‚é˜ â€ ä¸­ï¼Œæˆ‘å€‘è¨è«–äº† Google çš„ Spannerï¼Œå®ƒå¯ä»¥ä¼°è¨ˆé æœŸçš„æ™‚é˜åå·®ï¼Œä¸¦åœ¨æäº¤å¯«å…¥ä¹‹å‰ç­‰å¾…ä¸ç¢ºå®šæ€§é–“éš”ã€‚é€™ç¨®æ–¹æ³•ç¢ºä¿äº†å¯¦éš›ä¸Šé å¾Œçš„äº‹å‹™æœƒæœ‰æ›´å¤§çš„æ™‚é–“æˆ³ã€‚ä½†æ˜¯å¤§å¤šæ•¸æ™‚é˜ä¸èƒ½æä¾›é€™ç¨®æ‰€éœ€çš„ä¸ç¢ºå®šæ€§åº¦é‡ã€‚     sequenceDiagram\n       participant   Node1   as   ç¯€é»1\n       participant   Node2   as   ç¯€é»2\n       Note   over   Node1  ,  Node2  :   æ™‚é˜åç§»å½±éŸ¿\n       Node1  ->>  Node2  :   æ“ä½œ1 (æ™‚é–“æˆ³: 10:00:01)\n       Node2  ->>  Node1  :   æ“ä½œ2 (æ™‚é–“æˆ³: 10:00:00, å› æœä¸Šæ™šæ–¼æ“ä½œ1)\n       Note   over   Node1  ,  Node2  :   å› æœé—œä¿‚èˆ‡æ™‚é–“æˆ³ä¸ä¸€è‡´\n  åœ¨åˆ†é…å€å¡Šçš„æƒ…æ³ä¸‹ï¼ŒæŸå€‹æ“ä½œå¯èƒ½æœƒè¢«è³¦äºˆä¸€å€‹ç¯„åœåœ¨ 1,001 åˆ° 2,000 å…§çš„åºåˆ—è™Ÿï¼Œç„¶è€Œä¸€å€‹å› æœä¸Šæ›´æ™šçš„æ“ä½œå¯èƒ½è¢«è³¦äºˆä¸€å€‹ç¯„åœåœ¨ 1 åˆ° 1,000 ä¹‹é–“çš„æ•¸å­—ã€‚é€™è£¡åºåˆ—è™Ÿèˆ‡å› æœé—œä¿‚ä¹Ÿæ˜¯ä¸ä¸€è‡´çš„ã€‚     sequenceDiagram\n       participant   NodeA   as   ç¯€é»A\n       participant   NodeB   as   ç¯€é»B\n       Note   over   NodeA  ,  NodeB  :   åºåˆ—è™Ÿèˆ‡å› æœä¸ä¸€è‡´\n       NodeA  ->>  NodeB  :   æ“ä½œ1 (åºåˆ—è™Ÿ: 1500)\n       NodeB  ->>  NodeA  :   æ“ä½œ2 (åºåˆ—è™Ÿ: 500, å› æœä¸Šæ™šæ–¼æ“ä½œ1)\n       Note   over   NodeA  ,  NodeB  :   å› æœé—œä¿‚èˆ‡åºåˆ—è™Ÿä¸ä¸€è‡´\n    è˜­ä¼¯ç‰¹æ™‚é–“æˆ³  å„˜ç®¡å‰›æ‰æè¿°çš„ä¸‰å€‹åºåˆ—è™Ÿç”Ÿæˆå™¨èˆ‡å› æœä¸ä¸€è‡´ï¼Œä½†å¯¦éš›ä¸Šæœ‰ä¸€å€‹ç°¡å–®çš„æ–¹æ³•ä¾†ç”¢ç”Ÿèˆ‡å› æœé—œä¿‚ä¸€è‡´çš„åºåˆ—è™Ÿã€‚å®ƒè¢«ç¨±ç‚ºè˜­ä¼¯ç‰¹æ™‚é–“æˆ³ï¼ŒèŠæ–¯åˆ©ãƒ»è˜­ä¼¯ç‰¹ï¼ˆLeslie Lamportï¼‰æ–¼ 1978 å¹´æå‡ºã€56ã€‘     åœ– 9-8 Lamport æ™‚é–“æˆ³æä¾›äº†èˆ‡å› æœé—œä¿‚ä¸€è‡´çš„å…¨åºã€‚  ç›®æ¨™ï¼š  Client(Countç¯€é»è¨ˆæ•¸å™¨,Nodeç¯€é»åç¨±) â†’ ä½¿ç”¨è€…æ”œå¸¶å€‹ç¯€é»æœ€å¤§å€¼ä¸¦ä¸”åœ¨æ“ä½œå…©å€‹ç¯€é»æ™‚æ›´æ–°ç¯€é»æœ€å¤§å€¼  è§£èªªï¼š  æ¯æ¬¡è¢«æ“ä½œNode1 èˆ‡ Node2éƒ½æœƒcéƒ½æœƒ+1ï¼ŒClientAå…ˆå­˜å–Node1æ‰€ä»¥Node1 c=1 ä¸­é–“ä¸€æ®µæ™‚é–“éƒ½æ˜¯ClientBå­˜å–Node2ä¸ç®¡å­˜å–å¹¾æ¬¡å› ç‚ºNode2çš„CæŒçºŒçš„å¢åŠ ï¼Œåªè¦ClinetAæŸæ¬¡å­˜å–åˆ°Node2å°±å¯ä»¥å› ç‚ºè®€å–åˆ°Node2çš„cè€Œå»æ›´æ–°è‡ªå·±çš„æœ€å¤§å€¼  EX:ClientA(1,1)â†’ClientA(5,2)â†’å› ç‚ºæ›¾ç¶“è®€å–éNode2çš„æœ€å¤§è¨ˆæ•¸å€¼æ‰€ä»¥ClientAå¯ä»¥æ›´æ–°Node1çš„c=6ï¼Œæœ€å¾Œç”¢ç”ŸClientA(6,1)\nå› ç‚ºä½¿ç”¨é€™æ¨£çš„è¨ˆæ•¸æ–¹å¼å¯ä»¥çœ‹å¾—å‡ºå½¼æ­¤çš„å› æœé—œä¿‚     ClinetA  ClientB    (1,1)  (1,2)   (5,2)  (2,2)   (6,1)  (3,2)    (4,2)    (6,2)  å°±ç®—ä¸çœ‹åœ–ä»¥è³‡æ–™å½¢å¼çœ‹å¾…ä¹Ÿå¤§æ¦‚çŒœçš„çš„å‡ºä¾†å…©å€‹Nodeä¹‹é–“æœ‰ç‰ˆæœ¬å·®ç•°    å…‰æœ‰æ™‚é–“æˆ³æ’åºé‚„ä¸å¤   é›–ç„¶è˜­ä¼¯ç‰¹æ™‚é–“æˆ³å®šç¾©äº†ä¸€å€‹èˆ‡å› æœä¸€è‡´çš„å…¨åºï¼Œä½†å®ƒé‚„ä¸è¶³ä»¥è§£æ±ºåˆ†æ•£å¼ç³»çµ±ä¸­çš„è¨±å¤šå¸¸è¦‹å•é¡Œã€‚  ä¾‹å¦‚ï¼š  åŒæ™‚é–“æœ‰å…©å€‹ä½¿ç”¨è€…è¦å‰µå»ºåŒä¸€å€‹åç¨±çš„å¸³è™ŸAlice     sequenceDiagram\n       participant   User1   as   ä½¿ç”¨è€…1\n       participant   User2   as   ä½¿ç”¨è€…2\n       participant   NodeA   as   ç¯€é»A\n       participant   NodeB   as   ç¯€é»B\n   \n       Note   over   User1  ,  User2  :   å˜—è©¦å‰µå»ºç›¸åŒçš„ä½¿ç”¨è€…åç¨±\n   \n       User1  ->>  NodeA  :   è«‹æ±‚å‰µå»ºå¸³æˆ¶ (ä½¿ç”¨è€…åç¨±: Alice)\n       User2  ->>  NodeB  :   è«‹æ±‚å‰µå»ºå¸³æˆ¶ (ä½¿ç”¨è€…åç¨±: Alice)\n   \n       Note   over   NodeA  ,  NodeB  :   ç”Ÿæˆè˜­ä¼¯ç‰¹æ™‚é–“æˆ³\n   \n       NodeA  ->>  NodeB  :   é€šçŸ¥å‰µå»ºè«‹æ±‚ (ä½¿ç”¨è€…åç¨±: Alice, è˜­ä¼¯ç‰¹æ™‚é–“æˆ³: L1)\n       Note   right of   NodeB  :   ç¶²è·¯å»¶é²\n   \n       NodeB  ->>  NodeA  :   é€šçŸ¥å‰µå»ºè«‹æ±‚ (ä½¿ç”¨è€…åç¨±: Alice, è˜­ä¼¯ç‰¹æ™‚é–“æˆ³: L2)\n       Note   right of   NodeA  :   ç¶²è·¯å»¶é²\n   \n       Note   over   NodeA  ,  NodeB  :   ç”±æ–¼ç¶²è·¯å•é¡Œï¼Œç¯€é»ç„¡æ³•æº–ç¢ºæ¯”è¼ƒè˜­ä¼¯ç‰¹æ™‚é–“æˆ³ï¼Œç„¡æ³•ç¢ºå®šå“ªå€‹è«‹æ±‚å…ˆä¾†ã€‚\n   \n       alt   ç¶²è·¯æ¢å¾©\n           NodeA  ->>  NodeB  :   é‡æ–°é€šçŸ¥å‰µå»ºè«‹æ±‚ (ä½¿ç”¨è€…åç¨±: Alice, è˜­ä¼¯ç‰¹æ™‚é–“æˆ³: L1)\n           NodeB  ->>  NodeA  :   é‡æ–°é€šçŸ¥å‰µå»ºè«‹æ±‚ (ä½¿ç”¨è€…åç¨±: Alice, è˜­ä¼¯ç‰¹æ™‚é–“æˆ³: L2)\n           Note   over   NodeA  ,  NodeB  :   ç¾åœ¨å¯ä»¥æ¯”è¼ƒè˜­ä¼¯ç‰¹æ™‚é–“æˆ³ï¼Œä½†å·²ç¶“å¤ªé²äº†ã€‚\n       else   ç¶²è·¯æœªæ¢å¾©\n           Note   over   NodeA  ,  NodeB  :   ç³»çµ±è¢«æ‹–è‡³åœæ©Ÿï¼Œç„¡æ³•è§£æ±ºè«‹æ±‚ã€‚\n       end\n    è«‹æ±‚ç™¼é€:  ä½¿ç”¨è€…1å’Œä½¿ç”¨è€…2åˆ†åˆ¥å‘ç¯€é»Aå’Œç¯€é»Bç™¼é€è«‹æ±‚ï¼Œè©¦åœ–å‰µå»ºä½¿ç”¨ç›¸åŒåç¨±çš„å¸³æˆ¶ã€‚   ç”Ÿæˆè˜­ä¼¯ç‰¹æ™‚é–“æˆ³:  ç¯€é»Aå’Œç¯€é»Båœ¨æ¥æ”¶åˆ°è«‹æ±‚æ™‚ç”Ÿæˆè˜­ä¼¯ç‰¹æ™‚é–“æˆ³ã€‚å‡è¨­ç¯€é»Aç”Ÿæˆçš„æ™‚é–“æˆ³ç‚ºL1ï¼Œç¯€é»Bç”Ÿæˆçš„æ™‚é–“æˆ³ç‚ºL2ã€‚   å˜—è©¦é€šçŸ¥:  ç¯€é»Aå˜—è©¦é€šçŸ¥ç¯€é»Bå®ƒçš„è«‹æ±‚å’Œæ™‚é–“æˆ³L1ï¼Œè€Œç¯€é»Bå˜—è©¦é€šçŸ¥ç¯€é»Aå®ƒçš„è«‹æ±‚å’Œæ™‚é–“æˆ³L2ã€‚   ç¶²è·¯å»¶é²:  ç”±æ–¼ç¶²è·¯å»¶é²æˆ–å…¶ä»–ç¶²è·¯å•é¡Œï¼Œé€™äº›é€šçŸ¥å¯èƒ½æœƒå»¶é²åˆ°é”ï¼Œæˆ–è€…å¯èƒ½æ ¹æœ¬ç„¡æ³•åˆ°é”(ç¯€é»Aèˆ‡ç¯€é»Bä¹‹é–“çš„ç¶²è·¯å»¶é²)ã€‚é€™ä½¿å¾—ç¯€é»ä¹‹é–“ç„¡æ³•ç«‹å³æ¯”è¼ƒè˜­ä¼¯ç‰¹æ™‚é–“æˆ³ï¼Œä¹Ÿå°±ç„¡æ³•ç¢ºå®šå“ªå€‹è«‹æ±‚å…ˆåˆ°ä¾†ã€‚   ç¶²è·¯æ¢å¾©ï¼ˆå¦‚æœæ¢å¾©çš„è©±ï¼‰:  å¦‚æœç¶²è·¯æœ€çµ‚æ¢å¾©ï¼Œç¯€é»Aå’Œç¯€é»Bå¯ä»¥é‡æ–°é€šçŸ¥å°æ–¹å®ƒå€‘çš„è«‹æ±‚å’Œè˜­ä¼¯ç‰¹æ™‚é–“æˆ³ã€‚ç¾åœ¨ï¼Œå®ƒå€‘å¯ä»¥æ¯”è¼ƒè˜­ä¼¯ç‰¹æ™‚é–“æˆ³ä¾†ç¢ºå®šå“ªå€‹è«‹æ±‚å…ˆåˆ°ä¾†ã€‚ä½†æ˜¯ï¼Œé€™å¯èƒ½å·²ç¶“å¤ªé²äº†ï¼Œå› ç‚ºä½¿ç”¨è€…å¯èƒ½å·²ç¶“ä¸å†ç­‰å¾…ï¼Œæˆ–è€…ç³»çµ±å¯èƒ½å·²ç¶“å› å…¶ä»–åŸå› è€Œé€²å…¥ä¸ä¸€è‡´çš„ç‹€æ…‹ã€‚   ç¶²è·¯æœªæ¢å¾©:  å¦‚æœç¶²è·¯æœªèƒ½æ¢å¾©ï¼Œç¯€é»Aå’Œç¯€é»Bç„¡æ³•ç¢ºå®šå“ªå€‹è«‹æ±‚å…ˆåˆ°ä¾†ï¼Œé€™å¯èƒ½å°è‡´ç³»çµ±è¢«æ‹–è‡³åœæ©Ÿï¼Œç„¡æ³•è§£æ±ºé€™äº›è«‹æ±‚ã€‚  çµè«–ï¼š  å³ä½¿ä½¿ç”¨äº†è˜­ä¼¯ç‰¹æ™‚é–“æˆ³ï¼ˆLamport Timestampsï¼‰ä¾†ç¢ºå®šå…¨åºé—œä¿‚ï¼Œä»ç„¶æœƒå› ç‚ºæ“ä½œçš„ä¸ç¢ºå®šæ€§å°è‡´ä¸¦ä¸å®Œå…¨å…¨åºã€‚åªæœ‰åœ¨æ‰€æœ‰çš„æ“ä½œéƒ½è¢«æ”¶é›†å¾Œï¼Œæ“ä½œçš„å…¨åºæ‰æœƒå‡ºç¾ã€‚å¦‚ä½•ç¢ºå®šå…¨åºé—œä¿‚å·²ç¶“å¡µåŸƒè½å®šï¼Œé€™å°‡åœ¨Â    å…¨åºå»£æ’­ Â ä¸€ç¯€ä¸­è©³ç´°èªªæ˜ã€‚    å…¨åºå»£æ’­  ä»‹ç´¹ï¼š    å–®CPUæ ¸å¿ƒçš„æ“ä½œé †åº ï¼šç•¶ç¨‹å¼åœ¨å–®å€‹CPUæ ¸å¿ƒä¸Šé‹è¡Œæ™‚ï¼Œå®šç¾©æ“ä½œçš„å…¨åºç›¸å°ç°¡å–®ï¼Œå› ç‚ºæ“ä½œçš„é †åºå°±æ˜¯å®ƒå€‘è¢«CPUåŸ·è¡Œçš„é †åºã€‚   åˆ†æ•£å¼ç³»çµ±çš„æ“ä½œé †åº ï¼šåœ¨åˆ†æ•£å¼ç³»çµ±ä¸­ï¼Œå„ç¯€é»å¯èƒ½åœ¨ä¸åŒçš„æ™‚é–“åŸ·è¡Œæ“ä½œï¼Œä½¿å¾—ç¢ºå®šå…¨åŸŸæ€§æ“ä½œé †åºè®Šå¾—å›°é›£ã€‚   æ™‚é–“æˆ³æˆ–åºåˆ—è™Ÿæ’åºçš„å±€é™æ€§ ï¼šé›–ç„¶å¯ä»¥é€šéæ™‚é–“æˆ³æˆ–åºåˆ—è™Ÿä¾†æ’åºæ“ä½œï¼Œä½†æ˜¯é€™ç¨®æ–¹æ³•ä¸å¦‚å–®ä¸»è¤‡è£½æœ‰æ•ˆï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦ç¢ºä¿å”¯ä¸€æ€§æ™‚ã€‚   å–®ä¸»è¤‡è£½ ï¼šå–®ä¸»è¤‡è£½é€šéé¸æ“‡ä¸€å€‹ç¯€é»ä½œç‚ºä¸»åº«ä¾†ç¢ºå®šæ“ä½œçš„å…¨åºï¼Œä¸¦åœ¨ä¸»åº«çš„å–®å€‹CPUæ ¸å¿ƒä¸Šå°æ‰€æœ‰æ“ä½œé€²è¡Œæ’åºã€‚   ååé‡å’Œæ•…éšœæ¢å¾©çš„æŒ‘æˆ° ï¼š\n   å¦‚æœç³»çµ±çš„ååé‡éœ€æ±‚è¶…éäº†å–®å€‹ä¸»åº«çš„è™•ç†èƒ½åŠ›ï¼Œå‰‡éœ€è¦è€ƒæ…®å¦‚ä½•æ“´å±•ç³»çµ±ã€‚  å¦‚æœä¸»åº«å¤±æ•ˆï¼Œå‰‡éœ€è¦è€ƒæ…®å¦‚ä½•é€²è¡Œæ•…éšœåˆ‡æ›ï¼Œä»¥ä¿è­‰ç³»çµ±çš„æŒçºŒé‹è¡Œã€‚   å…¨åºå»£æ’­å’ŒåŸå­å»£æ’­ ï¼šé€™å…©ç¨®æŠ€è¡“æ—¨åœ¨è§£æ±ºåˆ†æ•£å¼ç³»çµ±ä¸­çš„å…¨åºå•é¡Œï¼Œç¢ºä¿æ‰€æœ‰ç¯€é»éƒ½ä»¥ç›¸åŒçš„é †åºçœ‹åˆ°æ‰€æœ‰æ“ä½œï¼Œå³ä½¿åœ¨é¢å°ç¯€é»å¤±æ•ˆæˆ–ç¶²è·¯å•é¡Œçš„æ™‚å€™ä¹Ÿèƒ½ä¿æŒä¸€è‡´æ€§ã€‚  å…¨åºå»£æ’­å¿…é ˆæ»¿è¶³å…©å€‹æ¢ä»¶ï¼š  1.å¯é äº¤ä»˜  æ²’æœ‰è¨Šæ¯ä¸Ÿå¤±ï¼šå¦‚æœè¨Šæ¯è¢«å‚³éåˆ°ä¸€å€‹ç¯€é»ï¼Œå®ƒå°‡è¢«å‚³éåˆ°æ‰€æœ‰ç¯€é»ã€‚  2.å…¨åºäº¤ä»˜  è¨Šæ¯ä»¥ç›¸åŒçš„é †åºå‚³éçµ¦æ¯å€‹ç¯€é»ã€‚  æ­£ç¢ºçš„å…¨åºå»£æ’­æ¼”ç®—æ³•å¿…é ˆå§‹çµ‚ä¿è­‰å¯é æ€§å’Œæœ‰åºæ€§ï¼Œå³ä½¿ç¯€é»æˆ–ç¶²è·¯å‡ºç¾æ•…éšœã€‚ç•¶ç„¶åœ¨ç¶²è·¯ä¸­æ–·çš„æ™‚å€™ï¼Œè¨Šæ¯æ˜¯å‚³ä¸å‡ºå»çš„ï¼Œä½†æ˜¯æ¼”ç®—æ³•å¯ä»¥ä¸æ–·é‡è©¦ï¼Œä»¥ä¾¿åœ¨ç¶²è·¯æœ€çµ‚ä¿®å¾©æ™‚ï¼Œè¨Šæ¯èƒ½åŠæ™‚é€éä¸¦é€é”ï¼ˆç•¶ç„¶å®ƒå€‘å¿…é ˆä»ç„¶æŒ‰ç…§æ­£ç¢ºçš„é †åºå‚³éï¼‰ã€‚    ä½¿ç”¨å…¨åºå»£æ’­    å…±è­˜æœå‹™èˆ‡å…¨åºå»£æ’­ ï¼š\n   é¡ä¼¼ ZooKeeper å’Œ etcd çš„å…±è­˜æœå‹™å¯¦éš›ä¸Šå¯¦ç¾äº†å…¨åºå»£æ’­ï¼Œé¡¯ç¤ºäº†å…¨åºå»£æ’­èˆ‡å…±è­˜ä¹‹é–“çš„å¯†åˆ‡è¯ç¹«ã€‚   è³‡æ–™åº«è¤‡è£½ ï¼š\n   å…¨åºå»£æ’­æ˜¯è³‡æ–™åº«è¤‡è£½æ‰€éœ€çš„ï¼Œæ¯å€‹è¨Šæ¯ä»£è¡¨ä¸€æ¬¡è³‡æ–™åº«çš„å¯«å…¥ï¼Œæ‰€æœ‰å‰¯æœ¬æŒ‰ç›¸åŒçš„é †åºè™•ç†ç›¸åŒçš„å¯«å…¥ï¼Œä¿è­‰å‰¯æœ¬é–“çš„ä¸€è‡´æ€§ï¼Œé€™è¢«ç¨±ç‚ºç‹€æ…‹æ©Ÿè¤‡è£½ã€‚   å¯åºåˆ—åŒ–çš„äº‹å‹™ ï¼š\n   ä½¿ç”¨å…¨åºå»£æ’­å¯ä»¥å¯¦ç¾å¯åºåˆ—åŒ–çš„äº‹å‹™ï¼Œæ¯å€‹è¨Šæ¯ä»£è¡¨ä¸€å€‹ç¢ºå®šæ€§äº‹å‹™ï¼Œä¸¦ä¸”æ¯å€‹ç¯€é»ä»¥ç›¸åŒçš„é †åºè™•ç†é€™äº›è¨Šæ¯ï¼Œä¿è­‰è³‡æ–™åº«çš„åˆ†å‰²æ§½å’Œå‰¯æœ¬çš„ä¸€è‡´æ€§ã€‚   è¨Šæ¯é †åºçš„å›ºåŒ– ï¼š\n   åœ¨å…¨åºå»£æ’­ä¸­ï¼Œè¨Šæ¯é †åºåœ¨è¨Šæ¯é€é”æ™‚è¢«å›ºåŒ–ï¼Œä¸å…è¨±è¿½æº¯åœ°å°‡è¨Šæ¯æ’å…¥é †åºä¸­çš„è¼ƒæ—©ä½ç½®ï¼Œä½¿å…¨åºå»£æ’­æ¯”æ™‚é–“æˆ³æ’åºæ›´å¼·ã€‚   æ—¥èªŒçš„å»ºç«‹ ï¼š\n   å…¨åºå»£æ’­ä¹Ÿæ˜¯å»ºç«‹æ—¥èªŒçš„ä¸€ç¨®æ–¹å¼ï¼Œå‚³éè¨Šæ¯å°±åƒè¿½åŠ å¯«å…¥æ—¥èªŒï¼Œæ‰€æœ‰ç¯€é»å¿…é ˆä»¥ç›¸åŒçš„é †åºå‚³éç›¸åŒçš„è¨Šæ¯ï¼Œä»¥ç¢ºä¿æ‰€æœ‰ç¯€é»éƒ½å¯ä»¥è®€å–æ—¥èªŒä¸¦çœ‹åˆ°ç›¸åŒçš„è¨Šæ¯åºåˆ—ã€‚   é˜²è­·ä»¤ç‰Œçš„é–æœå‹™ ï¼š\n   åœ¨å¯¦ç¾æä¾›é˜²è­·ä»¤ç‰Œçš„é–æœå‹™ä¸­ï¼Œå…¨åºå»£æ’­ä¹Ÿéå¸¸æœ‰ç”¨ã€‚æ¯å€‹ç²å–é–çš„è«‹æ±‚éƒ½ä½œç‚ºä¸€æ¢è¨Šæ¯è¿½åŠ åˆ°æ—¥èªŒæœ«å°¾ï¼Œä¸¦æŒ‰æ—¥èªŒä¸­çš„é †åºä¾æ¬¡ç·¨è™Ÿï¼Œé€™äº›åºåˆ—è™Ÿå¯ä»¥ä½œç‚ºé˜²è­·ä»¤ç‰Œä½¿ç”¨ã€‚    ä½¿ç”¨å…¨åºå»£æ’­å¯¦ç¾ç·šæ€§ä¸€è‡´çš„å„²å­˜    åŸºæ–¼å…¨åºå»£æ’­å»ºç«‹ç·šæ€§ä¸€è‡´å„²å­˜ ï¼š\n   å…¨åºå»£æ’­ä¿è­‰è¨Šæ¯ä»¥å›ºå®šçš„é †åºå¯é åœ°å‚³é€ï¼Œè€Œç·šæ€§ä¸€è‡´æ€§å‰‡ä¿è­‰è®€å–èƒ½çœ‹è¦‹æœ€æ–°çš„å¯«å…¥å€¼ã€‚åŸºæ–¼å…¨åºå»£æ’­ï¼Œå¯ä»¥æ§‹å»ºç·šæ€§ä¸€è‡´çš„å„²å­˜ç³»çµ±ã€‚   åˆ©ç”¨ CAS (æ¯”è¼ƒä¸¦è¨­å®š) åŸå­æ“ä½œ ï¼š\n   å°æ¯å€‹å¯èƒ½çš„ä½¿ç”¨è€…åç¨±ï¼Œå‰µå»ºä¸€å€‹å¸¶æœ‰ CAS åŸå­æ“ä½œçš„ç·šæ€§ä¸€è‡´æš«å­˜å™¨ï¼Œä»¥ç¢ºä¿ä½¿ç”¨è€…åç¨±çš„å”¯ä¸€æ€§ã€‚   åƒ…è¿½åŠ æ—¥èªŒçš„å…¨åºå»£æ’­ ï¼š\n   ä»¥åƒ…è¿½åŠ æ—¥èªŒçš„å½¢å¼å¯¦ç¾å…¨åºå»£æ’­ï¼Œä¸¦é€šéåœ¨æ—¥èªŒä¸­è¿½åŠ å’Œè®€å–è¨Šæ¯ä¾†å¯¦ç¾ç·šæ€§ä¸€è‡´çš„ CAS æ“ä½œã€‚   è™•ç†ä½µç™¼å¯«å…¥ ï¼š\n   ç”±æ–¼æ—¥èªŒé …ä»¥ç›¸åŒçš„é †åºé€é”æ‰€æœ‰ç¯€é»ï¼Œå¯ä»¥é¸æ“‡è¡çªå¯«å…¥ä¸­çš„ç¬¬ä¸€å€‹ä½œç‚ºå‹åˆ©è€…ï¼Œä¸¦ä¸­æ­¢å¾Œä¾†è€…ï¼Œä»¥æ­¤ç¢ºä¿æ‰€æœ‰ç¯€é»å°æŸå€‹å¯«å…¥æ˜¯æäº¤é‚„æ˜¯ä¸­æ­¢é”æˆä¸€è‡´ã€‚   ç·šæ€§ä¸€è‡´çš„è®€å– ï¼š\n   ç‚ºäº†ä½¿è®€å–ä¹Ÿç·šæ€§ä¸€è‡´ï¼Œå¯ä»¥é¸æ“‡ï¼š\n   åœ¨æ—¥èªŒä¸­è¿½åŠ è¨Šæ¯ä¸¦ç­‰å¾…è©²è¨Šæ¯è¢«è®€å›ä¾†åŸ·è¡Œå¯¦éš›çš„è®€å–æ“ä½œï¼›  æŸ¥è©¢æœ€æ–°æ—¥èªŒè¨Šæ¯çš„ä½ç½®ï¼Œç­‰å¾…æ‰€æœ‰è¨Šæ¯å‚³é”å¾Œå†åŸ·è¡Œè®€å–ï¼›  æˆ–å¾åŒæ­¥æ›´æ–°çš„å‰¯æœ¬ä¸­é€²è¡Œè®€å–ä»¥ç¢ºä¿çµæœæ˜¯æœ€æ–°çš„ã€‚  çµè«–ï¼š  å…¨åºå»£æ’­å°±æ˜¯ç¢ºä¿æ‰€æœ‰é›»è…¦ï¼ˆç¯€é»ï¼‰æ”¶åˆ°çš„è¨Šæ¯é †åºéƒ½æ˜¯ä¸€æ¨£çš„ï¼Œå¥½æ¯”æ˜¯æŠŠè¨Šæ¯æŒ‰ç…§1ã€2ã€3ã€4çš„é †åºç™¼çµ¦æ¯å°é›»è…¦ï¼Œè®“æ¯å°é›»è…¦éƒ½æŒ‰ç…§é€™å€‹é †åºä¾†è™•ç†äº‹æƒ…ã€‚é€™æ¨£åšçš„å¥½è™•æ˜¯ï¼Œç•¶å¤šäººåŒæ™‚è¦æ±‚åšæŸä»¶äº‹ï¼ˆæ¯”å¦‚åŒæ™‚è¦æ±‚å»ºç«‹åŒä¸€å€‹ä½¿ç”¨è€…åç¨±çš„å¸³æˆ¶ï¼‰æ™‚ï¼Œå…¨åºå»£æ’­å¯ä»¥ç¢ºå®šä¸€å€‹å›ºå®šçš„é †åºä¾†è™•ç†é€™äº›è¦æ±‚ï¼Œé¿å…äº‚ä¸ƒå…«ç³Ÿçš„æƒ…æ³ç™¼ç”Ÿã€‚ä¹Ÿèƒ½ç¢ºä¿å³ä¾¿ç¶²è·¯æœ‰å»¶é²ï¼Œè¨Šæ¯é‚„æ˜¯èƒ½æŒ‰ç…§æ­£ç¢ºçš„é †åºè¢«é€é”å’Œè™•ç†ã€‚å…¨åºå»£æ’­ä¹Ÿèƒ½æ”¯æ´ä¸€äº›ç‰¹å®šçš„æ“ä½œï¼Œæ¯”å¦‚æ¯”è¼ƒç„¶å¾Œè¨­å®šï¼ˆCASï¼‰ï¼Œç¢ºä¿é€™äº›æ“ä½œèƒ½æ­£ç¢ºç„¡èª¤åœ°å®Œæˆã€‚æœ€å¾Œï¼Œå…¨åºå»£æ’­é€šéè®“æ‰€æœ‰é›»è…¦æŒ‰ç…§ç›¸åŒçš„é †åºä¾†è™•ç†äº‹æƒ…ï¼Œä½¿å¾—æ¯å°é›»è…¦çš„ç‹€æ…‹éƒ½èƒ½ä¿æŒä¸€è‡´ã€‚æ‰€ä»¥ï¼Œå…¨åºå»£æ’­æ˜¯å¯¦ç¾ç·šæ€§ä¸€è‡´å„²å­˜ï¼ˆè®“æ‰€æœ‰é›»è…¦çš„è³‡æ–™ä¿æŒä¸€è‡´ï¼‰çš„ä¸€å€‹é‡è¦æ–¹æ³•ã€‚    ä½¿ç”¨ç·šæ€§ä¸€è‡´æ€§å„²å­˜å¯¦ç¾å…¨åºå»£æ’­    åˆ©ç”¨ç·šæ€§ä¸€è‡´æ€§å„²å­˜å¯¦ç¾å…¨åºå»£æ’­çš„æ–¹æ³• ï¼š\n   åˆ©ç”¨ç·šæ€§ä¸€è‡´çš„æš«å­˜å™¨å„²å­˜ä¸€å€‹æ•´æ•¸ï¼Œä¸¦æä¾›åŸå­çš„è‡ªå¢ä¸¦è¿”å›æ“ä½œæˆ–åŸå­CASæ“ä½œã€‚  å°æ–¼æ¯å€‹è¦é€éå…¨åºå»£æ’­ç™¼é€çš„è¨Šæ¯ï¼Œé¦–å…ˆåŸ·è¡Œè‡ªå¢ä¸¦è¿”å›æ“ä½œï¼Œç²å¾—ä¸€å€‹åºåˆ—è™Ÿï¼Œç„¶å¾Œå°‡æ­¤åºåˆ—è™Ÿé™„åŠ åˆ°è¨Šæ¯ä¸­ã€‚  ä¹‹å¾Œå°‡è¨Šæ¯å‚³é€åˆ°æ‰€æœ‰ç¯€é»ï¼Œæ”¶ä»¶äººæŒ‰ç…§åºåˆ—è™Ÿçš„é †åºä¾åºå‚³éè¨Šæ¯ã€‚   èˆ‡è˜­ä¼¯ç‰¹æ™‚é–“æˆ³çš„å€åˆ¥ ï¼š\n   è‡ªå¢ç·šæ€§ä¸€è‡´æ€§æš«å­˜å™¨ç²å¾—çš„æ˜¯ä¸€å€‹æ²’æœ‰é–“éš™çš„åºåˆ—ï¼Œèˆ‡è˜­ä¼¯ç‰¹æ™‚é–“æˆ³çš„éš¨æ©Ÿåºåˆ—ä¸åŒï¼Œé€™æ˜¯å…¨åºå»£æ’­å’Œæ™‚é–“æˆ³æ’åºé–“çš„é—œéµå€åˆ¥ã€‚   å¯¦ç¾å›°é›£ ï¼š\n   åœ¨å–®ç¯€é»æƒ…æ³ä¸‹å¯¦ç¾ç·šæ€§ä¸€è‡´æ€§æš«å­˜å™¨ç›¸å°ç°¡å–®ï¼Œä½†åœ¨åˆ†æ•£å¼ç’°å¢ƒä¸­ï¼Œç‰¹åˆ¥æ˜¯ç•¶ç¯€é»å‡ºéŒ¯æˆ–ç¶²è·¯é€£æ¥ä¸­æ–·æ™‚ï¼Œå¯¦ç¾è®Šå¾—å›°é›£ã€‚  è¦å¯¦ç¾åŸå­æ€§çš„è‡ªå¢ä¸¦è¿”å›æ“ä½œï¼Œéœ€è¦æ·±å…¥æ€è€ƒç·šæ€§ä¸€è‡´æ€§çš„åºåˆ—è™Ÿç”Ÿæˆå™¨ï¼Œä¸¦å¯èƒ½éœ€è¦ä¸€å€‹å…±è­˜æ¼”ç®—æ³•ã€‚   èˆ‡å…±è­˜å•é¡Œçš„é—œè¯ ï¼š\n   ç·šæ€§ä¸€è‡´çš„CASæˆ–è‡ªå¢ä¸¦è¿”å›æš«å­˜å™¨èˆ‡å…¨åºå»£æ’­éƒ½èˆ‡å…±è­˜å•é¡Œç­‰åƒ¹ï¼Œæ„å‘³è‘—è§£æ±ºäº†å…¶ä¸­ä¸€å€‹å•é¡Œï¼Œå°±å¯ä»¥è½‰åŒ–ç‚ºè§£æ±ºå…¶ä»–å•é¡Œçš„æ–¹æ¡ˆã€‚  çµè«–ï¼š  åˆ©ç”¨ç·šæ€§ä¸€è‡´æ€§å„²å­˜ä¾†åšå…¨åºå»£æ’­å°±æ˜¯ï¼Œå…ˆæœ‰ä¸€å€‹ç‰¹åˆ¥çš„å„²å­˜ç©ºé–“ï¼Œå®ƒèƒ½å¤ è‡ªå‹•å¢åŠ ä¸€å€‹æ•¸å­—ï¼Œæ¯ç•¶æœ‰æ–°è¨Šæ¯è¦ç™¼é€æ™‚ï¼Œå°±å…ˆè®“é€™å€‹æ•¸å­—åŠ ä¸€ï¼Œç„¶å¾ŒæŠŠé€™å€‹æ•¸å­—è²¼åˆ°è¨Šæ¯ä¸Šï¼Œæ¥è‘—æŠŠè¨Šæ¯ç™¼çµ¦æ‰€æœ‰çš„é›»è…¦ç¯€é»ã€‚é€™æ¨£ï¼Œæ¯å€‹é›»è…¦ç¯€é»æ”¶åˆ°è¨Šæ¯æ™‚ï¼Œå°±æŒ‰ç…§è²¼åœ¨è¨Šæ¯ä¸Šçš„æ•¸å­—é †åºä¾†è™•ç†å®ƒå€‘ã€‚å¦‚æœç™¼ç¾æœ‰æ•¸å­—è·³è™Ÿäº†ï¼Œå°±å…ˆç­‰ä¸€ä¸‹ï¼Œç›´åˆ°æ”¶åˆ°ç¼ºçš„é‚£å€‹è¨Šæ¯ã€‚å¦‚æœåœ¨é€™éç¨‹ä¸­ï¼Œæœ‰é›»è…¦ç¯€é»å‡ºäº†å•é¡Œæˆ–æ˜¯ç¶²è·¯æœ‰å•é¡Œï¼Œä¹Ÿæœ‰è¾¦æ³•æ‰¾å›ä¸¦ç¹¼çºŒå¢åŠ é‚£å€‹æ•¸å­—ï¼Œä¿è­‰ä¸æœƒäº‚æ‰é †åºã€‚  å…©è€…æ¯”è¼ƒï¼š  ä½¿ç”¨å…¨åºå»£æ’­å¯¦ç¾ç·šæ€§ä¸€è‡´çš„å„²å­˜ï¼Œå°±åƒæ˜¯æœ‰ä¸€å€‹éƒµå·®è² è²¬æŠŠä¿¡ä¾ç…§ç‰¹å®šçš„é †åºé€åˆ°å¤§å®¶æ‰‹ä¸Šï¼Œæ¯å€‹äººéƒ½æŒ‰ç…§æ”¶ä¿¡çš„é †åºä¾†è®€ä¿¡ï¼Œé€™æ¨£å°±ä¿è­‰äº†å¤§å®¶éƒ½æœ‰ç›¸åŒçš„ç†è§£ã€‚é€™å€‹éƒµå·®å°±åƒæ˜¯å…¨åºå»£æ’­ï¼Œä»–ä¿è­‰ä¿¡ä»¶æŒ‰ç…§ä¸€å®šçš„é †åºé€åˆ°æ¯å€‹äººæ‰‹ä¸Šï¼Œè€Œæ¯å€‹äººçš„å„²å­˜ç©ºé–“å°±åƒæ˜¯ä»–å€‘æ‰‹ä¸­çš„ä¿¡ä»¶ï¼ŒæŒ‰ç…§é †åºä¾†è®€å’Œç†è§£ã€‚  ä½¿ç”¨ç·šæ€§ä¸€è‡´æ€§å„²å­˜å¯¦ç¾å…¨åºå»£æ’­ï¼Œå°±åƒæ˜¯å¤§å®¶éƒ½æœ‰ä¸€å€‹å…±ç”¨çš„ä¿¡ç®±ï¼Œæ¯å€‹äººéƒ½å¯ä»¥åœ¨è£¡é¢æ”¾ä¿¡ï¼Œä½†ä¿¡ç®±æœ‰ä¸€å€‹ç‰¹æ®Šçš„é–ï¼Œåªå…è¨±æŒ‰ç…§ä¸€å®šçš„é †åºæ‰“é–‹ä¾†å–ä¿¡ã€‚é€™å€‹ä¿¡ç®±å°±æ˜¯ç·šæ€§ä¸€è‡´æ€§å„²å­˜ï¼Œå®ƒä¿è­‰å¤§å®¶æŒ‰ç…§ä¸€å®šçš„é †åºä¾†æ”¾å…¥å’Œå–å‡ºä¿¡ä»¶ï¼Œè€Œå…¨åºå»£æ’­å°±æ˜¯é€éé€™å€‹ä¿¡ç®±ä¾†ä¿è­‰ä¿¡ä»¶çš„é †åºã€‚  ç°¡å–®ä¾†èªªï¼Œå‰è€…æ˜¯é éƒµå·®ï¼ˆå…¨åºå»£æ’­ï¼‰ä¾†ä¿è­‰ä¿¡ä»¶é †åºï¼Œè®“å„²å­˜ä¿æŒä¸€è‡´ï¼›å¾Œè€…æ˜¯é ä¿¡ç®±ï¼ˆç·šæ€§ä¸€è‡´æ€§å„²å­˜ï¼‰ä¾†ä¿è­‰ä¿¡ä»¶é †åºï¼Œé€²è€Œå¯¦ç¾å…¨åºå»£æ’­ã€‚  è˜­ä¼¯ç‰¹æ™‚é–“æˆ³VSå…¨åºå»£æ’­     sequenceDiagram\n       participant   User1   as   ä½¿ç”¨è€…1\n       participant   User2   as   ä½¿ç”¨è€…2\n       participant   NodeA   as   ç¯€é»A\n       participant   NodeB   as   ç¯€é»B\n   \n       Note   over   User1  ,  User2  :   å˜—è©¦å‰µå»ºç›¸åŒçš„ä½¿ç”¨è€…åç¨±\n   \n       User1  ->>  NodeA  :   è«‹æ±‚å‰µå»ºå¸³æˆ¶ (ä½¿ç”¨è€…åç¨±: Alice)\n       User2  ->>  NodeB  :   è«‹æ±‚å‰µå»ºå¸³æˆ¶ (ä½¿ç”¨è€…åç¨±: Alice)\n   \n       Note   over   NodeA  ,  NodeB  :   ç”Ÿæˆè˜­ä¼¯ç‰¹æ™‚é–“æˆ³\n   \n       NodeA  ->>  NodeB  :   é€šçŸ¥å‰µå»ºè«‹æ±‚ (ä½¿ç”¨è€…åç¨±: Alice, è˜­ä¼¯ç‰¹æ™‚é–“æˆ³: L1)\n       Note   right of   NodeB  :   ç¶²è·¯å»¶é²\n   \n       NodeB  ->>  NodeA  :   é€šçŸ¥å‰µå»ºè«‹æ±‚ (ä½¿ç”¨è€…åç¨±: Alice, è˜­ä¼¯ç‰¹æ™‚é–“æˆ³: L2)\n       Note   right of   NodeA  :   ç¶²è·¯å»¶é²\n   \n       Note   over   NodeA  ,  NodeB  :   ç”±æ–¼ç¶²è·¯å•é¡Œï¼Œç¯€é»ç„¡æ³•æº–ç¢ºæ¯”è¼ƒè˜­ä¼¯ç‰¹æ™‚é–“æˆ³ï¼Œç„¡æ³•ç¢ºå®šå“ªå€‹è«‹æ±‚å…ˆä¾†ã€‚\n   \n       alt   ç¶²è·¯æ¢å¾©\n           NodeA  ->>  NodeB  :   é‡æ–°é€šçŸ¥å‰µå»ºè«‹æ±‚ (ä½¿ç”¨è€…åç¨±: Alice, è˜­ä¼¯ç‰¹æ™‚é–“æˆ³: L1)\n           NodeB  ->>  NodeA  :   é‡æ–°é€šçŸ¥å‰µå»ºè«‹æ±‚ (ä½¿ç”¨è€…åç¨±: Alice, è˜­ä¼¯ç‰¹æ™‚é–“æˆ³: L2)\n           Note   over   NodeA  ,  NodeB  :   ç¾åœ¨å¯ä»¥æ¯”è¼ƒè˜­ä¼¯ç‰¹æ™‚é–“æˆ³ï¼Œä½†å·²ç¶“å¤ªé²äº†ã€‚\n       else   ç¶²è·¯æœªæ¢å¾©\n           Note   over   NodeA  ,  NodeB  :   ç³»çµ±è¢«æ‹–è‡³åœæ©Ÿï¼Œç„¡æ³•è§£æ±ºè«‹æ±‚ã€‚\n       end\n     sequenceDiagram\n       participant   User1   as   ä½¿ç”¨è€…1\n       participant   User2   as   ä½¿ç”¨è€…2\n       participant   NodeA   as   ç¯€é»A\n       participant   NodeB   as   ç¯€é»B\n       participant   TotalOrderBroadcast   as   å…¨åºå»£æ’­æœå‹™\n   \n       Note   over   User1  ,  User2  :   å˜—è©¦å‰µå»ºç›¸åŒçš„ä½¿ç”¨è€…åç¨±\n   \n       User1  ->>  NodeA  :   è«‹æ±‚å‰µå»ºå¸³æˆ¶ (ä½¿ç”¨è€…åç¨±: Alice)\n       User2  ->>  NodeB  :   è«‹æ±‚å‰µå»ºå¸³æˆ¶ (ä½¿ç”¨è€…åç¨±: Alice)\n   \n       NodeA  ->>  TotalOrderBroadcast  :   ç™¼é€å‰µå»ºè«‹æ±‚ (ä½¿ç”¨è€…åç¨±: Alice)\n       NodeB  ->>  TotalOrderBroadcast  :   ç™¼é€å‰µå»ºè«‹æ±‚ (ä½¿ç”¨è€…åç¨±: Alice)\n   \n       Note   over   TotalOrderBroadcast  :   å…¨åºå»£æ’­æœå‹™ç¢ºä¿æ‰€æœ‰ç¯€é»çœ‹åˆ°ç›¸åŒé †åºçš„æ¶ˆæ¯\n   \n       TotalOrderBroadcast  ->>  NodeA  :   å‚³éå‰µå»ºè«‹æ±‚ (ä½¿ç”¨è€…åç¨±: Alice, é †åº: 1)\n       TotalOrderBroadcast  ->>  NodeB  :   å‚³éå‰µå»ºè«‹æ±‚ (ä½¿ç”¨è€…åç¨±: Alice, é †åº: 1)\n   \n       TotalOrderBroadcast  ->>  NodeA  :   å‚³éå‰µå»ºè«‹æ±‚ (ä½¿ç”¨è€…åç¨±: Alice, é †åº: 2)\n       TotalOrderBroadcast  ->>  NodeB  :   å‚³éå‰µå»ºè«‹æ±‚ (ä½¿ç”¨è€…åç¨±: Alice, é †åº: 2)\n   \n       Note   over   NodeA  ,  NodeB  :   ç¯€é»æ ¹æ“šå…¨åºå»£æ’­æœå‹™çš„é †åºè™•ç†è«‹æ±‚\n   \n       alt   é †åº1çš„è«‹æ±‚æˆåŠŸï¼Œé †åº2çš„è«‹æ±‚å¤±æ•—\n           NodeA  ->>  User1  :   å›æ‡‰è«‹æ±‚æˆåŠŸ\n           NodeB  ->>  User2  :   å›æ‡‰è«‹æ±‚å¤±æ•—\n       else   é †åº2çš„è«‹æ±‚æˆåŠŸï¼Œé †åº1çš„è«‹æ±‚å¤±æ•—\n           NodeA  ->>  User1  :   å›æ‡‰è«‹æ±‚å¤±æ•—\n           NodeB  ->>  User2  :   å›æ‡‰è«‹æ±‚æˆåŠŸ\n       end\n  9.4 åˆ†æ•£å¼äº‹å‹™èˆ‡å…±è­˜  ä»‹ç´¹ï¼š  å…±è­˜ï¼šç›®æ¨™æ˜¯è®“å¹¾å€‹ç¯€é»é”æˆä¸€è‡´  é ˜å°é¸èˆ‰ï¼š  å–®ä¸»è¤‡è£½çš„è³‡æ–™åº«ä¸­æ‰€æœ‰ç¯€é»éœ€è¦èˆ‡æŸå€‹é ˜å°è€…é”æˆä¸€è‡´ï¼Œå¦‚æœä¸€äº›ç¯€é»ç”±æ–¼ç¶²è·¯è€Œæ•…éšœå¯èƒ½æœƒå°é ˜å°æ¬Šæ­¸å±¬å¼•èµ·çˆ­è­°ã€‚æ‰€ä»¥å…±è­˜å°æ–¼é¿å…éŒ¯èª¤çš„æ•…éšœåˆ‡æ›è‡³é—œé‡è¦ï¼ŒéŒ¯èª¤çš„åˆ‡æ›æœƒå°è‡´å…©å€‹ç¯€é»éƒ½èªç‚ºè‡ªå·±æ˜¯é ˜å°è€…(è…¦è£‚ç¾è±¡)ã€‚  åŸå­æäº¤ï¼š  åœ¨å¤šç¯€é»æˆ–å¤šåˆ†å‰²æ§½çš„è³‡æ–™åº«ä¸­ï¼Œç‚ºä¿æŒäº‹å‹™çš„åŸå­æ€§ï¼ˆå…¨éƒ¨æäº¤æˆ–å…¨éƒ¨å›æ»¾ï¼‰ï¼Œæ‰€æœ‰ç¯€é»éœ€å°äº‹å‹™çµæœé”æˆå…±è­˜ï¼Œæ­¤å•é¡Œç¨±ç‚ºåŸå­æäº¤ã€‚åŸå­æäº¤èˆ‡å…±è­˜ç¨æœ‰å€åˆ¥ä½†å¯ç›¸äº’ç°¡åŒ–ï¼Œéé˜»å¡çš„åŸå­æäº¤æ¯”å…±è­˜æ›´ç‚ºå›°é›£ã€‚  å…±è­˜çš„ä¸å¯èƒ½æ€§  ä»‹ç´¹ï¼š  FLPçµæœæŒ‡å‡ºï¼Œåœ¨æœ‰ç¯€é»å¯èƒ½å´©æ½°é¢¨éšªçš„æƒ…æ³ä¸‹ï¼Œç„¡æ³•ç¸½æ˜¯é”æˆå…±è­˜ã€‚é€™å€‹çµæœæ˜¯åŸºæ–¼éåŒæ­¥ç³»çµ±æ¨¡å‹ã€‚ç„¶è€Œï¼Œè‹¥æ¼”ç®—æ³•èƒ½ä½¿ç”¨è¶…æ™‚æˆ–å…¶ä»–æ–¹æ³•ä¾†è­˜åˆ¥å¯èƒ½å´©æ½°çš„ç¯€é»ï¼Œæˆ–è€…åˆ©ç”¨éš¨æ©Ÿæ•¸ï¼Œå…±è­˜æˆç‚ºå¯èƒ½ã€‚å„˜ç®¡FLPå±•ç¤ºäº†ç†è«–ä¸Šçš„é™åˆ¶ï¼Œä½†ç¾å¯¦ä¸­çš„åˆ†æ•£å¼ç³»çµ±é€šå¸¸èƒ½é”æˆå…±è­˜ã€‚åœ¨æ¢è¨åŸå­æäº¤å•é¡Œæ™‚ï¼Œå…©éšæ®µæäº¤ï¼ˆ2PCï¼‰æ¼”ç®—æ³•å¸¸è¢«ç”¨ä¾†è§£æ±ºï¼Œå®ƒæ˜¯ä¸€ç¨®å…±è­˜æ¼”ç®—æ³•ï¼Œä½†ä¸æ˜¯æœ€ä½³çš„ã€‚é€šéå­¸ç¿’2PCï¼Œå¯ä»¥é€²ä¸€æ­¥æ¢ç´¢æ›´å¥½çš„ä¸€è‡´æ€§æ¼”ç®—æ³•ï¼Œå¦‚ZooKeeperçš„Zabå’Œetcdçš„Raftã€‚  åŸå­æäº¤èˆ‡å…©éšæ®µæäº¤  ä»‹ç´¹ï¼š  åŸå­æ€§ï¼š  äº‹å‹™çš„æ–¹å¼é€šå¸¸éƒ½æ˜¯ç”¨æ’¤éŠ·æˆ–ä¸Ÿæ£„çš„æ–¹å¼ä¾†è§£æ±ºè¡çªï¼ŒåŸå­æ€§å¯ä»¥é˜²æ­¢å¤±æ•—çš„äº‹ç‰©æ”ªäº‚è³‡æ–™åº«ï¼Œé¿å…äº†è³‡æ–™åº«é™·å…¥åŠæˆå“çµæœèˆ‡åŠæ›´æ–°ã€‚  é€™å°å¤šç‰©ä»¶äº‹å‹™å’Œç¶­è­·æ¬¡ç´šç´¢å¼•çš„è³‡æ–™åº«éå¸¸é‡è¦ï¼Œæ¯å€‹æ¬¡ç´šç´¢å¼•éƒ½æ˜¯èˆ‡ä¸»è³‡æ–™åˆ†é›¢çš„è³‡æ–™çµæ§‹ï¼Œå› æ­¤å¦‚æœä¿®æ”¹äº†ä¸€äº›è³‡æ–™ï¼Œå‰‡é‚„éœ€è¦åœ¨æ¬¡ç´šç´¢å¼•ä¸­é€²è¡Œç›¸æ‡‰çš„æ›´æ”¹ã€‚  åŸå­æ€§å¯ä»¥ç¢ºä¿æ¬¡ç´šç´¢å¼•èˆ‡ä¸»è³‡æ–™åº«ä¿æŒä¸€è‡´ã€‚  å¾å–®ç¯€é»åˆ°åˆ†æ•£å¼åŸå­æäº¤  ä»‹ç´¹ï¼š  åœ¨å–®å€‹æ•¸æ“šåº«ç¯€é»åŸ·è¡Œçš„äº‹å‹™ï¼ŒåŸå­æ€§é€šå¸¸ç”±å„²å­˜å¼•æ“å¯¦ç¾ã€‚  ç•¶å®¢æˆ¶ç«¯è«‹æ±‚è³‡æ–™åº«ç¯€é»æäº¤äº‹å‹™æ™‚ï¼Œè³‡æ–™åº«å°‡ä½¿äº‹å‹™çš„å¯«å…¥æŒä¹…åŒ–ï¼ˆé€šå¸¸åœ¨é å¯«å¼æ—¥èªŒä¸­ï¼Œè«‹åƒé–± â€œ   è®“ B æ¨¹æ›´å¯é  â€ï¼‰ï¼Œç„¶å¾Œå°‡æäº¤è¨˜éŒ„è¿½åŠ åˆ°ç£ç¢Ÿä¸­çš„æ—¥èªŒè£¡ã€‚å¦‚æœè³‡æ–™åº«åœ¨é€™å€‹éç¨‹ä¸­é–“å´©æ½°ï¼Œç•¶ç¯€é»é‡å•Ÿæ™‚ï¼Œäº‹å‹™æœƒå¾æ—¥èªŒä¸­æ¢å¾©ï¼šå¦‚æœæäº¤è¨˜éŒ„åœ¨å´©æ½°ä¹‹å‰æˆåŠŸåœ°å¯«å…¥ç£ç¢Ÿï¼Œå‰‡èªç‚ºäº‹å‹™è¢«æäº¤ï¼›å¦å‰‡ä¾†è‡ªè©²äº‹å‹™çš„ä»»ä½•å¯«å…¥éƒ½è¢«å›æ»¾ã€‚     sequenceDiagram\n       participant   Client   as   å®¢æˆ¶ç«¯\n       participant   Database   as   è³‡æ–™åº«ç¯€é»\n       participant   WAL   as   é å¯«å¼æ—¥èªŒ\n       participant   Disk   as   ç£ç¢Ÿ\n   \n       Client  ->>  Database  :   æäº¤äº‹å‹™è«‹æ±‚\n       Database  ->>  WAL  :   å¯«å…¥äº‹å‹™è³‡æ–™\n       WAL  -->>  Database  :   ç¢ºèªå¯«å…¥\n       Database  ->>  Disk  :   å°‡æäº¤è¨˜éŒ„è¿½åŠ åˆ°æ—¥èªŒ\n       Disk  -->>  Database  :   ç¢ºèªå¯«å…¥\n       Database  -->>  Client  :   æäº¤æˆåŠŸ\n   \n       alt   å´©æ½°ç„¶å¾Œé‡å•Ÿ\n           Database  ->>  Disk  :   æª¢æŸ¥æ—¥èªŒ\n           alt   æäº¤è¨˜éŒ„å·²å¯«å…¥\n               Disk  -->>  Database  :   äº‹å‹™å·²æäº¤\n           else   æäº¤è¨˜éŒ„æœªå¯«å…¥\n               Disk  -->>  Database  :   å›æ»¾äº‹å‹™\n           end\n       end\n  å–®ç¯€é»ï¼š  äº‹å‹™çš„æäº¤ä¸»è¦å–æ±ºæ–¼è³‡æ–™æŒä¹…åŒ–è½ç›¤çš„Â   é †åº ï¼šé¦–å…ˆæ˜¯è³‡æ–™ï¼Œç„¶å¾Œæ˜¯æäº¤è¨˜éŒ„ã€‚äº‹å‹™æäº¤æˆ–çµ‚æ­¢çš„é—œéµæ±ºå®šæ™‚åˆ»æ˜¯ç£ç¢Ÿå®Œæˆå¯«å…¥æäº¤è¨˜éŒ„çš„æ™‚åˆ»ï¼šåœ¨æ­¤ä¹‹å‰ï¼Œä»æœ‰å¯èƒ½ä¸­æ­¢ï¼ˆç”±æ–¼å´©æ½°ï¼‰ï¼Œä½†åœ¨æ­¤ä¹‹å¾Œï¼Œäº‹å‹™å·²ç¶“æäº¤ï¼ˆå³ä½¿è³‡æ–™åº«å´©æ½°ï¼‰ã€‚å› æ­¤ï¼Œæ˜¯å–®ä¸€çš„è£ç½®ï¼ˆé€£ç·šåˆ°å–®å€‹ç£ç¢Ÿçš„æ§åˆ¶å™¨ï¼Œä¸”æ›è¼‰åœ¨å–®è‡ºæ©Ÿå™¨ä¸Šï¼‰ä½¿å¾—æäº¤å…·æœ‰åŸå­æ€§ã€‚  å¤šç¯€é»ï¼š  åƒ…å‘æ‰€æœ‰ç¯€é»ç™¼é€æäº¤è«‹æ±‚ä¸¦ç¨ç«‹æäº¤æ¯å€‹ç¯€é»çš„äº‹å‹™æ˜¯ä¸å¤ çš„ã€‚é€™æ¨£å¾ˆå®¹æ˜“ç™¼ç”Ÿé•ååŸå­æ€§çš„æƒ…æ³ï¼šæäº¤åœ¨æŸäº›ç¯€é»ä¸ŠæˆåŠŸï¼Œè€Œåœ¨å…¶ä»–ç¯€é»ä¸Šå¤±æ•—ï¼š   æŸäº›ç¯€é»å¯èƒ½æœƒæª¢æ¸¬åˆ°é•åç´„æŸæˆ–è¡çªï¼Œå› æ­¤éœ€è¦ä¸­æ­¢ï¼Œè€Œå…¶ä»–ç¯€é»å‰‡å¯ä»¥æˆåŠŸé€²è¡Œæäº¤ã€‚å‡è¨­æŸå€‹ç¯€é»å·²ç¶“æœ‰æŸå€‹å”¯ä¸€éµæ‰€ä»¥è¢«è¿«åœæ­¢æŸäº›ç¯€é»å› ç‚ºæ²’æœ‰é•åå‰‡æˆåŠŸ  æŸäº›æäº¤è«‹æ±‚å¯èƒ½åœ¨ç¶²è·¯ä¸­ä¸Ÿå¤±ï¼Œæœ€çµ‚ç”±æ–¼è¶…æ™‚è€Œä¸­æ­¢ï¼Œè€Œå…¶ä»–æäº¤è«‹æ±‚å‰‡é€šéã€‚é †åºæœƒæœ‰å•é¡Œ  åœ¨æäº¤è¨˜éŒ„å®Œå…¨å¯«å…¥ä¹‹å‰ï¼ŒæŸäº›ç¯€é»å¯èƒ½æœƒå´©æ½°ï¼Œä¸¦åœ¨æ¢å¾©æ™‚å›æ»¾ï¼Œè€Œå…¶ä»–ç¯€é»å‰‡æˆåŠŸæäº¤ã€‚  å¦‚æœæŸäº›ç¯€é»æäº¤äº†äº‹å‹™ï¼Œä½†å…¶ä»–ç¯€é»å»æ”¾æ£„äº†é€™äº›äº‹å‹™ï¼Œé‚£éº¼é€™äº›ç¯€é»å°±æœƒå½¼æ­¤ä¸ä¸€è‡´ã€‚è€Œä¸”ä¸€æ—¦åœ¨æŸå€‹ç¯€é»ä¸Šæäº¤äº†ä¸€å€‹äº‹å‹™ï¼Œå¦‚æœäº‹å¾Œç™¼ç¾å®ƒåœ¨å…¶å®ƒç¯€é»ä¸Šè¢«ä¸­æ­¢äº†ï¼Œå®ƒæ˜¯ç„¡æ³•æ’¤å›çš„ã€‚å‡ºæ–¼é€™å€‹åŸå› ï¼Œä¸€æ—¦ç¢ºå®šäº‹å‹™ä¸­çš„æ‰€æœ‰å…¶ä»–ç¯€é»ä¹Ÿå°‡æäº¤ï¼Œç¯€é»å°±å¿…é ˆé€²è¡Œæäº¤ã€‚     sequenceDiagram\n       participant   ç¯€é»1\n       participant   ç¯€é»2\n       participant   ç¯€é»3\n   \n       ç¯€é»1  ->>  ç¯€é»2  :   å˜—è©¦æäº¤äº‹å‹™\n       ç¯€é»1  ->>  ç¯€é»3  :   å˜—è©¦æäº¤äº‹å‹™\n       Note   right of   ç¯€é»3  :   äº‹å‹™å·²æäº¤\n       ç¯€é»2  ->>  ç¯€é»1  :   æ”¾æ£„äº‹å‹™\n       Note   right of   ç¯€é»1  :   äº‹å‹™å·²æ”¾æ£„\n       Note   left of   ç¯€é»2  :   ç¯€é»é–“å­˜åœ¨ä¸ä¸€è‡´ç‹€æ…‹\n  äº‹å‹™æäº¤å¿…é ˆæ˜¯ä¸å¯æ’¤éŠ·çš„ ï¼Œäº‹å‹™æäº¤ä¹‹å¾Œï¼Œä¸èƒ½æ”¹è®Šä¸»æ„ï¼Œä¸¦è¿½æº¯æ€§åœ°ä¸­æ­¢äº‹å‹™ã€‚é€™å€‹è¦å‰‡çš„åŸå› æ˜¯ï¼Œä¸€æ—¦è³‡æ–™è¢«æäº¤ï¼Œå…¶çµæœå°±å°å…¶ä»–äº‹å‹™å¯è¦‹ï¼Œå› æ­¤å…¶ä»–å®¢æˆ¶ç«¯å¯èƒ½æœƒé–‹å§‹ä¾è³´é€™äº›è³‡æ–™ã€‚é€™å€‹åŸå‰‡æ§‹æˆäº†Â   è®€å·²æäº¤ Â éš”é›¢ç­‰ç´šçš„åŸºç¤ï¼Œåœ¨ â€œ   è®€å·²æäº¤ â€ ä¸€ç¯€ä¸­è¨è«–äº†é€™å€‹å•é¡Œã€‚å¦‚æœä¸€å€‹äº‹å‹™åœ¨æäº¤å¾Œè¢«å…è¨±ä¸­æ­¢ï¼Œæ‰€æœ‰é‚£äº›è®€å–äº†Â   å·²æäº¤å»åˆè¢«è¿½æº¯å®£å‘Šä¸å­˜åœ¨è³‡æ–™ Â çš„äº‹å‹™ä¹Ÿå¿…é ˆå›æ»¾ã€‚     sequenceDiagram\n       participant   ç¯€é»\n       participant   å®¢æˆ¶ç«¯1\n       participant   å®¢æˆ¶ç«¯2\n   \n       å®¢æˆ¶ç«¯1  ->>  ç¯€é»  :   æäº¤äº‹å‹™\n       Note   right of   ç¯€é»  :   äº‹å‹™å·²æäº¤\n       ç¯€é»  ->>  å®¢æˆ¶ç«¯2  :   é€šçŸ¥å·²æäº¤äº‹å‹™\n       å®¢æˆ¶ç«¯2  ->>  ç¯€é»  :   è®€å–å·²æäº¤æ•¸æ“š\n       Note   right of   ç¯€é»  :   äº‹å‹™è¢«æ’¤éŠ·ï¼ˆä¸å…è¨±ï¼‰\n       ç¯€é»  ->>  å®¢æˆ¶ç«¯1  :   é€šçŸ¥äº‹å‹™è¢«æ’¤éŠ·ï¼ˆéŒ¯èª¤ï¼‰\n       ç¯€é»  ->>  å®¢æˆ¶ç«¯2  :   é€šçŸ¥äº‹å‹™è¢«æ’¤éŠ·ï¼ˆéŒ¯èª¤ï¼‰\n  é›–ç„¶é‚„æ˜¯æœ‰è¾¦æ³•åœ¨äº‹å‹™äº‹å¾ŒåŸ·è¡Œä¸€å€‹è£œå„Ÿæ©Ÿåˆ¶ä¾†å–æ¶ˆï¼Œä½†å¾è³‡æ–™åº«çš„è§’åº¦ï¼Œè·¨äº‹å‹™æ­£ç¢ºæ€§çš„ä¿è­‰éƒ½å¿…é ˆè¦æ˜¯æ‡‰ç”¨è‡ªå·±è™•ç†ã€‚  å…©éšæ®µæäº¤ç°¡ä»‹  ä»‹ç´¹ï¼š   å…©éšæ®µæäº¤ï¼ˆtwo-phase commitï¼‰ Â æ˜¯ä¸€ç¨®ç”¨æ–¼å¯¦ç¾è·¨å¤šå€‹ç¯€é»çš„åŸå­äº‹å‹™æäº¤çš„æ¼”ç®—æ³•ï¼Œå³ç¢ºä¿æ‰€æœ‰ç¯€é»æäº¤æˆ–æ‰€æœ‰ç¯€é»ä¸­æ­¢ã€‚å®ƒæ˜¯åˆ†æ•£å¼è³‡æ–™åº«ä¸­çš„ç¶“å…¸æ¼”ç®—æ³•ã€‚2PC åœ¨æŸäº›è³‡æ–™åº«å…§éƒ¨ä½¿ç”¨ï¼Œä¹Ÿä»¥Â   XA äº‹å‹™ Â çš„å½¢å¼å°æ‡‰ç”¨å¯ç”¨ï¼ˆä¾‹å¦‚ Java Transaction API æ”¯æ´ï¼‰æˆ–ä»¥ SOAP Web æœå‹™çš„Â   WS-AtomicTransaction Â å½¢å¼æä¾›çµ¦æ‡‰ç”¨ã€‚    èªªæ˜äº† 2PC çš„åŸºæœ¬æµç¨‹ã€‚2PC ä¸­çš„æäº¤ / ä¸­æ­¢éç¨‹åˆ†ç‚ºå…©å€‹éšæ®µï¼ˆå› æ­¤è€Œå¾—åï¼‰ï¼Œè€Œä¸æ˜¯å–®ç¯€é»äº‹å‹™ä¸­çš„å–®å€‹æäº¤è«‹æ±‚ã€‚  ä½¿ç”¨è€…ç¶“éå”èª¿è€…é€²è¡Œé€šè¨Šï¼Œè€Œå”èª¿è€…æœƒé€²è¡Œå…©å€‹æ­¥é©Ÿ  1.å…ˆè·Ÿç¯€é»æºé€šèªªè¦å¯«å…¥è³‡æ–™  2.å•å„ç¯€é»æº–å‚™å¥½äº†?  3.èªå¾Œæäº¤  å”èª¿è€…(äº‹å‹™ç®¡ç†å™¨):  1.é€šå¸¸æœƒåœ¨å¤šç¯€é»äº‹å‹™å‡ºç¾  2.é€šå¸¸ä»¥åº«çš„æ–¹å¼å¯¦ç¾(Java EE)ï¼Œä¹Ÿå¯ä»¥åƒæ˜¯ç¨‹å¼æˆ–æ˜¯æœå‹™çš„æ–¹å¼Narayanaã€JOTMã€BTM æˆ– MSDTCã€‚  åƒèˆ‡è€…:  1.è³‡æ–™åº«ç¯€é»åœ¨æ–¼2PCé€šå¸¸æœƒç¨±ç‚ºé¤èˆ‡è€…  æ¯”å–»:  è¥¿æ–¹å‚³çµ±çµå©šå„€å¼  1.ç‰§å¸«å…ˆå•é›™æ–¹æ˜¯å¦è¦çµå©š(é›™æ–¹æ˜¯å¦éƒ½åœ¨)  2.é›™æ–¹å›å¾©â€æˆ‘é¡˜æ„â€  3.ç‰§å¸«å®£å¸ƒæ­£å¼æˆç‚ºå¤«å¦»  ç³»çµ±æ‰¿è«¾  2PCä¹‹æ‰€ä»¥å¯ä»¥ä¿è­‰åŸå­æ€§è§£èªª:   ç•¶æ‡‰ç”¨æƒ³è¦å•Ÿå‹•ä¸€å€‹åˆ†æ•£å¼äº‹å‹™æ™‚ï¼Œå®ƒå‘å”èª¿è€…è«‹æ±‚ä¸€å€‹äº‹å‹™ IDã€‚æ­¤äº‹å‹™ ID æ˜¯å…¨åŸŸæ€§å”¯ä¸€çš„ã€‚  æ‡‰ç”¨åœ¨æ¯å€‹åƒèˆ‡è€…ä¸Šå•Ÿå‹•å–®ç¯€é»äº‹å‹™ï¼Œä¸¦åœ¨å–®ç¯€é»äº‹å‹™ä¸Šæå¸¶ä¸Šé€™å€‹å…¨åŸŸæ€§äº‹å‹™ IDã€‚æ‰€æœ‰çš„è®€å¯«éƒ½æ˜¯åœ¨é€™äº›å–®ç¯€é»äº‹å‹™ä¸­å„è‡ªå®Œæˆçš„ã€‚å¦‚æœåœ¨é€™å€‹éšæ®µå‡ºç¾ä»»ä½•å•é¡Œï¼ˆä¾‹å¦‚ï¼Œç¯€é»å´©æ½°æˆ–è«‹æ±‚è¶…æ™‚ï¼‰ï¼Œå‰‡å”èª¿è€…æˆ–ä»»ä½•åƒèˆ‡è€…éƒ½å¯ä»¥ä¸­æ­¢ã€‚  ç•¶æ‡‰ç”¨æº–å‚™æäº¤æ™‚ï¼Œå”èª¿è€…å‘æ‰€æœ‰åƒèˆ‡è€…å‚³é€ä¸€å€‹Â   æº–å‚™ Â è«‹æ±‚ï¼Œä¸¦æ‰“ä¸Šå…¨åŸŸæ€§äº‹å‹™ ID çš„æ¨™è¨˜ã€‚å¦‚æœä»»æ„ä¸€å€‹è«‹æ±‚å¤±æ•—æˆ–è¶…æ™‚ï¼Œå‰‡å”èª¿è€…å‘æ‰€æœ‰åƒèˆ‡è€…å‚³é€é‡å°è©²äº‹å‹™ ID çš„ä¸­æ­¢è«‹æ±‚ã€‚  åƒèˆ‡è€…æ”¶åˆ°æº–å‚™è«‹æ±‚æ™‚ï¼Œéœ€è¦ç¢ºä¿åœ¨ä»»æ„æƒ…æ³ä¸‹éƒ½çš„ç¢ºå¯ä»¥æäº¤äº‹å‹™ã€‚é€™åŒ…æ‹¬å°‡æ‰€æœ‰äº‹å‹™è³‡æ–™å¯«å…¥ç£ç¢Ÿï¼ˆå‡ºç¾å´©æ½°ã€é›»æºæ•…éšœæˆ–ç¡¬ç¢Ÿç©ºé–“ä¸è¶³éƒ½ä¸èƒ½æ˜¯ç¨å¾Œæ‹’çµ•æäº¤çš„ç†ç”±ï¼‰ä»¥åŠæª¢æŸ¥æ˜¯å¦å­˜åœ¨ä»»ä½•è¡çªæˆ–é•åç´„æŸã€‚é€éå‘å”èª¿è€…å›ç­” â€œæ˜¯â€ï¼Œç¯€é»æ‰¿è«¾ï¼Œåªè¦è«‹æ±‚ï¼Œé€™å€‹äº‹å‹™ä¸€å®šå¯ä»¥ä¸å‡ºå·®éŒ¯åœ°æäº¤ã€‚æ›å¥è©±èªªï¼Œåƒèˆ‡è€…æ”¾æ£„äº†ä¸­æ­¢äº‹å‹™çš„æ¬Šåˆ©ï¼Œä½†æ²’æœ‰å¯¦éš›æäº¤ã€‚  ç•¶å”èª¿è€…æ”¶åˆ°æ‰€æœ‰æº–å‚™è«‹æ±‚çš„ç­”è¦†æ™‚ï¼Œæœƒå°±æäº¤æˆ–ä¸­æ­¢äº‹å‹™ä½œå‡ºæ˜ç¢ºçš„æ±ºå®šï¼ˆåªæœ‰åœ¨æ‰€æœ‰åƒèˆ‡è€…æŠ•è´Šæˆç¥¨çš„æƒ…æ³ä¸‹æ‰æœƒæäº¤ï¼‰ã€‚å”èª¿è€…å¿…é ˆæŠŠé€™å€‹æ±ºå®šå¯«åˆ°ç£ç¢Ÿä¸Šçš„äº‹å‹™æ—¥èªŒä¸­ï¼Œå¦‚æœå®ƒéš¨å¾Œå°±å´©æ½°ï¼Œæ¢å¾©å¾Œä¹Ÿèƒ½çŸ¥é“è‡ªå·±æ‰€åšçš„æ±ºå®šã€‚é€™è¢«ç¨±ç‚ºÂ   æäº¤é»ï¼ˆcommit pointï¼‰ ã€‚  ä¸€æ—¦å”èª¿è€…çš„æ±ºå®šè½ç›¤ï¼Œæäº¤æˆ–ä¸­æ­¢è«‹æ±‚æœƒç™¼é€çµ¦æ‰€æœ‰åƒèˆ‡è€…ã€‚å¦‚æœé€™å€‹è«‹æ±‚å¤±æ•—æˆ–è¶…æ™‚ï¼Œå”èª¿è€…å¿…é ˆæ°¸é ä¿æŒé‡è©¦ï¼Œç›´åˆ°æˆåŠŸç‚ºæ­¢ã€‚æ²’æœ‰å›é ­è·¯ï¼šå¦‚æœå·²ç¶“åšå‡ºæ±ºå®šï¼Œä¸ç®¡éœ€è¦å¤šå°‘æ¬¡é‡è©¦å®ƒéƒ½å¿…é ˆè¢«åŸ·è¡Œã€‚å¦‚æœåƒèˆ‡è€…åœ¨æ­¤æœŸé–“å´©æ½°ï¼Œäº‹å‹™å°‡åœ¨å…¶æ¢å¾©å¾Œæäº¤ â€”â€” ç”±æ–¼åƒèˆ‡è€…æŠ•äº†è´Šæˆï¼Œå› æ­¤æ¢å¾©å¾Œå®ƒä¸èƒ½æ‹’çµ•æäº¤ã€‚     sequenceDiagram\n       participant   App   as   æ‡‰ç”¨\n       participant   Coordinator   as   å”èª¿è€…\n       participant   Node1   as   åƒèˆ‡è€…1\n       participant   Node2   as   åƒèˆ‡è€…2\n       App  ->>  Coordinator  :   è«‹æ±‚äº‹å‹™ID\n       Coordinator  ->>  App  :   è¿”å›äº‹å‹™ID\n       App  ->>  Node1  :   å•Ÿå‹•å–®ç¯€é»äº‹å‹™(äº‹å‹™ID)\n       App  ->>  Node2  :   å•Ÿå‹•å–®ç¯€é»äº‹å‹™(äº‹å‹™ID)\n       Note   over   Node1  ,  Node2  :   åŸ·è¡Œäº‹å‹™ä¸­...\n       App  ->>  Coordinator  :   æº–å‚™æäº¤\n       Coordinator  ->>  Node1  :   æº–å‚™è«‹æ±‚(äº‹å‹™ID)\n       Coordinator  ->>  Node2  :   æº–å‚™è«‹æ±‚(äº‹å‹™ID)\n       Node1  ->>  Coordinator  :   æ˜¯\n       Node2  ->>  Coordinator  :   æ˜¯\n       Note   over   Coordinator  :   æ‰€æœ‰åƒèˆ‡è€…éƒ½å·²æº–å‚™å¥½\n       Coordinator  ->>  Coordinator  :   æ±ºå®šæäº¤ä¸¦è¨˜éŒ„åˆ°äº‹å‹™æ—¥èªŒ\n       Coordinator  ->>  Node1  :   æäº¤è«‹æ±‚(äº‹å‹™ID)\n       Coordinator  ->>  Node2  :   æäº¤è«‹æ±‚(äº‹å‹™ID)\n       Node1  ->>  Coordinator  :   æäº¤æˆåŠŸ\n       Node2  ->>  Coordinator  :   æäº¤æˆåŠŸ\n  çµè«–:  2PCå¯ä»¥ä¿è­‰åŸå­æ€§çš„åŸå› æ˜¯â€å”èª¿è€…è¿½è¹¤æ±ºå®šä¸¦ä½¿å…¶ä¸å¯æ’¤éŠ·â€  æ¯”å–»:  å›åˆ°è¥¿æ–¹çµå©šå„€å¼  1.ç‰§å¸«å†å•é›™æ–¹æ˜¯å¦è¦çµå©š(åªè¦å…¶ä¸­ä¸€æ”¾æ”¾æ£„ç‰§å¸«å°±ä¸å¯èƒ½æœƒç¹¼çºŒäº‹å‹™)  2.å…¶ä¸­æœ‰ä¸€å€‹äººæ˜å€’(æ²’æœ‰è½åˆ°\"æ­£å¼å®£å¸ƒæˆç‚ºå¤«å¦»â€)å› ç‚ºèªªå‡ºæˆ‘é¡˜æ„äº†æ‰€ä»¥é‚„æ˜¯æœ‰æ•ˆ  3.ç•¶æ˜å€’çš„é‚£å€‹äººé†’ä¾†ï¼Œå¯ä»¥é€éæŸ¥è©¢ç‰§å¸«çš„é ç´„æ—¥èªŒæŸ¥è©¢æ˜¯å¦çµå©šæˆåŠŸ  å”èª¿è€…å¤±æ•ˆ  å¦‚æœä»»ä½•ä¸€å€‹æº–å‚™è«‹æ±‚è¶…æ™‚ï¼Œå”èª¿è€…å°±æœƒçµ‚æ­¢äº‹å‹™ã€‚å¦‚æœæäº¤æˆ–çµ‚æ­¢è«‹æ±‚å¤±æ•—ã€‚å”èª¿è€…å°‡æœƒç„¡æ¢ä»¶é‡è©¦ã€‚  å¦‚æœå†å‡†ä¾¿å‰è«‹æ±‚å¤±æ•—ï¼Œåƒèˆ‡è€…å¯ä»¥å®‰å…¨çµ‚æ­¢äº‹å‹™ï¼Œå¿…é ˆç­‰å¾…å”èª¿è€…å›å¾©æäº¤çµ‚æ­¢æˆ–æ˜¯æˆåŠŸï¼Œä¸€æ—¦å”èª¿è€…å‡ºç¾ç¶²è·¯æˆ–æ˜¯å´©æ½°å•é¡Œï¼Œé¤èˆ‡è€…å°±åªèƒ½å‚»å‚»ç­‰å¾…ã€‚æ‰€ä»¥åƒèˆ‡è€…å°æ–¼é€™ç¨®äº‹å‹™ç‹€æ…‹ç¨±ç‚ºå­˜ç–‘æˆ–ä¸ç¢ºå®šã€‚     åœ– 9-10 åƒèˆ‡è€…æŠ•è´Šæˆç¥¨å¾Œï¼Œå”èª¿è€…å´©æ½°ã€‚è³‡æ–™åº« 1 ä¸çŸ¥é“æ˜¯å¦æäº¤æˆ–ä¸­æ­¢  é€™å¼µåœ–èªªæ˜äº†å”èª¿è€…åœ¨æäº¤éƒ¨åˆ†å‡ºç¾å•é¡Œå°è‡´åƒèˆ‡è€…1åªèƒ½å‘†å‘†çš„ç­‰å¾…ï¼Œå°‘äº†å”èª¿è€…çš„è¨Šæ¯åƒèˆ‡è€…ä¸æœƒçŸ¥é“äº‹å‹™å·²ç¶“æäº¤æˆ–æ˜¯æ”¾æ£„ã€‚åœ¨é€™ç¨®ç‹€æ³åº•ä¸‹åªèƒ½ç­‰å¾…å”èª¿è€…ï¼Œæ‰€ä»¥é€™å°±æ˜¯ç‚ºä»€éº¼åƒèˆ‡è€…éœ€è¦åœ¨æäº¤æˆ–çµ‚æ­¢ä¹‹å‰å…ˆå°‡â€æˆ‘é¡˜æ„â€å¯«åˆ°æ—¥èªŒçš„åŸå› å› ç‚ºæœ€å¾Œçš„æäº¤é‚„æ˜¯æœ‰å¯èƒ½å¤±æ•—ï¼Œä»»ä½•æ²’æœ‰å¯«åœ¨äº‹å‹™æ—¥èªŒçš„æäº¤ç´€éŒ„éƒ½æœƒè¢«çµ‚æ­¢ï¼Œæ‰€ä»¥2PCçš„æäº¤é»å°±æ˜¯å”èª¿è€…çš„å¸¸è¦å–®ç¯€é»åŸå­åŸå‰‡ã€‚     sequenceDiagram\n       participant   Coordinator   as   å”èª¿è€…\n       participant   Node1   as   åƒèˆ‡è€…1\n       participant   Node2   as   åƒèˆ‡è€…2\n       participant   Log1   as   åƒèˆ‡è€…1æ—¥èªŒ\n       participant   LogC   as   å”èª¿è€…æ—¥èªŒ\n       \n       Coordinator  ->>  Node1  :   æº–å‚™è«‹æ±‚(äº‹å‹™ID)\n       Coordinator  ->>  Node2  :   æº–å‚™è«‹æ±‚(äº‹å‹™ID)\n       Node1  ->>  Log1  :   å¯«å…¥\"æˆ‘é¡˜æ„\"(äº‹å‹™ID)\n       Node2  ->>  Coordinator  :   æ˜¯(äº‹å‹™ID)\n       Coordinator  ->>  LogC  :   å¯«å…¥æ±ºå®š:æäº¤(äº‹å‹™ID)\n       Note   over   Coordinator  :   å”èª¿è€…å‡ºç¾å•é¡Œï¼Œæš«æ™‚ç„¡æ³•é€šè¨Š\n       Note   over   Node1  :   ç­‰å¾…å”èª¿è€…çš„æäº¤/ä¸­æ­¢è«‹æ±‚...\n       Note   over   Coordinator  :   å”èª¿è€…æ¢å¾©\n       Coordinator  ->>  LogC  :   è®€å–äº‹å‹™æ—¥èªŒ(äº‹å‹™ID)\n       Coordinator  ->>  Node1  :   æäº¤è«‹æ±‚(äº‹å‹™ID)\n       Coordinator  ->>  Node2  :   æäº¤è«‹æ±‚(äº‹å‹™ID)\n       Node1  ->>  Coordinator  :   æäº¤æˆåŠŸ(äº‹å‹™ID)\n       Node2  ->>  Coordinator  :   æäº¤æˆåŠŸ(äº‹å‹™ID)\n  ä¸‰éšæ®µæäº¤  1.å…©éšæ®µæäº¤ï¼ˆ2PCï¼‰è¢«è¦–ç‚ºé˜»å¡çš„åŸå­æäº¤å”è­°ï¼Œå› ç‚ºåœ¨å”èª¿è€…æ•…éšœæ™‚æœƒé€ æˆåƒèˆ‡è€…çš„ç­‰å¾…ã€‚  2.ä¸‰éšæ®µæäº¤ï¼ˆ3PCï¼‰ä½œç‚º2PCçš„æ›¿ä»£æ–¹æ¡ˆï¼Œä½†å…¶æœ‰æ•ˆæ€§ä¾è³´æ–¼æœ‰é™çš„ç¶²è·¯å»¶é²å’Œç¯€é»éŸ¿æ‡‰æ™‚é–“ï¼Œé€™åœ¨å¯¦éš›ç³»çµ±ä¸­ä¸å¸¸è¦‹ã€‚  3.éé˜»å¡åŸå­æäº¤éœ€è¦å®Œç¾çš„æ•…éšœæª¢æ¸¬å™¨ä»¥å¯é åœ°åˆ¤æ–·ç¯€é»çš„ç‹€æ…‹ï¼Œä½†åœ¨ç„¡é™å»¶é²çš„ç¶²è·¯ä¸­ï¼Œè¶…æ™‚ä¸æ˜¯ä¸€å€‹å¯é çš„æ•…éšœæª¢æ¸¬æ©Ÿåˆ¶ã€‚  4.ç”±æ–¼é€™äº›æŒ‘æˆ°ï¼Œ2PCä»è¢«ä½¿ç”¨ï¼Œå„˜ç®¡å­˜åœ¨å”èª¿è€…æ•…éšœçš„å¯èƒ½æ€§ã€‚  å¯¦è¸ä¸­çš„åˆ†æ•£å¼äº‹å‹™  ä»‹ç´¹:  åˆ†æ•£å¼äº‹å‹™çš„åè²è­­è­½åƒåŠï¼Œå°¤å…¶æ˜¯é‚£äº›é€éå…©éšæ®µæäº¤å¯¦ç¾çš„ã€‚ä¸€æ–¹é¢ï¼Œå®ƒè¢«è¦–ä½œæä¾›äº†ä¸€å€‹é›£ä»¥å¯¦ç¾çš„é‡è¦çš„å®‰å…¨æ€§ä¿è­‰ï¼›å¦ä¸€æ–¹é¢ï¼Œå®ƒå€‘å› ç‚ºå°è‡´é‹ç¶­å•é¡Œï¼Œé€ æˆæ•ˆèƒ½ä¸‹é™ï¼Œåšå‡ºè¶…éèƒ½åŠ›ç¯„åœçš„æ‰¿è«¾è€Œé£½å—æ‰¹è©•ã€‚è¨±å¤šé›²æœå‹™ç”±æ–¼å…¶å°è‡´çš„é‹ç¶­å•é¡Œï¼Œè€Œé¸æ“‡ä¸å¯¦ç¾åˆ†æ•£å¼äº‹å‹™ã€‚  å ±å‘Šé¡¯ç¤ºMySQLçš„åˆ†æ•£äº‹å‹™æ¯”å–®ç¯€é»äº‹å‹™æ…¢äº†10å€ä»¥ä¸Šï¼Œ2PCä¸åªéœ€è¦ä½¿ç”¨è¼ƒé«˜çš„æ•ˆèƒ½å¤§éƒ¨åˆ†æ™‚é–“éƒ½æ˜¯åœ¨è™•ç†å´©æ½°æ¢å¾©æ‰€éœ€çš„å¼·åˆ¶å¯«å…¥(fsync)èˆ‡ç¶²è·¯å¾€è¿”ã€‚  fsync:    fsync  æ˜¯ä¸€å€‹åœ¨å¤šç¨®æ“ä½œç³»çµ±ä¸­ä½¿ç”¨çš„ç³»çµ±å‘¼å«ï¼Œå…¶ä¸»è¦ç›®çš„æ˜¯ç¢ºä¿æŒ‡å®šçš„æ–‡ä»¶æè¿°ç¬¦ï¼ˆfile descriptorï¼‰æ‰€é—œè¯çš„æ–‡ä»¶çš„æ‰€æœ‰å…ƒæ•¸æ“šå’Œå…ƒä¿¡æ¯å·²ç¶“å¾æ“ä½œç³»çµ±çš„ç·©è¡å€å¯«å…¥åˆ°åº•å±¤å­˜å„²ç³»çµ±ã€‚ç•¶ä¸€å€‹ç¨‹åºå¯«å…¥æ–‡ä»¶æ™‚ï¼Œæ“ä½œç³»çµ±å¯èƒ½æœƒå°‡æ•¸æ“šæš«æ™‚ä¿ç•™åœ¨ç·©è¡å€ä¸­ï¼Œä»¥ä¾¿ç¨å¾Œå†å°‡å®ƒå¯«å…¥ç£ç¢Ÿï¼Œä»¥æé«˜æ•ˆç‡ã€‚ç„¶è€Œï¼Œåœ¨æŸäº›æƒ…æ³ä¸‹ï¼Œç¨‹åºå¯èƒ½éœ€è¦ç¢ºä¿æ•¸æ“šå·²ç¶“è¢«å¯¦éš›å¯«å…¥ç£ç¢Ÿï¼Œä»¥é˜²æ­¢åœ¨ç³»çµ±å´©æ½°æˆ–å…¶ä»–æ•…éšœæƒ…æ³ä¸‹å¤±å»æ•¸æ“šã€‚  åˆ†æ•£å¼äº‹å‹™:  1.è³‡æ–™åº«å…§éƒ¨çš„åˆ†æ•£å¼äº‹å‹™  ç›¸åŒçš„è³‡æ–™åº«ä¾‹å¦‚ MySQL Clusterçš„NDBèˆ‡VoltDBï¼Œæ‰€æœ‰åƒèˆ‡äº‹å‹™çš„ç¯€é»éƒ½æ˜¯ä½¿ç”¨ç›¸åŒçš„è³‡æ–™åº«è»Ÿé«”ã€‚  2.ç•°æ§‹åˆ†æ•£å¼äº‹å‹™  ç”±å…©ç¨®æˆ–æ˜¯å…©ç¨®ä»¥ä¸Šä¸åŒæŠ€è¡“çµ„æˆï¼Œç”šè‡³æ˜¯éè³‡æ–™åº«ç³»çµ±(è¨Šæ¯ä»£ç†)ã€‚è·¨ç³»çµ±çš„åˆ†æ•£å¼äº‹å‹™å¿…é ˆè¦ç¢ºä¿åŸå­æäº¤ã€‚  æ°å¥½ä¸€æ¬¡çš„è¨Šæ¯è™•ç†  ç•°æ§‹çš„åˆ†æ•£å¼äº‹å‹™åªè¦èƒ½æä¾›æäº¤åŸå­æ€§ä¾†è¦–ç·šå®‰å…¨æäº¤ä¸¦ä¸”ä¿è­‰åªè¢«è™•ç†ä¸€æ¬¡ï¼Œå‡è¨­éƒµä»¶ä¼ºæœå™¨ä¸æ”¯æ´2PCï¼Œå¦‚æœè¨Šæ¯è™•ç†å¤±æ•—ä¸¦é‡è©¦å‰‡å¯èƒ½å°è‡´é‡è¤‡ç™¼é€éƒµä»¶å•é¡Œï¼Œä½†æ˜¯å¦‚æœè¨Šæ¯éƒ½å¯ä»¥åœ¨äº‹å‹™çµ‚æ­¢å›æ»¾ï¼Œé‚£é€™æ¨£è™•ç†æµç¨‹å°±å¯ä»¥å®‰å…¨åœ°é‡è©¦è€Œä¸”å°±å¥½åƒä»€éº¼éŒ¯èª¤éƒ½æ²’æœ‰ç™¼ç”Ÿéä¸€æ¨£ã€‚  XAäº‹å‹™  1.X/Open XAï¼ˆæ“´å……å¥—ä»¶æ¶æ§‹ï¼ŒeXtended Architectureï¼‰**æ˜¯ä¸€å€‹æ–¼1991å¹´æ¨å‡ºçš„æ¨™æº–ï¼Œæ—¨åœ¨é€šéå…©éšæ®µæäº¤å¯¦ç¾ç•°æ§‹æŠ€è¡“é–“çš„æ•´åˆï¼Œå»£æ³›æ‡‰ç”¨æ–¼è¨±å¤šå‚³çµ±é—œè¯å¼è³‡æ–™åº«å’Œè¨Šæ¯ä»£ç†ä¸­ã€‚  2.  XAéç¶²è·¯å”è­°ï¼Œè€Œæ˜¯ä¸€å€‹C API ï¼Œç”¨æ–¼é€£ç·šè‡³äº‹å‹™å”èª¿è€…ã€‚å®ƒä¹Ÿæœ‰åœ¨å…¶ä»–èªè¨€ä¾‹å¦‚Javaä¸­çš„å¯¦ç¾ï¼Œå¦‚Javaäº‹å‹™API (JTA)ã€‚  3.  äº‹å‹™å”èª¿è€…éœ€å¯¦ç¾XA API ï¼Œé€šå¸¸æ˜¯ä½œç‚ºä¸€å€‹åº«è¼‰å…¥åˆ°ç™¼èµ·äº‹å‹™çš„æ‡‰ç”¨ç¨‹åºä¸­ï¼Œä¸¦ä½¿ç”¨æœ¬åœ°ç£ç¢Ÿä¸Šçš„æ—¥èªŒè¨˜éŒ„äº‹å‹™çš„æ±ºå®šï¼ˆæäº¤/ä¸­æ­¢ï¼‰ã€‚  4.  å¦‚æœæ‡‰ç”¨ç¨‹åºå´©æ½°ï¼Œå”èª¿è€…ä¹Ÿæœƒå¤±æ•ˆ ã€‚å¿…é ˆé‡å•Ÿä¼ºæœå™¨ä¸¦è®“å”èª¿ç¨‹åºåº«è®€å–æ—¥èªŒä»¥æ¢å¾©æ¯å€‹äº‹å‹™çš„æäº¤/ä¸­æ­¢çµæœï¼Œç„¶å¾Œå”èª¿è€…æ‰èƒ½è¦æ±‚åƒèˆ‡è€…æäº¤æˆ–ä¸­æ­¢ã€‚  5.  é€šè¨Šå¿…é ˆé€éå®¢æˆ¶ç«¯åº« ï¼Œå› ç‚ºè³‡æ–™åº«ä¼ºæœå™¨ä¸èƒ½ç›´æ¥è¯çµ¡å”èª¿è€…ã€‚é€™æ„å‘³è‘—æ‰€æœ‰çš„äº‹å‹™å”èª¿éƒ½æ˜¯é€šéæ‡‰ç”¨ç¨‹åºé€²è¡Œçš„ã€‚  çµè«–:  XAäº‹å‹™å°±æ˜¯ä¸€ç¨®ä»¥APIçš„å½¢å¼è®“è¨±å¤šæƒ³è¦æ•´åˆä¸åŒç³»çµ±ä¸Šäº‹å‹™ç”¨çš„é€šç”¨æºé€šä»‹é¢ï¼Œä¸¦ä¿è­‰æ•¸æ“šçš„ä¸€è‡´æ€§èˆ‡å®Œæ•´æ€§ã€‚æˆ‘çš„èªçŸ¥æ˜¯XAäº‹å‹™å°±æ˜¯å¤šç³»çµ±çš„å”èª¿è€…  å‡è¨­:    åˆå§‹åŒ–äº‹å‹™   æ‚¨çš„æ‡‰ç”¨ç¨‹åºé¦–å…ˆæœƒå‘äº‹å‹™å”èª¿è€…ç™¼èµ·ä¸€å€‹æ–°çš„äº‹å‹™ã€‚   æº–å‚™éšæ®µ   æ‡‰ç”¨ç¨‹åºå°‡åŸ·è¡Œå¿…è¦çš„æ“ä½œï¼Œä¾‹å¦‚ï¼š\n   åœ¨MySQLä¸­æ’å…¥ä¸€æ¢æ–°çš„è¨˜éŒ„ã€‚  åœ¨Redisä¸­è¨­ç½®ä¸€å€‹æ–°çš„key-valueå°ã€‚  åœ¨RabbitMQä¸­ç™¼å¸ƒä¸€æ¢æ–°çš„è¨Šæ¯ã€‚  æ¯å€‹ç³»çµ±çš„æ“ä½œéƒ½æœƒé€šéXA APIå‘ŠçŸ¥äº‹å‹™å”èª¿è€…å®ƒå€‘å·²ç¶“æº–å‚™å¥½æäº¤æˆ–å›æ»¾ã€‚   æäº¤æˆ–å›æ»¾   å¦‚æœæ‰€æœ‰çš„æ“ä½œéƒ½æˆåŠŸæº–å‚™å¥½ï¼Œäº‹å‹™å”èª¿è€…æœƒå‘ŠçŸ¥æ‰€æœ‰çš„ç³»çµ±æäº¤äº‹å‹™ã€‚  å¦‚æœä»»ä½•ä¸€å€‹æ“ä½œå ±å‘Šå®ƒä¸èƒ½æäº¤ï¼Œæˆ–è€…åœ¨æº–å‚™éšæ®µå‡ºç¾éŒ¯èª¤ï¼Œäº‹å‹™å”èª¿è€…æœƒå‘ŠçŸ¥æ‰€æœ‰çš„ç³»çµ±å›æ»¾äº‹å‹™ã€‚   çµæŸäº‹å‹™   ä¸€æ—¦æ‰€æœ‰çš„ç³»çµ±éƒ½å ±å‘Šäº‹å‹™å·²ç¶“è¢«æäº¤æˆ–å›æ»¾ï¼Œäº‹å‹™å”èª¿è€…æœƒçµæŸé€™å€‹äº‹å‹™ã€‚     sequenceDiagram\n       participant   App   as   Application\n       participant   TM   as   Transaction Manager\n       participant   MySQL\n       participant   Redis\n       participant   RabbitMQ\n       \n       App  ->>  TM  :   Start Transaction\n       TM  ->>  MySQL  :   Prepare\n       TM  ->>  Redis  :   Prepare\n       TM  ->>  RabbitMQ  :   Prepare\n       MySQL  ->>  TM  :   Ready\n       Redis  ->>  TM  :   Ready\n       RabbitMQ  ->>  TM  :   Ready\n       TM  ->>  MySQL  :   Commit\n       TM  ->>  Redis  :   Commit\n       TM  ->>  RabbitMQ  :   Commit\n       MySQL  ->>  TM  :   Acknowledge Commit\n       Redis  ->>  TM  :   Acknowledge Commit\n       RabbitMQ  ->>  TM  :   Acknowledge Commit\n       TM  ->>  App  :   Transaction Completed\n  é€™æ˜¯æˆ‘æƒ³åƒä¸­XAäº‹å‹™ç•¶ä½œå”èª¿è€…å¯èƒ½æœƒåšçš„äº‹æƒ…  æ‡·ç–‘æŒæœ‰é–  ç‚ºä»€éº¼æˆ‘å€‘é€™éº¼é—œå¿ƒå­˜ç–‘äº‹å‹™ï¼Ÿç³»çµ±çš„å…¶ä»–éƒ¨åˆ†å°±ä¸èƒ½ç¹¼çºŒæ­£å¸¸å·¥ä½œï¼Œç„¡è¦–é‚£äº›çµ‚å°‡è¢«æ¸…ç†çš„å­˜ç–‘äº‹å‹™å—ï¼Ÿ  1.å¦‚æœå…¶ä»–éƒ¨åˆ†å¦‚æœç¹¼çºŒé‹ä½œæœƒå°è‡´é«’å¯«ï¼Œæˆ–æ˜¯è³‡æ–™ä¸ä¸€è‡´æ€§ã€‚  2.å¦‚æœå”èª¿è€…å´©æ½°ï¼Œäº‹å‹™å¿…é ˆåœ¨æ•´å€‹å­˜ç–‘æœŸé–“æŒæœ‰é€™å€‹é–ï¼Œé€™å¯èƒ½å°è‡´æ‡‰ç”¨å¤§é¢ç©ä¸å¯ç”¨ï¼Œç›´åˆ°å­˜ç–‘äº‹å‹™å¾—åˆ°è§£æ±ºã€‚  3.å­˜ç–‘äº‹å‹™æ˜¯å•é¡Œçš„æ ¸å¿ƒï¼Œå› ç‚ºå®ƒå€‘æŒæœ‰è³‡æ–™åº«çš„é–ï¼Œä¸¦é˜»æ­¢å…¶ä»–äº‹å‹™è¨ªå•ç›¸åŒçš„è³‡æ–™è¡Œã€‚  çµè«–ï¼š  å›åˆ°9-9é€™è£¡å­˜ç–‘äº‹å‹™ä¸¦æ²’æœ‰èªªæ˜çš„å¾ˆæ¸…æ¥šä½†æ˜¯ç¶“éæŸ¥è­‰éå¾Œæ‡‰è©²æ˜¯9-9çš„ç°è‰²éƒ¨åˆ†locks held by transactionï¼Œåœ¨é€™å€‹ç‹€æ³åº•ä¸‹æ‰€æœ‰éœ€è¦ä½¿ç”¨äº‹å‹™çš„ç¯€é»éƒ½æœƒè¢«é€™å€‹é–å¡æ­»ã€‚     sequenceDiagram\n       participant   å”èª¿è€…\n       participant   è³‡æ–™åº«\n       participant   äº‹å‹™A\n       participant   äº‹å‹™B\n   \n       äº‹å‹™A  ->>  è³‡æ–™åº«  :   é–‹å§‹äº‹å‹™, ç²å–è¡Œé–\n       Note   right of   è³‡æ–™åº«  :   è¡Œé–è¢«æŒæœ‰\n       è³‡æ–™åº«  -->>  å”èª¿è€…  :   é€šçŸ¥äº‹å‹™Açš„è¡Œé–\n       å”èª¿è€…  ->>  è³‡æ–™åº«  :   ä¿æŒè¡Œé–ç›´è‡³æäº¤æˆ–ä¸­æ­¢\n       äº‹å‹™B  ->>  è³‡æ–™åº«  :   é–‹å§‹äº‹å‹™, å˜—è©¦ç²å–ç›¸åŒè¡Œçš„é–\n       Note   right of   è³‡æ–™åº«  :   äº‹å‹™Bè¢«é˜»å¡\n       è³‡æ–™åº«  -->>  å”èª¿è€…  :   é€šçŸ¥äº‹å‹™Bçš„é˜»å¡\n       å”èª¿è€…  -->>  äº‹å‹™A  :   è«‹æ±‚æäº¤æˆ–ä¸­æ­¢äº‹å‹™\n       äº‹å‹™A  ->>  è³‡æ–™åº«  :   æäº¤äº‹å‹™\n       è³‡æ–™åº«  -->>  å”èª¿è€…  :   é€šçŸ¥äº‹å‹™Açš„æäº¤\n       å”èª¿è€…  ->>  è³‡æ–™åº«  :   é‡‹æ”¾äº‹å‹™Açš„è¡Œé–\n       Note   right of   è³‡æ–™åº«  :   è¡Œé–è¢«é‡‹æ”¾\n       è³‡æ–™åº«  -->>  äº‹å‹™B  :   ç²å–è¡Œé–, ç¹¼çºŒäº‹å‹™\n  å¾å”èª¿è€…æ•…éšœä¸­æ¢å¾©  ç†è«–ä¸Šå”èª¿è€…å´©æ½°å¾Œä¸¦é‡æ–°å•Ÿå‹•ï¼Œæ‡‰è©²å¯ä»¥å¾æ—¥èªŒä¸­æ¢å¾©ï¼Œä¸¦è§£æ±ºæ‰€æœ‰çš„å­˜ç–‘äº‹å‹™ã€‚ç„¶è€Œå¯¦éš›çš„ç³»çµ±å¾ˆæœ‰å¯èƒ½æœƒç”¢ç”Ÿå­¤ç«‹çš„äº‹å‹™ï¼Œå­¤ç«‹äº‹å‹™æœƒå‡ºç¾åœ¨å”èª¿è€…ç„¡æ³•ç¢ºèªäº‹å‹™çµæœçš„ç‹€æ³ç™¼ç”Ÿ(ä¾‹å¦‚äº‹å‹™æ—¥èªŒç”±æ–¼è»Ÿé«”éŒ¯èª¤ä¸Ÿå¤±æˆ–æå£)ã€‚ç•¶ç„¶é€™ç¨®ç‹€æ³äº‹å‹™åŸºæœ¬ä¸Šç„¡æ³•è‡ªå·±è§£æ±ºï¼Œæ‰€ä»¥é€™äº›é–å°±æœƒå¡åœ¨è³‡æ–™åº«ä¸­é˜»å¡å…¶ä»–äº‹å‹™ã€‚  çœŸæ­£çš„åŸå› æ˜¯å› ç‚º2PCçš„å¯¦è¸ä¸­å³æ™‚é‡æ–°å•Ÿå‹•ä¹Ÿæœƒä¿ç•™å­˜ç–‘äº‹å‹™é–(ç‚ºäº†ä¿æŒåŸå­æ€§ä¿è­‰)ï¼Œå”¯ä¸€çš„æ–¹å¼å°±æ˜¯è®“ç®¡ç†è€…æ‰‹å‹•æ±ºå®šæäº¤é‚„æ˜¯å›æ»¾ï¼Œé€™æ™‚å€™ç®¡ç†è€…å°±è¦ä¸€ä¸€å»æŸ¥çœ‹å­˜ç–‘äº‹å‹™çš„åƒèˆ‡è€…(æ˜å€’çš„é‚£å€‹è«‹ä»–å†èªªä¸€æ¬¡æˆ‘é¡˜æ„ï¼Œæˆ–æ˜¯æœ‰é»åƒæ˜¯gitçš„åŒä¸€ä»½æ–‡ä»¶å¤šäººä¿®æ”¹éœ€è¦äººç‚ºè§£æ±ºè¡çª)ã€‚  è¨±å¤šXAçš„å¯¦è¸éƒ½æœ‰ä¸€å€‹å«åšå•Ÿç™¼å¼æ±ºç­–ï¼Œå…è¨±åƒèˆ‡è€…å–®æ–¹é¢æ±ºå®šæäº¤æˆ–æ˜¯æ”¾æ£„ï¼Œç„¡éœ€å”èª¿è€…ä½œå‡ºæœ€çµ‚æ±ºå®šã€‚ä½†æ˜¯å£è™•å°±æ˜¯å¯èƒ½ç ´å£äº†åŸå­æ€§ï¼Œæœ‰è¶£çš„æ˜¯å•Ÿç™¼å¼ä»£è¡¨çš„æ˜¯å¯èƒ½ç ´å£åŸå­æ€§çš„å§”å©‰èªªæ³•ï¼Œå•Ÿç™¼å¼æ±ºç­–åªæ˜¯ç‚ºäº†é€ƒå‡ºç½é›£æ€§çš„æƒ…æ³è€Œæº–å‚™(  å…¶å¯¦ç™¼éŒ¢æˆ–æ˜¯ç™¼å¼µé›»å½±ç¥¨æˆ–è¨±å¯ä»¥è§£æ±º )ã€‚  åˆ†æ•£å¼äº‹å‹™çš„é™åˆ¶  XAäº‹å‹™è§£æ±ºäº†å¤šå€‹åƒèˆ‡è€…ç›¸äº’ä¸€è‡´çš„å¯¦ç¾å’Œé‡è¦å•é¡Œï¼Œä½†ä¹Ÿå¼•å…¥äº†åš´é‡çš„ç¶­é‹å•é¡Œï¼Œäº‹å‹™å”èª¿è€…æœ¬èº«å°±æ˜¯ä¸€ç¨®è³‡æ–™åº«ï¼Œå› æ­¤éœ€è¦åƒå…¶ä»–é‡è¦è³‡æ–™åº«ä¸€æ¨£å°å¿ƒæ“ä½œã€‚  1.å¦‚æœå”èª¿è€…æ²’æœ‰HAï¼Œå¯èƒ½æœƒå°è‡´å­˜ç–‘äº‹å‹™é–æ­»ï¼Œä»¤äººé©šè¨çš„æ˜¯å¥½åƒå¾ˆå¤šå”èª¿è€…éƒ½æ²’æœ‰HAæˆ–è€…åªæœ‰åŸºæœ¬çš„è¤‡è£½æ”¯æ´\n2.å¼•å…¥å”èª¿è€…å¾Œï¼Œé–“æ¥åœ°å¼•å…¥äº†ç³»çµ±ç‹€æ…‹ã€‚é€šå¸¸çš„HTTPæœå‹™æ˜¯ç„¡ç‹€æ…‹çš„ï¼Œä½†ä¸€æ—¦åŠ å…¥äº†å”èª¿è€…ï¼Œå”èª¿è€…çš„æ—¥èªŒå°±å¿…é ˆæŒä¹…åŒ–ä»¥ä¿å­˜ç³»çµ±çš„ç‹€æ…‹ã€‚å› æ­¤ï¼Œåœ¨å”èª¿è€…è³‡æ–™åº«å´©æ½°å¾Œï¼Œå¿…é ˆèƒ½å¤ æ¢å¾©å­˜ç–‘äº‹å‹™ã€‚  3.ç”±æ–¼XAå”è­°è¦å…¼å®¹å¤šç¨®ä¸åŒçš„è³‡æ–™ç³»çµ±ï¼Œå®ƒå¿…é ˆæ¡ç”¨æ‰€æœ‰ç³»çµ±å…±é€šçš„åŸºæœ¬æ©Ÿèƒ½ã€‚ä¾‹å¦‚ï¼ŒXAç„¡æ³•æª¢æ¸¬è·¨ä¸åŒç³»çµ±çš„æ­»é–ï¼Œå› ç‚ºé€™éœ€è¦ä¸€å€‹æ¨™æº–çš„å”è­°ä¾†äº¤æ›å„å€‹äº‹å‹™æ­£åœ¨ç­‰å¾…çš„é–çš„è³‡è¨Šï¼Œè€ŒXAä¸¦æœªæä¾›é€™æ¨£çš„å”è­°ã€‚  4.ç›¸å°æ–¼XAï¼Œé‡å°è³‡æ–™åº«å…§éƒ¨çš„åˆ†æ•£å¼äº‹å‹™ï¼Œé™åˆ¶ä¸æ˜¯é‚£éº¼åš´æ ¼ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å¯¦ç¾åˆ†æ•£å¼ç‰ˆæœ¬çš„SSIã€‚ç„¶è€Œï¼Œä»ç„¶å­˜åœ¨ä¸€äº›å•é¡Œï¼šä½¿ç”¨å…©éšæ®µæäº¤ï¼ˆ2PCï¼‰æˆåŠŸæäº¤ä¸€å€‹äº‹å‹™éœ€è¦å¾—åˆ°æ‰€æœ‰åƒèˆ‡è€…çš„å›æ‡‰ã€‚æ‰€ä»¥ï¼Œå¦‚æœç³»çµ±çš„ä»»ä½•ä¸€éƒ¨åˆ†å‡ºç¾æ•…éšœï¼Œäº‹å‹™å°±æœƒå¤±æ•—ã€‚å› æ­¤ï¼Œåˆ†æ•£å¼äº‹å‹™æœ‰æ”¾å¤§å¤±æ•ˆï¼ˆamplifying failuresï¼‰çš„é¢¨éšªï¼Œé€™èˆ‡æˆ‘å€‘æ§‹å»ºå®¹éŒ¯ç³»çµ±çš„ç›®æ¨™æ˜¯ç›¸é•èƒŒçš„ã€‚  å®¹éŒ¯å…±è­˜  ä»‹ç´¹ï¼š  å…±è­˜ï¼å¤šå€‹ç¯€é»å°±æŸå€‹äº‹ä»¶é”æˆä¸€è‡´  ä¾‹å¦‚å¤šå€‹äººåŒæ™‚å˜—è©¦å®šé£›æ©Ÿæœ€å¾Œä¸€å€‹ä½ç½®ï¼Œå…±è­˜æ¼”ç®—æ³•å¯ä»¥ç”¨ä¾†ç¢ºå®šé€™äº›äº’ä¸ç›¸å®¹çš„æ“ä½œï¼Œæœ€çµ‚æ±ºå®šå“ªä¸€å€‹æ˜¯è´å®¶  ä¸€å€‹æˆ–å¤šå€‹ç¯€é»å¯ä»¥æè­°æŸäº›å€¼ï¼Œè€Œå…±è­˜æ¼”ç®—æ³•æ±ºå®šæ¡ç”¨æŸå€‹å€¼ã€‚  ä¾‹å¦‚ï¼š  åœ¨è¨‚é£›æ©Ÿç¥¨çš„æ™‚å€™ï¼Œç•¶åŒæ™‚å¤šå€‹å®¢æˆ¶å˜—è©¦è¨‚è³¼æœ€å¾Œä¸€å€‹åº§ä½æ™‚ï¼Œè™•ç†requestçš„æ¯å€‹ç¯€é»å¯ä»¥æè­°å°‡è¦æœå‹™çš„å®¢æˆ¶IDï¼Œè€Œæ±ºå®šæŒ‡æ˜å“ªå€‹å®¢æˆ¶è¨‚åˆ°åº§ä½  å…±è­˜æ¼”ç®—æ³•å¿…é ˆæ»¿è¶³ä»¥ä¸‹æ€§è³ªï¼š  çµ±ä¸€å…±è­˜ï¼Œç›¸ç•¶æ–¼ä¸å¯é æ•…éšœæª¢æ¸¬å™¨çš„éåŒæ­¥ç³»çµ±ä¸­çš„å¸¸è¦å…±è­˜ï¼Œå­¸è¡“æ–‡ç»é€šå¸¸æŒ‡çš„æ˜¯processè€Œä¸æ˜¯ç¯€é»ã€‚åœ¨é€™è£¡ä½¿ç”¨ç¯€é»ã€‚  å±¬æ€§è§£é‡‹ï¼š   ä¸€è‡´åŒæ„ï¼ˆUniform agreementï¼‰  æ²’æœ‰å…©å€‹ç¯€é»çš„æ±ºå®šä¸åŒã€‚  å®Œæ•´æ€§ï¼ˆIntegrityï¼‰  æ²’æœ‰ç¯€é»æ±ºå®šå…©æ¬¡ã€‚  æœ‰æ•ˆæ€§ï¼ˆValidityï¼‰  å¦‚æœä¸€å€‹ç¯€é»æ±ºå®šäº†å€¼Â   v Â ï¼Œå‰‡Â   v Â ç”±æŸå€‹ç¯€é»æ‰€æè­°ã€‚  çµ‚æ­¢ï¼ˆTerminationï¼‰  ç”±æ‰€æœ‰æœªå´©æ½°çš„ç¯€é»ä¾†æœ€çµ‚æ±ºå®šå€¼ã€‚    å…±è­˜æ ¸å¿ƒå±¬æ€§ ï¼š   åœ¨å…±è­˜æ¼”ç®—æ³•çš„é ˜åŸŸä¸­ï¼Œ\"ä¸€è‡´åŒæ„\"ï¼ˆAgreementï¼‰ã€\"å®Œæ•´æ€§\"ï¼ˆIntegrityï¼‰å’Œ\"æœ‰æ•ˆæ€§\"ï¼ˆValidityï¼‰æ˜¯ä¸‰å€‹åŸºæœ¬çš„å±¬æ€§ï¼Œå®ƒå€‘å…±åŒå®šç¾©äº†ä¸€å€‹è‰¯å¥½å…±è­˜æ¼”ç®—æ³•çš„åŸºæœ¬è¦æ±‚ã€‚   ä¸€è‡´åŒæ„ï¼ˆAgreementï¼‰ ï¼š\n   é€™å€‹å±¬æ€§è¦æ±‚æ‰€æœ‰éå¤±æ•ˆçš„ç¯€é»å¿…é ˆé”æˆå…±è­˜ï¼Œå³å®ƒå€‘éƒ½å¿…é ˆåŒæ„åŒä¸€å€‹å€¼ã€‚æ‰€æœ‰äººå¿…é ˆé”æˆç›¸åŒçš„æ±ºå®šã€‚   å®Œæ•´æ€§ï¼ˆIntegrityï¼‰ ï¼š\n   å®Œæ•´æ€§è¦æ±‚ä¸€å€‹å€¼ä¸€æ—¦è¢«é¸å®šï¼Œå°±ä¸æ‡‰è©²è¢«æ”¹è®Šã€‚æ›å¥è©±èªªï¼Œæ¯å€‹ç¯€é»åªèƒ½æ¥å—ä¸€å€‹å€¼ï¼Œä¸¦ä¸”ä¸€æ—¦å€¼è¢«æ±ºå®šï¼Œå°±ä¸èƒ½æ›´æ”¹ã€‚   æœ‰æ•ˆæ€§ï¼ˆValidityï¼‰ ï¼š\n   æœ‰æ•ˆæ€§è¦æ±‚è¢«é¸å®šçš„å€¼å¿…é ˆæ˜¯ç”±æŸå€‹ç¯€é»æè­°çš„å€¼ï¼Œè€Œä¸æ‡‰æ˜¯ä¸€å€‹éš¨æ„å‰µé€ çš„å€¼ã€‚é€™å€‹å±¬æ€§ä¸»è¦æ˜¯ç‚ºäº†é¿å…æŸäº›â€œå½â€è§£æ±ºæ–¹æ¡ˆã€‚ä¸€å€‹æ¼”ç®—æ³•å¯èƒ½å§‹çµ‚é¸æ“‡**  null **ä½œç‚ºå…±è­˜å€¼ï¼Œç„¡è«–ç¯€é»å€‘æè­°äº†ä»€éº¼å€¼ã€‚é€™å€‹æ¼”ç®—æ³•æ»¿è¶³äº†ä¸€è‡´åŒæ„å’Œå®Œæ•´æ€§ï¼ˆå› ç‚ºå®ƒå§‹çµ‚é¸æ“‡åŒä¸€å€‹å€¼ä¸¦ä¸”ä¸æœƒæ›´æ”¹å®ƒï¼‰ï¼Œä½†å®ƒä¸æ»¿è¶³æœ‰æ•ˆæ€§ï¼Œå› ç‚ºå®ƒé¸æ“‡çš„å€¼ä¸¦ä¸æ˜¯ç”±ç¯€é»æè­°çš„ã€‚  é€™ä¸‰å€‹å±¬æ€§åˆèµ·ä¾†ç¢ºä¿äº†å…±è­˜æ¼”ç®—æ³•çš„åŸºæœ¬è¦æ±‚ï¼šæ‰€æœ‰éå¤±æ•ˆçš„ç¯€é»èƒ½å¤ é”æˆå…±è­˜ï¼Œé¸å®šä¸€å€‹ç”±ç¯€é»æè­°çš„å€¼ï¼Œä¸¦ä¸”ä¸€æ—¦é€™å€‹å€¼è¢«é¸å®šï¼Œå°±ä¸èƒ½å†è¢«æ›´æ”¹ã€‚é€™æ˜¯å¯¦ç¾åˆ†å¸ƒå¼ç³»çµ±ä¸€è‡´æ€§çš„åŸºæœ¬æ¡†æ¶ï¼Œä¸¦ç¢ºä¿äº†ç³»çµ±çš„ç©©å®šæ€§å’Œå¯é æ€§ã€‚  å¦‚æœä¸é—œå¿ƒå®¹éŒ¯ï¼Œé‚£éº¼æ»¿è¶³å‰ä¸‰å€‹å±¬æ€§å¾ˆå®¹æ˜“ï¼šä½ å¯ä»¥å°‡ä¸€å€‹ç¯€é»ç¡¬ç·¨ç¢¼ç‚º â€œç¨è£è€…â€ï¼Œä¸¦è®“è©²ç¯€é»åšå‡ºæ‰€æœ‰çš„æ±ºå®šã€‚ä½†å¦‚æœè©²ç¯€é»å¤±æ•ˆï¼Œé‚£éº¼ç³»çµ±å°±ç„¡æ³•å†åšå‡ºä»»ä½•æ±ºå®šã€‚äº‹å¯¦ä¸Šï¼Œé€™å°±æ˜¯æˆ‘å€‘åœ¨å…©éšæ®µæäº¤çš„æƒ…æ³ä¸­æ‰€çœ‹åˆ°çš„ï¼šå¦‚æœå”èª¿è€…å¤±æ•ˆï¼Œé‚£éº¼å­˜ç–‘çš„åƒèˆ‡è€…å°±ç„¡æ³•æ±ºå®šæäº¤é‚„æ˜¯ä¸­æ­¢ã€‚   ç¨è£è€…ç¯€é»èˆ‡å”èª¿è€…çš„å½±éŸ¿ ï¼š   ç¡¬ç·¨ç¢¼ä¸€å€‹ç¯€é»ä½œç‚ºâ€œç¨è£è€…â€å¯ä»¥è¼•æ˜“é”æˆå…±è­˜ï¼Œä½†è‹¥è©²ç¯€é»å¤±æ•ˆï¼Œç³»çµ±ä¸èƒ½åšå‡ºæ±ºå®šã€‚  å…©éšæ®µæäº¤çš„æƒ…æ³ä¸‹ï¼Œè‹¥å”èª¿è€…å¤±æ•ˆï¼Œå­˜ç–‘çš„åƒèˆ‡è€…ä¸èƒ½æ±ºå®šæäº¤é‚„æ˜¯ä¸­æ­¢ã€‚   çµ‚æ­¢å±¬æ€§èˆ‡å®¹éŒ¯ ï¼š   çµ‚æ­¢å±¬æ€§è¦æ±‚å…±è­˜æ¼”ç®—æ³•ä¸èƒ½ç„¡é™æœŸåœ°ç­‰å¾…ï¼Œå³ä½¿æœ‰ç¯€é»å¤±æ•ˆï¼Œä¹Ÿå¿…é ˆé”æˆæ±ºå®šã€‚  çµ‚æ­¢å±¬æ€§å–æ±ºæ–¼ï¼Œä¸è¶…éä¸€åŠç¯€é»ä¸å¯ç”¨ã€‚  å³ä½¿å¤§å¤šæ•¸ç¯€é»å¤±æ•ˆæˆ–ç¶²è·¯å­˜åœ¨å•é¡Œï¼Œå…±è­˜çš„å¯¦ç¾ä»éœ€ä¿è­‰å®‰å…¨å±¬æ€§ï¼ˆä¸€è‡´åŒæ„ï¼Œå®Œæ•´æ€§å’Œæœ‰æ•ˆæ€§ï¼‰ã€‚   æ‹œå åº­éŒ¯èª¤((n+1)/3)èˆ‡å…±è­˜ ï¼š   å¤§å¤šæ•¸å…±è­˜æ¼”ç®—æ³•å‡è¨­ä¸å­˜åœ¨æ‹œå åº­éŒ¯èª¤ï¼Œå³ç¯€é»éƒ½æœƒæ­£ç¢ºéµå¾ªå”è­°ã€‚  ç©©å¥åœ°é”æˆå…±è­˜æ˜¯å¯èƒ½çš„ï¼Œåªè¦å°‘æ–¼ä¸‰åˆ†ä¹‹ä¸€çš„ç¯€é»å­˜åœ¨æ‹œå åº­éŒ¯èª¤ã€‚  å…±è­˜æ¼”ç®—æ³•å’Œå…¨åºå»£æ’­  æœ€è‘—åçš„å®¹éŒ¯å…±è­˜æ¼”ç®—æ³•æ˜¯æª¢è¦–æˆ³è¤‡è£½(VSR, Viewstamped Replication)ã€‚ä½†æ˜¯æœ¬æ›¸ä¸ä»‹ç´¹!!!æš¸è§£å…±é€šçš„é«˜éšæ€æƒ³å°±è¶³å¤ äº†ï¼Œé™¤éè‡ªå·±è¦å¯¦ç¾ä¸€å€‹å…±è­˜ç³»çµ±ã€‚  å¤§å¤šæ•¸çš„å…±è­˜æ¼”ç®—æ³•å¯¦éš›ä¸Šä¸¦ä¸ç›´æ¥ä½¿ç”¨å‰›å‰›æåˆ°çš„é€™äº›æ¨¡å‹(æè­°èˆ‡æ±ºå®šå–®å€‹å€¼ï¼Œä¸¦æ»¿è¶³ä¸€è‡´åŒæ„ã€å®Œæ•´æ€§ã€æœ‰æ•ˆæ€§å’Œçµ‚æ­¢å±¬æ€§)ã€‚å–è€Œä»£ä¹‹çš„åè€Œæ˜¯å€¼çš„é †åºï¼ŒåŒæ™‚ä¹Ÿä¿ƒä½¿äº†å…¨åºå»£æ’­æ¼”ç®—æ³•ã€‚  å…¨åºå»£æ’­è¦æ±‚å°‡è¨Šæ¯æŒ‰ç…§ç›¸åŒçš„é †åºï¼Œæ°å¥½å‚³é€ä¸€æ¬¡ï¼Œæº–ç¢ºåœ°é€åˆ°æ‰€æœ‰ç¯€é»ã€‚  æ‰€ä»¥å…¨åºå»£æ’­ç›¸ç•¶æ–¼é‡è¤‡é€²è¡Œäº†å¤šè¼ªå…±è­˜(æ¯æ¬¡å…±è­˜æ±ºå®šèˆ‡ä¸€æ¬¡è¨Šæ¯å‚³éç›¸å°æ‡‰)ï¼š   ç”±æ–¼Â   ä¸€è‡´åŒæ„ Â å±¬æ€§ï¼Œæ‰€æœ‰ç¯€é»æ±ºå®šä»¥ç›¸åŒçš„é †åºå‚³éç›¸åŒçš„è¨Šæ¯ã€‚  ç”±æ–¼Â   å®Œæ•´æ€§ Â å±¬æ€§ï¼Œè¨Šæ¯ä¸æœƒé‡è¤‡ã€‚  ç”±æ–¼Â   æœ‰æ•ˆæ€§ Â å±¬æ€§ï¼Œè¨Šæ¯ä¸æœƒè¢«æå£ï¼Œä¹Ÿä¸èƒ½æ†‘ç©ºç·¨é€ ã€‚  ç”±æ–¼Â   çµ‚æ­¢ Â å±¬æ€§ï¼Œè¨Šæ¯ä¸æœƒä¸Ÿå¤±ã€‚  è¦–æˆ³è¤‡è£½ï¼ŒRaft å’Œ Zab ç›´æ¥å¯¦ç¾äº†å…¨åºå»£æ’­ï¼Œå› ç‚ºé€™æ¨£åšæ¯”é‡è¤‡Â   ä¸€æ¬¡ä¸€å€¼ï¼ˆone value a timeï¼‰ Â çš„å…±è­˜æ›´é«˜æ•ˆã€‚åœ¨ Paxos çš„æƒ…æ³ä¸‹ï¼Œé€™ç¨®æœ€ä½³åŒ–è¢«ç¨±ç‚º Multi-Paxosã€‚  çµè«–ï¼š  å…¨åºå»£æ’­æ£’æ£’ï¼Œæ”¯æŒäº†å…±è­˜æ¼”ç®—æ³•æ‰€éœ€è¦åŸºæœ¬è¦æ±‚ä¸€è‡´åŒæ„â€¦â€¦ç­‰ç­‰å±¬æ€§  å–®ä¸»è¤‡è£½èˆ‡å…±è­˜  ç‚ºä»€éº¼åœ¨ç¬¬äº”ç« æ²’æœ‰æ“”å¿ƒéå…±è­˜å•é¡Œï¼Ÿå› ç‚ºå–®ä¸»è¤‡è£½å°‡æ‰€æœ‰æ“ä½œéƒ½äº¤çµ¦ä¸»åº«ä¸¦ä»¥ç›¸åŒçš„é †åºä¸Ÿçµ¦å¾åº«ï¼Œä½¿å¾åº«çš„å‰¯æœ¬ä¿æŒåœ¨æœ€æ–°ç‹€æ…‹ã€‚  å¦‚æœä¸»åº«æ˜¯ç”±ç¶­é‹äººå“¡æ‰‹å‹•æ“ä½œé‚£å°±æ˜¯ä¸€ç¨®ç¨è£å‹åˆ¥çš„å…±è­˜æ¼”ç®—æ³•ï¼šåªæœ‰ä¸€å€‹ç¯€é»è¢«å…è¨±æ¥å—å¯«å…¥ï¼Œå¦‚æœè©²ç¯€é»ç™¼ç”Ÿæ•…éšœï¼Œå‰‡æ•´å€‹ç³»çµ±ç„¡æ³•å¯«å…¥ï¼Œç›´åˆ°ç¶­é‹äººå“¡è™•ç†ã€‚é€™æ¨£çš„ç³»çµ±åœ¨å¯¦è¸ä¸­è¡¨ç¾è‰¯å¥½ï¼Œä½†æ˜¯ç„¡æ³•æ»¿è¶³çµ‚æ­¢å±¬æ€§ï¼Œå› ç‚ºéœ€è¦äººç‚ºå¹²é æ‰èƒ½å–å¾—é€²å±•ã€‚  æŸäº›è³‡æ–™åº«æœƒè‡ªå‹•åŸ·è¡Œé ˜å°è€…é¸èˆ‰ï¼Œä½†æ˜¯æœƒå°è‡´è…¦è£‚ï¼Œå› ç‚ºé ˜å°è€…ä¹‹é–“éœ€è¦å…±è­˜æ¼”ç®—æ³•ã€‚  çµè«–ï¼š  è¦æœ‰å…±è­˜æ¼”ç®—æ³•è¦å…ˆæœ‰é ˜å°è€…ï¼Œè€Œé¸å‡ºé ˜å°è€…TMDåˆè¦æœ‰å…±è­˜æ¼”ç®—æ³•æ‰€ä»¥ï¼Œå…ˆæœ‰é›é‚„æ˜¯å…ˆæœ‰è›‹çš„å•é¡Œå‡ºç¾äº†ï¼  ç´€å…ƒç·¨è™Ÿå’Œæ³•å®šäººæ•¸    é ˜å°è€…èˆ‡ç´€å…ƒç·¨è™Ÿçš„é—œä¿‚ :\n   å…±è­˜å”è­°é€šå¸¸å…§éƒ¨æœ‰é ˜å°è€…çš„æ¦‚å¿µï¼Œä½†ä¸èƒ½ä¿è­‰é ˜å°è€…çš„ç¨ä¸€ç„¡äºŒã€‚é€šéç´€å…ƒç·¨è™Ÿï¼ˆåœ¨ä¸åŒå”è­°ä¸­å¯èƒ½æœ‰ä¸åŒåç¨±ï¼‰ä¾†ç¢ºä¿åœ¨æ¯å€‹æ™‚æœŸï¼Œé ˜å°è€…æ˜¯å”¯ä¸€çš„ã€‚   é ˜å°è€…é¸èˆ‰ :\n   ç•¶ç¾ä»»é ˜å°è€…è¢«èªç‚ºå¤±æ•ˆæ™‚ï¼Œç¯€é»é–“æœƒé–‹å§‹æ–°çš„é ˜å°è€…é¸èˆ‰ï¼Œä¸¦è³¦äºˆæ–°çš„ç´€å…ƒç·¨è™Ÿï¼Œä»¥ä¿è­‰ç´€å…ƒç·¨è™Ÿçš„å…¨åºä¸”å–®èª¿éå¢ã€‚   é ˜å°è€…è¡çªçš„è§£æ±º :\n   è‹¥ä¸åŒæ™‚æœŸçš„é ˜å°è€…ä¹‹é–“å‡ºç¾è¡çªï¼Œå‰‡ä»¥ç´€å…ƒç·¨è™Ÿè¼ƒé«˜çš„é ˜å°è€…ç‚ºå‡†ã€‚   æ³•å®šäººæ•¸ :\n   ä¸€å€‹é ˜å°è€…åœ¨åšå‡ºä»»ä½•æ±ºå®šå‰ï¼Œå¿…é ˆå…ˆå¾æ³•å®šäººæ•¸çš„ç¯€é»ä¸­ç²å¾—è´Šæˆã€‚é€šå¸¸éœ€è¦å…©è¼ªæŠ•ç¥¨ï¼šä¸€è¼ªé¸å‡ºé ˜å°è€…ï¼Œä¸€è¼ªå°é ˜å°è€…çš„æè­°é€²è¡ŒæŠ•ç¥¨ã€‚   æŠ•ç¥¨éç¨‹èˆ‡2PCçš„å€åˆ¥ :\n   é€™å€‹æŠ•ç¥¨éç¨‹èˆ‡å…©éšæ®µæäº¤ï¼ˆ2PCï¼‰ç›¸ä¼¼ï¼Œä½†å€åˆ¥åœ¨æ–¼é ˜å°è€…çš„ç”¢ç”Ÿæ–¹å¼åŠæŠ•ç¥¨è¦æ±‚ã€‚å…±è­˜æ¼”ç®—æ³•åªéœ€è¦å¤šæ•¸ç¯€é»çš„è´Šæˆï¼Œä¸¦ä¸”æœ‰æ˜ç¢ºçš„æ¢å¾©éç¨‹ä¾†ä¿è­‰ç³»çµ±çš„å®‰å…¨å±¬æ€§ã€‚  çµè«–ï¼š  åœ¨é ˜å°è€…é¸æ‹”è£¡å¼„äº†ä¸€å€‹æ›´åš´è¬¹çš„ç´€å…ƒç·¨è™Ÿèˆ‡æ³•å®šäººæ•¸ä¸¦è®“ç·¨è™Ÿæœ€å¤§çš„äººç•¶é¸é ˜å°è€…ï¼ŒæŠ•ç¥¨éç¨‹å°±æ˜¯æ›´åš´è¬¹çš„2PC     sequenceDiagram\n       participant   Node1\n       participant   Node2\n       participant   Node3\n       participant   Node4\n   \n       Note   over   Node1  ,  Node4  :   åˆå§‹ç‹€æ…‹ (é ˜å°è€…: Node1)\n   \n       alt   é ˜å°è€…å¤±æ•ˆ\n           Node1  ->>  Node1  :   é ˜å°è€…å¤±æ•ˆ\n       end\n   \n       Note   over   Node1  ,  Node4  :   ç´€å…ƒç·¨è™Ÿ 1 é–‹å§‹\n   \n       Node2  ->>+  Node3  :   é ˜å°è€…å¤±æ•ˆï¼Œé–‹å§‹é ˜å°è€…é¸èˆ‰ (ç´€å…ƒç·¨è™Ÿ: 1)\n       Node3  ->>+  Node2  :   æŠ•ç¥¨çµ¦ Node2 (ç´€å…ƒç·¨è™Ÿ: 1)\n       Node4  ->>+  Node2  :   æŠ•ç¥¨çµ¦ Node2 (ç´€å…ƒç·¨è™Ÿ: 1)\n   \n       Note   over   Node2  ,  Node4  :   Node2 ä»¥å¤šæ•¸ç¥¨ç•¶é¸ç‚ºé ˜å°è€…\n   \n       Node2  ->>  Node3  :   æè­°å€¼ (ç´€å…ƒç·¨è™Ÿ: 1)\n       Node2  ->>  Node4  :   æè­°å€¼ (ç´€å…ƒç·¨è™Ÿ: 1)\n       Node3  ->>  Node2  :   è´Šæˆæè­° (ç´€å…ƒç·¨è™Ÿ: 1)\n       Node4  ->>  Node2  :   è´Šæˆæè­° (ç´€å…ƒç·¨è™Ÿ: 1)\n   \n       Note   over   Node2  ,  Node4  :   æè­°å€¼è¢«ä»¥å¤šæ•¸ç¥¨æ¥å—\n   \n       alt   é ˜å°è€…å¤±æ•ˆ\n           Node2  ->>  Node2  :   é ˜å°è€…å¤±æ•ˆ\n       end\n   \n       Note   over   Node2  ,  Node4  :   ç´€å…ƒç·¨è™Ÿ 2 é–‹å§‹\n   \n       alt   Node1æ¢å¾©\n           Node1  ->>  Node1  :   Node1æ¢å¾©\n       end\n   \n       Node1  ->>+  Node3  :   é ˜å°è€…å¤±æ•ˆï¼Œé–‹å§‹é ˜å°è€…é¸èˆ‰ (ç´€å…ƒç·¨è™Ÿ: 2)\n       Node3  ->>+  Node1  :   æŠ•ç¥¨çµ¦ Node1 (ç´€å…ƒç·¨è™Ÿ: 2)\n       Node4  ->>+  Node1  :   æŠ•ç¥¨çµ¦ Node1 (ç´€å…ƒç·¨è™Ÿ: 2)\n   \n       Note   over   Node1  ,  Node4  :   Node1 ä»¥å¤šæ•¸ç¥¨ç•¶é¸ç‚ºé ˜å°è€…\n   \n       Node1  ->>  Node3  :   æè­°å€¼ (ç´€å…ƒç·¨è™Ÿ: 2)\n       Node1  ->>  Node4  :   æè­°å€¼ (ç´€å…ƒç·¨è™Ÿ: 2)\n       Node3  ->>  Node1  :   è´Šæˆæè­° (ç´€å…ƒç·¨è™Ÿ: 2)\n       Node4  ->>  Node1  :   è´Šæˆæè­° (ç´€å…ƒç·¨è™Ÿ: 2)\n   \n       Note   over   Node1  ,  Node4  :   æè­°å€¼è¢«ä»¥å¤šæ•¸ç¥¨æ¥å—\n   alt   Node2æ¢å¾©\n           Node2  ->>  Node2  :   Node2æ¢å¾©\n       end\n       alt   é ˜å°è€…è¡çªçš„è§£æ±º\n           Node2  ->>  Node1  :   å˜—è©¦æˆç‚ºé ˜å°è€… (ç´€å…ƒç·¨è™Ÿ: 2)\n           Node1  ->>  Node2  :   ä»¥æ›´é«˜çš„ç´€å…ƒç·¨è™Ÿè§£æ±ºè¡çª (ç´€å…ƒç·¨è™Ÿ: 3)\n       end\n   \n       Note   over   Node1  ,  Node4  :   Node1 ä¿æŒç‚ºé ˜å°è€…\n    åˆå§‹ç‹€æ…‹ :\n   ç³»çµ±åˆå§‹æ™‚ï¼ŒNode1 æ˜¯é ˜å°è€…ã€‚   é ˜å°è€…å¤±æ•ˆ (Node1) :\n   Node1 å¤±æ•ˆï¼Œç³»çµ±é€²å…¥ç´€å…ƒç·¨è™Ÿ1ã€‚   é ˜å°è€…é¸èˆ‰ (ç´€å…ƒç·¨è™Ÿ 1) :\n   Node2ã€Node3 å’Œ Node4 é–‹å§‹é ˜å°è€…é¸èˆ‰ã€‚Node3 å’Œ Node4 æŠ•ç¥¨çµ¦ Node2ï¼ŒNode2 ä»¥å¤šæ•¸ç¥¨ç•¶é¸ç‚ºæ–°çš„é ˜å°è€…ã€‚   æè­°å’ŒæŠ•ç¥¨ (ç´€å…ƒç·¨è™Ÿ 1) :\n   Node2 æå‡ºä¸€å€‹æè­°å€¼ï¼Œä¸¦å¾—åˆ° Node3 å’Œ Node4 çš„è´Šæˆï¼Œæè­°å€¼è¢«å¤šæ•¸ç¥¨æ¥å—ã€‚   é ˜å°è€…å¤±æ•ˆ (Node2) :\n   Node2 å¤±æ•ˆï¼Œç³»çµ±é€²å…¥ç´€å…ƒç·¨è™Ÿ2ã€‚   Node1æ¢å¾© :\n   Node1 æ¢å¾©ä¸¦åƒèˆ‡æ¥ä¸‹ä¾†çš„é ˜å°è€…é¸èˆ‰ã€‚   é ˜å°è€…é¸èˆ‰ (ç´€å…ƒç·¨è™Ÿ 2) :\n   Node1ã€Node3 å’Œ Node4 é–‹å§‹é ˜å°è€…é¸èˆ‰ã€‚Node3 å’Œ Node4 æŠ•ç¥¨çµ¦ Node1ï¼ŒNode1 ä»¥å¤šæ•¸ç¥¨ç•¶é¸ç‚ºæ–°çš„é ˜å°è€…ã€‚   æè­°å’ŒæŠ•ç¥¨ (ç´€å…ƒç·¨è™Ÿ 2) :\n   Node1 æå‡ºä¸€å€‹æè­°å€¼ï¼Œä¸¦å¾—åˆ° Node3 å’Œ Node4 çš„è´Šæˆï¼Œæè­°å€¼è¢«å¤šæ•¸ç¥¨æ¥å—ã€‚   Node2æ¢å¾© :\n   Node2 æ¢å¾©ä¸¦å˜—è©¦é‡æ–°æˆç‚ºé ˜å°è€…ã€‚   é ˜å°è€…è¡çªçš„è§£æ±º :\n   Node2 å˜—è©¦åœ¨ç´€å…ƒç·¨è™Ÿ2æˆç‚ºé ˜å°è€…ï¼Œä½† Node1 ä»¥æ›´é«˜çš„ç´€å…ƒç·¨è™Ÿï¼ˆ3ï¼‰å›æ‡‰ï¼Œä»¥è§£æ±ºé ˜å°è€…è¡çªï¼Œä¸¦ä¿æŒç‚ºé ˜å°è€…ã€‚  å…±è­˜çš„å±€é™æ€§  å…±è­˜æ¼”ç®—æ³•ç‚ºåˆ†æ•£å¼ç³»çµ±æä¾›äº†åŸºæœ¬çš„å®‰å…¨å±¬æ€§ï¼Œå¦‚ä¸€è‡´åŒæ„ã€å®Œæ•´æ€§å’Œæœ‰æ•ˆæ€§ï¼Œä¸¦åœ¨å¤šæ•¸ç¯€é»æ­£å¸¸é‹ä½œæ™‚ä¿æŒå®¹éŒ¯å’Œé€²å±•ã€‚ä½†å®ƒæœ‰å…¶ä¾·é™æ€§ï¼š    åŒæ­¥è¤‡è£½å•é¡Œ ï¼šå…±è­˜æ¼”ç®—æ³•ä¾è³´åŒæ­¥è¤‡è£½ä¾†ç¢ºä¿ä¸€è‡´æ€§ï¼Œèˆ‡å¸¸è¦‹çš„éåŒæ­¥è¤‡è£½ç›¸æ¯”ï¼Œå¯èƒ½æœƒåœ¨æ•ˆèƒ½ä¸Šæœ‰æ‰€æå¤±ã€‚   ç¯€é»æ•¸é‡è¦æ±‚ ï¼šè‡³å°‘éœ€è¦ä¸‰å€‹ç¯€é»ä»¥å®¹å¿å–®ç¯€é»æ•…éšœï¼Œäº”å€‹ç¯€é»ä»¥å®¹å¿å…©å€‹ç¯€é»æ•…éšœã€‚å¦‚æœç¶²è·¯æ•…éšœå°è‡´ç¯€é»é–“é€£ç·šä¸­æ–·ï¼Œåªæœ‰å¤šæ•¸ç¯€é»æ‰€åœ¨çš„ç¶²è·¯èƒ½ç¹¼çºŒé‹ä½œã€‚   å›ºå®šç¯€é»é›†åˆ ï¼šå¤šæ•¸å…±è­˜æ¼”ç®—æ³•å‡è¨­åƒèˆ‡æŠ•ç¥¨çš„ç¯€é»æ˜¯å›ºå®šçš„ï¼Œé›–ç„¶æœ‰å‹•æ…‹æˆå“¡æ“´å……å¥—ä»¶ï¼Œä½†ç†è§£å’Œå¯¦æ–½è¼ƒç‚ºå›°é›£ã€‚   è¶…æ™‚æª¢æ¸¬çš„ä¾è³´ ï¼šå…±è­˜ç³»çµ±ä¾è³´è¶…æ™‚ä¾†æª¢æ¸¬å¤±æ•ˆç¯€é»ï¼Œä½†åœ¨ç¶²è·¯å»¶é²é«˜åº¦è®ŠåŒ–çš„ç’°å¢ƒä¸­å¯èƒ½æœƒå°è‡´éŒ¯èª¤çš„å¤±æ•ˆæª¢æ¸¬å’Œé ˜å°è€…é¸èˆ‰ï¼Œå½±éŸ¿æ•ˆèƒ½ã€‚   å°ç¶²è·¯å•é¡Œçš„æ•æ„Ÿæ€§ ï¼šä¾‹å¦‚ï¼ŒRaft åœ¨ç‰¹å®šçš„ç¶²è·¯é€£ç·šä¸å¯é æ™‚å¯èƒ½æœƒå‡ºç¾é ˜å°è€…é »ç¹åˆ‡æ›çš„å•é¡Œï¼Œå½±éŸ¿ç³»çµ±é€²å±•ã€‚é€™é¡å•é¡Œåœ¨å…¶ä»–ä¸€è‡´æ€§æ¼”ç®—æ³•ä¸­ä¹Ÿå­˜åœ¨ï¼Œè€Œè¨­è¨ˆèƒ½å¤ å¥å£¯æ‡‰å°ä¸å¯é ç¶²è·¯çš„æ¼”ç®—æ³•ä»æ˜¯é–‹æ”¾çš„ç ”ç©¶é ˜åŸŸã€‚  Raftï¼š   Raft æ˜¯ä¸€ç¨®ç”¨æ–¼æ›¿ä»£  Paxos çš„  å…±è­˜ æ¼”ç®—æ³•ã€‚ç›¸æ¯”æ–¼  Paxos ï¼ŒRaftçš„ç›®æ¨™æ˜¯æä¾›æ›´æ¸…æ™°çš„é‚è¼¯åˆ†å·¥ä½¿å¾—æ¼”ç®—æ³•æœ¬èº«èƒ½è¢«æ›´å¥½åœ°ç†è§£ï¼ŒåŒæ™‚å®ƒå®‰å…¨æ€§æ›´é«˜ï¼Œä¸¦èƒ½æä¾›ä¸€äº›é¡å¤–çš„ç‰¹æ€§ã€‚  [1]  [2] :1Raftèƒ½ç‚ºåœ¨  é›»è…¦å¢é›† ä¹‹é–“éƒ¨ç½²  æœ‰é™ç‹€æ…‹æ©Ÿ æä¾›ä¸€ç¨®é€šç”¨æ–¹æ³•ï¼Œä¸¦ç¢ºä¿å¢é›†å…§çš„ä»»æ„ç¯€é»åœ¨æŸç¨®ç‹€æ…‹è½‰æ›ä¸Šä¿æŒä¸€è‡´ã€‚Raftæ¼”ç®—æ³•çš„é–‹æºå¯¦ç¾çœ¾å¤šï¼Œåœ¨  Go ã€  C++ ã€  Java ä»¥åŠÂ   Scala ä¸­éƒ½æœ‰å®Œæ•´çš„ä»£ç¢¼å¯¦ç¾ã€‚Rafté€™ä¸€åå­—ä¾†æºæ–¼\"Reliable, Replicated, Redundant, And Fault-Tolerant\"ï¼ˆã€Œå¯é ã€å¯è¤‡è£½ã€å¯å†—é¤˜ã€å¯å®¹éŒ¯ã€ï¼‰çš„é¦–å­—æ¯ç¸®å¯«ã€‚  [3]  å¢é›†å…§çš„ç¯€é»éƒ½å°é¸èˆ‰å‡ºçš„é ˜è¢–æ¡å–ä¿¡ä»»ï¼Œå› æ­¤Raftä¸æ˜¯ä¸€ç¨®  æ‹œå åº­å®¹éŒ¯ æ¼”ç®—æ³•ã€‚  [2]  æ‹œå åº­å°‡è»å•é¡Œï¼š  ä¸€çµ„  æ‹œå åº­ å°‡è»åˆ†åˆ¥å„ç‡é ˜ä¸€æ”¯è»éšŠå…±åŒåœå›°ä¸€åº§åŸå¸‚ã€‚ç‚ºäº†ç°¡åŒ–å•é¡Œï¼Œå°‡å„æ”¯è»éšŠçš„è¡Œå‹•ç­–ç•¥é™å®šç‚ºé€²æ”»æˆ–æ’¤é›¢å…©ç¨®ã€‚å› ç‚ºéƒ¨åˆ†è»éšŠé€²æ”»éƒ¨åˆ†è»éšŠæ’¤é›¢å¯èƒ½æœƒé€ æˆç½é›£æ€§å¾Œæœï¼Œå› æ­¤å„ä½å°‡è»å¿…é ˆé€šéæŠ•ç¥¨ä¾†é”æˆä¸€è‡´ç­–ç•¥ï¼Œå³æ‰€æœ‰è»éšŠä¸€èµ·é€²æ”»æˆ–æ‰€æœ‰è»éšŠä¸€èµ·æ’¤é›¢ã€‚å› ç‚ºå„ä½å°‡è»åˆ†è™•åŸå¸‚ä¸åŒæ–¹å‘ï¼Œä»–å€‘åªèƒ½é€šéä¿¡ä½¿äº’ç›¸è¯çµ¡ã€‚åœ¨æŠ•ç¥¨éç¨‹ä¸­æ¯ä½å°‡è»éƒ½å°‡è‡ªå·±æŠ•ç¥¨çµ¦é€²æ”»é‚„æ˜¯æ’¤é€€çš„è³‡è¨Šé€šéä¿¡ä½¿åˆ†åˆ¥é€šçŸ¥å…¶ä»–æ‰€æœ‰å°‡è»ï¼Œé€™æ¨£ä¸€ä¾†æ¯ä½å°‡è»æ ¹æ“šè‡ªå·±çš„æŠ•ç¥¨å’Œå…¶ä»–æ‰€æœ‰å°‡è»é€ä¾†çš„è³‡è¨Šå°±å¯ä»¥çŸ¥é“å…±åŒçš„æŠ•ç¥¨çµæœè€Œæ±ºå®šè¡Œå‹•ç­–ç•¥ã€‚  æˆå“¡èˆ‡å”èª¿æœå‹™  ä»‹ç´¹ï¼š  ZooKeeper å’Œ etcd è¢«è¨­è¨ˆç‚ºå®¹ç´å°‘é‡å®Œå…¨å¯ä»¥æ”¾åœ¨è¨˜æ†¶é«”ä¸­çš„è³‡æ–™ï¼ˆé›–ç„¶å®ƒå€‘ä»ç„¶æœƒå¯«å…¥ç£ç¢Ÿä»¥ä¿è­‰æ°¸çºŒæ€§ï¼‰ï¼Œæ‰€ä»¥ä½ ä¸æœƒæƒ³è‘—æŠŠæ‰€æœ‰æ‡‰ç”¨è³‡æ–™æ”¾åˆ°é€™è£¡ã€‚é€™äº›å°‘é‡è³‡æ–™æœƒé€éå®¹éŒ¯çš„å…¨åºå»£æ’­æ¼”ç®—æ³•è¤‡è£½åˆ°æ‰€æœ‰ç¯€é»ä¸Šã€‚æ­£å¦‚å‰é¢æ‰€è¨è«–çš„é‚£æ¨£ï¼Œè³‡æ–™åº«è¤‡è£½éœ€è¦çš„å°±æ˜¯å…¨åºå»£æ’­ï¼šå¦‚æœæ¯æ¢è¨Šæ¯ä»£è¡¨å°è³‡æ–™åº«çš„å¯«å…¥ï¼Œå‰‡ä»¥ç›¸åŒçš„é †åºæ‡‰ç”¨ç›¸åŒçš„å¯«å…¥æ“ä½œå¯ä»¥ä½¿å‰¯æœ¬ä¹‹é–“ä¿æŒä¸€è‡´ã€‚   ç·šæ€§ä¸€è‡´æ€§çš„åŸå­æ“ä½œ  ä½¿ç”¨åŸå­ CAS æ“ä½œå¯ä»¥å¯¦ç¾é–ï¼šå¦‚æœå¤šå€‹ç¯€é»åŒæ™‚å˜—è©¦åŸ·è¡Œç›¸åŒçš„æ“ä½œï¼Œåªæœ‰ä¸€å€‹ç¯€é»æœƒæˆåŠŸã€‚å…±è­˜å”è­°ä¿è­‰äº†æ“ä½œçš„åŸå­æ€§å’Œç·šæ€§ä¸€è‡´æ€§ï¼Œå³ä½¿ç¯€é»ç™¼ç”Ÿæ•…éšœæˆ–ç¶²è·¯åœ¨ä»»æ„æ™‚åˆ»ä¸­æ–·ã€‚åˆ†æ•£å¼é–é€šå¸¸ä»¥Â   ç§Ÿç´„ï¼ˆleaseï¼‰ Â çš„å½¢å¼å¯¦ç¾ï¼Œç§Ÿç´„æœ‰ä¸€å€‹åˆ°æœŸæ™‚é–“ï¼Œä»¥ä¾¿åœ¨å®¢æˆ¶ç«¯å¤±æ•ˆçš„æƒ…æ³ä¸‹æœ€çµ‚èƒ½è¢«é‡‹æ”¾ï¼ˆè«‹åƒé–± â€œ   ç¨‹åºæš«åœ â€ï¼‰ã€‚  æ“ä½œçš„å…¨åºæ’åº  å¦‚ â€œ   é ˜å°è€…å’Œé– â€ ä¸­æ‰€è¿°ï¼Œç•¶æŸå€‹è³‡æºå—åˆ°é–æˆ–ç§Ÿç´„çš„ä¿è­·æ™‚ï¼Œä½ éœ€è¦ä¸€å€‹é˜²è­·ä»¤ç‰Œä¾†é˜²æ­¢å®¢æˆ¶ç«¯åœ¨ç¨‹åºæš«åœçš„æƒ…æ³ä¸‹å½¼æ­¤è¡çªã€‚é˜²è­·ä»¤ç‰Œæ˜¯æ¯æ¬¡é–è¢«ç²å–æ™‚å–®èª¿å¢åŠ çš„æ•¸å­—ã€‚ZooKeeper é€éå…¨åºåŒ–æ‰€æœ‰æ“ä½œä¾†æä¾›é€™å€‹åŠŸèƒ½ï¼Œå®ƒç‚ºæ¯å€‹æ“ä½œæä¾›ä¸€å€‹å–®èª¿éå¢çš„äº‹å‹™ IDï¼ˆ  zxid ï¼‰å’Œç‰ˆæœ¬è™Ÿï¼ˆ  cversion ï¼‰ã€15ã€‘ã€‚  å¤±æ•ˆæª¢æ¸¬  å®¢æˆ¶ç«¯åœ¨ ZooKeeper ä¼ºæœå™¨ä¸Šç¶­è­·ä¸€å€‹é•·æœŸæœƒè©±ï¼Œå®¢æˆ¶ç«¯å’Œä¼ºæœå™¨é€±æœŸæ€§åœ°äº¤æ›å¿ƒè·³åŒ…ä¾†æª¢æŸ¥ç¯€é»æ˜¯å¦é‚„æ´»è‘—ã€‚å³ä½¿é€£ç·šæš«æ™‚ä¸­æ–·ï¼Œæˆ–è€… ZooKeeper ç¯€é»å¤±æ•ˆï¼Œæœƒè©±ä»ä¿æŒåœ¨æ´»èºç‹€æ…‹ã€‚ä½†å¦‚æœå¿ƒè·³åœæ­¢çš„æŒçºŒæ™‚é–“è¶…å‡ºæœƒè©±è¶…æ™‚ï¼ŒZooKeeper æœƒå®£å‘Šè©²æœƒè©±å·²æ­»äº¡ã€‚ç•¶æœƒè©±è¶…æ™‚æ™‚ï¼ˆZooKeeper ç¨±é€™äº›ç¯€é»ç‚ºÂ   è‡¨æ™‚ç¯€é» ï¼Œå³ ephemeral nodesï¼‰ï¼Œæœƒè©±æŒæœ‰çš„ä»»ä½•é–éƒ½å¯ä»¥é…ç½®ç‚ºè‡ªå‹•é‡‹æ”¾ã€‚  è®Šæ›´é€šçŸ¥  å®¢æˆ¶ç«¯ä¸åƒ…å¯ä»¥è®€å–å…¶ä»–å®¢æˆ¶ç«¯å»ºç«‹çš„é–å’Œå€¼ï¼Œé‚„å¯ä»¥ç›£è½å®ƒå€‘çš„è®Šæ›´ã€‚å› æ­¤ï¼Œå®¢æˆ¶ç«¯å¯ä»¥çŸ¥é“å¦ä¸€å€‹å®¢æˆ¶ç«¯ä½•æ™‚åŠ å…¥å¢é›†ï¼ˆåŸºæ–¼æ–°å®¢æˆ¶ç«¯å¯«å…¥ ZooKeeper çš„å€¼ï¼‰ï¼Œæˆ–ç™¼ç”Ÿæ•…éšœï¼ˆå› å…¶æœƒè©±è¶…æ™‚ï¼Œè€Œå…¶è‡¨æ™‚ç¯€é»æ¶ˆå¤±ï¼‰ã€‚é€éè¨‚é–±é€šçŸ¥ï¼Œå®¢æˆ¶ç«¯ä¸ç”¨å†é€éé »ç¹è¼ªè©¢çš„æ–¹å¼ä¾†æ‰¾å‡ºè®Šæ›´ã€‚  åœ¨é€™äº›åŠŸèƒ½ä¸­ï¼Œåªæœ‰ç·šæ€§ä¸€è‡´çš„åŸå­æ“ä½œæ‰çœŸçš„éœ€è¦å…±è­˜ã€‚ä½†æ­£æ˜¯é€™äº›åŠŸèƒ½çš„çµ„åˆï¼Œä½¿å¾—åƒ ZooKeeper é€™æ¨£çš„ç³»çµ±åœ¨åˆ†æ•£å¼å”èª¿ä¸­éå¸¸æœ‰ç”¨ã€‚  çµè«–ï¼š  åœ¨ä½¿ç”¨åˆ†æ•£å¼è³‡æ–™åº«æ™‚å…¶å¯¦è¦è€ƒæ…®å“ªäº›è³‡è¨Šæ˜¯å¿…é ˆç·šæ€§ä¸€è‡´æ€§çš„ï¼Œå¦‚æœéœ€è¦ç·šæ€§ä¸€è‡´æ€§çš„è³‡æ–™å†æ”¾å…¥åƒæ˜¯ZooKeeperé€™ç¨®åˆ†æ•£å¼è³‡æ–™åº«ä¿è­‰ç·šæ€§ä¸€è‡´æ€§çš„åŸå­æ“ä½œã€‚æˆ–æ˜¯èªªå¦‚æœæ˜¯æœ€çµ‚ä¸€è‡´æ€§çš„å…§å®¹å°±ä¸éœ€è¦æ”¾åˆ°é€™ç¨®åˆ†æ•£å¼è³‡æ–™åº«çš„æ¶æ§‹è®“nodeä¹‹é–“å½¼æ­¤æ…¢æ…¢æºé€šå°±å¥½äº†ã€‚  å°‡å·¥ä½œåˆ†é…çµ¦ç¯€é»  ZooKeeper/Chubby æ¨¡å‹åŸ·è¡Œè‰¯å¥½çš„ä¸€å€‹ä¾‹å­æ˜¯ï¼Œå¦‚æœä½ æœ‰å¹¾å€‹ç¨‹åºä¾‹é …æˆ–æœå‹™ï¼Œéœ€è¦é¸æ“‡å…¶ä¸­ä¸€å€‹ä¾‹é …ä½œç‚ºä¸»åº«æˆ–é¦–é¸æœå‹™ã€‚å¦‚æœé ˜å°è€…å¤±æ•—ï¼Œå…¶ä»–ç¯€é»ä¹‹ä¸€æ‡‰è©²æ¥ç®¡ã€‚é€™å°å–®ä¸»è³‡æ–™åº«ç•¶ç„¶éå¸¸å¯¦ç”¨ï¼Œä½†å°ä½œæ¥­æ’ç¨‹ç¨‹å¼å’Œé¡ä¼¼çš„æœ‰ç‹€æ…‹ç³»çµ±ä¹Ÿå¾ˆå¥½ç”¨ã€‚    é ˜å°è€…é¸èˆ‰èˆ‡å¤±æ•—æ¢å¾© ï¼š\n   ZooKeeperæˆ–Chubbyæ¨¡å‹å¯ä»¥ç”¨æ–¼é¸æ“‡ä¸»ç¯€é»æˆ–é¦–é¸æœå‹™ï¼Œä¸¦åœ¨ä¸»ç¯€é»å¤±æ•ˆæ™‚ç”±å…¶ä»–ç¯€é»æ¥ç®¡ï¼Œé€™åœ¨å–®ä¸»è³‡æ–™åº«ã€ä½œæ¥­æ’ç¨‹ç³»çµ±å’Œå…¶ä»–æœ‰ç‹€æ…‹ç³»çµ±ä¸­éå¸¸å¯¦ç”¨ã€‚   è³‡æºåˆ†å‰²æ§½çš„åˆ†é…èˆ‡å†å¹³è¡¡ ï¼š\n   é€šéä½¿ç”¨ZooKeeperï¼Œå¯ä»¥æ±ºå®šå°‡å“ªå€‹åˆ†å‰²æ§½åˆ†é…çµ¦å“ªå€‹ç¯€é»ï¼Œä¸¦åœ¨æ–°ç¯€é»åŠ å…¥æˆ–ç¯€é»å¤±æ•ˆæ™‚é‡æ–°å¹³è¡¡è² è¼‰ã€‚   åŸå­æ“ä½œã€è‡¨æ™‚ç¯€é»èˆ‡é€šçŸ¥ ï¼š\n   ZooKeeperæä¾›äº†åŸå­æ“ä½œã€è‡¨æ™‚ç¯€é»å’Œé€šçŸ¥åŠŸèƒ½ï¼Œæœ‰åŠ©æ–¼å¯¦ç¾åˆ†å‰²æ§½çš„å†å¹³è¡¡å’Œå¤±æ•ˆç¯€é»çš„å·¥ä½œæ¥ç®¡ï¼Œä¸¦èƒ½è®“ç³»çµ±è‡ªå‹•å¾æ•…éšœä¸­æ¢å¾©ã€‚   é«˜å±¤å·¥å…·çš„æ”¯æ´ ï¼š\n   ä¾‹å¦‚Apache Curatorï¼Œå®ƒæ˜¯åŸºæ–¼ZooKeeperå®¢æˆ¶ç«¯APIè€Œæä¾›æ›´é«˜å±¤çš„å·¥å…·ï¼Œé™ä½äº†å¾é ­å¯¦ç¾å…±è­˜æ¼”ç®—æ³•çš„å›°é›£å’Œé¢¨éšªã€‚   å”èª¿ç¯€é»çš„å¤–åŒ… ï¼š\n   ZooKeeperå…è¨±åœ¨å›ºå®šæ•¸é‡çš„ç¯€é»ä¸ŠåŸ·è¡Œå¤šæ•¸ç¥¨é¸èˆ‰ï¼Œè€Œéåœ¨æ•¸åƒå€‹ç¯€é»ä¸Šï¼Œä¸¦â€œå¤–åŒ…â€ä¸€äº›å”èª¿ç¯€é»çš„å·¥ä½œï¼Œå¦‚å…±è­˜ã€æ“ä½œæ’åºå’Œæ•…éšœæª¢æ¸¬ï¼Œä»¥æ”¯æ´å¤§é‡çš„å®¢æˆ¶ç«¯ã€‚   è³‡æ–™å‹åˆ¥çš„ç·©æ…¢è®ŠåŒ– ï¼š\n   ZooKeeperé©åˆç®¡ç†è®ŠåŒ–ç·©æ…¢çš„è³‡æ–™ï¼Œè€Œä¸æ˜¯æ¯ç§’æœƒæ”¹è®Šæ•¸åƒæˆ–æ•¸ç™¾è¬æ¬¡çš„åŸ·è¡Œæ™‚ç‹€æ…‹è³‡æ–™ã€‚   å…¶ä»–å·¥å…·çš„é…åˆ ï¼š\n   å¦‚Apache BookKeeperï¼Œå¯ä»¥ç”¨æ–¼è¤‡è£½æ‡‰ç”¨ç‹€æ…‹ï¼Œèˆ‡ZooKeeperé…åˆä½¿ç”¨ï¼Œæä¾›æ›´å®Œæ•´çš„åˆ†æ•£å¼ç³»çµ±è§£æ±ºæ–¹æ¡ˆã€‚  çµè«–ï¼š  å„ç¨®å·¥å…·ç‰¹æ€§èˆ‡æ‡‰ç”¨æ–¹å¼  æœå‹™ç™¼ç¾    æœå‹™ç™¼ç¾ :\n   ZooKeeperã€etcd å’Œ Consul å¸¸ç”¨æ–¼æœå‹™ç™¼ç¾ï¼Œå³ç¢ºå®šé€£æ¥åˆ°ç‰¹å®šæœå‹™æ‰€éœ€çš„ IP åœ°å€ã€‚åœ¨é›²è³‡æ–™ä¸­å¿ƒï¼Œç”±æ–¼è™›æ“¬æ©Ÿå™¨çš„å‹•æ…‹æ€§ï¼Œæœå‹™çš„ IP åœ°å€é€šå¸¸ä¸æ˜¯äº‹å…ˆçŸ¥é“çš„ã€‚æœå‹™å¯é…ç½®ç‚ºåœ¨å•Ÿå‹•æ™‚è¨»å†Šå…¶ç¶²è·¯ç«¯é»ï¼Œä»¥ä¾¿å…¶ä»–æœå‹™èƒ½å¤ æ‰¾åˆ°å®ƒå€‘ã€‚   å…±è­˜èˆ‡æœå‹™ç™¼ç¾ :\n   æœå‹™ç™¼ç¾ä¸ä¸€å®šéœ€è¦å…±è­˜ï¼Œè€Œæ˜¯æ›´é‡è¦–å¯ç”¨æ€§å’Œå°ç¶²è·¯ä¸­æ–·çš„é­¯æ£’æ€§ã€‚å‚³çµ±ä¸Šï¼ŒDNS ç”¨æ–¼æŸ¥è©¢æœå‹™çš„ IP åœ°å€ï¼Œä¸¦é€šéå¤šå±¤å¿«å–ä¾†æé«˜æ•ˆèƒ½å’Œå¯ç”¨æ€§ï¼Œå®ƒä¸ä¿è­‰ç·šæ€§ä¸€è‡´æ€§ã€‚   é ˜å°è€…é¸èˆ‰ :\n   èˆ‡æœå‹™ç™¼ç¾ä¸åŒï¼Œé ˜å°è€…é¸èˆ‰éœ€è¦å…±è­˜ã€‚å¦‚æœå…±è­˜ç³»çµ±å·²ç¶“è­˜åˆ¥å‡ºé ˜å°è€…ï¼Œé€™äº›è³‡è¨Šå¯ä»¥ç”¨æ–¼å¹«åŠ©å…¶ä»–æœå‹™æ‰¾å‡ºé ˜å°è€…ã€‚   åªè®€å¿«å–å‰¯æœ¬ :\n   ä¸€äº›å…±è­˜ç³»çµ±æ”¯æ´åªè®€å¿«å–å‰¯æœ¬ï¼Œé€™äº›å‰¯æœ¬èƒ½éåŒæ­¥æ¥æ”¶å…±è­˜æ¼”ç®—æ³•çš„æ‰€æœ‰æ±ºç­–æ—¥èªŒï¼Œä½†ä¸åƒèˆ‡æŠ•ç¥¨ï¼Œå¾è€Œèƒ½å¤ è™•ç†ä¸éœ€è¦ç·šæ€§ä¸€è‡´æ€§çš„è®€å–è«‹æ±‚ï¼Œé™ä½äº†éœ€æ±‚å…±è­˜çš„æƒ…å¢ƒï¼ŒåŒæ™‚ä¿æŒäº†ç³»çµ±çš„æ•ˆèƒ½èˆ‡å¯ç”¨æ€§ã€‚  æˆå“¡è³‡æ ¼æœå‹™    æˆå“¡è³‡æ ¼æœå‹™çš„æ ¸å¿ƒåŠŸèƒ½ :\n   å®ƒä¸»è¦ç”¨æ–¼ç¢ºå®šå“ªäº›ç¯€é»ç›®å‰æ˜¯æ´»å‹•çš„ï¼Œä¸¦ä¸”æ˜¯å¢é›†çš„æ´»å‹•æˆå“¡ã€‚ç”±æ–¼ç„¡é™çš„ç¶²è·¯å»¶é²ï¼Œç„¡æ³•å¯é åœ°æª¢æ¸¬åˆ°å¦ä¸€å€‹ç¯€é»æ˜¯å¦å¤±æ•ˆï¼Œä½†é€šéå…±è­˜ï¼Œç¯€é»å¯ä»¥é”æˆä¸€è‡´æ„è¦‹ï¼Œæ±ºå®šå“ªäº›ç¯€é»æ‡‰è¢«èªç‚ºæ˜¯å­˜åœ¨æˆ–ä¸å­˜åœ¨ã€‚   å…±è­˜åœ¨æ•…éšœæª¢æ¸¬ä¸­çš„è§’è‰² :\n   é€éå…±è­˜ä¾†é€²è¡Œæ•…éšœæª¢æ¸¬å¯ä»¥å”åŠ©ç¯€é»å°±å“ªäº›ç¯€é»æ˜¯å­˜åœ¨æˆ–ä¸å­˜åœ¨é”æˆä¸€è‡´ã€‚é›–ç„¶å¯èƒ½æœƒæœ‰ç¯€é»è¢«éŒ¯èª¤åœ°å®£å‘Šæ­»äº¡ï¼Œä½†å°ç³»çµ±ä¾†èªªï¼ŒçŸ¥é“å“ªäº›ç¯€é»æ˜¯ç•¶å‰çš„æˆå“¡æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚   é ˜å°è€…é¸èˆ‰èˆ‡æˆå“¡è³‡æ ¼ :\n   åœ¨é¸æ“‡é ˜å°è€…æ™‚ï¼Œä¾‹å¦‚å¯èƒ½ç°¡å–®åœ°é¸æ“‡ç•¶å‰æˆå“¡ä¸­ç·¨è™Ÿæœ€å°çš„æˆå“¡ã€‚ä½†å¦‚æœä¸åŒçš„ç¯€é»å°ç¾æœ‰æˆå“¡æœ‰ä¸åŒçš„æ„è¦‹ï¼Œé€™ç¨®æ–¹æ³•å°‡ä¸èµ·ä½œç”¨ã€‚æˆå“¡è³‡æ ¼æœå‹™ç¢ºä¿ç¯€é»å°å¢é›†çš„ç¾æœ‰æˆå“¡æœ‰ä¸€è‡´çš„ç†è§£ï¼Œå¾è€Œä¿ƒé€²äº†æœ‰æ•ˆçš„é ˜å°è€…é¸èˆ‰ã€‚  9.5 æœ¬ç« å°çµ  é”æˆå…±è­˜æ„å‘³è‘—ä»¥é€™æ¨£ä¸€ç¨®æ–¹å¼æ±ºå®šæŸä»¶äº‹ï¼šæ‰€æœ‰ç¯€é»ä¸€è‡´åŒæ„æ‰€åšæ±ºå®šï¼Œä¸”é€™ä¸€æ±ºå®šä¸å¯æ’¤éŠ·ã€‚é€éæ·±å…¥æŒ–æ˜ï¼Œçµæœæˆ‘å€‘ç™¼ç¾å¾ˆå»£æ³›çš„ä¸€ç³»åˆ—å•é¡Œå¯¦éš›ä¸Šéƒ½å¯ä»¥æ­¸çµç‚ºå…±è­˜å•é¡Œï¼Œä¸¦ä¸”å½¼æ­¤ç­‰åƒ¹ï¼ˆå¾é€™å€‹æ„ç¾©ä¸Šä¾†è¬›ï¼Œå¦‚æœä½ æœ‰å…¶ä¸­ä¹‹ä¸€çš„è§£æ±ºæ–¹æ¡ˆï¼Œå°±å¯ä»¥è¼•æ˜“å°‡å®ƒè½‰æ›ç‚ºå…¶ä»–å•é¡Œçš„è§£æ±ºæ–¹æ¡ˆï¼‰ã€‚é€™äº›ç­‰åƒ¹çš„å•é¡ŒåŒ…æ‹¬ï¼š   ç·šæ€§ä¸€è‡´æ€§çš„ CAS æš«å­˜å™¨  æš«å­˜å™¨éœ€è¦åŸºæ–¼ç•¶å‰å€¼æ˜¯å¦ç­‰æ–¼æ“ä½œçµ¦å‡ºçš„å¼•æ•¸ï¼ŒåŸå­åœ°Â   æ±ºå®š Â æ˜¯å¦è¨­å®šæ–°å€¼ã€‚  åŸå­äº‹å‹™æäº¤  è³‡æ–™åº«å¿…é ˆÂ   æ±ºå®š Â æ˜¯å¦æäº¤æˆ–ä¸­æ­¢åˆ†æ•£å¼äº‹å‹™ã€‚  å…¨åºå»£æ’­  è¨Šæ¯ç³»çµ±å¿…é ˆÂ   æ±ºå®š Â å‚³éè¨Šæ¯çš„é †åºã€‚  é–å’Œç§Ÿç´„  ç•¶å¹¾å€‹å®¢æˆ¶ç«¯çˆ­æ¶é–æˆ–ç§Ÿç´„æ™‚ï¼Œç”±é–ä¾†Â   æ±ºå®š Â å“ªå€‹å®¢æˆ¶ç«¯æˆåŠŸç²å¾—é–ã€‚  æˆå“¡ / å”èª¿æœå‹™  çµ¦å®šæŸç¨®æ•…éšœæª¢æ¸¬å™¨ï¼ˆä¾‹å¦‚è¶…æ™‚ï¼‰ï¼Œç³»çµ±å¿…é ˆÂ   æ±ºå®š Â å“ªäº›ç¯€é»æ´»è‘—ï¼Œå“ªäº›ç¯€é»å› ç‚ºæœƒè©±è¶…æ™‚éœ€è¦è¢«å®£å‘Šæ­»äº¡ã€‚  å”¯ä¸€æ€§ç´„æŸ  ç•¶å¤šå€‹äº‹å‹™åŒæ™‚å˜—è©¦ä½¿ç”¨ç›¸åŒçš„éµå»ºç«‹è¡çªè¨˜éŒ„æ™‚ï¼Œç´„æŸå¿…é ˆÂ   æ±ºå®š Â å“ªä¸€å€‹è¢«å…è¨±ï¼Œå“ªäº›å› ç‚ºé•åç´„æŸè€Œå¤±æ•—ã€‚  å¦‚æœé ˜å°è€…å¤±æ•ˆï¼Œæˆ–è€…å¦‚æœç¶²è·¯ä¸­æ–·å°è‡´é ˜å°è€…ä¸å¯é”ï¼Œé€™æ¨£çš„ç³»çµ±å°±ç„¡æ³•å–å¾—ä»»ä½•é€²å±•ã€‚æ‡‰å°é€™ç¨®æƒ…æ³å¯ä»¥æœ‰ä¸‰ç¨®æ–¹æ³•ï¼š   ç­‰å¾…é ˜å°è€…æ¢å¾©ï¼Œæ¥å—ç³»çµ±å°‡åœ¨é€™æ®µæ™‚é–“é˜»å¡çš„äº‹å¯¦ã€‚è¨±å¤š XA/JTA äº‹å‹™å”èª¿è€…é¸æ“‡é€™å€‹é¸é …ã€‚é€™ç¨®æ–¹æ³•ä¸¦ä¸èƒ½å®Œå…¨é”æˆå…±è­˜ï¼Œå› ç‚ºå®ƒä¸èƒ½æ»¿è¶³Â   çµ‚æ­¢ Â å±¬æ€§çš„è¦æ±‚ï¼šå¦‚æœé ˜å°è€…çºŒå‘½å¤±æ•—ï¼Œç³»çµ±å¯èƒ½æœƒæ°¸ä¹…é˜»å¡ã€‚  äººå·¥æ•…éšœåˆ‡æ›ï¼Œè®“äººé¡é¸æ“‡ä¸€å€‹æ–°çš„é ˜å°è€…ç¯€é»ï¼Œä¸¦é‡æ–°é…ç½®ç³»çµ±ä½¿ä¹‹ç”Ÿæ•ˆï¼Œè¨±å¤šé—œä¿‚å‹è³‡æ–™åº«éƒ½æ¡ç”¨é€™ç¨®æ–¹æ–¹å¼ã€‚é€™æ˜¯ä¸€ç¨®ä¾†è‡ª â€œå¤©æ„â€ çš„å…±è­˜ â€”â€” ç”±è¨ˆç®—æ©Ÿç³»çµ±ä¹‹å¤–çš„é‹ç¶­äººå“¡åšå‡ºæ±ºå®šã€‚æ•…éšœåˆ‡æ›çš„é€Ÿåº¦å—åˆ°äººé¡è¡Œå‹•é€Ÿåº¦çš„é™åˆ¶ï¼Œé€šå¸¸è¦æ¯”è¨ˆç®—æ©Ÿæ…¢ï¼ˆå¾—å¤šï¼‰ã€‚  ä½¿ç”¨æ¼”ç®—æ³•è‡ªå‹•é¸æ“‡ä¸€å€‹æ–°çš„é ˜å°è€…ã€‚é€™ç¨®æ–¹æ³•éœ€è¦ä¸€ç¨®å…±è­˜æ¼”ç®—æ³•ï¼Œä½¿ç”¨æˆç†Ÿçš„æ¼”ç®—æ³•ä¾†æ­£ç¢ºè™•ç†æƒ¡åŠ£çš„ç¶²è·¯æ¢ä»¶æ˜¯æ˜æ™ºä¹‹èˆ‰ã€107ã€‘ã€‚  html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}"}]