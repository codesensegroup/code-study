import{r as h,ag as W,H as j,ah as q,ai as G,G as T,a4 as R,o as B,a6 as F}from"#entry";function x(e){return q()?(G(e),!0):!1}function S(e){return typeof e=="function"?e():j(e)}const A=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const N=Object.prototype.toString,D=e=>N.call(e)==="[object Object]",b=()=>{},H=V();function V(){var e,t;return A&&((e=window?.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window?.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function $(e){let t;function i(){return t||(t=e()),t}return i.reset=async()=>{const n=t;t=void 0,n&&await n},i}function z(e,t,i={}){const{immediate:n=!0}=i,a=h(!1);let r=null;function d(){r&&(clearTimeout(r),r=null)}function u(){a.value=!1,d()}function p(...m){d(),a.value=!0,r=setTimeout(()=>{a.value=!1,r=null,e(...m)},S(t))}return n&&(a.value=!0,A&&p()),x(u),{isPending:W(a),start:p,stop:u}}function g(e){var t;const i=S(e);return(t=i?.$el)!=null?t:i}const O=A?window:void 0,k=A?window.navigator:void 0;function w(...e){let t,i,n,a;if(typeof e[0]=="string"||Array.isArray(e[0])?([i,n,a]=e,t=O):[t,i,n,a]=e,!t)return b;Array.isArray(i)||(i=[i]),Array.isArray(n)||(n=[n]);const r=[],d=()=>{r.forEach(c=>c()),r.length=0},u=(c,v,o,s)=>(c.addEventListener(v,o,s),()=>c.removeEventListener(v,o,s)),p=R(()=>[g(t),S(a)],([c,v])=>{if(d(),!c)return;const o=D(v)?{...v}:v;r.push(...i.flatMap(s=>n.map(f=>u(c,s,f,o))))},{immediate:!0,flush:"post"}),m=()=>{p(),d()};return x(m),m}let P=!1;function Q(e,t,i={}){const{window:n=O,ignore:a=[],capture:r=!0,detectIframe:d=!1}=i;if(!n)return b;H&&!P&&(P=!0,Array.from(n.document.body.children).forEach(o=>o.addEventListener("click",b)),n.document.documentElement.addEventListener("click",b));let u=!0;const p=o=>a.some(s=>{if(typeof s=="string")return Array.from(n.document.querySelectorAll(s)).some(f=>f===o.target||o.composedPath().includes(f));{const f=g(s);return f&&(o.target===f||o.composedPath().includes(f))}}),c=[w(n,"click",o=>{const s=g(e);if(!(!s||s===o.target||o.composedPath().includes(s))){if(o.detail===0&&(u=!p(o)),!u){u=!0;return}t(o)}},{passive:!0,capture:r}),w(n,"pointerdown",o=>{const s=g(e);u=!p(o)&&!!(s&&!o.composedPath().includes(s))},{passive:!0}),d&&w(n,"blur",o=>{setTimeout(()=>{var s;const f=g(e);((s=n.document.activeElement)==null?void 0:s.tagName)==="IFRAME"&&!f?.contains(n.document.activeElement)&&t(o)},0)})].filter(Boolean);return()=>c.forEach(o=>o())}function J(){const e=h(!1),t=F();return t&&B(()=>{e.value=!0},t),e}function I(e){const t=J();return T(()=>(t.value,!!e()))}function _(e,t={}){const{controls:i=!1,navigator:n=k}=t,a=I(()=>n&&"permissions"in n);let r;const d=typeof e=="string"?{name:e}:e,u=h(),p=()=>{r&&(u.value=r.state)},m=$(async()=>{if(a.value){if(!r)try{r=await n.permissions.query(d),w(r,"change",p),p()}catch{u.value="prompt"}return r}});return m(),i?{state:u,isSupported:a,query:m}:u}function U(e={}){const{navigator:t=k,read:i=!1,source:n,copiedDuring:a=1500,legacy:r=!1}=e,d=I(()=>t&&"clipboard"in t),u=_("clipboard-read"),p=_("clipboard-write"),m=T(()=>d.value||r),c=h(""),v=h(!1),o=z(()=>v.value=!1,a);function s(){d.value&&E(u.value)?t.clipboard.readText().then(l=>{c.value=l}):c.value=L()}m.value&&i&&w(["copy","cut"],s);async function f(l=S(n)){m.value&&l!=null&&(d.value&&E(p.value)?await t.clipboard.writeText(l):M(l),c.value=l,v.value=!0,o.start())}function M(l){const y=document.createElement("textarea");y.value=l??"",y.style.position="absolute",y.style.opacity="0",document.body.appendChild(y),y.select(),document.execCommand("copy"),y.remove()}function L(){var l,y,C;return(C=(y=(l=document?.getSelection)==null?void 0:l.call(document))==null?void 0:y.toString())!=null?C:""}function E(l){return l==="granted"||l==="prompt"}return{isSupported:m,text:c,copied:v,copy:f}}export{w as a,Q as o,U as u};
