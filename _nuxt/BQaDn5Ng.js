import{r as h,aj as W,H as j,ak as q,al as G,G as T,Z as R,o as B,a9 as F}from"#entry";function k(e){return q()?(G(e),!0):!1}function S(e){return typeof e=="function"?e():j(e)}const A=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const N=Object.prototype.toString,D=e=>N.call(e)==="[object Object]",b=()=>{},H=V();function V(){var e,t;return A&&((e=window?.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window?.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function Z(e){let t;function i(){return t||(t=e()),t}return i.reset=async()=>{const n=t;t=void 0,n&&await n},i}function $(e,t,i={}){const{immediate:n=!0}=i,u=h(!1);let r=null;function d(){r&&(clearTimeout(r),r=null)}function a(){u.value=!1,d()}function p(...m){d(),u.value=!0,r=setTimeout(()=>{u.value=!1,r=null,e(...m)},S(t))}return n&&(u.value=!0,A&&p()),k(a),{isPending:W(u),start:p,stop:a}}function g(e){var t;const i=S(e);return(t=i?.$el)!=null?t:i}const x=A?window:void 0,O=A?window.navigator:void 0;function w(...e){let t,i,n,u;if(typeof e[0]=="string"||Array.isArray(e[0])?([i,n,u]=e,t=x):[t,i,n,u]=e,!t)return b;Array.isArray(i)||(i=[i]),Array.isArray(n)||(n=[n]);const r=[],d=()=>{r.forEach(c=>c()),r.length=0},a=(c,v,o,s)=>(c.addEventListener(v,o,s),()=>c.removeEventListener(v,o,s)),p=R(()=>[g(t),S(u)],([c,v])=>{if(d(),!c)return;const o=D(v)?{...v}:v;r.push(...i.flatMap(s=>n.map(f=>a(c,s,f,o))))},{immediate:!0,flush:"post"}),m=()=>{p(),d()};return k(m),m}let P=!1;function K(e,t,i={}){const{window:n=x,ignore:u=[],capture:r=!0,detectIframe:d=!1}=i;if(!n)return b;H&&!P&&(P=!0,Array.from(n.document.body.children).forEach(o=>o.addEventListener("click",b)),n.document.documentElement.addEventListener("click",b));let a=!0;const p=o=>u.some(s=>{if(typeof s=="string")return Array.from(n.document.querySelectorAll(s)).some(f=>f===o.target||o.composedPath().includes(f));{const f=g(s);return f&&(o.target===f||o.composedPath().includes(f))}}),c=[w(n,"click",o=>{const s=g(e);if(!(!s||s===o.target||o.composedPath().includes(s))){if(o.detail===0&&(a=!p(o)),!a){a=!0;return}t(o)}},{passive:!0,capture:r}),w(n,"pointerdown",o=>{const s=g(e);a=!p(o)&&!!(s&&!o.composedPath().includes(s))},{passive:!0}),d&&w(n,"blur",o=>{setTimeout(()=>{var s;const f=g(e);((s=n.document.activeElement)==null?void 0:s.tagName)==="IFRAME"&&!f?.contains(n.document.activeElement)&&t(o)},0)})].filter(Boolean);return()=>c.forEach(o=>o())}function z(){const e=h(!1),t=F();return t&&B(()=>{e.value=!0},t),e}function I(e){const t=z();return T(()=>(t.value,!!e()))}function _(e,t={}){const{controls:i=!1,navigator:n=O}=t,u=I(()=>n&&"permissions"in n);let r;const d=typeof e=="string"?{name:e}:e,a=h(),p=()=>{r&&(a.value=r.state)},m=Z(async()=>{if(u.value){if(!r)try{r=await n.permissions.query(d),w(r,"change",p),p()}catch{a.value="prompt"}return r}});return m(),i?{state:a,isSupported:u,query:m}:a}function Q(e={}){const{navigator:t=O,read:i=!1,source:n,copiedDuring:u=1500,legacy:r=!1}=e,d=I(()=>t&&"clipboard"in t),a=_("clipboard-read"),p=_("clipboard-write"),m=T(()=>d.value||r),c=h(""),v=h(!1),o=$(()=>v.value=!1,u);function s(){d.value&&E(a.value)?t.clipboard.readText().then(l=>{c.value=l}):c.value=L()}m.value&&i&&w(["copy","cut"],s);async function f(l=S(n)){m.value&&l!=null&&(d.value&&E(p.value)?await t.clipboard.writeText(l):M(l),c.value=l,v.value=!0,o.start())}function M(l){const y=document.createElement("textarea");y.value=l??"",y.style.position="absolute",y.style.opacity="0",document.body.appendChild(y),y.select(),document.execCommand("copy"),y.remove()}function L(){var l,y,C;return(C=(y=(l=document?.getSelection)==null?void 0:l.call(document))==null?void 0:y.toString())!=null?C:""}function E(l){return l==="granted"||l==="prompt"}return{isSupported:m,text:c,copied:v,copy:f}}export{w as a,K as o,Q as u};
