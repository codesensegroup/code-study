<!DOCTYPE html>
<html  lang="en">
<head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>19 POLICY AND LEVEL 策略與層次 · 摳Sense讀書會筆記</title>
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="twitter:card" content="summary_large_image">
<meta property="og:image" content="https://user-images.githubusercontent.com/904724/185365452-87b7ca7b-6030-4813-a2db-5e65c785bf88.png">
<meta property="og:title" content="19 POLICY AND LEVEL 策略與層次">
<meta name="description" content="基本上，所有的軟體都是一組策略聲明的集合。簡單來說電腦程式就是一組仔細描述如何將輸入轉換為輸出的策略聲明的集合。">
<meta property="og:description" content="基本上，所有的軟體都是一組策略聲明的集合。簡單來說電腦程式就是一組仔細描述如何將輸入轉換為輸出的策略聲明的集合。">
<link rel="preload" as="fetch" crossorigin="anonymous" href="/code-study/clean-arch/chapter19/_payload.json">
<link rel="stylesheet" href="/code-study/_nuxt/entry.3799f3b1.css">
<link rel="stylesheet" href="/code-study/_nuxt/DocumentDrivenNotFound.7238633c.css">
<link rel="stylesheet" href="/code-study/_nuxt/ButtonLink.c4905621.css">
<link rel="stylesheet" href="/code-study/_nuxt/default.477f6f22.css">
<link rel="stylesheet" href="/code-study/_nuxt/ProseCodeInline.21ce328c.css">
<link rel="stylesheet" href="/code-study/_nuxt/Alert.408d0512.css">
<link rel="stylesheet" href="/code-study/_nuxt/ProseA.e2976377.css">
<link rel="stylesheet" href="/code-study/_nuxt/DocsPrevNext.0d80e373.css">
<link rel="stylesheet" href="/code-study/_nuxt/DocsToc.855ff635.css">
<link rel="stylesheet" href="/code-study/_nuxt/DocsTocLinks.310b9647.css">
<link rel="stylesheet" href="/code-study/_nuxt/ProseP.945916cd.css">
<link rel="stylesheet" href="/code-study/_nuxt/ProseUl.c9c63ec7.css">
<link rel="stylesheet" href="/code-study/_nuxt/ProseLi.ac05b421.css">
<link rel="stylesheet" href="/code-study/_nuxt/ProseImg.9611dbfe.css">
<link rel="stylesheet" href="/code-study/_nuxt/ProseH2.df45a763.css">
<link rel="stylesheet" href="/code-study/_nuxt/ProseH3.88c2d983.css">
<link rel="stylesheet" href="/code-study/_nuxt/ProsePre.e63e49c6.css">
<link rel="stylesheet" href="/code-study/_nuxt/ProseCode.96aa36be.css">
<link rel="stylesheet" href="/code-study/_nuxt/ProseOl.5ddab164.css">
<link rel="modulepreload" as="script" crossorigin href="/code-study/_nuxt/entry.2582daaf.js">
<link rel="modulepreload" as="script" crossorigin href="/code-study/_nuxt/document-driven.e03b0dc0.js">
<link rel="modulepreload" as="script" crossorigin href="/code-study/_nuxt/DocumentDrivenEmpty.ed5cf886.js">
<link rel="modulepreload" as="script" crossorigin href="/code-study/_nuxt/ContentRenderer.54cf9093.js">
<link rel="modulepreload" as="script" crossorigin href="/code-study/_nuxt/ContentRendererMarkdown.vue.29619411.js">
<link rel="modulepreload" as="script" crossorigin href="/code-study/_nuxt/DocumentDrivenNotFound.75cb5896.js">
<link rel="modulepreload" as="script" crossorigin href="/code-study/_nuxt/ButtonLink.515f64de.js">
<link rel="modulepreload" as="script" crossorigin href="/code-study/_nuxt/slot.9ab99d68.js">
<link rel="modulepreload" as="script" crossorigin href="/code-study/_nuxt/node.676c5e99.js">
<link rel="modulepreload" as="script" crossorigin href="/code-study/_nuxt/default.01a8fdf9.js">
<link rel="modulepreload" as="script" crossorigin href="/code-study/_nuxt/ProseCodeInline.844ffddc.js">
<link rel="modulepreload" as="script" crossorigin href="/code-study/_nuxt/Alert.c191622d.js">
<link rel="modulepreload" as="script" crossorigin href="/code-study/_nuxt/ProseA.ec1c6990.js">
<link rel="modulepreload" as="script" crossorigin href="/code-study/_nuxt/EditOnLink.vue.c5540c64.js">
<link rel="modulepreload" as="script" crossorigin href="/code-study/_nuxt/DocsPrevNext.845557c0.js">
<link rel="modulepreload" as="script" crossorigin href="/code-study/_nuxt/DocsToc.cb9348b8.js">
<link rel="modulepreload" as="script" crossorigin href="/code-study/_nuxt/DocsTocLinks.2dc9c6d1.js">
<link rel="modulepreload" as="script" crossorigin href="/code-study/_nuxt/ContentRendererMarkdown.ffe1426e.js">
<link rel="modulepreload" as="script" crossorigin href="/code-study/_nuxt/EditOnLink.20283fae.js">
<link rel="modulepreload" as="script" crossorigin href="/code-study/_nuxt/ProseP.7775e778.js">
<link rel="modulepreload" as="script" crossorigin href="/code-study/_nuxt/ProseUl.b99ad81d.js">
<link rel="modulepreload" as="script" crossorigin href="/code-study/_nuxt/ProseLi.a95eabfd.js">
<link rel="modulepreload" as="script" crossorigin href="/code-study/_nuxt/ProseImg.5927d4af.js">
<link rel="modulepreload" as="script" crossorigin href="/code-study/_nuxt/ProseH2.7e4b4633.js">
<link rel="modulepreload" as="script" crossorigin href="/code-study/_nuxt/ProseH3.61db6c55.js">
<link rel="modulepreload" as="script" crossorigin href="/code-study/_nuxt/ProsePre.9534d95a.js">
<link rel="modulepreload" as="script" crossorigin href="/code-study/_nuxt/ProseCode.04361597.js">
<link rel="modulepreload" as="script" crossorigin href="/code-study/_nuxt/ProseOl.fd6c9f15.js">
<link rel="prefetch" as="style" href="/code-study/_nuxt/page.41b64923.css">
<link rel="prefetch" as="script" crossorigin href="/code-study/_nuxt/page.ff414a04.js">
<link rel="prefetch" as="style" href="/code-study/_nuxt/useStudio.37ff8fdd.css">
<link rel="prefetch" as="script" crossorigin href="/code-study/_nuxt/useStudio.86414238.js">
<link rel="prefetch" as="script" crossorigin href="/code-study/_nuxt/debug.fb47982b.js">
<link rel="prefetch" as="script" crossorigin href="/code-study/_nuxt/client-db.c7fd094a.js">
<link rel="prefetch" as="style" href="/code-study/_nuxt/error-404.e7689c2d.css">
<link rel="prefetch" as="script" crossorigin href="/code-study/_nuxt/error-404.d91ce8cc.js">
<link rel="prefetch" as="style" href="/code-study/_nuxt/error-500.92b46a75.css">
<link rel="prefetch" as="script" crossorigin href="/code-study/_nuxt/error-500.816410d9.js">
<link rel="prefetch" as="script" crossorigin href="/code-study/_nuxt/photoswipe.esm.3ee328cd.js">
<script type="module" src="/code-study/_nuxt/entry.2582daaf.js" crossorigin></script><style id="pinceau-runtime-hydratable">@media{.phy[--]{--puid:l3-Kuf-v;}.pv-alcTlr{padding-left:var(--elements-container-padding-mobile);padding-right:var(--elements-container-padding-mobile);}@media (min-width: 475px){.pv-alcTlr{padding-left:var(--elements-container-padding-xs);padding-right:var(--elements-container-padding-xs);}}@media (min-width: 640px){.pv-alcTlr{padding-left:var(--elements-container-padding-sm);padding-right:var(--elements-container-padding-sm);}}@media (min-width: 768px){.pv-alcTlr{padding-left:var(--elements-container-padding-md);padding-right:var(--elements-container-padding-md);}}} </style><style id="pinceau-theme">@media { :root {--pinceau-mq: initial; --docus-search-results-highlight-color: white;--docus-search-results-window-maxHeight: 100%;--docus-search-results-window-maxWidth: 640px;--docus-search-results-window-marginTop: 0;--docus-search-input-borderStyle: solid;--docus-search-input-borderWidth: 1px;--docus-search-backdropFilter: blur(24px);--docus-loadingBar-gradientColorStop3: #0047e1;--docus-loadingBar-gradientColorStop2: #34cdfe;--docus-loadingBar-gradientColorStop1: #00dc82;--docus-loadingBar-height: 3px;--docus-readableLine: 78ch;--docus-footer-height: 145px;--docus-header-height: 64px;--prose-code-inline-padding: 0.2rem 0.375rem 0.2rem 0.375rem;--prose-code-block-backdropFilter: contrast(1);--prose-code-block-border-style: solid;--prose-code-block-border-width: 1px;--prose-tbody-tr-borderBottom-style: dashed;--prose-tbody-tr-borderBottom-width: 1px;--prose-th-textAlign: inherit;--prose-thead-borderBottom-style: solid;--prose-thead-borderBottom-width: 1px;--prose-thead-border-style: solid;--prose-thead-border-width: 0px;--prose-table-textAlign: start;--prose-hr-width: 1px;--prose-hr-style: solid;--prose-li-listStylePosition: outside;--prose-ol-li-markerColor: currentColor;--prose-ol-paddingInlineStart: 21px;--prose-ol-listStyleType: decimal;--prose-ul-li-markerColor: currentColor;--prose-ul-paddingInlineStart: 21px;--prose-ul-listStyleType: disc;--prose-blockquote-border-style: solid;--prose-blockquote-border-width: 4px;--prose-blockquote-quotes: '201C' '201D' '2018' '2019';--prose-blockquote-paddingInlineStart: 24px;--prose-a-code-color-hover: currentColor;--prose-a-code-color-static: currentColor;--prose-a-hasCode-borderBottom: none;--prose-a-border-distance: 2px;--prose-a-border-color-hover: currentColor;--prose-a-border-color-static: currentColor;--prose-a-border-style-hover: solid;--prose-a-border-style-static: dashed;--prose-a-border-width: 1px;--prose-a-color-static: inherit;--prose-a-textDecoration: none;--prose-h6-margin: 3rem 0 2rem;--prose-h5-margin: 3rem 0 2rem;--prose-h4-margin: 3rem 0 2rem;--prose-h3-margin: 3rem 0 2rem;--prose-h2-margin: 3rem 0 2rem;--prose-h1-margin: 0 0 2rem;--typography-lead-loose: 2;--typography-lead-relaxed: 1.625;--typography-lead-normal: 1.5;--typography-lead-snug: 1.375;--typography-lead-tight: 1.25;--typography-lead-none: 1;--typography-lead-10: 2.5rem;--typography-lead-9: 2.25rem;--typography-lead-8: 2rem;--typography-lead-7: 1.75rem;--typography-lead-6: 1.5rem;--typography-lead-5: 1.25rem;--typography-lead-4: 1rem;--typography-lead-3: .75rem;--typography-lead-2: .5rem;--typography-lead-1: .025rem;--typography-fontWeight-black: 900;--typography-fontWeight-extrabold: 800;--typography-fontWeight-bold: 700;--typography-fontWeight-semibold: 600;--typography-fontWeight-medium: 500;--typography-fontWeight-normal: 400;--typography-fontWeight-light: 300;--typography-fontWeight-extralight: 200;--typography-fontWeight-thin: 100;--typography-fontSize-9xl: 128px;--typography-fontSize-8xl: 96px;--typography-fontSize-7xl: 72px;--typography-fontSize-6xl: 60px;--typography-fontSize-5xl: 48px;--typography-fontSize-4xl: 36px;--typography-fontSize-3xl: 30px;--typography-fontSize-2xl: 24px;--typography-fontSize-xl: 20px;--typography-fontSize-lg: 18px;--typography-fontSize-base: 16px;--typography-fontSize-sm: 14px;--typography-fontSize-xs: 12px;--typography-letterSpacing-wide: 0.025em;--typography-letterSpacing-tight: -0.025em;--typography-verticalMargin-base: 24px;--typography-verticalMargin-sm: 16px;--elements-border-secondary-hover: [object Object];--elements-backdrop-background: #fffc;--elements-backdrop-filter: saturate(200%) blur(20px);--elements-container-maxWidth: 80rem;--lead-loose: 2;--lead-relaxed: 1.625;--lead-normal: 1.5;--lead-snug: 1.375;--lead-tight: 1.25;--lead-none: 1;--lead-10: 2.5rem;--lead-9: 2.25rem;--lead-8: 2rem;--lead-7: 1.75rem;--lead-6: 1.5rem;--lead-5: 1.25rem;--lead-4: 1rem;--lead-3: .75rem;--lead-2: .5rem;--lead-1: .025rem;--letterSpacing-widest: 0.1em;--letterSpacing-wider: 0.05em;--letterSpacing-wide: 0.025em;--letterSpacing-normal: 0em;--letterSpacing-tight: -0.025em;--letterSpacing-tighter: -0.05em;--fontSize-9xl: 8rem;--fontSize-8xl: 6rem;--fontSize-7xl: 4.5rem;--fontSize-6xl: 3.75rem;--fontSize-5xl: 3rem;--fontSize-4xl: 2.25rem;--fontSize-3xl: 1.875rem;--fontSize-2xl: 1.5rem;--fontSize-xl: 1.25rem;--fontSize-lg: 1.125rem;--fontSize-base: 1rem;--fontSize-sm: 0.875rem;--fontSize-xs: 0.75rem;--fontWeight-black: 900;--fontWeight-extrabold: 800;--fontWeight-bold: 700;--fontWeight-semibold: 600;--fontWeight-medium: 500;--fontWeight-normal: 400;--fontWeight-light: 300;--fontWeight-extralight: 200;--fontWeight-thin: 100;--font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace;--font-serif: ui-serif, Georgia, Cambria, Times New Roman, Times, serif;--font-sans: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;--opacity-total: 1;--opacity-high: 0.8;--opacity-medium: 0.5;--opacity-soft: 0.3;--opacity-light: 0.15;--opacity-bright: 0.1;--opacity-noOpacity: 0;--borderWidth-lg: 3px;--borderWidth-md: 2px;--borderWidth-sm: 1px;--borderWidth-noBorder: 0;--space-rem-875: 0.875rem;--space-rem-625: 0.625rem;--space-rem-375: 0.375rem;--space-rem-125: 0.125rem;--space-px: 1px;--space-128: 32rem;--space-96: 24rem;--space-80: 20rem;--space-72: 18rem;--space-64: 16rem;--space-60: 15rem;--space-56: 14rem;--space-52: 13rem;--space-48: 12rem;--space-44: 11rem;--space-40: 10rem;--space-36: 9rem;--space-32: 8rem;--space-28: 7rem;--space-24: 6rem;--space-20: 5rem;--space-16: 4rem;--space-14: 3.5rem;--space-12: 3rem;--space-11: 2.75rem;--space-10: 2.5rem;--space-9: 2.25rem;--space-8: 2rem;--space-7: 1.75rem;--space-6: 1.5rem;--space-5: 1.25rem;--space-4: 1rem;--space-3: 0.75rem;--space-2: 0.5rem;--space-1: 0.25rem;--space-0: 0px;--size-full: 100%;--size-7xl: 80rem;--size-6xl: 72rem;--size-5xl: 64rem;--size-4xl: 56rem;--size-3xl: 48rem;--size-2xl: 42rem;--size-xl: 36rem;--size-lg: 32rem;--size-md: 28rem;--size-sm: 24rem;--size-xs: 20rem;--size-200: 200px;--size-104: 104px;--size-80: 80px;--size-64: 64px;--size-56: 56px;--size-48: 48px;--size-40: 40px;--size-32: 32px;--size-24: 24px;--size-20: 20px;--size-16: 16px;--size-12: 12px;--size-8: 8px;--size-6: 6px;--size-4: 4px;--size-2: 2px;--size-0: 0px;--radii-full: 9999px;--radii-3xl: 1.75rem;--radii-2xl: 1.5rem;--radii-xl: 1rem;--radii-lg: 0.75rem;--radii-md: 0.5rem;--radii-sm: 0.375rem;--radii-xs: 0.25rem;--radii-2xs: 0.125rem;--radii-none: 0px;--shadow-none: 0px 0px 0px 0px transparent;--height-screen: 100vh;--width-screen: 100vw;--color-primary-900: #001A1F;--color-primary-800: #00232B;--color-primary-700: #024757;--color-primary-600: #09A0C1;--color-primary-500: #1AD6FF;--color-primary-400: #55E1FF;--color-primary-300: #82E3FF;--color-primary-200: #C5F2FF;--color-primary-100: #DCF7FF;--color-primary-50: #F1FCFF;--color-ruby-900: #380011;--color-ruby-800: #700021;--color-ruby-700: #a90032;--color-ruby-600: #e10043;--color-ruby-500: #ff1a5e;--color-ruby-400: #ff4079;--color-ruby-300: #ff6694;--color-ruby-200: #ff8dae;--color-ruby-100: #ffb3c9;--color-ruby-50: #ffd9e4;--color-pink-900: #380025;--color-pink-800: #70004b;--color-pink-700: #a90070;--color-pink-600: #e10095;--color-pink-500: #ff1ab2;--color-pink-400: #ff40bf;--color-pink-300: #ff66cc;--color-pink-200: #ff8dd8;--color-pink-100: #ffb3e5;--color-pink-50: #ffd9f2;--color-purple-900: #190038;--color-purple-800: #330070;--color-purple-700: #4c00a9;--color-purple-600: #6500e1;--color-purple-500: #811aff;--color-purple-400: #9640ff;--color-purple-300: #ab66ff;--color-purple-200: #c08dff;--color-purple-100: #d5b3ff;--color-purple-50: #ead9ff;--color-royalblue-900: #0b0531;--color-royalblue-800: #160a62;--color-royalblue-700: #211093;--color-royalblue-600: #2c15c4;--color-royalblue-500: #4127e8;--color-royalblue-400: #614bec;--color-royalblue-300: #806ff0;--color-royalblue-200: #a093f3;--color-royalblue-100: #c0b7f7;--color-royalblue-50: #dfdbfb;--color-indigoblue-900: #001238;--color-indigoblue-800: #002370;--color-indigoblue-700: #0035a9;--color-indigoblue-600: #0047e1;--color-indigoblue-500: #1a62ff;--color-indigoblue-400: #407cff;--color-indigoblue-300: #6696ff;--color-indigoblue-200: #8db0ff;--color-indigoblue-100: #b3cbff;--color-indigoblue-50: #d9e5ff;--color-blue-900: #00131D;--color-blue-800: #002235;--color-blue-700: #014267;--color-blue-600: #0069A6;--color-blue-500: #1AADFF;--color-blue-400: #64C7FF;--color-blue-300: #A1DDFF;--color-blue-200: #C6EAFF;--color-blue-100: #DFF3FF;--color-blue-50: #F2FAFF;--color-lightblue-900: #002e38;--color-lightblue-800: #005c70;--color-lightblue-700: #008aa9;--color-lightblue-600: #00b9e1;--color-lightblue-500: #1ad6ff;--color-lightblue-400: #40ddff;--color-lightblue-300: #66e4ff;--color-lightblue-200: #8deaff;--color-lightblue-100: #b3f1ff;--color-lightblue-50: #d9f8ff;--color-teal-900: #062a28;--color-teal-800: #0b544f;--color-teal-700: #117d77;--color-teal-600: #16a79e;--color-teal-500: #1cd1c6;--color-teal-400: #36e4da;--color-teal-300: #5fe9e1;--color-teal-200: #87efe9;--color-teal-100: #aff4f0;--color-teal-50: #d7faf8;--color-pear-900: #2a2b09;--color-pear-800: #545512;--color-pear-700: #7e801b;--color-pear-600: #a8aa24;--color-pear-500: #d0d32f;--color-pear-400: #d8da52;--color-pear-300: #e0e274;--color-pear-200: #e8e997;--color-pear-100: #eff0ba;--color-pear-50: #f7f8dc;--color-red-900: #1C0301;--color-red-800: #340A01;--color-red-700: #701704;--color-red-600: #BB2402;--color-red-500: #FF3B10;--color-red-400: #FF7353;--color-red-300: #FFA692;--color-red-200: #FFDED7;--color-red-100: #FFF3F0;--color-red-50: #FFF9F8;--color-orange-900: #381800;--color-orange-800: #702f00;--color-orange-700: #a94700;--color-orange-600: #e15e00;--color-orange-500: #ff7a1a;--color-orange-400: #ff9040;--color-orange-300: #ffa666;--color-orange-200: #ffbd8d;--color-orange-100: #ffd3b3;--color-orange-50: #ffe9d9;--color-yellow-900: #1B1500;--color-yellow-800: #292100;--color-yellow-700: #614E02;--color-yellow-600: #CBA408;--color-yellow-500: #FBCA05;--color-yellow-400: #FFDC4E;--color-yellow-300: #FFE372;--color-yellow-200: #FFF0B1;--color-yellow-100: #FFF6D3;--color-yellow-50: #FFFCEE;--color-green-900: #00190F;--color-green-800: #002817;--color-green-700: #006037;--color-green-600: #00B467;--color-green-500: #0DD885;--color-green-400: #3CEEA5;--color-green-300: #86FBCB;--color-green-200: #C3FFE6;--color-green-100: #DEFFF1;--color-green-50: #ECFFF7;--color-gray-900: #121110;--color-gray-800: #201E1B;--color-gray-700: #36332E;--color-gray-600: #67635D;--color-gray-500: #97948F;--color-gray-400: #ADA9A4;--color-gray-300: #DBD9D3;--color-gray-200: #ECEBE8;--color-gray-100: #F6F5F4;--color-gray-50: #FBFBFB;--color-black: #0B0A0A;--color-white: #ffffff;--media-portrait: only screen and (orientation: portrait);--media-landscape: only screen and (orientation: landscape);--media-rm: (prefers-reduced-motion: reduce);--media-2xl: (min-width: 1536px);--media-xl: (min-width: 1280px);--media-lg: (min-width: 1024px);--media-md: (min-width: 768px);--media-sm: (min-width: 640px);--media-xs: (min-width: 475px);--docus-search-results-highlight-backgroundColor: var(--color-primary-500);--docus-search-results-selected-backgroundColor: var(--color-gray-300);--docus-search-results-window-borderRadius: none;--docus-search-results-window-marginX: 0;--docus-search-input-backgroundColor: var(--color-gray-200);--docus-search-input-padding: var(--space-2) var(--space-4);--docus-search-input-gap: var(--space-2);--docus-search-input-fontSize: var(--fontSize-sm);--docus-search-input-borderColor: var(--color-gray-200);--docus-search-input-borderRadius: var(--radii-2xs);--docus-footer-padding: var(--space-4) 0;--docus-header-title-color-hover: var(--color-primary-500);--docus-header-title-color-static: var(--color-gray-900);--docus-header-title-fontWeight: var(--fontWeight-bold);--docus-header-title-fontSize: var(--fontSize-2xl);--docus-header-logo-height: var(--space-6);--docus-body-fontFamily: var(--font-sans);--docus-body-color: var(--color-gray-800);--docus-body-backgroundColor: var(--color-white);--prose-code-inline-fontWeight: var(--typography-fontWeight-normal);--prose-code-inline-fontSize: var(--typography-fontSize-sm);--prose-code-inline-borderRadius: var(--radii-xs);--prose-code-block-pre-padding: var(--typography-verticalMargin-sm);--prose-code-block-margin: var(--typography-verticalMargin-base) 0;--prose-code-block-fontSize: var(--typography-fontSize-sm);--prose-tbody-code-inline-fontSize: var(--typography-fontSize-sm);--prose-tbody-td-padding: var(--typography-verticalMargin-sm);--prose-th-fontWeight: var(--typography-fontWeight-semibold);--prose-th-padding: 0 var(--typography-verticalMargin-sm) var(--typography-verticalMargin-sm) var(--typography-verticalMargin-sm);--prose-table-lineHeight: var(--typography-lead-6);--prose-table-fontSize: var(--typography-fontSize-sm);--prose-table-margin: var(--typography-verticalMargin-base) 0;--prose-hr-margin: var(--typography-verticalMargin-base) 0;--prose-li-margin: var(--typography-verticalMargin-sm) 0;--prose-ol-margin: var(--typography-verticalMargin-base) 0;--prose-ul-margin: var(--typography-verticalMargin-base) 0;--prose-blockquote-margin: var(--typography-verticalMargin-base) 0;--prose-a-code-border-style: var(--prose-a-border-style-static);--prose-a-code-border-width: var(--prose-a-border-width);--prose-a-fontWeight: var(--typography-fontWeight-medium);--prose-img-margin: var(--typography-verticalMargin-base) 0;--prose-strong-fontWeight: var(--typography-fontWeight-semibold);--prose-h6-iconSize: var(--typography-fontSize-base);--prose-h6-fontWeight: var(--typography-fontWeight-semibold);--prose-h6-lineHeight: var(--typography-lead-normal);--prose-h6-fontSize: var(--typography-fontSize-lg);--prose-h5-iconSize: var(--typography-fontSize-lg);--prose-h5-fontWeight: var(--typography-fontWeight-semibold);--prose-h5-lineHeight: var(--typography-lead-snug);--prose-h5-fontSize: var(--typography-fontSize-xl);--prose-h4-iconSize: var(--typography-fontSize-lg);--prose-h4-letterSpacing: var(--typography-letterSpacing-tight);--prose-h4-fontWeight: var(--typography-fontWeight-semibold);--prose-h4-lineHeight: var(--typography-lead-snug);--prose-h4-fontSize: var(--typography-fontSize-2xl);--prose-h3-iconSize: var(--typography-fontSize-xl);--prose-h3-letterSpacing: var(--typography-letterSpacing-tight);--prose-h3-fontWeight: var(--typography-fontWeight-semibold);--prose-h3-lineHeight: var(--typography-lead-snug);--prose-h3-fontSize: var(--typography-fontSize-3xl);--prose-h2-iconSize: var(--typography-fontSize-2xl);--prose-h2-letterSpacing: var(--typography-letterSpacing-tight);--prose-h2-fontWeight: var(--typography-fontWeight-semibold);--prose-h2-lineHeight: var(--typography-lead-tight);--prose-h2-fontSize: var(--typography-fontSize-4xl);--prose-h1-iconSize: var(--typography-fontSize-3xl);--prose-h1-letterSpacing: var(--typography-letterSpacing-tight);--prose-h1-fontWeight: var(--typography-fontWeight-bold);--prose-h1-lineHeight: var(--typography-lead-tight);--prose-h1-fontSize: var(--typography-fontSize-5xl);--prose-p-br-margin: var(--typography-verticalMargin-base) 0 0 0;--prose-p-margin: var(--typography-verticalMargin-base) 0;--prose-p-lineHeight: var(--typography-lead-normal);--prose-p-fontSize: var(--typography-fontSize-base);--typography-color-secondary-900: var(--color-gray-900);--typography-color-secondary-800: var(--color-gray-800);--typography-color-secondary-700: var(--color-gray-700);--typography-color-secondary-600: var(--color-gray-600);--typography-color-secondary-500: var(--color-gray-500);--typography-color-secondary-400: var(--color-gray-400);--typography-color-secondary-300: var(--color-gray-300);--typography-color-secondary-200: var(--color-gray-200);--typography-color-secondary-100: var(--color-gray-100);--typography-color-secondary-50: var(--color-gray-50);--typography-color-primary-900: var(--color-primary-900);--typography-color-primary-800: var(--color-primary-800);--typography-color-primary-700: var(--color-primary-700);--typography-color-primary-600: var(--color-primary-600);--typography-color-primary-500: var(--color-primary-500);--typography-color-primary-400: var(--color-primary-400);--typography-color-primary-300: var(--color-primary-300);--typography-color-primary-200: var(--color-primary-200);--typography-color-primary-100: var(--color-primary-100);--typography-color-primary-50: var(--color-primary-50);--typography-font-code: var(--font-mono);--typography-font-body: var(--font-sans);--typography-font-display: var(--font-sans);--typography-body-backgroundColor: var(--color-white);--typography-body-color: var(--color-black);--elements-state-danger-borderColor-secondary: var(--color-red-200);--elements-state-danger-borderColor-primary: var(--color-red-100);--elements-state-danger-backgroundColor-secondary: var(--color-red-100);--elements-state-danger-backgroundColor-primary: var(--color-red-50);--elements-state-danger-color-secondary: var(--color-red-600);--elements-state-danger-color-primary: var(--color-red-500);--elements-state-warning-borderColor-secondary: var(--color-yellow-200);--elements-state-warning-borderColor-primary: var(--color-yellow-100);--elements-state-warning-backgroundColor-secondary: var(--color-yellow-100);--elements-state-warning-backgroundColor-primary: var(--color-yellow-50);--elements-state-warning-color-secondary: var(--color-yellow-700);--elements-state-warning-color-primary: var(--color-yellow-600);--elements-state-success-borderColor-secondary: var(--color-green-200);--elements-state-success-borderColor-primary: var(--color-green-100);--elements-state-success-backgroundColor-secondary: var(--color-green-100);--elements-state-success-backgroundColor-primary: var(--color-green-50);--elements-state-success-color-secondary: var(--color-green-600);--elements-state-success-color-primary: var(--color-green-500);--elements-state-info-borderColor-secondary: var(--color-blue-200);--elements-state-info-borderColor-primary: var(--color-blue-100);--elements-state-info-backgroundColor-secondary: var(--color-blue-100);--elements-state-info-backgroundColor-primary: var(--color-blue-50);--elements-state-info-color-secondary: var(--color-blue-600);--elements-state-info-color-primary: var(--color-blue-500);--elements-state-primary-borderColor-secondary: var(--color-primary-200);--elements-state-primary-borderColor-primary: var(--color-primary-100);--elements-state-primary-backgroundColor-secondary: var(--color-primary-100);--elements-state-primary-backgroundColor-primary: var(--color-primary-50);--elements-state-primary-color-secondary: var(--color-primary-700);--elements-state-primary-color-primary: var(--color-primary-600);--elements-surface-secondary-backgroundColor: var(--color-gray-200);--elements-surface-primary-backgroundColor: var(--color-gray-100);--elements-surface-background-base: var(--color-gray-100);--elements-border-secondary-static: var(--color-gray-200);--elements-border-primary-hover: var(--color-gray-200);--elements-border-primary-static: var(--color-gray-100);--elements-container-padding-md: var(--space-6);--elements-container-padding-sm: var(--space-6);--elements-container-padding-xs: var(--space-4);--elements-container-padding-mobile: var(--space-4);--elements-text-secondary-color-hover: var(--color-gray-700);--elements-text-secondary-color-static: var(--color-gray-500);--elements-text-primary-color-static: var(--color-gray-900);--text-6xl-lineHeight: var(--lead-none);--text-6xl-fontSize: var(--fontSize-6xl);--text-5xl-lineHeight: var(--lead-none);--text-5xl-fontSize: var(--fontSize-5xl);--text-4xl-lineHeight: var(--lead-10);--text-4xl-fontSize: var(--fontSize-4xl);--text-3xl-lineHeight: var(--lead-9);--text-3xl-fontSize: var(--fontSize-3xl);--text-2xl-lineHeight: var(--lead-8);--text-2xl-fontSize: var(--fontSize-2xl);--text-xl-lineHeight: var(--lead-7);--text-xl-fontSize: var(--fontSize-xl);--text-lg-lineHeight: var(--lead-7);--text-lg-fontSize: var(--fontSize-lg);--text-base-lineHeight: var(--lead-6);--text-base-fontSize: var(--fontSize-base);--text-sm-lineHeight: var(--lead-5);--text-sm-fontSize: var(--fontSize-sm);--text-xs-lineHeight: var(--lead-4);--text-xs-fontSize: var(--fontSize-xs);--color-shadow: var(--color-gray-400);--color-secondary-900: var(--color-gray-900);--color-secondary-800: var(--color-gray-800);--color-secondary-700: var(--color-gray-700);--color-secondary-600: var(--color-gray-600);--color-secondary-500: var(--color-gray-500);--color-secondary-400: var(--color-gray-400);--color-secondary-300: var(--color-gray-300);--color-secondary-200: var(--color-gray-200);--color-secondary-100: var(--color-gray-100);--color-secondary-50: var(--color-gray-50);--prose-code-inline-backgroundColor: var(--typography-color-secondary-100);--prose-code-inline-color: var(--typography-color-secondary-700);--prose-code-block-backgroundColor: var(--typography-color-secondary-100);--prose-code-block-color: var(--typography-color-secondary-700);--prose-code-block-border-color: var(--typography-color-secondary-200);--prose-tbody-tr-borderBottom-color: var(--typography-color-secondary-200);--prose-th-color: var(--typography-color-secondary-600);--prose-thead-borderBottom-color: var(--typography-color-secondary-200);--prose-thead-border-color: var(--typography-color-secondary-300);--prose-hr-color: var(--typography-color-secondary-200);--prose-blockquote-border-color: var(--typography-color-secondary-200);--prose-blockquote-color: var(--typography-color-secondary-500);--prose-a-code-background-hover: var(--typography-color-primary-50);--prose-a-code-border-color-hover: var(--typography-color-primary-500);--prose-a-code-border-color-static: var(--typography-color-secondary-400);--prose-a-color-hover: var(--typography-color-primary-500);--shadow-2xl: 0px 25px 50px -12px var(--color-shadow);--shadow-xl: 0px 20px 25px -5px var(--color-shadow), 0px 8px 10px -6px var(--color-shadow);--shadow-lg: 0px 10px 15px -3px var(--color-shadow), 0px 4px 6px -4px var(--color-shadow);--shadow-md: 0px 4px 6px -1px var(--color-shadow), 0px 2px 4px -2px var(--color-shadow);--shadow-sm: 0px 1px 3px 0px var(--color-shadow), 0px 1px 2px -1px var(--color-shadow);--shadow-xs: 0px 1px 2px 0px var(--color-shadow); } }@media { :root.dark {--pinceau-mq: dark; --prose-code-block-backdropFilter: contrast(1);--prose-ol-li-markerColor: currentColor;--prose-ul-li-markerColor: currentColor;--prose-a-code-color-hover: currentColor;--prose-a-code-color-static: currentColor;--prose-a-border-color-hover: currentColor;--prose-a-border-color-static: currentColor;--prose-a-color-static: inherit;--elements-backdrop-background: #0c0d0ccc;--docus-search-results-selected-backgroundColor: var(--color-gray-700);--docus-search-input-backgroundColor: var(--color-gray-800);--docus-search-input-borderColor: transparent;--docus-header-title-color-static: var(--color-gray-100);--docus-body-color: var(--color-gray-200);--docus-body-backgroundColor: var(--color-black);--typography-body-backgroundColor: var(--color-black);--typography-body-color: var(--color-white);--elements-state-danger-borderColor-secondary: var(--color-red-700);--elements-state-danger-borderColor-primary: var(--color-red-800);--elements-state-danger-backgroundColor-secondary: var(--color-red-800);--elements-state-danger-backgroundColor-primary: var(--color-red-900);--elements-state-danger-color-secondary: var(--color-red-200);--elements-state-danger-color-primary: var(--color-red-300);--elements-state-warning-borderColor-secondary: var(--color-yellow-700);--elements-state-warning-borderColor-primary: var(--color-yellow-800);--elements-state-warning-backgroundColor-secondary: var(--color-yellow-800);--elements-state-warning-backgroundColor-primary: var(--color-yellow-900);--elements-state-warning-color-secondary: var(--color-yellow-200);--elements-state-warning-color-primary: var(--color-yellow-400);--elements-state-success-borderColor-secondary: var(--color-green-700);--elements-state-success-borderColor-primary: var(--color-green-800);--elements-state-success-backgroundColor-secondary: var(--color-green-800);--elements-state-success-backgroundColor-primary: var(--color-green-900);--elements-state-success-color-secondary: var(--color-green-200);--elements-state-success-color-primary: var(--color-green-400);--elements-state-info-borderColor-secondary: var(--color-blue-700);--elements-state-info-borderColor-primary: var(--color-blue-800);--elements-state-info-backgroundColor-secondary: var(--color-blue-800);--elements-state-info-backgroundColor-primary: var(--color-blue-900);--elements-state-info-color-secondary: var(--color-blue-200);--elements-state-info-color-primary: var(--color-blue-400);--elements-state-primary-borderColor-secondary: var(--color-primary-700);--elements-state-primary-borderColor-primary: var(--color-primary-800);--elements-state-primary-backgroundColor-secondary: var(--color-primary-800);--elements-state-primary-backgroundColor-primary: var(--color-primary-900);--elements-state-primary-color-secondary: var(--color-primary-200);--elements-state-primary-color-primary: var(--color-primary-400);--elements-surface-secondary-backgroundColor: var(--color-gray-800);--elements-surface-primary-backgroundColor: var(--color-gray-900);--elements-surface-background-base: var(--color-gray-900);--elements-border-secondary-static: var(--color-gray-800);--elements-border-primary-hover: var(--color-gray-800);--elements-border-primary-static: var(--color-gray-900);--elements-text-secondary-color-hover: var(--color-gray-200);--elements-text-secondary-color-static: var(--color-gray-400);--elements-text-primary-color-static: var(--color-gray-50);--color-shadow: var(--color-gray-800);--prose-code-inline-backgroundColor: var(--typography-color-secondary-800);--prose-code-inline-color: var(--typography-color-secondary-200);--prose-code-block-backgroundColor: var(--typography-color-secondary-900);--prose-code-block-color: var(--typography-color-secondary-200);--prose-code-block-border-color: var(--typography-color-secondary-800);--prose-tbody-tr-borderBottom-color: var(--typography-color-secondary-800);--prose-th-color: var(--typography-color-secondary-400);--prose-thead-borderBottom-color: var(--typography-color-secondary-800);--prose-thead-border-color: var(--typography-color-secondary-600);--prose-hr-color: var(--typography-color-secondary-800);--prose-blockquote-border-color: var(--typography-color-secondary-700);--prose-blockquote-color: var(--typography-color-secondary-400);--prose-a-code-background-hover: var(--typography-color-primary-900);--prose-a-code-border-color-hover: var(--typography-color-primary-600);--prose-a-code-border-color-static: var(--typography-color-secondary-600);--prose-a-color-hover: var(--typography-color-primary-400); } }@media (min-width: 640px) { :root {--pinceau-mq: sm; --docus-search-results-window-maxHeight: 320px;--docus-search-results-window-marginTop: 20vh;--docus-footer-height: 100px;--docus-search-results-window-borderRadius: var(--radii-xs);--docus-search-results-window-marginX: var(--space-4);--docus-header-logo-height: var(--space-7); } }</style><script>"use strict";(()=>{const a=window,e=document.documentElement,m=["dark","light"],c=window&&window.localStorage&&window.localStorage.getItem&&window.localStorage.getItem("nuxt-color-mode")||"system";let n=c==="system"?d():c;const l=e.getAttribute("data-color-mode-forced");l&&(n=l),i(n),a["__NUXT_COLOR_MODE__"]={preference:c,value:n,getColorScheme:d,addColorScheme:i,removeColorScheme:f};function i(o){const t=""+o+"",s="theme";e.classList?e.classList.add(t):e.className+=" "+t,s&&e.setAttribute("data-"+s,o)}function f(o){const t=""+o+"",s="theme";e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp(t,"g"),""),s&&e.removeAttribute("data-"+s)}function r(o){return a.matchMedia("(prefers-color-scheme"+o+")")}function d(){if(a.matchMedia&&r("").media!=="not all"){for(const o of m)if(r(":"+o).matches)return o}return"light"}})();
</script></head>
<body ><!----><!--teleport anchor--><!----><!--teleport anchor--><div id="__nuxt"><div class="app-layout" data-v-5c2f7786><div class="nuxt-progress" style="width:0%;opacity:0;background-size:Infinity% auto;" data-v-5c2f7786></div><header class="has-dialog" data-v-5c2f7786 data-v-069d8056><div class="container pv-alcTlr pc-l3-Kuf" data-v-069d8056 data-v-a8d7e2a7><!--[--><div class="section left" data-v-069d8056><!--[--><button aria-label="Menu" data-v-6c45508f><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" role="img" class="icon" data-v-6c45508f style="" width="1em" height="1em" viewBox="0 0 24 24" data-v-e610b8e3><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg></button><!--teleport start--><!--teleport end--><!--]--><a href="/code-study/" class="navbar-logo" aria-label="摳Sense讀書會筆記" data-v-069d8056 data-v-f83b7764><span class="title" data-v-f83b7764>摳Sense讀書會筆記</span></a></div><div class="section center" data-v-069d8056><a href="/code-study/" class="navbar-logo" aria-label="摳Sense讀書會筆記" data-v-069d8056 data-v-f83b7764><span class="title" data-v-f83b7764>摳Sense讀書會筆記</span></a><!----></div><div class="section right" data-v-069d8056><!--[--><button type="button" aria-label="Search" data-v-98e4ee4b><span class="content" data-v-98e4ee4b><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-98e4ee4b style="" width="1em" height="1em" viewBox="0 0 24 24" data-v-e610b8e3><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21 21l-6-6m2-5a7 7 0 1 1-14 0a7 7 0 0 1 14 0"/></svg><span data-v-98e4ee4b>Search</span><span data-v-98e4ee4b><kbd data-v-98e4ee4b>⌘</kbd><kbd data-v-98e4ee4b>K</kbd></span></span></button><!--teleport start--><!--teleport end--><!--]--><div class="social-icons" data-v-069d8056><a href="/code-study/member" class="" rel="noopener noreferrer" title="member" data-v-069d8056 data-v-959a58fc><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-959a58fc style="" width="1em" height="1em" viewBox="0 0 1200 1200" data-v-e610b8e3><path fill="currentColor" d="M596.847 188.488c-103.344 0-187.12 97.81-187.12 218.465c0 83.678 40.296 156.352 99.468 193.047l-68.617 31.801l-182.599 84.688c-17.64 8.821-26.444 23.778-26.444 44.947v201.102c1.451 25.143 16.537 48.577 40.996 48.974h649.62c27.924-2.428 42.05-24.92 42.325-48.974V761.436c0-21.169-8.804-36.126-26.443-44.947l-175.988-84.688l-73.138-34.65c56.744-37.521 95.061-108.624 95.061-190.197c-.001-120.656-83.778-218.466-187.121-218.466m-301.824 76.824c-44.473 1.689-79.719 20.933-106.497 51.596c-29.62 36.918-44.06 80.75-44.339 124.354c1.819 64.478 30.669 125.518 82.029 157.446L21.163 693.997C7.05 699.289 0 711.636 0 731.041v161.398c1.102 21.405 12.216 39.395 33.055 39.703h136.284V761.436c2.255-45.639 23.687-82.529 62.196-100.531l136.247-64.817c10.584-6.175 20.731-14.568 30.433-25.152c-56.176-86.676-63.977-190.491-27.773-281.801c-23.547-14.411-50.01-23.672-75.419-23.823m608.586 0c-29.083.609-55.96 11.319-78.039 26.444c35.217 92.137 25.503 196.016-26.482 276.52c11.467 13.23 23.404 23.377 35.753 30.434l130.965 62.195c39.897 21.881 60.47 59.098 60.866 100.532v170.707h140.235c23.063-1.991 32.893-20.387 33.093-39.704V731.042c0-17.641-7.05-29.987-21.163-37.045l-202.431-96.618c52.498-38.708 78.859-96.72 79.369-156.117c-1.396-47.012-15.757-90.664-44.339-124.354c-29.866-32.399-66.91-51.253-107.827-51.596"/></svg></a><a href="https://github.com/codesensegroup/code-study" rel="noopener noreferrer" target="_blank" title="github" data-v-069d8056 data-v-a02d16b5><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-a02d16b5 style="" width="1em" height="1em" viewBox="0 0 24 24" data-v-e610b8e3><path fill="currentColor" d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></a></div><button aria-label="Color Mode" data-v-069d8056 data-v-87324333><span data-v-87324333>...</span></button></div><!--]--></div></header><main data-v-5c2f7786><!--[--><div class="document-driven-page"><div class="container pv-alcTlr pc-SVGt39 docs-page-content fluid has-toc has-aside" data-v-a6339876 data-v-a8d7e2a7><!--[--><aside class="aside-nav" data-v-a6339876><nav class="app-aside" data-v-a6339876 data-v-3d9a5d42><ul class="docs-aside-tree" data-v-3d9a5d42 data-v-d42239fd><!--[--><li class="" data-v-d42239fd><button class="title-collapsible-button" data-v-d42239fd><span class="content" data-v-d42239fd><span class="icon" style="font-size:1em;line-height:1em;width:1em;height:1em;" data-v-d42239fd data-v-e610b8e3>📖</span><span data-v-d42239fd>System Design Interview: An Insider’s Guide</span></span><span data-v-d42239fd><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon collapsible-icon" data-v-d42239fd style="" width="1em" height="1em" viewBox="0 0 24 24" data-v-e610b8e3><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m7 15l5 5l5-5M7 9l5-5l5 5"/></svg></span></button><ul class="docs-aside-tree recursive" style="display:none;" data-v-d42239fd data-v-d42239fd><!--[--><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/sdi-aig/chapter1" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>01 從 0 到百萬用戶</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/sdi-aig/chapter4" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>設計網路限速器</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/sdi-aig/chapter6" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>設計鍵值儲存系統</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/sdi-aig/chapter7" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>第07章：設計可用於分散式系統的唯一ID生成器</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/sdi-aig/chapter8" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>設計短網址生成器</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/sdi-aig/chapter9" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>第九章: 設計網路爬蟲</span></span></a><!----></li><!--]--></ul></li><li class="" data-v-d42239fd><button class="title-collapsible-button" data-v-d42239fd><span class="content" data-v-d42239fd><span class="icon" style="font-size:1em;line-height:1em;width:1em;height:1em;" data-v-d42239fd data-v-e610b8e3>📘</span><span data-v-d42239fd>Clean Architecture - 無瑕的程式碼</span></span><span data-v-d42239fd><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon collapsible-icon" data-v-d42239fd style="" width="1em" height="1em" viewBox="0 0 24 24" data-v-e610b8e3><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m7 15l5 5l5-5M7 9l5-5l5 5"/></svg></span></button><ul class="docs-aside-tree recursive" style="display:none;" data-v-d42239fd data-v-d42239fd><!--[--><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/clean-arch/chapter1" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>01 什麼是設計與結構</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/clean-arch/chapter2" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>02 兩種價值觀的故事</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/clean-arch/chapter3" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>03 範式概述</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/clean-arch/chapter4" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>04 結構化程式設計</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/clean-arch/chapter5" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>05 物件導向程式設計</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/clean-arch/chapter6" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>06 函數式程式設計</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/clean-arch/chapter12" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>12 元件</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/clean-arch/chapter13" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>13 元件內聚性</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/clean-arch/chapter14" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>14 元件耦合性</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/clean-arch/chapter15" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>15 什麼是架構</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/clean-arch/chapter16" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>16 獨立性</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/clean-arch/chapter18" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>18 邊界剖析</span></span></a><!----></li><li class="has-parent-icon bordered active" data-v-d42239fd><a aria-current="page" href="/code-study/clean-arch/chapter19" class="router-link-active router-link-exact-active link padded active" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>19 POLICY AND LEVEL 策略與層次</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/clean-arch/chapter20" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>20 BUSINESS RULES 業務邏輯</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/clean-arch/chapter21" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>21 會尖叫的架構</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/clean-arch/chapter22" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>22 整潔的架構</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/clean-arch/chapter23" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>23 Presenter與Humble Object</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/clean-arch/chapter24" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>24 不完全邊界</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/clean-arch/chapter25" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>25 層與邊界</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/clean-arch/chapter30" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>30 資料庫細節</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/clean-arch/chapter31" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>31 WEB是細節</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/clean-arch/chapter32" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>32 框架也只是細節</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/clean-arch/chapter33" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>33 影片銷售系統案例研究</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/clean-arch/chapter34" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>Clean Architecture 第34章：The Missing Chapter</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/clean-arch/chapter99" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>99 來自於網路世界的書評</span></span></a><!----></li><!--]--></ul></li><li class="" data-v-d42239fd><button class="title-collapsible-button" data-v-d42239fd><span class="content" data-v-d42239fd><span class="icon" style="font-size:1em;line-height:1em;width:1em;height:1em;" data-v-d42239fd data-v-e610b8e3>📕</span><span data-v-d42239fd>資料密集型應用系統設計</span></span><span data-v-d42239fd><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon collapsible-icon" data-v-d42239fd style="" width="1em" height="1em" viewBox="0 0 24 24" data-v-e610b8e3><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m7 15l5 5l5-5M7 9l5-5l5 5"/></svg></span></button><ul class="docs-aside-tree recursive" style="display:none;" data-v-d42239fd data-v-d42239fd><!--[--><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/ddia/chapter1" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>01 可靠性、可伸縮性和可維護性</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/ddia/chapter3" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>03 數據儲存與檢索</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/ddia/chapter4" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>04 編碼與演化</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/ddia/chapter5" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>05 複製</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/ddia/chapter9" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>09 一致性與共識</span></span></a><!----></li><!--]--></ul></li><li class="" data-v-d42239fd><button class="title-collapsible-button" data-v-d42239fd><span class="content" data-v-d42239fd><span class="icon" style="font-size:1em;line-height:1em;width:1em;height:1em;" data-v-d42239fd data-v-e610b8e3>🏷️</span><span data-v-d42239fd>持續交付2.0：實務導向的DevOps</span></span><span data-v-d42239fd><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon collapsible-icon" data-v-d42239fd style="" width="1em" height="1em" viewBox="0 0 24 24" data-v-e610b8e3><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m7 15l5 5l5-5M7 9l5-5l5 5"/></svg></span></button><ul class="docs-aside-tree recursive" style="display:none;" data-v-d42239fd data-v-d42239fd><!--[--><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/cicd-2.0/chapter5" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>05 持續交付的軟體系統架構</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/cicd-2.0/chapter7" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>07 部署流水線原則與工具設計</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/cicd-2.0/chapter8" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>08 利於集成的分支策略</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/cicd-2.0/chapter9" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>09 持續整合</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/cicd-2.0/chapter10" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>10 自動化測試策略與方法</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/cicd-2.0/chapter11" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>11 軟件配置管理</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/cicd-2.0/chapter12" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>12 低風險發佈</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/cicd-2.0/chapter13" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>13 監測與決策</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/cicd-2.0/chapter16" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>16 研發推動的DevOps</span></span></a><!----></li><!--]--></ul></li><li class="" data-v-d42239fd><button class="title-collapsible-button" data-v-d42239fd><span class="content" data-v-d42239fd><span class="icon" style="font-size:1em;line-height:1em;width:1em;height:1em;" data-v-d42239fd data-v-e610b8e3>📗</span><span data-v-d42239fd>Web API的設計與開發</span></span><span data-v-d42239fd><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon collapsible-icon" data-v-d42239fd style="" width="1em" height="1em" viewBox="0 0 24 24" data-v-e610b8e3><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m7 15l5 5l5-5M7 9l5-5l5 5"/></svg></span></button><ul class="docs-aside-tree recursive" style="display:none;" data-v-d42239fd data-v-d42239fd><!--[--><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/web-api/chapter2" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>第2章 EndPoint設計與請求形式</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/web-api/chapter5" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>第5章 開發方便更改設計的API</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/web-api/chapter6" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>第6章 開發牢固的WebAPI</span></span></a><!----></li><!--]--></ul></li><li class="" data-v-d42239fd><button class="title-collapsible-button" data-v-d42239fd><span class="content" data-v-d42239fd><span class="icon" style="font-size:1em;line-height:1em;width:1em;height:1em;" data-v-d42239fd data-v-e610b8e3>⚒️</span><span data-v-d42239fd>技術分享</span></span><span data-v-d42239fd><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon collapsible-icon" data-v-d42239fd style="" width="1em" height="1em" viewBox="0 0 24 24" data-v-e610b8e3><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m7 15l5 5l5-5M7 9l5-5l5 5"/></svg></span></button><ul class="docs-aside-tree recursive" style="display:none;" data-v-d42239fd data-v-d42239fd><!--[--><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/workshop/gitlab-cicd" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>使用Gitlab做CI/CD</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/workshop/grpc" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>gRPC快速入門</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/workshop/liquibase" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>Liquibase快速入門</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/workshop/redis-ring" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>Redis Ring</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/workshop/redis" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>Redis快速入門</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/workshop/tdd_part1" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>TDD技術分享 - Part1 灌輸</span></span></a><!----></li><!--]--></ul></li><li class="" data-v-d42239fd><button class="title-collapsible-button" data-v-d42239fd><span class="content" data-v-d42239fd><span class="icon" style="font-size:1em;line-height:1em;width:1em;height:1em;" data-v-d42239fd data-v-e610b8e3>🛡️</span><span data-v-d42239fd>API</span></span><span data-v-d42239fd><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon collapsible-icon" data-v-d42239fd style="" width="1em" height="1em" viewBox="0 0 24 24" data-v-e610b8e3><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m7 15l5 5l5-5M7 9l5-5l5 5"/></svg></span></button><ul class="docs-aside-tree recursive" style="display:none;" data-v-d42239fd data-v-d42239fd><!--[--><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/api/components" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>Components</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/api/composables" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>Composables</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/code-study/api/layouts" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>Layouts</span></span></a><!----></li><!--]--></ul></li><!--]--></ul></nav></aside><article class="page-body" data-v-a6339876><div class="flex flex-col" data-v-a6339876><!----><div class="my-1"><span class="text-xs md:text-sm"> 字數總計：0 個 </span><span class="mx-1">|</span><span class="text-xs md:text-sm"> 閱讀時長：0 分鐘 </span><span class="mx-1">|</span><span class="text-xs md:text-sm" id="busuanzi_container_page_pv"><span>閱讀次數：</span><span id="busuanzi_value_page_pv"></span> 次 </span></div><div class="mt-1 z-10"><!--[--><!--]--></div></div><!--[--><!--[--><div><p data-v-9dc9c102><!--[-->基本上，所有的軟體都是一組策略聲明的集合。簡單來說電腦程式就是一組仔細描述如何將輸入轉換為輸出的策略聲明的集合。<!--]--></p><p data-v-9dc9c102><!--[-->大多數非小型的系統中，整體業務策略通常會細分為多組更小的策略聲明。<!--]--></p><ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->一部分用於描述計算部份的業務邏輯。<!--]--></li><li data-v-4c2f5fb9><!--[-->一部分負責描述計算報告的格式(即展示或呈現運算結果)。<!--]--></li><li data-v-4c2f5fb9><!--[-->還有一些用來描述如何驗證輸入資料的策略。<!--]--></li><!--]--></ul><p data-v-9dc9c102><!--[-->程式架構設計的重點之一。<!--]--></p><ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->將這些策略彼此分離，根據它們的變更方式進行重新分組。<!--]--></li><li data-v-4c2f5fb9><!--[-->變更原因、時間和層次相同的策略應該分在同一個組件中。<!--]--></li><!--]--></ul><p data-v-9dc9c102><!--[-->架構設計的工作通常需要將組件重新排列，組合成一個有向無環圖。<!--]--></p><div align="center">
  <img src="/code-study/images/clean-arch/19/01.png" class="prose-img" loading="lazy" width="60%" data-v-6a603522><br>
  圖 19.1
</div><br><p data-v-9dc9c102><!--[-->圖 19.1 中的每個節點代表擁有相同層次策略的組件，每條單向鏈接代表一種組件之間的依賴關係，這些鏈接將不同層級的組件連接起來。<!--]--></p><p data-v-9dc9c102><!--[-->這裡的依賴關係是指程式碼層次上、編譯期的依賴關係。<!--]--></p><ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->在 Java 語言中就是指 import 陳述句。<!--]--></li><li data-v-4c2f5fb9><!--[-->在 C# 語言中就是指 using 陳述句。<!--]--></li><li data-v-4c2f5fb9><!--[-->在 Ruby 語言中就是指 require 語句。
這些依賴關係都是在編譯過程中所必需的。<!--]--></li><!--]--></ul><p data-v-9dc9c102><!--[-->在設計良好的架構中，依賴關係的方向通常取決於它們所關聯的組件層次。通常，低層組件會被設計為依賴於高層組件。<!--]--></p><h2 id="level層次" data-v-70b0c1e2><a aria-current="page" href="/code-study/clean-arch/chapter19#level層次" class="router-link-active router-link-exact-active" data-v-70b0c1e2><!--[-->Level（層次）<!--]--><!----></a></h2><p data-v-9dc9c102><!--[-->「層次」嚴格根據「輸入與輸出之間的距離」來定義。也就是說，一條策略距離系統的輸入/輸出越遠，它所屬的層次就越高。相反，直接管理輸入/輸出的策略，其在系統中的層次則是最低的。<!--]--></p><h3 id="高層次與低層次元件的概念" data-v-4cf5bb93><a aria-current="page" href="/code-study/clean-arch/chapter19#高層次與低層次元件的概念" class="router-link-active router-link-exact-active" data-v-4cf5bb93><!--[-->高層次與低層次元件的概念<!--]--><!----></a></h3><ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->高層次元件：通常與具體的實作細節無關，專注於抽象邏輯或業務邏輯。它們不直接依賴於輸入或輸出的細節，而是依賴於較低層次的元件來完成這些任務。<!--]--></li><li data-v-4c2f5fb9><!--[-->低層次元件：與具體的實作細節密切相關，處理直接的硬體操作、I/O 或資料流操作，通常是與外部世界（像是使用者、硬體設備）互動的元件。<!--]--></li><!--]--></ul><h3 id="架構圖中的高低層次解釋" data-v-4cf5bb93><a aria-current="page" href="/code-study/clean-arch/chapter19#架構圖中的高低層次解釋" class="router-link-active router-link-exact-active" data-v-4cf5bb93><!--[-->架構圖中的高低層次解釋<!--]--><!----></a></h3><p data-v-9dc9c102><!--[-->圖 19.2 是一個簡單加密程式的資料流向圖，該程式從輸入裝置讀取字符，然後用查表法轉換這些字符並將轉換後的字符輸出到輸出裝置。我們將圖中資料的流向用彎曲實心箭頭標識了出來，而對於經精妙設計過的源碼中的依賴關係則使用直虛線來標識。<!--]--></p><div align="center">
  <img src="/code-study/images/clean-arch/19/02.png" class="prose-img" loading="lazy" width="70%" data-v-6a603522><br>
  圖 19.2
</div><br><ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->Translate 是高層次元件：該元件與具體的 I/O（輸入/輸出）操作無關。它專注於字元的「轉換」，這是一種抽象邏輯。Translate 不直接處理如何讀取字元或寫入字元，而是依賴低層次的 Read Char 和 Write Char 來完成這些任務。<!--]--></li><li data-v-4c2f5fb9><!--[-->Read Char 和 Write Char 是低層次元件：這兩個元件與具體的 I/O 操作直接相關。Read Char 負責從某個來源（例如：鍵盤、檔案）讀取字元，Write Char 則負責將字元寫到某個目的地（例如：螢幕、檔案）。這些操作屬於具體的實作細節，因此是低層次元件。<!--]--></li><!--]--></ul><p data-v-9dc9c102><!--[-->但我們很容易將這個加密程式寫成下面這樣，這就構成了一個不正確的架構：<!--]--></p><div class="highlight-c prose-code" meta data-v-a67e2655><!----><!--[--><pre class="language-c shiki shiki-themes github-dark github-light monokai" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">function </span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E">encrypt</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">() {
</span></span><span class="line" line="2"><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672">    while</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"> (</span><span style="--shiki-dark:#79B8FF;--shiki-default:#005CC5;--shiki-sepia:#AE81FF">true</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">)
</span></span><span class="line" line="3"><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E">        writeChar</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">(</span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E">translate</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">(</span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E">readChar</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">()));
</span></span><span class="line" line="4"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">}
</span></span></code><!--]--></pre><!--]--><button class="copy-button" data-v-a67e2655 data-v-4a003820><span class="sr-only" data-v-4a003820>Copy to clipboard</span><span class="icon-wrapper" data-v-4a003820><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-4a003820 style="" width="18px" height="18px" viewBox="0 0 256 256" data-v-e610b8e3><path fill="currentColor" d="M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z"/></svg></span></button></div><h3 id="為何架構不正確" data-v-4cf5bb93><a aria-current="page" href="/code-study/clean-arch/chapter19#為何架構不正確" class="router-link-active router-link-exact-active" data-v-4cf5bb93><!--[-->為何架構不正確<!--]--><!----></a></h3><ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->過度依賴低層次元件：根據圖 19.2 中的架構，Translate 與 Read Char 和 Write Char 之間有「source code dependencies」（原始碼依賴）。這意味著 Translate 依賴於具體的 I/O 操作（Read Char 和 Write Char），這導致高層次元件對低層次元件的依賴性過高。<ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->理想的架構應該是高層次元件不依賴低層次元件，反而應該是低層次元件依賴高層次元件來完成具體的任務。這樣可以讓高層次邏輯更加獨立，易於修改和擴展，而不受具體的輸入/輸出限制。<!--]--></li><!--]--></ul><!--]--></li><li data-v-4c2f5fb9><!--[-->反轉依賴原則（Dependency Inversion Principle, DIP）違反：DIP 是一個常見的設計原則，強調高層次元件不應該依賴低層次元件，而是雙方都應該依賴於抽象（例如接口）。這裡 Translate 直接依賴了具體的 I/O 操作，違反了這個原則。<!--]--></li><!--]--></ul><h3 id="改進建議" data-v-4cf5bb93><a aria-current="page" href="/code-study/clean-arch/chapter19#改進建議" class="router-link-active router-link-exact-active" data-v-4cf5bb93><!--[-->改進建議：<!--]--><!----></a></h3><div align="center">
  <img src="/code-study/images/clean-arch/19/03.png" class="prose-img" loading="lazy" width="60%" data-v-6a603522><br>
  圖 19.3
</div><br><p data-v-9dc9c102><!--[-->圖 19.3 中展示了一個基於依賴倒轉原則（Dependency Inversion Principle, DIP）的設計，這個原則的核心理念是「高層次模組不應該依賴低層次模組，兩者都應依賴於抽象」。透過依賴注入或接口設計來隔離 Translate 與具體的 I/O 操作。<!--]--></p><p data-v-9dc9c102><!--[-->例如，Translate 可以依賴抽象的接口，而具體的 Read Char 和 Write Char 則實現這些接口。這樣可以讓高層次邏輯不依賴於具體的實作細節，使架構更具彈性。<!--]--></p><details>
    <summary>箭頭圖示說明</summary><ol data-v-e6ab85be><!--[--><li data-v-4c2f5fb9><!--[-->Encrypt 到 Interface 的箭頭（Encrypt 依賴 ICharReader 和 ICharWriter）
<ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->箭頭是實線，代表依賴關係。<!--]--></li><li data-v-4c2f5fb9><!--[-->Encrypt 直接 依賴 於 ICharReader 和 ICharWriter，這表示 Encrypt 會使用這兩個接口來進行操作。Encrypt 需要透過這兩個接口來執行具體的字元讀寫工作。<!--]--></li><!--]--></ul><!--]--></li><li data-v-4c2f5fb9><!--[-->Console Reader/Writer 到 Interface 的箭頭（ConsoleCharReader 和 ConsoleCharWriter 依賴接口）
<ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->箭頭是虛線，表示實作或繼承關係。<!--]--></li><li data-v-4c2f5fb9><!--[-->ConsoleCharReader 和 ConsoleCharWriter 這兩個具體實作了 ICharReader 和 ICharWriter 接口，表示它們提供了這些接口的方法的具體實作。<!--]--></li><!--]--></ul><!--]--></li><!--]--></ol></details><details>
    <summary>依賴方向說明</summary><ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->圖 19.3 中，高層次的元件是 Encrypt，它依賴於兩個抽象的元件：Char Reader 和 Char Writer。<!--]--></li><li data-v-4c2f5fb9><!--[-->Char Reader 和 Char Writer 是具體的操作（如讀取字元和寫入字元），但它們並非直接依賴於具體的實現，如 Console Reader 或 Console Writer，而是依賴於接口（I）。<!--]--></li><li data-v-4c2f5fb9><!--[-->Console Reader 和 Console Writer 是具體的實作，它們實現了 Char Reader 和 Char Writer 的接口。<!--]--></li><li data-v-4c2f5fb9><!--[-->這樣做的目的是：
<ol data-v-e6ab85be><!--[--><li data-v-4c2f5fb9><!--[-->Encrypt 作為高層次邏輯，僅依賴抽象（接口 ICharReader 和 ICharWriter），而不依賴具體的輸入/輸出操作（例如從控制台讀取或寫入）。<!--]--></li><li data-v-4c2f5fb9><!--[-->如果將來需要改變具體的 I/O 實現（例如從檔案讀取字元而不是從控制台），可以通過替換 Char Reader 和 Char Writer 的具體實現來實現，Encrypt 不需要任何改動。<!--]--></li><!--]--></ol><!--]--></li><!--]--></ul></details><details>
    <summary>程式碼範例</summary><p data-v-9dc9c102><!--[-->定義接口（抽象）<!--]--></p><div class="highlight-c prose-code" meta data-v-a67e2655><!----><!--[--><pre class="language-c shiki shiki-themes github-dark github-light monokai" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">public interface ICharReader
</span></span><span class="line" line="2"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">{
</span></span><span class="line" line="3"><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#66D9EF;--shiki-dark-font-style:inherit;--shiki-default-font-style:inherit;--shiki-sepia-font-style:italic">    char</span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"> ReadChar</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">();
</span></span><span class="line" line="4"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">}
</span></span><span class="line" line="5"><span emptylineplaceholder="true">
</span></span><span class="line" line="6"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">public interface ICharWriter
</span></span><span class="line" line="7"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">{
</span></span><span class="line" line="8"><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#66D9EF;--shiki-dark-font-style:inherit;--shiki-default-font-style:inherit;--shiki-sepia-font-style:italic">    void</span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"> WriteChar</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">(</span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#66D9EF;--shiki-dark-font-style:inherit;--shiki-default-font-style:inherit;--shiki-sepia-font-style:italic">char</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"> c);
</span></span><span class="line" line="9"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">}
</span></span></code><!--]--></pre><!--]--><button class="copy-button" data-v-a67e2655 data-v-4a003820><span class="sr-only" data-v-4a003820>Copy to clipboard</span><span class="icon-wrapper" data-v-4a003820><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-4a003820 style="" width="18px" height="18px" viewBox="0 0 256 256" data-v-e610b8e3><path fill="currentColor" d="M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z"/></svg></span></button></div><p data-v-9dc9c102><!--[-->低層次組件（具體實作）<!--]--></p><div class="highlight-c prose-code" meta data-v-a67e2655><!----><!--[--><pre class="language-c shiki shiki-themes github-dark github-light monokai" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">public class ConsoleCharReader : ICharReader
</span></span><span class="line" line="2"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">{
</span></span><span class="line" line="3"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    public </span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#66D9EF;--shiki-dark-font-style:inherit;--shiki-default-font-style:inherit;--shiki-sepia-font-style:italic">char</span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"> ReadChar</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">()
</span></span><span class="line" line="4"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    {
</span></span><span class="line" line="5"><span style="--shiki-dark:#6A737D;--shiki-default:#6A737D;--shiki-sepia:#88846F">        // 假設從控制台讀取一個字元
</span></span><span class="line" line="6"><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672">        return</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"> Console.</span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E">ReadKey</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">().KeyChar;
</span></span><span class="line" line="7"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    }
</span></span><span class="line" line="8"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">}
</span></span><span class="line" line="9"><span emptylineplaceholder="true">
</span></span><span class="line" line="10"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">public class ConsoleCharWriter : ICharWriter
</span></span><span class="line" line="11"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">{
</span></span><span class="line" line="12"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    public </span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#66D9EF;--shiki-dark-font-style:inherit;--shiki-default-font-style:inherit;--shiki-sepia-font-style:italic">void</span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"> WriteChar</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">(</span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#66D9EF;--shiki-dark-font-style:inherit;--shiki-default-font-style:inherit;--shiki-sepia-font-style:italic">char</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"> c)
</span></span><span class="line" line="13"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    {
</span></span><span class="line" line="14"><span style="--shiki-dark:#6A737D;--shiki-default:#6A737D;--shiki-sepia:#88846F">        // 將字元寫入控制台
</span></span><span class="line" line="15"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">        Console.</span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E">Write</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">(c);
</span></span><span class="line" line="16"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    }
</span></span><span class="line" line="17"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">}
</span></span></code><!--]--></pre><!--]--><button class="copy-button" data-v-a67e2655 data-v-4a003820><span class="sr-only" data-v-4a003820>Copy to clipboard</span><span class="icon-wrapper" data-v-4a003820><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-4a003820 style="" width="18px" height="18px" viewBox="0 0 256 256" data-v-e610b8e3><path fill="currentColor" d="M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z"/></svg></span></button></div><p data-v-9dc9c102><!--[-->高層次組件（邏輯）<!--]--></p><div class="highlight-c prose-code" meta data-v-a67e2655><!----><!--[--><pre class="language-c shiki shiki-themes github-dark github-light monokai" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">public class Encrypt
</span></span><span class="line" line="2"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">{
</span></span><span class="line" line="3"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    private readonly ICharReader _reader;
</span></span><span class="line" line="4"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    private readonly ICharWriter _writer;
</span></span><span class="line" line="5"><span emptylineplaceholder="true">
</span></span><span class="line" line="6"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    public </span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E">Encrypt</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">(ICharReader reader, ICharWriter writer)
</span></span><span class="line" line="7"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    {
</span></span><span class="line" line="8"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">        _reader </span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672">=</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"> reader;
</span></span><span class="line" line="9"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">        _writer </span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672">=</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"> writer;
</span></span><span class="line" line="10"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    }
</span></span><span class="line" line="11"><span emptylineplaceholder="true">
</span></span><span class="line" line="12"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    public </span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#66D9EF;--shiki-dark-font-style:inherit;--shiki-default-font-style:inherit;--shiki-sepia-font-style:italic">void</span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"> PerformEncryption</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">()
</span></span><span class="line" line="13"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    {
</span></span><span class="line" line="14"><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672">        while</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"> (</span><span style="--shiki-dark:#79B8FF;--shiki-default:#005CC5;--shiki-sepia:#AE81FF">true</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">)
</span></span><span class="line" line="15"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">        {
</span></span><span class="line" line="16"><span style="--shiki-dark:#6A737D;--shiki-default:#6A737D;--shiki-sepia:#88846F">            // 讀取字元、加密（假設這裡做了某種轉換或加密操作）
</span></span><span class="line" line="17"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">            var c </span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672">=</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"> _reader.</span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E">ReadChar</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">();
</span></span><span class="line" line="18"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">            var encryptedChar </span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672">=</span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"> Translate</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">(c);</span><span style="--shiki-dark:#6A737D;--shiki-default:#6A737D;--shiki-sepia:#88846F"> // 假設這是加密邏輯
</span></span><span class="line" line="19"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">            _writer.</span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E">WriteChar</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">(encryptedChar);
</span></span><span class="line" line="20"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">        }
</span></span><span class="line" line="21"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    }
</span></span><span class="line" line="22"><span emptylineplaceholder="true">
</span></span><span class="line" line="23"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    private </span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#66D9EF;--shiki-dark-font-style:inherit;--shiki-default-font-style:inherit;--shiki-sepia-font-style:italic">char</span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"> Translate</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">(</span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#66D9EF;--shiki-dark-font-style:inherit;--shiki-default-font-style:inherit;--shiki-sepia-font-style:italic">char</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"> c)
</span></span><span class="line" line="24"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    {
</span></span><span class="line" line="25"><span style="--shiki-dark:#6A737D;--shiki-default:#6A737D;--shiki-sepia:#88846F">        // 簡單示範：將字元轉換為下一個字母（例如：a -&gt; b）
</span></span><span class="line" line="26"><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672">        return</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"> (</span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#66D9EF;--shiki-dark-font-style:inherit;--shiki-default-font-style:inherit;--shiki-sepia-font-style:italic">char</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">)(c </span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672">+</span><span style="--shiki-dark:#79B8FF;--shiki-default:#005CC5;--shiki-sepia:#AE81FF"> 1</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">);
</span></span><span class="line" line="27"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    }
</span></span><span class="line" line="28"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">}
</span></span></code><!--]--></pre><!--]--><button class="copy-button" data-v-a67e2655 data-v-4a003820><span class="sr-only" data-v-4a003820>Copy to clipboard</span><span class="icon-wrapper" data-v-4a003820><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-4a003820 style="" width="18px" height="18px" viewBox="0 0 256 256" data-v-e610b8e3><path fill="currentColor" d="M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z"/></svg></span></button></div><p data-v-9dc9c102><!--[-->執行範例<!--]--></p><div class="highlight-c prose-code" meta data-v-a67e2655><!----><!--[--><pre class="language-c shiki shiki-themes github-dark github-light monokai" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">class Program
</span></span><span class="line" line="2"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">{
</span></span><span class="line" line="3"><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672">    static</span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#66D9EF;--shiki-dark-font-style:inherit;--shiki-default-font-style:inherit;--shiki-sepia-font-style:italic"> void</span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"> Main</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">()
</span></span><span class="line" line="4"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    {
</span></span><span class="line" line="5"><span style="--shiki-dark:#6A737D;--shiki-default:#6A737D;--shiki-sepia:#88846F">        // 使用 ConsoleCharReader 和 ConsoleCharWriter 作為具體實現
</span></span><span class="line" line="6"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">        ICharReader reader </span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672">=</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"> new </span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E">ConsoleCharReader</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">();
</span></span><span class="line" line="7"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">        ICharWriter writer </span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672">=</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"> new </span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E">ConsoleCharWriter</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">();
</span></span><span class="line" line="8"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">        
</span></span><span class="line" line="9"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">        Encrypt encrypt </span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672">=</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"> new </span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E">Encrypt</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">(reader, writer);
</span></span><span class="line" line="10"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">        encrypt.</span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E">PerformEncryption</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">();
</span></span><span class="line" line="11"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    }
</span></span><span class="line" line="12"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">}
</span></span></code><!--]--></pre><!--]--><button class="copy-button" data-v-a67e2655 data-v-4a003820><span class="sr-only" data-v-4a003820>Copy to clipboard</span><span class="icon-wrapper" data-v-4a003820><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-4a003820 style="" width="18px" height="18px" viewBox="0 0 256 256" data-v-e610b8e3><path fill="currentColor" d="M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z"/></svg></span></button></div></details><h3 id="依賴倒轉的具體原則" data-v-4cf5bb93><a aria-current="page" href="/code-study/clean-arch/chapter19#依賴倒轉的具體原則" class="router-link-active router-link-exact-active" data-v-4cf5bb93><!--[-->依賴倒轉的具體原則<!--]--><!----></a></h3><ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->高層次模組（Encrypt）依賴於抽象：Encrypt 只知道 ICharReader 和 ICharWriter，不需要知道具體的實現。<!--]--></li><li data-v-4c2f5fb9><!--[-->低層次模組依賴於抽象：Console Reader 和 Console Writer 這些低層次實作依賴於接口（ICharReader 和 ICharWriter），它們負責具體的行為實作。<!--]--></li><li data-v-4c2f5fb9><!--[-->這樣的設計使得高層次模組和低層次模組之間的依賴不再是單向的（即高層模組依賴低層模組），而是透過抽象來進行解耦，實現依賴的倒轉。<!--]--></li><li data-v-4c2f5fb9><!--[-->透過依賴倒轉原則，我們使 Encrypt 依賴於介面（ICharReader 和 ICharWriter），這樣未來如果要替換具體的 Reader 或 Writer 實作（例如從檔案讀取或寫入），只需要實現新的類別即可，而不需要修改 Encrypt 類別。<!--]--></li><li data-v-4c2f5fb9><!--[-->這種設計提高了系統的彈性和可維護性，讓高層邏輯與低層細節實現解耦。<!--]--></li><!--]--></ul><h3 id="策略分組" data-v-4cf5bb93><a aria-current="page" href="/code-study/clean-arch/chapter19#策略分組" class="router-link-active router-link-exact-active" data-v-4cf5bb93><!--[-->策略分組<!--]--><!----></a></h3><p data-v-9dc9c102><!--[-->如同開頭所提到的，我們應該根據策略發生變更的方式將它們分成不同的元件。變更原因和變更時間相同的策略應在 SRP 和 CCP 這兩個原則的指導下合併為同一組件。離輸入/輸出最遠的策略—高層策略—一般變更沒有那麼頻繁。即使發生變更，原因也比低層策略所在的元件更重大。反之，低層策略則很有可能會頻繁地進行一些小變更。<!--]--></p><details>
    <summary>SRP 和 CCP 補充</summary><ol data-v-e6ab85be><!--[--><li data-v-4c2f5fb9><!--[-->SRP - 單一職責原則（Single Responsibility Principle）
<ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->SRP 的核心理念是每個模組或類別應僅負責一個職責。也就是說，一個類別或模組應該只有一個引起它變更的原因。如果一個類別承擔了過多的職責，當其中一個職責發生變更時，這個類別就需要被修改，導致程式碼變得不穩定、難以維護。<!--]--></li><li data-v-4c2f5fb9><!--[-->範例：
<ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->假設有一個類別 Employee，既負責處理員工的薪資計算邏輯，又負責將員工資料儲存到資料庫。這樣一來，如果薪資計算邏輯發生變化，或是資料庫邏輯變更，Employee 類別都需要被修改，違反了 SRP。<!--]--></li><li data-v-4c2f5fb9><!--[-->改進：將薪資計算邏輯和資料庫保存邏輯分離到不同的類別中，這樣每個類別只負責一個職責，遵循了 SRP。<!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><li data-v-4c2f5fb9><!--[-->CCP - 共同封閉原則（Common Closure Principle）
<ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->CCP 的意思是應該把那些因為相同的原因而同時變化的類別封裝到同一個元件中。換句話說，一個元件中的所有類別應該一起修改，因為它們共享相同的變更原因。這樣可以減少對組件的修改次數，提升系統的穩定性。<!--]--></li><li data-v-4c2f5fb9><!--[-->範例：
<ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->假設我們有一個模組管理不同的使用者角色和權限。如果每次權限模型變更時，需要修改多個類，那麼這些類別應該在同一個元件中，因為它們的變更原因是一致的。<!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><!--]--></ol><p data-v-9dc9c102><!--[-->總結：<!--]--></p><ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->SRP 關注的是每個類別的職責，確保每個類別只做一件事。<!--]--></li><li data-v-4c2f5fb9><!--[-->CCP 關注的是組件的封閉性，確保由於相同原因變更的類別在一個組件中。<!--]--></li><!--]--></ul></details><br><div align="center">
  <img src="/code-study/images/clean-arch/19/04.png" class="prose-img" loading="lazy" width="80%" data-v-6a603522><br>
  圖 19.4
</div><br><details>
    <summary>箭頭圖示說明</summary><ol data-v-e6ab85be><!--[--><li data-v-4c2f5fb9><!--[-->圖 19.4 中的箭頭是 從 IO Devices 指向 Encryption，這表明 IO Devices 依賴 Encryption。<!--]--></li><li data-v-4c2f5fb9><!--[-->IO Devices 知道並依賴於 Encryption，但 Encryption 並不依賴 IO Devices。這是依賴倒轉原則中的重要概念——高層次的組件不應該依賴低層次的具體實現。<!--]--></li><!--]--></ol></details><details>
    <summary>程式碼範例</summary><div class="highlight-c prose-code" meta data-v-a67e2655><!----><!--[--><pre class="language-c shiki shiki-themes github-dark github-light monokai" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">public interface IIODevices
</span></span><span class="line" line="2"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">{
</span></span><span class="line" line="3"><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#66D9EF;--shiki-dark-font-style:inherit;--shiki-default-font-style:inherit;--shiki-sepia-font-style:italic">    char</span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"> Read</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">();
</span></span><span class="line" line="4"><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#66D9EF;--shiki-dark-font-style:inherit;--shiki-default-font-style:inherit;--shiki-sepia-font-style:italic">    void</span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"> Write</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">(</span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#66D9EF;--shiki-dark-font-style:inherit;--shiki-default-font-style:inherit;--shiki-sepia-font-style:italic">char</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"> c);
</span></span><span class="line" line="5"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">}
</span></span><span class="line" line="6"><span emptylineplaceholder="true">
</span></span><span class="line" line="7"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">public class ConsoleIODevices : IIODevices
</span></span><span class="line" line="8"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">{
</span></span><span class="line" line="9"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    public </span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#66D9EF;--shiki-dark-font-style:inherit;--shiki-default-font-style:inherit;--shiki-sepia-font-style:italic">char</span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"> Read</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">()
</span></span><span class="line" line="10"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    {
</span></span><span class="line" line="11"><span style="--shiki-dark:#6A737D;--shiki-default:#6A737D;--shiki-sepia:#88846F">        // 讀取控制台的輸入
</span></span><span class="line" line="12"><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672">        return</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"> Console.</span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E">ReadKey</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">().KeyChar;
</span></span><span class="line" line="13"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    }
</span></span><span class="line" line="14"><span emptylineplaceholder="true">
</span></span><span class="line" line="15"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    public </span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#66D9EF;--shiki-dark-font-style:inherit;--shiki-default-font-style:inherit;--shiki-sepia-font-style:italic">void</span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"> Write</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">(</span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#66D9EF;--shiki-dark-font-style:inherit;--shiki-default-font-style:inherit;--shiki-sepia-font-style:italic">char</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"> c)
</span></span><span class="line" line="16"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    {
</span></span><span class="line" line="17"><span style="--shiki-dark:#6A737D;--shiki-default:#6A737D;--shiki-sepia:#88846F">        // 輸出到控制台
</span></span><span class="line" line="18"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">        Console.</span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E">Write</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">(c);
</span></span><span class="line" line="19"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    }
</span></span><span class="line" line="20"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">}
</span></span><span class="line" line="21"><span emptylineplaceholder="true">
</span></span><span class="line" line="22"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">public class Encryption
</span></span><span class="line" line="23"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">{
</span></span><span class="line" line="24"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    public </span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#66D9EF;--shiki-dark-font-style:inherit;--shiki-default-font-style:inherit;--shiki-sepia-font-style:italic">char</span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"> EncryptChar</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">(</span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#66D9EF;--shiki-dark-font-style:inherit;--shiki-default-font-style:inherit;--shiki-sepia-font-style:italic">char</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"> c)
</span></span><span class="line" line="25"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    {
</span></span><span class="line" line="26"><span style="--shiki-dark:#6A737D;--shiki-default:#6A737D;--shiki-sepia:#88846F">        // 簡單的加密邏輯，將字元轉換為下一個字母
</span></span><span class="line" line="27"><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672">        return</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"> (</span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#66D9EF;--shiki-dark-font-style:inherit;--shiki-default-font-style:inherit;--shiki-sepia-font-style:italic">char</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">)(c </span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672">+</span><span style="--shiki-dark:#79B8FF;--shiki-default:#005CC5;--shiki-sepia:#AE81FF"> 1</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">);
</span></span><span class="line" line="28"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    }
</span></span><span class="line" line="29"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">}
</span></span><span class="line" line="30"><span emptylineplaceholder="true">
</span></span><span class="line" line="31"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">public class IOHandler
</span></span><span class="line" line="32"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">{
</span></span><span class="line" line="33"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    private readonly IIODevices _ioDevices;
</span></span><span class="line" line="34"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    private readonly Encryption _encryption;
</span></span><span class="line" line="35"><span emptylineplaceholder="true">
</span></span><span class="line" line="36"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    public </span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E">IOHandler</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">(IIODevices ioDevices, Encryption encryption)
</span></span><span class="line" line="37"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    {
</span></span><span class="line" line="38"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">        _ioDevices </span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672">=</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"> ioDevices;
</span></span><span class="line" line="39"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">        _encryption </span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672">=</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"> encryption;
</span></span><span class="line" line="40"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    }
</span></span><span class="line" line="41"><span emptylineplaceholder="true">
</span></span><span class="line" line="42"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    public </span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#66D9EF;--shiki-dark-font-style:inherit;--shiki-default-font-style:inherit;--shiki-sepia-font-style:italic">void</span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"> ProcessIO</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">()
</span></span><span class="line" line="43"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    {
</span></span><span class="line" line="44"><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#66D9EF;--shiki-dark-font-style:inherit;--shiki-default-font-style:inherit;--shiki-sepia-font-style:italic">        char</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"> input </span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672">=</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"> _ioDevices.</span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E">Read</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">();
</span></span><span class="line" line="45"><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#66D9EF;--shiki-dark-font-style:inherit;--shiki-default-font-style:inherit;--shiki-sepia-font-style:italic">        char</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"> encrypted </span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672">=</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"> _encryption.</span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E">EncryptChar</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">(input);
</span></span><span class="line" line="46"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">        _ioDevices.</span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E">Write</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">(encrypted);
</span></span><span class="line" line="47"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    }
</span></span><span class="line" line="48"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">}
</span></span><span class="line" line="49"><span emptylineplaceholder="true">
</span></span><span class="line" line="50"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">class Program
</span></span><span class="line" line="51"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">{
</span></span><span class="line" line="52"><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672">    static</span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#66D9EF;--shiki-dark-font-style:inherit;--shiki-default-font-style:inherit;--shiki-sepia-font-style:italic"> void</span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"> Main</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">()
</span></span><span class="line" line="53"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    {
</span></span><span class="line" line="54"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">        IIODevices consoleIO </span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672">=</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"> new </span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E">ConsoleIODevices</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">();
</span></span><span class="line" line="55"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">        Encryption encryption </span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672">=</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"> new </span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E">Encryption</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">();
</span></span><span class="line" line="56"><span emptylineplaceholder="true">
</span></span><span class="line" line="57"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">        IOHandler ioHandler </span><span style="--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672">=</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"> new </span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E">IOHandler</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">(consoleIO, encryption);
</span></span><span class="line" line="58"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">        ioHandler.</span><span style="--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E">ProcessIO</span><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">();
</span></span><span class="line" line="59"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">    }
</span></span><span class="line" line="60"><span style="--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2">}
</span></span></code><!--]--></pre><!--]--><button class="copy-button" data-v-a67e2655 data-v-4a003820><span class="sr-only" data-v-4a003820>Copy to clipboard</span><span class="icon-wrapper" data-v-4a003820><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-4a003820 style="" width="18px" height="18px" viewBox="0 0 256 256" data-v-e610b8e3><path fill="currentColor" d="M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z"/></svg></span></button></div></details><br><p data-v-9dc9c102><!--[-->總結：<!--]--></p><ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->Encryption 不需要知道 IO Devices 的具體實作。它只專注於加密邏輯。<!--]--></li><li data-v-4c2f5fb9><!--[-->IO Devices（例如 ConsoleIO）依賴於 Encryption 來處理讀取到的數據。<!--]--></li><li data-v-4c2f5fb9><!--[-->這樣的設計遵循了依賴倒轉原則，保持了高層邏輯與具體實作之間的解耦，提供了靈活性和可維護性。<!--]--></li><!--]--></ul><br><h2 id="conclusion-本章小結" data-v-70b0c1e2><a aria-current="page" href="/code-study/clean-arch/chapter19#conclusion-本章小結" class="router-link-active router-link-exact-active" data-v-70b0c1e2><!--[-->CONCLUSION 本章小結<!--]--><!----></a></h2><p data-v-9dc9c102><!--[-->本章針對策略的討論涉及單一職責原則（SRP）、共同閉包原則（CCP）、依賴反轉原則（DIP）。<!--]--></p><style>html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}</style></div><!--]--><!--]--><!--[--><div class="docs-page-bottom" data-v-a6339876 data-v-70e24a2d><div class="edit-link" data-v-70e24a2d><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-70e24a2d style="" width="1em" height="1em" viewBox="0 0 24 24" data-v-e610b8e3><path fill="currentColor" d="M21 12a1 1 0 0 0-1 1v6a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h6a1 1 0 0 0 0-2H5a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-6a1 1 0 0 0-1-1m-15 .76V17a1 1 0 0 0 1 1h4.24a1 1 0 0 0 .71-.29l6.92-6.93L21.71 8a1 1 0 0 0 0-1.42l-4.24-4.29a1 1 0 0 0-1.42 0l-2.82 2.83l-6.94 6.93a1 1 0 0 0-.29.71m10.76-8.35l2.83 2.83l-1.42 1.42l-2.83-2.83ZM8 13.17l5.93-5.93l2.83 2.83L10.83 16H8Z"/></svg><!--[--><a href="https://github.com/codesensegroup/code-study/edit/master/content/6.clean-arch/19.chapter19.md" rel="noopener noreferrer" data-v-70e24a2d data-v-692834dd><!--[--><span data-v-70e24a2d> 在GitHub上在編輯此頁面 </span><!--]--></a><!--]--></div></div><div class="docs-prev-next" data-v-a6339876 data-v-30e1aea1><a href="/code-study/clean-arch/chapter18" class="prev" data-v-30e1aea1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-30e1aea1 style="" width="1em" height="1em" viewBox="0 0 24 24" data-v-e610b8e3><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m11 17l-5-5m0 0l5-5m-5 5h12"/></svg><div class="wrapper" data-v-30e1aea1><span class="directory" data-v-30e1aea1>Clean Arch</span><span class="title" data-v-30e1aea1>18 邊界剖析</span></div></a><a href="/code-study/clean-arch/chapter20" class="next" data-v-30e1aea1><div class="wrapper" data-v-30e1aea1><span class="directory" data-v-30e1aea1>Clean Arch</span><span class="title" data-v-30e1aea1>20 BUSINESS RULES 業務邏輯</span></div><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-30e1aea1 style="" width="1em" height="1em" viewBox="0 0 24 24" data-v-e610b8e3><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m13 7l5 5m0 0l-5 5m5-5H6"/></svg></a></div><!--]--></article><div class="toc" data-v-a6339876><div class="toc-wrapper" data-v-a6339876><button data-v-a6339876><span class="title" data-v-a6339876>Table of Contents</span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-a6339876 style="" width="1em" height="1em" viewBox="0 0 24 24" data-v-e610b8e3><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 5l7 7l-7 7"/></svg></button><div class="docs-toc-wrapper" data-v-a6339876><div class="docs-toc" data-v-a6339876 data-v-ebd2b6b2><!--[--><div class="docs-toc-title" data-v-ebd2b6b2><span data-v-ebd2b6b2>Table of Contents</span></div><ul class="docs-toc-links" data-v-ebd2b6b2 data-v-a97df893><!--[--><li class="depth-2" data-v-a97df893><a href="#level層次" class="" data-v-a97df893>Level（層次）</a><ul class="docs-toc-links" data-v-a97df893 data-v-a97df893><!--[--><li class="depth-3" data-v-a97df893><a href="#高層次與低層次元件的概念" class="" data-v-a97df893>高層次與低層次元件的概念</a><!----></li><li class="depth-3" data-v-a97df893><a href="#架構圖中的高低層次解釋" class="" data-v-a97df893>架構圖中的高低層次解釋</a><!----></li><li class="depth-3" data-v-a97df893><a href="#為何架構不正確" class="" data-v-a97df893>為何架構不正確</a><!----></li><li class="depth-3" data-v-a97df893><a href="#改進建議" class="" data-v-a97df893>改進建議：</a><!----></li><li class="depth-3" data-v-a97df893><a href="#依賴倒轉的具體原則" class="" data-v-a97df893>依賴倒轉的具體原則</a><!----></li><li class="depth-3" data-v-a97df893><a href="#策略分組" class="" data-v-a97df893>策略分組</a><!----></li><!--]--></ul></li><li class="depth-2" data-v-a97df893><a href="#conclusion-本章小結" class="" data-v-a97df893>CONCLUSION 本章小結</a><!----></li><!--]--></ul><!--]--></div></div></div></div><button class="reading-mode-toggle" aria-label="進入閱讀模式" title="進入閱讀模式 (F)" data-v-a6339876 data-v-74d819de><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-74d819de style="" width="1em" height="1em" viewBox="0 0 24 24" data-v-e610b8e3><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18s-3.332.477-4.5 1.253"/></svg></button><!--]--></div></div><!--]--></main><footer class="h-20 relative w-full z-20 text-center flex flex-col items-center justify-center" data-v-5c2f7786 data-v-47825797><div class="font-light" data-v-47825797>© 2022 Code Sense</div><div class="busuanzi flex" data-v-47825797><span class="flex" id="busuanzi_container_site_uv" data-v-47825797><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 20 20" fill="currentColor" class="mt-1 mr-1 w-4 h-4" data-v-47825797><path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"></path></svg><span class="site-uv" title="訪客總數" data-v-47825797><span id="busuanzi_value_site_uv" data-v-47825797></span></span></span><span class="mx-2" data-v-47825797>|</span><span class="flex" id="busuanzi_container_site_pv" data-v-47825797><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 20 20" fill="currentColor" class="mt-1 mr-1 w-4 h-4" data-v-47825797><path d="M10 12a2 2 0 100-4 2 2 0 000 4z"></path><path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd"></path></svg><span class="site-pv" title="總瀏覽次數" data-v-47825797><span id="busuanzi_value_site_pv" data-v-47825797></span></span></span></div></footer></div></div><script type="application/json" id="__NUXT_DATA__" data-ssr="true" data-src="/code-study/clean-arch/chapter19/_payload.json">[{"state":1,"_errors":2627,"serverRendered":5,"path":11,"prerenderedAt":2630},["Reactive",2],{"$scolor-mode":3,"$sdd-pages":7,"$sdd-surrounds":2368,"$sdd-globals":2389,"$sdd-navigation":2391,"$sicons":2592,"$sreading-mode":6,"$sasideScroll":2618,"$sdocus-docs-aside-collapse-map-/":2619,"$sdocus-docs-aside-collapse-map-/sdi-aig":2620,"$sdocus-docs-aside-collapse-map-/clean-arch":2621,"$sdocus-docs-aside-collapse-map-/ddia":2622,"$sdocus-docs-aside-collapse-map-/cicd-2.0":2623,"$sdocus-docs-aside-collapse-map-/web-api":2624,"$sdocus-docs-aside-collapse-map-/workshop":2625,"$sdocus-docs-aside-collapse-map-/api":2626},{"preference":4,"value":4,"unknown":5,"forced":6},"system",true,false,["ShallowRef",8],["ShallowReactive",9],{"/clean-arch/chapter19":10},{"_path":11,"_dir":12,"_draft":6,"_partial":6,"_locale":13,"title":14,"description":15,"pageTitle":16,"contributors":17,"body":19,"_type":2362,"_id":2363,"_source":2364,"_file":2365,"_extension":2366,"layout":2367},"/clean-arch/chapter19","clean-arch","","19 POLICY AND LEVEL 策略與層次","基本上，所有的軟體都是一組策略聲明的集合。簡單來說電腦程式就是一組仔細描述如何將輸入轉換為輸出的策略聲明的集合。","Chapter 19 策略與層次",[18],"Simon-Din",{"type":20,"children":21,"toc":2351},"root",[22,29,34,54,59,72,77,96,99,104,109,127,132,139,144,150,163,168,173,187,190,203,208,310,315,336,342,355,358,363,368,420,465,1360,1365,1393,1398,1403,1489,1492,1506,1509,1530,2306,2309,2313,2331,2334,2340,2345],{"type":23,"tag":24,"props":25,"children":26},"element","p",{},[27],{"type":28,"value":15},"text",{"type":23,"tag":24,"props":30,"children":31},{},[32],{"type":28,"value":33},"大多數非小型的系統中，整體業務策略通常會細分為多組更小的策略聲明。",{"type":23,"tag":35,"props":36,"children":37},"ul",{},[38,44,49],{"type":23,"tag":39,"props":40,"children":41},"li",{},[42],{"type":28,"value":43},"一部分用於描述計算部份的業務邏輯。",{"type":23,"tag":39,"props":45,"children":46},{},[47],{"type":28,"value":48},"一部分負責描述計算報告的格式(即展示或呈現運算結果)。",{"type":23,"tag":39,"props":50,"children":51},{},[52],{"type":28,"value":53},"還有一些用來描述如何驗證輸入資料的策略。",{"type":23,"tag":24,"props":55,"children":56},{},[57],{"type":28,"value":58},"程式架構設計的重點之一。",{"type":23,"tag":35,"props":60,"children":61},{},[62,67],{"type":23,"tag":39,"props":63,"children":64},{},[65],{"type":28,"value":66},"將這些策略彼此分離，根據它們的變更方式進行重新分組。",{"type":23,"tag":39,"props":68,"children":69},{},[70],{"type":28,"value":71},"變更原因、時間和層次相同的策略應該分在同一個組件中。",{"type":23,"tag":24,"props":73,"children":74},{},[75],{"type":28,"value":76},"架構設計的工作通常需要將組件重新排列，組合成一個有向無環圖。",{"type":23,"tag":78,"props":79,"children":81},"div",{"align":80},"center",[82,84,90,94],{"type":28,"value":83},"\n  ",{"type":23,"tag":85,"props":86,"children":89},"img",{"src":87,"width":88},"/code-study/images/clean-arch/19/01.png","60%",[],{"type":23,"tag":91,"props":92,"children":93},"br",{},[],{"type":28,"value":95},"\n  圖 19.1\n",{"type":23,"tag":91,"props":97,"children":98},{},[],{"type":23,"tag":24,"props":100,"children":101},{},[102],{"type":28,"value":103},"圖 19.1 中的每個節點代表擁有相同層次策略的組件，每條單向鏈接代表一種組件之間的依賴關係，這些鏈接將不同層級的組件連接起來。",{"type":23,"tag":24,"props":105,"children":106},{},[107],{"type":28,"value":108},"這裡的依賴關係是指程式碼層次上、編譯期的依賴關係。",{"type":23,"tag":35,"props":110,"children":111},{},[112,117,122],{"type":23,"tag":39,"props":113,"children":114},{},[115],{"type":28,"value":116},"在 Java 語言中就是指 import 陳述句。",{"type":23,"tag":39,"props":118,"children":119},{},[120],{"type":28,"value":121},"在 C# 語言中就是指 using 陳述句。",{"type":23,"tag":39,"props":123,"children":124},{},[125],{"type":28,"value":126},"在 Ruby 語言中就是指 require 語句。\n這些依賴關係都是在編譯過程中所必需的。",{"type":23,"tag":24,"props":128,"children":129},{},[130],{"type":28,"value":131},"在設計良好的架構中，依賴關係的方向通常取決於它們所關聯的組件層次。通常，低層組件會被設計為依賴於高層組件。",{"type":23,"tag":133,"props":134,"children":136},"h2",{"id":135},"level層次",[137],{"type":28,"value":138},"Level（層次）",{"type":23,"tag":24,"props":140,"children":141},{},[142],{"type":28,"value":143},"「層次」嚴格根據「輸入與輸出之間的距離」來定義。也就是說，一條策略距離系統的輸入/輸出越遠，它所屬的層次就越高。相反，直接管理輸入/輸出的策略，其在系統中的層次則是最低的。",{"type":23,"tag":145,"props":146,"children":148},"h3",{"id":147},"高層次與低層次元件的概念",[149],{"type":28,"value":147},{"type":23,"tag":35,"props":151,"children":152},{},[153,158],{"type":23,"tag":39,"props":154,"children":155},{},[156],{"type":28,"value":157},"高層次元件：通常與具體的實作細節無關，專注於抽象邏輯或業務邏輯。它們不直接依賴於輸入或輸出的細節，而是依賴於較低層次的元件來完成這些任務。",{"type":23,"tag":39,"props":159,"children":160},{},[161],{"type":28,"value":162},"低層次元件：與具體的實作細節密切相關，處理直接的硬體操作、I/O 或資料流操作，通常是與外部世界（像是使用者、硬體設備）互動的元件。",{"type":23,"tag":145,"props":164,"children":166},{"id":165},"架構圖中的高低層次解釋",[167],{"type":28,"value":165},{"type":23,"tag":24,"props":169,"children":170},{},[171],{"type":28,"value":172},"圖 19.2 是一個簡單加密程式的資料流向圖，該程式從輸入裝置讀取字符，然後用查表法轉換這些字符並將轉換後的字符輸出到輸出裝置。我們將圖中資料的流向用彎曲實心箭頭標識了出來，而對於經精妙設計過的源碼中的依賴關係則使用直虛線來標識。",{"type":23,"tag":78,"props":174,"children":175},{"align":80},[176,177,182,185],{"type":28,"value":83},{"type":23,"tag":85,"props":178,"children":181},{"src":179,"width":180},"/code-study/images/clean-arch/19/02.png","70%",[],{"type":23,"tag":91,"props":183,"children":184},{},[],{"type":28,"value":186},"\n  圖 19.2\n",{"type":23,"tag":91,"props":188,"children":189},{},[],{"type":23,"tag":35,"props":191,"children":192},{},[193,198],{"type":23,"tag":39,"props":194,"children":195},{},[196],{"type":28,"value":197},"Translate 是高層次元件：該元件與具體的 I/O（輸入/輸出）操作無關。它專注於字元的「轉換」，這是一種抽象邏輯。Translate 不直接處理如何讀取字元或寫入字元，而是依賴低層次的 Read Char 和 Write Char 來完成這些任務。",{"type":23,"tag":39,"props":199,"children":200},{},[201],{"type":28,"value":202},"Read Char 和 Write Char 是低層次元件：這兩個元件與具體的 I/O 操作直接相關。Read Char 負責從某個來源（例如：鍵盤、檔案）讀取字元，Write Char 則負責將字元寫到某個目的地（例如：螢幕、檔案）。這些操作屬於具體的實作細節，因此是低層次元件。",{"type":23,"tag":24,"props":204,"children":205},{},[206],{"type":28,"value":207},"但我們很容易將這個加密程式寫成下面這樣，這就構成了一個不正確的架構：",{"type":23,"tag":209,"props":210,"children":214},"pre",{"className":211,"code":212,"language":213,"meta":13,"style":13},"language-c shiki shiki-themes github-dark github-light monokai","function encrypt() {\n    while (true)\n        writeChar(translate(readChar()));\n}\n","c",[215],{"type":23,"tag":216,"props":217,"children":218},"code",{"__ignoreMap":13},[219,242,268,301],{"type":23,"tag":220,"props":221,"children":224},"span",{"class":222,"line":223},"line",1,[225,231,237],{"type":23,"tag":220,"props":226,"children":228},{"style":227},"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2",[229],{"type":28,"value":230},"function ",{"type":23,"tag":220,"props":232,"children":234},{"style":233},"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E",[235],{"type":28,"value":236},"encrypt",{"type":23,"tag":220,"props":238,"children":239},{"style":227},[240],{"type":28,"value":241},"() {\n",{"type":23,"tag":220,"props":243,"children":245},{"class":222,"line":244},2,[246,252,257,263],{"type":23,"tag":220,"props":247,"children":249},{"style":248},"--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672",[250],{"type":28,"value":251},"    while",{"type":23,"tag":220,"props":253,"children":254},{"style":227},[255],{"type":28,"value":256}," (",{"type":23,"tag":220,"props":258,"children":260},{"style":259},"--shiki-dark:#79B8FF;--shiki-default:#005CC5;--shiki-sepia:#AE81FF",[261],{"type":28,"value":262},"true",{"type":23,"tag":220,"props":264,"children":265},{"style":227},[266],{"type":28,"value":267},")\n",{"type":23,"tag":220,"props":269,"children":271},{"class":222,"line":270},3,[272,277,282,287,291,296],{"type":23,"tag":220,"props":273,"children":274},{"style":233},[275],{"type":28,"value":276},"        writeChar",{"type":23,"tag":220,"props":278,"children":279},{"style":227},[280],{"type":28,"value":281},"(",{"type":23,"tag":220,"props":283,"children":284},{"style":233},[285],{"type":28,"value":286},"translate",{"type":23,"tag":220,"props":288,"children":289},{"style":227},[290],{"type":28,"value":281},{"type":23,"tag":220,"props":292,"children":293},{"style":233},[294],{"type":28,"value":295},"readChar",{"type":23,"tag":220,"props":297,"children":298},{"style":227},[299],{"type":28,"value":300},"()));\n",{"type":23,"tag":220,"props":302,"children":304},{"class":222,"line":303},4,[305],{"type":23,"tag":220,"props":306,"children":307},{"style":227},[308],{"type":28,"value":309},"}\n",{"type":23,"tag":145,"props":311,"children":313},{"id":312},"為何架構不正確",[314],{"type":28,"value":312},{"type":23,"tag":35,"props":316,"children":317},{},[318,331],{"type":23,"tag":39,"props":319,"children":320},{},[321,323],{"type":28,"value":322},"過度依賴低層次元件：根據圖 19.2 中的架構，Translate 與 Read Char 和 Write Char 之間有「source code dependencies」（原始碼依賴）。這意味著 Translate 依賴於具體的 I/O 操作（Read Char 和 Write Char），這導致高層次元件對低層次元件的依賴性過高。",{"type":23,"tag":35,"props":324,"children":325},{},[326],{"type":23,"tag":39,"props":327,"children":328},{},[329],{"type":28,"value":330},"理想的架構應該是高層次元件不依賴低層次元件，反而應該是低層次元件依賴高層次元件來完成具體的任務。這樣可以讓高層次邏輯更加獨立，易於修改和擴展，而不受具體的輸入/輸出限制。",{"type":23,"tag":39,"props":332,"children":333},{},[334],{"type":28,"value":335},"反轉依賴原則（Dependency Inversion Principle, DIP）違反：DIP 是一個常見的設計原則，強調高層次元件不應該依賴低層次元件，而是雙方都應該依賴於抽象（例如接口）。這裡 Translate 直接依賴了具體的 I/O 操作，違反了這個原則。",{"type":23,"tag":145,"props":337,"children":339},{"id":338},"改進建議",[340],{"type":28,"value":341},"改進建議：",{"type":23,"tag":78,"props":343,"children":344},{"align":80},[345,346,350,353],{"type":28,"value":83},{"type":23,"tag":85,"props":347,"children":349},{"src":348,"width":88},"/code-study/images/clean-arch/19/03.png",[],{"type":23,"tag":91,"props":351,"children":352},{},[],{"type":28,"value":354},"\n  圖 19.3\n",{"type":23,"tag":91,"props":356,"children":357},{},[],{"type":23,"tag":24,"props":359,"children":360},{},[361],{"type":28,"value":362},"圖 19.3 中展示了一個基於依賴倒轉原則（Dependency Inversion Principle, DIP）的設計，這個原則的核心理念是「高層次模組不應該依賴低層次模組，兩者都應依賴於抽象」。透過依賴注入或接口設計來隔離 Translate 與具體的 I/O 操作。",{"type":23,"tag":24,"props":364,"children":365},{},[366],{"type":28,"value":367},"例如，Translate 可以依賴抽象的接口，而具體的 Read Char 和 Write Char 則實現這些接口。這樣可以讓高層次邏輯不依賴於具體的實作細節，使架構更具彈性。",{"type":23,"tag":369,"props":370,"children":371},"details",{},[372,374,380],{"type":28,"value":373},"\n    ",{"type":23,"tag":375,"props":376,"children":377},"summary",{},[378],{"type":28,"value":379},"箭頭圖示說明",{"type":23,"tag":381,"props":382,"children":383},"ol",{},[384,402],{"type":23,"tag":39,"props":385,"children":386},{},[387,389],{"type":28,"value":388},"Encrypt 到 Interface 的箭頭（Encrypt 依賴 ICharReader 和 ICharWriter）\n",{"type":23,"tag":35,"props":390,"children":391},{},[392,397],{"type":23,"tag":39,"props":393,"children":394},{},[395],{"type":28,"value":396},"箭頭是實線，代表依賴關係。",{"type":23,"tag":39,"props":398,"children":399},{},[400],{"type":28,"value":401},"Encrypt 直接 依賴 於 ICharReader 和 ICharWriter，這表示 Encrypt 會使用這兩個接口來進行操作。Encrypt 需要透過這兩個接口來執行具體的字元讀寫工作。",{"type":23,"tag":39,"props":403,"children":404},{},[405,407],{"type":28,"value":406},"Console Reader/Writer 到 Interface 的箭頭（ConsoleCharReader 和 ConsoleCharWriter 依賴接口）\n",{"type":23,"tag":35,"props":408,"children":409},{},[410,415],{"type":23,"tag":39,"props":411,"children":412},{},[413],{"type":28,"value":414},"箭頭是虛線，表示實作或繼承關係。",{"type":23,"tag":39,"props":416,"children":417},{},[418],{"type":28,"value":419},"ConsoleCharReader 和 ConsoleCharWriter 這兩個具體實作了 ICharReader 和 ICharWriter 接口，表示它們提供了這些接口的方法的具體實作。",{"type":23,"tag":369,"props":421,"children":422},{},[423,424,429],{"type":28,"value":373},{"type":23,"tag":375,"props":425,"children":426},{},[427],{"type":28,"value":428},"依賴方向說明",{"type":23,"tag":35,"props":430,"children":431},{},[432,437,442,447],{"type":23,"tag":39,"props":433,"children":434},{},[435],{"type":28,"value":436},"圖 19.3 中，高層次的元件是 Encrypt，它依賴於兩個抽象的元件：Char Reader 和 Char Writer。",{"type":23,"tag":39,"props":438,"children":439},{},[440],{"type":28,"value":441},"Char Reader 和 Char Writer 是具體的操作（如讀取字元和寫入字元），但它們並非直接依賴於具體的實現，如 Console Reader 或 Console Writer，而是依賴於接口（I）。",{"type":23,"tag":39,"props":443,"children":444},{},[445],{"type":28,"value":446},"Console Reader 和 Console Writer 是具體的實作，它們實現了 Char Reader 和 Char Writer 的接口。",{"type":23,"tag":39,"props":448,"children":449},{},[450,452],{"type":28,"value":451},"這樣做的目的是：\n",{"type":23,"tag":381,"props":453,"children":454},{},[455,460],{"type":23,"tag":39,"props":456,"children":457},{},[458],{"type":28,"value":459},"Encrypt 作為高層次邏輯，僅依賴抽象（接口 ICharReader 和 ICharWriter），而不依賴具體的輸入/輸出操作（例如從控制台讀取或寫入）。",{"type":23,"tag":39,"props":461,"children":462},{},[463],{"type":28,"value":464},"如果將來需要改變具體的 I/O 實現（例如從檔案讀取字元而不是從控制台），可以通過替換 Char Reader 和 Char Writer 的具體實現來實現，Encrypt 不需要任何改動。",{"type":23,"tag":369,"props":466,"children":467},{},[468,469,474,479,590,595,799,804,1181,1186],{"type":28,"value":373},{"type":23,"tag":375,"props":470,"children":471},{},[472],{"type":28,"value":473},"程式碼範例",{"type":23,"tag":24,"props":475,"children":476},{},[477],{"type":28,"value":478},"定義接口（抽象）",{"type":23,"tag":209,"props":480,"children":482},{"className":211,"code":481,"language":213,"meta":13,"style":13},"public interface ICharReader\n{\n    char ReadChar();\n}\n\npublic interface ICharWriter\n{\n    void WriteChar(char c);\n}\n",[483],{"type":23,"tag":216,"props":484,"children":485},{"__ignoreMap":13},[486,494,502,521,528,537,546,554,582],{"type":23,"tag":220,"props":487,"children":488},{"class":222,"line":223},[489],{"type":23,"tag":220,"props":490,"children":491},{"style":227},[492],{"type":28,"value":493},"public interface ICharReader\n",{"type":23,"tag":220,"props":495,"children":496},{"class":222,"line":244},[497],{"type":23,"tag":220,"props":498,"children":499},{"style":227},[500],{"type":28,"value":501},"{\n",{"type":23,"tag":220,"props":503,"children":504},{"class":222,"line":270},[505,511,516],{"type":23,"tag":220,"props":506,"children":508},{"style":507},"--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#66D9EF;--shiki-dark-font-style:inherit;--shiki-default-font-style:inherit;--shiki-sepia-font-style:italic",[509],{"type":28,"value":510},"    char",{"type":23,"tag":220,"props":512,"children":513},{"style":233},[514],{"type":28,"value":515}," ReadChar",{"type":23,"tag":220,"props":517,"children":518},{"style":227},[519],{"type":28,"value":520},"();\n",{"type":23,"tag":220,"props":522,"children":523},{"class":222,"line":303},[524],{"type":23,"tag":220,"props":525,"children":526},{"style":227},[527],{"type":28,"value":309},{"type":23,"tag":220,"props":529,"children":531},{"class":222,"line":530},5,[532],{"type":23,"tag":220,"props":533,"children":534},{"emptyLinePlaceholder":5},[535],{"type":28,"value":536},"\n",{"type":23,"tag":220,"props":538,"children":540},{"class":222,"line":539},6,[541],{"type":23,"tag":220,"props":542,"children":543},{"style":227},[544],{"type":28,"value":545},"public interface ICharWriter\n",{"type":23,"tag":220,"props":547,"children":549},{"class":222,"line":548},7,[550],{"type":23,"tag":220,"props":551,"children":552},{"style":227},[553],{"type":28,"value":501},{"type":23,"tag":220,"props":555,"children":557},{"class":222,"line":556},8,[558,563,568,572,577],{"type":23,"tag":220,"props":559,"children":560},{"style":507},[561],{"type":28,"value":562},"    void",{"type":23,"tag":220,"props":564,"children":565},{"style":233},[566],{"type":28,"value":567}," WriteChar",{"type":23,"tag":220,"props":569,"children":570},{"style":227},[571],{"type":28,"value":281},{"type":23,"tag":220,"props":573,"children":574},{"style":507},[575],{"type":28,"value":576},"char",{"type":23,"tag":220,"props":578,"children":579},{"style":227},[580],{"type":28,"value":581}," c);\n",{"type":23,"tag":220,"props":583,"children":585},{"class":222,"line":584},9,[586],{"type":23,"tag":220,"props":587,"children":588},{"style":227},[589],{"type":28,"value":309},{"type":23,"tag":24,"props":591,"children":592},{},[593],{"type":28,"value":594},"低層次組件（具體實作）",{"type":23,"tag":209,"props":596,"children":598},{"className":211,"code":597,"language":213,"meta":13,"style":13},"public class ConsoleCharReader : ICharReader\n{\n    public char ReadChar()\n    {\n        // 假設從控制台讀取一個字元\n        return Console.ReadKey().KeyChar;\n    }\n}\n\npublic class ConsoleCharWriter : ICharWriter\n{\n    public void WriteChar(char c)\n    {\n        // 將字元寫入控制台\n        Console.Write(c);\n    }\n}\n",[599],{"type":23,"tag":216,"props":600,"children":601},{"__ignoreMap":13},[602,610,617,638,646,655,678,686,693,700,709,717,747,755,764,783,791],{"type":23,"tag":220,"props":603,"children":604},{"class":222,"line":223},[605],{"type":23,"tag":220,"props":606,"children":607},{"style":227},[608],{"type":28,"value":609},"public class ConsoleCharReader : ICharReader\n",{"type":23,"tag":220,"props":611,"children":612},{"class":222,"line":244},[613],{"type":23,"tag":220,"props":614,"children":615},{"style":227},[616],{"type":28,"value":501},{"type":23,"tag":220,"props":618,"children":619},{"class":222,"line":270},[620,625,629,633],{"type":23,"tag":220,"props":621,"children":622},{"style":227},[623],{"type":28,"value":624},"    public ",{"type":23,"tag":220,"props":626,"children":627},{"style":507},[628],{"type":28,"value":576},{"type":23,"tag":220,"props":630,"children":631},{"style":233},[632],{"type":28,"value":515},{"type":23,"tag":220,"props":634,"children":635},{"style":227},[636],{"type":28,"value":637},"()\n",{"type":23,"tag":220,"props":639,"children":640},{"class":222,"line":303},[641],{"type":23,"tag":220,"props":642,"children":643},{"style":227},[644],{"type":28,"value":645},"    {\n",{"type":23,"tag":220,"props":647,"children":648},{"class":222,"line":530},[649],{"type":23,"tag":220,"props":650,"children":652},{"style":651},"--shiki-dark:#6A737D;--shiki-default:#6A737D;--shiki-sepia:#88846F",[653],{"type":28,"value":654},"        // 假設從控制台讀取一個字元\n",{"type":23,"tag":220,"props":656,"children":657},{"class":222,"line":539},[658,663,668,673],{"type":23,"tag":220,"props":659,"children":660},{"style":248},[661],{"type":28,"value":662},"        return",{"type":23,"tag":220,"props":664,"children":665},{"style":227},[666],{"type":28,"value":667}," Console.",{"type":23,"tag":220,"props":669,"children":670},{"style":233},[671],{"type":28,"value":672},"ReadKey",{"type":23,"tag":220,"props":674,"children":675},{"style":227},[676],{"type":28,"value":677},"().KeyChar;\n",{"type":23,"tag":220,"props":679,"children":680},{"class":222,"line":548},[681],{"type":23,"tag":220,"props":682,"children":683},{"style":227},[684],{"type":28,"value":685},"    }\n",{"type":23,"tag":220,"props":687,"children":688},{"class":222,"line":556},[689],{"type":23,"tag":220,"props":690,"children":691},{"style":227},[692],{"type":28,"value":309},{"type":23,"tag":220,"props":694,"children":695},{"class":222,"line":584},[696],{"type":23,"tag":220,"props":697,"children":698},{"emptyLinePlaceholder":5},[699],{"type":28,"value":536},{"type":23,"tag":220,"props":701,"children":703},{"class":222,"line":702},10,[704],{"type":23,"tag":220,"props":705,"children":706},{"style":227},[707],{"type":28,"value":708},"public class ConsoleCharWriter : ICharWriter\n",{"type":23,"tag":220,"props":710,"children":712},{"class":222,"line":711},11,[713],{"type":23,"tag":220,"props":714,"children":715},{"style":227},[716],{"type":28,"value":501},{"type":23,"tag":220,"props":718,"children":720},{"class":222,"line":719},12,[721,725,730,734,738,742],{"type":23,"tag":220,"props":722,"children":723},{"style":227},[724],{"type":28,"value":624},{"type":23,"tag":220,"props":726,"children":727},{"style":507},[728],{"type":28,"value":729},"void",{"type":23,"tag":220,"props":731,"children":732},{"style":233},[733],{"type":28,"value":567},{"type":23,"tag":220,"props":735,"children":736},{"style":227},[737],{"type":28,"value":281},{"type":23,"tag":220,"props":739,"children":740},{"style":507},[741],{"type":28,"value":576},{"type":23,"tag":220,"props":743,"children":744},{"style":227},[745],{"type":28,"value":746}," c)\n",{"type":23,"tag":220,"props":748,"children":750},{"class":222,"line":749},13,[751],{"type":23,"tag":220,"props":752,"children":753},{"style":227},[754],{"type":28,"value":645},{"type":23,"tag":220,"props":756,"children":758},{"class":222,"line":757},14,[759],{"type":23,"tag":220,"props":760,"children":761},{"style":651},[762],{"type":28,"value":763},"        // 將字元寫入控制台\n",{"type":23,"tag":220,"props":765,"children":767},{"class":222,"line":766},15,[768,773,778],{"type":23,"tag":220,"props":769,"children":770},{"style":227},[771],{"type":28,"value":772},"        Console.",{"type":23,"tag":220,"props":774,"children":775},{"style":233},[776],{"type":28,"value":777},"Write",{"type":23,"tag":220,"props":779,"children":780},{"style":227},[781],{"type":28,"value":782},"(c);\n",{"type":23,"tag":220,"props":784,"children":786},{"class":222,"line":785},16,[787],{"type":23,"tag":220,"props":788,"children":789},{"style":227},[790],{"type":28,"value":685},{"type":23,"tag":220,"props":792,"children":794},{"class":222,"line":793},17,[795],{"type":23,"tag":220,"props":796,"children":797},{"style":227},[798],{"type":28,"value":309},{"type":23,"tag":24,"props":800,"children":801},{},[802],{"type":28,"value":803},"高層次組件（邏輯）",{"type":23,"tag":209,"props":805,"children":807},{"className":211,"code":806,"language":213,"meta":13,"style":13},"public class Encrypt\n{\n    private readonly ICharReader _reader;\n    private readonly ICharWriter _writer;\n\n    public Encrypt(ICharReader reader, ICharWriter writer)\n    {\n        _reader = reader;\n        _writer = writer;\n    }\n\n    public void PerformEncryption()\n    {\n        while (true)\n        {\n            // 讀取字元、加密（假設這裡做了某種轉換或加密操作）\n            var c = _reader.ReadChar();\n            var encryptedChar = Translate(c); // 假設這是加密邏輯\n            _writer.WriteChar(encryptedChar);\n        }\n    }\n\n    private char Translate(char c)\n    {\n        // 簡單示範：將字元轉換為下一個字母（例如：a -> b）\n        return (char)(c + 1);\n    }\n}\n",[808],{"type":23,"tag":216,"props":809,"children":810},{"__ignoreMap":13},[811,819,826,834,842,849,866,873,891,908,915,922,942,949,969,977,985,1011,1039,1058,1067,1075,1083,1112,1120,1129,1165,1173],{"type":23,"tag":220,"props":812,"children":813},{"class":222,"line":223},[814],{"type":23,"tag":220,"props":815,"children":816},{"style":227},[817],{"type":28,"value":818},"public class Encrypt\n",{"type":23,"tag":220,"props":820,"children":821},{"class":222,"line":244},[822],{"type":23,"tag":220,"props":823,"children":824},{"style":227},[825],{"type":28,"value":501},{"type":23,"tag":220,"props":827,"children":828},{"class":222,"line":270},[829],{"type":23,"tag":220,"props":830,"children":831},{"style":227},[832],{"type":28,"value":833},"    private readonly ICharReader _reader;\n",{"type":23,"tag":220,"props":835,"children":836},{"class":222,"line":303},[837],{"type":23,"tag":220,"props":838,"children":839},{"style":227},[840],{"type":28,"value":841},"    private readonly ICharWriter _writer;\n",{"type":23,"tag":220,"props":843,"children":844},{"class":222,"line":530},[845],{"type":23,"tag":220,"props":846,"children":847},{"emptyLinePlaceholder":5},[848],{"type":28,"value":536},{"type":23,"tag":220,"props":850,"children":851},{"class":222,"line":539},[852,856,861],{"type":23,"tag":220,"props":853,"children":854},{"style":227},[855],{"type":28,"value":624},{"type":23,"tag":220,"props":857,"children":858},{"style":233},[859],{"type":28,"value":860},"Encrypt",{"type":23,"tag":220,"props":862,"children":863},{"style":227},[864],{"type":28,"value":865},"(ICharReader reader, ICharWriter writer)\n",{"type":23,"tag":220,"props":867,"children":868},{"class":222,"line":548},[869],{"type":23,"tag":220,"props":870,"children":871},{"style":227},[872],{"type":28,"value":645},{"type":23,"tag":220,"props":874,"children":875},{"class":222,"line":556},[876,881,886],{"type":23,"tag":220,"props":877,"children":878},{"style":227},[879],{"type":28,"value":880},"        _reader ",{"type":23,"tag":220,"props":882,"children":883},{"style":248},[884],{"type":28,"value":885},"=",{"type":23,"tag":220,"props":887,"children":888},{"style":227},[889],{"type":28,"value":890}," reader;\n",{"type":23,"tag":220,"props":892,"children":893},{"class":222,"line":584},[894,899,903],{"type":23,"tag":220,"props":895,"children":896},{"style":227},[897],{"type":28,"value":898},"        _writer ",{"type":23,"tag":220,"props":900,"children":901},{"style":248},[902],{"type":28,"value":885},{"type":23,"tag":220,"props":904,"children":905},{"style":227},[906],{"type":28,"value":907}," writer;\n",{"type":23,"tag":220,"props":909,"children":910},{"class":222,"line":702},[911],{"type":23,"tag":220,"props":912,"children":913},{"style":227},[914],{"type":28,"value":685},{"type":23,"tag":220,"props":916,"children":917},{"class":222,"line":711},[918],{"type":23,"tag":220,"props":919,"children":920},{"emptyLinePlaceholder":5},[921],{"type":28,"value":536},{"type":23,"tag":220,"props":923,"children":924},{"class":222,"line":719},[925,929,933,938],{"type":23,"tag":220,"props":926,"children":927},{"style":227},[928],{"type":28,"value":624},{"type":23,"tag":220,"props":930,"children":931},{"style":507},[932],{"type":28,"value":729},{"type":23,"tag":220,"props":934,"children":935},{"style":233},[936],{"type":28,"value":937}," PerformEncryption",{"type":23,"tag":220,"props":939,"children":940},{"style":227},[941],{"type":28,"value":637},{"type":23,"tag":220,"props":943,"children":944},{"class":222,"line":749},[945],{"type":23,"tag":220,"props":946,"children":947},{"style":227},[948],{"type":28,"value":645},{"type":23,"tag":220,"props":950,"children":951},{"class":222,"line":757},[952,957,961,965],{"type":23,"tag":220,"props":953,"children":954},{"style":248},[955],{"type":28,"value":956},"        while",{"type":23,"tag":220,"props":958,"children":959},{"style":227},[960],{"type":28,"value":256},{"type":23,"tag":220,"props":962,"children":963},{"style":259},[964],{"type":28,"value":262},{"type":23,"tag":220,"props":966,"children":967},{"style":227},[968],{"type":28,"value":267},{"type":23,"tag":220,"props":970,"children":971},{"class":222,"line":766},[972],{"type":23,"tag":220,"props":973,"children":974},{"style":227},[975],{"type":28,"value":976},"        {\n",{"type":23,"tag":220,"props":978,"children":979},{"class":222,"line":785},[980],{"type":23,"tag":220,"props":981,"children":982},{"style":651},[983],{"type":28,"value":984},"            // 讀取字元、加密（假設這裡做了某種轉換或加密操作）\n",{"type":23,"tag":220,"props":986,"children":987},{"class":222,"line":793},[988,993,997,1002,1007],{"type":23,"tag":220,"props":989,"children":990},{"style":227},[991],{"type":28,"value":992},"            var c ",{"type":23,"tag":220,"props":994,"children":995},{"style":248},[996],{"type":28,"value":885},{"type":23,"tag":220,"props":998,"children":999},{"style":227},[1000],{"type":28,"value":1001}," _reader.",{"type":23,"tag":220,"props":1003,"children":1004},{"style":233},[1005],{"type":28,"value":1006},"ReadChar",{"type":23,"tag":220,"props":1008,"children":1009},{"style":227},[1010],{"type":28,"value":520},{"type":23,"tag":220,"props":1012,"children":1014},{"class":222,"line":1013},18,[1015,1020,1024,1029,1034],{"type":23,"tag":220,"props":1016,"children":1017},{"style":227},[1018],{"type":28,"value":1019},"            var encryptedChar ",{"type":23,"tag":220,"props":1021,"children":1022},{"style":248},[1023],{"type":28,"value":885},{"type":23,"tag":220,"props":1025,"children":1026},{"style":233},[1027],{"type":28,"value":1028}," Translate",{"type":23,"tag":220,"props":1030,"children":1031},{"style":227},[1032],{"type":28,"value":1033},"(c);",{"type":23,"tag":220,"props":1035,"children":1036},{"style":651},[1037],{"type":28,"value":1038}," // 假設這是加密邏輯\n",{"type":23,"tag":220,"props":1040,"children":1042},{"class":222,"line":1041},19,[1043,1048,1053],{"type":23,"tag":220,"props":1044,"children":1045},{"style":227},[1046],{"type":28,"value":1047},"            _writer.",{"type":23,"tag":220,"props":1049,"children":1050},{"style":233},[1051],{"type":28,"value":1052},"WriteChar",{"type":23,"tag":220,"props":1054,"children":1055},{"style":227},[1056],{"type":28,"value":1057},"(encryptedChar);\n",{"type":23,"tag":220,"props":1059,"children":1061},{"class":222,"line":1060},20,[1062],{"type":23,"tag":220,"props":1063,"children":1064},{"style":227},[1065],{"type":28,"value":1066},"        }\n",{"type":23,"tag":220,"props":1068,"children":1070},{"class":222,"line":1069},21,[1071],{"type":23,"tag":220,"props":1072,"children":1073},{"style":227},[1074],{"type":28,"value":685},{"type":23,"tag":220,"props":1076,"children":1078},{"class":222,"line":1077},22,[1079],{"type":23,"tag":220,"props":1080,"children":1081},{"emptyLinePlaceholder":5},[1082],{"type":28,"value":536},{"type":23,"tag":220,"props":1084,"children":1086},{"class":222,"line":1085},23,[1087,1092,1096,1100,1104,1108],{"type":23,"tag":220,"props":1088,"children":1089},{"style":227},[1090],{"type":28,"value":1091},"    private ",{"type":23,"tag":220,"props":1093,"children":1094},{"style":507},[1095],{"type":28,"value":576},{"type":23,"tag":220,"props":1097,"children":1098},{"style":233},[1099],{"type":28,"value":1028},{"type":23,"tag":220,"props":1101,"children":1102},{"style":227},[1103],{"type":28,"value":281},{"type":23,"tag":220,"props":1105,"children":1106},{"style":507},[1107],{"type":28,"value":576},{"type":23,"tag":220,"props":1109,"children":1110},{"style":227},[1111],{"type":28,"value":746},{"type":23,"tag":220,"props":1113,"children":1115},{"class":222,"line":1114},24,[1116],{"type":23,"tag":220,"props":1117,"children":1118},{"style":227},[1119],{"type":28,"value":645},{"type":23,"tag":220,"props":1121,"children":1123},{"class":222,"line":1122},25,[1124],{"type":23,"tag":220,"props":1125,"children":1126},{"style":651},[1127],{"type":28,"value":1128},"        // 簡單示範：將字元轉換為下一個字母（例如：a -> b）\n",{"type":23,"tag":220,"props":1130,"children":1132},{"class":222,"line":1131},26,[1133,1137,1141,1145,1150,1155,1160],{"type":23,"tag":220,"props":1134,"children":1135},{"style":248},[1136],{"type":28,"value":662},{"type":23,"tag":220,"props":1138,"children":1139},{"style":227},[1140],{"type":28,"value":256},{"type":23,"tag":220,"props":1142,"children":1143},{"style":507},[1144],{"type":28,"value":576},{"type":23,"tag":220,"props":1146,"children":1147},{"style":227},[1148],{"type":28,"value":1149},")(c ",{"type":23,"tag":220,"props":1151,"children":1152},{"style":248},[1153],{"type":28,"value":1154},"+",{"type":23,"tag":220,"props":1156,"children":1157},{"style":259},[1158],{"type":28,"value":1159}," 1",{"type":23,"tag":220,"props":1161,"children":1162},{"style":227},[1163],{"type":28,"value":1164},");\n",{"type":23,"tag":220,"props":1166,"children":1168},{"class":222,"line":1167},27,[1169],{"type":23,"tag":220,"props":1170,"children":1171},{"style":227},[1172],{"type":28,"value":685},{"type":23,"tag":220,"props":1174,"children":1176},{"class":222,"line":1175},28,[1177],{"type":23,"tag":220,"props":1178,"children":1179},{"style":227},[1180],{"type":28,"value":309},{"type":23,"tag":24,"props":1182,"children":1183},{},[1184],{"type":28,"value":1185},"執行範例",{"type":23,"tag":209,"props":1187,"children":1189},{"className":211,"code":1188,"language":213,"meta":13,"style":13},"class Program\n{\n    static void Main()\n    {\n        // 使用 ConsoleCharReader 和 ConsoleCharWriter 作為具體實現\n        ICharReader reader = new ConsoleCharReader();\n        ICharWriter writer = new ConsoleCharWriter();\n        \n        Encrypt encrypt = new Encrypt(reader, writer);\n        encrypt.PerformEncryption();\n    }\n}\n",[1190],{"type":23,"tag":216,"props":1191,"children":1192},{"__ignoreMap":13},[1193,1201,1208,1230,1237,1245,1271,1296,1304,1329,1346,1353],{"type":23,"tag":220,"props":1194,"children":1195},{"class":222,"line":223},[1196],{"type":23,"tag":220,"props":1197,"children":1198},{"style":227},[1199],{"type":28,"value":1200},"class Program\n",{"type":23,"tag":220,"props":1202,"children":1203},{"class":222,"line":244},[1204],{"type":23,"tag":220,"props":1205,"children":1206},{"style":227},[1207],{"type":28,"value":501},{"type":23,"tag":220,"props":1209,"children":1210},{"class":222,"line":270},[1211,1216,1221,1226],{"type":23,"tag":220,"props":1212,"children":1213},{"style":248},[1214],{"type":28,"value":1215},"    static",{"type":23,"tag":220,"props":1217,"children":1218},{"style":507},[1219],{"type":28,"value":1220}," void",{"type":23,"tag":220,"props":1222,"children":1223},{"style":233},[1224],{"type":28,"value":1225}," Main",{"type":23,"tag":220,"props":1227,"children":1228},{"style":227},[1229],{"type":28,"value":637},{"type":23,"tag":220,"props":1231,"children":1232},{"class":222,"line":303},[1233],{"type":23,"tag":220,"props":1234,"children":1235},{"style":227},[1236],{"type":28,"value":645},{"type":23,"tag":220,"props":1238,"children":1239},{"class":222,"line":530},[1240],{"type":23,"tag":220,"props":1241,"children":1242},{"style":651},[1243],{"type":28,"value":1244},"        // 使用 ConsoleCharReader 和 ConsoleCharWriter 作為具體實現\n",{"type":23,"tag":220,"props":1246,"children":1247},{"class":222,"line":539},[1248,1253,1257,1262,1267],{"type":23,"tag":220,"props":1249,"children":1250},{"style":227},[1251],{"type":28,"value":1252},"        ICharReader reader ",{"type":23,"tag":220,"props":1254,"children":1255},{"style":248},[1256],{"type":28,"value":885},{"type":23,"tag":220,"props":1258,"children":1259},{"style":227},[1260],{"type":28,"value":1261}," new ",{"type":23,"tag":220,"props":1263,"children":1264},{"style":233},[1265],{"type":28,"value":1266},"ConsoleCharReader",{"type":23,"tag":220,"props":1268,"children":1269},{"style":227},[1270],{"type":28,"value":520},{"type":23,"tag":220,"props":1272,"children":1273},{"class":222,"line":548},[1274,1279,1283,1287,1292],{"type":23,"tag":220,"props":1275,"children":1276},{"style":227},[1277],{"type":28,"value":1278},"        ICharWriter writer ",{"type":23,"tag":220,"props":1280,"children":1281},{"style":248},[1282],{"type":28,"value":885},{"type":23,"tag":220,"props":1284,"children":1285},{"style":227},[1286],{"type":28,"value":1261},{"type":23,"tag":220,"props":1288,"children":1289},{"style":233},[1290],{"type":28,"value":1291},"ConsoleCharWriter",{"type":23,"tag":220,"props":1293,"children":1294},{"style":227},[1295],{"type":28,"value":520},{"type":23,"tag":220,"props":1297,"children":1298},{"class":222,"line":556},[1299],{"type":23,"tag":220,"props":1300,"children":1301},{"style":227},[1302],{"type":28,"value":1303},"        \n",{"type":23,"tag":220,"props":1305,"children":1306},{"class":222,"line":584},[1307,1312,1316,1320,1324],{"type":23,"tag":220,"props":1308,"children":1309},{"style":227},[1310],{"type":28,"value":1311},"        Encrypt encrypt ",{"type":23,"tag":220,"props":1313,"children":1314},{"style":248},[1315],{"type":28,"value":885},{"type":23,"tag":220,"props":1317,"children":1318},{"style":227},[1319],{"type":28,"value":1261},{"type":23,"tag":220,"props":1321,"children":1322},{"style":233},[1323],{"type":28,"value":860},{"type":23,"tag":220,"props":1325,"children":1326},{"style":227},[1327],{"type":28,"value":1328},"(reader, writer);\n",{"type":23,"tag":220,"props":1330,"children":1331},{"class":222,"line":702},[1332,1337,1342],{"type":23,"tag":220,"props":1333,"children":1334},{"style":227},[1335],{"type":28,"value":1336},"        encrypt.",{"type":23,"tag":220,"props":1338,"children":1339},{"style":233},[1340],{"type":28,"value":1341},"PerformEncryption",{"type":23,"tag":220,"props":1343,"children":1344},{"style":227},[1345],{"type":28,"value":520},{"type":23,"tag":220,"props":1347,"children":1348},{"class":222,"line":711},[1349],{"type":23,"tag":220,"props":1350,"children":1351},{"style":227},[1352],{"type":28,"value":685},{"type":23,"tag":220,"props":1354,"children":1355},{"class":222,"line":719},[1356],{"type":23,"tag":220,"props":1357,"children":1358},{"style":227},[1359],{"type":28,"value":309},{"type":23,"tag":145,"props":1361,"children":1363},{"id":1362},"依賴倒轉的具體原則",[1364],{"type":28,"value":1362},{"type":23,"tag":35,"props":1366,"children":1367},{},[1368,1373,1378,1383,1388],{"type":23,"tag":39,"props":1369,"children":1370},{},[1371],{"type":28,"value":1372},"高層次模組（Encrypt）依賴於抽象：Encrypt 只知道 ICharReader 和 ICharWriter，不需要知道具體的實現。",{"type":23,"tag":39,"props":1374,"children":1375},{},[1376],{"type":28,"value":1377},"低層次模組依賴於抽象：Console Reader 和 Console Writer 這些低層次實作依賴於接口（ICharReader 和 ICharWriter），它們負責具體的行為實作。",{"type":23,"tag":39,"props":1379,"children":1380},{},[1381],{"type":28,"value":1382},"這樣的設計使得高層次模組和低層次模組之間的依賴不再是單向的（即高層模組依賴低層模組），而是透過抽象來進行解耦，實現依賴的倒轉。",{"type":23,"tag":39,"props":1384,"children":1385},{},[1386],{"type":28,"value":1387},"透過依賴倒轉原則，我們使 Encrypt 依賴於介面（ICharReader 和 ICharWriter），這樣未來如果要替換具體的 Reader 或 Writer 實作（例如從檔案讀取或寫入），只需要實現新的類別即可，而不需要修改 Encrypt 類別。",{"type":23,"tag":39,"props":1389,"children":1390},{},[1391],{"type":28,"value":1392},"這種設計提高了系統的彈性和可維護性，讓高層邏輯與低層細節實現解耦。",{"type":23,"tag":145,"props":1394,"children":1396},{"id":1395},"策略分組",[1397],{"type":28,"value":1395},{"type":23,"tag":24,"props":1399,"children":1400},{},[1401],{"type":28,"value":1402},"如同開頭所提到的，我們應該根據策略發生變更的方式將它們分成不同的元件。變更原因和變更時間相同的策略應在 SRP 和 CCP 這兩個原則的指導下合併為同一組件。離輸入/輸出最遠的策略—高層策略—一般變更沒有那麼頻繁。即使發生變更，原因也比低層策略所在的元件更重大。反之，低層策略則很有可能會頻繁地進行一些小變更。",{"type":23,"tag":369,"props":1404,"children":1405},{},[1406,1407,1412,1471,1476],{"type":28,"value":373},{"type":23,"tag":375,"props":1408,"children":1409},{},[1410],{"type":28,"value":1411},"SRP 和 CCP 補充",{"type":23,"tag":381,"props":1413,"children":1414},{},[1415,1446],{"type":23,"tag":39,"props":1416,"children":1417},{},[1418,1420],{"type":28,"value":1419},"SRP - 單一職責原則（Single Responsibility Principle）\n",{"type":23,"tag":35,"props":1421,"children":1422},{},[1423,1428],{"type":23,"tag":39,"props":1424,"children":1425},{},[1426],{"type":28,"value":1427},"SRP 的核心理念是每個模組或類別應僅負責一個職責。也就是說，一個類別或模組應該只有一個引起它變更的原因。如果一個類別承擔了過多的職責，當其中一個職責發生變更時，這個類別就需要被修改，導致程式碼變得不穩定、難以維護。",{"type":23,"tag":39,"props":1429,"children":1430},{},[1431,1433],{"type":28,"value":1432},"範例：\n",{"type":23,"tag":35,"props":1434,"children":1435},{},[1436,1441],{"type":23,"tag":39,"props":1437,"children":1438},{},[1439],{"type":28,"value":1440},"假設有一個類別 Employee，既負責處理員工的薪資計算邏輯，又負責將員工資料儲存到資料庫。這樣一來，如果薪資計算邏輯發生變化，或是資料庫邏輯變更，Employee 類別都需要被修改，違反了 SRP。",{"type":23,"tag":39,"props":1442,"children":1443},{},[1444],{"type":28,"value":1445},"改進：將薪資計算邏輯和資料庫保存邏輯分離到不同的類別中，這樣每個類別只負責一個職責，遵循了 SRP。",{"type":23,"tag":39,"props":1447,"children":1448},{},[1449,1451],{"type":28,"value":1450},"CCP - 共同封閉原則（Common Closure Principle）\n",{"type":23,"tag":35,"props":1452,"children":1453},{},[1454,1459],{"type":23,"tag":39,"props":1455,"children":1456},{},[1457],{"type":28,"value":1458},"CCP 的意思是應該把那些因為相同的原因而同時變化的類別封裝到同一個元件中。換句話說，一個元件中的所有類別應該一起修改，因為它們共享相同的變更原因。這樣可以減少對組件的修改次數，提升系統的穩定性。",{"type":23,"tag":39,"props":1460,"children":1461},{},[1462,1463],{"type":28,"value":1432},{"type":23,"tag":35,"props":1464,"children":1465},{},[1466],{"type":23,"tag":39,"props":1467,"children":1468},{},[1469],{"type":28,"value":1470},"假設我們有一個模組管理不同的使用者角色和權限。如果每次權限模型變更時，需要修改多個類，那麼這些類別應該在同一個元件中，因為它們的變更原因是一致的。",{"type":23,"tag":24,"props":1472,"children":1473},{},[1474],{"type":28,"value":1475},"總結：",{"type":23,"tag":35,"props":1477,"children":1478},{},[1479,1484],{"type":23,"tag":39,"props":1480,"children":1481},{},[1482],{"type":28,"value":1483},"SRP 關注的是每個類別的職責，確保每個類別只做一件事。",{"type":23,"tag":39,"props":1485,"children":1486},{},[1487],{"type":28,"value":1488},"CCP 關注的是組件的封閉性，確保由於相同原因變更的類別在一個組件中。",{"type":23,"tag":91,"props":1490,"children":1491},{},[],{"type":23,"tag":78,"props":1493,"children":1494},{"align":80},[1495,1496,1501,1504],{"type":28,"value":83},{"type":23,"tag":85,"props":1497,"children":1500},{"src":1498,"width":1499},"/code-study/images/clean-arch/19/04.png","80%",[],{"type":23,"tag":91,"props":1502,"children":1503},{},[],{"type":28,"value":1505},"\n  圖 19.4\n",{"type":23,"tag":91,"props":1507,"children":1508},{},[],{"type":23,"tag":369,"props":1510,"children":1511},{},[1512,1513,1517],{"type":28,"value":373},{"type":23,"tag":375,"props":1514,"children":1515},{},[1516],{"type":28,"value":379},{"type":23,"tag":381,"props":1518,"children":1519},{},[1520,1525],{"type":23,"tag":39,"props":1521,"children":1522},{},[1523],{"type":28,"value":1524},"圖 19.4 中的箭頭是 從 IO Devices 指向 Encryption，這表明 IO Devices 依賴 Encryption。",{"type":23,"tag":39,"props":1526,"children":1527},{},[1528],{"type":28,"value":1529},"IO Devices 知道並依賴於 Encryption，但 Encryption 並不依賴 IO Devices。這是依賴倒轉原則中的重要概念——高層次的組件不應該依賴低層次的具體實現。",{"type":23,"tag":369,"props":1531,"children":1532},{},[1533,1534,1538],{"type":28,"value":373},{"type":23,"tag":375,"props":1535,"children":1536},{},[1537],{"type":28,"value":473},{"type":23,"tag":209,"props":1539,"children":1541},{"className":211,"code":1540,"language":213,"meta":13,"style":13},"public interface IIODevices\n{\n    char Read();\n    void Write(char c);\n}\n\npublic class ConsoleIODevices : IIODevices\n{\n    public char Read()\n    {\n        // 讀取控制台的輸入\n        return Console.ReadKey().KeyChar;\n    }\n\n    public void Write(char c)\n    {\n        // 輸出到控制台\n        Console.Write(c);\n    }\n}\n\npublic class Encryption\n{\n    public char EncryptChar(char c)\n    {\n        // 簡單的加密邏輯，將字元轉換為下一個字母\n        return (char)(c + 1);\n    }\n}\n\npublic class IOHandler\n{\n    private readonly IIODevices _ioDevices;\n    private readonly Encryption _encryption;\n\n    public IOHandler(IIODevices ioDevices, Encryption encryption)\n    {\n        _ioDevices = ioDevices;\n        _encryption = encryption;\n    }\n\n    public void ProcessIO()\n    {\n        char input = _ioDevices.Read();\n        char encrypted = _encryption.EncryptChar(input);\n        _ioDevices.Write(encrypted);\n    }\n}\n\nclass Program\n{\n    static void Main()\n    {\n        IIODevices consoleIO = new ConsoleIODevices();\n        Encryption encryption = new Encryption();\n\n        IOHandler ioHandler = new IOHandler(consoleIO, encryption);\n        ioHandler.ProcessIO();\n    }\n}\n",[1542],{"type":23,"tag":216,"props":1543,"children":1544},{"__ignoreMap":13},[1545,1553,1560,1576,1600,1607,1614,1622,1629,1648,1655,1663,1682,1689,1696,1723,1730,1738,1753,1760,1767,1774,1782,1789,1817,1824,1832,1863,1870,1878,1886,1895,1903,1912,1921,1929,1947,1955,1973,1991,1999,2007,2028,2036,2068,2100,2118,2126,2134,2142,2150,2158,2178,2186,2212,2238,2246,2272,2290,2298],{"type":23,"tag":220,"props":1546,"children":1547},{"class":222,"line":223},[1548],{"type":23,"tag":220,"props":1549,"children":1550},{"style":227},[1551],{"type":28,"value":1552},"public interface IIODevices\n",{"type":23,"tag":220,"props":1554,"children":1555},{"class":222,"line":244},[1556],{"type":23,"tag":220,"props":1557,"children":1558},{"style":227},[1559],{"type":28,"value":501},{"type":23,"tag":220,"props":1561,"children":1562},{"class":222,"line":270},[1563,1567,1572],{"type":23,"tag":220,"props":1564,"children":1565},{"style":507},[1566],{"type":28,"value":510},{"type":23,"tag":220,"props":1568,"children":1569},{"style":233},[1570],{"type":28,"value":1571}," Read",{"type":23,"tag":220,"props":1573,"children":1574},{"style":227},[1575],{"type":28,"value":520},{"type":23,"tag":220,"props":1577,"children":1578},{"class":222,"line":303},[1579,1583,1588,1592,1596],{"type":23,"tag":220,"props":1580,"children":1581},{"style":507},[1582],{"type":28,"value":562},{"type":23,"tag":220,"props":1584,"children":1585},{"style":233},[1586],{"type":28,"value":1587}," Write",{"type":23,"tag":220,"props":1589,"children":1590},{"style":227},[1591],{"type":28,"value":281},{"type":23,"tag":220,"props":1593,"children":1594},{"style":507},[1595],{"type":28,"value":576},{"type":23,"tag":220,"props":1597,"children":1598},{"style":227},[1599],{"type":28,"value":581},{"type":23,"tag":220,"props":1601,"children":1602},{"class":222,"line":530},[1603],{"type":23,"tag":220,"props":1604,"children":1605},{"style":227},[1606],{"type":28,"value":309},{"type":23,"tag":220,"props":1608,"children":1609},{"class":222,"line":539},[1610],{"type":23,"tag":220,"props":1611,"children":1612},{"emptyLinePlaceholder":5},[1613],{"type":28,"value":536},{"type":23,"tag":220,"props":1615,"children":1616},{"class":222,"line":548},[1617],{"type":23,"tag":220,"props":1618,"children":1619},{"style":227},[1620],{"type":28,"value":1621},"public class ConsoleIODevices : IIODevices\n",{"type":23,"tag":220,"props":1623,"children":1624},{"class":222,"line":556},[1625],{"type":23,"tag":220,"props":1626,"children":1627},{"style":227},[1628],{"type":28,"value":501},{"type":23,"tag":220,"props":1630,"children":1631},{"class":222,"line":584},[1632,1636,1640,1644],{"type":23,"tag":220,"props":1633,"children":1634},{"style":227},[1635],{"type":28,"value":624},{"type":23,"tag":220,"props":1637,"children":1638},{"style":507},[1639],{"type":28,"value":576},{"type":23,"tag":220,"props":1641,"children":1642},{"style":233},[1643],{"type":28,"value":1571},{"type":23,"tag":220,"props":1645,"children":1646},{"style":227},[1647],{"type":28,"value":637},{"type":23,"tag":220,"props":1649,"children":1650},{"class":222,"line":702},[1651],{"type":23,"tag":220,"props":1652,"children":1653},{"style":227},[1654],{"type":28,"value":645},{"type":23,"tag":220,"props":1656,"children":1657},{"class":222,"line":711},[1658],{"type":23,"tag":220,"props":1659,"children":1660},{"style":651},[1661],{"type":28,"value":1662},"        // 讀取控制台的輸入\n",{"type":23,"tag":220,"props":1664,"children":1665},{"class":222,"line":719},[1666,1670,1674,1678],{"type":23,"tag":220,"props":1667,"children":1668},{"style":248},[1669],{"type":28,"value":662},{"type":23,"tag":220,"props":1671,"children":1672},{"style":227},[1673],{"type":28,"value":667},{"type":23,"tag":220,"props":1675,"children":1676},{"style":233},[1677],{"type":28,"value":672},{"type":23,"tag":220,"props":1679,"children":1680},{"style":227},[1681],{"type":28,"value":677},{"type":23,"tag":220,"props":1683,"children":1684},{"class":222,"line":749},[1685],{"type":23,"tag":220,"props":1686,"children":1687},{"style":227},[1688],{"type":28,"value":685},{"type":23,"tag":220,"props":1690,"children":1691},{"class":222,"line":757},[1692],{"type":23,"tag":220,"props":1693,"children":1694},{"emptyLinePlaceholder":5},[1695],{"type":28,"value":536},{"type":23,"tag":220,"props":1697,"children":1698},{"class":222,"line":766},[1699,1703,1707,1711,1715,1719],{"type":23,"tag":220,"props":1700,"children":1701},{"style":227},[1702],{"type":28,"value":624},{"type":23,"tag":220,"props":1704,"children":1705},{"style":507},[1706],{"type":28,"value":729},{"type":23,"tag":220,"props":1708,"children":1709},{"style":233},[1710],{"type":28,"value":1587},{"type":23,"tag":220,"props":1712,"children":1713},{"style":227},[1714],{"type":28,"value":281},{"type":23,"tag":220,"props":1716,"children":1717},{"style":507},[1718],{"type":28,"value":576},{"type":23,"tag":220,"props":1720,"children":1721},{"style":227},[1722],{"type":28,"value":746},{"type":23,"tag":220,"props":1724,"children":1725},{"class":222,"line":785},[1726],{"type":23,"tag":220,"props":1727,"children":1728},{"style":227},[1729],{"type":28,"value":645},{"type":23,"tag":220,"props":1731,"children":1732},{"class":222,"line":793},[1733],{"type":23,"tag":220,"props":1734,"children":1735},{"style":651},[1736],{"type":28,"value":1737},"        // 輸出到控制台\n",{"type":23,"tag":220,"props":1739,"children":1740},{"class":222,"line":1013},[1741,1745,1749],{"type":23,"tag":220,"props":1742,"children":1743},{"style":227},[1744],{"type":28,"value":772},{"type":23,"tag":220,"props":1746,"children":1747},{"style":233},[1748],{"type":28,"value":777},{"type":23,"tag":220,"props":1750,"children":1751},{"style":227},[1752],{"type":28,"value":782},{"type":23,"tag":220,"props":1754,"children":1755},{"class":222,"line":1041},[1756],{"type":23,"tag":220,"props":1757,"children":1758},{"style":227},[1759],{"type":28,"value":685},{"type":23,"tag":220,"props":1761,"children":1762},{"class":222,"line":1060},[1763],{"type":23,"tag":220,"props":1764,"children":1765},{"style":227},[1766],{"type":28,"value":309},{"type":23,"tag":220,"props":1768,"children":1769},{"class":222,"line":1069},[1770],{"type":23,"tag":220,"props":1771,"children":1772},{"emptyLinePlaceholder":5},[1773],{"type":28,"value":536},{"type":23,"tag":220,"props":1775,"children":1776},{"class":222,"line":1077},[1777],{"type":23,"tag":220,"props":1778,"children":1779},{"style":227},[1780],{"type":28,"value":1781},"public class Encryption\n",{"type":23,"tag":220,"props":1783,"children":1784},{"class":222,"line":1085},[1785],{"type":23,"tag":220,"props":1786,"children":1787},{"style":227},[1788],{"type":28,"value":501},{"type":23,"tag":220,"props":1790,"children":1791},{"class":222,"line":1114},[1792,1796,1800,1805,1809,1813],{"type":23,"tag":220,"props":1793,"children":1794},{"style":227},[1795],{"type":28,"value":624},{"type":23,"tag":220,"props":1797,"children":1798},{"style":507},[1799],{"type":28,"value":576},{"type":23,"tag":220,"props":1801,"children":1802},{"style":233},[1803],{"type":28,"value":1804}," EncryptChar",{"type":23,"tag":220,"props":1806,"children":1807},{"style":227},[1808],{"type":28,"value":281},{"type":23,"tag":220,"props":1810,"children":1811},{"style":507},[1812],{"type":28,"value":576},{"type":23,"tag":220,"props":1814,"children":1815},{"style":227},[1816],{"type":28,"value":746},{"type":23,"tag":220,"props":1818,"children":1819},{"class":222,"line":1122},[1820],{"type":23,"tag":220,"props":1821,"children":1822},{"style":227},[1823],{"type":28,"value":645},{"type":23,"tag":220,"props":1825,"children":1826},{"class":222,"line":1131},[1827],{"type":23,"tag":220,"props":1828,"children":1829},{"style":651},[1830],{"type":28,"value":1831},"        // 簡單的加密邏輯，將字元轉換為下一個字母\n",{"type":23,"tag":220,"props":1833,"children":1834},{"class":222,"line":1167},[1835,1839,1843,1847,1851,1855,1859],{"type":23,"tag":220,"props":1836,"children":1837},{"style":248},[1838],{"type":28,"value":662},{"type":23,"tag":220,"props":1840,"children":1841},{"style":227},[1842],{"type":28,"value":256},{"type":23,"tag":220,"props":1844,"children":1845},{"style":507},[1846],{"type":28,"value":576},{"type":23,"tag":220,"props":1848,"children":1849},{"style":227},[1850],{"type":28,"value":1149},{"type":23,"tag":220,"props":1852,"children":1853},{"style":248},[1854],{"type":28,"value":1154},{"type":23,"tag":220,"props":1856,"children":1857},{"style":259},[1858],{"type":28,"value":1159},{"type":23,"tag":220,"props":1860,"children":1861},{"style":227},[1862],{"type":28,"value":1164},{"type":23,"tag":220,"props":1864,"children":1865},{"class":222,"line":1175},[1866],{"type":23,"tag":220,"props":1867,"children":1868},{"style":227},[1869],{"type":28,"value":685},{"type":23,"tag":220,"props":1871,"children":1873},{"class":222,"line":1872},29,[1874],{"type":23,"tag":220,"props":1875,"children":1876},{"style":227},[1877],{"type":28,"value":309},{"type":23,"tag":220,"props":1879,"children":1881},{"class":222,"line":1880},30,[1882],{"type":23,"tag":220,"props":1883,"children":1884},{"emptyLinePlaceholder":5},[1885],{"type":28,"value":536},{"type":23,"tag":220,"props":1887,"children":1889},{"class":222,"line":1888},31,[1890],{"type":23,"tag":220,"props":1891,"children":1892},{"style":227},[1893],{"type":28,"value":1894},"public class IOHandler\n",{"type":23,"tag":220,"props":1896,"children":1898},{"class":222,"line":1897},32,[1899],{"type":23,"tag":220,"props":1900,"children":1901},{"style":227},[1902],{"type":28,"value":501},{"type":23,"tag":220,"props":1904,"children":1906},{"class":222,"line":1905},33,[1907],{"type":23,"tag":220,"props":1908,"children":1909},{"style":227},[1910],{"type":28,"value":1911},"    private readonly IIODevices _ioDevices;\n",{"type":23,"tag":220,"props":1913,"children":1915},{"class":222,"line":1914},34,[1916],{"type":23,"tag":220,"props":1917,"children":1918},{"style":227},[1919],{"type":28,"value":1920},"    private readonly Encryption _encryption;\n",{"type":23,"tag":220,"props":1922,"children":1924},{"class":222,"line":1923},35,[1925],{"type":23,"tag":220,"props":1926,"children":1927},{"emptyLinePlaceholder":5},[1928],{"type":28,"value":536},{"type":23,"tag":220,"props":1930,"children":1932},{"class":222,"line":1931},36,[1933,1937,1942],{"type":23,"tag":220,"props":1934,"children":1935},{"style":227},[1936],{"type":28,"value":624},{"type":23,"tag":220,"props":1938,"children":1939},{"style":233},[1940],{"type":28,"value":1941},"IOHandler",{"type":23,"tag":220,"props":1943,"children":1944},{"style":227},[1945],{"type":28,"value":1946},"(IIODevices ioDevices, Encryption encryption)\n",{"type":23,"tag":220,"props":1948,"children":1950},{"class":222,"line":1949},37,[1951],{"type":23,"tag":220,"props":1952,"children":1953},{"style":227},[1954],{"type":28,"value":645},{"type":23,"tag":220,"props":1956,"children":1958},{"class":222,"line":1957},38,[1959,1964,1968],{"type":23,"tag":220,"props":1960,"children":1961},{"style":227},[1962],{"type":28,"value":1963},"        _ioDevices ",{"type":23,"tag":220,"props":1965,"children":1966},{"style":248},[1967],{"type":28,"value":885},{"type":23,"tag":220,"props":1969,"children":1970},{"style":227},[1971],{"type":28,"value":1972}," ioDevices;\n",{"type":23,"tag":220,"props":1974,"children":1976},{"class":222,"line":1975},39,[1977,1982,1986],{"type":23,"tag":220,"props":1978,"children":1979},{"style":227},[1980],{"type":28,"value":1981},"        _encryption ",{"type":23,"tag":220,"props":1983,"children":1984},{"style":248},[1985],{"type":28,"value":885},{"type":23,"tag":220,"props":1987,"children":1988},{"style":227},[1989],{"type":28,"value":1990}," encryption;\n",{"type":23,"tag":220,"props":1992,"children":1994},{"class":222,"line":1993},40,[1995],{"type":23,"tag":220,"props":1996,"children":1997},{"style":227},[1998],{"type":28,"value":685},{"type":23,"tag":220,"props":2000,"children":2002},{"class":222,"line":2001},41,[2003],{"type":23,"tag":220,"props":2004,"children":2005},{"emptyLinePlaceholder":5},[2006],{"type":28,"value":536},{"type":23,"tag":220,"props":2008,"children":2010},{"class":222,"line":2009},42,[2011,2015,2019,2024],{"type":23,"tag":220,"props":2012,"children":2013},{"style":227},[2014],{"type":28,"value":624},{"type":23,"tag":220,"props":2016,"children":2017},{"style":507},[2018],{"type":28,"value":729},{"type":23,"tag":220,"props":2020,"children":2021},{"style":233},[2022],{"type":28,"value":2023}," ProcessIO",{"type":23,"tag":220,"props":2025,"children":2026},{"style":227},[2027],{"type":28,"value":637},{"type":23,"tag":220,"props":2029,"children":2031},{"class":222,"line":2030},43,[2032],{"type":23,"tag":220,"props":2033,"children":2034},{"style":227},[2035],{"type":28,"value":645},{"type":23,"tag":220,"props":2037,"children":2039},{"class":222,"line":2038},44,[2040,2045,2050,2054,2059,2064],{"type":23,"tag":220,"props":2041,"children":2042},{"style":507},[2043],{"type":28,"value":2044},"        char",{"type":23,"tag":220,"props":2046,"children":2047},{"style":227},[2048],{"type":28,"value":2049}," input ",{"type":23,"tag":220,"props":2051,"children":2052},{"style":248},[2053],{"type":28,"value":885},{"type":23,"tag":220,"props":2055,"children":2056},{"style":227},[2057],{"type":28,"value":2058}," _ioDevices.",{"type":23,"tag":220,"props":2060,"children":2061},{"style":233},[2062],{"type":28,"value":2063},"Read",{"type":23,"tag":220,"props":2065,"children":2066},{"style":227},[2067],{"type":28,"value":520},{"type":23,"tag":220,"props":2069,"children":2071},{"class":222,"line":2070},45,[2072,2076,2081,2085,2090,2095],{"type":23,"tag":220,"props":2073,"children":2074},{"style":507},[2075],{"type":28,"value":2044},{"type":23,"tag":220,"props":2077,"children":2078},{"style":227},[2079],{"type":28,"value":2080}," encrypted ",{"type":23,"tag":220,"props":2082,"children":2083},{"style":248},[2084],{"type":28,"value":885},{"type":23,"tag":220,"props":2086,"children":2087},{"style":227},[2088],{"type":28,"value":2089}," _encryption.",{"type":23,"tag":220,"props":2091,"children":2092},{"style":233},[2093],{"type":28,"value":2094},"EncryptChar",{"type":23,"tag":220,"props":2096,"children":2097},{"style":227},[2098],{"type":28,"value":2099},"(input);\n",{"type":23,"tag":220,"props":2101,"children":2103},{"class":222,"line":2102},46,[2104,2109,2113],{"type":23,"tag":220,"props":2105,"children":2106},{"style":227},[2107],{"type":28,"value":2108},"        _ioDevices.",{"type":23,"tag":220,"props":2110,"children":2111},{"style":233},[2112],{"type":28,"value":777},{"type":23,"tag":220,"props":2114,"children":2115},{"style":227},[2116],{"type":28,"value":2117},"(encrypted);\n",{"type":23,"tag":220,"props":2119,"children":2121},{"class":222,"line":2120},47,[2122],{"type":23,"tag":220,"props":2123,"children":2124},{"style":227},[2125],{"type":28,"value":685},{"type":23,"tag":220,"props":2127,"children":2129},{"class":222,"line":2128},48,[2130],{"type":23,"tag":220,"props":2131,"children":2132},{"style":227},[2133],{"type":28,"value":309},{"type":23,"tag":220,"props":2135,"children":2137},{"class":222,"line":2136},49,[2138],{"type":23,"tag":220,"props":2139,"children":2140},{"emptyLinePlaceholder":5},[2141],{"type":28,"value":536},{"type":23,"tag":220,"props":2143,"children":2145},{"class":222,"line":2144},50,[2146],{"type":23,"tag":220,"props":2147,"children":2148},{"style":227},[2149],{"type":28,"value":1200},{"type":23,"tag":220,"props":2151,"children":2153},{"class":222,"line":2152},51,[2154],{"type":23,"tag":220,"props":2155,"children":2156},{"style":227},[2157],{"type":28,"value":501},{"type":23,"tag":220,"props":2159,"children":2161},{"class":222,"line":2160},52,[2162,2166,2170,2174],{"type":23,"tag":220,"props":2163,"children":2164},{"style":248},[2165],{"type":28,"value":1215},{"type":23,"tag":220,"props":2167,"children":2168},{"style":507},[2169],{"type":28,"value":1220},{"type":23,"tag":220,"props":2171,"children":2172},{"style":233},[2173],{"type":28,"value":1225},{"type":23,"tag":220,"props":2175,"children":2176},{"style":227},[2177],{"type":28,"value":637},{"type":23,"tag":220,"props":2179,"children":2181},{"class":222,"line":2180},53,[2182],{"type":23,"tag":220,"props":2183,"children":2184},{"style":227},[2185],{"type":28,"value":645},{"type":23,"tag":220,"props":2187,"children":2189},{"class":222,"line":2188},54,[2190,2195,2199,2203,2208],{"type":23,"tag":220,"props":2191,"children":2192},{"style":227},[2193],{"type":28,"value":2194},"        IIODevices consoleIO ",{"type":23,"tag":220,"props":2196,"children":2197},{"style":248},[2198],{"type":28,"value":885},{"type":23,"tag":220,"props":2200,"children":2201},{"style":227},[2202],{"type":28,"value":1261},{"type":23,"tag":220,"props":2204,"children":2205},{"style":233},[2206],{"type":28,"value":2207},"ConsoleIODevices",{"type":23,"tag":220,"props":2209,"children":2210},{"style":227},[2211],{"type":28,"value":520},{"type":23,"tag":220,"props":2213,"children":2215},{"class":222,"line":2214},55,[2216,2221,2225,2229,2234],{"type":23,"tag":220,"props":2217,"children":2218},{"style":227},[2219],{"type":28,"value":2220},"        Encryption encryption ",{"type":23,"tag":220,"props":2222,"children":2223},{"style":248},[2224],{"type":28,"value":885},{"type":23,"tag":220,"props":2226,"children":2227},{"style":227},[2228],{"type":28,"value":1261},{"type":23,"tag":220,"props":2230,"children":2231},{"style":233},[2232],{"type":28,"value":2233},"Encryption",{"type":23,"tag":220,"props":2235,"children":2236},{"style":227},[2237],{"type":28,"value":520},{"type":23,"tag":220,"props":2239,"children":2241},{"class":222,"line":2240},56,[2242],{"type":23,"tag":220,"props":2243,"children":2244},{"emptyLinePlaceholder":5},[2245],{"type":28,"value":536},{"type":23,"tag":220,"props":2247,"children":2249},{"class":222,"line":2248},57,[2250,2255,2259,2263,2267],{"type":23,"tag":220,"props":2251,"children":2252},{"style":227},[2253],{"type":28,"value":2254},"        IOHandler ioHandler ",{"type":23,"tag":220,"props":2256,"children":2257},{"style":248},[2258],{"type":28,"value":885},{"type":23,"tag":220,"props":2260,"children":2261},{"style":227},[2262],{"type":28,"value":1261},{"type":23,"tag":220,"props":2264,"children":2265},{"style":233},[2266],{"type":28,"value":1941},{"type":23,"tag":220,"props":2268,"children":2269},{"style":227},[2270],{"type":28,"value":2271},"(consoleIO, encryption);\n",{"type":23,"tag":220,"props":2273,"children":2275},{"class":222,"line":2274},58,[2276,2281,2286],{"type":23,"tag":220,"props":2277,"children":2278},{"style":227},[2279],{"type":28,"value":2280},"        ioHandler.",{"type":23,"tag":220,"props":2282,"children":2283},{"style":233},[2284],{"type":28,"value":2285},"ProcessIO",{"type":23,"tag":220,"props":2287,"children":2288},{"style":227},[2289],{"type":28,"value":520},{"type":23,"tag":220,"props":2291,"children":2293},{"class":222,"line":2292},59,[2294],{"type":23,"tag":220,"props":2295,"children":2296},{"style":227},[2297],{"type":28,"value":685},{"type":23,"tag":220,"props":2299,"children":2301},{"class":222,"line":2300},60,[2302],{"type":23,"tag":220,"props":2303,"children":2304},{"style":227},[2305],{"type":28,"value":309},{"type":23,"tag":91,"props":2307,"children":2308},{},[],{"type":23,"tag":24,"props":2310,"children":2311},{},[2312],{"type":28,"value":1475},{"type":23,"tag":35,"props":2314,"children":2315},{},[2316,2321,2326],{"type":23,"tag":39,"props":2317,"children":2318},{},[2319],{"type":28,"value":2320},"Encryption 不需要知道 IO Devices 的具體實作。它只專注於加密邏輯。",{"type":23,"tag":39,"props":2322,"children":2323},{},[2324],{"type":28,"value":2325},"IO Devices（例如 ConsoleIO）依賴於 Encryption 來處理讀取到的數據。",{"type":23,"tag":39,"props":2327,"children":2328},{},[2329],{"type":28,"value":2330},"這樣的設計遵循了依賴倒轉原則，保持了高層邏輯與具體實作之間的解耦，提供了靈活性和可維護性。",{"type":23,"tag":91,"props":2332,"children":2333},{},[],{"type":23,"tag":133,"props":2335,"children":2337},{"id":2336},"conclusion-本章小結",[2338],{"type":28,"value":2339},"CONCLUSION 本章小結",{"type":23,"tag":24,"props":2341,"children":2342},{},[2343],{"type":28,"value":2344},"本章針對策略的討論涉及單一職責原則（SRP）、共同閉包原則（CCP）、依賴反轉原則（DIP）。",{"type":23,"tag":2346,"props":2347,"children":2348},"style",{},[2349],{"type":28,"value":2350},"html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":13,"searchDepth":244,"depth":244,"links":2352},[2353,2361],{"id":135,"depth":244,"text":138,"children":2354},[2355,2356,2357,2358,2359,2360],{"id":147,"depth":270,"text":147},{"id":165,"depth":270,"text":165},{"id":312,"depth":270,"text":312},{"id":338,"depth":270,"text":341},{"id":1362,"depth":270,"text":1362},{"id":1395,"depth":270,"text":1395},{"id":2336,"depth":244,"text":2339},"markdown","content:6.clean-arch:19.chapter19.md","content","6.clean-arch/19.chapter19.md","md","default",["ShallowRef",2369],["ShallowReactive",2370],{"/clean-arch/chapter19":2371},[2372,2381],{"_path":2373,"_dir":12,"_draft":6,"_partial":6,"_locale":13,"title":2374,"description":2375,"pageTitle":2376,"contributors":2377,"_type":2362,"_id":2379,"_source":2364,"_file":2380,"_extension":2366},"/clean-arch/chapter18","18 邊界剖析","一個系統的架構由一系列軟體元件及它們之間的邊界共同定義，這些邊界有著多種不同存在形式。\n在本章可以看看最常見的一些形式","Chapter 18 邊界剖析",[2378],"pomeloj","content:6.clean-arch:18.chapter18.md","6.clean-arch/18.chapter18.md",{"_path":2382,"_dir":12,"_draft":6,"_partial":6,"_locale":13,"title":2383,"description":2384,"pageTitle":2385,"contributors":2386,"_type":2362,"_id":2387,"_source":2364,"_file":2388,"_extension":2366},"/clean-arch/chapter20","20 BUSINESS RULES 業務邏輯","在應用程式中，我們經常會把程式劃分成業務邏輯和插件等不同部分。這裡的「業務邏輯」指的是那些對企業賺錢或節省成本有直接影響的邏輯。","Chapter 20 業務邏輯",[18],"content:6.clean-arch:20.chapter20.md","6.clean-arch/20.chapter20.md",["ShallowRef",2390],{},[2392,2406,2429,2443,2475,2495,2569],{"title":2393,"_path":2394,"children":2395,"icon":2405},"API","/api",[2396,2399,2402],{"title":2397,"_path":2398},"Components","/api/components",{"title":2400,"_path":2401},"Composables","/api/composables",{"title":2403,"_path":2404},"Layouts","/api/layouts","🛡️",{"title":2407,"_path":2408,"children":2409,"icon":2428},"技術分享","/workshop",[2410,2413,2416,2419,2422,2425],{"title":2411,"_path":2412},"使用Gitlab做CI/CD","/workshop/gitlab-cicd",{"title":2414,"_path":2415},"gRPC快速入門","/workshop/grpc",{"title":2417,"_path":2418},"Liquibase快速入門","/workshop/liquibase",{"title":2420,"_path":2421},"Redis Ring","/workshop/redis-ring",{"title":2423,"_path":2424},"Redis快速入門","/workshop/redis",{"title":2426,"_path":2427},"TDD技術分享 - Part1 灌輸","/workshop/tdd_part1","⚒️",{"title":2430,"_path":2431,"children":2432,"icon":2442},"Web API的設計與開發","/web-api",[2433,2436,2439],{"title":2434,"_path":2435},"第2章 EndPoint設計與請求形式","/web-api/chapter2",{"title":2437,"_path":2438},"第5章 開發方便更改設計的API","/web-api/chapter5",{"title":2440,"_path":2441},"第6章 開發牢固的WebAPI","/web-api/chapter6","📗",{"title":2444,"_path":2445,"children":2446,"icon":2474},"持續交付2.0：實務導向的DevOps","/cicd-2.0",[2447,2450,2453,2456,2459,2462,2465,2468,2471],{"title":2448,"_path":2449},"05 持續交付的軟體系統架構","/cicd-2.0/chapter5",{"title":2451,"_path":2452},"07 部署流水線原則與工具設計","/cicd-2.0/chapter7",{"title":2454,"_path":2455},"08 利於集成的分支策略","/cicd-2.0/chapter8",{"title":2457,"_path":2458},"09 持續整合","/cicd-2.0/chapter9",{"title":2460,"_path":2461},"10 自動化測試策略與方法","/cicd-2.0/chapter10",{"title":2463,"_path":2464},"11 軟件配置管理","/cicd-2.0/chapter11",{"title":2466,"_path":2467},"12 低風險發佈","/cicd-2.0/chapter12",{"title":2469,"_path":2470},"13 監測與決策","/cicd-2.0/chapter13",{"title":2472,"_path":2473},"16 研發推動的DevOps","/cicd-2.0/chapter16","🏷️",{"title":2476,"_path":2477,"children":2478,"icon":2494},"資料密集型應用系統設計","/ddia",[2479,2482,2485,2488,2491],{"title":2480,"_path":2481},"01 可靠性、可伸縮性和可維護性","/ddia/chapter1",{"title":2483,"_path":2484},"03 數據儲存與檢索","/ddia/chapter3",{"title":2486,"_path":2487},"04 編碼與演化","/ddia/chapter4",{"title":2489,"_path":2490},"05 複製","/ddia/chapter5",{"title":2492,"_path":2493},"09 一致性與共識","/ddia/chapter9","📕",{"title":2496,"_path":2497,"children":2498,"icon":2568},"Clean Architecture - 無瑕的程式碼","/clean-arch",[2499,2502,2505,2508,2511,2514,2517,2520,2523,2526,2529,2532,2533,2534,2535,2538,2541,2544,2547,2550,2553,2556,2559,2562,2565],{"title":2500,"_path":2501},"01 什麼是設計與結構","/clean-arch/chapter1",{"title":2503,"_path":2504},"02 兩種價值觀的故事","/clean-arch/chapter2",{"title":2506,"_path":2507},"03 範式概述","/clean-arch/chapter3",{"title":2509,"_path":2510},"04 結構化程式設計","/clean-arch/chapter4",{"title":2512,"_path":2513},"05 物件導向程式設計","/clean-arch/chapter5",{"title":2515,"_path":2516},"06 函數式程式設計","/clean-arch/chapter6",{"title":2518,"_path":2519},"12 元件","/clean-arch/chapter12",{"title":2521,"_path":2522},"13 元件內聚性","/clean-arch/chapter13",{"title":2524,"_path":2525},"14 元件耦合性","/clean-arch/chapter14",{"title":2527,"_path":2528},"15 什麼是架構","/clean-arch/chapter15",{"title":2530,"_path":2531},"16 獨立性","/clean-arch/chapter16",{"title":2374,"_path":2373},{"title":14,"_path":11},{"title":2383,"_path":2382},{"title":2536,"_path":2537},"21 會尖叫的架構","/clean-arch/chapter21",{"title":2539,"_path":2540},"22 整潔的架構","/clean-arch/chapter22",{"title":2542,"_path":2543},"23 Presenter與Humble Object","/clean-arch/chapter23",{"title":2545,"_path":2546},"24 不完全邊界","/clean-arch/chapter24",{"title":2548,"_path":2549},"25 層與邊界","/clean-arch/chapter25",{"title":2551,"_path":2552},"30 資料庫細節","/clean-arch/chapter30",{"title":2554,"_path":2555},"31 WEB是細節","/clean-arch/chapter31",{"title":2557,"_path":2558},"32 框架也只是細節","/clean-arch/chapter32",{"title":2560,"_path":2561},"33 影片銷售系統案例研究","/clean-arch/chapter33",{"title":2563,"_path":2564},"Clean Architecture 第34章：The Missing Chapter","/clean-arch/chapter34",{"title":2566,"_path":2567},"99 來自於網路世界的書評","/clean-arch/chapter99","📘",{"title":2570,"_path":2571,"children":2572,"icon":2591},"System Design Interview: An Insider’s Guide","/sdi-aig",[2573,2576,2579,2582,2585,2588],{"title":2574,"_path":2575},"01 從 0 到百萬用戶","/sdi-aig/chapter1",{"title":2577,"_path":2578},"設計網路限速器","/sdi-aig/chapter4",{"title":2580,"_path":2581},"設計鍵值儲存系統","/sdi-aig/chapter6",{"title":2583,"_path":2584},"第07章：設計可用於分散式系統的唯一ID生成器","/sdi-aig/chapter7",{"title":2586,"_path":2587},"設計短網址生成器","/sdi-aig/chapter8",{"title":2589,"_path":2590},"第九章: 設計網路爬蟲","/sdi-aig/chapter9","📖",{"📖":-1,"📘":-1,"📕":-1,"🏷️":-1,"📗":-1,"⚒️":-1,"🛡️":-1,"heroicons-outline:menu":2593,"el:group":2596,"mdi:github":2599,"lucide:chevrons-up-down":2601,"uil:edit":2603,"heroicons-outline:arrow-sm-left":2605,"heroicons-outline:arrow-sm-right":2607,"heroicons-outline:chevron-right":2609,"heroicons-outline:book-open":2611,"ph:copy":2613,"heroicons-outline:search":2616},{"left":2594,"top":2594,"width":1114,"height":1114,"rotate":2594,"vFlip":6,"hFlip":6,"body":2595},0,"\u003Cpath fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 6h16M4 12h16M4 18h16\"/>",{"left":2594,"top":2594,"width":2597,"height":2597,"rotate":2594,"vFlip":6,"hFlip":6,"body":2598},1200,"\u003Cpath fill=\"currentColor\" d=\"M596.847 188.488c-103.344 0-187.12 97.81-187.12 218.465c0 83.678 40.296 156.352 99.468 193.047l-68.617 31.801l-182.599 84.688c-17.64 8.821-26.444 23.778-26.444 44.947v201.102c1.451 25.143 16.537 48.577 40.996 48.974h649.62c27.924-2.428 42.05-24.92 42.325-48.974V761.436c0-21.169-8.804-36.126-26.443-44.947l-175.988-84.688l-73.138-34.65c56.744-37.521 95.061-108.624 95.061-190.197c-.001-120.656-83.778-218.466-187.121-218.466m-301.824 76.824c-44.473 1.689-79.719 20.933-106.497 51.596c-29.62 36.918-44.06 80.75-44.339 124.354c1.819 64.478 30.669 125.518 82.029 157.446L21.163 693.997C7.05 699.289 0 711.636 0 731.041v161.398c1.102 21.405 12.216 39.395 33.055 39.703h136.284V761.436c2.255-45.639 23.687-82.529 62.196-100.531l136.247-64.817c10.584-6.175 20.731-14.568 30.433-25.152c-56.176-86.676-63.977-190.491-27.773-281.801c-23.547-14.411-50.01-23.672-75.419-23.823m608.586 0c-29.083.609-55.96 11.319-78.039 26.444c35.217 92.137 25.503 196.016-26.482 276.52c11.467 13.23 23.404 23.377 35.753 30.434l130.965 62.195c39.897 21.881 60.47 59.098 60.866 100.532v170.707h140.235c23.063-1.991 32.893-20.387 33.093-39.704V731.042c0-17.641-7.05-29.987-21.163-37.045l-202.431-96.618c52.498-38.708 78.859-96.72 79.369-156.117c-1.396-47.012-15.757-90.664-44.339-124.354c-29.866-32.399-66.91-51.253-107.827-51.596\"/>",{"left":2594,"top":2594,"width":1114,"height":1114,"rotate":2594,"vFlip":6,"hFlip":6,"body":2600},"\u003Cpath fill=\"currentColor\" d=\"M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2\"/>",{"left":2594,"top":2594,"width":1114,"height":1114,"rotate":2594,"vFlip":6,"hFlip":6,"body":2602},"\u003Cpath fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"m7 15l5 5l5-5M7 9l5-5l5 5\"/>",{"left":2594,"top":2594,"width":1114,"height":1114,"rotate":2594,"vFlip":6,"hFlip":6,"body":2604},"\u003Cpath fill=\"currentColor\" d=\"M21 12a1 1 0 0 0-1 1v6a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h6a1 1 0 0 0 0-2H5a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-6a1 1 0 0 0-1-1m-15 .76V17a1 1 0 0 0 1 1h4.24a1 1 0 0 0 .71-.29l6.92-6.93L21.71 8a1 1 0 0 0 0-1.42l-4.24-4.29a1 1 0 0 0-1.42 0l-2.82 2.83l-6.94 6.93a1 1 0 0 0-.29.71m10.76-8.35l2.83 2.83l-1.42 1.42l-2.83-2.83ZM8 13.17l5.93-5.93l2.83 2.83L10.83 16H8Z\"/>",{"left":2594,"top":2594,"width":1114,"height":1114,"rotate":2594,"vFlip":6,"hFlip":6,"body":2606},"\u003Cpath fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"m11 17l-5-5m0 0l5-5m-5 5h12\"/>",{"left":2594,"top":2594,"width":1114,"height":1114,"rotate":2594,"vFlip":6,"hFlip":6,"body":2608},"\u003Cpath fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"m13 7l5 5m0 0l-5 5m5-5H6\"/>",{"left":2594,"top":2594,"width":1114,"height":1114,"rotate":2594,"vFlip":6,"hFlip":6,"body":2610},"\u003Cpath fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"m9 5l7 7l-7 7\"/>",{"left":2594,"top":2594,"width":1114,"height":1114,"rotate":2594,"vFlip":6,"hFlip":6,"body":2612},"\u003Cpath fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18s-3.332.477-4.5 1.253\"/>",{"left":2594,"top":2594,"width":2614,"height":2614,"rotate":2594,"vFlip":6,"hFlip":6,"body":2615},256,"\u003Cpath fill=\"currentColor\" d=\"M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z\"/>",{"left":2594,"top":2594,"width":1114,"height":1114,"rotate":2594,"vFlip":6,"hFlip":6,"body":2617},"\u003Cpath fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"m21 21l-6-6m2-5a7 7 0 1 1-14 0a7 7 0 0 1 14 0\"/>",{"parentPath":2497,"scrollTop":2594},{},{},{},{},{},{},{},{},["Reactive",2628],{"search-api":2629},null,1760008527127]</script>
<script>window.__NUXT__={};window.__NUXT__.config={public:{baseURL:"/code-study",mdc:{components:{prose:true,map:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"ProseCodeInline",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"}},headings:{anchorLinks:{h1:false,h2:true,h3:true,h4:true,h5:false,h6:false}}},content:{locales:[],defaultLocale:"",integrity:1760008480984,experimental:{stripQueryParameters:false,advanceQuery:false,clientDB:false},respectPathCase:false,api:{baseURL:"/api/_content"},navigation:{fields:["icon","titleTemplate","header","main","aside","footer","layout"]},tags:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"ProseCodeInline",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"},highlight:{theme:{dark:"github-dark",default:"github-light",sepia:"monokai"},preload:["c","cpp","java","bash","xml","powershell","csharp","c#","go","kotlin","proto","sh","shell","zsh","graphql","groovy","json","js","ts","html","css","vue","diff","shell","markdown","yaml","bash","ini"]},wsUrl:"",documentDriven:{page:true,navigation:true,surround:true,globals:{},layoutFallbacks:["theme"],injectPage:true},host:"",trailingSlash:false,search:"",contentHead:true,anchorLinks:{depth:4,exclude:[1]}},studio:{apiURL:"https://api.nuxt.studio"}},app:{baseURL:"/code-study",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body>
</html>